"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b5a330c9-f8be-5e68-9569-9ae1277d4954")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5215],{367780:(e,t,i)=>{i.r(t),i.d(t,{QuillEditor:()=>$,ReadOnlyQuillEditor:()=>V,descriptionEditorFormats:()=>M}),i(236238);var o=i(411855),r=i(629019),n=i.n(r),s=i(296210),l=i.n(s),a=i(859309),d=i(536487),h=i(795737),u=i(566065),c=i(2896),p=i(22688),g=i(688476),m=i(737294),f=i(523468),y=i(743052),E=i(344593),b=i(658546),k=i(498750),C=i(939863),x=i(498606),S=i(563042),A=i(109388),q=i(841563),v=i.n(q);class T extends o.Component{constructor(e){super(e),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(e,t,i,o)=>{"text-change"===e?this.onEditorChangeText?.(this.editor.root.innerHTML,t,o,this.unprivilegedEditor):"selection-change"===e&&this.onEditorChangeSelection?.(t,o,this.unprivilegedEditor)};let t=this.isControlled()?e.value:e.defaultValue;this.value=t??""}validateProps(e){if(o.Children.count(e.children)>1)throw Error("The Quill editing area can only be composed of a single React element.");if(o.Children.count(e.children)){let t=o.Children.only(e.children);if(t?.type==="textarea")throw Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){let t=this.getEditorContents(),i=e.value??"";this.isEqualValue(i,t)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(t=>!v()(e[t],this.props[t]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!v()(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){let e=this.editor.getContents(),t=this.editor.getSelection();this.regenerationSnapshot={delta:e,selection:t},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){let{delta:e,selection:t}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();let i=this.editor;i.setContents(e),_(()=>this.setEditorSelection(i,t))}}instantiateEditor(){this.editor||(this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig()))}destroyEditor(){this.editor&&(this.unhookEditor(this.editor),delete this.editor)}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw Error("Accessing non-instantiated editor");return this.editor}createEditor(e,t){let i=new a.Ay(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(i,t.tabIndex),this.hookEditor(i),i}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?v()(e.ops,t.ops):v()(e,t)}setEditorContents(e,t){this.value=t;let i=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),_(()=>this.setEditorSelection(e,i))}setEditorSelection(e,t){if(this.selection=t,t){let i=e.getLength();t.index=Math.max(0,Math.min(t.index,i-1)),t.length=Math.max(0,Math.min(t.length,i-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){return{getHTML:()=>e.root.innerHTML,getLength:e.getLength.bind(e),getText:e.getText.bind(e),getContents:e.getContents.bind(e),getSelection:e.getSelection.bind(e),getBounds:e.getBounds.bind(e)}}getEditingArea(){if(!this.editingArea)throw Error("Instantiating on missing editing area");let e=A.findDOMNode(this.editingArea);if(!e)throw Error("Cannot find element for editing area");if(3===e.nodeType)throw Error("Editing area cannot be a text node");return e}renderEditingArea(){let{children:e,preserveWhitespace:t}=this.props,{generation:i}=this.state,r={key:i,ref:e=>{this.editingArea=e}};return o.Children.count(e)?o.cloneElement(o.Children.only(e),r):t?o.createElement("pre",{...r}):o.createElement("div",{...r})}render(){return o.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,ref:this.props.innerRef,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,i,o){if(!this.editor)return;let r=this.isDelta(this.value)?o.getContents():o.getHTML();r!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=r,this.props.onChange?.(e,t,i,o))}onEditorChangeSelection(e,t,i){if(!this.editor)return;let o=this.getEditorSelection(),r=!o&&e,n=o&&!e;!v()(e,o)&&(this.selection=e,this.props.onChangeSelection?.(e,t,i),r?this.props.onFocus?.(e,t,i):n&&this.props.onBlur?.(o,t,i))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}function _(e){Promise.resolve().then(e)}T.displayName="React Quill",T.Quill=a.Ay,T.defaultProps={theme:"snow",modules:{},readOnly:!1};var K=i(472346),w=i(559483),N=i(652972),L=i(42074),D=i(6473),Q=i(844127),R=i(501183),B=i(118425),I=i(661260);let M=["bold","italic","strike","header","list","link","code","code-block"],O={ALLOWED_TAGS:["p","ol","ul","blockquote","h1","h2","strong","em","s","a","li","code","pre","br","div"]},P=l()();P.addHook("afterSanitizeAttributes",function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer noopener nofollow ugc"))}),T.Quill.register("modules/keyboardBindings",class{constructor(e,t){e.keyboard.addBinding({key:"x",shiftKey:!0,shortKey:!0},(t,i)=>e.format("strike",!i.format.strike)),e.keyboard.addBinding({key:"x",shiftKey:!0,shortKey:!0},(t,i)=>e.format("strike",!i.format.strike)),e.keyboard.addBinding({key:"c",shiftKey:!0,shortKey:!0},(t,i)=>e.format("code",!i.format.code)),e.keyboard.addBinding({key:"c",shiftKey:!0,shortKey:!0,altKey:!0},(t,i)=>e.format("code-block",!i.format["code-block"]))}}),T.Quill.register("themes/snow",E.A),T.Quill.register("formats/bold",d.A),T.Quill.register("formats/italic",c.A),T.Quill.register("formats/strike",m.A),T.Quill.register("formats/header",u.A),T.Quill.register("formats/list",g.A),T.Quill.register("formats/code",h.Cy),T.Quill.register("formats/code-block",h.Ay),T.Quill.register("modules/markdownShortcuts",class{constructor(e,t){this.symbolToFormat=new Map([["*","bold"],["_","italic"],["~","strike"],["`","code"]]),this.quill=e,e.on("text-change",(t,i,o)=>{if(t&&t.ops&&"user"===o){for(let i=0;i<t.ops.length;i++)if(t.ops[i].hasOwnProperty("insert")){let o=t.ops[i].insert,r=e.getSelection();if(!r)return;let[n,s]=e.getLine(r.index),l=n?.domNode.textContent,a=r.index-s;switch(o){case" ":this.parseHeader(l,r);break;case"`":this.parseCodeBlock(l,r,a);break;case"_":case"*":case"~":this.parseStylizedText(l,r,a,o)}}}})}parseHeader(e,t){let i=e.match(/^(#){1,2}\s/g);if(null==i)return;let o=i[0].length;this.quill.deleteText(t.index-o,o),this.quill.formatLine(t.index-o,0,"header",o-1),setTimeout(()=>{this.quill.setSelection(t.index-o,0)},0)}parseCodeBlock(e,t,i){let o=e.indexOf("```");if(-1===o){this.parseStylizedText(e,t,i,"`");return}let r=i+o,n=this.quill.getFormat(t)["code-block"];this.quill.deleteText(r,3),(o>0||n)&&this.quill.insertText(r,"\n"),this.quill.format("code-block",!n)}parseStylizedText(e,t,i,o){if(this.quill.getFormat(t)["code-block"])return;let r="*"===o?"\\*":o,n=RegExp("(?<= |^)"+r+"\\S((.*\\S"+r+")|"+r+")","g").exec(e);if(null==n)return;let s=n[0],l=i+n.index,a=this.symbolToFormat.get(o);this.quill.deleteText(l+s.length-1,1),this.quill.deleteText(l,1),this.quill.formatText(l,s.length-2,{[a]:!0}),this.quill.format(a,!1)}});class F extends p.A{static create(e){let t=super.create(e);return t.setAttribute("rel","noreferrer noopener nofollow ugc"),t}static sanitize(e){var t=e;return/^mailto:/.test(t)||(/^[^\s@\/]+@[^\s@\/]+\.[^\s@\/]+$/.test(t)?t=`mailto:${t}`:/^https?:\/{2}/.test(t)||(t=`http://${t}`)),super.sanitize(t)}}T.Quill.register("formats/link",F,!0),T.Quill.register("modules/toolbar",y.A);class z extends f.Ay{updateContentsAndSetCursorIndex(e,t){this.quill.updateContents(e,"silent"),this.quill.setSelection(t,0,"silent")}onCapturePaste(e){e.preventDefault();let t=this.quill.getSelection(),i=e.clipboardData?.getData("text/plain")||"",o=new RegExp(S.Ee).test(i);if(!t)return;if(!o){let e=new a.Ru().retain(t.index).delete(t.length).insert(i);this.updateContentsAndSetCursorIndex(e,t.index+i.length);return}if(0===t.length){let e=new a.Ru().retain(t.index).insert(i,{link:i});this.updateContentsAndSetCursorIndex(e,t.index+t.length+i.length);return}let r=new a.Ru().retain(t.index).retain(t.length,{link:i});this.updateContentsAndSetCursorIndex(r,t.index+t.length)}}function U(e){return o.createElement("button",{className:e.className,value:e.value,"data-tooltip-type":x.Ib.TEXT,"data-tooltip":`${e.tooltip}${(0,S.OZ)(e)}`,onKeyDown:e=>{e.keyCode===k.Uz.ESCAPE&&e.currentTarget.blur()}})}function H(e){let t=document.createElement("div");t.innerHTML=e;let i=t.querySelectorAll("h1");if(0===i.length)return e;for(let e=0;e<i.length;e++){let t=i[e],o=document.createElement("h2");o.innerHTML=t.innerHTML,t.parentNode?.replaceChild(o,t)}return t.innerHTML}function $(e){let t=o.useRef(null),i=o.useRef(null);o.useEffect(()=>{let e=t?.current?.querySelector(".ql-tooltip input[type=text]");e&&(e.dataset.link="Type or paste URL")},[]),o.useEffect(()=>{let t=e.mountBehavior??"none";if("none"===t)return;let o=i?.current?.getEditor();if(!o)return;o.focus();let r=o.getLength();r<=0||("focusAndSelectAll"===t?o.setSelection(0,r):o.setSelection(r-1,0))},[e.mountBehavior]);let r=e.id??"quill-editor",n=o.useRef(e.onEnterKeyPressed);n.current=e.onEnterKeyPressed;let s=(e,t)=>!n.current||!!t.format.list||(n.current(),!1),l={toolbar:{container:`#${r}`},keyboard:{bindings:{tab:{key:9,handler:()=>!0},backspace:{key:"Backspace",handler:(e,t)=>{let o=i?.current?.getEditor();if(!o)return!0;let r=0===t.offset||"\n"===t.prefix.charAt(t.offset-1);return!t.collapsed||!r||!t.format["code-block"]||(o.formatLine(e.index,0,"code-block",!1),!1)}},enter:{key:"Enter",shiftKey:!1,handler:s},enterMeta:{key:"Enter",metaKey:!0,handler:s}}},keyboardBindings:{},markdownShortcuts:{}},[a]=o.useState(l);return o.createElement("div",{className:"text-editor",ref:t,onBlur:e.onBlur},o.createElement(T,{bounds:e.bounds,ref:i,modules:a,formats:M,onFocus:e.onFocus,placeholder:e.placeholder,onChange:t=>e.onInputChange(P.sanitize(H(t),O)),onKeyDown:t=>{e.onKeyDown?.(t)||t.keyCode!==k.Uz.ESCAPE||t.target.blur()},onChangeSelection:e=>{let o=i?.current?.getEditor();if(!o||!e)return;let r=o.getFormat(e)["code-block"];for(let e of[".ql-italic",".ql-strike",".ql-link",".ql-code"]){let i=t?.current?.querySelector(e);r?i?.classList.add("disabled"):i?.classList.remove("disabled")}let n=t?.current?.querySelector(".ql-bold");r||o.getFormat(e).header?n?.classList.add("disabled"):n?.classList.remove("disabled")},defaultValue:P.sanitize(H((0,S.mm)(e.defaultValue)),O)}),o.createElement("div",{id:r,tabIndex:-1,className:e.hideToolbar?"quill-hide-toolbar":""},o.createElement(U,{className:"ql-bold",tooltip:(0,C.t)("proto.starting_points.description_bold_tooltip"),keyShortcutKey:"B"}),!e.useMinimalToolbarOptions&&o.createElement(o.Fragment,null,o.createElement(U,{className:"ql-italic",tooltip:(0,C.t)("proto.starting_points.description_italic_tooltip"),keyShortcutKey:"I"}),o.createElement(U,{className:"ql-strike",tooltip:(0,C.t)("proto.starting_points.description_strikethrough_tooltip"),keyShortcutKey:"X",keyShortcutShift:!0}),o.createElement(U,{className:"ql-header",value:"2",tooltip:(0,C.t)("proto.starting_points.description_header_tooltip")})),o.createElement(U,{className:"ql-list",value:"bullet",tooltip:(0,C.t)("proto.starting_points.description_bulleted_list_tooltip")}),o.createElement(U,{className:"ql-list",value:"ordered",tooltip:(0,C.t)("proto.starting_points.description_ordered_list_tooltip")}),o.createElement(U,{className:"ql-link",tooltip:(0,C.t)("proto.starting_points.description_link_tooltip"),keyShortcutKey:"K"}),!e.useMinimalToolbarOptions&&o.createElement(o.Fragment,null,o.createElement(U,{className:"ql-code",tooltip:(0,C.t)("proto.starting_points.description_code_tooltip"),keyShortcutKey:"C",keyShortcutShift:!0}),o.createElement(U,{className:"ql-code-block",tooltip:(0,C.t)("proto.starting_points.description_code_block_tooltip"),keyShortcutKey:"C",keyShortcutShift:!0,keyShortcutOption:!0}))))}function V(e){return o.createElement(T,{modules:{toolbar:!1},readOnly:!0,className:n()("quill-readonly",e.quillClassName),innerRef:e.quillInnerRef,value:P.sanitize((0,S.mm)(e.value),O)})}T.Quill.register("modules/clipboard",z,!0),b.A.bold=K.A,b.A.italic=R.A,b.A.strike=I.A,b.A.header[2]=D.A,b.A.list.bullet=w.A,b.A.list.ordered=B.A,b.A.link=Q.A,b.A.code=N.A,b.A["code-block"]=L.A}}]);

//# debugId=b5a330c9-f8be-5e68-9569-9ae1277d4954

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/bb202b7824b584b223c0b04d2771a17a921f1a08/quill_composer-5081e21ed25732b6.min.js.map