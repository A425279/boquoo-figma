
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1776a579-1d60-591c-8e75-5d9a4326ee41")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[4874],{10199:(e,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AutoLayout=r.styleForAutoLayout=void 0;let i=n(358932),a=n(411855),o=n(545977),s=n(229009),l=n(539321),c=n(450311),d=n(478469);function u(e,r,n){let{style:i,overlayStyle:a,wrapperStyle:o}=(0,s.styleForFrame)(e,r,n);return{style:Object.assign(Object.assign(Object.assign({},i),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:a,wrapperStyle:o}}r.styleForAutoLayout=u,r.AutoLayout=a.forwardRef(function(e,r){let{attributes:n,children:l}=e,p=(0,i.__rest)(e,["attributes","children"]),m=a.useContext(o.ParentContext);(0,o.warnInvalidConstraints)(Object.assign(Object.assign({},p),{parent:m}));let h=(0,d.normalizeProps)(Object.assign(Object.assign({},(0,c.getDefaultAutoLayoutProps)()),p)),_=(0,o.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},h),{parent:m})),g=u(h,m,a.Children.count(l)>0);return a.createElement(o.ParentContext.Provider,{value:{type:"autolayout",props:h}},(0,s.domNodeFromFrame)({figmaLayerName:h.name,styles:g,attributes:n,children:l,ref:(0,o.mergeRefs)([_,r])}))})},778883:(e,r,n)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applyMatrixToPoint=r.roundBoundingBox=r.roundTransform=r.isRotated=r.getRelativeBoundsAndRotation=r.skipPosition=r.rotatePoint=r.multiply=r.getCenteredRotation=r.flipVertical=r.isFlippedVertical=r.getAngleDeg=r.getAngle=void 0;let i=n(713261);function a(e){let r=e[0][0];return Math.atan2(e[0][1],r)}function o(e,r){let[[n,i,a],[o,s,l]]=e,[[c,d,u],[p,m,h]]=r;return[[n*c+i*p,n*d+i*m,n*u+i*h+a],[o*c+s*p,o*d+s*m,o*u+s*h+l]]}function s(e,r){let[[n,i,a],[o,s,l]]=e,[c,d]=r;return[n*c+i*d+a,o*c+s*d+l]}function l(e){let[[r,n],[i,a]]=e;return[[r,n,0],[i,a,0]]}r.getAngle=a,r.getAngleDeg=function(e){return a(e)*(180/Math.PI)},r.isFlippedVertical=function(e){let[[r,n],[i,a]]=e;return r*a-n*i<0},r.flipVertical=function(e){return o([[1,0,0],[0,-1,0]],e)},r.getCenteredRotation=function(e,r,n){let i=e*Math.PI/180;return o([[1,0,r/2],[0,1,n/2]],o([[Math.cos(i),Math.sin(i),0],[-Math.sin(i),Math.cos(i),0]],[[1,0,-r/2],[0,1,-n/2]]))},r.multiply=o,r.rotatePoint=s,r.skipPosition=l,r.getRelativeBoundsAndRotation=function(e){let{width:r,height:n}=e,i=o([[1,0,r/2],[0,1,n/2]],o(l(e.relativeTransform),[[1,0,-r/2],[0,1,-n/2]])),[a,c]=s(i,[0,0]),[d,u]=s(i,[0,n]),[p,m]=s(i,[r,0]),[h,_]=s(i,[r,n]),g=Math.min(a,d,p,h),f=Math.min(c,u,m,_),E=Math.max(a,d,p,h)-g,y=Math.max(c,u,m,_)-f,b=o([[1,0,(E-r)/2],[0,1,(y-n)/2]],i),[[,,I],[,,T]]=b;return{relativeBoundingBox:{x:e.relativeTransform[0][2]-I,y:e.relativeTransform[1][2]-T,width:E,height:y},rotationOnlyTransform:b,relativeTransform:e.relativeTransform}},r.isRotated=function(e){if(!e.relativeTransform)return!1;let r=e.relativeTransform[0][0],n=e.relativeTransform[0][1],i=e.relativeTransform[1][0],a=e.relativeTransform[1][1];return!(r-1<1e-5&&n-0<1e-5&&i-0<1e-5&&a-1<1e-5)},r.roundTransform=function(e){return[[(0,i.round)(e[0][0],5),(0,i.round)(e[0][1],5),(0,i.round)(e[0][2],5)],[(0,i.round)(e[1][0],5),(0,i.round)(e[1][1],5),(0,i.round)(e[1][2],5)]]},r.roundBoundingBox=function(e){return{x:(0,i.round)(e.x),y:(0,i.round)(e.y),width:(0,i.round)(e.width),height:(0,i.round)(e.height)}},r.applyMatrixToPoint=function(e,r){return[r[0]*e[0][0]+r[1]*e[0][1]+e[0][2],r[0]*e[1][0]+r[1]*e[1][1]+e[1][2]]}},165513:(e,r,n)=>{"use strict";n.d(r,{a:()=>o});var i=n(656020);let a=class{fontResourceStatusChanged(e,r,n){(0,i.dF)(e,r,n)}};function o(){new a}},774474:(e,r,n)=>{"use strict";n.d(r,{C_:()=>u,dG:()=>c,xg:()=>d});var i=n(296853),a=n(851061),o=n(730371),s=n(675678),l=n(892149);function c(e,r){let n;if("string"==typeof r){if(""===r)return;n=i.w.decodeMessage((0,a.decode)(r))}else{if(0===r.length)return;n=i.w.decodeMessage(r)}if(!n||!n.nodeChanges||1!==n.nodeChanges.length||void 0===n.nodeChanges[0][e])throw Error(`Cannot read value for ${e}`);return{data:n.nodeChanges[0][e],blobs:n.blobs||[]}}function d(e,r){let n=i.w.encodeNodeChange({[e]:r.data}),a=i.w.decodeNodeChange(n);return(0,o.deepEquals)(r.data,a[e],!0,!1,!0)?i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[{[e]:r.data}],blobs:r.blobs}):((0,l.reportError)(s.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error(`Invalid format for ${e}`),{extra:{type:typeof r,value:r,jsonifiedData:JSON.stringify(r?.data),jsonifiedDecodedNodeChange:JSON.stringify(a),source:"encodeDataWithBlobs",props:{field:e}}}),i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[{[e]:null}],blobs:[]}))}function u(e,r){return(0,a.encode)(d(e,r))}},564801:(e,r,n)=>{"use strict";function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{$C:()=>S,A1:()=>Q,A2:()=>x,Ag:()=>A,Bj:()=>V,CJ:()=>et,EU:()=>h,Fe:()=>L,Gh:()=>G,Iz:()=>q,LY:()=>g,Lz:()=>O,RN:()=>a,RU:()=>H,Rx:()=>P,TC:()=>C,Ud:()=>F,V3:()=>W,Vm:()=>v,WF:()=>B,Z3:()=>R,Zs:()=>U,aO:()=>M,b_:()=>$,be:()=>Z,c2:()=>T,d1:()=>X,dJ:()=>z,di:()=>s,eZ:()=>m,jw:()=>l,k0:()=>p,l5:()=>b,lM:()=>N,mk:()=>D,nn:()=>j,o$:()=>o,p6:()=>f,qV:()=>J,rf:()=>E,ry:()=>w,sG:()=>ee,tO:()=>c,tg:()=>d,tz:()=>y,uH:()=>Y,w4:()=>I,wm:()=>k,xJ:()=>u,yR:()=>K,yy:()=>_});class a{onMissingEditScope(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onGuardrailViolation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class o{reportEditAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class s{readyToAcceptAutosaveChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasOngoingCommitTask(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}enqueueAutosaveCommit(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}createAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isConnected(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class l{jsEchoUintValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}jsEchoUint64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Struct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{uvalue:"0",ivalue:"0"}}jsEchoStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoIntArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoBoolArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoJsonValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.")}jsEchoDeeplyNestedJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoIntMapValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}jsEchoIntSetValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Set}jsEchoOptionalStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoOptionalStringStruct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{valueOpt2:null}}jsEchoFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoNonFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{jsonValue:"",intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoCallbackValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return()=>{}}getObservableCounter(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getObservableArray(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsValueTestsDone(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class c{rerunSearch(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTextMatches(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}rebuildIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setResultInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusAndNavigate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReplace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}detectTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}applyTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class d{handleMouseDown(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseMove(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseUp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createNewCommentAtPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class u{trackComponentInstanceDetachment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentInstanceInsertion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackStyleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackVariableAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class p{convertEmojiNameToString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingEmojiTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setEmojiTypeaheadImageSet(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setEmojiTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class m{startChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeWheel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutPress(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutRelease(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class h{requestEditorType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDeviceInfoForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}presetDeviceSupportsTouch(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}sizeMatchesFramePreset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getFramePresetForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCurrentFileName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}isUserPresent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}backToFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentIsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fullscreenIsReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isFontListLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}afterFontsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFileVersion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSketchFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewWhiteboardFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSlidesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFontSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}attemptedSketchFileDrop(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportSettingsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPdfExportSettingsModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleBrowseAllResourcesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openBrowseTemplatesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPreferencesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNudgeAmountPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hidePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createFeedPost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findInspiration(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openQuickActionsAssetsTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}inspectFragment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSignedOutEditAttempt(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hasUnsavedChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}shouldSuppressUnsavedChangesUI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}toggleInteractionRecorderVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showCanvasContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectLayerContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTextEditModeContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRulerGuideContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectionContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLeftPanelTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTeamLibraryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleComponentInsertModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleVariablesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPublishDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forcePublishStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppPush(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAutosaveVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToInstanceVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToVariantVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteWidgetsAsSublayersVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPushOverridesVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBellInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showMobileNativeToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMobileNativeToastLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalizedInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUrlButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissEphemeralVisualBells(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithDelayLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithCloseButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearVisualBellType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissMobileMediaLoadingToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getNaturalStyleKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalizedString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}closeManageMemoryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteLoadingIndicatorAndPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPromptToMoveLibraryItems(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateViewportInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}canUseClipboardAPI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}readFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clipboardHasUnsanitizedPng(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}decodePackedHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}decodeMetadataFromHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}detectSpreadsheetDataInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}writeDataToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}sendSerializedClipboardDataToS3(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSerializedClipboardDataFromS3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getKeyboardLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}setKeyboardLayoutPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveUseNumbersForOpacityPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSavepoint(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSavepointModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showBrowserAlert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleHistoryMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showViewChangesNotification(...e){if(this.shouldThrow)throw Error("Method not implemented.")}togglePerfHUDVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFakeMPActivity(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTSMERConfig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showImageScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showGIFConvertedAndScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}checkForImageBackgroundRemoval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usedKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}insertComponentOrShowError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fetchComponentBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}fetchComponentBufferForSevRepair(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getLatestPublishedVersionHashForComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLatestPublishedVersionForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableSetBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}startLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}finishLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleSlidesInsertEmbedModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleSlidesInsertShapeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackInteractiveSlideElementInsertedForSprig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCopyExportRestricted(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInWorkshopMode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}requestOpenExternalSourceFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}validateAndParseURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}navigateToURL(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHyperlinkPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateHyperlinkPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleUserClickOnHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCanvasMentionPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCanvasMentionPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openHelp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSupportForum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTutorials(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShowWithHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.")}runLastPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMovePagesJob(...e){if(this.shouldThrow)throw Error("Method not implemented.")}retrieveMetadataAndSelectBrokenFixedScrollingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppQueueFileForWriting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppWriteFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppExportFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCutEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCopyEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobilePasteEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppShowContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDefaultOnOTFeatures(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}copyLinkToPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateLinkToNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToRemoteNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalGUIDFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalVersionIdFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}syncPencilStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncHighlighterStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncToolStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVideoShouldAutoplay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendActiveStackRegionAnalytics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getIsEmojiWheelOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}openStartingPointFlowInPrototypeViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusPrototypeStartingPointPanelToEditName(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSentryTag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTimerModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}activateVotingStampTool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setActiveAgendaItemId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}escapeAndSaveCSVData(...e){if(this.shouldThrow)throw Error("Method not implemented.")}parseCsvStringAndCreateWhiteboardNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndCreateWhiteboardNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndTriggerSmartPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHTMLStringIntoLineDirectionalities(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isNavigatorClipboardWriteSupported(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onNodePositionChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onSectionPresetPickerCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateEmbed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateWidgetFromURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}handleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startExportAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendEventToResponsiveContentHandler(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onAgendaChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFigjamStarterKitAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canUploadAndEditVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}selectPublishedAssetGuids(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}handleZoomActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handlePanActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleNodeCountReachedForMoveDraft(...e){if(this.shouldThrow)throw Error("Method not implemented.")}selectLocalStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}formatDateTime(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setFigjamStarterKitBoundingBox(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadedCompareChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}upsellLibrariesHandleConsecutivePaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onPlaygroundNodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerHaptics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logEnterMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}evaluateMathExpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}changeDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardToolToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTilesRendered(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateTable(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onEditTableText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragStart(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateSticky(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDifferentSectionClicked(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onConnectDiagramShapeWithConnector(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTileRendererChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterComputeViewportSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getNextQueryRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}afterQueryCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectAllSceneGraphQueries(...e){if(this.shouldThrow)throw Error("Method not implemented.")}movedSingleNodeVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSlideAfterFocusedSlide(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"-1:-1"}generateFlappFromPastedText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiActionMetered(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabledFigJam(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInAiExperimentOrGrantlist(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}removeImageBackground(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayersDevHandoff(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debugMagicLinkAIModel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openMakePrototypeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isMagicLinkDone(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isMagicLinkDoneToastShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}linkToComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getLabValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class _{fontResourceStatusChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class g{getDefaultDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCanvasColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getUserColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class f{getIsExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setNodesReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setNodesCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forwardExportsToExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showStatusContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isStatusContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showDevModeFeaturesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAnnotationsButtonContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isDevModeOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}exitDevModeFocusOrOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldAvoidScaling(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class E{nodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class y{createMouseBehavior(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tableUiReorderHandleHoveredLength(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}tableUiAddButtonHoveredRadius(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class b{setMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingMentionsTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setMentionsTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}endSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}showVisualBellForPastedMentions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class I{getPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}resetPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}convertPdfToScene(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class T{selectionChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}boxSelectionEnded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}currentPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}timerChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}drop(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}documentChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}codegenPreferencesChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stackInvariantsEnforced(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginPageLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginAccessibleNodeIds(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}pluginAccessiblePages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class v{getAPIName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestionsForWord(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}spellCheckText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}runTextReviewPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldEnableWhenFirstActivated(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class S{isQuickActionsShown(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class w{isMinimizedInUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class A{pasteVariablesWithLocalizationPopupDEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}pasteVariablesWithLocalizationPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class N{reconnectingStarted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectingSucceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorHidden(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromObserver(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromConnectionCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyEditorConvertedToViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSaveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateMultiplayerState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}restartPresentation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cancelPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setBackgroundFlushInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMonitorInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMultiplayerSignal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSceneGraphValidationFailure(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRestoreComponentDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showComponentRemovedDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isWindowActive(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}buildMultiplayerUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}requestedChunkedFileLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}socketBufferedAmount(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}prettyPrintMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectSequenceNumberChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class C{showEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getColorFromNativeEyeDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}updateSelectionPaintsWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionImages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearSelectionPaintsDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintFromDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}pickerHasSelectionPaintOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}originalPaintForCurrentSelectionPaintsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}colorPickerSelectedVariable(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}clearSelectionTextAndEffectStylesDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionTextAndEffectStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isPrototypingModalOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class O{handleConnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMouseCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMousePosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setIsHoveringWidgetWithHiddenCursors(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHighFiveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setChatMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusOnTextCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVoiceMetadata(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleReactionFromServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendReaction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}playSoundEffectOnce(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class L{clearTemplatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class R{getEyedropperContext(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}updateEditPaletteModalColor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCustomPaletteApplied(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showSectionPresets(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}triggerConfetti(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class P{trackFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackDefinedEventFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetDefinedAnalyticsForDocument(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveFlushes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveImageChangeSkips(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestore(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportBranchingLoadTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportMultiplayerRoundTripTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportPerfEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportQuantizedColorEqualsUse(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestored(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportDirtyAfterLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryReportError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}pauseOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryStopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}trySetAttributeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryGetAttributesOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}addToDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDistributionAnalyticsProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}resetDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderLayerCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportNonIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderedTileBytesUsed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromCpp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromTs(...e){if(this.shouldThrow)throw Error("Method not implemented.")}recordRenderingEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveRenderingTrace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logNumericMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logStringMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleAllocationFailureWithNative(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}slogFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class D{dispatchAction(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getCustomKeyboardShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}getDisplayStringFromKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getKeyboardShortcutFromText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getTextFromKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class k{readSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}writeSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class M{isUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3Colors(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class F{getDefaultPencilStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultHighlighterStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class x{decodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}encodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}scaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}cancelCurrentImageWorkers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class U{createVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}deleteVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidth(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCoverImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}loadVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}copyVideoPermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadAllVideos(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class B{autoSegmentNodesByRegion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldRunSimpleStackDetection(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runMakeResponsiveHeuristics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackShouldShowMSALOnboarding(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAllAutoLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}makeResponsive2(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class V{getUserId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}hasUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class G{markMissingFontScannerAsComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class H{submitDeveloperRelatedLinks(...e){if(this.shouldThrow)throw Error("Method not implemented.")}didGetNodeStatusChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class W{copyImagePermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDownloadPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forceDownloadImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}getImageHostDomain(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setMinimumImagePriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forgetImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}downloadEmoji(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}markImageUploading(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markImageUploaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startUploadingImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pendingUploadStats(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[new Set,new Set]}logDebugInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pauseImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class K{readRichTextFromHtml(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}createHtmlFromTextNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}createHtmlFromTextData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class j{onInsertFromExisting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onImpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}mountWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mountWidgetLowPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackSelectionStateInteraction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}queueRender(...e){if(this.shouldThrow)throw Error("Method not implemented.")}renderFirstPartyWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isRenderingWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runPropertyMenuCallback(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateRunningWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidgetIconBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onTextEditEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNonInteractableWidgetTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logMultipleInputEditorsInWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canInteractWithWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}canViewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class z{prefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}debounceNodeResizeUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debounceNodeMovementUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceDomChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getAPCAContrast(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Y{onFrameDistributionTrackedEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ${isCustomPaletteColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class q{clearSlideThemeStylePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncSlideThemeAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}computeThemeSwapColorVariableMapping(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Z{isInOrg(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class X{getSummaryAsClipboardText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class J{calculateColorWithRampValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}calculateColorWithRelativeAdjustment(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getRampValueForColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Q{openTemplatePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ee{syncAddedOrChangedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncRemovedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class et{setTitle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}title(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}alert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}execCommandCopy(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}initPrefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTextCaretBounds(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingTextInput(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingCopyCutEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingPasteEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWithFocus(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}},401432:(e,r,n)=>{"use strict";n.d(r,{l:()=>a});var i=n(587670);function a(e){switch(e){case"FILL":return i.pxg.FILL;case"FIT":return i.pxg.FIT;case"STRETCH":return i.pxg.STRETCH;case"TILE":return i.pxg.TILE;default:throw Error("Invalid ImageScaleMode")}}},118615:(e,r,n)=>{"use strict";n.d(r,{GP:()=>a,nc:()=>o,ri:()=>s});var i=n(774474);function a(e){return(0,i.C_)("fillPaints",{data:[e],blobs:[]})}function o(e){return(0,i.C_)("fillPaints",{data:e,blobs:[]})}function s(e){let r=(0,i.dG)("fillPaints",e);return r?.data??[]}},937036:(e,r,n)=>{"use strict";n.d(r,{$P:()=>l,M7:()=>c,Ms:()=>o,UC:()=>s,eX:()=>u,nM:()=>d,s4:()=>i});var i,a=n(215122);!function(e){e.NONE="NONE",e.FILL="FILL",e.STROKE="STROKE",e.TEXT="TEXT",e.EFFECT="EFFECT",e.GRID="GRID"}(i||(i={}));let o={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},s={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function l(e){return!!e?.key}function c(e){return e.startsWith("S:")}function d(e){return e&&l(e)?`S:${e.key},${e.version||""}`:""}function u(e){if(!e||!c(e))return null;let r=e.substring(2).split(",");if(!r||2!==r.length)return null;let n=(0,a.n3)(r[0]),i=(0,a.IA)(r[1]);return n===a.n3.INVALID?null:{key:n,version:i}}},519216:e=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o={};((e,n)=>{for(var i in n)r(e,i,{get:n[i],enumerable:!0})})(o,{schemaStr:()=>s}),e.exports=((e,o,s,l)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let c of i(o))a.call(e,c)||c===s||r(e,c,{get:()=>o[c],enumerable:!(l=n(o,c))||l.enumerable});return e})(r({},"__esModule",{value:!0}),o);var s="package Fig;enum MessageType{JOIN_START=0;NODE_CHANGES=1;USER_CHANGES=2;JOIN_END=3;SIGNAL=4;STYLE=5;STYLE_SET=6;JOIN_START_SKIP_RELOAD=7;NOTIFY_SHOULD_UPGRADE=8;UPGRADE_DONE=9;UPGRADE_REFRESH=10;SCENE_GRAPH_QUERY=11;SCENE_GRAPH_REPLY=12;DIFF=13;CLIENT_BROADCAST=14;JOIN_START_JOURNALED=15;STREAM_START=16;STREAM_END=17;INTERACTIVE_SLIDE_CHANGE=18;RECONNECT_SCENE_GRAPH_QUERY=19;RECONNECT_SCENE_GRAPH_REPLY=20;JOIN_END_INCREMENTAL_RECONNECT=21;NODE_STATUS_CHANGE=22;}enum Axis{X=0;Y=1;}enum Access{READ_ONLY=0;READ_WRITE=1;}enum NodePhase{CREATED=0;REMOVED=1;}enum WindingRule{NONZERO=0;ODD=1;}enum NodeType{NONE=0;DOCUMENT=1;CANVAS=2;GROUP=3;FRAME=4;BOOLEAN_OPERATION=5;VECTOR=6;STAR=7;LINE=8;ELLIPSE=9;RECTANGLE=10;REGULAR_POLYGON=11;ROUNDED_RECTANGLE=12;TEXT=13;SLICE=14;SYMBOL=15;INSTANCE=16;STICKY=17;SHAPE_WITH_TEXT=18;CONNECTOR=19;CODE_BLOCK=20;WIDGET=21;STAMP=22;MEDIA=23;HIGHLIGHT=24;SECTION=25;SECTION_OVERLAY=26;WASHI_TAPE=27;VARIABLE=28;TABLE=29;TABLE_CELL=30;VARIABLE_SET=31;SLIDE=32;ASSISTED_LAYOUT=33;INTERACTIVE_SLIDE_ELEMENT=34;VARIABLE_OVERRIDE=35;MODULE=36;SLIDE_GRID=37;SLIDE_ROW=38;RESPONSIVE_SET=39;CODE_COMPONENT=40;TEXT_PATH=41;}enum ShapeWithTextType{SQUARE=0;ELLIPSE=1;DIAMOND=2;TRIANGLE_UP=3;TRIANGLE_DOWN=4;ROUNDED_RECTANGLE=5;PARALLELOGRAM_RIGHT=6;PARALLELOGRAM_LEFT=7;ENG_DATABASE=8;ENG_QUEUE=9;ENG_FILE=10;ENG_FOLDER=11;TRAPEZOID=12;PREDEFINED_PROCESS=13;SHIELD=14;DOCUMENT_SINGLE=15;DOCUMENT_MULTIPLE=16;MANUAL_INPUT=17;HEXAGON=18;CHEVRON=19;PENTAGON=20;OCTAGON=21;STAR=22;PLUS=23;ARROW_LEFT=24;ARROW_RIGHT=25;SUMMING_JUNCTION=26;OR=27;SPEECH_BUBBLE=28;INTERNAL_STORAGE=29;}enum BlendMode{PASS_THROUGH=0;NORMAL=1;DARKEN=2;MULTIPLY=3;LINEAR_BURN=4;COLOR_BURN=5;LIGHTEN=6;SCREEN=7;LINEAR_DODGE=8;COLOR_DODGE=9;OVERLAY=10;SOFT_LIGHT=11;HARD_LIGHT=12;DIFFERENCE=13;EXCLUSION=14;HUE=15;SATURATION=16;COLOR=17;LUMINOSITY=18;}enum PaintType{SOLID=0;GRADIENT_LINEAR=1;GRADIENT_RADIAL=2;GRADIENT_ANGULAR=3;GRADIENT_DIAMOND=4;IMAGE=5;EMOJI=6;VIDEO=7;}enum ImageScaleMode{STRETCH=0;FIT=1;FILL=2;TILE=3;}enum EffectType{INNER_SHADOW=0;DROP_SHADOW=1;FOREGROUND_BLUR=2;BACKGROUND_BLUR=3;}enum TextCase{ORIGINAL=0;UPPER=1;LOWER=2;TITLE=3;SMALL_CAPS=4;SMALL_CAPS_FORCED=5;}enum TextDecoration{NONE=0;UNDERLINE=1;STRIKETHROUGH=2;}enum TextDecorationStyle{SOLID=0;DOTTED=1;WAVY=2;}enum LeadingTrim{NONE=0;CAP_HEIGHT=1;}enum NumberUnits{RAW=0;PIXELS=1;PERCENT=2;}enum ConstraintType{MIN=0;CENTER=1;MAX=2;STRETCH=3;SCALE=4;FIXED_MIN=5;FIXED_MAX=6;}enum StrokeAlign{CENTER=0;INSIDE=1;OUTSIDE=2;}enum StrokeCap{NONE=0;ROUND=1;SQUARE=2;ARROW_LINES=3;ARROW_EQUILATERAL=4;DIAMOND_FILLED=5;TRIANGLE_FILLED=6;HIGHLIGHT=7;WASHI_TAPE_1=8;WASHI_TAPE_2=9;WASHI_TAPE_3=10;WASHI_TAPE_4=11;WASHI_TAPE_5=12;WASHI_TAPE_6=13;CIRCLE_FILLED=14;}enum StrokeJoin{MITER=0;BEVEL=1;ROUND=2;}enum BooleanOperation{UNION=0;INTERSECT=1;SUBTRACT=2;XOR=3;}enum TextAlignHorizontal{LEFT=0;CENTER=1;RIGHT=2;JUSTIFIED=3;}enum TextAlignVertical{TOP=0;CENTER=1;BOTTOM=2;}enum MouseCursor{DEFAULT=0;CROSSHAIR=1;EYEDROPPER=2;HAND=3;PAINT_BUCKET=4;PEN=5;PENCIL=6;MARKER=7;ERASER=8;HIGHLIGHTER=9;LASSO=10;}enum VectorMirror{NONE=0;ANGLE=1;ANGLE_AND_LENGTH=2;}enum DashMode{CLIP=0;STRETCH=1;}enum ImageType{PNG=0;JPEG=1;SVG=2;PDF=3;}enum ExportConstraintType{CONTENT_SCALE=0;CONTENT_WIDTH=1;CONTENT_HEIGHT=2;}enum LayoutGridType{MIN=0;CENTER=1;STRETCH=2;MAX=3;}enum LayoutGridPattern{STRIPES=0;GRID=1;}enum TextAutoResize{NONE=0;WIDTH_AND_HEIGHT=1;HEIGHT=2;}enum TextTruncation{DISABLED=0;ENDING=1;}enum StyleSetType{PERSONAL=0;TEAM=1;CUSTOM=2;FREQUENCY=3;TEMPORARY=4;}enum StyleSetContentType{SOLID=0;GRADIENT=1;IMAGE=2;}enum StackMode{NONE=0;HORIZONTAL=1;VERTICAL=2;}enum StackAlign{MIN=0;CENTER=1;MAX=2;BASELINE=3;}enum StackCounterAlign{MIN=0;CENTER=1;MAX=2;STRETCH=3;AUTO=4;BASELINE=5;}enum StackJustify{MIN=0;CENTER=1;MAX=2;SPACE_EVENLY=3;SPACE_BETWEEN=4;}enum StackSize{FIXED=0;RESIZE_TO_FIT=1;RESIZE_TO_FIT_WITH_IMPLICIT_SIZE=2;}enum StackPositioning{AUTO=0;ABSOLUTE=1;}enum StackWrap{NO_WRAP=0;WRAP=1;}enum StackCounterAlignContent{AUTO=0;SPACE_BETWEEN=1;}enum ConnectionType{NONE=0;INTERNAL_NODE=1;URL=2;BACK=3;CLOSE=4;SET_VARIABLE=5;UPDATE_MEDIA_RUNTIME=6;CONDITIONAL=7;SET_VARIABLE_MODE=8;}enum InteractionType{ON_CLICK=0;AFTER_TIMEOUT=1;MOUSE_IN=2;MOUSE_OUT=3;ON_HOVER=4;MOUSE_DOWN=5;MOUSE_UP=6;ON_PRESS=7;NONE=8;DRAG=9;ON_KEY_DOWN=10;ON_VOICE=11;ON_MEDIA_HIT=12;ON_MEDIA_END=13;MOUSE_ENTER=14;MOUSE_LEAVE=15;}enum TransitionType{INSTANT_TRANSITION=0;DISSOLVE=1;FADE=2;SLIDE_FROM_LEFT=3;SLIDE_FROM_RIGHT=4;SLIDE_FROM_TOP=5;SLIDE_FROM_BOTTOM=6;PUSH_FROM_LEFT=7;PUSH_FROM_RIGHT=8;PUSH_FROM_TOP=9;PUSH_FROM_BOTTOM=10;MOVE_FROM_LEFT=11;MOVE_FROM_RIGHT=12;MOVE_FROM_TOP=13;MOVE_FROM_BOTTOM=14;SLIDE_OUT_TO_LEFT=15;SLIDE_OUT_TO_RIGHT=16;SLIDE_OUT_TO_TOP=17;SLIDE_OUT_TO_BOTTOM=18;MOVE_OUT_TO_LEFT=19;MOVE_OUT_TO_RIGHT=20;MOVE_OUT_TO_TOP=21;MOVE_OUT_TO_BOTTOM=22;MAGIC_MOVE=23;SMART_ANIMATE=24;SCROLL_ANIMATE=25;}enum EasingType{IN_CUBIC=0;OUT_CUBIC=1;INOUT_CUBIC=2;LINEAR=3;IN_BACK_CUBIC=4;OUT_BACK_CUBIC=5;INOUT_BACK_CUBIC=6;CUSTOM_CUBIC=7;SPRING=8;GENTLE_SPRING=9;CUSTOM_SPRING=10;SPRING_PRESET_ONE=11;SPRING_PRESET_TWO=12;SPRING_PRESET_THREE=13;}enum ScrollDirection{NONE=0;HORIZONTAL=1;VERTICAL=2;BOTH=3;}enum ScrollContractedState{EXPANDED=0;CONTRACTED=1;}struct GUID{uint sessionID;uint localID;}struct Color{float r;float g;float b;float a;}struct Vector{float x;float y;}struct Rect{float x;float y;float w;float h;}struct ColorStop{Color color;float position;}message ColorStopVar{Color color=1;VariableData colorVar=2;float position=3;}struct Matrix{float m00;float m01;float m02;float m10;float m11;float m12;}struct ParentIndex{GUID guid;string position;}struct Number{float value;NumberUnits units;}struct FontName{string family;string style;string postscript;}enum FontVariantNumericFigure{NORMAL=0;LINING=1;OLDSTYLE=2;}enum FontVariantNumericSpacing{NORMAL=0;PROPORTIONAL=1;TABULAR=2;}enum FontVariantNumericFraction{NORMAL=0;DIAGONAL=1;STACKED=2;}enum FontVariantCaps{NORMAL=0;SMALL=1;ALL_SMALL=2;PETITE=3;ALL_PETITE=4;UNICASE=5;TITLING=6;}enum FontVariantPosition{NORMAL=0;SUB=1;SUPER=2;}enum FontStyle{NORMAL=0;ITALIC=1;}enum SemanticWeight{NORMAL=0;BOLD=1;}enum SemanticItalic{NORMAL=0;ITALIC=1;}enum OpenTypeFeature{PCAP=0;C2PC=1;CASE=2;CPSP=3;TITL=4;UNIC=5;ZERO=6;SINF=7;ORDN=8;AFRC=9;DNOM=10;NUMR=11;LIGA=12;CLIG=13;DLIG=14;HLIG=15;RLIG=16;AALT=17;CALT=18;RCLT=19;SALT=20;RVRN=21;VERT=22;SWSH=23;CSWH=24;NALT=25;CCMP=26;STCH=27;HIST=28;SIZE=29;ORNM=30;ITAL=31;RAND=32;DTLS=33;FLAC=34;MGRK=35;SSTY=36;KERN=37;FWID=38;HWID=39;HALT=40;TWID=41;QWID=42;PWID=43;JUST=44;LFBD=45;OPBD=46;RTBD=47;PALT=48;PKNA=49;LTRA=50;LTRM=51;RTLA=52;RTLM=53;ABRV=54;ABVM=55;ABVS=56;VALT=57;VHAL=58;BLWF=59;BLWM=60;BLWS=61;AKHN=62;CJCT=63;CFAR=64;CPCT=65;CURS=66;DIST=67;EXPT=68;FALT=69;FINA=70;FIN2=71;FIN3=72;HALF=73;HALN=74;HKNA=75;HNGL=76;HOJO=77;INIT=78;ISOL=79;JP78=80;JP83=81;JP90=82;JP04=83;LJMO=84;LOCL=85;MARK=86;MEDI=87;MED2=88;MKMK=89;NLCK=90;NUKT=91;PREF=92;PRES=93;VPAL=94;PSTF=95;PSTS=96;RKRF=97;RPHF=98;RUBY=99;SMPL=100;TJMO=101;TNAM=102;TRAD=103;VATU=104;VJMO=105;VKNA=106;VKRN=107;VRTR=108;VRT2=109;SS01=110;SS02=111;SS03=112;SS04=113;SS05=114;SS06=115;SS07=116;SS08=117;SS09=118;SS10=119;SS11=120;SS12=121;SS13=122;SS14=123;SS15=124;SS16=125;SS17=126;SS18=127;SS19=128;SS20=129;CV01=130;CV02=131;CV03=132;CV04=133;CV05=134;CV06=135;CV07=136;CV08=137;CV09=138;CV10=139;CV11=140;CV12=141;CV13=142;CV14=143;CV15=144;CV16=145;CV17=146;CV18=147;CV19=148;CV20=149;CV21=150;CV22=151;CV23=152;CV24=153;CV25=154;CV26=155;CV27=156;CV28=157;CV29=158;CV30=159;CV31=160;CV32=161;CV33=162;CV34=163;CV35=164;CV36=165;CV37=166;CV38=167;CV39=168;CV40=169;CV41=170;CV42=171;CV43=172;CV44=173;CV45=174;CV46=175;CV47=176;CV48=177;CV49=178;CV50=179;CV51=180;CV52=181;CV53=182;CV54=183;CV55=184;CV56=185;CV57=186;CV58=187;CV59=188;CV60=189;CV61=190;CV62=191;CV63=192;CV64=193;CV65=194;CV66=195;CV67=196;CV68=197;CV69=198;CV70=199;CV71=200;CV72=201;CV73=202;CV74=203;CV75=204;CV76=205;CV77=206;CV78=207;CV79=208;CV80=209;CV81=210;CV82=211;CV83=212;CV84=213;CV85=214;CV86=215;CV87=216;CV88=217;CV89=218;CV90=219;CV91=220;CV92=221;CV93=222;CV94=223;CV95=224;CV96=225;CV97=226;CV98=227;CV99=228;}struct ExportConstraint{ExportConstraintType type;float value;}struct GUIDMapping{GUID from;GUID to;}struct Blob{byte[]bytes;}message Image{byte[]hash=1;string name=2;uint dataBlob=3;}message Video{byte[]hash=1;string s3Url=2;}message PasteSource{string srcFile=1;GUID srcNode=2;}struct FilterColorAdjust{float tint;float shadows;float highlights;float detail;float exposure;float vignette;float temperature;float vibrance;}message PaintFilterMessage{float tint=1;float shadows=2;float highlights=3;float detail=4[deprecated];float exposure=5;float vignette=6[deprecated];float temperature=7;float vibrance=8;float contrast=9;float brightness=10[deprecated];}message Paint{PaintType type=1;Color color=2;float opacity=3;bool visible=4;BlendMode blendMode=5;ColorStop[]stops=6;Matrix transform=7;Image image=8;Image imageThumbnail=9;Image animatedImage=16;uint animationFrame=17;ImageScaleMode imageScaleMode=10;bool imageShouldColorManage=22;float rotation=11;float scale=12;FilterColorAdjust filterColorAdjust=13[deprecated];PaintFilterMessage paintFilter=14;uint[]emojiCodePoints=15;Video video=18;uint originalImageWidth=19;uint originalImageHeight=20;VariableData colorVar=21;ColorStopVar[]stopsVar=23;string thumbHashBase64=24[deprecated];byte[]thumbHash=25;}message FontMetaData{FontName key=1;float fontLineHeight=2;byte[]fontDigest=3;FontStyle fontStyle=4;int fontWeight=5;}message FontVariation{uint axisTag=1;string axisName=2;float value=3;}message TextData{string characters=1;uint[]characterStyleIDs=2;NodeChange[]styleOverrideTable=3;TextLineData[]lines=12;uint layoutVersion=8[deprecated];FontName[]fallbackFonts=10[deprecated];float minContentHeight=17[deprecated];Vector layoutSize=4[deprecated];Baseline[]baselines=5[deprecated];Glyph[]glyphs=6[deprecated];Decoration[]decorations=7[deprecated];Blockquote[]blockquotes=16[deprecated];FontMetaData[]fontMetaData=9[deprecated];HyperlinkBox[]hyperlinkBoxes=11[deprecated];int truncationStartIndex=13[deprecated];float truncatedHeight=14[deprecated];float[]logicalIndexToCharacterOffsetMap=15[deprecated];MentionBox[]mentionBoxes=18[deprecated];DerivedTextLineData[]derivedLines=19[deprecated];}message DerivedTextData{Vector layoutSize=1;Baseline[]baselines=2;Glyph[]glyphs=3;Decoration[]decorations=4;Blockquote[]blockquotes=5;FontMetaData[]fontMetaData=6;HyperlinkBox[]hyperlinkBoxes=7;int truncationStartIndex=8;float truncatedHeight=9;float[]logicalIndexToCharacterOffsetMap=10;MentionBox[]mentionBoxes=11;DerivedTextLineData[]derivedLines=12;}message HyperlinkBox{Rect bounds=1;string url=2;GUID guid=3;int hyperlinkID=4;}message MentionBox{Rect bounds=1;uint startIndex=2;uint endIndex=3;bool isValid=4;uint mentionKey=5;}message Baseline{Vector position=1;float width=2;float lineY=3;float lineHeight=4;float lineAscent=7;float ignoreLeadingTrim=8;uint firstCharacter=5;uint endCharacter=6;}message Glyph{uint commandsBlob=1;Vector position=2;uint styleID=3;float fontSize=4;uint firstCharacter=5;float advance=6;uint[]emojiCodePoints=7;EmojiImageSet emojiImageSet=8;float rotation=9;}message Decoration{Rect[]rects=1;uint styleID=2;}message Blockquote{Rect verticalBar=1;Rect quoteMarkBounds=2;uint styleID=3;}message VectorData{uint vectorNetworkBlob=1;Vector normalizedSize=2;NodeChange[]styleOverrideTable=3;}message GUIDPath{GUID[]guids=1;}message SymbolData{GUID symbolID=1;NodeChange[]symbolOverrides=2;float uniformScaleFactor=3;}message GUIDPathMapping{GUID id=1;GUIDPath path=2;}message NodeGenerationData{NodeChange[]overrides=1;bool useFineGrainedSyncing=2;NodeChange[]diffOnlyRemovals=3;}message DerivedImmutableFrameData{NodeChange[]overrides=1;uint version=2;}message AssetIdMap{AssetIdEntry[]entries=1;}message AssetIdEntry{string assetKey=1;AssetId assetId=2;}message AssetRef{string key=1;string version=2;}message AssetId{GUID guid=1[deprecated];AssetRef assetRef=2[deprecated];StateGroupId stateGroupId=3;StyleId styleId=4;SymbolId symbolId=5;VariableID variableId=6;VariableSetID variableSetId=7;}message StateGroupId{GUID guid=1;AssetRef assetRef=2;}message StyleId{GUID guid=1;AssetRef assetRef=2;}message SymbolId{GUID guid=1;AssetRef assetRef=2;}message VariableID{GUID guid=1;AssetRef assetRef=2;}message VariableOverrideId{GUID guid=1;AssetRef assetRef=2;}message VariableSetID{GUID guid=1;AssetRef assetRef=2;}message ModuleId{GUID guid=1;AssetRef assetRef=2;}message ResponsiveSetId{GUID guid=1;AssetRef assetRef=2;}message ThemeID{GUID guid=1;AssetRef assetRef=2;}message ResponsiveTextStyleVariant{float minWidth=1;NodeChange fields=2;VariableData variableFontSize=3;}enum FlappType{POLL=0;EMBED=1;FACEPILE=2;ALIGNMENT=3;YOUTUBE=4;}message SlideThemeProps{string themeVersion=1;VariableSetID variableSetId=2;StyleId[]textStyleIds=3;bool isTextColorManuallySelected=4[deprecated];bool isBorderColorManuallySelected=5[deprecated];AssetRef subscribedThemeRef=6;uint schemaVersion=7;bool isGeneratedFromDesign=8;}message SlideThemeMap{SlideThemeMapEntry[]entries=1;}message SlideThemeMapEntry{ThemeID themeId=1;SlideThemeProps themeProps=2;}message SharedSymbolReference{string fileKey=1;GUID symbolID=2;string versionHash=3;GUIDPathMapping[]guidPathMappings=4;byte[]bytes=5;GUIDMapping[]libraryGUIDToSubscribingGUID=6[deprecated];string componentKey=7;GUIDPathMapping[]unflatteningMappings=8;bool isUnflattened=9;}message SharedComponentMasterData{string componentKey=1;GUIDPathMapping[]publishingGUIDPathToTeamLibraryGUID=2;bool isUnflattened=3;}message InstanceOverrideStash{GUIDPath overridePathOfSwappedInstance=1;string componentKey=2;NodeChange[]overrides=3;}message InstanceOverrideStashV2{GUIDPath overridePathOfSwappedInstance=1;GUID localSymbolID=2;NodeChange[]overrides=3;}message Effect{EffectType type=1;Color color=2;Vector offset=3;float radius=4;bool visible=5;BlendMode blendMode=6;float spread=7;bool showShadowBehindNode=8;VariableData radiusVar=9;VariableData colorVar=10;VariableData spreadVar=11;VariableData xVar=12;VariableData yVar=13;}message TransitionInfo{TransitionType type=1;float duration=2;}enum PrototypeDeviceType{NONE=0;PRESET=1;CUSTOM=2;PRESENTATION=3;}enum DeviceRotation{NONE=0;CCW_90=1;}message PrototypeDevice{PrototypeDeviceType type=1;Vector size=2;string presetIdentifier=3;DeviceRotation rotation=4;}enum OverlayPositionType{CENTER=0;TOP_LEFT=1;TOP_CENTER=2;TOP_RIGHT=3;BOTTOM_LEFT=4;BOTTOM_CENTER=5;BOTTOM_RIGHT=6;MANUAL=7;}enum OverlayBackgroundInteraction{NONE=0;CLOSE_ON_CLICK_OUTSIDE=1;}enum OverlayBackgroundType{NONE=0;SOLID_COLOR=1;}message OverlayBackgroundAppearance{OverlayBackgroundType backgroundType=1;Color backgroundColor=2;}enum NavigationType{NAVIGATE=0;OVERLAY=1;SWAP=2;SWAP_STATE=3;SCROLL_TO=4;}enum ExportColorProfile{DOCUMENT=0;SRGB=1;DISPLAY_P3_V4=2;}message ExportSettings{string suffix=1;ImageType imageType=2;ExportConstraint constraint=3;bool svgDataName=4;ExportSVGIDMode svgIDMode=5;bool svgOutlineText=6;bool contentsOnly=7;bool svgForceStrokeMasks=8;bool useAbsoluteBounds=9;ExportColorProfile colorProfile=10;float quality=11;}enum ExportSVGIDMode{IF_NEEDED=0;ALWAYS=1;}message LayoutGrid{LayoutGridType type=1;Axis axis=2;bool visible=3;int numSections=4;float offset=5;float sectionSize=6;float gutterSize=7;Color color=8;LayoutGridPattern pattern=9;VariableData numSectionsVar=10;VariableData offsetVar=11;VariableData sectionSizeVar=12;VariableData gutterSizeVar=13;}message Guide{Axis axis=1;float offset=2;GUID guid=3;}message Path{WindingRule windingRule=1;uint commandsBlob=2;uint styleID=3;}enum StyleType{NONE=0;FILL=1;STROKE=2;TEXT=3;EFFECT=4;EXPORT=5;GRID=6;}message SharedStyleReference{string styleKey=1;string versionHash=2;}message SharedStyleMasterData{string styleKey=1;string sortPosition=2;string fileKey=3;}enum ScrollBehavior{SCROLLS=0;FIXED_WHEN_CHILD_OF_SCROLLING_FRAME=1;STICKY_SCROLLS=2;}message ArcData{float startingAngle=1;float endingAngle=2;float innerRadius=3;}message SymbolLink{string uri=1;string displayName=2;string displayText=3;}message PluginData{string pluginID=1;string value=2;string key=3;}message PluginRelaunchData{string pluginID=1;string message=2;string command=3;bool isDeleted=4;}message MultiplayerFieldVersion{uint counter=1;uint sessionID=2;}enum ConnectorMagnet{NONE=0;AUTO=1;TOP=2;LEFT=3;BOTTOM=4;RIGHT=5;CENTER=6;AUTO_HORIZONTAL=7;EDGE=8;ABSOLUTE=9;}message ConnectorEndpoint{GUID endpointNodeID=1;Vector position=2;ConnectorMagnet magnet=3;}message ConnectorControlPoint{Vector position=1;Vector axis=2;}enum ConnectorTextSection{MIDDLE_TO_START=0;MIDDLE_TO_END=1;}enum ConnectorOffAxisOffset{NONE=0;ABOVE=1;BELOW=2;}message ConnectorTextMidpoint{ConnectorTextSection section=1;float offset=2;ConnectorOffAxisOffset offAxisOffset=3;}enum ConnectorLineStyle{ELBOWED=0;STRAIGHT=1;CURVED=2;}enum ConnectorType{MANUAL=0;DIAGRAM=1;}enum AnnotationPropertyType{FILL=0;STROKE=1;WIDTH=2;HEIGHT=3;MIN_WIDTH=4;MIN_HEIGHT=5;MAX_WIDTH=6;MAX_HEIGHT=7;STROKE_WIDTH=8;CORNER_RADIUS=9;EFFECT=10;TEXT_STYLE=11;TEXT_ALIGN_HORIZONTAL=12;FONT_FAMILY=13;FONT_SIZE=14;FONT_WEIGHT=15;LINE_HEIGHT=16;LETTER_SPACING=17;STACK_SPACING=18;STACK_PADDING=19;STACK_MODE=20;STACK_ALIGNMENT=21;OPACITY=22;COMPONENT=23;FONT_STYLE=24;}message AnnotationProperty{AnnotationPropertyType type=1;}message Annotation{string label=1;AnnotationProperty[]properties=2;}enum AnnotationMeasurementNodeSide{TOP=0;BOTTOM=1;LEFT=2;RIGHT=3;}message AnnotationMeasurement{GUID id=1;GUID fromNode=2[deprecated];GUID toNode=3;AnnotationMeasurementNodeSide fromNodeSide=4;bool toSameSide=5;float innerOffsetRelative=6;float outerOffsetFixed=7;GUIDPath toNodeStablePath=8;string freeText=9;}message LibraryMoveInfo{string oldKey=1;string pasteFileKey=2;}message LibraryMoveHistoryItem{GUID sourceNodeId=1;string sourceComponentKey=2;}message DeveloperRelatedLink{string nodeId=1;string fileKey=2;string linkName=3;string linkUrl=4;}message WidgetPointer{GUID nodeId=1;}message EditInfo{string timestampIso8601=1;string userId=2;uint lastEditedAt=3;uint createdAt=4;}enum EditorType{DESIGN=0;WHITEBOARD=1;SLIDES=2;DEV_HANDOFF=3;SITES=4;COOPER=5;}enum MaskType{ALPHA=0;OUTLINE=1;LUMINANCE=2;}enum ModuleType{NONE=0;SINGLE_NODE=1;MULTI_NODE=2;}enum SectionStatus{NONE=0;BUILD=1;COMPLETED=2;}message SectionStatusInfo{SectionStatus status=1;uint lastUpdateUnixTimestamp=2;string description=3;string userId=4;SectionStatus prevStatus=5;}message NodeChange{GUID guid=1;uint guidTag=53[deprecated];NodePhase phase=2;uint phaseTag=54[deprecated];ParentIndex parentIndex=3;uint parentIndexTag=55[deprecated];NodeType type=4;uint typeTag=56[deprecated];string name=5;uint nameTag=57[deprecated];bool isPublishable=174;string description=318;LibraryMoveInfo libraryMoveInfo=256;LibraryMoveHistoryItem[]libraryMoveHistory=281;string key=319;AssetIdMap fileAssetIds=383;uint styleID=49;uint styleIDTag=101[deprecated];bool isSoftDeletedStyle=176;bool isNonUpdateable=177;bool isFillStyle=157[deprecated];bool isStrokeStyle=161[deprecated];bool isOverrideOverTextStyle=376;StyleType styleType=163;string styleDescription=191;string version=171;SharedStyleMasterData sharedStyleMasterData=172;SharedStyleReference sharedStyleReference=173;string userFacingVersion=399;string sortPosition=320;SharedStyleMasterData ojansSuperSecretNodeField=345[deprecated];SharedStyleMasterData sevMoonlitLilyData=348;GUID inheritFillStyleID=158;GUID inheritStrokeStyleID=162;GUID inheritTextStyleID=167;GUID inheritExportStyleID=168;GUID inheritEffectStyleID=169;GUID inheritGridStyleID=170;GUID inheritFillStyleIDForStroke=185;StyleId styleIdForFill=332;StyleId styleIdForStrokeFill=333;StyleId styleIdForText=334;StyleId styleIdForEffect=335;StyleId styleIdForGrid=336;Paint[]backgroundPaints=193;GUID inheritFillStyleIDForBackground=194[deprecated];bool isStateGroup=225;StateGroupPropertyValueOrder[]stateGroupPropertyValueOrders=238;SharedSymbolReference sharedSymbolReference=122;bool isSymbolPublishable=123;GUIDPathMapping[]sharedSymbolMappings=124;string sharedSymbolVersion=126;SharedComponentMasterData sharedComponentMasterData=152;string symbolDescription=144;GUIDPathMapping[]unflatteningMappings=164;GUIDPathMapping[]forceUnflatteningMappings=228;string publishFile=214;string sourceLibraryKey=395;GUID publishID=215;string componentKey=216;bool isC2=217;string publishedVersion=218;string originComponentKey=252[deprecated];ComponentPropDef[]componentPropDefs=266;ComponentPropRef[]componentPropRefs=267;SymbolData symbolData=113;uint symbolDataTag=114[deprecated];NodeChange[]derivedSymbolData=125;bool nestedInstanceResizeEnabled=394;GUID overriddenSymbolID=143;ComponentPropAssignment[]componentPropAssignments=268;bool propsAreBubbled=305;InstanceOverrideStash[]overrideStash=248;InstanceOverrideStashV2[]overrideStashV2=250[deprecated];GUIDPath guidPath=111;uint guidPathTag=112[deprecated];int overrideLevel=321;ModuleType moduleType=382;float fontSize=21;uint fontSizeTag=73[deprecated];float paragraphIndent=22;uint paragraphIndentTag=74[deprecated];float paragraphSpacing=23;uint paragraphSpacingTag=75[deprecated];TextAlignHorizontal textAlignHorizontal=32;uint textAlignHorizontalTag=84[deprecated];TextAlignVertical textAlignVertical=33;uint textAlignVerticalTag=85[deprecated];TextCase textCase=34;uint textCaseTag=86[deprecated];TextDecoration textDecoration=35;uint textDecorationTag=87[deprecated];Number lineHeight=40;uint lineHeightTag=92[deprecated];FontName fontName=41;uint fontNameTag=93[deprecated];TextData textData=42;uint textDataTag=94[deprecated];DerivedTextData derivedTextData=359;bool fontVariantCommonLigatures=127;bool fontVariantContextualLigatures=128;bool fontVariantDiscretionaryLigatures=129;bool fontVariantHistoricalLigatures=130;bool fontVariantOrdinal=131;bool fontVariantSlashedZero=132;FontVariantNumericFigure fontVariantNumericFigure=133;FontVariantNumericSpacing fontVariantNumericSpacing=134;FontVariantNumericFraction fontVariantNumericFraction=135;FontVariantCaps fontVariantCaps=136;FontVariantPosition fontVariantPosition=137;Number letterSpacing=165;string fontVersion=202;LeadingTrim leadingTrim=322;bool hangingPunctuation=337;bool hangingList=339;int maxLines=351;ResponsiveTextStyleVariant[]responsiveTextStyleVariants=417;SectionStatus sectionStatus=352[deprecated];SectionStatusInfo sectionStatusInfo=355;uint textUserLayoutVersion=203;uint textExplicitLayoutVersion=396;OpenTypeFeature[]toggledOnOTFeatures=205;OpenTypeFeature[]toggledOffOTFeatures=206;Hyperlink hyperlink=223;Mention mention=340;FontVariation[]fontVariations=260;uint textBidiVersion=279;TextTruncation textTruncation=280;bool hasHadRTLText=292;EmojiImageSet emojiImageSet=391;string slideThumbnailHash=392;bool visible=6;uint visibleTag=58[deprecated];bool locked=7;uint lockedTag=59[deprecated];float opacity=8;uint opacityTag=60[deprecated];BlendMode blendMode=9;uint blendModeTag=61[deprecated];Vector size=11;uint sizeTag=63[deprecated];Matrix transform=12;uint transformTag=64[deprecated];float[]dashPattern=13;uint dashPatternTag=65[deprecated];bool mask=16;uint maskTag=68[deprecated];bool maskIsOutline=18;uint maskIsOutlineTag=70[deprecated];MaskType maskType=317;float backgroundOpacity=19;uint backgroundOpacityTag=71[deprecated];float cornerRadius=20;uint cornerRadiusTag=72[deprecated];float strokeWeight=26;uint strokeWeightTag=78[deprecated];StrokeAlign strokeAlign=29;uint strokeAlignTag=81[deprecated];StrokeCap strokeCap=30;uint strokeCapTag=82[deprecated];StrokeJoin strokeJoin=31;uint strokeJoinTag=83[deprecated];Paint[]fillPaints=38;uint fillPaintsTag=90[deprecated];Paint[]strokePaints=39;uint strokePaintsTag=91[deprecated];Effect[]effects=43;uint effectsTag=95[deprecated];Color backgroundColor=50;uint backgroundColorTag=102[deprecated];Path[]fillGeometry=51;uint fillGeometryTag=103[deprecated];Path[]strokeGeometry=52;uint strokeGeometryTag=104[deprecated];Paint[]textDecorationFillPaints=411;bool textDecorationSkipInk=412;Number textUnderlineOffset=413;Number textDecorationThickness=415;TextDecorationStyle textDecorationStyle=416;float rectangleTopLeftCornerRadius=145;float rectangleTopRightCornerRadius=146;float rectangleBottomLeftCornerRadius=147;float rectangleBottomRightCornerRadius=148;bool rectangleCornerRadiiIndependent=149;bool rectangleCornerToolIndependent=150;bool proportionsConstrained=151;bool useAbsoluteBounds=258[deprecated];bool borderTopHidden=287[deprecated];bool borderBottomHidden=288[deprecated];bool borderLeftHidden=289[deprecated];bool borderRightHidden=290[deprecated];bool bordersTakeSpace=294;float borderTopWeight=295;float borderBottomWeight=296;float borderLeftWeight=297;float borderRightWeight=298;bool borderStrokeWeightsIndependent=299;ConstraintType horizontalConstraint=28;uint horizontalConstraintTag=80[deprecated];StackMode stackMode=105;uint stackModeTag=106[deprecated];float stackSpacing=107;uint stackSpacingTag=108[deprecated];float stackPadding=109;uint stackPaddingTag=110[deprecated];StackCounterAlign stackCounterAlign=120[deprecated];StackJustify stackJustify=121;StackAlign stackAlign=208[deprecated];float stackHorizontalPadding=209;float stackVerticalPadding=210;StackSize stackWidth=211[deprecated];StackSize stackHeight=212[deprecated];StackSize stackPrimarySizing=229;StackJustify stackPrimaryAlignItems=230;StackAlign stackCounterAlignItems=231;float stackChildPrimaryGrow=232;float stackPaddingRight=233;float stackPaddingBottom=234;StackCounterAlign stackChildAlignSelf=236;StackPositioning stackPositioning=269;bool stackReverseZIndex=271;StackWrap stackWrap=323;float stackCounterSpacing=324;OptionalVector minSize=325;OptionalVector maxSize=326;StackCounterAlignContent stackCounterAlignContent=343;int[]sortedMovingChildIndices=406;bool isSnakeGameBoard=344[deprecated];GUID transitionNodeID=139;GUID prototypeStartNodeID=140;Color prototypeBackgroundColor=141;TransitionInfo transitionInfo=153[deprecated];TransitionType transitionType=154;float transitionDuration=155;EasingType easingType=156;bool transitionPreserveScroll=181;ConnectionType connectionType=182;string connectionURL=183;PrototypeDevice prototypeDevice=184;InteractionType interactionType=187;float transitionTimeout=188;bool interactionMaintained=189;float interactionDuration=190;bool destinationIsOverlay=192[deprecated];bool transitionShouldSmartAnimate=207;PrototypeInteraction[]prototypeInteractions=226;PrototypeStartingPoint prototypeStartingPoint=249;PluginData[]pluginData=204;PluginRelaunchData[]pluginRelaunchData=219;ConnectorEndpoint connectorStart=242;ConnectorEndpoint connectorEnd=243;ConnectorLineStyle connectorLineStyle=244;StrokeCap connectorStartCap=245;StrokeCap connectorEndCap=246;ConnectorControlPoint[]connectorControlPoints=253;ConnectorTextMidpoint connectorTextMidpoint=255;ConnectorType connectorType=373;Annotation[]annotations=369;AnnotationMeasurement[]measurements=384;ShapeWithTextType shapeWithTextType=241;float shapeUserHeight=247;DerivedImmutableFrameData derivedImmutableFrameData=254;MultiplayerFieldVersion derivedImmutableFrameDataVersion=338;NodeGenerationData nodeGenerationData=240;CodeBlockLanguage codeBlockLanguage=259;LinkPreviewData linkPreviewData=278;bool shapeTruncates=282;bool sectionContentsHidden=283;VideoPlayback videoPlayback=300;StampData stampData=301;SectionPresetInfo sectionPresetInfo=370;PlatformShapeDefinition platformShapeDefinition=409;MultiplayerMap widgetSyncedState=273;uint widgetSyncCursor=274[deprecated];WidgetDerivedSubtreeCursor widgetDerivedSubtreeCursor=275[deprecated];WidgetPointer widgetCachedAncestor=276;WidgetInputBehavior widgetInputBehavior=285;string widgetTooltip=286;WidgetHoverStyle widgetHoverStyle=291;bool isWidgetStickable=293;bool shouldHideCursorsOnWidgetHover=360;WidgetMetadata widgetMetadata=262;WidgetEvent[]widgetEvents=263;WidgetPropertyMenuItem[]widgetPropertyMenuItems=265;WidgetInputTextNodeType widgetInputTextNodeType=401;TableRowColumnPositionMap tableRowPositions=308;TableRowColumnPositionMap tableColumnPositions=309;TableRowColumnSizeMap tableRowHeights=310;TableRowColumnSizeMap tableColumnWidths=311;MultiplayerMap interactiveSlideConfigData=371;MultiplayerMap interactiveSlideParticipantData=372;FlappType flappType=402;string slideSpeakerNotes=389;bool isSkippedSlide=410;ThemeID themeID=379;SlideThemeData slideThemeData=381[deprecated];SlideThemeMap slideThemeMap=390;string slideTemplateFileKey=393;GUID diagramParentId=363[deprecated];GUID layoutRoot=362[deprecated];string layoutPosition=364[deprecated];DiagramLayoutRuleType diagramLayoutRuleType=366;DiagramParentIndex diagramParentIndex=367;DiagramLayoutPaused diagramLayoutPaused=368;bool isPageDivider=380;InternalEnumForTest internalEnumForTest=251;InternalDataForTest internalDataForTest=257;uint count=10;uint countTag=62[deprecated];bool autoRename=14;uint autoRenameTag=66[deprecated];bool backgroundEnabled=15;uint backgroundEnabledTag=67[deprecated];bool exportContentsOnly=17;uint exportContentsOnlyTag=69[deprecated];float starInnerScale=24;uint starInnerScaleTag=76[deprecated];float miterLimit=25;uint miterLimitTag=77[deprecated];float textTracking=27;uint textTrackingTag=79[deprecated];BooleanOperation booleanOperation=36;uint booleanOperationTag=88[deprecated];ConstraintType verticalConstraint=37;uint verticalConstraintTag=89[deprecated];VectorMirror handleMirroring=44;uint handleMirroringTag=96[deprecated];ExportSettings[]exportSettings=45;uint exportSettingsTag=97[deprecated];TextAutoResize textAutoResize=46;uint textAutoResizeTag=98[deprecated];LayoutGrid[]layoutGrids=47;uint layoutGridsTag=99[deprecated];VectorData vectorData=48;uint vectorDataTag=100[deprecated];bool frameMaskDisabled=115;uint frameMaskDisabledTag=116[deprecated];bool resizeToFit=117;uint resizeToFitTag=118[deprecated];bool exportBackgroundDisabled=119;Guide[]guides=138;bool internalOnly=142;ScrollDirection scrollDirection=159;float cornerSmoothing=160;Vector scrollOffset=166[deprecated];bool exportTextAsSVGText=175;ScrollContractedState scrollContractedState=178[deprecated];Vector contractedSize=179[deprecated];string fixedChildrenDivider=180[deprecated];ScrollBehavior scrollBehavior=186;ArcData arcData=195;int derivedSymbolDataLayoutVersion=196;NavigationType navigationType=197;OverlayPositionType overlayPositionType=198;Vector overlayRelativePosition=199;OverlayBackgroundInteraction overlayBackgroundInteraction=200;OverlayBackgroundAppearance overlayBackgroundAppearance=201;GUID overrideKey=213;bool containerSupportsFillStrokeAndCorners=220;StackSize stackCounterSizing=221;bool containersSupportFillStrokeAndCorners=222[deprecated];KeyTrigger keyTrigger=224;string voiceEventPhrase=227;GUID[]ancestorPathBeforeDeletion=235;SymbolLink[]symbolLinks=237;TextListData textListData=239[deprecated];bool detachOpticalSizeFromFontSize=261;float listSpacing=264;EmbedData embedData=270;RichMediaData richMediaData=272;MultiplayerMap renderedSyncedState=277;bool simplifyInstancePanels=284;HTMLTag accessibleHTMLTag=302;ARIARole ariaRole=303;string accessibleLabel=304;VariableData variableData=306[deprecated];VariableDataMap variableConsumptionMap=307;VariableModeBySetMap variableModeBySetMap=316;VariableSetMode[]variableSetModes=312;VariableSetID variableSetID=313;VariableResolvedDataType variableResolvedType=314;VariableDataValues variableDataValues=315;string variableTokenName=350[deprecated];VariableScope[]variableScopes=353;CodeSyntaxMap codeSyntax=358;PasteSource pasteSource=388;EditorType pageType=397;VariableSetID backingVariableSetId=377;VariableIdOrVariableOverrideId backingVariableId=378[deprecated];bool isCollectionExtendable=385;string rootVariableKey=386;HandoffStatusMap handoffStatusMap=361;AgendaPositionMap agendaPositionMap=327;AgendaMetadataMap agendaMetadataMap=328;MigrationStatus migrationStatus=329;bool isSoftDeleted=330;EditInfo editInfo=331;ColorProfile colorProfile=341[deprecated];SymbolId detachedSymbolId=342;ChildReadingDirection childReadingDirection=346;string readingIndex=347;DocumentColorProfile documentColorProfile=349;DeveloperRelatedLink[]developerRelatedLinks=354;string slideActiveThemeLibKey=356;ARIAAttributesMap ariaAttributes=357;EditScopeInfo editScopeInfo=365;SemanticWeight semanticWeight=374;SemanticItalic semanticItalic=375;bool isResponsiveSet=387;GUID defaultResponsiveSetId=398;ResponsiveSetSettings responsiveSetSettings=400;bool areSlidesManuallyIndented=403;NodeBehaviors behaviors=404;string sourceCode=414;CMSSelector cmsSelector=419;CMSConsumptionMap cmsConsumptionMap=420;uint[]aiEditedNodeChangeFieldNumbers=405;string aiEditScopeLabel=408;FirstDraftData firstDraftData=407;FirstDraftKitElementData firstDraftKitElementData=418;CooperRevertData cooperRevertData=421;}message ResponsiveSetSettings{string title=1;string description=2;ResponsiveScalingMode scalingMode=3;float scalingMinFontSize=4;float scalingMaxFontSize=5;float scalingMinLayoutWidth=6;float scalingMaxLayoutWidth=7;string lang=8;string faviconHash=9;string socialImageHash=10;string googleAnalyticsID=11;bool blockSearchIndexing=12;string customCodeHeadStart=13;string customCodeHeadEnd=14;string customCodeBodyStart=15;string customCodeBodyEnd=16;GUID faviconID=17;GUID socialImageID=18;}enum ResponsiveScalingMode{REFLOW=0;SCALE=1;}message CMSSelector{string cmsCollectionId=1;CMSFilterCritera filterCriteria=2;CMSSelectorSort[]sorts=3;uint limit=4;}message CMSFilterCritera{CMSFilterCriteriaMatchType matchType=1;CMSSelectorFilter[]filters=2;}enum CMSFilterCriteriaMatchType{MATCH_ALL=0;MATCH_ANY=1;}message CMSSelectorFilter{string cmsFieldId=1;CMSSelectorFilterOperator op=2;string comparisonValue=3;}enum CMSSelectorFilterOperator{EQUALS=0;}message CMSSelectorSort{string cmsFieldId=1;CMSFieldOrderBy orderBy=2;}enum CMSFieldOrderBy{ASCENDING=0;DESCENDING=1;}message CMSConsumptionMap{CMSConsumptionMapEntry[]entries=1;}message CMSConsumptionMapEntry{CMSConsumptionField consumptionField=1;string cmsFieldId=2;}enum CMSConsumptionField{MISSING=0;TEXT_DATA=1;}message CooperRevertData{NodeChange originalValues=1;}message VideoPlayback{bool autoplay=1;bool mediaLoop=2;bool muted=3;}enum MediaAction{PLAY=0;PAUSE=1;TOGGLE_PLAY_PAUSE=2;MUTE=3;UNMUTE=4;TOGGLE_MUTE_UNMUTE=5;SKIP_FORWARD=6;SKIP_BACKWARD=7;SKIP_TO=8;}message WidgetHoverStyle{Paint[]fillPaints=1;Paint[]strokePaints=2;float opacity=3;bool areFillPaintsSet=4;bool areStrokePaintsSet=5;bool isOpacitySet=6;}message WidgetDerivedSubtreeCursor{uint sessionID=1;uint counter=2;}message MultiplayerMap{MultiplayerMapEntry[]entries=1;}message MultiplayerMapEntry{string key=1;string value=2;}message VariableDataMap{VariableDataMapEntry[]entries=1;}message VariableDataMapEntry{uint nodeField=1;VariableData variableData=2;VariableField variableField=3;}enum VariableField{MISSING=0;CORNER_RADIUS=1;PARAGRAPH_SPACING=2;PARAGRAPH_INDENT=3;STROKE_WEIGHT=4;STACK_SPACING=5;STACK_PADDING_LEFT=6;STACK_PADDING_TOP=7;STACK_PADDING_RIGHT=8;STACK_PADDING_BOTTOM=9;VISIBLE=10;TEXT_DATA=11;WIDTH=12;HEIGHT=13;RECTANGLE_TOP_LEFT_CORNER_RADIUS=14;RECTANGLE_TOP_RIGHT_CORNER_RADIUS=15;RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS=16;RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS=17;BORDER_TOP_WEIGHT=18;BORDER_BOTTOM_WEIGHT=19;BORDER_LEFT_WEIGHT=20;BORDER_RIGHT_WEIGHT=21;VARIANT_PROPERTIES=22;STACK_COUNTER_SPACING=23;MIN_WIDTH=24;MAX_WIDTH=25;MIN_HEIGHT=26;MAX_HEIGHT=27;FONT_FAMILY=28;FONT_STYLE=29;FONT_VARIATIONS=30;OPACITY=31;FONT_SIZE=32;LETTER_SPACING=34;LINE_HEIGHT=36;}message VariableModeBySetMap{VariableModeBySetMapEntry[]entries=1;}message VariableModeBySetMapEntry{VariableSetID variableSetID=1;GUID variableModeID=2;}message CodeSyntaxMap{CodeSyntaxMapEntry[]entries=1;}message CodeSyntaxMapEntry{CodeSyntaxPlatform platform=1;string value=2;}message TableRowColumnPositionMap{TableRowColumnPositionMapEntry[]entries=1;}message TableRowColumnPositionMapEntry{GUID id=1;string position=2;}message TableRowColumnSizeMap{TableRowColumnSizeMapEntry[]entries=1;}message TableRowColumnSizeMapEntry{GUID id=1;float size=2;}message AgendaPositionMap{AgendaPositionMapEntry[]entries=1;}message AgendaPositionMapEntry{GUID id=1;string position=2;}enum AgendaItemType{NODE=0;BLOCK=1;}message AgendaMetadataMap{AgendaMetadataMapEntry[]entries=1;}message AgendaMetadataMapEntry{GUID id=1;AgendaMetadata data=2;}message AgendaMetadata{string name=1;AgendaItemType type=2;GUID targetNodeID=3;AgendaTimerInfo timerInfo=4;AgendaVoteInfo voteInfo=5;AgendaMusicInfo musicInfo=6;}message AgendaTimerInfo{uint timerLength=1;}message AgendaVoteInfo{uint voteCount=1;}message AgendaMusicInfo{string songID=1;uint startTimeMs=2;}enum DiagramLayoutRuleType{NONE=0;TREE=1;}struct DiagramParentIndex{GUID guid;string position;}enum DiagramLayoutPaused{NO=0;YES=1;}message ComponentPropRef{uint nodeField=1;GUID defID=2;string zombieFallbackName=3;ComponentPropNodeField componentPropNodeField=4;bool isDeleted=5;}enum ComponentPropNodeField{VISIBLE=0;TEXT_DATA=1;OVERRIDDEN_SYMBOL_ID=2;INHERIT_FILL_STYLE_ID=3;}message ComponentPropAssignment{GUID defID=1;ComponentPropValue value=2;VariableData varValue=3;DerivedTextData legacyDerivedTextData=4;}message ComponentPropDef{GUID id=1;string name=2;ComponentPropValue initialValue=3;string sortPosition=4;GUID parentPropDefId=5;ComponentPropType type=6;bool isDeleted=7;ComponentPropPreferredValues preferredValues=8;VariableData varValue=9;}message ComponentPropValue{bool boolValue=1;TextData textValue=2;GUID guidValue=3;float floatValue=4;}enum ComponentPropType{BOOL=0;TEXT=1;COLOR=2;INSTANCE_SWAP=3;NUMBER=5;}message ComponentPropPreferredValues{string[]stringValues=1[deprecated];InstanceSwapPreferredValue[]instanceSwapValues=2;}message InstanceSwapPreferredValue{InstanceSwapPreferredValueType type=1;string key=2;}enum InstanceSwapPreferredValueType{COMPONENT=0;STATE_GROUP=1;}enum WidgetEvent{MOUSE_DOWN=0;CLICK=1;TEXT_EDIT_END=2;ATTACHED_STICKABLES_CHANGED=3;STUCK_STATUS_CHANGED=4;}enum WidgetInputBehavior{WRAP=0;TRUNCATE=1;MULTILINE=2;}message WidgetMetadata{string pluginID=1;string pluginVersionID=2;string widgetName=3;}enum WidgetPropertyMenuItemType{ACTION=0;SEPARATOR=1;COLOR=2;DROPDOWN=3;COLOR_SELECTOR=4;TOGGLE=5;LINK=6;}message WidgetPropertyMenuSelectorOption{string option=1;string tooltip=2;}enum WidgetInputTextNodeType{WIDGET_CONTROLLED=0;RICH_TEXT=1;}message WidgetPropertyMenuItem{string propertyName=1;string tooltip=2;WidgetPropertyMenuItemType itemType=3;string icon=4;WidgetPropertyMenuSelectorOption[]options=5;string selectedOption=6;bool isToggled=7;string href=8;bool allowCustomColor=9;}enum CodeBlockLanguage{TYPESCRIPT=0;CPP=1;RUBY=2;CSS=3;JAVASCRIPT=4;HTML=5;JSON=6;GRAPHQL=7;PYTHON=8;GO=9;SQL=10;SWIFT=11;KOTLIN=12;RUST=13;BASH=14;PLAINTEXT=15;}enum InternalEnumForTest{OLD=1;}message InternalDataForTest{int testFieldA=1;}message StateGroupPropertyValueOrder{string property=1;string[]values=2;}message TextListData{int listID=1[deprecated];BulletType bulletType=2[deprecated];int indentationLevel=3[deprecated];int lineNumber=4[deprecated];}enum BulletType{ORDERED=0;UNORDERED=1;INDENT=2;NO_LIST=3;}message TextLineData{LineType lineType=1;int styleId=10;int indentationLevel=2;SourceDirectionality sourceDirectionality=9;Directionality directionality=3[deprecated];DirectionalityIntent directionalityIntent=4[deprecated];int downgradeStyleId=5;int consistencyStyleId=6;int listStartOffset=7;bool isFirstLineOfList=8;}message DerivedTextLineData{Directionality directionality=1;}enum LineType{PLAIN=0;ORDERED_LIST=1;UNORDERED_LIST=2;BLOCKQUOTE=3;HEADER=4;}enum SourceDirectionality{AUTO=0;LTR=1;RTL=2;}enum Directionality{LTR=0;RTL=1;}enum DirectionalityIntent{IMPLICIT=0;EXPLICIT=1;}message PrototypeInteraction{GUID id=1;PrototypeEvent event=2;PrototypeAction[]actions=3;bool isDeleted=4;int stateManagementVersion=5;}message PrototypeEvent{InteractionType interactionType=1;bool interactionMaintained=2;float interactionDuration=3;KeyTrigger keyTrigger=4;string voiceEventPhrase=5;float transitionTimeout=6;float mediaHitTime=7;}message PrototypeVariableTarget{VariableID id=1;NodeFieldAlias nodeFieldAlias=2;}message ConditionalActions{PrototypeAction[]actions=1;VariableData condition=2;}message PrototypeAction{GUID transitionNodeID=1;TransitionType transitionType=2;float transitionDuration=3;EasingType easingType=4;float transitionTimeout=5[deprecated];bool transitionShouldSmartAnimate=6;ConnectionType connectionType=7;string connectionURL=8;Vector overlayRelativePosition=9;NavigationType navigationType=10;bool transitionPreserveScroll=11;float[]easingFunction=12;Vector extraScrollOffset=13;GUID targetVariableID=14[deprecated];VariableAnyValue targetVariableValue=15[deprecated];MediaAction mediaAction=16;bool transitionResetVideoPosition=17;bool openUrlInNewTab=18;PrototypeVariableTarget targetVariable=19;VariableData targetVariableData=20;float mediaSkipToTime=21;float mediaSkipByAmount=22;VariableData[]conditions=23;ConditionalActions[]conditionalActions=24;bool transitionResetScrollPosition=25;bool transitionResetInteractiveComponents=26;VariableSetID targetVariableSetID=27;GUID targetVariableModeID=28;string targetVariableSetKey=29;}message PrototypeStartingPoint{string name=1;string description=2;string position=3;}enum TriggerDevice{KEYBOARD=0;UNKNOWN_CONTROLLER=1;XBOX_ONE=2;PS4=3;SWITCH_PRO=4;}message KeyTrigger{int[]keyCodes=1;TriggerDevice triggerDevice=2;}message Hyperlink{string url=1;GUID guid=2;}enum MentionSource{DEFAULT=0;COPY_DUPLICATE=1;}message Mention{GUID id=1;string mentionedUserId=2;string mentionedByUserId=3;string fileKey=4;MentionSource source=5;uint64 mentionedUserIdInt=6;uint64 mentionedByUserIdInt=7;}message EmbedData{string url=1;string srcUrl=2;string title=3;string thumbnailUrl=4;float width=5;float height=6;string embedType=7;string thumbnailImageHash=8;string faviconImageHash=9;string provider=10;string originalText=11;string description=12;string embedVersionId=13;}message StampData{string userId=1;string votingSessionId=2;string stampedByUserId=3;}message LinkPreviewData{string url=1;string title=2;string provider=3;string description=4;string thumbnailImageHash=5;string faviconImageHash=6;float thumbnailImageWidth=7;float thumbnailImageHeight=8;}message Viewport{Rect canvasSpaceBounds=1;bool pixelPreview=2;float pixelDensity=3;GUID canvasGuid=4;}message Mouse{MouseCursor cursor=1;Vector canvasSpaceLocation=2;Rect canvasSpaceSelectionBox=3;GUID canvasGuid=4;uint cursorHiddenReason=5;}struct Click{uint id;Vector point;}struct ScrollPosition{GUID node;Vector scrollOffset;}struct TriggeredOverlay{GUID overlayGuid;GUID hotspotGuid;GUID swapGuid;}message TriggeredOverlayData{GUID overlayGuid=1;GUID hotspotGuid=2;GUID swapGuid=3;GUID prototypeInteractionGuid=4;GUIDPath hotspotBlueprintId=5;}message TriggeredSetVariableActionData{GUID nodeForFindingTopmostScreenId=1;string targetVariableId=2;string targetVariableData=3;string resolvedVariableModes=4;}message TriggeredSetVariableModeActionData{GUID nodeForFindingTopmostScreenId=1;string targetVariableSetKey=2;string targetVariableModeId=3;VariableSetID targetVariableSetId=4;}message VideoStateChangeData{GUID targetNodeId=1;bool isPlaying=2;bool isPlayingSound=3;uint[]currentTimes=4;uint actionTakenTimestamp=5;}message EmbeddedPrototypeData{GUID nodeId=1;uint sessionId=2;}message PresentedState{GUID baseScreenID=1;TriggeredOverlayData[]overlays=2;}enum TransitionDirection{FORWARD=0;REVERSE=1;}message TopLevelPlaybackChange{PresentedState oldState=1;PresentedState newState=2;GUIDPath hotspotBlueprintID=3;GUID interactionID=4;bool isHotspotInNewPresentedState=5;TransitionDirection direction=6;GUIDPath instanceStablePath=7;}message InstanceStateChange{GUID stateID=1;GUID interactionID=2;GUIDPath hotspotStablePath=3;GUIDPath instanceStablePath=4;PlaybackChangePhase phase=5;}message TextCursor{Rect selectionBox=1;GUID canvasGuid=2[deprecated];GUID textNodeGuid=3;}message TextSelection{Rect[]selectionBoxes=1;GUID canvasGuid=2[deprecated];GUID textNodeGuid=3;Vector textSelectionRange=4;GUID textNodeOrContainingIfGuid=5;GUID tableCellRowId=6;GUID tableCellColId=7;}enum PlaybackChangePhase{INITIATED=0;ABORTED=1;COMMITTED=2;}message PlaybackChangeKeyframe{PlaybackChangePhase phase=1;float progress=2;float timestamp=3;}message StateMapping{GUIDPath stablePath=1;TopLevelPlaybackChange lastTopLevelChange=2;PlaybackChangeKeyframe lastTopLevelChangeStatus=3;float timestamp=4;}message ScrollMapping{GUIDPath blueprintID=1;uint overlayIndex=2;Vector scrollOffset=3;}message PlaybackUpdate{TopLevelPlaybackChange lastTopLevelChange=1;PlaybackChangeKeyframe lastTopLevelChangeStatus=2;ScrollMapping[]scrollMappings=3;float timestamp=4;Vector pointerLocation=5;bool isTopLevelFrameChange=6;StateMapping[]stateMappings=7;}message ChatMessage{string text=1;string previousText=2;}message VoiceMetadata{string connectedCallId=1;}message AprilFunCursor{string id=1;bool trailEnabled=2;}enum Heartbeat{FOREGROUND=0;BACKGROUND=1;}message UserChange{uint sessionID=1;bool connected=2;string name=3;Color color=4;string imageURL=5;Viewport viewport=6;Mouse mouse=7;GUID[]selection=8;uint[]observing=9;string deviceName=10;Click[]recentClicks=11;ScrollPosition[]scrollPositions=12;TriggeredOverlay[]triggeredOverlays=13[deprecated];string userID=14;GUID lastTriggeredHotspot=15;GUID lastTriggeredPrototypeInteractionID=16;TriggeredOverlayData[]triggeredOverlaysData=17;PlaybackUpdate[]playbackUpdates=18[deprecated];ChatMessage chatMessage=19;VoiceMetadata voiceMetadata=20;bool canWrite=21;bool highFiveStatus=22;InstanceStateChange[]instanceStateChanges=23;TextCursor textCursor=24;TextSelection textSelection=25;uint connectedAtTimeS=26;bool focusOnTextCursor=27;Heartbeat heartbeat=28;TriggeredSetVariableActionData[]triggeredSetVariableActionData=29;VideoStateChangeData[]videoStateChangeData=30;string clientID=31;GUID focusedSlideId=32;TriggeredSetVariableModeActionData[]triggeredSetVariableModeActionData=33;AprilFunCursor aprilFunCursor=34[deprecated];EmbeddedPrototypeData[]embeddedPrototypeData=35;GUID activeSlidesEmbeddablePrototype=36;}message InteractiveSlideElementChange{string userID=1[deprecated];string anonymousUserID=2;GUID nodeID=3;string responseData=4;}message NodeStatusChange{GUID[]nodeIds=1;SectionStatusInfo statusInfo=2;}enum SceneGraphQueryBehavior{DEFAULT=0;CONTAINING_PAGE=1;PLUGIN=2;}message SceneGraphQuery{GUID startingNode=1;uint depth=2;SceneGraphQueryBehavior behavior=3;}message NodeChangesMetadata{uint blobsFieldOffset=1;}message CursorReaction{string imageUrl=1;}message TimerInfo{bool isPaused=1;uint timeRemainingMs=2;uint totalTimeMs=3;uint timerID=4;string setBy=5;uint songID=6[deprecated];uint lastReceivedSongTimestampMs=7;string songUUID=8;}message MusicInfo{bool isPaused=1;uint messageID=2;string songID=3;uint lastReceivedSongTimestampMs=4;bool isStopped=5;}message PresenterNomination{uint sessionID=1;bool isCancelled=2;}message PresenterInfo{uint sessionID=1;PresenterNomination nomination=2;}message ClientBroadcast{uint sessionID=1;CursorReaction cursorReaction=2;TimerInfo timer=3;PresenterInfo presenter=4;PresenterInfo prototypePresenter=5;MusicInfo music=6;}message Message{MessageType type=1;uint sessionID=2;uint ackID=3;NodeChange[]nodeChanges=4;UserChange[]userChanges=5;InteractiveSlideElementChange interactiveSlideElementChange=32;NodeStatusChange nodeStatusChange=36;Blob[]blobs=6;uint blobBaseIndex=30;string signalName=7;Access access=8;string styleSetName=9;StyleSetType styleSetType=10;StyleSetContentType styleSetContentType=11;int pasteID=12;Vector pasteOffset=13;string pasteFileKey=14;string signalPayload=15;SceneGraphQuery[]sceneGraphQueries=16;NodeChangesMetadata nodeChangesMetadata=17[deprecated];uint fileVersion=18;bool pasteIsPartiallyOutsideEnclosingFrame=19;GUID pastePageId=20;bool isCut=21;Message[]localUndoStack=22;Message[]localRedoStack=23;ClientBroadcast[]broadcasts=24;uint reconnectSequenceNumber=25;string pasteBranchSourceFileKey=26;EditorType pasteEditorType=27;string postSyncActions=28;GUID[]publishedAssetGuids=29;bool dirtyFromInitialLoad=31;ClipboardSelectionRegion[]clipboardSelectionRegions=33;EncodedOffsetsIndex encodedOffsetsIndex=34;bool hasRepeatingContent=35;}message EncodedOffsetsIndex{uint nodeChangesFieldOffset=1;uint nodeChangesFieldLength=2;uint blobsFieldOffset=3;GUIDAndEncodedOffset[]nodeChangeOffsets=4;}struct GUIDAndEncodedOffset{GUID guid;uint offset;}message DiffChunk{uint[]nodeChanges=1;NodePhase phase=2[deprecated];NodeChange displayNode=3;GUID canvasId=4;string canvasName=5;bool canvasIsInternal=6;uint[]chunksAffectingThisChunk=7;NodeChange[]basisParentHierarchy=8[deprecated];NodeChange[]parentHierarchy=9[deprecated];GUID[]basisParentHierarchyGuids=10;GUID[]parentHierarchyGuids=11;}enum DiffType{BRANCHING=0;NODE_CHANGES_ONLY=1;}message DiffPayload{NodeChange[]nodeChanges=1;Blob[]blobs=2;DiffChunk[]diffChunks=3;NodeChange[]diffBasis=4;NodeChange[]basisParentNodeChanges=5;NodeChange[]parentNodeChanges=6;DiffType diffType=7;}enum RichMediaType{ANIMATED_IMAGE=0;VIDEO=1;}message RichMediaData{string mediaHash=1;RichMediaType richMediaType=2;}enum VariableDataType{BOOLEAN=0;FLOAT=1;STRING=2;ALIAS=3;COLOR=4;EXPRESSION=5;MAP=6;SYMBOL_ID=7;FONT_STYLE=8;TEXT_DATA=9;INVALID=10;NODE_FIELD_ALIAS=11;}enum VariableResolvedDataType{BOOLEAN=0;FLOAT=1;STRING=2;COLOR=4;MAP=5;SYMBOL_ID=6;FONT_STYLE=7;TEXT_DATA=8;}message VariableAnyValue{bool boolValue=1;string textValue=2;float floatValue=3;VariableID alias=4;Color colorValue=5;Expression expressionValue=6;VariableMap mapValue=7;SymbolId symbolIdValue=8;VariableFontStyle fontStyleValue=9;TextData textDataValue=10;NodeFieldAlias nodeFieldAliasValue=11;}enum ExpressionFunction{ADDITION=0;SUBTRACTION=1;RESOLVE_VARIANT=2;MULTIPLY=3;DIVIDE=4;EQUALS=5;NOT_EQUAL=6;LESS_THAN=7;LESS_THAN_OR_EQUAL=8;GREATER_THAN=9;GREATER_THAN_OR_EQUAL=10;AND=11;OR=12;NOT=13;STRINGIFY=14;TERNARY=15;VAR_MODE_LOOKUP=16;NEGATE=17;IS_TRUTHY=18;}message Expression{ExpressionFunction expressionFunction=1;VariableData[]expressionArguments=2;}message VariableMapValue{string key=1;VariableData value=2;}message VariableMap{VariableMapValue[]values=1;}message VariableFontStyle{VariableData asString=1;VariableData asFloat=2;VariableData asVariations=3;}message NodeFieldAlias{GUIDPath stablePathToNode=1;NodeFieldAliasType nodeField=2;string indexOrKey=3;}enum NodeFieldAliasType{MISSING=0;COMPONENT_PROP_ASSIGNMENTS=1;}message VariableData{VariableAnyValue value=1;VariableDataType dataType=2;VariableResolvedDataType resolvedDataType=3;}message VariableSetMode{GUID id=1;string name=2;string sortPosition=3;}message VariableDataValues{VariableDataValuesEntry[]entries=1;}message VariableDataValuesEntry{GUID modeID=1;VariableData variableData=2;}enum VariableScope{ALL_SCOPES=0;TEXT_CONTENT=1;CORNER_RADIUS=2;WIDTH_HEIGHT=3;GAP=4;ALL_FILLS=5;FRAME_FILL=6;SHAPE_FILL=7;TEXT_FILL=8;STROKE=9;STROKE_FLOAT=10;EFFECT_FLOAT=11;EFFECT_COLOR=12;OPACITY=13;FONT_STYLE=14;FONT_FAMILY=15;FONT_SIZE=16;LINE_HEIGHT=17;LETTER_SPACING=18;PARAGRAPH_SPACING=19;PARAGRAPH_INDENT=20;FONT_VARIATIONS=21;}enum CodeSyntaxPlatform{WEB=0;ANDROID=1;iOS=2;}message OptionalVector{Vector value=1;}enum HTMLTag{AUTO=0;ARTICLE=1;SECTION=2;NAV=3;ASIDE=4;H1=5;H2=6;H3=7;H4=8;H5=9;H6=10;HGROUP=11;HEADER=12;FOOTER=13;ADDRESS=14;P=15;HR=16;PRE=17;BLOCKQUOTE=18;OL=19;UL=20;MENU=21;LI=22;DL=23;DT=24;DD=25;FIGURE=26;FIGCAPTION=27;MAIN=28;DIV=29;A=30;EM=31;STRONG=32;SMALL=33;S=34;CITE=35;Q=36;DFN=37;ABBR=38;RUBY=39;RT=40;RP=41;DATA=42;TIME=43;CODE=44;VAR=45;SAMP=46;KBD=47;SUB=48;SUP=49;I=50;B=51;U=52;MARK=53;BDI=54;BDO=55;SPAN=56;BR=57;WBR=58;PICTURE=59;SOURCE=60;IMG=61;FORM=62;LABEL=63;INPUT=64;BUTTON=65;SELECT=66;DATALIST=67;OPTGROUP=68;OPTION=69;TEXTAREA=70;OUTPUT=71;PROGRESS=72;METER=73;FIELDSET=74;LEGEND=75;VIDEO=76;}enum ARIARole{AUTO=0;NONE=52;APPLICATION=30;BANNER=67;COMPLEMENTARY=68;CONTENTINFO=69;FORM=70;MAIN=71;NAVIGATION=72;REGION=73;SEARCH=74;SEPARATOR=13;ARTICLE=31;COLUMNHEADER=35;DEFINITION=36;DIRECTORY=38;DOCUMENT=39;GROUP=44;HEADING=45;IMG=46;LIST=48;LISTITEM=49;MATH=50;NOTE=53;PRESENTATION=55;ROW=56;ROWGROUP=57;ROWHEADER=58;TABLE=62;TOOLBAR=65;BUTTON=1;CHECKBOX=2;GRIDCELL=3;LINK=4;MENUITEM=5;MENUITEMCHECKBOX=6;MENUITEMRADIO=7;OPTION=8;PROGRESSBAR=9;RADIO=10;SCROLLBAR=11;SLIDER=14;SPINBUTTON=15;TAB=17;TABPANEL=18;TEXTBOX=19;TREEITEM=20;COMBOBOX=21;GRID=22;LISTBOX=23;MENU=24;MENUBAR=25;RADIOGROUP=26;TABLIST=27;TREE=28;TREEGRID=29;TOOLTIP=66;ALERT=75;LOG=76;MARQUEE=77;STATUS=78;TIMER=79;ALERTDIALOG=80;DIALOG=81;SEARCHBOX=12;SWITCH=16;BLOCKQUOTE=32;CAPTION=33;CELL=34;DELETION=37;EMPHASIS=40;FEED=41;FIGURE=42;GENERIC=43;INSERTION=47;METER=51;PARAGRAPH=54;STRONG=59;SUBSCRIPT=60;SUPERSCRIPT=61;TERM=63;TIME=64;IMAGE=82;HEADING_1=83;HEADING_2=84;HEADING_3=85;HEADING_4=86;HEADING_5=87;HEADING_6=88;HEADER=89;FOOTER=90;SIDEBAR=91;SECTION=92;MAINCONTENT=93;TABLE_CELL=94;WIDGET=95;}message MigrationStatus{bool dsdCleanup=1;}message NodeFieldMap{NodeFieldMapEntry[]entries=1;}message NodeFieldMapEntry{GUID guid=1;uint field=2;uint lastModifiedSequenceNumber=3;}enum ColorProfile{SRGB=0;DISPLAY_P3=1;}enum DocumentColorProfile{LEGACY=0;SRGB=1;DISPLAY_P3=2;}enum ChildReadingDirection{NONE=0;LEFT_TO_RIGHT=1;RIGHT_TO_LEFT=2;}message ARIAAttributeAnyValue{bool boolValue=1;string stringValue=2;float floatValue=3;int intValue=4;string[]stringArrayValue=5;}enum ARIAAttributeDataType{BOOLEAN=0;STRING=1;FLOAT=2;INT=3;STRING_LIST=4;}message ARIAAttributeData{ARIAAttributeDataType type=1;ARIAAttributeAnyValue value=2;}message ARIAAttributesMap{ARIAAttributesMapEntry[]entries=1;}message ARIAAttributesMapEntry{string attribute=1;ARIAAttributeData value=2;}message HandoffStatusMapEntry{GUID guid=1;SectionStatusInfo handoffStatus=2;}message HandoffStatusMap{HandoffStatusMapEntry[]entries=1;}message EditScopeInfo{EditScopeStack[]editScopeStacks=1[deprecated];EditScopeSnapshot[]snapshots=2;}message EditScopeSnapshot{EditScopeStack[]frames=1;uint[]nodeChangeFieldNumbers=2;}message EditScopeStack{EditScope[]stack=1;}message EditScope{EditScopeType type=1;string label=2;EditorType editorType=3;}enum EditScopeType{INVALID=0;TEST_SETUP=1;USER=2;PLUGIN=3;SYSTEM=4;REST_API=5;ONBOARDING=6;AUTOSAVE=7;AI=8;}enum SectionPresetState{INSERTED=0;USER_EDITED=1;}enum EmojiImageSet{APPLE=0;NOTO=1;}enum SelectionRegionFocusType{NONE=0;PRIMARY=1;SECONDARY=2;}message SectionPresetInfo{uint64 shelfId=1;uint64 templateId=2;string templateName=3;SectionPresetState state=4;}message ClipboardSelectionRegion{GUID parent=1;GUID[]nodes=2;Vector enclosingFrameOffset=3;bool pasteIsPartiallyOutsideEnclosingFrame=4;SelectionRegionFocusType focusType=5;}enum FirstDraftKitType{LOCAL=0;LIBRARY=1;NONE=2;}message FirstDraftKit{string key=1;FirstDraftKitType type=2;}message FirstDraftData{string generationId=1;FirstDraftKit kit=2;}enum FirstDraftKitElementType{NONE=0;BUILDING_BLOCK=1;GROUPED_COMPONENT=2;}message FirstDraftKitElementData{FirstDraftKitElementType type=1;}enum PlatformShapeProperty{FILL=0;STROKE=1;TEXT=2;}enum PlatformShapeBehaviorType{SHAPE=0;CONTAINER=1;}message PlatformShapePropertyMapEntry{PlatformShapeProperty property=1;GUIDPath[]nodePaths=2;}message PlatformShapeDefinition{PlatformShapePropertyMapEntry[]propertyMapEntries=1;PlatformShapeBehaviorType behaviorType=2;}message NodeBehaviors{LinkBehavior link=1;AppearBehavior appear=2;HoverBehavior hover=3;PressBehavior press=4;FocusBehavior focus=5;ScrollParallaxBehavior scrollParallax=6;ScrollTransformBehavior scrollTransform=7;}message BehaviorTransition{EasingType easingType=1;float[]easingFunction=2;float transitionDuration=3;float delay=4;}enum AppearBehaviorTrigger{PAGE_LOAD=1;THIS_LAYER_IN_VIEW=2;OTHER_LAYER_IN_VIEW=3;SCROLL_DIRECTION=4;}enum RelativeDirection{UP=1;DOWN=2;LEFT=3;RIGHT=4;}enum LinkBehaviorType{URL=1;PAGE=2;}message LinkBehavior{LinkBehaviorType type=1;string url=2;GUID page=3;bool openInNewWindow=4;}message AppearBehavior{AppearBehaviorTrigger trigger=1;RelativeDirection direction=2;GUID otherLayer=3;BehaviorTransition enterTransition=4;NodeChange enterState=5;BehaviorTransition exitTransition=6;NodeChange exitState=7;bool playsOnce=8;}message HoverBehavior{BehaviorTransition transition=1;NodeChange state=2;}message PressBehavior{BehaviorTransition transition=1;NodeChange state=2;}message FocusBehavior{BehaviorTransition transition=1;NodeChange state=2;}message ScrollParallaxBehavior{ScrollDirection axis=1;float speed=2;bool relativeToPage=3;}enum ScrollTransformBehaviorTrigger{PAGE_HEIGHT=1;THIS_LAYER_IN_VIEW=2;OTHER_LAYER_IN_VIEW=3;}message ScrollTransformBehavior{ScrollTransformBehaviorTrigger trigger=1;GUID otherLayer=2;BehaviorTransition transition=3;NodeChange fromState=4;NodeChange toState=5;}message VariableIdOrVariableOverrideId{VariableID variableId=1;VariableOverrideId variableOverrideId=2;}struct IndexFontVariationAxis{string tag;string name;float min;float max;float defaultValue;}struct IndexFontVariationAxisValue{string tag;float value;}message IndexFontStyle{string name=1;string postscript=2;float weight=3;bool italic=4;float stretch=5;IndexFontVariationAxisValue[]variationAxisValues=6;}message IndexFontFile{string filename=1;uint version=2;string family=3;IndexFontStyle[]styles=4;IndexFontVariationAxis[]variationAxes=5;bool useFontOpticalSize=6;}struct IndexFamilyRename{string oldFamily;string newFamily;}struct IndexStyleRename{string oldStyle;string newStyle;}struct IndexFamilyStylesRename{string familyName;IndexStyleRename[]styleRenames;}struct IndexRenames{IndexFamilyRename[]family;IndexFamilyStylesRename[]style;}struct IndexEmojiSequence{uint[]codepoints;}struct IndexEmojis{uint revision;uint[]sizes;IndexEmojiSequence[]sequences;}message FontIndex{uint schemaVersion=1;IndexFontFile[]files=2;IndexRenames renames=3;IndexEmojis emojis=4;}message SlideThemeData{ThemeID themeID=1;string version=2;}"},660986:(e,r,n)=>{"use strict";n.d(r,{Ys:()=>i,is:()=>a});let i="team_tile--joinSpinner--8Fauy",a="team_tile--favoriteStarContainer--zyaoM button_styles--button--h219I"},40848:(e,r,n)=>{"use strict";n.d(r,{CZ:()=>c,Qp:()=>l,RF:()=>a,RL:()=>m,hv:()=>i,kz:()=>h,nv:()=>p,qE:()=>d,qS:()=>u,uj:()=>o,yu:()=>s});let i="base_badge--backgroundLight--agxeS",a="base_badge--backgroundWarning--i7d2I",o="base_badge--backgroundWhite--ZqZgN",s="base_badge--borderStrong--makDy",l="base_badge--height24--PMSUp text--fontPos11--2LvXf text--_fontBase--QdLsd",c="base_badge--heightSixteen--BEJT8 text--fontPos9--naThA text--_fontBase--QdLsd",d="base_badge--badgeIconContainer--Gu5zx",u="base_badge--badge--cbfYy base_badge--backgroundLight--agxeS",p="base_badge--badgeContentContainerWithIcon--ECslI",m="base_badge--badgeTooltip--Qz3RM",h="base_badge--tooltipLink--KpcPS"},637961:(e,r,n)=>{"use strict";n.d(r,{$c:()=>m,Au:()=>I,BN:()=>l,BQ:()=>o,DD:()=>f,JE:()=>O,JM:()=>s,Jm:()=>A,QW:()=>v,Sl:()=>i,UN:()=>h,XO:()=>d,Xi:()=>N,Xq:()=>S,ZW:()=>u,_j:()=>_,aK:()=>T,cy:()=>E,em:()=>y,nJ:()=>c,o1:()=>b,rh:()=>w,rn:()=>g,u1:()=>C,uh:()=>L,wr:()=>a,zA:()=>p});let i="feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",a="feed_page--prototypeIcon--JlZyq",o="feed_page--tileUpperLeftWrapper--mwqC-",s="feed_page--tileEditorIcon--ymAxC",l="feed_page--resourcePreview--IePch",c="feed_page--redesignedResourcePreview--MjW2w",d="feed_page--resourcePreviewContentWrapper--H1eHK",u="feed_page--resourcePreviewContentWrapperFigJamDots---54d- feed_page--resourcePreviewContentWrapper--H1eHK",p="feed_page--resourcePreviewContentWrapperThumbnailSet--QlsAU feed_page--resourcePreviewContentWrapper--H1eHK",m="feed_page--resourcePreviewContentWrapperRadiusCursorOverride--kfxmj",h="feed_page--resourceMeta--7vtas text--fontPos13--xW8hS text--_fontBase--QdLsd",_="feed_page--redesignedResourceMeta--WUKzv text--fontPos13--xW8hS text--_fontBase--QdLsd",g="feed_page--titleAndAuthor--P2cvB text--fontPos13--xW8hS text--_fontBase--QdLsd",f="feed_page--title--qJMsk",E="feed_page--author--pH7Iw text--fontPos11--2LvXf text--_fontBase--QdLsd",y="feed_page--resourceAvatar--Nwl7h",b="feed_page--actions--UXu0g",I="feed_page--actionNoHover--QdLcL",T="feed_page--action__default_like--xlPBc feed_page--actionNoHover--QdLcL",v="feed_page--action__liked--8ZiFG feed_page--actionNoHover--QdLcL",S="feed_page--resourceMetaAuthor--3wNr7",w="feed_page--redesignedResourceMetaAuthor--43-kr text--fontPos11--2LvXf text--_fontBase--QdLsd",A="feed_page--redesignedAuthor--tKu73 text--fontPos11--2LvXf text--_fontBase--QdLsd",N="feed_page--redesignedAuthorHoverDropdown--4DftQ dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd",C="feed_page--spinner--Z0jz3",O="feed_page--metaInRedesignedTile--oALVP",L="feed_page--metaInRedesignedPluginRow--Jx-Af"},250769:(e,r,n)=>{"use strict";n.d(r,{avatar:()=>u,genericSelectorExternalTeamsIcon:()=>c,genericSelectorInner:()=>s,genericSelectorModal:()=>o,genericSelectorModalCancel:()=>l,modal:()=>i,modalBackdrop:()=>a,workspaceSelectorModal:()=>p,workspaceSelectorModalInner:()=>m,workspaceTitleWrapper:()=>d});let i="index--modal--vmXNN",a="index--modalBackdrop--VqLCO",o="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",s="index--genericSelectorInner--HBJH2",l="index--genericSelectorModalCancel--WOjxG",c="index--genericSelectorExternalTeamsIcon--KL8jt",d="index--workspaceTitleWrapper--e9YT2",u="index--avatar--nIkKj",p="index--workspaceSelectorModal--KqRLO index--modalBackdrop--VqLCO",m="index--workspaceSelectorModalInner--6wXm6 index--genericSelectorInner--HBJH2"},302510:(e,r,n)=>{},936986:(e,r,n)=>{"use strict";n.d(r,{$J:()=>m,Az:()=>d,Hx:()=>a,Pl:()=>f,Wy:()=>i,Yg:()=>s,_D:()=>h,au:()=>_,bO:()=>g,ce:()=>l,fe:()=>p,ik:()=>o,oK:()=>c,y3:()=>u});let i="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",a="dragging_resource--resizingDraggingLibraryItem--h5-J0 dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",o="dragging_resource--draggingFragment--ckSxw dragging_resource--_draggingResource--RyWym",s="dragging_resource--isDraggingOverCanvas--PgYby",l="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",c="dragging_resource--isDraggingFragmentOverCanvas--JzTDI dragging_resource--isDraggingOverCanvas--PgYby",d="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",m="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",h="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",_="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",g="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",f="dragging_resource--expandAnimation--4FamY"},478398:(e,r,n)=>{},159256:(e,r,n)=>{"use strict";n.d(r,{$M:()=>a,Bi:()=>I,Fb:()=>h,Fl:()=>c,J7:()=>S,JQ:()=>P,KR:()=>l,Kb:()=>f,MP:()=>A,Nv:()=>C,Q3:()=>D,RR:()=>p,Sp:()=>N,Tz:()=>u,Vl:()=>s,cO:()=>o,cf:()=>x,cu:()=>g,dL:()=>b,g:()=>L,gW:()=>U,gf:()=>k,h1:()=>V,hI:()=>M,i2:()=>R,ii:()=>i,iz:()=>d,kU:()=>v,o6:()=>y,pB:()=>T,vG:()=>E,wH:()=>B,wp:()=>m,xB:()=>F,xc:()=>_,xm:()=>O,yZ:()=>w});let i="community_cards--cardLayoutContainer--nPcgb",a="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",s="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",l="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRow_MetadataContainer--QLUfh",d="community_cards--cardBottomRow_Metadata_HoverText--McZzP",u="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",p="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",m="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",_="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",g="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",E="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",y="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",b="community_cards--cardBottomRow_ResourceActionButton--v146M",I="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",T="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",v="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--publisherDropdown--m7Bx2",A="community_cards--publisherDropdownContent_Row--iIBB3",N="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",C="community_cards--creatorPreviewDummySpace_Name--fb75z",O="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",L="community_cards--figjamTileMeta--Sh90c",R="community_cards--figjamTextMetadataCaret--bqK8s",P="community_cards--figjamMetadataContainer--4kXQt",D="community_cards--defaultCursor--K5TUO",k="community_cards--figjamTextMetadataContainer--LBupv",M="community_cards--figjamTextMetadataContainerFull--VPsvv",F="community_cards--figjamTextMetadataLockIcon--yazii",x="community_cards--figjamTextMetadataErrorContainer--XDHyT",U="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",B="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},227565:(e,r,n)=>{"use strict";n.d(r,{GC:()=>u,PJ:()=>d,Rt:()=>I,SL:()=>g,Tm:()=>E,Uz:()=>_,Vg:()=>s,Yk:()=>m,ZF:()=>f,aq:()=>l,bx:()=>h,g4:()=>i,g8:()=>a,i3:()=>y,jG:()=>p,qc:()=>b,qr:()=>c,vu:()=>o});let i="universal_posting_modal--loadingContainer--5giX-",a="universal_posting_modal--modalClose--eqgHH",o="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",l="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",c="universal_posting_modal--footer--A-QeR",d="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",u="universal_posting_modal--buttonGroup--C-atN",p="universal_posting_modal--scrollContainer--YtNZ-",m="universal_posting_modal--workspaceBarContainer--VHcn1",h="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",_="universal_posting_modal--desktopMessageTitle--3XDQ-",g="universal_posting_modal--desktopMessageSubTitle--UGHlr",f="universal_posting_modal--searchQuery--07ulH",E="universal_posting_modal--universalPostingSearchContainer--BFSZI",y="universal_posting_modal--xIcon--9icra",b="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",I="universal_posting_modal--searchInput--fTx57 search--communityLandingSearchInput--Mtiu3 search--searchInput__OLD--m2Hef text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos14--OL9Hp text--_fontBase--QdLsd"},764643:(e,r,n)=>{"use strict";n.r(r),n.d(r,{_thumbnailBase:()=>f,buttons:()=>l,contextMenu:()=>T,fieldContainer:()=>o,fieldContainerFaded:()=>s,gridContainer:()=>h,label:()=>i,learnMore:()=>a,listContainer:()=>m,listItemContainer:()=>_,listItemRemoveButton:()=>g,offlineIcon:()=>P,outerContainer:()=>c,outerContainerBorderBottom:()=>d,publishCTA:()=>A,scrollContainer_grid:()=>p,scrollContainer_list:()=>u,skeletonText:()=>R,skeletonThumbnailGrid:()=>L,skeletonThumbnailList:()=>O,thumbnailGrid:()=>y,thumbnailGridBase:()=>E,thumbnailList:()=>I,thumbnailListBase:()=>b,tryAgain:()=>D,trying:()=>k,warning:()=>v,warningIcon:()=>N,warningIconList:()=>C,warningOfflineContainer:()=>S,warningPublish:()=>w});let i="preferred_values_instance_picker--label--to5M3",a="preferred_values_instance_picker--learnMore--zD-c7",o="preferred_values_instance_picker--fieldContainer--JJx3j",s="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",c="preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",u="preferred_values_instance_picker--scrollContainer_list--kaH92",p="preferred_values_instance_picker--scrollContainer_grid--8kvKL",m="preferred_values_instance_picker--listContainer--BPie-",h="preferred_values_instance_picker--gridContainer--2LTF6",_="preferred_values_instance_picker--listItemContainer--a4t-g",g="preferred_values_instance_picker--listItemRemoveButton--HO05L",f="preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",y="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",b="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",I="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",T="preferred_values_instance_picker--contextMenu--qSN6X",v="preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--warningOfflineContainer--9BcdC",w="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",A="preferred_values_instance_picker--publishCTA--FlNCB",N="preferred_values_instance_picker--warningIcon--2TXXz",C="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",O="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",L="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",R="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",D="preferred_values_instance_picker--tryAgain--UNg1i",k="preferred_values_instance_picker--trying--HmoFd"},503002:(e,r,n)=>{"use strict";n.d(r,{Dt:()=>a,Zh:()=>i,c6:()=>o,e:()=>s});let i="prop_assignment_row--bindingIcon--EAEMs",a="prop_assignment_row--selectedIcon--8fypm",o="prop_assignment_row--ui3ShowOnRowHover---TwLe",s="prop_assignment_row--ui3SelectedIcon--Opfq2"},381011:(e,r,n)=>{"use strict";n.d(r,{NJ:()=>l,QK:()=>u,UV:()=>a,Ww:()=>d,_o:()=>i,dc:()=>m,kL:()=>s,mh:()=>o,r9:()=>p,xn:()=>c});let i="scrubbable_control--scrubCursorSvg--pav0z",a="scrubbable_control--containerInLiveScrub--P5bqH",o="scrubbable_control--scrubbingDisabled--TDxTX",s="scrubbable_control--container--Y1X4e",l="scrubbable_control--noScrubCursor--xmhcD",c="scrubbable_control--containerBordered--Pq8Lq raw_components--borderFocusWithin--BaipZ scrubbable_control--container--Y1X4e",d="scrubbable_control--inputNarrow--BHcl-",u="scrubbable_control--inactiveLabel--qI8ZV",p="scrubbable_control--disabled--vp-59",m="scrubbable_control--disableHoverBorder--y5AhV"},248480:(e,r,n)=>{"use strict";n.d(r,{kL:()=>i});let i="footer_banner--container--HxFNE"},420711:(e,r,n)=>{"use strict";n.d(r,{B8:()=>c,BN:()=>s,Hi:()=>i,_K:()=>a,rH:()=>d,u$:()=>o,uu:()=>l});let i="fullscreen_accessibility_tree--debugModeNode--aGne7",a="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",o="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",l="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--node--WGNTu"},724258:(e,r,n)=>{"use strict";n.d(r,{Kt:()=>l,LE:()=>o,NV:()=>s,Qq:()=>c,l8:()=>a,zc:()=>i});let i="action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",a="action_option--checkMarkContainer--hq6Bt action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",o="action_option--shortcut--w0R75",s="action_option--optionContainer--ru4UN",l="action_option--optionContainerLimitWidth--aaElZ",c="action_option--text--fSMIm"},963380:(e,r,n)=>{"use strict";n.d(r,{Kn:()=>l,P3:()=>p,VO:()=>s,Xu:()=>d,hr:()=>c,i3:()=>m,ig:()=>a,kG:()=>u,q_:()=>o,vi:()=>i});let i="attachment--thumbnailButton--CfAkK",a="attachment--selectedThumbnailButton--x2RnD attachment--thumbnailButton--CfAkK",o="attachment--thumbnailImage--Jx4fa",s="attachment--lightOverlay--F8qzZ attachment--overlay--dIw1C",l="attachment--publishedThumbnailContainer--oFj0f",c="attachment--pendingThumbnailContainer--iL-xu",d="attachment--darkOverlay--l3K9x attachment--overlay--dIw1C",u="attachment--composerContainer--mP7Kx",p="attachment--deleteBadge--9aSjm",m="attachment--xIcon--hhlua"},757207:(e,r,n)=>{"use strict";n.d(r,{$S:()=>c,Du:()=>S,F7:()=>o,GI:()=>b,In:()=>v,KK:()=>O,Lo:()=>_,MJ:()=>g,OM:()=>h,Qq:()=>A,SD:()=>P,UR:()=>s,VM:()=>l,WJ:()=>L,WO:()=>w,YD:()=>N,aW:()=>R,eX:()=>a,ex:()=>C,g2:()=>I,k8:()=>f,lo:()=>E,wC:()=>p,wG:()=>d,wb:()=>u,xH:()=>y,xS:()=>i,xe:()=>m,zl:()=>T});let i="thread_comment--threadHeaderLeft--gppoV thread_comment--_threadHeader--59aR8",a="thread_comment--threadHeaderRight--1gMsu thread_comment--_threadHeader--59aR8",o="thread_comment--threadHeaderContainer--0TaTS",s="thread_comment--threadHeaderButton--psBeY",l="thread_comment--threadHeaderButtonInactive--LhTNi",c="thread_comment--addReactionButton--n1Dj5",d="thread_comment--loader--GUeJt",u="thread_comment--threadContainer--oH8Ia",p="thread_comment--threadContainerCommunityDetailsPage--W6Cmv thread_comment--threadContainer--oH8Ia",m="thread_comment--threadContainerAnimated--OT8HU thread_comment--threadContainer--oH8Ia",h="thread_comment--threadContainerInner--Bzqm7",_="thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",g="thread_comment--threadElementReplyContainer--6vz0m thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",f="thread_comment--threadSubelementNoMargin--aGW6z",E="thread_comment--indentedQuickReplyThreadSubelement--PR9a5 thread_comment--threadSubelementNoMargin--aGW6z",y="thread_comment--quickReplyThreadSubelementNoMargin--MD3aF thread_comment--threadSubelementNoMargin--aGW6z",b="thread_comment--indentedThreadSubelement--gs1fI thread_comment--threadSubelement--7-le3 thread_comment--threadSubelementNoMargin--aGW6z",I="thread_comment--rightJustified--lK8hG",T="thread_comment--leftJustified--HHuN0",v="thread_comment--quickReplyThreadElement--cZUZj thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",S="thread_comment--authorAvatar--xOCLt",w="thread_comment--authorHandle--fmYkb thread_comment--headerLabel--Oq7ar",A="thread_comment--text--FHTSU",N="thread_comment--grayLabel--6ZZkD thread_comment--headerLabel--Oq7ar",C="thread_comment--iconButtonSpace--VkGFf",O="thread_comment--attachmentsContainer--lOeTy",L="thread_comment--reactionsContainer--n2YcQ",R="thread_comment--resolvedIcon--YSM3V",P="thread_comment--loadingAvatar--82RED comment_cluster_elements--loadingSpinner--6derj"},386362:(e,r,n)=>{"use strict";n.d(r,{Gm:()=>f,MP:()=>h,OX:()=>l,Sg:()=>o,U0:()=>a,bQ:()=>g,fP:()=>i,i8:()=>_,iQ:()=>u,mr:()=>s,o1:()=>E,oD:()=>d,q9:()=>m,uX:()=>p,xu:()=>c});let i="thread_comment_composer--inputSectionWrapper--Bxyab",a="thread_comment_composer--newComment--eYLj7",o="thread_comment_composer--composerEmpty--VgMY7",s="thread_comment_composer--highlighted--GPAOe",l="thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",c="thread_comment_composer--leftComposerButtonGroup--6jQ3I",d="thread_comment_composer--submitUpArrowIcon--e8uT9",u="thread_comment_composer--submitUpArrowIconDisabled--iPBY3 thread_comment_composer--submitUpArrowIcon--e8uT9",p="thread_comment_composer--textButton--GUo5c",m="thread_comment_composer--editSubmitButtons--GyqGL",h="thread_comment_composer--replyComposerContainer---8DSl",_="thread_comment_composer--replyAuthorElement--qze1r",g="thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab",f="thread_comment_composer--errorFallbackNewComment--xlyNp thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab thread_comment_composer--newComment--eYLj7",E="thread_comment_composer--actions--7LRnN"},799088:(e,r,n)=>{},425542:(e,r,n)=>{"use strict";n.d(r,{sx:()=>i});let i="fullscreen_view--fontsIcon--a4W8y"},613122:(e,r,n)=>{"use strict";n.d(r,{GM:()=>i});let i="keyboard_shortcut_panel--spacerTab--yNO02"},659265:(e,r,n)=>{"use strict";n.d(r,{QT:()=>i});let i="component_sidebar_asset_tile--focusableElementWrapper---mXHu"},292072:(e,r,n)=>{},950220:(e,r,n)=>{"use strict";n.d(r,{g_:()=>a,j3:()=>i});let i="inset 0px 0px 0px 0.5px var(--color-border)",a="5px"},246497:(e,r,n)=>{},217130:(e,r,n)=>{"use strict";n.d(r,{Bj:()=>g,DE:()=>f,Dy:()=>i,Lo:()=>u,S8:()=>l,VW:()=>s,bu:()=>h,hD:()=>E,iU:()=>d,iY:()=>m,or:()=>a,p:()=>_,u0:()=>o,vD:()=>p,z8:()=>c});let i="multiplayer_cursors--cursor--n8aPY",a="multiplayer_cursors--cursorPointer--ya3cR",o="multiplayer_cursors--cursorImage--hYFE4",s="multiplayer_cursors--nameContainer--O1WsV",l="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",c="multiplayer_cursors--isPointingRight--eOPEm",d="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--messageText--jI1cQ",p="multiplayer_cursors--topMessageLine--uwXou",m="multiplayer_cursors--cursorName--i776D",h="multiplayer_cursors--cursorNameSmall--Cy-9n",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",g="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",f="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",E="multiplayer_cursors--chatBackground--hGJJf"},531930:(e,r,n)=>{"use strict";n.d(r,{E7:()=>u,EA:()=>c,EU:()=>d,P0:()=>l,TK:()=>o,V3:()=>i,W5:()=>a,aN:()=>s});let i="object_row--layerIcon--dTOdu",a="object_row--customLayerIcon--SlCXj object_row--layerIcon--dTOdu",o="object_row--customMenuLayerIcon--JK53S object_row--layerIcon--dTOdu",s="object_row--customComponentMenuLayerIcon--SWH-7 object_row--layerIcon--dTOdu",l="object_row--iconWrapper--ivRSW",c="object_row--stickyIconWrapper--UycmN",d="object_row--stickyIconWrapperOutOfView--riwK8",u="object_row--iconOverlay--gPp-S"},354894:(e,r,n)=>{},688553:(e,r,n)=>{"use strict";n.d(r,{X3:()=>i,e3:()=>l,f$:()=>a,lo:()=>s,x7:()=>o});let i="chit--chitThumbnail--KxCGp",a="chit--chitAlpha--Mn-aK",o="chit--chit--WdWdx",s="chit--chitBorder--ydYLm",l="chit--chitShowFocus--M0ub5 chit--chit--WdWdx"},82131:(e,r,n)=>{"use strict";n.d(r,{DV:()=>m,Dn:()=>u,FL:()=>E,KQ:()=>_,MC:()=>b,N4:()=>p,Om:()=>f,PD:()=>o,VM:()=>I,Y7:()=>h,cL:()=>d,ed:()=>a,gn:()=>s,lN:()=>g,lS:()=>c,l_:()=>T,lo:()=>l,v9:()=>i,yr:()=>y});let i="collapsible_property_panel--showOnTitleHover--yqPoD",a="collapsible_property_panel--panelTitleRowOuter--i5K0R",o="collapsible_property_panel--emptyPanelTitleRowOuter---pBf9 collapsible_property_panel--panelTitleRowOuter--i5K0R",s="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",l="collapsible_property_panel--ui3RowSelected--FZgmc",c="collapsible_property_panel--ui3RowButtons--xHUX3",d="collapsible_property_panel--styleTitle--a7BMw",u="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",p="collapsible_property_panel--titleButton--7yILK",m="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",h="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",_="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",g="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",f="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",E="collapsible_property_panel--panelMixedMessage--UuCKj",y="collapsible_property_panel--panelTitleText--vFGYT",b="collapsible_property_panel--titleButtons--k6Lxk",I="collapsible_property_panel--dropdownOption--cy1JZ",T="collapsible_property_panel--updateIcon--0YXMO"},334495:(e,r,n)=>{"use strict";n.d(r,{Lt:()=>c,Qz:()=>o,Wv:()=>i,be:()=>d,d_:()=>m,f0:()=>p,hF:()=>u,hL:()=>h,in:()=>a,kL:()=>s,t_:()=>l});let i="combo_box--selectInputExpanded--SgrsN select--selectInputExpanded--Lz6m4",a="combo_box--focused--vZXh1 select--selectInputFocused--c-NQ7",o="combo_box--containerDisabled--bNA2c combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t",s="combo_box--container--Vml-n combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t select--comboBoxShowChevronOnHover--rVuud",l="combo_box--selectDisabled--yJxRy combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",c="combo_box--select--JMl-q select--comboBoxSelect--T-iQ- select--_comboBoxSelect--zpLTH combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",d="combo_box--selectInput--fikB4 raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="combo_box--input--CW6xE raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",p="combo_box--scrubbableControl--t9lCI raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t combo_box--_scrubbableControlBase--jZV-D",m="combo_box--withSvg--BjUJI",h="combo_box--noBorderOnFocus--7Ago-"},371875:(e,r,n)=>{"use strict";n.d(r,{TQ:()=>i});let i="containing_assets_panel--componentName--Lwkmx"},647215:(e,r,n)=>{"use strict";n.d(r,{Rh:()=>o,Tw:()=>i,iw:()=>a});let i="prototype_video_playback_panel--videoErrorPanelFooter--cdsDJ",a="prototype_video_playback_panel--ui3VideoErrorText--l6t6c",o="prototype_video_playback_panel--ui3VideoErrorLink--y1RWa"},333483:(e,r,n)=>{"use strict";n.d(r,{Ah:()=>E,Bg:()=>T,CZ:()=>C,DS:()=>k,Dn:()=>O,EA:()=>d,LE:()=>w,LJ:()=>u,No:()=>f,O1:()=>h,PB:()=>b,PQ:()=>i,Pf:()=>s,Tz:()=>D,U:()=>g,X0:()=>S,Z4:()=>m,Zz:()=>N,_Z:()=>c,a2:()=>I,ai:()=>_,bW:()=>R,ht:()=>A,iY:()=>P,kR:()=>a,l$:()=>v,pc:()=>p,pq:()=>o,sI:()=>L,vR:()=>y,wh:()=>l});let i="raw_components--border--SKh2u",a="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",o="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",s="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",c="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",d="raw_components--textInputSoftDisabled--M5O7I",u="raw_components--noPlaceholderLine--KBoD7",p="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",m="raw_components--noLeftBorder--QE-ZB",h="raw_components--squareRightBorder--ktojw",_="raw_components--chevron--nJiSt",g="raw_components--wide--F33jp",f="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",E="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",y="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",b="raw_components--outlineButton--FyUoF",I="raw_components--modalPanel--wmDfl",T="raw_components--propertiesPanelErrorBox--N2p6o",v="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",S="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",w="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",A="raw_components--row125--J20Ob raw_components--_rowHeight125--G2mEi raw_components--_row--rHucX",N="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",C="raw_components--rowSelected--M2Eip",O="raw_components--panelTitle--VAQQA",L="raw_components--panelTitleWithoutChevron--qIjza",R="raw_components--collapsiblePanelTitle--PXa3p",P="raw_components--panelTitleExtended--GoX-m raw_components--panelTitle--VAQQA",D="raw_components--panelTitleFaded--cUUkM raw_components--panelTitle--VAQQA",k="raw_components--panelIconContainer--V9E3Z"},344525:(e,r,n)=>{"use strict";n.d(r,{AN:()=>_,BB:()=>u,BI:()=>S,CU:()=>C,Df:()=>B,H9:()=>U,HT:()=>f,IK:()=>g,IZ:()=>w,JB:()=>D,O:()=>F,Om:()=>k,P2:()=>E,QF:()=>I,Qc:()=>p,Qw:()=>h,UY:()=>o,Vb:()=>m,Wm:()=>b,ZM:()=>R,ai:()=>d,fE:()=>O,hF:()=>s,hH:()=>a,kL:()=>i,l8:()=>A,nJ:()=>N,pR:()=>l,re:()=>L,sS:()=>M,tN:()=>c,uK:()=>T,w$:()=>x,x1:()=>y,x7:()=>V,yF:()=>v,z6:()=>P});let i="select--container--UJhOt raw_components--singleRowHeight--dKM4t",a="select--hiddenInput--3smCs raw_components--selectHiddenInput--bJ8vl",o="select--safariVoiceover--meUJ0",s="select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",l="select--inputDisabled--08EdX select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",c="select--inputTextWrapper--kEwIr",d="select--chevron--KfTY2",u="select--inputWithSvg--t6hLE",p="select--inputAlignRight--5HWz5",m="select--inputSvg--Sqy6u",h="select--backgroundOnHover--5kQnp",_="select--inputText--I3JIv select--inputTextWrapper--kEwIr",g="select--inputTextTruncated--j6p-H ellipsis--ellipsis--Tjyfa",f="select--inputTextFill--H3tO-",E="select--dropdownContainer--0zweb _overlayBase--_overlayBase--Rkj8l",y="select--dropdownScrollClip--5ft6D",b="select--dropdown--8DAM-",I="select--dropdownContentWrapper--yDAla",T="select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",v="select--divider--HfbAX",S="select--optionFocused--8DSsx select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",w="select--optionDisabled--fEanh select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",A="select--optionHeader--34zhZ select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",N="select--optionTruncatedText--QqUBO",C="select--optionTextRemoveRightPadding--ULI6k",O="select--optionFullWidth--sW3Zl",L="select--optionText--D3BVM select--optionTruncatedText--QqUBO ellipsis--ellipsis--Tjyfa",R="select--rightLabel--I-ojL",P="select--check--xQ8c3",D="select--rightCheck--UdnTu",k="select--rightCheckText--vWTPu",M="select--topScrollIndicator--nys8N select--scrollIndicator--U0Wy-",F="select--bottomScrollIndicator--C7EE7 select--scrollIndicator--U0Wy-",x="select--scrollIndicatorChevron--9-te-",U="select--optionIcon--yngNx",B="select--iconToReplaceCheck--MMwXJ",V="select--chit--WI9C6"},769502:(e,r,n)=>{"use strict";n.d(r,{Kk:()=>s,be:()=>i,j1:()=>o,kk:()=>a});let i="stack_panel_v4--selectInput--DdAPZ",a="stack_panel_v4--comboBoxInput--ewblc dimension_input--comboBoxInput--J0jWQ",o="stack_panel_v4--comboBoxPillsContainer--BiDzq dimension_input--comboBoxPillsContainer--Uv3fj",s="stack_panel_v4--icon--PJRhG"},975687:(e,r,n)=>{"use strict";n.d(r,{Ev:()=>d,Ii:()=>s,Qb:()=>c,Vf:()=>i,Z7:()=>l,jO:()=>a,lG:()=>o,t:()=>u});let i="states_panel--errorStateWithCloseButtonBox--jayB0 states_panel--errorStateBoxBase--NGwjK",a="states_panel--errorStateBoxFlush--LYAGK states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",o="states_panel--errorStateBoxRegular--nhPoJ states_panel--errorStateBox--AYnRU states_panel--errorStateBoxBase--NGwjK",s="states_panel--errorStateBoxHeader--zgSnc",l="states_panel--errorStateBoxTitle--pZ8tj",c="states_panel--errorStateBoxTitleText--VY8En",d="states_panel--errorStateBoxWarningIcon--5BPCj",u="states_panel--ui3ErrorStateBoxContent--07s-y"},614851:(e,r,n)=>{},761725:(e,r,n)=>{"use strict";n.d(r,{Od:()=>c,Pf:()=>l,Pv:()=>s,RF:()=>i,Y7:()=>u,by:()=>m,hF:()=>d,ig:()=>p,kb:()=>a,pG:()=>o});let i="ui3_modal_rows--ui3TwoColumnModalRow--ktXqt ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",a="ui3_modal_rows--left--5-4DR",o="ui3_modal_rows--right--TTLb7",s="ui3_modal_rows--ui3OneColumnModalRow--wLU6K ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l="ui3_modal_rows--label--vQA2E",c="ui3_modal_rows--ui3LabelOneInputRow--kpsQB ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",d="ui3_modal_rows--input--WH2lM",u="ui3_modal_rows--ui3LabelTwoInputRow---zU18 ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",p="ui3_modal_rows--leftInput--pkjk8",m="ui3_modal_rows--rightInput--mOj6z"},28177:(e,r,n)=>{"use strict";n.d(r,{nW:()=>i,zF:()=>a});let i="plugin_parameter_entry--pillIcon--y5eMK",a="plugin_parameter_entry--pluginLabelIcon--ct5AV plugin_parameter_entry--pillIcon--y5eMK"},458516:(e,r,n)=>{"use strict";n.d(r,{Tk:()=>i,ZR:()=>a});let i="quick_actions--noresult--qrETa quick_actions--centerItemsVertically--4COtP",a="quick_actions--pluginIcon--d9b13"},356235:(e,r,n)=>{"use strict";n.d(r,{kv:()=>a,wn:()=>i});let i="quick_actions--resultDisabled--tjdlc",a="quick_actions--checkbox--jhzha"},63932:(e,r,n)=>{"use strict";n.d(r,{Fq:()=>d,Jg:()=>l,bk:()=>c,i9:()=>o,oB:()=>s,og:()=>u,tA:()=>i,wH:()=>a});let i="theme_editor--fontIconButton--Vc-KE theme_editor--iconButton--SYPlk theme_editor--baseIconButton--15rMM",a="theme_editor--selected--2BGbx",o="theme_editor--svgText--yyKtR",s="theme_editor--colorSelect--wIbMH",l="theme_editor--precedence--lvYGC",c="theme_editor--pickerUnderlay--gfCHS",d="theme_editor--pickerOverlay--Ykwy9",u="theme_editor--pickerWrapper--fs-6V"},610544:(e,r,n)=>{"use strict";n.d(r,{Dn:()=>I,FE:()=>N,FH:()=>g,Jk:()=>p,LY:()=>b,QO:()=>S,S0:()=>_,Sn:()=>A,WB:()=>f,Xf:()=>a,Y7:()=>d,cm:()=>m,hF:()=>s,i5:()=>h,l4:()=>o,mu:()=>y,om:()=>c,r2:()=>v,r4:()=>T,sH:()=>i,sy:()=>w,vu:()=>C,wR:()=>l,wg:()=>u,zj:()=>E});let i="zoom_menu--zoomMenuBase--Uy7YH",a="zoom_menu--zoomMenu--3OqMw",o="zoom_menu--fullHeightSidebarZoomMenu--ElxlP",s="zoom_menu--input---hdA- input--darkInput--zfbnG",l="zoom_menu--zoomMenuContainer--DJXOL",c="zoom_menu--zoomMenuContainerActive--E7m0j",d="zoom_menu--fullHeightSidebarZoomMenuContainer--So738",u="zoom_menu--fullHeightSidebarZoomMenuContainerActive--jPaQb zoom_menu--fullHeightSidebarZoomMenuContainer--So738",p="zoom_menu--fullHeightSidebarZoomMenuContainerCollapsed--FpFJm zoom_menu--fullHeightSidebarZoomMenuContainer--So738",m="zoom_menu--zoomAmount--Qb6gL",h="zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",_="zoom_menu--fullHeightSidebarZoomAmountActive--EKFn- zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",g="zoom_menu--chevronContainer---jqeH",f="zoom_menu--fullHeightSidebarChevronActive--s0s-C",E="zoom_menu--zoomInputContainer---Xqu1",y="zoom_menu--zoomControls--kNX-s",b="zoom_menu--middleZoomButton--17GYR",I="zoom_menu--zoomMiddleChevronContainer--XxlkP",T="zoom_menu--zoomMiddleChevronContainerActive--dN2OQ zoom_menu--zoomMiddleChevronContainer--XxlkP",v="zoom_menu--zoomMiddleChevronSVGContainer--6TlCz",S="zoom_menu--zoomMinus--wljce",w="zoom_menu--zoomPlus--B-iye",A="zoom_menu--enabled--JWySc",N="zoom_menu--feedZoomPan--AxC05",C="zoom_menu--active--WlOsd"},565727:(e,r,n)=>{"use strict";n.d(r,{Bx:()=>c,Gq:()=>s,Hw:()=>l,Io:()=>a,Nt:()=>d,Qq:()=>o,_C:()=>u,zr:()=>i});let i="variable_pill--root--0ibUT",a="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",o="variable_pill--text--Fm5k5",s="variable_pill--invalid--dxyCJ",l="variable_pill--nameAndIcons--Cyvcc",c="variable_pill--deletedIcon--QaRlG",d="variable_pill--inferredIcon--eLJef",u="variable_pill--isHovered--qumV3"},107047:(e,r,n)=>{"use strict";n.d(r,{Er:()=>l,Fi:()=>m,JJ:()=>a,N:()=>p,Q_:()=>d,RH:()=>o,Uq:()=>c,eK:()=>u,pv:()=>i,xH:()=>s});let i="variable_pill_base--pillBase--HIf9B",a="variable_pill_base--pillHasIcon--qR8Mw",o="variable_pill_base--pillSelected--WuPhz",s="variable_pill_base--pillDefault--5YSwx",l="variable_pill_base--pillDisableHover--A9znd",c="variable_pill_base--pillDefaultComponent--GMeSg",d="variable_pill_base--pillDisabled--Xci9C",u="variable_pill_base--pillDisabledTertiary--C2fJb",p="variable_pill_base--pillInSelection--HupPT",m="variable_pill_base--pillNarrow--Oai69"},194490:(e,r,n)=>{"use strict";n.d(r,{QW:()=>a,qS:()=>i});let i="go_to_stripe_button--badge--aJn3P text--fontPos12--YsUAh text--_fontBase--QdLsd",a="go_to_stripe_button--warningIcon--eeAU7"},52245:(e,r,n)=>{"use strict";n.d(r,{a0:()=>o,bV:()=>a,jy:()=>i});let i="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",a="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",o="browse_explore_list--categorySectionHeaderContainer--WiX1N"},301280:(e,r,n)=>{"use strict";n.d(r,{kV:()=>i});let i="dock--dockDesign--kbym5 dock--dock--A6jIs"},687348:(e,r,n)=>{},179494:(e,r,n)=>{"use strict";n.d(r,{$C:()=>h,B6:()=>g,BG:()=>N,Cq:()=>O,D1:()=>l,F$:()=>s,FV:()=>p,Gy:()=>A,JW:()=>R,MJ:()=>d,ML:()=>D,NH:()=>m,QF:()=>L,UK:()=>c,VJ:()=>b,Vx:()=>F,Xb:()=>i,Y2:()=>P,Y9:()=>k,YB:()=>x,ZK:()=>f,Zv:()=>C,_P:()=>a,c6:()=>o,ez:()=>U,k7:()=>B,kQ:()=>V,lI:()=>I,lO:()=>T,lP:()=>u,o2:()=>w,od:()=>E,ot:()=>M,sI:()=>S,vt:()=>_,y2:()=>y,zZ:()=>v});let i="resource_tiles--showOnHover--2v687",a="resource_tiles--figjamPluginRowIconHoverBg--0GjEb",o="resource_tiles--fauxFocused--Tk7MC",s="resource_tiles--optionsButtonActive--CnmDE resource_tiles--optionsButton--B7MN2",l="resource_tiles--optionsButtonShowOnHover--kJQHm resource_tiles--optionsButton--B7MN2 resource_tiles--showOnHover--2v687",c="resource_tiles--pluginTitleBadgeContainer--Q-9cz",d="resource_tiles--browsePluginTile--Dl1N0 resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",u="resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",p="resource_tiles--pluginTileMeta--xgpJR",m="resource_tiles--browsePluginTileDevModeWizard--ApW9E",h="resource_tiles--browsePluginTileSmall--t70Gg resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",_="resource_tiles--pluginTileIconLoading--mas66 resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",g="resource_tiles--pluginTileName--9Isog text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="resource_tiles--pluginTileSubheader--Fihho text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",E="resource_tiles--ctaButtonContainer--z2HxW",y="resource_tiles--priceBadgeContainer--6O7DF",b="resource_tiles--widgetMonetizationBadge--hXbF6",I="resource_tiles--ctaButton--qu-bG",T="resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",v="resource_tiles--buttonSubmenuChevron--af8r9",S="resource_tiles--buttonSubmenuChevronWhite--c7pTT resource_tiles--buttonSubmenuChevron--af8r9",w="resource_tiles--rowChevron--tIIjl",A="resource_tiles--widgetTileSmall--gtI7m resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos11--2LvXf text--_fontBase--QdLsd",N="resource_tiles--widgetTile--OjUTk resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos12--YsUAh text--_fontBase--QdLsd",C="resource_tiles--widgetTileIconSmall--Dox02 resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",O="resource_tiles--widgetTileIcon--hGlOB resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",L="resource_tiles--widgetTileMetadata--Ggrsh",R="resource_tiles--widgetTileNameContainer--HqAEf",P="resource_tiles--widgetTileName--hvW06 ellipsis--ellipsis--Tjyfa",D="resource_tiles--widgetTileSubheader--7-TT- ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",k="resource_tiles--paymentErrorIcon--w-8j9",M="resource_tiles--relativeContainer--7lvHF",F="resource_tiles--redDot---lNFV red_dot--baseRedDot--pgZV7",x="resource_tiles--saveButtonEditorSmall--Jt970 resource_tiles--_saveButton--mDwpY",U="resource_tiles--saveButtonVisible---tZad",B="resource_tiles--saveButtonEditorLarge--nKxZq resource_tiles--_saveButton--mDwpY",V="resource_tiles--svg16--B1UCN"},15344:(e,r,n)=>{"use strict";n.d(r,{CU:()=>i});let i="mfa_required--learnMoreLink--17Yuc"},983238:(e,r,n)=>{"use strict";n.d(r,{Ar:()=>S,B9:()=>d,FQ:()=>b,Hn:()=>A,IL:()=>s,Lq:()=>l,Ny:()=>v,OQ:()=>f,TI:()=>p,ZA:()=>g,ZO:()=>m,_S:()=>o,a5:()=>I,b:()=>a,dC:()=>_,gF:()=>w,gh:()=>E,jS:()=>h,nW:()=>T,oX:()=>y,uS:()=>u,w0:()=>c,wV:()=>i});let i="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",a="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",s="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",l="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",c="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--closeButtonWhite--nj2uk",p="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",m="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",h="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",_="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",g="pointer_modal--footerDiv--JtCDN",f="pointer_modal--ctaContainer--luZLz",E="pointer_modal--noMotion--YIicU",y="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",b="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",I="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",T="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",v="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",S="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",w="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",A="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},256320:(e,r,n)=>{"use strict";n.d(r,{Db:()=>h,Dg:()=>o,Kb:()=>b,MD:()=>d,Qs:()=>i,S:()=>l,SV:()=>y,Tw:()=>f,Yf:()=>g,iQ:()=>p,lI:()=>I,o:()=>u,oO:()=>m,qg:()=>E,qr:()=>s,v0:()=>c,xC:()=>a,yl:()=>_,zP:()=>T});let i="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",a="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",o="rcs_components--imgContainer--JofI3",s="rcs_components--footer--l5bb0",l="rcs_components--footerStepCounter--jKzRi",c="rcs_components--buttonRow--OfMRY",d="rcs_components--closeButtonDefault--q8cPK rcs_components--closeButtonBase--wooGI",u="rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",p="rcs_components--closeButtonMobileOnLight--jElEv rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",m="rcs_components--closeButtonOnDark--SRWWX rcs_components--closeButtonBase--wooGI",h="rcs_components--closeButtonHighContrast--Dlf2s rcs_components--closeButtonBase--wooGI",_="rcs_components--modal--sgfHP",g="rcs_components--mobileModal--yvxOb",f="rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",E="rcs_components--fullscreenBackground--tIex6",y="rcs_components--fullscreenWelcomeSequenceModal--cuKAh rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",b="rcs_components--modalAnimateIn--zcZjW",I="rcs_components--ctaButton--5FSzm",T="rcs_components--loadingSpinner--rOHo1"},972045:(e,r,n)=>{"use strict";n.d(r,{Hj:()=>i,pO:()=>a});let i="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",a="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz"},821150:(e,r,n)=>{"use strict";n.d(r,{$9:()=>i,Gv:()=>l,Lq:()=>p,Pj:()=>c,SI:()=>d,hj:()=>u,ig:()=>a,mj:()=>o,s1:()=>m,vL:()=>s});let i="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",a="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",o="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",s="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",l="styles_properties_form--stylePreview--tJF78",c="styles_properties_form--textStylePreview--Jp6WQ",d="styles_properties_form--textStylePreviewInverted--GeC3b",u="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",p="styles_properties_form--loading--0A0hy",m="styles_properties_form--isLoaded--2czdf"},692665:(e,r,n)=>{"use strict";n.d(r,{BA:()=>I,D:()=>T,E0:()=>f,I6:()=>O,KY:()=>i,NM:()=>l,SB:()=>p,SM:()=>S,T3:()=>h,TH:()=>d,U1:()=>_,UE:()=>o,Ym:()=>w,_Z:()=>a,cr:()=>u,eO:()=>g,hP:()=>A,jG:()=>s,jm:()=>N,ln:()=>m,nM:()=>E,p$:()=>v,ry:()=>C,sM:()=>y,uH:()=>b,wY:()=>c});let i="multi_select_list--actionBar--T9qpZ",a="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",o="multi_select_list--arrow--CW8ia",s="multi_select_list--scrollContainer--B-Dk-",l="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="multi_select_list--stickyHeader--FkV5r",h="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",_="multi_select_list--headerRow--22Lao",g="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",f="multi_select_list--checkboxColumn--SgkHV",E="multi_select_list--row--nfio-",y="multi_select_list--unselectedCheckbox--KAaaj",b="multi_select_list--rowWithRoundedBorder--im1TP",I="multi_select_list--notFirstRowInSelectedGroup--3m6oH",T="multi_select_list--notLastRowInSelectedGroup--N4myp",v="multi_select_list--emptyState--QQcOE",S="multi_select_list--batchActionCount--R41SC",w="multi_select_list--batchActionClear--7q1Vl",A="multi_select_list--actionButton--D2K4w",N="multi_select_list--longList--Oz-Pp",C="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV",O="multi_select_list--highlightedRow--W4ZZn"},594994:(e,r,n)=>{"use strict";n.d(r,{Jw:()=>s,Lm:()=>o,NQ:()=>f,Y1:()=>h,ai:()=>g,ef:()=>c,h3:()=>i,hq:()=>y,i1:()=>d,k_:()=>l,li:()=>m,q0:()=>a,um:()=>p,vL:()=>u,xW:()=>E,zP:()=>_});let i="desktop_tool_bar--toolBarSpacerContainer--rLTCP",a="desktop_tool_bar--toolBarSpacerContainerTabletOptimized--0Tv6Q desktop_tool_bar--toolBarSpacerContainer--rLTCP",o="desktop_tool_bar--toolBarContainer--1EjL8",s="desktop_tool_bar--pageViewToolBarContainer--iC3UY desktop_tool_bar--toolBarContainer--1EjL8",l="desktop_tool_bar--settingsModalToolbarStickyContainer--lE8qt",c="desktop_tool_bar--toolBarContainerFullWidth--GT5GG desktop_tool_bar--toolBarContainer--1EjL8",d="desktop_tool_bar--toolBarLeftSide--wJapT text--fontPos13--xW8hS text--_fontBase--QdLsd",u="desktop_tool_bar--toolBarCenter--orkTM",p="desktop_tool_bar--toolBarCenterFullWidth---a4El",m="desktop_tool_bar--toolBarRightSide--XfTEn",h="desktop_tool_bar--toolBarTabContent--a1orn ellipsis--ellipsis--Tjyfa",_="desktop_tool_bar--toolBarTabContentBase--CoAtY",g="desktop_tool_bar--chevron--zwxsY",f="desktop_tool_bar--adminSettingsToolBarTabContentBase--xaPNN",E="desktop_tool_bar--adminSettingsToolBarTabContentSelected--YOoLG",y="desktop_tool_bar--chevronSvgContainer--Fz1VL"},714786:(e,r,n)=>{"use strict";n.d(r,{AL:()=>I,BI:()=>m,Cu:()=>g,DL:()=>d,Fp:()=>i,G7:()=>_,Hl:()=>a,LH:()=>y,MO:()=>p,Nn:()=>T,VQ:()=>E,e6:()=>u,hv:()=>f,j7:()=>o,ko:()=>l,nP:()=>s,vO:()=>c,xn:()=>b,yH:()=>h});let i="voice_users--voiceParticipantAvatar--7mhMG",a="voice_users--overflowRow--dyDR2",o="voice_users--nameAndSuffixContainer--GGoKj",s="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",c="voice_users--flexRightContainer--Su6EL",d="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",u="voice_users--participantStatus--cnVtZ",p="voice_users--participantRow--D4Yar",m="voice_users--hoverable--tq5aE",h="voice_users--containsCursor--Wx6C4",_="voice_users--secondaryMenuIconButtonContainer--aAh8o",g="voice_users--currentUserHeaderRow--Jiv6z",f="voice_users--secondaryActionsMenuButton--2emFq",E="voice_users--secondaryActionsMenuButtonActive--QoLJK",y="voice_users--multiplayerUserView--7nAcD",b="voice_users--userSuffix--2OgbZ text--fontPos11--2LvXf text--_fontBase--QdLsd",I="voice_users--voiceUserHeadphonesIcon--wLuPW",T="voice_users--mutedContainer--JL7uZ"},236238:(e,r,n)=>{},427371:(e,r,n)=>{"use strict";n.d(r,{GE:()=>c,KQ:()=>s,QH:()=>o,Sw:()=>a,_J:()=>i,ky:()=>l,lx:()=>d});let i="loading_content--shimmerAnimation--qZjRw",a="loading_content--shimmerOnMenuAnimation--U9c8t loading_content--shimmerAnimation--qZjRw",o="loading_content--lightShimmerAnimation--Iz23-",s="loading_content--loadingText--MFUIw",l="loading_content--loadingTextOnMenu--WrELp loading_content--loadingText--MFUIw",c="loading_content--loadingImage--eB8Kt",d="loading_content--loadingPrimary--HsesM"},803258:(e,r,n)=>{"use strict";n.d(r,{A4:()=>A,CK:()=>p,Cu:()=>O,Dv:()=>g,FR:()=>i,RK:()=>S,SA:()=>v,SC:()=>h,Sl:()=>l,Tr:()=>I,VA:()=>_,Vj:()=>b,W0:()=>f,WM:()=>w,XK:()=>a,_O:()=>d,ag:()=>y,gO:()=>E,h5:()=>u,m2:()=>o,m4:()=>m,ol:()=>C,q6:()=>c,su:()=>N,vS:()=>T,yl:()=>s});let i="generic_tile_DEPRECATED--selectedContainer--ybkd4 generic_tile_DEPRECATED--container--XotGi",a="generic_tile_DEPRECATED--tileBorder---DBQk",o="generic_tile_DEPRECATED--subtitleWrapperInner--ncwf-",s="generic_tile_DEPRECATED--genericTile--6ezs8",l="generic_tile_DEPRECATED--image--ikVLI",c="generic_tile_DEPRECATED--bottomControls--Ro4JX",d="generic_tile_DEPRECATED--listView--5yggJ text--fontPos13--xW8hS text--_fontBase--QdLsd",u="generic_tile_DEPRECATED--listViewSlightlyLarger--QwvP6 generic_tile_DEPRECATED--listView--5yggJ text--fontPos13--xW8hS text--_fontBase--QdLsd",p="generic_tile_DEPRECATED--gridView--ICika",m="generic_tile_DEPRECATED--standaloneFileTile--lmMfZ generic_tile_DEPRECATED--container--XotGi",h="generic_tile_DEPRECATED--subtitleContainer--y18L5",_="generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",g="generic_tile_DEPRECATED--disabledSubtitle--yTOPL generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",f="generic_tile_DEPRECATED--settings--cInfj",E="generic_tile_DEPRECATED--ellipsis--jqPWA ellipsis--ellipsis--Tjyfa",y="generic_tile_DEPRECATED--subtitleMetadata--94sE7 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",b="generic_tile_DEPRECATED--modifiedMetadata--AphD2",I="generic_tile_DEPRECATED--genericTileRedesign--ySqO2",T="generic_tile_DEPRECATED--topLeftControls--hrfPC",v="generic_tile_DEPRECATED--topRightControls--bIPIz",S="generic_tile_DEPRECATED--visible--dakmY",w="generic_tile_DEPRECATED--facepile--MZY4B",A="generic_tile_DEPRECATED--control--xjbn-",N="generic_tile_DEPRECATED--branchIndicator--xy-8Y",C="generic_tile_DEPRECATED--viewOnlyLabel--4apxb",O="generic_tile_DEPRECATED--itemsViewTitle--Uxr-A"},163771:(e,r,n)=>{"use strict";n.d(r,{Pf:()=>o,bb:()=>a,zr:()=>i});let i="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",a="truncated_text--rootTruncateStart--aClXJ",o="truncated_text--directionFix--T1NOI"},394302:(e,r,n)=>{"use strict";n.d(r,{IN:()=>s,NY:()=>a,Ou:()=>o,hM:()=>c,k2:()=>i,yo:()=>l});let i="toolbelt_button--topLevelButton--12jLk",a="toolbelt_button--disabledButton--OE81R",o="toolbelt_button--selectedButton--buXGz",s="toolbelt_button--iconButtonInner--iHQD7",l="toolbelt_button--hovered--njMdl",c="toolbelt_button--toolbeltActionIconButton--YeniU"},108545:(e,r,n)=>{"use strict";n.d(r,{Id:()=>d,MW:()=>u,Vt:()=>l,X8:()=>s,Yp:()=>p,gC:()=>m,kL:()=>i,o1:()=>o,rf:()=>a,ut:()=>c});let i="base_cookie_banner--container--nUKFl",a="base_cookie_banner--body--lPBYi",o="base_cookie_banner--actions--1LAhr",s="base_cookie_banner--dismiss--gdSyk",l="base_cookie_banner--container__community--oc-bP",c="base_cookie_banner--container__fileViewer--522-P",d="base_cookie_banner--container__prototype--A1a4y",u="base_cookie_banner--dismissIcon--0O2Nl",p="base_cookie_banner--container__auth--okjXC",m="base_cookie_banner--container__authOrCommunity--cqdOl"},781779:(e,r,n)=>{"use strict";n.d(r,{$C:()=>g,$b:()=>eD,$r:()=>m,A4:()=>ec,AN:()=>Q,Af:()=>ed,Ah:()=>Y,B9:()=>U,DE:()=>er,DN:()=>eO,De:()=>d,Dr:()=>l,FQ:()=>eR,G0:()=>b,JI:()=>G,JT:()=>h,K4:()=>eM,LL:()=>em,Me:()=>_,N0:()=>v,PN:()=>a,PQ:()=>eV,Po:()=>S,Pp:()=>B,Py:()=>k,Q1:()=>eB,Q2:()=>ew,QQ:()=>s,Qw:()=>C,R2:()=>eg,R3:()=>c,RO:()=>O,Rv:()=>eG,SW:()=>x,Sb:()=>N,T2:()=>eP,Td:()=>q,Uw:()=>K,Vm:()=>o,Wn:()=>f,Ws:()=>es,X8:()=>ey,Z6:()=>I,Zz:()=>eU,_M:()=>el,_P:()=>eu,_x:()=>H,a6:()=>W,aT:()=>ek,az:()=>eT,bu:()=>L,c6:()=>ef,dV:()=>p,eN:()=>eI,eg:()=>i,ev:()=>en,fU:()=>e_,fV:()=>X,fh:()=>ev,g$:()=>j,gn:()=>ea,h3:()=>eN,i4:()=>eL,iU:()=>eA,is:()=>A,jR:()=>E,jc:()=>eE,k0:()=>R,k7:()=>V,mO:()=>eb,n7:()=>ep,nG:()=>J,nL:()=>eF,o$:()=>ex,oK:()=>F,oW:()=>P,p5:()=>eh,pZ:()=>eS,qH:()=>Z,qm:()=>w,qt:()=>ee,t1:()=>M,vD:()=>z,vY:()=>ei,vh:()=>y,w3:()=>u,wO:()=>$,wl:()=>eo,xr:()=>T,xu:()=>et,yG:()=>eC,zt:()=>D});let i="#e5e5e5",a="rgba(0, 0, 0, 0.8)",o="#fff",s="#333333",l="#fff",c="#000",d="#e6e6e6",u="#667799",p="#007be5",m="#9747ff",h="#ff24bd",_="#f24822",g="#ffcd29",f="#14ae5c",E="rgba(30, 30, 30, 1)",y="rgba(117, 117, 117, 1)",b="rgba(77, 77, 77, 1)",I="rgba(179, 179, 179, 1)",T="rgba(230, 230, 230, 1)",v="rgba(242, 72, 34, 1)",S="rgba(255, 199, 194, 1)",w="rgba(255, 166, 41, 1)",A="rgba(252, 209, 156, 1)",N="rgba(255, 205, 41, 1)",C="rgba(255, 232, 163, 1)",O="rgba(20, 174, 92, 1)",L="rgba(175, 244, 198, 1)",R="rgba(13, 153, 255, 1)",P="rgba(189, 227, 255, 1)",D="rgba(151, 71, 255, 1)",k="rgba(228, 204, 255, 1)",M="rgba(255, 255, 255, 1)",F="rgba(175, 188, 207, 1)",x="rgba(255, 175, 163, 1)",U="rgba(255, 196, 112, 1)",B="rgba(255, 217, 102, 1)",V="rgba(133, 224, 163, 1)",G="rgba(128, 202, 255, 1)",H="rgba(217, 184, 255, 1)",W="rgba(255, 189, 242, 1)",K="rgba(230, 230, 230, 1)",j="rgba(151, 151, 151, 1)",z="rgba(255, 153, 248, 1)",Y="rgba(255, 174, 79, 1)",$="rgba(255, 238, 0, 1)",q="rgba(134, 250, 22, 1)",Z="rgba(111, 255, 246, 1)",X="rgba(179, 143, 255, 1)",J="rgba(255, 255, 255, 1)",Q="rgba(175, 175, 175, 1)",ee="rgba(255, 160, 249, 1)",et="rgba(255, 184, 104, 1)",er="rgba(255, 242, 52, 1)",en="rgba(174, 255, 97, 1)",ei="rgba(126, 255, 247, 1)",ea="rgba(188, 155, 255, 1)",eo="rgba(255, 255, 255, 1)",es="rgba(17, 17, 17, 1)",el="rgba(117, 117, 117, 1)",ec="rgba(217, 217, 217, 1)",ed="rgba(224, 62, 26, 1)",eu="rgba(251, 188, 182, 1)",ep="rgba(247, 151, 34, 1)",em="rgba(255, 196, 112, 1)",eh="rgba(243, 193, 27, 1)",e_="rgba(249, 223, 144, 1)",eg="rgba(25, 143, 81, 1)",ef="rgba(161, 232, 185, 1)",eE="rgba(12, 140, 233, 1)",ey="rgba(168, 215, 250, 1)",eb="rgba(138, 56, 245, 1)",eI="rgba(214, 182, 251, 1)",eT="rgba(255, 255, 255, 1)",ev="rgba(102, 119, 153, 1)",eS="rgba(242, 72, 34, 1)",ew="rgba(255, 166, 41, 1)",eA="rgba(255, 205, 41, 1)",eN="rgba(20, 174, 92, 1)",eC="rgba(13, 153, 255, 1)",eO="rgba(151, 71, 255, 1)",eL="rgba(255, 36, 189, 1)",eR="rgba(230, 230, 230, 1)",eP="rgba(175, 188, 207, 1)",eD="rgba(252, 163, 151, 1)",ek="rgba(255, 196, 112, 1)",eM="rgba(247, 209, 95, 1)",eF="rgba(121, 210, 151, 1)",ex="rgba(124, 196, 248, 1)",eU="rgba(209, 168, 255, 1)",eB="rgba(253, 156, 224, 1)",eV="rgba(230, 230, 230, 1)",eG="#f8f8f8"},194792:(e,r,n)=>{"use strict";n.d(r,{Zo:()=>a,ss:()=>i});let i=11,a=9},146935:(e,r,n)=>{"use strict";n.d(r,{communityViewerMaxWidth:()=>c,compareChangesModalWidth:()=>f,curatorTertiaryModalZ:()=>b,defaultCornerRadius:()=>g,designToolbarHeight:()=>l,devHandoffAssetPreviewMaxHeight:()=>m,devHandoffAssetPreviewMaxWidth:()=>p,helpWidgetSizePlusMargin:()=>s,interFontSource:()=>v,leftNavLeftMarginUI3:()=>d,modalZ:()=>T,propertiesPanelRightMarginUI3:()=>u,rulerThickness:()=>_,scrollBarXHeight:()=>i,scrollBarYWidth:()=>a,secondaryModalZ:()=>I,stylePickerMaxHeight:()=>h,templateModalTeamName:()=>y,topBarZ:()=>E,trackPadding:()=>o,uiFontFamily:()=>S,whyteFontFamily:()=>w});let i="6px",a="6px",o="2px",s="64px",l="48px",c="1440px",d="8px",u="8px",p="44px",m="44px",h="300px",_="20px",g="2px",f="3000px",E=3,y=2,b=7,I=9,T=10,v="url('https://static.figma.com/uploads/2cca21a49f7dad1daa612d73d50357644671964a')\n  format('woff2')",S="Inter, sans-serif",w="Whyte, sans-serif"},230997:(e,r,n)=>{"use strict";n.d(r,{FX:()=>s,QU:()=>a,Us:()=>i,ZV:()=>l,rz:()=>o});let i="40px",a="12px",o="16px",s="16px",l="40px"},538411:(e,r,n)=>{"use strict";n.d(r,{Q:()=>i});let i="visually_hidden--visuallyHidden--To537"},310435:(e,r,n)=>{"use strict";n.d(r,{az:()=>i,i0:()=>a});let i="toolbar_action--hideOnMobile--nG2oh",a="toolbar_action--hideOnDesktop--caccx"},844052:(e,r,n)=>{"use strict";n.d(r,{B7:()=>b,E3:()=>i,H0:()=>h,Kk:()=>d,MW:()=>c,My:()=>y,Nl:()=>m,Oy:()=>a,SP:()=>s,TU:()=>_,Xy:()=>p,hR:()=>E,iU:()=>g,m$:()=>u,x6:()=>f,z3:()=>l,zC:()=>o});let i="visual_bell--base--Q4n07",a="visual_bell--fplBase--oYGmj",o="visual_bell--messageContainer--fkhJH _overlayBase--_overlayBase--Rkj8l text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",s="visual_bell--shown--q-U2E",l="visual_bell--error--SyYvP",c="visual_bell--dismissIcon--IByfy",d="visual_bell--icon--rn9Ns",u="visual_bell--iconUI3Color--1jcVh",p="visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",m="visual_bell--customIconCircle--LwQJ3 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",h="visual_bell--customIconError--wr7b0 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",_="visual_bell--messageMultiLine--N9KHG visual_bell--messageBase--Dg3ya ellipsis--_ellipsisAfterNLines--LzI7k",g="visual_bell--message--lQw67 visual_bell--messageBase--Dg3ya ellipsis--ellipsis--Tjyfa",f="visual_bell--button--5MgFh",E="visual_bell--progressIcon--RYZye",y="visual_bell--slidesVisualBell--arXfI",b="visual_bell--slidesVisualBellIcon--LAt8o"},99123:(e,r,n)=>{"use strict";n.d(r,{Le:()=>s,Lq:()=>c,Qo:()=>u,Sn:()=>d,X9:()=>i,f$:()=>l,k8:()=>o,wH:()=>a});let i="slides_color_controls--panelToggle--kL4qJ",a="slides_color_controls--selected--FUTwH",o="slides_color_controls--colorChit--pdLKf",s="slides_color_controls--chitBackground--Vlkza",l="slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",c="slides_color_controls--editChitButton--Am-hP",d="slides_color_controls--enabled--3SYlu",u="slides_color_controls--shownForTests--S2xlM"},468434:(e,r,n)=>{"use strict";n.d(r,{Oe:()=>a,RJ:()=>s,g0:()=>o,mu:()=>l,yE:()=>i});let i="feed_post_zoom_pan--zoomPanContainer--zUqcL",a="feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",o="feed_post_zoom_pan--guidelineLayer--p6ik- feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",s="feed_post_zoom_pan--transformedImage--hjQSb",l="feed_post_zoom_pan--zoomControls--8PqPP feed_post_detail_modal--contentOverlayPill--1jsoj"},30158:(e,r,n)=>{"use strict";n.d(r,{D9:()=>i,ZS:()=>o,oO:()=>a});let i="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",a="whiteboard_text_style_control--selectInputForMeasurement--slyc8",o="whiteboard_text_style_control--optionForMeasurement--Am6OD"},158200:(e,r,n)=>{"use strict";n.d(r,{$:()=>A,$d:()=>F,$y:()=>m,B4:()=>q,BE:()=>J,BN:()=>j,Bx:()=>P,F0:()=>C,FK:()=>O,FP:()=>y,ID:()=>Q,Lt:()=>a,SN:()=>z,Sk:()=>V,UJ:()=>g,WX:()=>k,Wq:()=>X,ZJ:()=>x,Zh:()=>_,_V:()=>S,ac:()=>D,cP:()=>Y,cq:()=>M,dP:()=>$,dR:()=>i,eB:()=>U,gz:()=>B,hA:()=>N,he:()=>v,i0:()=>l,iD:()=>W,iE:()=>d,ll:()=>L,oE:()=>w,pN:()=>u,qs:()=>c,rf:()=>T,rh:()=>Z,sD:()=>s,t3:()=>H,tS:()=>I,tq:()=>b,uA:()=>f,uh:()=>K,vu:()=>o,vy:()=>p,wj:()=>E,xI:()=>G,yG:()=>h,z6:()=>R});let i="delightful_toolbar--focusVisibleHover--Ag5DV",a="delightful_toolbar--select--Qs3At",o="delightful_toolbar--active--Xm9-4",s="delightful_toolbar--hand--UoaPp",l="delightful_toolbar--animate--gXF-Y",c="delightful_toolbar--universalInsertCollage--0-jTN",d="delightful_toolbar--stamp--diHIZ",u="delightful_toolbar--universalInsert--FC5m4",p="delightful_toolbar--universalInsertGoogleClassroom--9iLQR",m="delightful_toolbar--fakeButtonContainer--ivi7f",h="delightful_toolbar--toolbarFakeButtonTarget--SdMI0",_="delightful_toolbar--passthruLayout--gz5r2",g="delightful_toolbar--stampButton--3kdlW",f="delightful_toolbar--peekingVotingWheel--w0rd4",E="delightful_toolbar--peekingVotingWheelHidden--97uHk",y="delightful_toolbar--peekingVotingWheelDoneVoting--tAyvc",b="delightful_toolbar--peekingVotingWheelShowHide--1jIMo",I="delightful_toolbar--remainingVotesIndicator--1pWLF text--fontPos12--YsUAh text--_fontBase--QdLsd",T="delightful_toolbar--remainingVotesIndicatorInProgress--x9DdJ",v="delightful_toolbar--remainingVotesIndicatorDone--OyZtG",S="delightful_toolbar--remainingVotesIndicatorTextSpan--ola4B ellipsis--ellipsis--Tjyfa",w="delightful_toolbar--checkIcon--JmhHu",A="delightful_toolbar--peekingVotingWheelContainer--EBQCY",N="delightful_toolbar--peekingVotingWheelInactive--bdvqB",C="delightful_toolbar--horizontalButton--GEYZm",O="delightful_toolbar--horizontalButtonDisabled--J--Nk",L="delightful_toolbar--pointerEventsDisabled--0umVY",R="delightful_toolbar--tool--g8UFJ",P="delightful_toolbar--toolIconIsDragging--NbbVm",D="delightful_toolbar--shapeAndStickyShadow--19Urt",k="delightful_toolbar--hasDropShadow--Jr9fo",M="delightful_toolbar--easeInDltItemFill--rGBLG",F="delightful_toolbar--shapeSpawnAnimation--bHVVH",x="delightful_toolbar--customAnimatedStickyV3--qLTBA",U="delightful_toolbar--bottomStickyV3---oRIg delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",B="delightful_toolbar--middleStickyV3--BiM-v delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",V="delightful_toolbar--topStickyV3--5ndgM delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",G="delightful_toolbar--middleStickyContainerV3--dlPej delightful_toolbar--backgroundStickyV3--NbeSj",H="delightful_toolbar--bottomStickyContainerV3--h7rWX delightful_toolbar--backgroundStickyV3--NbeSj",W="delightful_toolbar--fakeStickyContainer--OmfTq delightful_toolbar--backgroundStickyV3--NbeSj",K="delightful_toolbar--stickyOuterV3--ROW-i",j="delightful_toolbar--stickyCurlV3--6kp8i",z="delightful_toolbar--stickyMaskContainerV3--XBMQM",Y="delightful_toolbar--stickyMaskDynamicV3--hTZdB",$="delightful_toolbar--stickyMaskStaticV3---Ycp2",q="delightful_toolbar--showCurlV3--qx7tK",Z="delightful_toolbar--noTransition--aPSPH",X="delightful_toolbar--stickyBaseV3--sQACX",J="delightful_toolbar--reverse---CQhv",Q="delightful_toolbar--fakeStickyV3--Jq79A delightful_toolbar--stickyAnimationPropertiesV3--tf0ke"},525763:(e,r,n)=>{"use strict";n.d(r,{A:()=>p});var i=n(772841),a=n(683224),o=n(866206),s=n(798867),l=n(356388),c=n(344301),d=n(444390),u=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e))(u||{});class p{constructor(e,r,n,i,o,s={},c){this.args=e,this.viewRegistry=n,this.session=new a.A(e,r,n,this.emitter,(e,r)=>{this.requestPaginationChange(e,r)},c,s.shouldBubbleUpNonNullableResultErrors,s.enableComputedFieldOptimisticUpdates,s.errorsLoggedForAnalyticsFraction),this.connection=new l.A(i,o,e,this.emitter,s),this.connection.addObserver(this),this.addEventListener(this.healthListener.bind(this));for(let e=0;e<(s?.preloadedViews?.length??0);e++){let r=s?.preloadedViews?.[e],n=s?.preloadedViewArgs?.[e]??{};this.session.subscribe(r,n,()=>{}),this.preloadViewKeys.add((0,d.J)(r._name,n))}for(let e=0;e<(s?.mismatchedViews?.length??0);e++){let r=s?.mismatchedViews?.[e],n=s?.mismatchedViewArgs?.[e]??{};this.mismatchedPreloadMsgs.push({messageType:"unsubscribe",viewName:r,args:n})}}transactionId=1;syncDelayForDebugging=0;syncQueryIds=new Map;syncCallbacks=new Map;pendingGlobalOptimisticUpdates=new Set;globalOptimisticUpdateResolutionCallbacks=[];session;connection;emitter=new s.b;healthListeners=new Set;pendingOptimisticMutationList=[];pendingMutationList=[];preloadViewKeys=new Set;mismatchedPreloadMsgs=[];cleanup(){this.connection.cleanup()}async connect(){await this.connection.connect()}async close(){await this.connection.closeWithoutReconnecting()}addEventListener(e){return this.emitter.addListener(e)}setOptionalMissingForView(e,r){this.session.setOptionalMissingForView(e,r)}unsetOptionalMissingForView(e){this.session.unsetOptionalMissingForView(e)}removeEventListener(e){return this.emitter.removeListener(e)}healthListener(e){if("CONNECTION_STATE"===e.type){let r=this.getHealthStatusForConnectionState(e.state);for(let e of this.healthListeners)e(r)}}getHealthStatus(){return this.getHealthStatusForConnectionState(this.connection.getState())}getHealthStatusForConnectionState(e){return"connected"===e.type?0:"connecting"===e.type?2:1}addHealthListener(e){return this.healthListeners.add(e),()=>this.removeHealthListener(e)}removeHealthListener(e){this.healthListeners.delete(e)}sendExistingSubscriptions(){for(let e of this.mismatchedPreloadMsgs)this.connection.send(e);for(let{viewRef:e,args:r,traceId:n}of(this.session.startReconnectionStateForPaginationQueries(),this.session.uniqueSubscriptions()))this.preloadViewKeys.has((0,d.J)(e._name,r))||this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n)}handleMessage(e){switch(e.messageType){case"authSuccess":if(this.args.sessionId=e.sessionId,this.args.anonymousUserId=e.anonymousUserId,!this.connection.isAuthenticated()){(0,o.QI)(!1,"Expected connection to be in authenticated state");break}for(let e of this.syncCallbacks.keys())this.requestSync(e,this.syncQueryIds.get(e));break;case"pendingMutations":this.hasUnresolvedGlobalOptimisticUpdates()?(this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.applyMutations(e.mutations)}),this.pendingMutationList.push(e.mutations),this.session.resolvePendingServerIdList(e.mutations)):this.session.applyMutations(e.mutations);break;case"synced":let r=this.syncCallbacks.get(e.transactionId);r&&r();break;case"viewSubscriptionFailed":this.emitter.emit({type:"ERROR",error:new i.rT(e.errorCode)}),this.session.cleanupFailedSubscribeView(e.liveViewKey)}}onConnectionOpen(){this.sendExistingSubscriptions()}requestSubscription(e,r,n,i){let a={messageType:"subscribe",viewName:e._name,viewHash:e._hash,loadType:n,args:r,traceId:i};this.connection.isConnected()&&(this.connection.send(a),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:e,args:r,traceId:i}))}requestPaginationChange(e,r){let n={messageType:"paginationChangeMessage",operationType:"LoadNext",queryId:e,count:r.count,paginationArgs:r};this.connection.isConnected()&&this.connection.send(n)}subscribeBase(e,r,n,i){let a=this.session.hasActiveSubscriptions(e._name,r),o=this.session.subscribe(e,r,n,i);return a||(this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:e,args:r,traceId:i}),this.requestSubscription(e,r,"initial_load",i)),o}getUnsubscribeFunction(e){return()=>{e.clientUnsubscribed=!0,(0,o.VG)(()=>{e.unsubscribe(),!this.session.hasActiveSubscriptions(e.view._name,e.args)&&this.connection.isConnected()&&(this.connection.send({messageType:"unsubscribe",viewName:e.view._name,args:e.args}),this.emitter.emit({type:"UNSUBSCRIBE_VIEW_SERVER",view:e.view,args:e.args}))},2e3)}}getViewResult(e,r){return this.session.getViewResult(e,r)}viewHasStaticQueries(e){return!!this.viewRegistry.get(e._name)?.hasStaticQueries()}subscribe(e,r,n,i){let a=r;this.viewHasStaticQueries(e)&&!r.__requestId&&(a={...r,__requestId:(0,c.A)()});let o=this.subscribeBase(e,a,n,i);return this.getUnsubscribeFunction(o)}hasUnresolvedGlobalOptimisticUpdates(){return this.pendingGlobalOptimisticUpdates.size>0}handleBeforeOptimisticUpdateApplied(e){this.pendingGlobalOptimisticUpdates.add(e)}handleAfterOptimisticUpdateResolved(e){if(this.pendingGlobalOptimisticUpdates.delete(e),!this.hasUnresolvedGlobalOptimisticUpdates()){let e=this.globalOptimisticUpdateResolutionCallbacks;this.globalOptimisticUpdateResolutionCallbacks=[],this.emitter.emit({type:"MUTATIONS_BLOCKED_ON_OPTIMISTIC_UPDATE",count:e.length}),this.session.batchMutations(()=>{for(let r of e)r()}),this.pendingOptimisticMutationList=[],this.pendingMutationList=[]}}checkPotentiallyMissingMutations(e,r){if("create"===e||"update"===e)for(let n in r)for(let i in r[n]){let a=r[n][i];if("create"===e&&!a?.uuid)continue;let o=!1;for(let e of this.pendingMutationList)for(let r in e)if(n===r)for(let n in e[r].instances){let s=e[r].instances[n];s.uuid&&a.uuid&&s.uuid===a.uuid?o=!0:s.id===i&&(o=!0)}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:o,objectName:n,optimisticInstance:a,operationType:e})}else if("delete"===e)for(let n in r)for(let i in r[n]){let r=!1;for(let e of this.pendingMutationList)for(let a in e)if(n===a)for(let n in e[a].queries){let o=e[a].queries[n];"error"in o||!1!==o.results[i]||(r=!0)}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:r,objectName:n,optimisticInstance:null,operationType:e})}}async applyMutations(e,r,n){let i;let a=this.transactionId;this.transactionId++;let o=this.session.applyShadowMutations(a,e,n);this.handleBeforeOptimisticUpdateApplied(a);try{i=await r}catch(r){throw this.session.removeShadowMutations(a,e,!1),this.handleAfterOptimisticUpdateResolved(a),r}let s=!1;try{await this.sync(a,o),s=!0}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.removeShadowMutations(a,e,s)}),s&&"create"!==n&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.checkPotentiallyMissingMutations(n,e)}),this.handleAfterOptimisticUpdateResolved(a)}return i}waitForServerSideObjectsWithUUIDs(e){let r=[];for(let n in e)for(let i in e[n])r.push(this.getIdFromUuid(n,i));return Promise.all(r)}async applyMutationsWithUUID(e,r,n){let i;let a=this.transactionId;this.transactionId++;let s=this.session.applyShadowMutationsWithUUID(a,e,n);this.handleBeforeOptimisticUpdateApplied(a);try{i=await r}catch(r){throw this.session.removeShadowMutationsWithUUID(a,e,!1),this.handleAfterOptimisticUpdateResolved(a),r}let l=!1;try{"create"===n?(this.emitter.emit({type:"WAIT_SERVER_OBJECTS_STARTED",mutations:e}),await this.waitForServerSideObjectsWithUUIDs(e),await (0,o.yy)(this.syncDelayForDebugging),this.emitter.emit({type:"WAIT_SERVER_OBJECTS_ENDED",mutations:e})):await this.sync(a,s),l=!0}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutationsWithUUID(a,e,l)}),l&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>this.checkPotentiallyMissingMutations(n,e)),this.handleAfterOptimisticUpdateResolved(a)}return i}getIdFromUuid(e,r){return this.session.getIdFromUuid(e,r)}requestSync(e,r){this.connection.isConnected()&&(this.connection.send({messageType:"sync",transactionId:e,queryIds:r}),this.emitter.emit({type:"SYNC_STARTED",transactionId:e}))}async sync(e=this.transactionId++,r){let[n,i]=(0,o.dS)();this.syncCallbacks.set(e,i),void 0!==r&&this.syncQueryIds.set(e,r),this.requestSync(e,r),await n,this.syncDelayForDebugging&&await (0,o.yy)(this.syncDelayForDebugging),this.syncCallbacks.delete(e),this.syncQueryIds.delete(e),this.emitter.emit({type:"SYNC_COMPLETED",transactionId:e})}get debug(){let e=this.session.getViewSubscriptionsForDebugging(),r={},n={};for(let i in e)"loading"===e[i].status&&(r[i]=e[i]),"errors"===e[i].status&&(n[i]=e[i]);return{subscriptions:e,loadingSubscriptions:r,failedSubscriptions:n,prettyPrintLiveViewTree:e=>this.session.prettyPrintLiveViewTree(e),setOptimisticUpdateResolutionDelay:e=>this.syncDelayForDebugging=e,setOptionalMissingForView:(e,r)=>this.setOptionalMissingForView(e,r),unsetOptionalMissingForView:e=>this.unsetOptionalMissingForView(e),...this.connection.debug}}}},786013:(e,r,n)=>{"use strict";n.d(r,{N4S:()=>i.N4S,W7o:()=>i.W7o,_YF:()=>i._YF,bUL:()=>i.bUL,y4I:()=>i.y4I,zi5:()=>i.zi5});var i=n(948509)},156140:(e,r,n)=>{"use strict";n.d(r,{C7:()=>o,Jj:()=>w,KC:()=>v,QR:()=>l,TO:()=>A,gR:()=>I,w_:()=>N,yo:()=>S,zx:()=>T});var i=(e=>(e.IS_GUEST="ORG::IS_GUEST",e.IS_MEMBER="ORG::IS_MEMBER",e.IS_ADMIN="ORG::IS_ADMIN",e.CAN_SELF_UPGRADE="ORG::CAN_SELF_UPGRADE",e.CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED="ORG::CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED",e.CANNOT_JOIN_ORG_GUESTS_BANNED="ORG::CANNOT_JOIN_ORG_GUESTS_BANNED",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="ORG::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="ORG::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="ORG::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e))(i||{}),a=(e=>(e.CAN_VIEW="TEAM::CAN_VIEW",e.CAN_EDIT="TEAM::CAN_EDIT",e.CAN_ADMIN="TEAM::CAN_ADMIN",e.IS_OWNER="TEAM::IS_OWNER",e.VIEW_ROLE_ACCESS="TEAM::VIEW_ROLE_ACCESS",e.EDIT_ROLE_ACCESS="TEAM::EDIT_ROLE_ACCESS",e.ADMIN_ROLE_ACCESS="TEAM::ADMIN_ROLE_ACCESS",e.CAN_DISCOVER="TEAM::CAN_DISCOVER",e.CAN_DISCOVER_METADATA="TEAM::CAN_DISCOVER_METADATA",e.CAN_SELF_UPGRADE="TEAM::CAN_SELF_UPGRADE",e.CAN_VIEW_IN_ADMIN="TEAM::CAN_VIEW_IN_ADMIN",e.CAN_VIEW_LIMITED_INFO="TEAM::CAN_VIEW_LIMITED_INFO",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="TEAM::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="TEAM::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="TEAM::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e))(a||{}),o=(e=>(e.CAN_VIEW="FOLDER::CAN_VIEW",e.CAN_EDIT="FOLDER::CAN_EDIT",e.IS_OWNER="FOLDER::IS_OWNER",e.CAN_DISCOVER="FOLDER::CAN_DISCOVER",e.CAN_CREATE_FIGJAM_FILE="FOLDER::CAN_CREATE_FIGJAM_FILE",e.CAN_CREATE_DESIGN_FILE="FOLDER::CAN_CREATE_DESIGN_FILE",e.CAN_CREATE_SLIDES_FILE="FOLDER::CAN_CREATE_SLIDES_FILE",e.CAN_MOVE="FOLDER::CAN_MOVE",e.CAN_TRANSFER_EXTERNALLY="FOLDER::CAN_TRANSFER_EXTERNALLY",e.CAN_TRASH="FOLDER::CAN_TRASH",e.CAN_RESTORE="FOLDER::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FOLDER::CAN_PERMANENTLY_DELETE",e))(o||{}),s=(e=>(e.CAN_VIEW_PROTOTYPE="REPO::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="REPO::CAN_VIEW",e.CAN_EDIT="REPO::CAN_EDIT",e.CAN_ADMIN="REPO::CAN_ADMIN",e.IS_OWNER="REPO::IS_OWNER",e.CAN_MANAGE="REPO::CAN_MANAGE",e.CAN_MOVE="REPO::CAN_MOVE",e.CAN_VIEW_LINK_ACCESS="REPO::CAN_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="REPO::CAN_EDIT_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="REPO::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_ORG_EDIT_LINK_ACCESS="REPO::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_DISCOVER="REPO::CAN_DISCOVER",e))(s||{}),l=(e=>(e.CAN_VIEW_PROTOTYPE="FILE::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="FILE::CAN_VIEW",e.CAN_EDIT="FILE::CAN_EDIT",e.CAN_EDIT_CANVAS="FILE::CAN_EDIT_CANVAS",e.CAN_PUBLISH_TEMPLATE="FILE::CAN_PUBLISH_TEMPLATE",e.CAN_INSERT_TEMPLATE="FILE::CAN_INSERT_TEMPLATE",e.CAN_ADMIN="FILE::CAN_ADMIN",e.IS_OWNER="FILE::IS_OWNER",e.CAN_BECOME_EDITOR="FILE::CAN_BECOME_EDITOR",e.CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT="FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT",e.CAN_MANAGE="FILE::CAN_MANAGE",e.HAS_ROLE_ACCESS="FILE::HAS_ROLE_ACCESS",e.CAN_BE_MENTIONED_IN_COMMENT="FILE::CAN_BE_MENTIONED_IN_COMMENT",e.CAN_DOWNLOAD_FILE="FILE::CAN_DOWNLOAD_FILE",e.CAN_ACCESS_FILE_THROUGH_API="FILE::CAN_ACCESS_FILE_THROUGH_API",e.CAN_MODIFY_ROLES="FILE::CAN_MODIFY_ROLES",e.CAN_VIEW_METADATA="FILE::CAN_VIEW_METADATA",e.CAN_GAIN_VIEW="FILE::CAN_GAIN_VIEW",e.CAN_GAIN_VIEW_PROTOTYPE="FILE::CAN_GAIN_VIEW_PROTOTYPE",e.CAN_DISCOVER="FILE::CAN_DISCOVER",e.CAN_ACCESS_FRAGMENTS="FILE::CAN_ACCESS_FRAGMENTS",e.CAN_ACCESS_LIBRARY="FILE::CAN_ACCESS_LIBRARY",e.CAN_RENAME="FILE::CAN_RENAME",e.CAN_DELETE="FILE::CAN_DELETE",e.CAN_TRASH="FILE::CAN_TRASH",e.CAN_RESTORE="FILE::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FILE::CAN_PERMANENTLY_DELETE",e.CAN_MOVE="FILE::CAN_MOVE",e.CAN_FAVORITE="FILE::CAN_FAVORITE",e.CAN_VIEW_AND_CREATE_COMMENTS="FILE::CAN_VIEW_AND_CREATE_COMMENTS",e.CAN_MOVE_COMMENTS="FILE::CAN_MOVE_COMMENTS",e.CAN_EDIT_IGNORE_PAID_STATUS="FILE::CAN_EDIT_IGNORE_PAID_STATUS",e.CAN_EDIT_IGNORE_EDU_GRACE_PERIOD="FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD",e.CAN_VIEW_LINK_ACCESS="FILE::CAN_VIEW_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="FILE::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="FILE::CAN_EDIT_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS="FILE::CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS",e.CAN_ORG_EDIT_LINK_ACCESS="FILE::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_VIEW_METADATA_LINK_ACCESS="FILE::CAN_VIEW_METADATA_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ACCESS_FULL_DEV_MODE="FILE::CAN_ACCESS_FULL_DEV_MODE",e.IS_ELIGIBLE_FOR_DEV_MODE_TRIAL="FILE::IS_ELIGIBLE_FOR_DEV_MODE_TRIAL",e.IS_IN_DEV_MODE_TRIAL="FILE::IS_IN_DEV_MODE_TRIAL",e.DEV_MODE_TRIAL_REQUEST_PENDING="FILE::DEV_MODE_TRIAL_REQUEST_PENDING",e.DEV_MODE_REQUEST_PENDING="FILE::DEV_MODE_REQUEST_PENDING",e.DEV_MODE_REQUEST_DENIED="FILE::DEV_MODE_REQUEST_DENIED",e.CAN_ACCESS_DEV_MODE_ENTRY_POINT="FILE::CAN_ACCESS_DEV_MODE_ENTRY_POINT",e.CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS="FILE::CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS",e.CAN_ACCESS_FULL_CODE_CONNECT="FILE::CAN_ACCESS_FULL_CODE_CONNECT",e.CAN_USE_FIGMA_AI="FILE::CAN_USE_FIGMA_AI",e.CAN_USE_FIGJAM_AI="FILE::CAN_USE_FIGJAM_AI",e.CAN_USE_SLIDES_AI="FILE::CAN_USE_SLIDES_AI",e.CAN_USE_FRAGMENT_SEARCH_AI="FILE::CAN_USE_FRAGMENT_SEARCH_AI",e.CAN_SEND_WEBHOOK="FILE::CAN_SEND_WEBHOOK",e.IS_WORKSPACE_VISIBLE="FILE::IS_WORKSPACE_VISIBLE",e.CAN_PIN_TO_WORKSPACE="FILE::CAN_PIN_TO_WORKSPACE",e.CAN_VIEW_WORKSPACE_PIN="FILE::CAN_VIEW_WORKSPACE_PIN",e.SEAT_TYPE_PAID_STATUS_TEST_PERMISSION="FILE::SEAT_TYPE_PAID_STATUS_TEST_PERMISSION",e.MUST_UPGRADE_TO_SHARE_DRAFT="FILE::MUST_UPGRADE_TO_SHARE_DRAFT",e.MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT="FILE::MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT",e.MUST_REQUEST_EDITOR_ROLE_TO_EDIT="FILE::MUST_REQUEST_EDITOR_ROLE_TO_EDIT",e.CAN_ACCESS="FILE::CAN_ACCESS",e))(l||{}),c=(e=>(e.CAN_VIEW="COLLECTION_PAGE::CAN_VIEW",e))(c||{}),d=(e=>(e.CAN_VIEW="HUB_FILE::CAN_VIEW",e.CAN_DUPLICATE="HUB_FILE::CAN_DUPLICATE",e.CAN_ADMIN_COMMENTS="HUB_FILE::CAN_ADMIN_COMMENTS",e))(d||{}),u=(e=>(e.CAN_VIEW="PLUGIN::CAN_VIEW",e.CAN_ADMIN_COMMENTS="PLUGIN::CAN_ADMIN_COMMENTS",e))(u||{}),p=(e=>(e.CAN_VIEW="WORKSPACE::CAN_VIEW",e.CAN_ADMIN="WORKSPACE::CAN_ADMIN",e.CAN_CREATE_TEAM="WORKSPACE::CAN_CREATE_TEAM",e))(p||{}),m=(e=>(e.CAN_VIEW="FEED_POST::CAN_VIEW",e.IS_CONTAINER_MEMBER="FEED_POST::IS_CONTAINER_MEMBER",e))(m||{}),h=(e=>(e.IS_GUEST="PLAN::IS_GUEST",e.IS_MEMBER="PLAN::IS_MEMBER",e.IS_ADMIN="PLAN::IS_ADMIN",e))(h||{}),_=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(_||{}),g=(e=>(e.CAN_ADMIN="PROFILE::CAN_ADMIN",e))(g||{}),f=(e=>(e.CAN_VIEW="RESOURCE::CAN_VIEW",e))(f||{});let E=["FILE::CAN_EDIT","FILE::CAN_MANAGE","FILE::CAN_EDIT_CANVAS","FILE::CAN_PUBLISH_TEMPLATE","FILE::CAN_RENAME","FILE::CAN_MOVE_COMMENTS","FILE::CAN_EDIT_IGNORE_PAID_STATUS","FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD","FILE::CAN_BECOME_EDITOR","FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT"],y=[...E,"FILE::CAN_MODIFY_ROLES","FILE::CAN_DELETE"];[...E],[...y];var b=(e=>(e.Allow="ALLOW",e.Deny="DENY",e))(b||{});let I=100,T=300,v=900,S=999;var w=(e=>(e.ORG="ORG",e.HUB_FILE="HUB_FILE",e.TEAM="TEAM",e.FEED_POST="FEED_POST",e.FOLDER="FOLDER",e.FILE_REPO="FILE_REPO",e.FILE="FILE",e.PLUGIN="PLUGIN",e.WORKSPACE="WORKSPACE",e.PLAN="PLAN",e.COLLECTION_PAGE="COLLECTION_PAGE",e.PROFILE="PROFILE",e.RESOURCE="RESOURCE",e))(w||{}),A=(e=>(e.CAMPFIRE="campfire",e.CAN_DISCOVER_PENDING_INVITE="can_discover_pending_invite",e.COMMUNITY_HUB_ADMIN="community_hub_admin",e.COMMUNITY_HUB_REVIEWER="community_hub_admin_reviewer",e.COMMUNITY_HUB_IMAGE_INSPECTION="community_hub_image_inspection",e.EXEMPT_GUESTS_FROM_MFA_REQUIREMENT="exempt_guests_from_mfa_requirement",e.EXT_PLUGIN_CAN_VIEW_PERMS_V2_REFACTOR="ext_plugin_can_view_perms_v2_refactor",e.SC_FILE_EXPERIENCE="sc_file_experience",e.SC_FILE_FOLDER_ACCESS="sc_file_folder_access",e.PS_BENCHMARK="ps_benchmark",e.PS_TEAM_DRAFTS_DENY_POLICIES="ps_team_drafts_deny_policies",e.WSLP_READ_PUBLISH_SCOPE="wslp_read_publish_scope",e.SITES="sites",e.TEAM_ABANDONED_DRAFT_FOLDER_PERMISSIONS="team_abandoned_draft_folder_permissions",e.TOU_DENY_CREATE_FILE="tou_pv2_deny_create_file",e.TOU_DENY_UPGRADE="tou_pv2_deny_upgrade_plan_user",e.TOU_DENY_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_edits_for_restricted_drafts_folder",e.TOU_RESTRICTED_DRAFTS_MOVE="tou_pv2_deny_restricted_draft_move",e.ORG_ADMIN_PERMISSION_ON_ABANDONED_DRAFTS="org_admin_permission_on_abandoned_drafts",e.PERM_ENABLE_DEBUGGER_LOG_FOR_USER="perm_enable_debugger_log_for_user",e.PRO_TEMPLATES_SLIDES="pro_templates_slides",e.PRO_TEMPLATES_FIGJAM="pro_templates_figjam",e.REMODEL_TEST_OVERRIDE="campfire_perms_test_override",e.PDR_TRASH_FOLDER="pdr_trash_folder",e.TOU_PV2_GROUP_1="tou_pv2_group_1",e))(A||{}),N=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(N||{}),C=(e=>(e.IAM="iam",e.UNOWNED="unowned",e.WORKFLOW="workflow",e.SEARCH_CORE="search_core",e.COMMUNITY="community",e.DEVELOPER_TOOLS="developer_tools",e.SCALE="scale",e.EXTENSIBILITY="extensibility",e.BILLING="billing",e.MONETIZATION="monetization",e.SLIDES="slides",e.WAYFINDING="wayfinding",e.AI_INFRA="ai_infra",e))(C||{})},948509:(e,r,n)=>{"use strict";n.d(r,{N4S:()=>a.N4,W7o:()=>a.W7,_YF:()=>i._Y,bUL:()=>i.bU,y4I:()=>i.y4,zi5:()=>a.zi}),n(918393),n(734122),n(781505),n(459980),n(522479),n(785925),n(383496),n(248904),n(720592),n(287160),n(609124),n(172835),n(297708),n(63505),n(904422),n(772285),n(442751),n(578103),n(181996),n(156140);var i=n(862241),a=n(776024);n(761390)},185035:(e,r,n)=>{"use strict";n.d(r,{EC:()=>S,Oi:()=>f,v0:()=>g});var i=n(837771),a=n(563838);let o=a.z.enum(["user","assistant"]);a.z.enum(["stop_sequence","max_tokens"]);let s=a.z.object({type:a.z.literal("ephemeral")}),l=a.z.object({type:a.z.literal("text"),text:a.z.string(),cache_control:s.optional()}),c=a.z.enum(["image/jpeg","image/png","image/gif","image/webp"]),d=a.z.object({type:a.z.literal("base64"),media_type:c,data:a.z.string()}),u=a.z.object({type:a.z.literal("image"),source:d,cache_control:s.optional()}),p=a.z.discriminatedUnion("type",[l,u]),m=a.z.object({type:a.z.literal("text_delta"),text:a.z.string()}),h=a.z.object({id:a.z.string().optional(),type:a.z.literal("message").optional(),role:o,content:a.z.array(p).or(a.z.string())}),_=a.z.array(h),g=a.z.object({model:i.t,system:a.z.union([a.z.string(),a.z.array(l)]).optional(),messages:_,max_tokens:a.z.number().optional(),stop_sequences:a.z.array(a.z.string()).optional(),temperature:a.z.number().optional(),top_p:a.z.number().optional(),top_k:a.z.number().optional(),stream:a.z.boolean().optional()}),f=a.z.object({id:a.z.string(),type:a.z.literal("message"),role:o,model:a.z.string(),content:a.z.array(p),stop_reason:a.z.string().nullable().optional(),stop_sequence:a.z.string().nullable().optional(),usage:a.z.object({input_tokens:a.z.number(),output_tokens:a.z.number()})}),E=a.z.object({type:a.z.literal("message_start"),message:h.partial()}),y=a.z.object({type:a.z.literal("message_delta"),delta:h.partial()}),b=a.z.object({type:a.z.literal("message_stop")}),I=a.z.object({type:a.z.literal("content_block_start"),index:a.z.number(),content_block:p}),T=a.z.object({type:a.z.literal("content_block_delta"),index:a.z.number(),delta:m}),v=a.z.object({type:a.z.literal("content_block_stop"),index:a.z.number()}),S=a.z.discriminatedUnion("type",[E,y,b,I,T,v])},213376:(e,r,n)=>{"use strict";n.d(r,{C7:()=>h,DL:()=>s,Dd:()=>L,H:()=>b,Qv:()=>_,_I:()=>N,a$:()=>p,bv:()=>u,c1:()=>m,fR:()=>c,fZ:()=>d,h4:()=>o,jR:()=>l,lb:()=>g,po:()=>R,pp:()=>O,r6:()=>C,tl:()=>w});var i=n(563838),a=n(563864);let o=i.z.object({prompt_data:i.z.string(),negative_prompt_data:i.z.string().default("blurry, bad"),cfg_scale:i.z.number().default(10),seed:i.z.number().default(20),steps:i.z.number().default(50),style_preset:i.z.string().default("photographic"),height:i.z.number().default(512),width:i.z.number().default(512),additionalPrefix:i.z.string().optional().default("")}),s=i.z.object({image:i.z.string(),metadata:i.z.object({height:i.z.number(),width:i.z.number()})}),l=i.z.object({userPrompt:i.z.string(),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional()}),c=i.z.string(),d=i.z.object({userPrompt:i.z.string(),sections:i.z.array(i.z.string()),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional()});i.z.string(),i.z.object({recommendedKitKey:i.z.string()});let u=i.z.object({presets:i.z.array(i.z.string()).optional(),theme:i.z.record(i.z.any()).optional(),jsx:i.z.string().optional(),dsKit:i.z.object({kitKey:i.z.string(),isLocal:i.z.boolean()}).optional(),trace:a.B.optional()}),p=u.extend({sections:i.z.array(i.z.string()).optional(),layoutJsx:i.z.string().optional(),v3Components:i.z.record(i.z.string()).optional()}),m=i.z.object({componentNames:i.z.array(i.z.string()),userPrompt:i.z.string(),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional()}),h=i.z.object({userPrompt:i.z.string()}),_=i.z.object({content:i.z.string()}),g=i.z.object({version:i.z.literal(2),darkMode:i.z.boolean(),fontFamilies:i.z.object({title:i.z.array(i.z.string()),body:i.z.array(i.z.string()),label:i.z.array(i.z.string())}),brandColor:i.z.string(),colors:i.z.object({text:i.z.string().array(),background:i.z.string().array(),border:i.z.string().array()}),borderRadii:i.z.array(i.z.number()),spacing:i.z.array(i.z.number())}),f=i.z.object({fontFamilies:i.z.array(i.z.string()),colors:i.z.array(i.z.string()),borderRadii:i.z.array(i.z.number()),spacing:i.z.array(i.z.number())}),E=i.z.union([g,f]),y=i.z.object({prompt:i.z.string()}),b=i.z.object({userPrompt:i.z.string(),promptHistory:i.z.array(y).optional(),storedInitialPrompt:i.z.string(),jsx:i.z.string(),jsxInsertReplace:i.z.string().optional(),currentTheme:E,kitKey:i.z.string(),isLocal:i.z.boolean()}),I=i.z.object({type:i.z.literal("text_or_image"),affectedId:i.z.string(),content:i.z.string()}),T=i.z.enum(["font","layout","component","other"]),v=i.z.object({type:i.z.literal("theme"),content:g.extend({iCantDoThis:i.z.boolean(),rationaleCategory:T}).partial()}),S=i.z.discriminatedUnion("type",[v,I,i.z.object({type:i.z.literal("insert"),affectedId:i.z.string(),insertBehavior:i.z.enum(["above","below"]),jsxToInsert:i.z.string()}),i.z.object({type:i.z.literal("replace"),affectedId:i.z.string(),jsxToInsert:i.z.string()}),i.z.object({type:i.z.literal("remove"),affectedId:i.z.string()}),i.z.object({type:i.z.literal("move"),affectedId:i.z.string(),insertBehavior:i.z.enum(["above","below"]),destinationId:i.z.string()}),i.z.object({type:i.z.literal("replaceClasses"),affectedId:i.z.string(),classes:i.z.string().array()}),i.z.object({type:i.z.literal("iCantDoThis"),rationaleCategory:T.optional()})]),w=i.z.object({action:S.optional(),cortex_error:i.z.object({type:i.z.string(),data:i.z.any()}).optional(),trace:a.B.optional()}),A=i.z.object({key:i.z.string(),name:i.z.string(),is_local:i.z.boolean(),description:i.z.string()});i.z.object({meta:i.z.object({kits:i.z.array(A)}),error:i.z.boolean().optional(),message:i.z.string().optional()});let N=i.z.enum(["normal","transparent","segment"]),C=i.z.object({imageB64:i.z.string()}),O=i.z.object({conflictScore:i.z.number(),reasoning:i.z.string()}),L=i.z.object({id:i.z.string().optional(),initialUserPrompt:i.z.string().optional(),jsxJSON:i.z.string().optional(),prompt:i.z.string().optional(),desc:i.z.string().optional(),transparent:i.z.boolean().optional(),background:N.optional(),height:i.z.number(),width:i.z.number(),description:i.z.string().optional()}),R=i.z.object({image:i.z.string(),foregroundImage:i.z.string().optional(),description:i.z.string(),trace:a.B.optional()})},409990:(e,r,n)=>{"use strict";n.d(r,{aC:()=>c,e3:()=>l});var i=n(563838),a=(e=>(e.NEUTRAL="neutral",e.CASUAL="casual",e.PROFESSIONAL="professional",e.CONCISE="concise",e.EXPANDED="expanded",e))(a||{});let o=i.z.object({id:i.z.string(),text:i.z.string()}).array(),s=i.z.object({tone:i.z.nativeEnum(a),weight:i.z.number()}).array(),l=i.z.union([i.z.object({text:i.z.string(),tones:s}),i.z.object({texts:o,tones:s})]),c=i.z.object({id:i.z.string().optional(),delta:i.z.string()})},341092:(e,r,n)=>{"use strict";n.d(r,{G1:()=>i});class i extends Error{type;data;trace;metadata;sentryTags;constructor(e,r,n,i,a){super(n??function(e){let r=e.message;return"string"==typeof r?r:void 0}(r)??`CortexError of type ${e}`),null!=i&&(this.stack=i),void 0!==a&&(this.trace=a),this.type=e,this.data=r}}},665202:(e,r,n)=>{"use strict";n.d(r,{f6:()=>i.f6}),n(690395);var i=n(716712);n(235310),i.Q_,i.cq,i.Eo,i.SR,i.ut},690395:(e,r,n)=>{"use strict";n(306811),n(989508),n(776758),n(374894)},749470:(e,r,n)=>{"use strict";function i(e){return{x:e.x,y:e.y,width:e.w,height:e.h}}function a(e,r){let n=Math.max(e.x,r.x),i=Math.max(e.y,r.y),a=Math.min(e.x+e.width,r.x+r.width),o=Math.min(e.y+e.height,r.y+r.height);return a>=n&&o>=i?{x:n,y:i,width:a-n,height:o-i}:null}n.d(r,{E$:()=>a,rb:()=>i})},632376:(e,r,n)=>{"use strict";n.d(r,{wZ:()=>d,xv:()=>s});var i=n(237870),a=n(121898);let o=a.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,714932)).then(e=>e.AutosaveLogOutModal),(0,i.Ij)("AutosaveLogOutModal")),s=(0,i.Ju)(o),l=a.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,714932)).then(e=>e.HasAutosaveChangesModal),(0,i.Ij)("HasAutosaveChangesModal"));(0,i.Ju)(l);let c=a.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,275081)).then(e=>e.AutosaveLearnMoreModal),(0,i.Ij)("AutosaveLearnMoreModal")),d=(0,i.Ju)(c)},898211:(e,r,n)=>{"use strict";n.d(r,{B7:()=>s.B,In:()=>o.I,dR:()=>c,lk:()=>u});var i=n(237870),a=n(711184),o=n(252011),s=n(946612);let l=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(18),n.e(4637),n.e(8964)]).then(n.bind(n,152495)).then(e=>e.UniversalUpgradeSequence),(0,i.Ij)("UniversalUpgradeSequence")),c=(0,i.Ju)(l,"UniversalUpgradeSequence"),d=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(18),n.e(4637),n.e(8964)]).then(n.bind(n,48649)).then(e=>e.UpgradeContactSalesModal),(0,i.Ij)("UpgradeContactSalesModal")),u=(0,i.Ju)(d,"UpgradeContactSalesModal"),p=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(18),n.e(4637),n.e(8964)]).then(n.bind(n,17186)).then(e=>e.OrgUpgradeMultiTeamModal),(0,i.Ij)("OrgUpgradeMultiTeamModal"));(0,i.Ju)(p,"OrgUpgradeMultiTeamModal");let m=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(8259),n.e(18),n.e(4637),n.e(8964)]).then(n.bind(n,392201)).then(e=>e.OrgUpgradeSingleTeamModal),(0,i.Ij)("OrgUpgradeSingleTeamModal"));(0,i.Ju)(m,"OrgUpgradeSingleTeamModal")},709217:(e,r,n)=>{},411045:(e,r,n)=>{"use strict";n.d(r,{L:()=>i});let i=function(){return!1}},303345:(e,r,n)=>{"use strict";n.d(r,{iO:()=>i}),n(860601).lQ;let i=function(){return{}}},396147:(e,r,n)=>{"use strict";n.d(r,{Xv:()=>c,ps:()=>o}),n(411855),n(634832),n(966712),n(915440),n(711525),n(218881),n(493323),n(762638);var i=n(939863);n(175290),n(896474);var a=n(720647);n(99506),n(279453);var o=(e=>(e.TEAM="Team",e.ORG="Org",e))(o||{}),s=(e=>(e.ALL_UNASSIGNED_REQUESTS="all_unassigned_requests",e.ALL_MANAGED_REQUESTS="all_managed_requests",e.ALL_ORG_REQUESTS="all_org_requests",e.INDIVIDUAL_BILLING_GROUP_REQUESTS="individual_billing_group_requests",e))(s||{}),l=(e=>(e.MEMBERS="members",e.GUESTS="guests",e))(l||{}),c=(e=>(e.APPROVE_ALL="APPROVE_ALL",e.BULK_SELECT="BULK_SELECT",e.SINGLE="SINGLE",e.EMAIL="EMAIL",e.DEEPLINK="DEEPLINK",e))(c||{}),d=(e=>(e.NEWEST_FIRST="NEWEST_FIRST",e.OLDEST_FIRST="OLDEST_FIRST",e))(d||{});a.Te.DESIGN,a.Te.WHITEBOARD,a.Te.DEV_MODE,()=>(0,i.t)("admin_dashboard.requests.devmode_seat")},852450:(e,r,n)=>{"use strict";n.d(r,{p:()=>o});var i=n(411855),a=n(175290);function o(e){return i.createElement(a.Y,{height:200,verticalAlignItems:"center",horizontalAlignItems:"center"},e.children)}},151109:(e,r,n)=>{"use strict";n.d(r,{BZ:()=>a});var i=n(155367);i.J7.DASHBOARD,i.J7.WORKSPACES,i.J7.TEAMS,i.J7.MEMBERS,i.J7.ACTIVITY,i.J7.BILLING,i.J7.RESOURCES,i.J7.SETTINGS,i.J7.CONTENT;let a={[i.SN.ABANDONED_DRAFTS]:"org_admin_unassigned_drafts_onboarding_key",[i.SN.TEAMS]:"",[i.SN.WORKSPACES]:"",[i._d.APPROVED_PLUGINS]:"",[i._d.APPROVED_WIDGETS]:"",[i._d.LIBRARIES]:"",[i._d.SHARED_FONTS]:""}},314247:(e,r,n)=>{"use strict";n.d(r,{nj:()=>i});let i="admin_view_resource_tab"},785750:(e,r,n)=>{"use strict";n.d(r,{Ki:()=>T,f9:()=>w});var i=n(411855),a=n(786013);n(358145);var o=n(966712),s=n(915440),l=n(711525),c=n(586459),d=n(179940),u=n(837378),p=n(694687),m=n(279453),h=n(463592),_=n(916525),g=n(833030),f=n(851363),E=n(231959),y=n(791435),b=n(553405);let I=new h.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"owner.handle",weight:1},{name:"owner.email",weight:1}]});function T({searchQuery:e,filters:r,sortConfig:n,enabled:a=!0,membersMap:o,firstPageSize:d,isEndUserSurface:h=!1,orgId:_}){let{optimisticIds:g,addOptimisticIds:f,setServerData:E}=(0,u.K)(),{subscription:b,status:T}=function({searchQuery:e,filters:r,sortConfig:n,enabled:i=!0,firstPageSize:a,extraTeamIds:o=[],isEndUserSurface:l=!1,orgId:d}){let u=(0,p.dq)(),h=(0,s.Rs)(m.jl4,{orgId:d??u,firstPageSize:a||25,queryParams:w(e,r,n,l),extraTeamIds:o},{enabled:i}),_=c.r.LOADING;return"loaded"===h.status?_=c.r.SUCCESS:"errors"===h.status&&(_=c.r.FAILURE),{subscription:h,status:_}}({searchQuery:e,filters:r,sortConfig:n,enabled:a,firstPageSize:d,extraTeamIds:g,isEndUserSurface:h,orgId:_}),A=T===c.r.SUCCESS&&!b.data?.orgTeams?.isLoadingNextPage,N=A&&b.data?.orgTeams&&b.data.orgTeams.hasNextPage()?()=>{b.data.orgTeams.loadNext(d||25)}:void 0;i.useEffect(()=>{T===c.r.SUCCESS&&E((b.data?.orgTeams||[]).filter(e=>!!e.teamId).map(e=>({id:e.teamId})))},[T,b.data,E]);let C=i.useMemo(()=>{var e,n,i;return b.data?(e=b.data,n=o,i=r,(e.orgTeams||[]).filter(e=>!!e.team).map(e=>S(e.team,n,e.memberCount?Number(e.memberCount):null)).filter(e=>v(e,i))):[]},[b.data,o,r]),O=i.useMemo(()=>b.data?function(e,r,n,i){let a=(0,l.oA)(e.org),o=(a&&a.teamsByIdInAdmin.status===l.tT.Loaded?((0,l.oA)(a.teamsByIdInAdmin)||[]).map(e=>e.team):l.oA(e.org)?.teamsById||[]).map(e=>S(e,r)).filter(e=>v(e,n));return i?(I.set(o),I.search(i)):o}(b.data,o,r,e):[],[b.data,o,r,e]),{trackPerformanceEvent:L}=(0,y.S)("teams_table_fetch_performance","livegraph");return(0,i.useEffect)(()=>{L("fetch_end")},[L,C.length]),(0,i.useEffect)(()=>{T===c.r.FAILURE&&L("fetch_error")},[L,T]),(0,i.useEffect)(()=>{L("fetch_start")},[L]),{status:T,teams:C,optimisticTeams:O,fetchMore:N,allTeamsFetched:A&&!N,addOptimisticIds:f}}function v(e,r){let n=(0,o.kc)().teams_table_disable_fe_filters;return!(!n&&r?.orphanedTeamFilter&&e.owner||!n&&r?.teamMembershipFilter&&r.teamMembershipFilter!==e.userTeamMembership||!n&&r?.orgAccessFilter&&r.orgAccessFilter!==e.org_access||!n&&r?.discoverabilityFilter&&(r.discoverabilityFilter===f.Fb.ORG_BROWSABLE&&e.org_access!==a.bUL.PRIVATE||r.discoverabilityFilter===f.Fb.HIDDEN&&e.org_access!==a.bUL.SECRET)||r?.workspaceFilter&&(r.workspaceFilter===E.O&&null!==e.workspace_id||r.workspaceFilter!==E.O&&r.workspaceFilter!==e.workspace_id))}function S(e,r,n){let i=r[e.id]??0,a=l.oA(e.ownerRole)?.user??null;return{...e,id:e.id,created_at:e.createdAt?.toISOString(),img_url:e.imgUrl||void 0,org_id:e.orgId,name:e.name,description:e.description||"",hidden:e.hidden,org_browsable:e.orgBrowsable,license_group_id:e.licenseGroupId,workspace_id:e.workspaceId,org_access:e.orgAccess||null,projects:Number(e.projectsCount)||0,editors:Number(e.editorsCount)||0,restrictions_list:e.restrictionsList||null,subscription:e.subscription||null,subscription_raw:e._subscriptionRaw||null,stripe_customer_id:e.stripeCustomerId||null,student_team_at:e.studentTeamAt?.toISOString()||null,student_team_state:e.studentTeamState||f.kU.STUDENT_TEAM_NULL,student_autoverifying_team_at:e.studentAutoverifyingTeamAt?.toISOString()||null,student_team:!!e.studentTeamAt,pro_team:!1,org_team:!0,starter_team:e.isStarterTeam||!1,grace_period_end:e.gracePeriodEnd?.toISOString()||null,grace_period_type:e.gracePeriodType||null,last_upgraded_at:null,deleted_at:e.deletedAt?.toISOString()||null,experiment_seed:e.experimentSeed||null,license_group:null,default_permission:e.defaultPermission,vat_gst_id:e.vatGstId||void 0,tax_id_verification_status:e.taxIdVerificationStatus||void 0,ai_features_disabled:!!e.aiFeaturesDisabledAt,legal_name:e.legalName||null,sharing_audience_control:e.sharingAudienceControlComputed||void 0,orphaned:!a,member_count:"number"==typeof n?Math.max(n+i,0):void 0,owner:a&&{id:a.id,name:a.name||void 0,handle:a.handle||"",img_url:a.imgUrl||"",email:a.email||void 0,description:a.description,org_id:e.orgId||void 0},experiment_assignments:[],userTeamMembership:null===e.roleOnObjectTeamForUser?g.ig.NOT_JOINED:g.ig.JOINED}}function w(e,r,n,i){let a=(0,b.R)(r?.orgAccessFilter,r?.discoverabilityFilter);return String((0,d.lF)({...n&&{sort_by:n.columnName},...n&&{order_by:n.isReversed?_.dy.DESC:_.dy.ASC},...e&&{search_query:e},...a&&{org_access:a},...r?.orphanedTeamFilter&&{teams_without_owners:r.orphanedTeamFilter},...r?.teamMembershipFilter&&{member_of_filter:null!==r.teamMembershipFilter},...r?.teamMembershipFilter&&{teams_member_of:r.teamMembershipFilter===g.ig.JOINED},...r?.workspaceFilter&&{workspace_id:r.workspaceFilter},...i&&{is_end_user_surface:i}}))}},796933:(e,r,n)=>{"use strict";n.d(r,{RQ:()=>a,jU:()=>i}),n(713008);let i="organize-favorite-menu",a="team-link-context-menu"},787133:(e,r,n)=>{"use strict";n.d(r,{q:()=>o});var i=n(374626),a=n(320660);let o=(0,a.Q)(i.zl,"FileBrowser",(0,a.h)("filebrowser-loading-page",e=>{e.setAttribute("id",""),e.classList.remove("hidden"),e.classList.remove("fadeOut")}));o.useIsLoading},448484:(e,r,n)=>{"use strict";n.d(r,{K:()=>d});var i=n(411855),a=n(976999),o=n(762638),s=n(175290),l=n(809840),c=n(349410);function d(e){let r=(0,c.Cv)()();return i.createElement("div",{className:o.cx.if(e.showBorderBottom,o.cx.bb1.bSolid.colorBorder).if(e.hasHorizontalPadding,o.cx.px32).$},i.createElement(s.Y,{padding:{vertical:r?16:24},spacing:24,dataTestId:"admin-settings-header"},e.isLoading?i.createElement(a.Wi,{className:o.cx.w100.if(e.smallTitle,o.cx.h18,o.cx.h24).$,dataTestId:"admin-settings-header-shimmer"}):i.createElement(l.E,{fontSize:e.smallTitle?18:24,fontWeight:"regular"},e.title),e.leftActions,i.createElement(s.M,null),e.rightActions))}},896026:(e,r,n)=>{"use strict";n.d(r,{x:()=>i});let i="FILE_CREATION_OMNICREATE_DROPDOWN";var a=(e=>(e.DESIGN="RESOURCE_CREATION_DESIGN_OPTION",e.WHITEBOARD="RESOURCE_CREATION_WHITEBOARD_OPTION",e.SLIDES="RESOURCE_CREATION_SLIDES_OPTION",e.SITES="RESOURCE_CREATION_SITES_OPTION",e.IMPORT="RESOURCE_IMPORT_OPTION",e.COOPER="RESOURCE_CREATION_COOPER_OPTION",e))(a||{})},827294:(e,r,n)=>{"use strict";n.d(r,{S:()=>g});var i=n(411855),a=n(188507),o=n(946689),s=n(493323),l=n(939863),c=n(392592),d=n(63397),u=n(746058),p=n(237870),m=n(958985),h=n(488578),_=n(303546);function g(e){let{profileId:r,profileHandle:n,emptyStateText:p}=e,h=(0,a.wA)(),[g,f]=i.useState([]),[E,y]=i.useState(!1);i.useEffect(()=>{y(!0),u.s.getRestrictedProfiles({profileId:r}).then(({data:e})=>{f(e.meta),y(!1)})},[r]);let b=(e,r)=>{f(g.map(n=>n.id===e?{...n,is_restricted_by_current_user:r}:n))},I=(e,r)=>{b(e,r),h(c.F.enqueue({message:r?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{r?v(e):T(e)}}}))},T=r=>{h(d._8({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>I(r,!0)}))},v=r=>{h(d.dL({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>I(r,!1)}))},S=g&&g.length>0;if(!p&&!S)return i.createElement(i.Fragment,null);if(E)return i.createElement(s.kt,null);let w=S?i.createElement(i.Fragment,null,n?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:n}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):i.createElement(i.Fragment,null,p," ",(0,l.tx)("community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",{learnMoreLink:i.createElement(o.Us,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("general.learn_more"))})," "),A=i.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},i.createElement("div",{className:_.tB},g.map(e=>i.createElement(m.y,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?i.createElement(o.nR,{onClick:v.bind(null,e.id)},(0,l.tx)("community.comments.unrestrict")):i.createElement(o.$$,{onClick:T.bind(null,e.id)},(0,l.tx)("community.comments.restrict"))}))));return i.createElement(i.Fragment,null,i.createElement("div",{className:_.bV},(0,l.tx)("settings_tab.community_commenters_label")),w,A)}(0,p.Ju)(function(e){return i.createElement(h.aF,{className:_.Iy,popStack:!0},i.createElement(g,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},313231:(e,r,n)=>{"use strict";n.d(r,{t:()=>E});var i=n(411855),a=n(109388),o=n(188507),s=n(966712),l=n(860601),c=n(939863),d=n(796933),u=n(975988),p=n(54552),m=n(738269),h=n(723245),_=n(206074);let g=(e,r,n,i={})=>e?[{displayText:r||"",callback:n,...i}]:[],f=()=>{let e=(0,o.d4)(e=>e.dropdownShown);return e&&e?.type===d.jU?e:null};function E(e){let r=(0,o.wA)(),n=(0,o.d4)(e=>e.currentTeamId),d=(0,o.d4)(e=>e.currentUserOrgId),E=(0,o.d4)(e=>e.mobileNavShown),y=(0,o.d4)(e=>e.favorites.collapsedCustomSections),b=i.useMemo(()=>(0,h.t$)(e.sections,e.customSectionOrdering),[e.sections,e.customSectionOrdering]),I=f();if(null==I)return null;let{updateFavorite:T,resourceId:v,resourceType:S,isFavorited:w,currentSectionId:A}=e,N=function(e){let{dispatch:r,currentOrgId:n,currentTeamId:i,collapsedCustomSections:a,updateFavorite:o,resourceId:d,resourceType:h,isFavorited:_,currentSectionId:f,sections:E}=e,y=(e,i)=>{o(e,i),r(m.oB()),e&&i&&(a.delete(i),r(p.U6({collapsedCustomSections:a})),u.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:i},!0))},b=E.map(e=>({displayText:""===e.name?(0,c.t)("sidebar.starred"):e.name,isChecked:_&&f===e.id,alwaysShowCheckMarkOffset:!0,callback:()=>y(!(_&&f===e.id),e.id)})),I=[...g(_,null,l.lQ,{separator:!0}),...g(_,(0,c.t)("favorited_resources.remove_from_sidebar"),()=>y(!1))],T=i&&(0,s.kc)().ps_benchmark,v=[...g(!e.showFavoriteOptionsOnly&&!T,(0,c.t)("favorited_resources.create_a_new_section"),()=>{void 0===e.mobileNavShown||e.mobileNavShown||r(m.PY());let n=f?E.findIndex(e=>e.id===f):0;h&&r(p.to({movingResource:{resourceId:d,isFavorited:!0,resourceType:h}})),r(p.pS({newCustomSectionIndex:n})),r(m.oB())})],S=[{displayText:"",separator:!0}],w=E.find(e=>e.id===f),A=_?`${(0,c.t)("favorited_resources.indicate_section_prefix")}: ${w?.name||(0,c.t)("sidebar.starred")}`:(0,c.t)("favorited_resources.add_to_sidebar");return E.length>4?[{displayText:A,children:[...b,...S,...v]},...I]:[...g(!0,(0,c.t)("favorited_resources.add_to_sidebar"),l.lQ,{disabled:!0}),...b,...S,...I,...S,...v]}({dispatch:r,currentOrgId:d,currentTeamId:n,collapsedCustomSections:y,updateFavorite:T,resourceId:v,resourceType:S,isFavorited:w,currentSectionId:A,sections:b,mobileNavShown:E}),C=i.createElement(_.j,{items:N,parentRect:I.data.targetRect,showPoint:!!e.showPoint,lean:"right",recordingKey:"organize-favorited-dropdown",dispatch:r,onSelectItem:(e,n)=>{e.callback?.("",{},r,n)}});return(0,a.createPortal)(C,document.body)}},975988:(e,r,n)=>{"use strict";n.d(r,{CL:()=>c,Fp:()=>l});var i=n(286640);let a="sidebar-collapsed-sections";function o(e,r){return"custom"===e.id?e.type===r.type&&e.id===r.id&&e.orgId===r.orgId&&e.sectionId===r.sectionId:e.type===r.type&&e.id===r.id&&e.orgId===r.orgId}function s(){return(0,i.DN)().get(a)||[]}function l(e,r){let n=(0,i.DN)();s().find(r=>o(r,e))?r&&n.set(a,s().filter(r=>!o(r,e))):r||n.set(a,[...s(),e])}function c(){let e=new Set;return s().forEach(r=>{"custom"===r.id&&r.sectionId?e.add(r.sectionId):"favorited"===r.id&&e.add(r.id)}),e}},145586:(e,r,n)=>{"use strict";n.d(r,{W:()=>R});var i=n(411855),a=n(188507),o=n(91408),s=n(881388),l=n(939863),c=n(874109),d=n(297032),u=n(970516),p=n(738269),m=n(662275),h=n(492379),_=n(377090),g=n(688083),f=n(99506),E=n(937294),y=n(147206),b=n(428467),I=n(451e3),T=n(668860),v=n(851363),S=n(845213),w=n(206074),A=n(490184),N=n(725470),C=n(590564),O=n(860168),L=n(479686);function R({className:e,team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P}){let D=(0,a.d4)(e=>e.dropdownShown),k=(0,a.wA)(),M=(function(){let e=(0,a.d4)(e=>(0,b.getPermissionsState)(e)),r=(0,a.d4)(e=>e.selectedView),n=(0,a.d4)(e=>e.teamRoleRequests),w=(0,a.wA)();return({team:a,onRenameClick:R,onChangeTeamIconClick:P,teamRoleRequests:D})=>{let k=()=>{w(p.oB()),w(m.to({type:C.p,data:{teamId:a.id}}))},M=(0,_.GR)(w,a.id),F=e=>{w(m.to({type:A.$,data:{team:e}}))},x=(0,_.GR)(w,a.id,T.e6.ADMIN),U=(0,_.GR)(w,a.id,T.e6.OWNER),B=e=>{if(!D)return;let r=D[e.id].id;w(h.lT({requestId:r}))},V=e=>{w(m.to({type:C.p,data:{teamId:e.id}}))},G=()=>{w(p.oB());let e=!!a.org_id,r=e=>{w(m.to({type:N.H,data:{team:a,subscriptionStatus:e}}))};e?r(!0):S.$.getSubscriptionStatus({teamId:a.id}).then(({data:e})=>{r(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&w(s.s.error(e.data.message))})},H=e.roles.byTeamId[a.id]||{},W=Object.keys(H).filter(e=>!H[e].pending).length,K=(0,b.canAdminTeam)(a.id,e),j=a?.org_access===f.bU.PUBLIC||W>1,z=(0,b.hasAdminRoleAccessOnTeam)(a.id,e),Y=(0,y.R$)(e.user,e.currentUserOrgId),$=window.innerWidth<=(0,o.hG)(O.tgj),q=[{displayText:(0,l.t)("file_browser.copy_link"),callback:()=>{let e=(0,v.bL)(a.id,a.org_id);w(u.S({url:e}))}}];return"search"===r.view&&a.org_id!==e.currentUserOrgId||(a.canEditTeamContents&&$&&!Y&&q.push({displayText:(0,l.t)("file_browser.team.new_project"),callback:()=>{w((0,g.SX)({where:I.Ah.FolderListView,team:{...a,canAdmin:K}}))}}),$&&q.push({displayText:(0,l.t)("file_browser.team.invite"),callback:()=>{w(m.to({type:(0,c.T)(),data:{teamId:a.id,notifyOnSuccess:!0}}))}}),K&&q.push({displayText:(0,l.t)("team_view.toolbar.rename"),callback:()=>{w(p.oB()),R&&R(a)}}),K&&P&&q.push({displayText:(0,l.t)("team_view.toolbar.change_icon"),callback:()=>{w(p.oB()),P&&P(a)}}),q.push(...(()=>{let r=[];return((0,b.hasViewerRoleAccessOnTeam)(a.id,e)?j&&r.push({displayText:(0,l.t)("team_view.toolbar.leave_team"),callback:k}):a.org_id&&(0,E.YP)(a,n[a.id],e,a.org_id)!==E.gO.CLICK_JOIN&&r.push({displayText:"",render:()=>i.createElement(d.m,{key:"main-cta",className:L.M,onBypassRequestOverride:U,onJoin:M,onJoinRequestOverride:F,onJoinAsAdmin:x,onLeave:V,onWithdrawRequestForTeamOverride:B,team:a,useLinks:!0,isCardActive:!1})}),z&&r.push({displayText:(0,l.t)("team_view.toolbar.delete_team"),callback:G}),0===r.length)?[]:[{displayText:"",separator:!0},...r]})())),q}})()({team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P});return i.createElement(w.j,{className:e,items:M,parentRect:D?.data?.targetRect,showPoint:!1,lean:"right",dispatch:k,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},k,r)}})}},785598:(e,r,n)=>{"use strict";n.d(r,{$b:()=>U,h2:()=>B});var i=n(411855),a=n(188507),o=n(213599),s=n(915440),l=n(563706),c=n(762638),d=n(939863),u=n(67294),p=n(896474),m=n(796933),h=n(501217),_=n(145586),g=n(245675),f=n(386909),E=n(54552),y=n(738269),b=n(507877),I=n(662275),T=n(988022),v=n(594901),S=n(99506),w=n(279453),A=n(336599),N=n(982121),C=n(937294),O=n(428467),L=n(935938),R=n(498606),P=n(490184),D=n(127391),k=n(895782),M=n(660986),F=n(562128);function x(e){let r;let n=(0,a.wA)(),o=(0,a.d4)(e=>e.currentUserOrgId),s=(0,v.FC)(),w=(0,N.x)(),A=(0,a.d4)(e=>e.orgById),C=(0,a.d4)(({selectedView:e})=>e),x=(0,O.canMemberOrg)(e.team.org_id,s)&&e.team.org_access===S.bU.PUBLIC,U=(0,O.canManageNonSecretOrgTeam)(e.team,s,s.user?.id),B=e.canUserViewTeam??(e.isCurrentUserInTeam||x||U),[V,G]=i.useState(!1),H=e=>{n(I.to({type:P.$,data:{team:e}}))},W=()=>{if(!B){H(e.team);return}(0,T._J)("file_browser_team_click",e.team.id,s,{selectedView:"recentsAndSharing"===C.view?C.tab||L.G.RECENTLY_VIEWED:C.view,viewMode:"grid"}),n(b.kg({clickedResourceType:"team",resourceIdOrKey:e.team.id})),n(y.$T({view:"team",teamId:e.team.id}))},K=r=>{r.stopPropagation(),r.preventDefault(),e.setSelectedTeamId(e.team.id);let i={top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1};n(y.j7({type:m.RQ,data:{teamId:e.team.id,targetRect:i}}))},j=i.useCallback((r,i,a)=>{if(e.team){let o={team:e.team,entrypoint:"org_browse_teams_view",sectionId:a,favoriteId:i};r?n(E.DN(o)):n(E.ox(o))}},[n,e.team]),z="search"===C.view,Y=e.team.org_id&&A[e.team.org_id]||e.team.id&&w[e.team.id],$=(0,d.tx)("team_tile.members_count",{numMembers:e.memberCount}),q=i.createElement("div",{className:c.cx.flex.flexRow.itemsCenter.$},z&&Y&&i.createElement(D.H,{entityId:Y.id,entityName:Y.name,imgUrl:Y.img_url}),e.isCurrentUserInTeam&&i.createElement(i.Fragment,null,(0,d.tx)("team_list.org_join_status_joined"),i.createElement("span",null,"\xa0\xb7\xa0")),$),Z=e.selectedTeamId===e.team.id,X=i.createElement(k.W,{team:e.team,isCurrentUserInTeam:e.isCurrentUserInTeam,isLoading:e.isLoading,onOpenTeam:W,onJoin:e.onJoin,onLeave:e.onLeave,spinnerClassName:M.Ys,isCardActive:V||Z,onClickButton:e.setSelectedTeamId}),J=i.createElement("div",{className:c.cx.flex.$},X,o&&B&&i.createElement(f.r,{setFavorite:j,favoriteType:S.bk.TEAM,resourceId:e.team.id,size:f.m.MEDIUM,containerStyle:M.is,noHoverState:!0,orgId:e.team.org_id}));e.team.org_access===S.bU.PRIVATE?r=(0,d.t)("file_browser.team_header.closed_team_header"):e.team.org_access===S.bU.SECRET&&(r=(0,d.t)("file_browser.team_header.secret_team_header"));let Q=e.team.org_access===S.bU.PRIVATE?(0,d.t)("file_browser.team_header.closed_team_subtitle"):e.team.org_access===S.bU.SECRET?(0,d.t)("file_browser.team_header.secret_team_subtitle"):void 0,ee=e.team.org_access===S.bU.PRIVATE||e.team.org_access===S.bU.SECRET?i.createElement("div",{className:c.cx.mr4.$,style:{marginLeft:"4px"},"data-tooltip-type":R.Ib.TEXT,"data-tooltip":r,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,"data-tooltip-subtext":Q},i.createElement(p.In,{icon:"lock-16"})):void 0;return i.createElement(i.Fragment,null,i.createElement(g.a,{name:e.team.name,onContextMenu:e=>{K(e)},headerLeft:i.createElement(u.nl,{team:e.team,size:40,avatarSvg:F.A}),onMouseOver:()=>{G(!0)},titleSubtitleRight:ee,onMouseOut:()=>{G(!1)},isSelected:Z,headerRight:J,footerLeft:q,isCardActive:V||Z,onClick:r=>{2===r.detail||l.Ay.mobile||l.Ay.tablet?W():1===r.detail&&e.setSelectedTeamId(e.team.id)},canView:B}),e.dropdownTeamId===e.team.id&&i.createElement("div",{className:c.cx.fixed.$},i.createElement(_.W,{team:{...e.team,canEdit:!1,canEditTeamContents:!1},onRenameClick:e=>{n(I.to({type:(0,h.h)(),data:{team:e}}))}})))}function U(e){let r=e.team,n=(0,s.Rs)(w.y_L,{teamId:r.id}),a=!1,l=!1;if("loaded"===n.status&&n.data?.team){let e=(0,o.c)(n.data.team);a=e.canView,l=e.isInTeam}return i.createElement("div",null,i.createElement(B,{...e,team:r,canUserViewTeam:a,isCurrentUserInTeam:l}))}(0,a.Ng)((e,r)=>{let n=e.user,i=r.team&&r.team.top_members&&r.team.top_members.filter(e=>!e.pending);return{isCurrentUserInTeam:(0,O.hasViewerRoleAccessOnTeam)(r.team.id,e),currentUser:n,memberCount:r.team.member_count??0,topMembers:i||[],isLoading:(0,A.VP)(e.loadingState,(0,C.p9)(r.team.id)),dropdownTeamId:e.dropdownShown?.type===m.RQ?e.dropdownShown?.data?.teamId:void 0}})(x);let B=x},119735:(e,r,n)=>{"use strict";n.d(r,{AH:()=>f,GI:()=>b,J_:()=>g,KR:()=>T,pH:()=>y});var i=n(411855),a=n(188507),o=n(915440),s=n(391388),l=n(218881),c=n(881388),d=n(939863),u=n(635344),p=n(662275);n(477782);var m=n(860178),h=n(801387),_=n(279453);function g(){let{getConfig:e}=(0,l.I7)("exp_file_browser_workspace_pinning");return i.useCallback(()=>!!e().getValue("enabled",!1),[e])}let f="workspace";function E(e,r){let n=Array.from(e.keys()),i=Array.from(r.keys());return n.length===i.length&&n.every(n=>(0,a.bN)(e.get(n),r.get(n)))}function y(e,r={}){let n=function(e,r={}){let n=(0,m.TA)(),l=(0,a.d4)(e=>e.currentUserOrgId),c=i.useMemo(()=>e.map(e=>({fileKey:e,orgId:l})),[e,l]),d=(0,o.p)(_.PG0,c,r),u=(0,h.Au)(l),p=s.Qw.all([u,...d.map(e=>e.result)]);return s.Qw.useTransform(p,([r,...i])=>{let a=new Map;return i.forEach((i,o)=>{let{file:s}=i,c=e[o],d=s?.team?.workspace??null;if(!l||!s||!d){a.set(c,null);return}let u=d.pinnedFiles,p=u?.find(e=>e.file?.key===c),m=!!u&&u.length>=I,h=!!r&&r===d.id,_=d.canAdmin,g=p?.creator?.id===n,f=!p&&(h||_)&&(s.canPinToWorkspace||s.canEdit),E=f&&!m,y=p&&(g||_);if(f){a.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:m});return}if(y){a.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!0,existingFilePinId:p.id,workspaceHasMaxPins:m});return}a.set(c,{shouldShowPinFileToWorkspaceAction:!1,canPinFileToWorkspace:!1,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:m})}),a},E)}(i.useMemo(()=>e?[e]:[],[e]),r);return s.Qw.useTransformShallowEqual(n,r=>r.get(e??""))}function b(e){let r=(0,a.wA)();return i.useCallback((n,i)=>{if(i){r(c.s.error((0,d.t)("file_browser.pinning.add_pin_error_max_pins",{maxNumWorkspacePins:I})));return}r(p.to({type:(0,u.a)(),data:{fileKey:n,source:e}}))},[r,e])}let I=8;function T(e){return{created_at:e.createdAt.toDateString(),creator_id:e.creatorId,description:e.description,edit_url:e.editUrl,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,key:e.key,link_access:e.linkAccess,name:e.name,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,team_id:e.teamId,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,thumbnail_guid:e.thumbnailGuid,client_meta:e.clientMeta,deleted_at:e.deletedAt?.toDateString()??null,trashed_at:e.trashedAt?.toDateString()??null,trashed_user_id:e.trashedUserId,license:e.license,prototype_url:e.prototypeUrl,file_repo_id:e.fileRepoId,editor_type:e.editorType,touched_at:e.touchedAt,url:e.url,updated_at:e.updatedAt.toDateString(),source_file_key:e.sourceFileKey,is_try_file:e.isTryFile}}},743905:(e,r,n)=>{"use strict";n.d(r,{De:()=>u.D,G4:()=>E,v2:()=>f,U2:()=>D.U2,T1:()=>w,LK:()=>p.L,Hl:()=>C,hO:()=>i.h,d3:()=>y,eQ:()=>b,SW:()=>A,ni:()=>P,uZ:()=>T,yt:()=>N,m1:()=>v,cN:()=>D.cN});var i=n(230047),a=n(634832),o=n(776250),s=n(374626),l=n(743282),c=n(572206),d=n(719624),u=n(720241),p=n(398029),m=n(931770),h=n(516703),_=n(967409),g=n(725902);let f="FRAGMENT_SEARCH_PEEK_MODAL";var E=(e=>(e.ACTIONS_LIST="actions_list",e.ACTIONS_SEARCH_BAR_ICON="actions_search_bar_icon",e.ACTIONS_VISUAL_SEARCH_PROMPT="actions_visual_search_prompt",e.ACTIONS_VISUAL_SEARCH_VIEW="actions_visual_search_view",e.ACTIONS_ASSETS_TAB="actions_assets_tab",e.ACTIONS_ASSETS_TAB_DETAIL="actions_assets_tab_detail",e.EDITOR_CONTEXT_MENU="editor_context_menu",e))(E||{});function y(e,r,n,i,o,s,l){return i?{entry_point:e,session_id:r,search_id:n,query_type:function(e){switch(e.type){case"input-text":return"text";case"input-selection":return"selection";case"input-image":return"image";default:(0,a.assertNever)(e)}}(i),query_text:"input-text"===i.type?i.value:void 0,query_node_id:"input-selection"===i.type?i.node.guid:void 0,query_is_image_selection:function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return(0,h.A)(e.node)||1===e.node.childrenNodes.length&&(0,h.A)(e.node.childrenNodes[0]);default:(0,a.assertNever)(e)}}(i),query_file_key:i.file_key,...function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return{query_width:e.node.absoluteBoundingBox.w,query_height:e.node.absoluteBoundingBox.h};default:(0,a.assertNever)(e)}}(i),...I(s),is_in_preview:o,is_community_fragment_search:l}:{entry_point:e,session_id:r,search_id:n,is_in_preview:o,...I(s),is_community_fragment_search:l}}function b(e){switch(e){case"percent_match":return"relevance";case"last_modified":return"last_modified";case void 0:return;default:(0,a.assertNever)(e)}}function I(e){return e&&e.searchModelType===_.uH.FILES?{filterFolderIds:e.folderIds,filterTeamIds:e.teamIds,filterCreatorIds:e.creatorIds}:null}function T(e){return e?.type===f}function v(e,r=378){let n=Math.min(e.x,e.y);if(n>r){let i=r/n;return new c.Mi(e.x*i,e.y*i)}return e}var S=(e=>(e.FragmentSearch="fragment-search",e.GPT="gpt-vision",e))(S||{});function w(e,r="fragment-search"){let n;n="fragment-search"===r?v(new c.Mi(e.size.x,e.size.y)):v(function(e,r){let n=Math.max(e.x,e.y);if(n>2048){let r=2048/n;return new c.Mi(e.x*r,e.y*r)}return e}(new c.Mi(e.size.x,e.size.y),0),768);let i=(0,m._G)(n,e.guid,!0,void 0,!1,!0);return i&&i.pixels&&i.pixelSize&&i.displaySize&&(0,m.Pv)(i.pixels,i.pixelSize).split(";base64,").pop()||null}async function A(e,r,n){return r.x!==e.width||r.y!==e.height?{type:"image",value:function(e,r){let n=document.createElement("canvas"),i=n.getContext("2d");n.width=r.x,n.height=r.y,i?.drawImage(e,0,0,r.x,r.y);let a=n.toDataURL("image/png").split(",");if(a.length>=2)return a[1];throw Error("Invalid data URL format")}(e,r)}:{type:"image",value:await (0,g.t)(n)}}function N(e){return new Promise((r,n)=>{let i=document.createElement("img"),a=URL.createObjectURL(e);i.onload=()=>{r(i),URL.revokeObjectURL(a)},i.onerror=e=>{n(e),URL.revokeObjectURL(a)},i.src=a})}async function C(e,r,n,c,u,p){let m=(0,l.g)(),h=Date.now(),_=y(r,s.zl.get(d.dd),m,e,!1,n,p);i.h.setFragmentSearchLoading(m,e,c,p,u),(0,o.sx)("Fragment search query",_);try{let r=[];switch(e.type){case"input-image":r=await L(e,n,u,p);break;case"input-text":r=await R(e,n,u,p);break;case"input-selection":r=await O(e,n,u,p);break;default:(0,a.assertNever)(e)}let s=[];if(s=p?r.map(e=>({...e,type:"hub-file-fragment"})):r.map(e=>({...e,type:"fig-file-fragment"})),i.h.getSearchId(p)!==m)return;(0,o.sx)("Fragment search time to load",{..._,elapsed_time:Date.now()-h}),(0,o.sx)("Fragment search result",{..._,count:r.length}),i.h.setFragmentSearchResults(m,s,p)}catch(e){if(i.h.getSearchId(p)!==m)return;i.h.setFragmentSearchError(m,e,p)}}async function O(e,r,n,i){let{node:a,file_key:o}=e,s=w(a);if(!s)throw Error("Failed to export thumbnail");return(await u.D.postFragmentSearch({type:"image",value:s},o,r,n,i)).data.meta.results}async function L(e,r,n,i){let a=await N(e.imageFile),o=v(new c.Mi(a.width,a.height)),s=await A(a,o,e.imageFile);return(await u.D.postFragmentSearch(s,e.file_key,r,n,i)).data.meta.results}async function R(e,r,n,i){return(await u.D.postFragmentSearch({type:"text",value:e.value},e.file_key,r,n,i)).data.meta.results}async function P(e,r){let n=(await u.D.getFragmentData({file_key:r,node_id:e.guid})).data.meta.results;p.L.setIndexedFragmentData(n)}var D=n(657123)},55710:(e,r,n)=>{"use strict";n.d(r,{l1:()=>eE.l,_3:()=>W}),n(185392),n(131363);var i=n(411855),a=n(188507),o=n(634832),s=n(730371),l=n(563706),c=n(434792),d=n(445092),u=n(336599),p=n(967409),m=n(671653),h=n(582801),_=n(629019),g=n.n(_),f=n(915440),E=n(135876),y=n(574176),b=n(762638),I=n(939863),T=n(90898),v=n(11861),S=n(723245),w=n(279453),A=n(294662),N=n(83427),C=n(289784),O=n(378124),L=n(211599),R=n(614916),P=n(224618),D=n(377509),k=n(927092),M=n(117688),F=n(236705),x=n(83958),U=n(505422);let B={[p.uH.HUB_FILES]:M.A,[p.uH.PUBLIC_PLUGINS]:F.A,[p.uH.PRIVATE_PLUGINS]:null,[p.uH.PUBLIC_PROFILES]:k.A,[p.uH.FILES]:null,[p.uH.PROJECTS]:null,[p.uH.TEAMS]:null,[p.uH.USERS]:null,[p.uH.PUBLIC_WIDGETS]:x.A,[p.uH.PRIVATE_WIDGETS]:null},V={[p.uH.PUBLIC_PLUGINS]:O.Of,[p.uH.PRIVATE_PLUGINS]:C.Of,[p.uH.PUBLIC_PROFILES]:D.hP,[p.uH.PUBLIC_WIDGETS]:L.nD.listStyle,[p.uH.PRIVATE_WIDGETS]:L.uB.listStyle};class G extends i.Component{componentDidMount(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),A.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}componentDidUpdate(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),A.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}renderContent(){let e=this.props.viewMode===m.XU.LIST?V[this.props.searchModelType]??D.p_:this.props.searchModelType!==p.uH.FILES?D.Vg:void 0;e+=this.props.isLoggedIn?` ${D.Vz}`:"";let r=this.props.didSucceed&&0===this.props.searchResults.length;return i.createElement(E.x,{isLoading:this.props.isLoading,className:D.g4},()=>this.props.didFail?i.createElement(W,{illustration:U.A,resourceTypeDisplayString:this.props.failureMessage||(0,I.t)("search.search_model_type.search_error"),searchModelType:this.props.searchModelType,query:null,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):r?i.createElement(W,{illustration:B[this.props.searchModelType],resourceTypeDisplayString:(0,p.hf)(this.props.searchModelType),searchModelType:this.props.searchModelType,query:this.props.query,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):i.createElement("div",{className:D.sb},i.createElement("div",{className:e},i.createElement(R.L,{searchModelType:this.props.searchModelType,searchResults:this.props.searchResults,viewMode:this.props.viewMode,planFilter:this.props.planFilter}))))}renderProjectContextMenu(){let e=(0,T.H)(this.props.dropdownShown);return(0,S.D6)(this.props.currentOrgId)&&e&&i.createElement(v.p,{folder:e,useLGPerms:!0})}render(){let e=this.props.searchModelType===p.uH.FILES?void 0:this.props.viewMode===m.XU.LIST?D.UL:D.G2;return i.createElement(N.Q0,{isDropdown:!1,...this.props},i.createElement("div",{className:e},this.renderContent()),this.props.searchModelType===p.uH.PROJECTS&&this.renderProjectContextMenu())}}G.displayName="SearchResultView";let H=(0,a.Ng)((e,r)=>({viewMode:(0,P.z[r.searchModelType])(e.search.parameters,e.viewBarViewModeOptionByView).viewMode,isLoggedIn:!!e.user,search:e.search,activeWorkspaceFilter:e.search.parameters.workspaceFilter,activePlan:e.search.parameters.planFilter,dropdownShown:e.dropdownShown,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView}),(e,r)=>({onResetWorkspaceFilter:()=>{e(d.HI({}))},setSearchLastAckedQueryId:r=>{e(d.ej({lastAckedQueryId:r}))},setLastLoadedQuery:(r,n,i)=>{e(d.w2({sessionId:r,query:n,queryId:i}))}}))(G);function W(e){let{query:r,resourceTypeDisplayString:n}=e,o=(0,a.d4)(e=>e.currentUserOrgId),s="NON_ORG_TEAMS"!==e.activePlan&&e.activePlan||o,l=(0,f.Rs)(w.N63,{orgId:s??null}),c=i.useMemo(()=>"loaded"===l.status?l.data?.org?.workspaces:[],[l]),d=c?.find(r=>null!=e.activeWorkspaceFilter&&r.id===e.activeWorkspaceFilter),u=e.onResetWorkspaceFilter,p=i.useMemo(()=>i.createElement(i.Fragment,null,n,null!==r?i.createElement(i.Fragment,null,"\xa0",i.createElement("span",{className:D.xV},r)):null,null!=d&&i.createElement(i.Fragment,null," in the ",i.createElement("span",{className:D.xV},d.name)," workspace",i.createElement("div",{className:g()(b.cx.pt16.$,D.YF),onClick:()=>{u&&u()},role:"button",tabIndex:0},(0,I.tx)("search.empty_state.try_searching_whole_org")))),[r,u,d,n]);return i.createElement("div",{className:D.p$},e.illustration&&i.createElement(y.B,{className:D.IC,svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("div",{className:D.jI},i.createElement("span",{className:D.q6},p)),e.cta?i.createElement("div",{className:D.Ki},e.cta):null)}W.displayName="SearchResultEmptyState";class K extends i.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>d.$P.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>u.VP(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>u.GH(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>u.aF(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>u.Fl(this.props.loadingStateFailureReasons,this.getLoadingKey());let r=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:r}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===p.uH.FILES){let r=e.searchResults??j,n=this.props.searchResults??j,i=r.length!==n.length;if(!i)for(let e=0;e<r.length;e++)(0,s.deepEquals)(r[e],n[e])||(i=!0);if(i){let e=this.getFilteredResults(n,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,r){return this.props.searchModelType===p.uH.FILES?e.filter(e=>{let n=e.model;switch(r.filters.fileType){case m.t2.ANY:return!0;case m.t2.DESIGN:return"design"===n.editor_type;case m.t2.FIGJAM:return"whiteboard"===n.editor_type;case m.t2.SITES:return"sites"===n.editor_type;case m.t2.SLIDES:return"slides"===n.editor_type;case m.t2.PROTOTYPE:return!1;default:(0,o.assertNever)(r.filters.fileType)}}):e}render(){let e=this.props.searchResults??j,r=this.getFilteredResults(e,this.props.sortFilterConfig);return i.createElement(c.r,{key:"unified-search",toolbar:l.Ay.mobile?i.createElement(h.o,null):void 0,viewbar:i.createElement(P.Z,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:i.createElement(H,{searchResults:r,searchScope:this.props.parameters.searchScope,searchModelType:this.props.searchModelType,sortState:this.props.parameters.sortState,onChangeSortState:this.props.onChangeSortState,isLoading:this.isLoading(),didSucceed:this.didSucceed(),didFail:this.didFail(),failureMessage:this.getFailedReason(),query:this.props.completedQuery,planFilter:this.props.parameters.planFilter})})}}K.displayName="SearchPageView";let j=[];(0,a.Ng)((e,r)=>{let n=e.search.parameters,i=e.search.responses[r.searchModelType];return{parameters:n,completedQuery:e.search.completedQueries[r.searchModelType],searchResults:i?.results||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search}},e=>({onChangeSortState:r=>{e(d.qv({sortState:r}))},setScrollTop:r=>{e(d.PP({top:r}))}}))(K);var z=n(320063);n(564577),n(67833);var Y=n(659838),$=n(32863);n(676967),n(56691),n(944682),n(798184),n(112235),n(132135);var q=n(639685),Z=n(630834);i.forwardRef((e,r)=>{let{onFocus:n,clearSearch:a}=e,{searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onBlur:d,onSearchKeyDown:u,onSearchChange:p}=(0,$.ne)(e,r),m=(0,i.useCallback)(()=>{o.current&&(o.current.focus({preventScroll:!0}),n&&n(!0))},[o,n]);return(0,z.h)(m),(0,i.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&(a(),m())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[a,m]),i.createElement("form",{onSubmit:e.onSubmitInput},i.createElement("div",{className:"search_bar--searchContainer--4S7vX",onMouseDown:e=>{s(e),e.stopPropagation(),e.target.matches("input")||e.preventDefault()},onMouseUp:l,role:"presentation"},i.createElement(y.B,{className:"search_bar--searchIcon--V3JlY",svg:q.A}),i.createElement(Y.L,{ref:o,placeholder:(0,I.t)("desktop_new_tab.search.search_files_placeholder"),className:"search_bar--searchInput--8MwKl text--fontPos13--xW8hS text--_fontBase--QdLsd",value:e.query,onBlur:d,onChange:p,onKeyDown:u,spellCheck:!1}),!!e.query&&i.createElement(y.B,{className:"search_bar--xIcon--XpjH6",svg:Z.default,onClick:c})))});var X=n(91408),J=n(723325);n(896474),n(743905),n(662275),n(611978);var Q=n(607851);n(358841);var ee=n(777627),et=n(374626),er=n(827586),en=n(582064),ei=n(237870),ea=n(488578),eo=n(63884),es=n(990328),el=n(112254),ec=n(664587),ed=n(11073),eu=n(915995),ep=n(550163),em=n(4508),eh=n(860168),e_=n(608721);let eg=(0,X.jz)(eh.RAo),ef=(0,X.jz)(eh.aIx);(0,ei.Ju)(function(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.modalShown),n=(0,a.d4)(e=>e.search.sessionId),o=(0,et.md)(ep.Q),[s,l]=(0,et.fp)(Q.z5),c=(0,et.md)(Q.L8),d=(0,eu.A)();i.useEffect(()=>()=>{n&&A.vj.Session.searchModalExit(n)},[n]);let u=i.useCallback(()=>{e(en.ky()),s&&(l(null),d(p.uR.DROPDOWN,s))},[e,l,s,d]);if(!r)return null;let m=r.data.width?{width:`${r.data.width-2*eg}px`}:void 0;return i.createElement(ea.aF,{absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${eg}px 0`,size:r.data.width??ef,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:u,popStack:!0,"data-testid":"facetedSearchModal"},i.createElement(J.dP,null,i.createElement(ec.a3.Provider,{value:ec.Vm.PREVIEW},i.createElement("div",{className:e_.PP,style:m},i.createElement(ee.Y,{hideSearchPreview:r.data?.hideSearchPreview})),i.createElement(er.P,{className:e_.xx},s&&i.createElement("div",{className:e_.v$},i.createElement(eo.s,{facetType:s,id:"facet-panel",path:[3]})),i.createElement(ed.L,{id:"suggestions",path:[4]}),r.data.hideSearchPreview?null:o||c.length>0?i.createElement(el.j,{id:"search-results",path:[5]}):i.createElement(es.n,{id:"recents",path:[5]})))))},em.r),n(207202),(0,X.jz)(eh.RAo),n(268537),n(738269),n(128751),n(860178),n(99506),n(720488),n(715621),n(618308),n(135532);var eE=n(30676)},30676:(e,r,n)=>{"use strict";n.d(r,{l:()=>T});var i=n(411855),a=n(188507),o=n(374626),s=n(574176),l=n(762638),c=n(939863),d=n(607851),u=n(267177),p=n(63884),m=n(190256),h=n(915995),_=n(163172),g=n(738269),f=n(128751),E=n(967409),y=n(572824),b=n(112512);let I=e=>{switch(e){case E.WY.RESOURCE:return(0,c.tx)("search.preview_section.all_files");case E.WY.CREATOR:return(0,c.tx)("search.facets.created_by",{creator:(0,c.t)("search.facets.anyone")});case E.WY.SPACE:return(0,c.tx)("search.facets.space",{space:(0,c.t)("search.facets.all_spaces")});default:return""}};function T({dropdownId:e,facetType:r,containerRef:n,hasQuickActionsStyling:c}){let T=(0,a.wA)(),v=i.useRef(null),S=(0,a.d4)(e=>e.dropdownShown),w=S?.type===e,A=(0,o.md)((0,d.l4)(r??null)),N=(0,m.f)(),C=(0,h.A)(),O=E.uR.DROPDOWN,L=c?l.cx.relative.lhNormal.flex.h24.bRadius4.px8.py4.b1.colorBorder.fontMedium.$:y.P2,R=c?l.cx.ml8.flex.itemsCenter.$:y.dN;return i.createElement("div",{className:L,onMouseDown:n=>{n.stopPropagation(),T(f.an()),w?(T(g.oB()),C(O,r)):v.current&&(n.preventDefault(),T(g.j7({type:e,data:{facetType:r,targetRect:v.current.getBoundingClientRect()}})),N(O,r))},onClick:e=>e.stopPropagation(),role:"button",tabIndex:-1},i.createElement("span",{ref:v},!A||(0,u.II)(A)?I(r):(0,u.yA)(A)),i.createElement("div",{className:R},i.createElement(s.B,{svg:b.A,className:`${y.OW} ${w?y.iw:""}`})),w&&i.createElement(_.G,{dropdownId:e,dropdownChild:i.createElement(p.s,{facetType:r,id:"",path:[]}),containerRef:n,limitHeight:c}))}},207202:(e,r,n)=>{"use strict";n(411855),n(188507),n(445092),n(697551),n(428467),n(967409)},185392:(e,r,n)=>{"use strict";n.d(r,{lV:()=>O,ye:()=>M,wA:()=>R,D$:()=>L});var i=n(411855),a=n(188507),o=n(634832),s=n(776250),l=n(966712),c=n(268537),d=n(574176),u=n(762638),p=n(939863);n(67294);var m=n(30676),h=n(433934),_=n(163172),g=n(738269),f=n(445092),E=n(128751);n(988022),n(161325),n(860178),n(99506),n(935938);var y=n(967409),b=n(671653),I=n(720488),T=n(170588),v=n(127391);n(269135);var S=n(872429),w=n(388327),A=n(112512);let N=c.wv;class C extends i.PureComponent{render(){let e="deletedFiles"===this.props.selectedView.view,r=this.props.options.tileSortFilterConfig.viewMode===b.XU.LIST;return i.createElement("div",{className:"tile_sort_filter--dropdownCollectionContainer--Dnyyh"},e&&i.createElement(D,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),i.createElement(M,{config:this.props.options.tileSortFilterConfig}),!r&&!this.props.hideSortMenu&&i.createElement(F,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),r&&i.createElement(T.z,{query:"(max-width: 1120px)"},i.createElement(F,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu})))}}function O(e){let r=(0,a.d4)(e=>e.teams),n=(0,a.d4)(e=>e.orgById);if(!e.planOption?.plan_id)return null;let o="org"===e.planOption.plan_type&&e.planOption.plan_id?n[e.planOption.plan_id]?.img_url:r[e.planOption.plan_id]?.img_url;return i.createElement("div",{className:u.cx.flex.itemsCenter.$},i.createElement(v.H,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:o}))}C.displayName="TileSortFilter";let L={values:[b.ue.ASC,b.ue.DESC],valuesToDisplayText:(e,r)=>{switch(e){case b.ue.ASC:switch(r){case b.rR.TIME:return(0,p.t)("tile.sort_filter.sort_direction_oldest_first");case b.rR.ALPHABETICAL:return(0,p.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,p.t)("tile.sort_filter.sort_direction_ascending")}case b.ue.DESC:switch(r){case b.rR.TIME:return(0,p.t)("tile.sort_filter.sort_direction_newest_first");case b.rR.ALPHABETICAL:return(0,p.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,p.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.assertNever)(e)}}};function R(e){let r=(0,a.wA)(),n=(0,i.useRef)(null),o=(0,a.d4)(e=>e.dropdownShown),l=o?.type===e.dropdownId,u=(0,a.d4)(e=>e.selectedView),m=e=>{e.stopPropagation()},f=i=>{r(E.an()),l?r(g.oB()):n.current&&r(g.j7({type:e.dropdownId,data:{targetRect:n.current.getBoundingClientRect()}})),m(i)},y=()=>{l&&r(g.oB())},T=r=>e.includeSortDirection,v=e.disabled?"tile_sort_filter--dropdownContainerDisabled--lYOaX tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd":"tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd",S=(r,n)=>{(0,s.sx)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${r}`,model:`${e.searchModelType}`,dir:n===b.ue.ASC?"asc":n===b.ue.DESC?"desc":void 0}),e.onChange(r,n)},C=i.createElement(_.G,{dropdownId:e.dropdownId,dropdownChild:i.createElement(h.j,{checkedValue:e.checkedValue,currentDirection:e.includeSortDirection?e.currentDirection:null,tileSortValues:e.includeSortDirection?e.tileSortValues:[],dirValuesToDisplayText:L.valuesToDisplayText,values:e.values,valuesToDisplayText:e.valuesToDisplayText,onChange:e.onChange})}),O=l?i.createElement(I.Cf,{targetRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile,lean:"right",leanPadding:0,maxHeight:e.maxHeight},!e.hideSortOptionLabel&&i.createElement(c.MM,{checked:!1,disabled:!0},(0,p.tx)("tile.sort_filter.sort_by_label")),e.values.map(r=>i.createElement(c.rr,{key:r,checked:r===e.checkedValue,onClick:()=>{y(),S(r)},children:e.valuesToDisplayText[r]})),e.includeSortDirection&&i.createElement(i.Fragment,null,i.createElement(N,null),i.createElement(c.MM,{checked:!1,disabled:!0},(0,p.tx)("tile.sort_filter.order_label")),e.tileSortValues.map(r=>T(e.checkedValue)&&i.createElement(c.rr,{key:L.valuesToDisplayText(r,(0,w.E)(e.checkedValue)),checked:e.currentDirection===r,onClick:()=>{y(),S(e.checkedValue,r)},children:L.valuesToDisplayText(r,(0,w.E)(e.checkedValue))})))):null;return e.isMobile?O:i.createElement("div",{className:`${v} ${e.className||""}`,onClick:e=>{m(e),f(e)}},i.createElement("span",{ref:n},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),i.createElement("div",{className:"tile_sort_filter--caretContainer--kkZQq"},i.createElement(d.B,{svg:A.A,className:`tile_sort_filter--caret--AJHA9 ${l?"tile_sort_filter--caretDown--hIOid":""}`})),l?"search"===u.view?C:O:null)}let P={dropdownId:"tile-filter-creator-dropdown",values:[b.rJ.ANY,b.rJ.SELF,b.rJ.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[b.rJ.ANY]:(0,p.tx)("tile.sort_filter.created_by_anyone"),[b.rJ.SELF]:(0,p.tx)("tile.sort_filter.created_by_you"),[b.rJ.OTHER]:(0,p.tx)("tile.sort_filter.created_by_others")}};class D extends i.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let r=this.props.options.tileSortFilterConfig,n={...r,filters:{...r.filters,creator:e}};this.props.dispatch(g.JF({selectedView:this.props.selectedView,config:n}))}}render(){return i.createElement(R,{dropdownId:P.dropdownId,values:P.values,textWhenClosedPrefix:P.textWhenClosedPrefix,valuesToDisplayText:P.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}D.displayName="TileFilterCreatorDropdown";let k={dropdownId:"tile-filter-file-type-dropdown",values:[b.t2.ANY,b.t2.DESIGN,b.t2.FIGJAM],valuesToDisplayText:{[b.t2.ANY]:(0,p.tx)("tile.sort_filter.filter_by_all_files"),[b.t2.DESIGN]:(0,p.tx)("tile.sort_filter.filter_by_design_files"),[b.t2.FIGJAM]:(0,p.tx)("tile.sort_filter.filter_by_figjam_files"),[b.t2.PROTOTYPE]:(0,p.tx)("tile.sort_filter.filter_by_prototype_files"),[b.t2.SITES]:(0,p.tx)("tile.sort_filter.filter_by_sites_files"),[b.t2.SLIDES]:(0,p.tx)("tile.sort_filter.filter_by_slides_files")}};function M(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.selectedView),o="search"===n.view,s=(0,S.oz)(),c="recentFiles"===n.view||"sharedWithYou"===n.view||"recentsAndSharing"===n.view,d=k.values;return(d=(0,l.kc)().piper?d.concat([b.t2.SLIDES]):d,d=c?d.concat([b.t2.PROTOTYPE]):d,d=s?d.concat([b.t2.SITES]):d,"search"===n.view)?i.createElement(m.l,{dropdownId:"full-search-results-resource-facet-dropdown",facetType:y.WY.RESOURCE}):i.createElement(R,{dropdownId:k.dropdownId,values:d,valuesToDisplayText:k.valuesToDisplayText,includeSortDirection:!1,checkedValue:e.config.filters.fileType,onChange:i=>{let a={...e.config,filters:{...e.config.filters,fileType:i}};o&&r(f.Rz({fileTypeFilter:i})),r(g.JF({selectedView:n,config:a,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile})}class F extends i.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>({[b.C0.NAME]:b.ue.ASC,[b.C0.CREATED_AT]:b.ue.DESC,[b.C0.TOUCHED_AT]:b.ue.DESC,[b.C0.TRASHED_AT]:b.ue.DESC,[b.C0.SEARCH_RELEVANCE]:b.ue.DESC,[b.C0.PROJECT_NAME]:b.ue.ASC,[b.C0.ACCESSED_AT]:b.ue.DESC,[b.C0.SHARED_AT]:b.ue.DESC,[b.C0.OWNER]:b.ue.DESC})[e]||b.ue.ASC,this.onChange=(e,r)=>{let n=this.props.options.tileSortFilterConfig,i=void 0===r?this.getDefaultSortOrder(e):r,a={...n,sort:{key:e,dir:i}};this.props.dispatch(g.JF({selectedView:this.props.selectedView,config:a,tab:this.props.tab}))}}componentDidMount(){this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key)||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return i.createElement(R,{...function(e={}){return{dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[b.C0.CREATED_AT]:(0,p.tx)("tile.sort_filter.sort_date_created"),[b.C0.TOUCHED_AT]:(0,p.tx)("tile.sort_filter.sort_last_modified"),[b.C0.ACCESSED_AT]:(0,p.tx)("tile.sort_filter.sort_last_viewed"),[b.C0.NAME]:(0,p.tx)("tile.sort_filter.sort_alphabetical"),[b.C0.TRASHED_AT]:(0,l.kc)().pdr_trashed_section?(0,p.tx)("tile.sort_filter.sort_date_trashed"):(0,p.tx)("tile.sort_filter.sort_date_deleted"),[b.C0.SEARCH_RELEVANCE]:(0,p.tx)("tile.sort_filter.sort_relevance"),[b.C0.SHARED_AT]:(0,p.tx)("tile.sort_filter.date_shared"),...e}}}(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:L.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile})}}F.displayName="TileSortDropdown"},715621:(e,r,n)=>{"use strict";var i=n(411855);n(185392),n(671653),n(618308);var a=n(129713);class o extends i.PureComponent{render(){return i.createElement("div",{className:`${a.kL} ${this.props.className||""}`},i.createElement("div",{className:a.zu},this.props.leftSide),!!this.props.center&&i.createElement("div",{className:a.gX},this.props.center),i.createElement("div",{className:a.ok},this.props.rightSide))}}o.displayName="BasicViewBar"},11861:(e,r,n)=>{"use strict";n.d(r,{p:()=>K});var i=n(411855),a=n(188507),o=n(776250),s=n(91408),l=n(72933),c=n(320063),d=n(966712),u=n(752553),p=n(762638),m=n(881388),h=n(939863),_=n(392592),g=n(164422),f=n(427960),E=n(10118),y=n(381635),b=n(701404),I=n(318987),T=n(519692),v=n(329254),S=n(970516),w=n(270056),A=n(662275),N=n(672517),C=n(10648),O=n(988022),L=n(396226),R=n(688083),P=n(428467),D=n(417512),k=n(984968),M=n(300874),F=n(451e3),x=n(668860),U=n(564517),B=n(858212),V=n(206074),G=n(129531),H=n(714728),W=n(860168);function K({className:e,folder:r,useLGPerms:n,onRenameClick:K}){let j=(0,a.d4)(e=>e.dropdownShown),z=(0,a.wA)(),[Y,$]=i.useState(void 0),q=()=>{U.S.getFolderTransfer({folderId:r.id}).then(({data:e})=>{$(e.meta)},e=>{$(void 0)})};(0,c.h)(()=>{q()});let Z=(0,N.j6)(),X=function(e){let r=(0,a.d4)(e=>(0,P.getPermissionsState)(e)),n=(0,a.d4)(e=>e.currentUserOrgId),i=(0,a.d4)(e=>e.currentTeamId),c=(0,a.d4)(e=>e.loadedFolders),_=(0,B.S)(),N=(0,u.n_)(R.tO),C=(0,u.n_)(R.Ct),O=(0,u.n_)(R.k4),U=n||i,V=(0,a.d4)(e=>e.teams),K=(0,l.Y)(e),j=(0,a.wA)();return({folder:e,onRenameClick:i,shouldShowJoinButton:a,onRevokeTransfer:l,getPendingInfo:u,pendingTransfer:P})=>{let B=e.teamId,z=e&&e.teamId?V[e.teamId]:void 0,Y=z?z.org_id:e.orgId;if("loaded"!==K.status)return[];let $=()=>{j(A.to({type:(0,I.C)(),data:{folder:e}}))},q=({canTransferProject:e,canAccessPaidFeatures:r,shouldTransferCopy:n,team:i})=>{let a=(0,d.kc)().enable_starter_project_transfers;if(!i||!e){X();return}if(r||a){Z(n);return}j(A.to({type:G.DV,data:{team:i,resource:M.Bi.PROJECT_TRANSFER,currentPlan:L.F.Plan.STARTER,upsellPlan:L.F.Plan.PRO,editorType:null}}))},Z=n=>{e.teamId&&u&&j(A.to({type:(0,g.Lg)(),data:{folder:r.folders[e.id],team:r.teams[e.teamId],entryPoint:g.Lq.PROJECT_SETTINGS,onRequestClose:u,shouldTransferCopy:n}}))},X=()=>{e.teamId&&j(A.to({type:(0,f.Y)(),data:{folder:r.folders[e.id],team:r.teams[e.teamId],entryPoint:g.Lq.PROJECT_SETTINGS}}))},J=e=>{P&&l&&j(A.to({type:(0,v.d)(),data:{pending:P,canTransferProject:e,onRevokeTransfer:l}}))},Q=!!K.data?.canTransferExternally,ee=(e,r)=>({displayText:e,disabled:!Q,callback:()=>q({canTransferProject:ed,canAccessPaidFeatures:!!(el&&(0,k.PS)(el)),shouldTransferCopy:r,team:el}),trackingProperties:{canUserAccessProFeature:!!(el&&(0,k.PS)(el))}}),et=!!K.data?.canEdit,er=!!K.data?.canDelete,en=!!K.data?.canTrash,ei=!!K.data?.canShare,ea=!!K.data?.canMove,eo=!!K.data?.canRestore,es=!!K.data?.canPermanentlyDelete,el=e.teamId?r.teams[e.teamId]:void 0,ec=!!K.data?.canSeeTransferOption,ed=!!K.data?.canTransfer,eu=!!K.data?.canEditDescription,ep=window.innerWidth<=(0,s.hG)(W.tgj),em=[];return e.trashedAt&&(0,d.kc)().pdr_trash_folder?(eo&&em.push({displayText:(0,h.t)("project_menu.restore"),callback:()=>{(0,o.sx)("Folder Restore Click",{folderId:e.id,teamId:e.teamId,orgId:Y}),O({folderId:e.id,team:z}).catch(()=>{j(m.s.error((0,h.t)("file_browser.api_folder.error_when_restoring")))})},disabled:!eo}),es&&em.push({displayText:(0,h.t)("project_menu.permanently_delete"),callback:()=>{(0,o.sx)("Folder Permanently Delete Click",{folderId:e.id,teamId:e.teamId,orgId:Y}),j(A.to({type:(0,b.U)(),data:{folder:e,folderOrgId:Y}}))},disabled:!es})):(e.description&&(em.push({displayText:(0,h.t)("project_menu.description"),disabled:!0},{displayText:e.description,displayTextClassName:p.cx.colorTextMenuSecondary.preWrap.$,disabled:!0},{displayText:"",separator:!0}),eu&&em.push({displayText:(0,h.t)("project_menu.edit_description"),callback:$},{displayText:"",separator:!0})),!e.description&&eu&&em.push({displayText:(0,h.t)("project_menu.add_description"),callback:$}),em.push({displayText:(0,h.t)("file_browser.copy_link"),callback:()=>{let r=(0,F.EE)(e.id,n);j(S.S({url:r}))}}),a||(ei&&ep&&em.push({displayText:(0,h.t)("sidebar.share"),callback:()=>{j((0,R.jl)({folderId:e.id,loadedFolders:c})),j(A.to({type:H.W,data:{folderId:e.id}}))}}),(Y===U||B===U)&&em.push({displayText:(0,h.t)("sidebar.move_project"),callback:()=>{j((0,R.jl)({folderId:e.id,loadedFolders:c})),j(A.to({type:T.J,data:{folderId:e.id}}))},disabled:!ea}),i&&em.push({displayText:(0,h.t)("sidebar.rename"),callback:()=>{i&&i(e)},disabled:!et}),_||em.push({displayText:e.isSubscribed?(0,h.t)("sidebar.remove_from_favorites"):(0,h.t)("sidebar.add_to_favorites"),callback:()=>{j(w.ZJ({folderId:e.id,folderName:e.path,teamId:e.teamId,isSubscribed:!e.isSubscribed}))}}),em.push({displayText:"",separator:!0}),ec&&!P&&(em.push(ee((0,h.t)("project_menu.transfer"),!1)),(0,d.kc)().enable_transfer_a_project_copy&&em.push(ee((0,h.t)("project_menu.send_a_copy"),!0))),P&&ec&&em.push({displayText:"",separator:!0},{displayText:(0,h.t)("project_menu.pending_transfer_request"),disabled:!0},{displayText:(0,h.t)("project_menu.view_transfer_details"),callback:()=>J(!!ed)},{displayText:"",separator:!0}),(0,d.kc)().pdr_trash_folder?em.push({displayText:(0,h.t)("project_menu.move_to_trash"),callback:()=>{(0,o.sx)("Folder Trash Click",{folderId:e.id,teamId:e.teamId,orgId:Y}),e.folderPerms?.canSkipDeletionConfirmation?C({folderId:e.id}).catch(()=>{j(m.s.error((0,h.t)("file_browser.api_folder.error_when_moving_to_trash")))}):j(A.to({type:(0,y.V)(),data:{folder:e}}))},disabled:!en}):em.push({displayText:(0,h.t)("project_menu.delete"),callback:()=>{(0,o.sx)("Folder Delete Click",{folderId:e.id,teamId:e.teamId,orgId:Y}),K.data?.canSkipDeletionConfirmation?N({folderId:e.id}).catch(()=>{j(m.s.error((0,h.t)("file_browser.api_folder.error_when_deleting")))}):j(A.to({type:(0,E.i)(),data:{folder:e}}))},disabled:!er}),er||e.teamId||em.push({displayText:(0,h.t)("sidebar.leave_shared_project"),callback:()=>{j((0,D.lP)({role:r.roles.byFolderId[e.id][r.user.id],level:x.e6.NONE}))}}))),em}}(r.id),J=j?.data?.targetRect;if(!J)return null;let Q=X({folder:r,useLGPerms:n,onRenameClick:K,onRevokeTransfer:()=>{Y?U.S.deleteAssetTransferRequest({id:Y.id}).then(()=>{$(void 0),z(_.F.enqueue({message:"Transfer revoked."}))},e=>{z(_.F.enqueue({message:"Something went wrong - check your connection and try again",error:!0}))}):z(_.F.enqueue({message:"No pending transfer found for this project.",error:!0}))},getPendingInfo:q,pendingTransfer:Y});return i.createElement(N.fu,{trackingTargets:C.K.RCS,name:"Folder Context Menu"},i.createElement(V.j,{className:e,items:Q,parentRect:J,showPoint:!1,lean:"right",dispatch:z,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},z,r),e.trackingProperties&&(0,O.Cu)({...Z.properties,trackingContext:Z.name,...e.trackingProperties})}}))}},489348:(e,r,n)=>{"use strict";n.d(r,{L:()=>em});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(511617),d=n(823810),u=n(72933),p=n(517333),m=n(966712),h=n(498750),_=n(915440),g=n(391388),f=n(563706),E=n(498480),y=n(192437),b=n(564577),I=n(976999),T=n(493323),v=n(428322),S=n(708258),w=n(574176),A=n(331737),N=n(762638),C=n(939863),O=n(809840),L=n(485911),R=n(619942),P=n(90898),D=n(771718);n(167480);var k=n(347120),M=n(121072),F=n(738269),x=n(507877),U=n(119198),B=n(296559),V=n(128751),G=n(988022),H=n(723245);n(688083);var W=n(477782),K=n(318812),j=n(850134),z=n(594901),Y=n(611978),$=n(102310),q=n(99506),Z=n(279453),X=n(623746),J=n(982121),Q=n(239671),ee=n(945020),et=n(935938),er=n(378356),en=n(498606),ei=n(723127),ea=n(392340),eo=n(858212),es=n(127391),el=n(989866),ec=n(674064),ed=n(559735),eu=n(126815);function ep(e){let r=(0,a.wA)(),n=(0,z.FC)(),o=(0,Y._6)(),l=(0,a.d4)(e=>e.currentUserOrgId),p=(0,a.d4)(e=>e.currentTeamId),h="recentsAndSharing"===o.view&&"shared-projects"===o.tab?e.folder.parent_org?.id??null:l,E="recentsAndSharing"===o.view&&"shared-projects"===o.tab?e.folder.parent_team?.id??null:p,y=(0,m.kc)().ps_benchmark,b=y?E:null,I=(0,m.kc)().enable_open_projects_in_new_tab,S=(0,eo.S)(),w=(0,K.Um)(),A=(0,m.kc)().ps_benchmark,N=(0,_.Rs)(Z.qjT,{resourceId:e.folder.id,resourceType:q.bk.FOLDER,orgId:h,teamId:h?null:E}),C=(0,ea.Q)({currentOrgId:h,currentTeamId:(b??E)||null}),O=(0,u.Y)(e.folder.id),L=i.useMemo(()=>{if("loaded"===N.status){if(y||S)return void 0!==(0,H.eU)(N.data,q.bk.FOLDER)}else if("loaded"===C.status)return(0,H.tx)(C.data,e.folder.id);return y||S?!!e.folder.is_favorited:!!e.folder.is_subscribed},[e.folder.id,C,N,S,y,e.folder.is_favorited,e.folder.is_subscribed]),k=(0,R.E)(),M=i=>{"trashedFolders"!==o.view&&(r(x.kg({clickedResourceType:"team",resourceIdOrKey:e.folder.id})),(0,G.xr)("file_browser_folder_click",e.folder.id,e.folder.team_id,n,{selectedView:"recentsAndSharing"===o.view?o.tab||et.G.RECENTLY_VIEWED:o.view,planFilterId:e.currentPlanFilter?.planId||null,planFilterType:e.currentPlanFilter?.planType||null,viewMode:"grid"}),I?k(e.folder.id,i):r(x.gN(e.folder.id)))},U="loaded"===O.status&&!!O.data?.canEdit,V=i.useCallback(e=>{if("trashedFolders"===o.view)return;r(x.UN({fileKey:e.key,entrypoint:"folder list card"})),r(B.p4({planId:l||ei.P}));let i="recentsAndSharing"===o.view||"folder"===o.view?o:void 0;(0,c.N7)(l,e.parent_org_id,p,e.team_id)?(0,c.QV)({file:{key:e.key,editorType:e.editor_type||void 0}},{user:n.user,teamId:A?p:null,orgId:l,selectedView:o}):r(F.$T({view:"fullscreen",fileKey:e.key,editorType:(0,Q.wN)(e.editor_type),prevSelectedView:i}))},[l,p,r,A,n.user,o]),W="loaded"===O.status&&!!O.data?.canCreateDesignFile,j=g.Qw.useTransform(e.folderFilesResult,(0,i.useCallback)(e=>e.sort((e,r)=>e.touched_at<r.touched_at?1:-1).slice(0,15),[])),$=g.Qw.useTransform(j,(0,i.useCallback)(r=>{let n=r.slice(0,4).map(r=>i.createElement(ef,{key:r.key,file:r,teamId:e.folder.team_id,onFileClick:V,selectedView:o}));for(;n.length<4;)n.push(i.createElement(eE,{key:`${n.length}`,folder:e.folder,canCreateFile:W}));return n},[W,V,e.folder,o])),J=i.useMemo(()=>(j.data||[]).slice(0,15).map(e=>e.key),[j]);return(0,d.IT)(J),i.createElement("div",{className:ec.HM,onClick:e=>{e.preventDefault(),e.stopPropagation(),(2===e.detail||f.Ay.mobile||f.Ay.tablet)&&M(e)},onContextMenu:n=>{n.stopPropagation(),n.preventDefault();let i={top:n.clientY,right:n.clientX,bottom:n.clientY,left:n.clientX,width:1,height:1};r(F.j7({type:P.B,data:{folder:{...(0,X.Bp)(e.folder),folderPerms:e.folder.folderPerms,description:e.folder.description,canEdit:U,isSubscribed:L},useLGPerms:e.useLGPerms,targetRect:i}}))},"data-onboarding-key":e.dataOnboardingKey,tabIndex:0},i.createElement("div",{className:ec.SM},i.createElement(v.a,{onIntersectionChange:e.onIntersectionChange}),"loaded"===$.status?i.createElement("div",{className:ec.kC},$.data):i.createElement(T.qc,null),i.createElement(i.Fragment,null,i.createElement("div",{className:ec.SA},"trashedFolders"===o.view?i.createElement(i.Fragment,null):i.createElement("div",{className:s()(ec.Hq,{[ec.F4]:w?.type==="organize-favorite-menu"}),tabIndex:0},i.createElement(D.n,{folder:{...e.folder,is_subscribed:L},containerStyle:ec.is}))),i.createElement("div",{className:ec.Ow},i.createElement(e_,{...e,folder:e.folder,folderName:e.folderName,folderTeamName:e.folderTeamName,folderOwnerName:e.folderOwnerName,folderLastUpdated:e.folderLastUpdated,showTeamNameOrAuthor:!1,showFavoriteStar:!1,isSharerInfoIncluded:e.isSharerInfoIncluded,canEdit:U})))))}function em(e){return i.createElement(y.tH,{boundaryKey:"FolderListCard",fallback:y.H4.NONE_I_KNOW_WHAT_IM_DOING},i.createElement(ep,{...e}))}let eh={open:!0,openNewTab:!0,share:!0,copyLink:!0,delete:!0,moveFile:!0};function e_(e){let r=e.folder,n=e.folderTeamName,a=e.folderOwnerName&&(0,C.t)("team_view.folder_list_card.owner_handle",{folderOwnerName:e.folderOwnerName}),o=!!e.checksForViewOnlyLabels&&e.checksForViewOnlyLabels.teamId===e.folder.team_id&&e.checksForViewOnlyLabels.isLockedTeam;return i.createElement("div",{className:ec.rZ},i.createElement("div",{className:ec.h4},i.createElement("div",{className:ec.ub},i.createElement(O.E,{fontSize:13,fontWeight:"medium",truncate:!0},e.folderName),o&&i.createElement(E.Ex,{color:E.zE.WARNING_TERTIARY,text:(0,C.t)("locked_team.label.view_only"),dataTooltip:(0,C.t)("locked_team.label.tooltip"),dataTooltipType:en.Ib.TEXT,className:ec.ol}),e.canEdit&&e.folder.settings?.legacy_team_root_folder&&"Untitled project"===e.folder.path?i.createElement(w.B,{className:ec.G,svg:eu.A,"data-tooltip-type":en.Ib.SPECIAL,"data-tooltip-interactive":!0,"data-tooltip":el.p,"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-folder-id":e.folder.id}):null),i.createElement(S.C,{...e})),e.showTeamNameOrAuthor&&i.createElement("div",{className:ec.fT},n||a),i.createElement("div",null,i.createElement("div",{className:ec.qL},i.createElement("div",{className:ec.gz},i.createElement(eg,{folder:r,folderLastUpdated:e.folderLastUpdated,folderTeamName:n,isSharerInfoIncluded:e.isSharerInfoIncluded})))))}function eg({folder:e,folderLastUpdated:r,folderTeamName:n,isSharerInfoIncluded:o}){let s=(0,Y._6)(),l=(0,a.d4)(e=>e.orgById),c=(0,J.x)(),d="trashedFolders"===s.view,u=(0,j.x)(e.id,d);if("loaded"!==u.status)return i.createElement(I.Wi,{className:N.cx.h16.w150.$,animationType:I.JR.NO_SHIMMER});let p=(0,C.t)("file_browser.folder.number_of_files",{numFiles:u.data,formattedNumFiles:(0,L.t)(u.data)});if((e.shared_by_user||e.shared_at)&&o){let r=e.shared_by_user&&e.shared_by_user.name?(0,C.t)("team_tile.shared_by",{shared_by_text:e.shared_by_user.name}):e.shared_at&&i.createElement("div",{className:ec.C$},(0,C.t)("swy_tile.shared"),i.createElement(b.h1,{date:new Date(e.shared_at)})),n=e.parent_org||e.parent_team;return i.createElement(i.Fragment,null,i.createElement("div",{className:ec.wi},i.createElement(O.E,{fontSize:11},p),i.createElement("div",null,"\xa0\xb7\xa0"),i.createElement(O.E,{fontSize:11,truncate:!0},n&&i.createElement(es.H,{entityId:n.id,entityName:n.name||void 0,imgUrl:n.imgUrl||void 0}),r)))}let m=e.parent_org_id&&l[e.parent_org_id]||e.team_id&&c[e.team_id];if(m&&"search"===s.view)return i.createElement("div",{className:N.cx.flex.flexRow.itemsCenter.pre.$},i.createElement(es.H,{entityId:m.id,entityName:m.name,imgUrl:m.img_url}),n&&i.createElement(i.Fragment,null,n+" \xb7 "),p);let h=e.trashed_at?(0,C.tx)("team_view.folder_list_card.trashed_at",{trashedTime:i.createElement(b.h1,{date:e.trashed_at})}):null,_=r?(0,C.tx)("team_view.folder_list_card.last_updated_at",{lastUpdatedTime:i.createElement(b.h1,{date:r})}):null;return i.createElement(i.Fragment,null,p,"trashedFolders"===s.view?h:_)}function ef(e){let r=(0,a.wA)(),{showing:n,show:o,data:c}=(0,M.L)(),d=!!c?.tile&&W.Tf.getId(c.tile)===e.file.key,u=r=>{r.preventDefault(),r.stopPropagation(),p.eD&&(0,l.sx)("Open File Click",{fileKey:e.file.key,uiSelectedView:JSON.stringify({teamId:e.teamId})}),e.onFileClick(e.file)},m=e.file,h={type:W.nb.FILE,file:m};return i.createElement("button",{className:s()(ec.Fj,{[ec.wH]:d}),onClick:e=>{2===e.detail&&u(e)},draggable:!1,tabIndex:0,onContextMenu:e=>{e.preventDefault(),e.stopPropagation(),o({data:{tile:h,targetRect:{top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1}}}),r(V.an()),r(V.y$({type:er.F.FILES,tiles:[h]}))}},i.createElement(A.H5,{file:m,borderRadius:8,noBorder:!0}),i.createElement("div",{className:ec.XP},i.createElement("div",{className:ec.sy},m.name)),i.createElement(k.i,{tileActions:eh,tile:h,selectedTiles:[h],openTile:u,dropdownVisible:n}))}function eE(e){let r=(0,a.wA)(),n=(0,$.B)(),o=(0,a.d4)(r=>e.folder.team_id?r.teams[e.folder.team_id]:void 0);return i.createElement("a",{href:"#",rel:"noopener",role:"button",className:ec.wL,onClick:i=>{i.preventDefault(),i.stopPropagation(),e.canCreateFile&&r(U.zE({state:n,editorType:q._Y.DESIGN,folderId:e.folder.id,team:o,from:ee.f6.FILE_BROWSER_FOLDER_EMPTY_TILE,openNewFileIn:(0,h.oJ)(i)?ee.ai.NEW_TAB:ee.ai.SAME_TAB}))},draggable:!1,tabIndex:0,onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},e.canCreateFile&&i.createElement(w.B,{svg:ed.A}))}},167480:(e,r,n)=>{"use strict";n(875847),n(668860)},87816:(e,r,n)=>{"use strict";n.d(r,{k:()=>i});let i=/_INTERNAL_PILL_KEY_[0-9]+_/g},376797:(e,r,n)=>{"use strict";n.d(r,{c:()=>a}),n(411855),n(675678),n(587670),n(966712);var i=n(38580);n(776621),n(239349),n(29680),n(335682),n(37112),n(798305);let a=(0,i.eU)(!1)},611886:(e,r,n)=>{"use strict";n.d(r,{gE:()=>v});var i=n(776250),a=n(511617),o=n(737947),s=n(966712),l=n(563706),c=n(27087),d=n(939863),u=n(667231),p=n(392592),m=n(749949),h=n(837324),_=n(291861),g=n(107877),f=n(935308),E=n(750668),y=n(132135);n(935757);var b=n(555328),I=n(809073);async function T(e,r,n,i,a,o){let l=[],c=null;if((0,s.kc)().ps_benchmark)try{c=await (0,f.nm)(!0)(n),l=(0,E.F)(i,r,c)}catch(r){let e=r?.data?.message||(0,d.t)("file_browser.error_try_again");n(p.F.enqueue({message:e,type:"error"}))}else l=(0,E.F)(i,r,{plansByUserId:{},teams:[],orgs:[]});let u=(i.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in i.authedUsers.byId).length>1;if(l.length>1||u){let n=(0,h.JJ)(r.viewer_mode);e({onSelectWorkspace:a,workspaces:l.map(e=>(0,_.y)(e,n,i,c,o)),mode:"new_file"})}else(0,s.kc)().ps_benchmark?a(l[0]):a()}let v=(e,r={isFreemiumPreview:!1,adminReviewerOverride:!1})=>n=>async(d,p)=>{let h=p();await T(e,n,d,h,function(e){let p={headers:{...c.Ay.defaults.headers}},_={};e&&(p.headers["X-Figma-User-ID"]=e.userId,_.org_id=e.orgId,(0,s.kc)().ps_benchmark&&(_.team_id=e.teamId)),!0===r.adminReviewerOverride&&(_.admin_reviewer_override=!0),c.Ay.post(`/api/hub_files/v2/${n.id}/copy`,_,p).then(({data:s})=>{let c=s.meta,p=(0,b.m3)(n),_=!0!==p?"none":!0===r.isFreemiumPreview?"trial":"paid";(0,i.sx)(g.M5.HUB_FILE_DUPLICATED,{hubFileId:n.id,figFileKey:c.key,isMonetized:p,paidStatus:_,searchSessionId:(0,m.w)(h)}),"whiteboard"===c.editor_type&&d((0,u.Hx)({storeInRecentsKey:I.$A.FigJam,id:n.id,type:I.vt.CommunityResource}));let f=(0,y.to)(c);f=(0,a.dR)(f,{"is-community-duplicate":"1",fuid:e?.userId||""}),!0===r.isFreemiumPreview&&(f=(0,a.dR)(f,{"is-freemium-preview":"1"})),o.Ay.redirect(f,l.rr?void 0:"_blank")})})}},484525:(e,r,n)=>{"use strict";n.d(r,{_:()=>l});var i=n(411855),a=n(574176),o=n(340433),s=n(256127);function l({is24x24:e}){return i.createElement(a.B,{svg:s.A,className:o.K,svgClassName:e?o.B:void 0})}},175420:(e,r,n)=>{"use strict";n.d(r,{C2:()=>d,Gx:()=>u});var i=n(411855),a=n(939863),o=n(568493),s=n(209552),l=n(882225),c=n(40848);function d({badges:e},r,n){return e.some(e=>e===l.s.FIGMA_PARTNER)?i.createElement(o.c,{showBorder:r,is24x24:n}):null}function u(e){let r=i.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:c.RL,onClick:e=>{e.stopPropagation()}},(0,a.tx)("community.detail_view.figma_partner_this_creator_is"),i.createElement("span",{className:c.kz},(0,a.tx)("community.learn_more")));return i.createElement(s.m_,{preview:r},e.children)}},203008:(e,r,n)=>{"use strict";n.d(r,{$O:()=>l,Jv:()=>s,TI:()=>a,rc:()=>o});var i=n(411855);function a(){return i.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75L7 10V1H1V10L4 7.75ZM0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625Z",fill:"var(--color-icon, black)"}))}function o(){return i.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625Z",fill:"var(--color-icon, black)"}))}function s(){return i.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.98876L9 13.2775V1.02772H1V13.2775L5 9.98876ZM0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148Z",fill:"var(--color-icon, black)"}))}function l(){return i.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787Z",fill:"var(--color-icon, black)"}))}},911073:(e,r,n)=>{"use strict";n.d(r,{Z:()=>T,r5:()=>v});var i=n(411855),a=n(188507),o=n(460845),s=n(776250),l=n(27087),c=n(762638),d=n(939863),u=n(296045),p=n(361656),m=n(749949),h=n(837324),_=n(198181),g=n(417659),f=n(672517),E=n(712121),y=n(761541);function b({profileId:e,following:r,onFollowChange:n}){let a=(0,m.J)();return i.createElement("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),n(!r),(r?l.Ay.del:l.Ay.put)("/api/follows",{followed_profile_id:e}).then(()=>{r||(0,s.sx)("community_hub_profile_follow",{profileId:e,searchSessionId:a})}).catch(e=>{if("You're already following this user"===e.message){n(!r);return}n(r)})},className:r?y.xz:y.u8,"data-follow":(0,d.t)("community.follow.follow"),"data-unfollow":(0,d.t)("community.follow.unfollow"),"data-following":(0,d.t)("community.follow.following")})}let I={};function T({author:e,isHoverStateRedesignEnabled:r=!1}){let[n,o]=i.useState(!1);i.useEffect(()=>{(0,_.M)()&&E.L.getFollows({authorId:e.id}).then(({data:r})=>{let n=r.meta.current_user_is_following;I[e.id]=n,o(n)}).catch(e=>{throw Error("Could not get following status.")})},[e]);let l=(0,a.d4)(e=>e.authedActiveCommunityProfile),m=(0,h.Dm)(e.id,l),T=e.description?e.description.trim().replace(/\s+/g," "):"";return r?i.createElement("div",{className:y.f2},i.createElement("div",{className:y.ft},i.createElement("div",null,i.createElement(u.e,{adtlClassName:y.qg,entity:e}),i.createElement("div",{className:y.Tz},i.createElement(p.l,{profile:e,showBorder:!0})))),i.createElement("div",{className:y.RZ},i.createElement("span",{className:y.jp},e.name),i.createElement("span",{className:y.Ab},"@",e.profile_handle)),T&&i.createElement("div",{className:y.i},i.createElement("span",{className:y.t3},T)),i.createElement("div",{className:y.bY},(0,d.tx)("community.profiles.follower_count",{followerCount:e.follower_count,formattedFollowerCount:i.createElement("span",null,e.follower_count)}))):i.createElement("div",{className:y.tt},i.createElement("div",{className:y.d9},i.createElement(f.o3,{to:new g.xn({profileHandle:e.profile_handle}).to,trackingEventName:"community_hub_profile_preview__profile_visit",trackingProperties:{profileId:e.id}},i.createElement(u.e,{adtlClassName:y.my,entity:e}),i.createElement("div",{className:y.zP},i.createElement(p.l,{profile:e,showBorder:!0}))),i.createElement(f.o3,{to:new g.xn({profileHandle:e.profile_handle}).to,trackingEventName:"community_hub_profile_preview__profile_visit",trackingProperties:{profileId:e.id}},i.createElement("div",{className:y.fh},i.createElement("span",{className:c.cx.ellipsis.noWrap.overflowHidden.$},e.name)),i.createElement("div",{className:y.WO},"@",e.profile_handle))),!m&&i.createElement(b,{profileId:e.id,following:I[e.id],onFollowChange:r=>{o(r),I[e.id]=r,(0,s.sx)("community_hub_profile_preview__profile_follow",{profileId:e.id})}}))}function v({authors:e}){return i.createElement("div",null,e.map(e=>i.createElement(o.N_,{className:y.u$,to:new g.xn({profileHandle:e.profile_handle}).to,key:e.id},i.createElement(u.e,{entity:e}),i.createElement("div",{className:y.nZ},i.createElement("span",{className:c.cx.ellipsis.noWrap.overflowHidden.$},e.name),i.createElement(p.l,{profile:e})))))}},209552:(e,r,n)=>{"use strict";n.d(r,{So:()=>c,m_:()=>d});var i=n(411855),a=n(629019),o=n.n(a);n(776621);let s=(()=>{let e=[];return["scroll","resize"].forEach(r=>{window.addEventListener(r,()=>{e=e.filter(e=>l(e.el,!1,e.initialHPosition,e.initialVPosition))})}),{set:(r,n,i)=>{e.push({el:r,initialHPosition:n,initialVPosition:i})}}})(),l=(e,r=!1,n,i)=>{if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||e.parentNode?.firstChild===document.activeElement||e===document.activeElement)&&!r)return!1;if(e.parentNode instanceof HTMLElement&&"true"===e.parentNode.dataset.disableRepositioning)return!0;e.dataset.vPosition=i||"below",e.dataset.hPosition="";let a=e.getBoundingClientRect();return a.bottom>window.innerHeight-20?e.dataset.vPosition="above":a.top<20&&(e.dataset.vPosition="below"),a.right>window.innerWidth-100?e.dataset.hPosition="right":a.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==n&&(e.dataset.hPosition=n),!0};function c({children:e,preview:r,className:n,dropdownClassName:a,horizontalPosition:c,verticalPosition:d,disableRepositioning:u,borderRadius:p,allowHoverOnDropdownContents:m=!0}){let h=i.useRef(null),[_,g]=i.useState(!1),[f,E]=i.useState(0),y=e=>{window.innerWidth<500||(E(setTimeout(()=>{let r=h.current;r&&r.parentNode&&(r.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{g(e)},150):(s.set(r,c,d),g(e)))},150)),clearTimeout(f))};return i.useLayoutEffect(()=>{_&&!u&&l(h.current,!0,c,d)},[_]),i.createElement("div",{className:n||"dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd","show-dropdown":"false",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),tabIndex:0,"data-disable-repositioning":u,"data-hover-dropdown":!0},i.createElement("div",{onMouseLeave:m?void 0:()=>y(!1)},e),i.createElement("div",{className:o()("dropdown--dropdownContents--BqcL5",a),style:p?{borderRadius:`${p}px`}:{},"data-v-position":d||"below","data-h-position":c||"",ref:h,"data-dropdown-contents":!0},_&&r))}function d({preview:e,children:r}){return i.createElement(c,{className:o()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},r)}},674694:(e,r,n)=>{"use strict";n.d(r,{O7:()=>s,Xy:()=>l});var i=n(411855),a=n(999021),o=n(487386),s=(e=>(e.DETAIL="detail",e.UNIVERSAL_INSERT="universal_insert",e))(s||{});function l(e){let r={onLoad:e.onLoad,loading:"lazy",draggable:e.draggable};return i.createElement(a.c,{sizes:function(e){switch(e){case"universal_insert":return;case"detail":r=o.a.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:r=o.a.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var r,n=Object.entries(r).map(([e,r],n)=>`(min-width: ${e}px) ${r}vw`);return n.push("100vw"),n.join(", ")}(e.thumbnailContext),srcSet:function(e,r,n,i){let a;if(!e||!r)return"";let s=Object.entries(n||{});if(!n){let n=function(e){if(!e)return;let r=e.lastIndexOf("/"),n=e.indexOf(".",r);return e.substring(r+1,n)}(r);s=Object.keys(o.B.COMMUNITY_HUB_FILE_THUMBNAIL).map(r=>[r,`/community/file/${e}/thumbnail/${r}?signature=${n}`])}return(s.push(["1600",r]),"universal_insert"===i?s.map(([e,r])=>{let n=Math.round(parseInt(e)/80*10)/10;return`${r} ${n}x`}):s.map(([e,r])=>`${r} ${e}w`)).join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:"COMMUNITY_HUB_FILE_THUMBNAIL",alt:e.alt,className:e.className,imageProps:r})}},240411:(e,r,n)=>{"use strict";n.d(r,{my:()=>w});var i=n(411855),a=n(460845),o=n(629019),s=n.n(o),l=n(96328),c=n(574176),d=n(939863),u=n(874647),p=n(296045),m=n(749949),h=n(233562),_=n(837324),g=n(612776),f=n(545941),E=n(417659),y=n(911073),b=n(209552),I=n(637961),T=n(815234);function v({resource:e,currentUserLiked:r,isRedesignEnabled:n,inPluginRow:a}){return i.createElement("div",{className:s()(r?I.QW:I.aK,{[I.uh]:n&&a,[I.JE]:n&&!a})},i.createElement(u.O,null),(0,l.$M)(e.like_count))}function S({resource:e,isRedesignEnabled:r,inPluginRow:n}){return i.createElement("div",{className:s()(I.Au,{[I.uh]:r&&n,[I.JE]:r&&!n})},i.createElement(c.B,{svg:T.A}),(0,l.$M)((0,f.mk)(e)))}function w(e){let{resource:r}=e,n=(0,m.J)(),o=(0,_.qD)(r),s=r.community_publishers.accepted,l=s[0],c=(0,g.X5)(),u=i.createElement("span",{className:c?I.Jm:I.cy},(0,h.Lj)(r)),T=(0,_.ss)(r),w=!!_.Bl(r.id,_.Vm(r)).data?.[0];if(!l)return null;let A=s.length>1?i.createElement(b.So,{className:c?I.Xi:void 0,preview:i.createElement(y.r5,{authors:s})},u):u;return i.createElement("div",{className:c?I._j:I.UN},!c&&i.createElement(a.N_,{className:I.Xq,to:new E.xn({profileHandle:l.profile_handle}).to},i.createElement(b.So,{preview:i.createElement(y.Z,{author:l})},i.createElement(p.e,{key:l.id,entity:l,adtlClassName:I.em}))),i.createElement("div",{"data-redesigned-resource-meta":c,className:I.rn},i.createElement(a.N_,{to:(0,_._t)({resource:r}),onClick:e=>{(0,f.cB)(T,r.id,void 0,n)},className:I.DD},o.name),i.createElement(a.N_,{className:c?I.rh:I.Xq,to:new E.xn({profileHandle:l.profile_handle}).to},c?(0,d.tx)("community.resource_tiles.by_author",{author:A}):A)),i.createElement("div",{className:I.o1},i.createElement(v,{currentUserLiked:w,resource:r,isRedesignEnabled:!0}),i.createElement(S,{resource:r,isRedesignEnabled:!0})))}},590237:(e,r,n)=>{"use strict";n.d(r,{Cv:()=>S,Mr:()=>v});var i=n(411855),a=n(629019),o=n.n(a);n(96328),n(564577);var s=n(428322),l=n(348425);n(762638),n(939863);var c=n(198596),d=n(408552);n(361656);var u=n(674694);n(296045),n(335666),n(654923);var p=n(749949),m=n(837324),h=n(612776);n(466636);var _=n(545941);n(609271),n(417659),n(672517);var g=n(555328);n(978527),n(911073),n(209552);var f=n(206144);n(97128),n(376485),n(991679);var E=n(240411);n(776250),n(278733),n(197979),n(582493),n(61714),n(166521),n(860168),n(233562);var y=n(99506),b=n(788541);n(316795);var I=n(637961),T=n(851750);function v({resource:e}){let r=(0,d.QP)({resource:e,height:"24"});if(r)return i.createElement("div",{className:I.BQ},r);let n=(0,c.n)({badges:e.badges});return n?i.createElement("div",{className:I.BQ},i.createElement(c.v,null,n)):null}function S({resource:e,isMetaHidden:r,onIntersectionChange:n,onClickOverride:a,index:c,subView:d}){let S=(0,p.J)(),w=(0,h.X5)(),A=(0,m.qD)(e),N=e.client_meta&&JSON.parse(e.client_meta)?.background_color,C=e.thumbnail_is_set;e.viewer_mode===y.y4.WHITEBOARD&&(N={r:1,g:1,b:1});let O=i.createElement(u.Xy,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:A.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),L=C?I.zA:e.viewer_mode===y.y4.WHITEBOARD?I.ZW:I.XO;return i.createElement("div",{className:I.Sl,"data-testid":"hub-file-tile"},i.createElement(s.a,{onIntersectionChange:e=>n?.(e)}),i.createElement(f.A6,{to:(0,m._t)({resource:e}),onClick:r=>{(0,_.cB)("hub_file",e.id,c,S,d)},onClickOverride:a,className:w?I.nJ:I.BN},i.createElement("div",{className:o()(L,{[I.$c]:w}),style:{backgroundColor:N&&`rgb(${255*N.r}, ${255*N.g}, ${255*N.b})`}},O,e.viewer_mode===y.y4.PROTOTYPE&&i.createElement(l.t,{svg:T.A,className:I.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:T.A}),i.createElement("div",{className:I.JM},i.createElement(b.dn,{editorType:(0,m.JJ)(e.viewer_mode)})),!r&&i.createElement(v,{resource:e}))),!r&&i.createElement(E.my,{resource:e,type:g.vt.HUB_FILE}))}},442898:(e,r,n)=>{"use strict";n(411855),n(843540),n(776250),n(737947);var i=n(38580);n(195847),n(50458),n(250769);var a=(e=>(e[e.CLOSED=0]="CLOSED",e[e.PRELOAD=1]="PRELOAD",e[e.OPEN=2]="OPEN",e))(a||{});(0,i.eU)({state:0,url:"/login_iframe?with_community_header=true&type=fixedmodal",mounted:!1}),(0,i.eU)(!1)},843540:(e,r,n)=>{"use strict";n(411855);var i=n(38580);n(195847),n(574176),n(672517),n(307780),n(442898),n(50458),n(250769),(0,i.eU)(null)},61714:(e,r,n)=>{"use strict";n(777944).PluginTryButton},166521:(e,r,n)=>{"use strict";n(411855),(0,n(503457).kf)("lazy_cmty_purchase_button",{isCodesplit:!0,ComponentFactory:async()=>({default:(await n.e(8476).then(n.bind(n,698476))).default})})},547733:(e,r,n)=>{"use strict";n(411855),n(629019),n(563706),n(574176),n(762638),n(939863),n(466636),n(498606),n(209552)},197979:(e,r,n)=>{"use strict";n(411855),n(629019),n(776621),n(864089),n(555328),n(31680),n(674694),n(302510)},206144:(e,r,n)=>{"use strict";let i;n.d(r,{A6:()=>m});var a=n(411855),o=n(737947),s=n(913270),l=n(123130),c=n(198181);let d=e=>({type:"SELECT_VIEW",payload:e}),u=/^\/community\/(file|widget|plugin)\/(\d+)/,p=/^\/@(.+)/;function m({to:e,onClickTracking:r,onClick:n,onClickOverride:m,className:h,children:_,style:g,onRef:f,target:E}){return a.createElement("a",{href:e,onClick:a=>{if(r?.(a),!a.ctrlKey&&!a.metaKey){if(n&&n(a),m){a.preventDefault(),m(a);return}if(function(e){let r=(0,s.gV)(window.location.pathname),n=(0,s.gV)(e);return r.reactRouterHandled&&n.reactRouterHandled}(e)){a.preventDefault(),o.Ay.push(e);return}(0,c.M)()&&function(e,r){let n=!1,{pathname:a}=window.location;if(!(/^\/community/.test(a)&&(0,c.M)())||u.test(e)||p.test(e)){if(u.test(e)){n=!0;let[r,a,o]=e.match(u);i(d((0,l.p)(a,o)))}else if(p.test(e))n=!0,i(d({view:"communityHub",subView:"handle",handle:e.match(p)[1]}));else{n=!0;let[r,a]=e.split("?");a=a?`?${a}`:"",i(d({data:(0,s.wl)(r,a),subView:"searchAndBrowse",view:"communityHub"}))}n&&r&&(r.preventDefault(),r.stopPropagation())}}(e,a);return}},style:g,className:h,ref:e=>{f?.(e)},target:E},_)}},582493:(e,r,n)=>{"use strict";var i=n(411855),a=n(346124),o=n(380620),s=n(629019),l=n.n(s),c=n(511617),d=n(157663),u=n(563706),p=n(913016),m=n(30090),h=n(493323),_=n(762638),g=n(939863),f=n(498606),E=n(227795),y=n(137889),b=n(68710),I=n(10448),T=n(114843),v=n(552601);let S={BUTTON_SHAPE_FILL:"#FFFFFF",BUTTON_BG_FILL:"#000000",BUTTON_STROKE_OPACITY:.2,BUTTON_BG_FILL_OPACITY:.7,BUTTON_BG_FILL_HOVER_OPACITY:.9};function w(e){if(null==e||Number.isNaN(e))return"";let{seconds:r,minutes:n}=(0,p._d)(e);return`${n}:${String(r).padStart(2,"0")}`}function A(e,r){e&&(r?(e.play(),u.Ay.safari&&e.currentTime(.1)):N(e)?e.pause():(u.Ay.safari&&e.currentTime()>.1&&e.currentTime(e.currentTime()-.1),e.play()))}function N(e){return!!e&&!e.ended()&&!e.paused()&&e.currentTime()>0&&e.readyState()>2}function C({videoJsPlayer:e,isFullscreen:r,toggleFullscreen:n,isActive:a,hasEnded:o,setHasEnded:s}){let[c,d]=i.useState(0),p=i.useRef(!1),[m,_]=i.useState(null),[b,I]=i.useState(!1),[S,C]=i.useState(!1),L=i.useRef(!1),D=i.useRef(!1),k=m||e?.currentTime(),M=e?.duration(),F=N(e),x=i.useRef(void 0);i.useEffect(()=>{C(a||!F||o||L.current)},[o,a,F]);let U=(0,i.useCallback)(()=>{d(e=>e+1)},[]);i.useEffect(()=>{if(e)return e.on("playing",a),e.on("canplay",r),e.on("ended",l),e.on("timeupdate",r),e.on("seeking",o),e.on("seeked",i),e.on("stalled",n),()=>{e.off("playing",a),e.off("canplay",r),e.off("ended",l),e.off("timeupdate",r),e.off("seeking",o),e.off("seeked",i),e.off("stalled",n)};function r(){U()}function n(){L.current=!1}function i(){L.current=!1,s(!1)}function a(){s(!1),U()}function o(){L.current=!0}function l(){b||s(!0),U()}},[b,U,s,e]);let B=(0,i.useCallback)(()=>{e&&(A(e,o),U())},[o,U,e]),V=(0,i.useCallback)(()=>{e&&(p.current=N(e)||o,e.pause())},[o,e]),G=(0,i.useCallback)(()=>{e&&(p.current&&e.play(),x.current&&e.currentTime(x.current),_(null),x.current=void 0)},[e]),H=(0,i.useCallback)(r=>{if(e){if(L.current){x.current=r;return}e.currentTime(r)}},[e]),W=i.createElement(P,{togglePlay:B,hasEnded:o,isPlaying:F,shouldShowVideoControls:S,isFullscreen:r});return(e?.readyState()??0)<2&&!D.current?i.createElement("div",{className:y.bb},i.createElement(h.kt,{size:"large"})):(D.current=!0,u.Ay.isIpad&&r)?null:i.createElement(i.Fragment,null,m?null:W,i.createElement("div",{className:l()(y._v,!S&&y.YC)},i.createElement("div",{className:y.TN},w(k)," / ",w(M)),i.createElement(R,{currentTime:k||0,totalTime:M||0,onScrubStart:V,onScrub:_,onScrubEnd:G,onVideoPositionUpdated:H,hasEnded:o,isScrubbing:b,setIsScrubbing:I}),i.createElement("div",{className:y.yG},i.createElement(E.K0,{onClick:n,svg:r?v.A:T.A,className:y.TJ,"data-tooltip-type":f.Ib.TEXT,"data-tooltip":r?(0,g.t)("whiteboard.video.minimize_tooltip"):(0,g.t)("whiteboard.video.fullscreen_tooltip")}),i.createElement(O,{rerender:U,videoJsPlayer:e}))))}function O({rerender:e,videoJsPlayer:r}){let[n,a]=i.useState(!1),o=(0,i.useCallback)(()=>{r&&(r.muted(!r.muted()),e())},[e,r]),s=(0,i.useCallback)(n=>{let i=n.target.valueAsNumber;r&&(r.volume(i),r.muted(0===i),e())},[e,r]);return i.createElement("div",{onPointerMove:(0,i.useCallback)(()=>a(!0),[]),onPointerOut:(0,i.useCallback)(()=>a(!1),[])},i.createElement(E.K0,{onClick:o,svg:r?.muted()?I.A:b.A,className:l()(y.TJ,y.z9,{[y.BT]:!u.Ay.isIpad&&n}),"data-tooltip-type":f.Ib.TEXT,"data-tooltip":r?.muted()?(0,g.t)("whiteboard.video.unmute_tooltip"):(0,g.t)("whiteboard.video.mute_tooltip")}),!u.Ay.isIpad&&n?i.createElement(L,{volume:r?.volume()??1,muted:r?.muted()??!1,handleChange:s}):null)}function L({handleChange:e,volume:r,muted:n}){let a=n?0:r,o=100*a,s=i.useRef(null);return i.createElement("div",{className:y.qD},i.createElement("div",{className:y.sf},i.createElement("input",{className:y.Ct,style:{background:`linear-gradient(to right,var(--active-slider-color) 0%,var(--active-slider-color) ${o}%,var(--inactive-slider-color) ${o}%,var(--inactive-slider-color) 100%)`},type:"range",min:0,max:1,step:.02,value:a,onChange:e,ref:s})))}function R({currentTime:e,totalTime:r,hasEnded:n,onVideoPositionUpdated:o,onScrubStart:s,onScrub:l,onScrubEnd:c,isScrubbing:d,setIsScrubbing:p}){let[m,h]=i.useState(!1),_=i.useRef(null),g=i.useRef(null),f=(0,i.useCallback)(r=>{if(!_.current)return;r.stopPropagation(),p(!0),s();let n=_.current.getBoundingClientRect();g.current={minX:n.x,maxX:n.x+n.width,originX:r.clientX,newTime:e}},[e,s,p]),E=(0,i.useCallback)(e=>{if(!_.current)return;e.stopPropagation(),p(!0),s();let n=_.current.getBoundingClientRect(),i=n.x,l=n.x+n.width,c=e.clientX,d=(0,a.clamp)(0,(c-i)/(l-i)*r,r);o(d),g.current={minX:i,maxX:l,originX:e.clientX,newTime:d}},[s,o,p,r]),b=(0,i.useCallback)(e=>{if(!g.current)return;let n=e.clientX,{minX:i,maxX:s}=g.current,c=(0,a.clamp)(0,(n-i)/(s-i)*r,r);g.current.newTime=c,l(c),o(g.current.newTime)},[l,o,r]),I=(0,i.useCallback)(()=>{g.current&&(o(g.current.newTime),p(!1),c(),g.current=null)},[c,o,p]);i.useEffect(()=>{if(d)return document.addEventListener("pointermove",b),document.addEventListener("pointerup",I),()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",I)}},[d,b,I]);let T=Math.min(e/r*100,100);u.Ay.safari&&n&&(T=100);let v=T>0?8:0;return i.createElement("div",{className:y.It,onPointerMove:(0,i.useCallback)(()=>h(!0),[]),onPointerOut:(0,i.useCallback)(()=>h(!1),[])},i.createElement("div",{role:"progressbar",tabIndex:0,className:y.tS,onPointerDown:E},i.createElement("div",{className:y.xE,ref:_}),i.createElement("div",{className:y.CN,style:{width:`${T}%`}}),(m||d)&&i.createElement("div",{className:y.Yq,style:{left:`calc(${T}% - ${v}px)`},onPointerDown:f,role:"button",tabIndex:0})))}function P({shouldShowVideoControls:e,togglePlay:r,hasEnded:n,isPlaying:a,isFullscreen:o}){let s=M;return n?s=k:a&&(s=F),i.createElement(D,{shouldShowVideoControls:e,ButtonIcon:s,togglePlay:r,isFullscreen:o})}function D({ButtonIcon:e,shouldShowVideoControls:r,togglePlay:n,isFullscreen:a}){let[o,s]=i.useState(!1),c=o?S.BUTTON_BG_FILL_HOVER_OPACITY:S.BUTTON_BG_FILL_OPACITY;return i.createElement("button",{className:l()(y.CY,{[y.ct]:!r}),onPointerMove:(0,i.useCallback)(()=>s(!0),[]),onPointerOut:(0,i.useCallback)(()=>s(!1),[]),onPointerDown:n},i.createElement(e,{fillOpacityForBackground:c,isFullscreen:a}))}function k({fillOpacityForBackground:e,isFullscreen:r}){return i.createElement("svg",{className:l()(r&&y.J_),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24Z",fill:S.BUTTON_BG_FILL,fillOpacity:e}),i.createElement("path",{d:"M34 24C34 18.4772 29.7175 14 24.4348 14C20.5763 14 17.2515 16.3884 15.7391 19.8282V14H14V22.1818H21.8261V20.3636H17.4222C18.7028 17.6696 21.362 15.8182 24.4348 15.8182C28.757 15.8182 32.2609 19.4813 32.2609 24C32.2609 28.5187 28.757 32.1818 24.4348 32.1818C21.362 32.1818 18.7028 30.3304 17.4222 27.6364H15.5216C16.9131 31.3612 20.3792 34 24.4348 34C29.7175 34 34 29.5228 34 24Z",fill:S.BUTTON_SHAPE_FILL}),i.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:S.BUTTON_BG_FILL,strokeOpacity:S.BUTTON_STROKE_OPACITY}))}function M({fillOpacityForBackground:e,isFullscreen:r}){return i.createElement("svg",{className:l()(r&&y.J_),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_403_4259)"},i.createElement("rect",{width:"48",height:"48",rx:"24",fill:S.BUTTON_BG_FILL,fillOpacity:e}),i.createElement("path",{d:"M19 34V14L35 24L19 34Z",fill:S.BUTTON_SHAPE_FILL})),i.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:S.BUTTON_BG_FILL,strokeOpacity:S.BUTTON_STROKE_OPACITY}),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_403_4259"},i.createElement("rect",{width:"48",height:"48",rx:"24",fill:S.BUTTON_BG_FILL}))))}function F({fillOpacityForBackground:e,isFullscreen:r}){return i.createElement("svg",{className:l()(r&&y.J_),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_1_16)"},i.createElement("rect",{width:"48",height:"48",rx:"24",fill:S.BUTTON_BG_FILL,fillOpacity:e}),i.createElement("path",{d:"M15 15H21V33H15V15Z",fill:S.BUTTON_SHAPE_FILL}),i.createElement("path",{d:"M27 15H33V33H27V15Z",fill:S.BUTTON_SHAPE_FILL})),i.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:S.BUTTON_BG_FILL,strokeOpacity:S.BUTTON_STROKE_OPACITY}),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_1_16"},i.createElement("rect",{width:"48",height:"48",rx:"24",fill:S.BUTTON_BG_FILL}))))}i.memo(({src:e,fallbackSrc:r,useHLS:n=!1,autoPlay:a=!1,muted:s=!1,showControlsOnVideoLoad:p=!1,onEnded:h})=>{let[g,f]=i.useState();i.useEffect(()=>{(async()=>{window.VIDEOJS_NO_DYNAMIC_STYLE=!0,f(await (0,m.Fe)())})()},[]);let E=i.useRef(null),b=i.useRef(null),[I,T]=i.useState(null),[v,S]=i.useState(!1),[w,N]=i.useState(!1);i.useEffect(()=>{let e=E.current;if(e){let r=()=>{N(e=>!e)};return e.addEventListener(c.R7.fullscreenChangeEventName,r),()=>{e.removeEventListener(c.R7.fullscreenChangeEventName,r)}}},[]),i.useEffect(()=>{let e=b.current;e&&(e.style.height="100%",e.style.width="100%",e.style.objectFit=w?"contain":"cover")},[w]);let[O,L]=i.useState(!1);i.useEffect(()=>{O&&h?.()},[O,h]);let R=i.useRef(void 0),P=(0,i.useCallback)(()=>{S(!0),clearTimeout(R.current),R.current=setTimeout(()=>S(!1),3e3)},[]);i.useEffect(()=>{if(!b.current||!g)return;let e=!1,r=g.videoJs(b.current,{muted:s,autoplay:a&&!u.Ay.safari,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},()=>{e||T(r)});return()=>{r.dispose(),e=!0,T(null)}},[a,s,g]);let D=(0,i.useCallback)(async(e,i)=>{try{await (0,m.uz)(e,n,i)}catch{d.k.warn("Reverting to fallback video source"),await (0,m.uz)(r??null,!1,i)}p&&P()},[r,P,p,n]);i.useEffect(()=>{I&&e&&D(e,I)},[D,e,I]);let k=(0,i.useCallback)(()=>{if(w||document.fullscreenElement)c.R7.exitFullscreenFunc();else if(u.Ay.isIpad){let e=b.current;e?.webkitEnterFullscreen?.()}else{let e=E.current;e&&c.R7.requestFullscreenFunc.call(e)}},[w]);return i.createElement("div",{className:l()(y.j,{[y.Y5]:w}),ref:E,onPointerMove:P},i.createElement(o.E,{className:_.cx.hFull.wFull.bgTransparent.$,onClick:(0,i.useCallback)(()=>{I&&w&&A(I,O)},[O,w,I]),actionOnPointerDown:!0},i.createElement("video",{ref:b,crossOrigin:"anonymous",controls:u.Ay.isIpad&&w})),i.createElement(C,{videoJsPlayer:I,isFullscreen:w,toggleFullscreen:k,isActive:v,hasEnded:O,setHasEnded:L}))})},335666:(e,r,n)=>{"use strict";n.d(r,{X:()=>a});var i=n(411855);function a(e){let[r,n]=i.useState(!0);return i.useEffect(()=>{let r=new Image;r.onload=()=>{let e=r.width/r.height;n(!(Math.abs(e-2)<Math.abs(e-16/9)))},r.src=e||""},[e]),r}n(837324),n(629521)},654923:(e,r,n)=>{"use strict";n.d(r,{I:()=>l});var i=n(915440),a=n(466636),o=n(279453),s=n(555328);function l(e){let r=e&&(0,s.m3)(e)?e.monetized_resource_metadata.id:"-1",n=(0,i.Rs)(o.oro,{monetizedResourceMetadataId:r},{enabled:!0});if("loaded"!==n.status||n.errors?.length)return e?.community_resource_payment;{let{communityResourcePayment:e}=n.data;if(!e)return;return(0,a.xs)(e)}}},837324:(e,r,n)=>{"use strict";n.d(r,{Bl:()=>Y,Cg:()=>j,Co:()=>w,DV:()=>U,Dl:()=>k,Dm:()=>V,HD:()=>A,JJ:()=>C,ME:()=>$,Mk:()=>W,N6:()=>z,UI:()=>x,Uu:()=>H,Vm:()=>O,_t:()=>F,cX:()=>P,lW:()=>B,qD:()=>N,r7:()=>R,ss:()=>M,vC:()=>G,zS:()=>K});var i=n(188507),a=n(634832),o=n(841563),s=n.n(o),l=n(737947);n(22332),n(966712);var c=n(915440);n(391388);var d=n(96328);n(939863);var u=n(709495),p=n(357611),m=n(971120);n(675665);var h=n(97128);n(107877);var _=n(259927),g=n(99506),f=n(279453),E=n(555328),y=n(137459),b=n(813408),I=n(622139),T=n(376485);n(629521);var v=n(583894);n(566083);var S=n(146935);let w=new RegExp(/^[\w.]{0,30}$/),A=new RegExp(/^\w{0,15}$/);function N(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:e.versions[e.current_plugin_version_id]}function C(e){switch(e){case g.y4.SLIDE_TEMPLATE:return y.LE.SLIDES;case g.y4.WHITEBOARD:return y.LE.FIGJAM;case g.y4.CANVAS:case g.y4.PROTOTYPE:default:return y.LE.FIGMA}}function O(e){return L(e)?E.vt.HUB_FILE:"is_widget"in e?e.is_widget?E.vt.WIDGET:E.vt.PLUGIN:void(0,a.assertNever)(e)}function L(e){return"viewer_mode"in e}function R(e){return L(e)&&e.viewer_mode===g.y4.LIBRARY}function P(e){return null!==e&&"viewer_mode"in e&&e.viewer_mode===g.y4.SLIDE_TEMPLATE}var D=(e=>(e.HUB_FILES="hub_files",e.PLUGINS="plugins",e.WIDGETS="widgets",e))(D||{});function k(e){return function(e){switch(e){case E.vt.HUB_FILE:return h.Uo.FILE;case E.vt.PLUGIN:return h.Uo.PLUGIN;case E.vt.WIDGET:return h.Uo.WIDGET}}(O(e))}function M(e,{plural:r=!1}={}){let n=O(e);return r?n===E.vt.HUB_FILE?h.UF.FILE:n===E.vt.WIDGET?h.UF.WIDGET:h.UF.PLUGIN:n===E.vt.HUB_FILE?h.Uo.FILE:n===E.vt.WIDGET?h.Uo.WIDGET:h.Uo.PLUGIN}function F({resource:e}){return x({path:k(e),id:e.id,name:N(e)?.name??""})}function x({path:e,id:r,name:n}){let i=(0,d.fs)(n||"");return`/community/${e}/${r}${""===i?"":"/"}${i}`}function U(e){return`${location.origin}${F({resource:e})}`}function B(e){var r=document.createElement("input");r.style.position="fixed",r.style.top="-1000px",r.value=e,r.classList.add(_.Dm),document.body.appendChild(r),r.select(),document.execCommand("copy"),r.parentNode.removeChild(r)}function V(e,r){return r?.entity_type!==b.o1.USER||r?.id===e}function G(e,r){if(r)return r+" | Figma";if("/community"===l.Ay.location.pathname||!e)return"Add a little magic to your files";if("/community/plugins"===l.Ay.location.pathname)return"Powerful Plugins Made Just For Figma";if("/community/widgets"===l.Ay.location.pathname)return"Customize your space with Widgets";let n=[];return e.sort_by===u.e.Browse.PUBLISHED_AT?n.push("Newest"):e.sort_by===u.e.Browse.ALL_TIME?n.push("Top"):e.sort_by===u.e.Browse.POPULAR&&n.push("Trending"),e.editor_type===T.FW.FIGJAM?n.push("FigJam"):e.editor_type===T.FW.FIGMA&&n.push("Figma"),e.resourceType===m.L.BrowseResourceTypes.FILES?n.push("Files"):e.resourceType===m.L.BrowseResourceTypes.WIDGETS?n.push("Widgets"):e.resourceType===m.L.BrowseResourceTypes.PLUGINS?n.push("Plugins"):n.push("Resources"),e.tags?.length>0&&n.push(`tagged as ${e.tags.join(", ")}`),e.query&&n.push(`matching "${e.query}"`),n.join(" ")+" | Figma"}function H(e){return e?.stripe_account_status&&e.stripe_account_status!==v.P5.NONE&&e.stripe_account_status!==v.P5.ACCEPTED}function W(e){let r=N(e);return r&&r.name||""}function K(e){return e?"100%":Math.min(window.innerWidth,parseInt(S.communityViewerMaxWidth))}function j(e){return s()(e,(0,I.EB)())}function z(e){let r={};return e.carousel_media_urls&&Object.entries(e.carousel_media_urls).forEach(([e,n])=>{r[e]={...n,type:"image"}}),((0,E.I0)(e)||(0,E.xQ)(e))&&e?.carousel_videos&&Object.entries(e.carousel_videos).forEach(([e,n])=>{r[e]={...n,type:"video"}}),Object.entries(r).sort(([e],[r])=>parseInt(e)-parseInt(r)).map(([e,r])=>r)}function Y(e,r){let n=(0,i.d4)(e=>e.authedActiveCommunityProfile),a={profileId:n?.id||"",hubFileId:null,pluginId:null};return r===E.vt.HUB_FILE?a.hubFileId=e||null:a.pluginId=e||null,(0,c.Rs)(f.KLE,a,{enabled:!!a.profileId}).transform(e=>[!!e.communityHubLike,e.communityHubLike?.id||null])}function $(e,r){if(e===g._Y.DESIGN){if(r===g.y4.PROTOTYPE)return p.k.Editors.PROTOTYPE}else if(e===g._Y.WHITEBOARD||e===T.FW.FIGJAM)return p.k.Editors.FIGJAM;else if(e===g._Y.SLIDES)return p.k.Editors.SLIDES;else if(e===T.FW.DEV)return p.k.Editors.DEV_MODE;return p.k.Editors.FIGMA}},612776:(e,r,n)=>{"use strict";n.d(r,{Oh:()=>c,X5:()=>s,uY:()=>d,zI:()=>l});var i=n(411855),a=n(966712),o=n(218881);function s(){let{getConfig:e}=(0,o.I7)("cmty_resource_tile_and_row_redesign");return e().get("enabled",!1)}function l({isUI3:e}){return e&&!!(0,a.kc)().cmty_publish_modal_ui3_redesign}function c(){return(0,a.kc)().community_category_filter__by}function d(){let{getConfig:e}=(0,o.I7)("cmty_slides_publishing"),r=!!(0,a.kc)().piper_community_templates_publish;return(0,i.useCallback)(()=>e().get("enabled",!1)||r,[r,e])}n(106757)},913270:(e,r,n)=>{"use strict";n.d(r,{Gu:()=>v,MU:()=>m,gV:()=>S,sT:()=>_,wl:()=>p}),n(411855);var i=n(157663);n(737947);var a=n(566083),o=n(709495),s=n(910764),l=n(580857),c=n(357611),d=n(971120),u=n(944452);function p(e,r){return _(e,r)||(0,u.J5)(e,r)||function(e,r){let n=decodeURIComponent(e||location.pathname);if(!g.test(n)||f.test(n)||E.test(n))return;let i=("/"===n[0]?n.slice(1):n).split("/"),u={resourceType:d.L.BrowseResourceTypes.MIXED,tags:[],editor_type:c.k.Editors.ALL,sort_by:(0,o.H)(),price:a.C.ALL,category:null,following:!1,pagination:null,creators:l.Z.ALL};for(let e=0;e<b.length&&0!==i.length;e++){let r=b[e](i,u);r&&r[0]&&(i=r[1],u={...u,...r[0]})}u.editor_type=(0,s.G)(u.editor_type,u.resourceType),u.resourceType=(0,s.l)(u.editor_type,u.resourceType);let p=new URLSearchParams(location.search),m=!!p.get("following"),h=(()=>{let e=p.get("creators");return e&&e===l.Z.FOLLOWING?e:u.creators})();return{...u,following:m,creators:h}}(e)}function m(e){return"query"in e?function(e){let r=new URLSearchParams({resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,s.G)(e.editor_type,e.resourceType),price:e.price,creators:e.creators&&l.Z.isSearchType(e.creators)?e.creators:l.Z.ALL}).toString();return`/community/search?${r}`}(e):"category"in e&&null!==e.category?(0,u.iB)(e):function(e){let r="/community";e.tags?.length&&(r+=`/tag/${e.tags.join(",")}`),e.resourceType=(0,s.l)(e.editor_type,e.resourceType),e.resourceType!==d.L.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),"all"!==(0,s.G)(e.editor_type,e.resourceType)&&(r+=`/${e.editor_type}`),e.price&&a.C.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===l.Z.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&e.sort_by!==(0,o.H)()&&(e.sort_by===o.e.Browse.PUBLISHED_AT?r+="/new":e.sort_by===o.e.Browse.POPULAR&&(r+="/trending")),I[r]&&(r=I[r]);let n={};!0===e.following&&(n.following=e.following),e.creators===l.Z.FOLLOWING&&(n.creators=e.creators);let i=Object.keys(n).length>0?new URLSearchParams(n).toString():void 0;return i&&(r+=`?${i}`),r}(e)}let h=/^\/community\/search$/;function _(e,r){if(!(e||=location.pathname).match(h))return null;let n=new URLSearchParams(r||=location.search),i=n.get("query");if(!i)return null;let c=n.get("resource_type");if(!c)return null;let d=n.get("sort_by")||o.e.Search.RELEVANCY,u=(0,s.G)(n.get("editor_type"),c);return{resourceType:c,sort_by:d,editor_type:u,query:i,price:n.get("price")||a.C.ALL,creators:(()=>{let e=n.get("creators");return l.Z.isSearchType(e)?e:l.Z.ALL})()}}let g=/^\/community/,f=/^\/community\/collections?\/?/,E=/^\/community\/(file|plugin|widget)\//;var y=(e=>(e.NEW="new",e.POPULAR="popular",e.TRENDING="trending",e.TAG="tag",e.COMMUNITY="community",e))(y||{});let b=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){let r=e[0];return Object.values(d.L.BrowseResourceTypes).indexOf(r)>-1&&[{resourceType:r},e.slice(1)]},function(e,r){let n=e[0];return Object.values(c.k.Editors).indexOf(n)>-1&&[{editor_type:(0,s.G)(n,r.resourceType)},e.slice(1)]},function(e){let r=e[0];return a.C.FOR_URL_SLUG.indexOf(r)>-1&&[{price:r},e.slice(1)]},function(e){let r=e[0];return r===l.Z.FIGMA_PARTNER&&[{creators:r},e.slice(1)]},function(e){let r=null;return"new"===e[0]&&(r=o.e.Browse.PUBLISHED_AT),"popular"===e[0]&&(r=o.e.Browse.ALL_TIME),"trending"===e[0]&&(r=o.e.Browse.POPULAR),!!r&&[{sort_by:r},e.slice(1)]}],I={"/community/mixed":"/community"};var T=(e=>(e.SEARCH="/community/search",e))(T||{});function v(){return{resourceType:d.L.BrowseResourceTypes.MIXED,sort_by:(0,o.H)(),editor_type:c.k.Editors.ALL,price:a.C.ALL,tags:[],pagination:null,category:null,creators:l.Z.ALL}}function S(e){return/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!0,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(i.k.warn(`If this is firing, it means you're trying to use logged-out Community routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}d.L.BrowseResourceTypes.MIXED,o.e.Search.RELEVANCY,c.k.Editors.ALL,a.C.ALL,l.Z.ALL},815063:(e,r,n)=>{"use strict";function i(e,r,n){return Object.values(r).includes(e)?e:n}n.d(r,{S:()=>i})},466636:(e,r,n)=>{"use strict";n.d(r,{F8:()=>h,Lt:()=>C,Mj:()=>g,QQ:()=>S,UO:()=>A,V4:()=>N,WD:()=>_,X2:()=>I,XR:()=>b,Yp:()=>f,ae:()=>m,bV:()=>y,mZ:()=>u,up:()=>T,vf:()=>p,vi:()=>v,xs:()=>O,zt:()=>E});var i=n(527735),a=n(939863),o=n(61057),s=n(820113),l=n(555328),c=n(401730),d=n(178787);let u=2;function p(e){if(e?.price){let{price:r}=e;return .01*r}}function m(e){return e?100*e:0}function h(e){return e%1!=0}function _(e,r){return r>e}function g(e,r){return r/e>1.5}function f(e){return e<u||e>=1e3}function E(e,r){if(!e||!r)return"";let n=1200*e*(1-r/100);return(0,a.t)("community.buyer.price_per_year",{priceString:T(n,n%100!=0)})}function y(e,r=!1){let{price:n,is_subscription:i}=e;if(!i)return T(n,!1);if(r){let r=e.annual_price||0;return(0,a.t)("community.buyer.price_per_year",{priceString:T(r,r%100!=0)})}return(0,a.t)("community.buyer.price_per_month",{priceString:T(n,n%100!=0)})}function b(e){let r=y(e),n=(0,d.Uv)(e)?(0,a.t)("community.buyer.subscribe"):(0,a.t)("community.buyer.buy");return`${n} ${r}`}function I(e){let{price:r,is_subscription:n}=e,i=T(r,r%100!=0);return n?(0,a.t)("community.buyer.price_per_month_subscription",{priceString:i}):(0,a.t)("community.buyer.price_one_time_payment",{priceString:i})}function T(e,r=!1){return new s.vr("usd").formatMoney(e,{showCents:r})}function v(e){switch(e){case d.bG.DOESNT_MEET_NEEDS:return(0,a.t)("community.buyer.refund_reason.doesnt_meet_needs");case d.bG.TECHNICAL_ISSUES:return(0,a.t)("community.buyer.refund_reason.technical_issues");case d.bG.TOO_EXPENSIVE:return(0,a.t)("community.buyer.refund_reason.too_expensive");case d.bG.FOUND_ALTERNATIVE:return(0,a.t)("community.buyer.refund_reason.found_alternative");case d.bG.OTHER:return(0,a.t)("community.buyer.refund_reason.other")}}function S(e){return!!e&&(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at))?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!w(e,c.G3.DISPUTED):w(e,c.G3.SUCCEEDED))}function w(e,r){return!!e.status&&e.status===r}function A(e){return e.status===c.G3.SUBSCRIPTION_PAYMENT_FAILED||e.status===c.G3.INVOICE_FINALIZATION_FAILED}function N(e,r){if((0,l.I0)(r)||(0,l.xQ)(r)){let n=(r.plugin_publishers?.accepted||[]).map(e=>e.id),a=(r.plugin_publishers?.pending||[]).map(e=>e.id),o=new Set(n.concat(a)),{pass:s,fail:l}=(0,i.j)(e,e=>o.has(e.id)||e.id===r.creator.id);return{usersCanPurchase:l,publishers:s}}{let n=new Set((0,o.D)(r)),{pass:a,fail:s}=(0,i.j)(e,e=>n.has(e.id));return{usersCanPurchase:s,publishers:a}}}function C({resource:e,payment:r}){let n=e.monetized_resource_metadata;return!!(n&&(0,d.Uv)(n))&&!!n.trial_length_in_days&&(!r||!r.subscription_expires_at)}function O(e){return{status:c.QK[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}},22863:(e,r,n)=>{"use strict";n.d(r,{c:()=>a});var i=n(813408);function a(e){return!!(e&&(e.entity_type===i.o1.ORG||e.entity_type===i.o1.TEAM))}},545941:(e,r,n)=>{"use strict";n.d(r,{AC:()=>p,G8:()=>d,Pg:()=>h,Ul:()=>m,cB:()=>g,lT:()=>_,mk:()=>u});var i=n(296210),a=n.n(i),o=n(776250),s=n(99506),l=n(967409);function c(e){let r=document.createElement("div");return r.innerHTML=a().sanitize(e),r.innerText}function d(e,r,n){if(e.tagline)return e.tagline;let i=(r=r||c)(e.description);return n?function(e){let r=e?.match(/[^.!?\r\n]+[.!?\r\n]+/);return r?r[0].trim():e??""}(i):i}function u(e){return"unique_run_count"in e?e.unique_run_count:e.duplicate_count}function p(e){return!!e.publishing_status&&[s.KB.PENDING_PUBLIC,s.KB.PENDING_USER_VISUAL_COMPLIANCE,s.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function m(e){return e.publishing_status===s.KB.APPROVED_PUBLIC}function h(e){return!!e.publishing_status&&[s.KB.DELISTED,s.KB.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function _(e){return e.publishing_status===s.KB.BLOCKED}function g(...e){let{trackingEventName:r,trackingProperties:n}=function(e,r,n,i,a="feed"){return{trackingEventName:"Community Resource Clicked",trackingProperties:{resource_type:e,community_resource_id:r,subView:a,scope:l.Rx.COMMUNITY,index:n,searchSessionId:i}}}(...e);(0,o.sx)(r,n)}},609271:(e,r,n)=>{"use strict";n.d(r,{XY:()=>d,hJ:()=>u});var i=n(411855),a=n(91408),o=n(358145),s=n(860168);let l=(0,a.hG)(s.dOH);function c({mediaQuery:e,children:r,onShow:n,onHide:a}){let s=i.useMemo(()=>window.matchMedia(e),[e]),[l,c]=i.useState(s.matches),d=(0,o.ZC)(l);return(i.useEffect(()=>{let e=()=>c(s.matches);return s.addEventListener("change",e),()=>s.removeEventListener("change",e)},[s]),i.useEffect(()=>{(void 0===d||d!==l)&&(l&&n&&n(),!l&&a&&a())},[l,d,n,a]),l)?i.createElement(i.Fragment,null,r):null}function d({children:e}){return i.createElement(c,{mediaQuery:`(max-width: ${l-1}px)`},e)}function u({children:e}){return i.createElement(c,{mediaQuery:`(min-width: ${l}px)`},e)}},62589:(e,r,n)=>{"use strict";n.d(r,{nS:()=>o}),n(411855);var i=n(753178),a=n(179940);n(776621);class o{constructor(...e){let[r,n,i]=e;this.params=r??{},this.search=n??{},this.state=i??{}}get pathname(){return(0,i.tW)(this.constructor.path,this.params)}get queryString(){let e=Object.fromEntries(Object.entries(this.search).filter(([,e])=>void 0!==e));return 0===Object.keys(e).length?"":`?${(0,a.lF)(e)}`}get href(){return`${this.pathname}${this.queryString}`}get to(){return{pathname:this.pathname,search:this.queryString,state:this.state}}}},709595:(e,r,n)=>{"use strict";n.d(r,{c9:()=>o,oW:()=>l,tx:()=>s});var i=n(262896);let a="8065774696727";function o(e,r){(0,i.ny)({name:e.name,email:e.email},{ticketForms:["community"],fields:r,suppressAnswerBot:!0})}function s(e){return o(e,[{id:a,value:"community_product_question"}])}function l(e){return o(e,[{id:a,value:"community_refund"}])}},675665:(e,r,n)=>{"use strict";var i=n(330654),a=n(555328),o=(e=>(e.file="hub_files",e.plugin="plugins",e.widget="widgets",e))(o||{});i.object({comments:i.array(a.KS).nullable(),total_count:i.number().optional()});var s=(e=>(e.DescriptionView="descriptionViewSection",e.CommentsView="commentsViewSection",e))(s||{})},742580:(e,r,n)=>{"use strict";function i(e){return!!e&&void 0!==e.query}n.d(r,{LJ:()=>a,OE:()=>i});var a=(e=>(e.accessibility="accessibility",e.brainstorming="brainstorming",e.classroomActivities="classroom-activities",e.dataTemplates="data-templates",e.designInspirations="design-inspirations",e.designTemplates="design-templates",e.designTools="design-tools",e.desktopAppsWebsites="desktop-apps-websites",e.development="development",e.diagramming="diagramming",e.editingEffects="editing-effects",e.education="education",e.fileOrganization="file-organization",e.fontsTypography="fonts-typography",e.funGames="fun-games",e.icons="icons",e.illustrations="illustrations",e.importExport="import-export",e.instagramTemplates="instagram-templates",e.laptopMockups="laptop-mockups",e.libraries="libraries",e.mobileApps="mobile-apps",e.portfolios="portfolio-templates",e.calendarTemplates="calendar-templates",e.presentations="presentations",e.prototypingAnimation="prototyping-animation",e.resumes="resume-templates",e.shapesColors="shapes-colors",e.stockPhotography="stock-photography",e.strategicPlanning="strategic-planning",e.teamMeetings="team-meetings",e.tutorials="tutorials",e.uiKits="ui-kits",e.visualAssets="visual-assets",e.whiteboarding="whiteboarding",e.wireframes="wireframes",e.workshopTemplates="workshop-templates",e))(a||{}),o=(e=>(e.LANDING="landing",e.NAV="nav",e))(o||{})},592597:(e,r,n)=>{"use strict";n.d(r,{iB:()=>l});var i=n(216158),a=n(555328),o=n(28567),s=n(222085);let l=i.M4.Query({fetch:async e=>(await o.c.getAll({editorType:e})).data.meta});i.M4.Query({fetch:async e=>(await o.c.getCategoryBySlug({slug:e.categorySlug,tagSlug:e.tagSlug})).data.meta}),i.M4.Query({fetch:async e=>(await s.A.getCommunityShelves({categorySlug:e,shelfType:a.cS.CATEGORY_PAGE})).data.meta[0]})},944452:(e,r,n)=>{"use strict";n.d(r,{J5:()=>g,iB:()=>f});var i=n(753178),a=n(737947),o=n(179940),s=n(566083),l=n(815063),c=n(62589),d=n(709495),u=n(910764),p=n(580857),m=n(357611),h=n(971120),_=n(742580);function g(e,r){let n=decodeURIComponent(e||a.Ay.location.pathname),o=(0,i.B6)(n,{path:E.path});if(!o)return null;let c=(0,l.S)(o.params.categorySlug,_.LJ);if(void 0===c)return null;let g=E.parseQueryString(r||a.Ay.location.search),f=o.params.tagSlug,y={category:c,resourceType:g.resource_type||h.L.BrowseResourceTypes.MIXED,editor_type:m.k.Editors.ALL,price:g.price||s.C.ALL,creators:p.Z.ALL,sort_by:(0,d.H)(),following:!1,tags:f?[f]:[],pagination:null};y.editor_type=c!==_.LJ.presentations||g.editor_type?(0,u.G)(g.editor_type,y.resourceType):m.k.Editors.SLIDES,y.resourceType=(0,u.l)(y.editor_type,y.resourceType);let b=g.sort_by;b&&[d.e.Browse.ALL_TIME,d.e.Browse.PUBLISHED_AT,d.e.Browse.POPULAR].includes(b)&&(y.sort_by=b);let I=g.creators;return I&&[p.Z.FIGMA_PARTNER,p.Z.FOLLOWING].includes(I)&&(y.creators=I),y}function f(e){let r=(0,l.S)(e.category,_.LJ);return void 0===r?"/community":new E({categorySlug:r,tagSlug:e.tags[0]},{resource_type:(0,u.l)(e.editor_type,e.resourceType),editor_type:(0,u.G)(e.editor_type,e.resourceType),price:e.price,sort_by:e.sort_by,creators:e.creators}).href}class E extends c.nS{constructor(e,r){super(e,r)}}E.path="/community/:categorySlug/:tagSlug?",E.parseQueryString=e=>{let r=(0,o.xL)(e);return{resource_type:(0,l.S)(r.resource_type,h.L.BrowseResourceTypes),editor_type:(0,l.S)(r.editor_type,m.k.Editors),price:(0,l.S)(r.price,s.C.Price),sort_by:(0,l.S)(r.sort_by,d.e.Browse),creators:(0,l.S)(r.creators,p.Z.Browse)}},Array.from(Object.values(_.LJ)).map(e=>new E({categorySlug:e}).href)},97128:(e,r,n)=>{"use strict";n.d(r,{UF:()=>s,Uo:()=>o});var i=n(179940),a=n(62589),o=(n(637590),(e=>(e.FILE="file",e.WIDGET="widget",e.PLUGIN="plugin",e))(o||{})),s=(e=>(e.FILE="files",e.WIDGET="widgets",e.PLUGIN="plugins",e))(s||{});class l extends a.nS{}l.parseQueryString=e=>{let r=(0,i.xL)(e);return{comment:r.comment,checkout:r.checkout,rating:r.rating}}},409272:(e,r,n)=>{"use strict";n.d(r,{yT:()=>H});var i=n(411855),a=n(188507),o=n(459401),s=n(380620),l=n(615925),c=n(629019),d=n.n(c),u=n(38580),p=n(374626),m=n(153234),h=n(58860),_=n(717421),g=n(46481),f=n(939863),E=n(175290),y=n(87816),b=n(308977),I=n(855473),T=n(110309),v=n(962645),S=n(31225),w=n(970516),A=n(738269),N=n(259927),C=n(672517),O=n(498606),L=n(507956),R=n(788612),P=n(7959),D=n(536801),k=n(335098),M=n(565358),F=n(962084),x=n(522157);let U=(0,u.eU)(!1),B=(e,r={})=>(0,o.removeNullish)(e.map(e=>e.lines.length>0?(0,v.kt)(e.lines,!0):null)).join("\n\n").replace(I.Z4,"").replace(I.M$,"").replace(T.G6,"").replace(T.P1,"").replace(y.k,e=>{let n=r[e];return n?"INSTANCE"===n.type?`/* ${n.name} */`:`/* ${n.message} */`:"/* unknown instance */"}),V=(0,C.tf)(s.E);function G({source:e,title:r,selectedAll:n,...a}){let o=(0,L.ks)(),l=(0,b.v4)(),c=(0,i.useMemo)(()=>({name:"Copy code button",type:"code connect"!==e?l.type:void 0,pluginId:"code connect"!==e?l.id:void 0,selectedAll:n,source:e,title:r,isDevMode:o}),[o,l.id,l.type,n,e,r]);return e?i.createElement(V,{...a,className:d()(F.AF,F.cL),trackingProperties:c}):i.createElement(s.E,{...a,className:d()(F.AF,F.cL)})}function H(e){let{code:r,section:n,hasCodeDiff:o,collapseLongSections:s=!0,bottomPadding:c=!1,copyActionEnabled:u=!0,copyAllActionEnabled:h=!0,hideHints:_=!1,recordingKey:y,additionalHeaderActions:b=null,footerActions:I=null,type:T="default",leftHeaderActions:S=null}=e;n.collapseAfterIndex||(n={...n,collapseAfterIndex:15});let C=(0,a.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),L=(0,a.wA)(),P=function(e){let r=(0,a.wA)();return(0,k.IG)(e.lines,e.language,e.pills,r)}(n),[D,M]=i.useState(s),[V,H]=i.useState(!1),[Y,$]=(0,p.fp)(U),q=h&&Y;i.useEffect(()=>{M(s)},[C,s]);let Z=i.useMemo(()=>D&&n.collapseAfterIndex?P.slice(0,n.collapseAfterIndex):P,[P,n.collapseAfterIndex,D]),X=n.collapseAfterIndex?P.length-n.collapseAfterIndex:0,J=e.codeToCopy||r,Q=e.sectionToCopy||n,ee=i.useCallback(()=>{if(!q)return B([Q],Q.pills);{let e=J.reduce((e,r)=>Object.assign(e,r.pills),{});return B(J,e)}},[J,Q,q]),et=i.useCallback(()=>{let e=ee();e&&L(w.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[L,ee]),er=m.rf(m.Pt(y,"copy"),"click",et),en=i.useCallback(()=>{L(w.lW({stringToCopy:window.getSelection()?.toString()||ee(),ignoreLineBreaks:!1}))},[L,ee]),ei=i.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:r,clientY:n}=e;L(A.j7({type:N.Sl,data:{clientX:r,clientY:n,onCopyText:en}}))},[en,L]),ea=i.useCallback(e=>{h&&$(e.shiftKey),H(!0)},[$,h]),eo=m.rf(m.Pt(y,"copy"),"mouseenter",ea),es=i.useCallback(e=>{$(!1),H(!1)},[$]),el=i.useCallback(e=>{$(V&&h&&e.shiftKey)},[V,$,h]);i.useEffect(()=>(document.addEventListener("keydown",el),document.addEventListener("keyup",el),()=>{document.removeEventListener("keydown",el),document.removeEventListener("keyup",el)}),[el]);let ec=function(e){switch(e){case"Modifier":return(0,f.t)("inspect_panel.code.modifier");case"Code":return(0,f.t)("inspect_panel.code.code");case"Style":return(0,f.t)("inspect_panel.code.style");case"Variables":return(0,f.t)("inspect_panel.code.variables");case"Layout":return(0,f.t)("inspect_panel.properties.layout");case"Position":return(0,f.t)("inspect_panel.code.position");case"Other":return(0,f.t)("inspect_panel.code.other");case"Typography":return(0,f.t)("inspect_panel.typography.title");default:return e}}(n.name),ed=V||q,eu=i.useRef(null);return i.createElement(R.VZ,{hideHeader:!0,padding:c?R.UZ.DEFAULT:R.UZ.NONE,noBorder:!0,recordingKey:`code:${n.name}`},i.createElement(k.GM.Provider,{value:{ref:eu}},i.createElement(z,{type:T,header:i.createElement(K,{type:T,rowRef:eu,muted:n.isTextSegment,actions:i.createElement(i.Fragment,null,b||i.createElement(E.M,null),u&&i.createElement(G,{onClick:er,"aria-label":(0,f.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip":h?(0,f.t)("inspect_panel.code.copy_all_shift"):"","data-tooltip-type":O.Ib.TEXT,onMouseEnter:eo,onMouseLeave:es},source:"codegen",title:n.name,selectedAll:q},i.createElement(g.U,{svg:x.A},i.createElement(l.X,null)))),title:ec,leftActions:S}),content:i.createElement(W,{code:n,lines:Z,hideHints:_||ed,hasCodeDiff:o,isCopyHighlightActive:ed,onInstancePillClick:e.onInstancePillClick}),shouldShowMore:D&&X>0,showMoreLinesCount:X,onShowMore:()=>M(!1),copyHoverClassName:u&&ed?F.TJ:void 0,leftGutter:o?function(e,r=!1){return i.createElement("div",{className:d()(F.x4,{[F.R]:r})},e.map((e,r)=>i.createElement("div",{className:d()({[F.BJ]:!0,[F.L6]:e.diff===v.j5.ADDED,[F.pG]:e.diff===v.j5.REMOVED}),key:r},e.diff===v.j5.ADDED?"+":e.diff===v.j5.REMOVED?"-":null)))}(Z,ed):i.createElement("div",{className:F.BA},Z.map((e,r)=>i.createElement("div",{className:F.eT,key:r},r+1))),onContextMenu:ei,footer:I?i.createElement(j,{type:T},I):void 0})))}function W({code:e,lines:r,hideHints:n,hasCodeDiff:a,isCopyHighlightActive:o=!1,onInstancePillClick:s}){let l=i.useCallback(e=>{let r;let n=e.target;n.classList.contains("instance-pill")?r=n:n.parentElement?.classList.contains("instance-pill")&&(r=n.parentElement),r&&s?.(r.dataset.id||"")},[s]),c=({index:s})=>{let c=r[s],u=8*(0,v.Gj)(c).length+16+8,p=i.createElement("span",{style:{display:"inline-block",paddingLeft:u,paddingRight:8,textIndent:-16,flexGrow:1},key:"code","data-testid":`${e.name}${s}`,role:"none",onClick:l},c.code),m=c.hint,h=void 0!==m&&m.type===S.bv.Tooltip?i.createElement(D.A,{hint:(0,D.x)(m),hidden:n}):null,_=e.lines[s]?.diff;return i.createElement("div",{key:s,className:d()({[F.n8]:!0,[F.vN]:_===v.j5.ADDED&&!o,[F.rq]:_===v.j5.REMOVED&&!o,[F.R0]:a&&_!==v.j5.ADDED&&_!==v.j5.REMOVED&&!o,[F.r9]:a&&_===v.j5.REMOVED&&o})},p,h)};return i.createElement("code",{className:d()(F.Zh,M.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},r.map((e,r)=>c({index:r})))}function K({title:e,muted:r,actions:n,type:a,leftActions:o,rowRef:s}){return i.createElement("div",{className:F.Tw,ref:s},i.createElement("div",{className:d()({[F.S7]:!0,[F.aW]:"connected"===a,[F.jW]:"manual"===a})},o,i.createElement(P.xw,{className:r?F.fH:F.Cq,"data-testid":"devHandoffFocusPanelTitle"},e),i.createElement("div",{className:F.zB},n)))}function j({children:e,type:r}){return i.createElement("div",{className:F.p4},i.createElement("div",{className:d()({[F.I$]:!0,[F.aW]:"connected"===r,[F.jW]:"manual"===r})},e))}function z({header:e,content:r,leftGutter:n,footer:a,type:o,shouldShowMore:s,showMoreLinesCount:l,onShowMore:c,onContextMenu:u,copyHoverClassName:p}){let[m,g]=i.useState(null),E=m&&m.value?F.Lo:F.ZP,y=i.useCallback(e=>{g({value:e})},[]),b=!!n,I=!!a,T=i.useRef(null);return i.createElement("div",{className:d()(F._X)},e,i.createElement("div",{className:d()(F.is,p,{[F.Eu]:b,[F.xP]:I,[F.aW]:"connected"===o,[F.jW]:"manual"===o})},b&&n,i.createElement("div",{className:F.jJ},i.createElement(h.Z,{onCanScrollChanged:y,className:d()(E),scrollBarAlways:!0,childRef:T},i.createElement("div",{onContextMenu:u,style:{width:"fit-content",minWidth:"100%"},ref:T},r)),s&&i.createElement("div",{className:F.cH},i.createElement(_.d,{label:(0,f.t)("dev_handoff.code.show_more",{count:l}),onClick:c})))),I&&a)}},308977:(e,r,n)=>{"use strict";n.d(r,{A0:()=>E,AC:()=>S,Ap:()=>y,LK:()=>f,MT:()=>h,NU:()=>b,Pt:()=>v,S8:()=>I,XP:()=>T,p:()=>g,uz:()=>_,v4:()=>A,xv:()=>w});var i=n(411855),a=n(188507),o=n(966712),s=n(374626),l=n(986291),c=n(939863),d=n(756085),u=n(215822),p=n(239671),m=n(638311);let h="FIGMA_PROPERTIES",_="WEB",g="IOS",f="ANDROID",E="CSSBUILDER",y="IOS_UIKIT",b="ANDROID_XML",I={[_]:{type:"first-party",id:_},[g]:{type:"first-party",id:g},[y]:{type:"first-party",id:y},[f]:{type:"first-party",id:f},[b]:{type:"first-party",id:b}};function T(e){let r="string"==typeof e?{type:"first-party",id:e}:e;return r&&r.id&&("first-party"!==r.type||I[r.id])?r:{type:"first-party",id:_}}function v(e){let r=(0,d.$1)(),n=(0,d.j8)();return(0,i.useMemo)(()=>({format(i){if(i?.type==="first-party")switch(i?.id){case E:return"CssBuilder";case _:return(0,c.t)("dev_handoff.code.lang_css");case g:return(0,c.t)("dev_handoff.code.lang_swiftui");case y:return(0,c.t)("dev_handoff.code.lang_uikit");case f:return(0,c.t)("dev_handoff.code.lang_compose");case b:return(0,c.t)("dev_handoff.code.lang_android_xml");case h:return(0,c.t)("dev_handoff.code.lang_figma")}if(e){let a=i?.type==="local-plugin"?r[i.id]:i?.type==="published-plugin"&&e.plugin_id===i?.id?n[i.id]??e:null;if(a)return 1===(0,m.m)(a).length?a.name:(0,m.X)(a,i?.pluginLanguage??"").label??a.name}return""}}),[n,r,e])}function S(e){let r=(0,a.d4)(e=>e.selectedView),n="fullscreen"===r.view?r.editorType:null,i=(0,d.S0)("first-party"!==e.type?e.id:"",{searchLocalPlugins:!0,searchPublishedPlugins:!0}),{plugin:o}=(0,d._P)("published-plugin"===e.type?e.id:"0","published-plugin"===e.type);if("orgAdminSettings"!==r.view&&n!==p.nT.DevHandoff)return null;let s=i||o;return s&&(0,u.M5)(s)?s:null}function w(e,r){if(!e||!e.codeSyntax)return null;switch(r){case _:case E:return e.codeSyntax[0]??null;case f:case b:return e.codeSyntax[1]??null;case g:case y:return e.codeSyntax[2]??null}return null}function A(){let e=(0,s.md)(l.D),r=(0,a.d4)(e=>e.mirror.appModel.devHandoffCodeLanguage),n=(0,a.d4)(e=>e.selectedView),o=r;return"orgAdminSettings"===n.view&&e&&(o=e),(0,i.useMemo)(()=>T(o),[o])}(0,o.kc)().dt_lego_ext_plugins&&(I[E]={type:"first-party",id:E})},19741:(e,r,n)=>{"use strict";n.d(r,{BT:()=>o,Ju:()=>l,q$:()=>s});var i=n(587670);let a=[];function o(e){a.push(e),a.length&&i.w3z.setIsNodeChangeCallbackRegistered(!0)}function s(e){(a=a.filter(r=>r!==e)).length||i.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){}},393812:(e,r,n)=>{"use strict";n.d(r,{Mx:()=>s,ZC:()=>l});var i=n(587670),a=n(534611),o=n(279702);function s(e){return!!e?.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}function l(e){if(!e||!(0,a.fn)((0,a.sH)(e)))return o.PW.ASSET_COMPONENT;try{return i.w3z.getAssetInfo(e)?.type??o.PW.ASSET_COMPONENT}catch(e){console.warn(e)}return o.PW.ASSET_COMPONENT}},332034:(e,r,n)=>{"use strict";var i=n(411855),a=n(188507),o=n(374626),s=n(799569),l=n(946689),c=n(939863),d=n(931828),u=n(726864),p=n(226055),m=n(456104),h=n(988022),_=n(582947),g=n(29680),f=n(601607),E=n(397065),y=n(699857),b=n(746806),I=n(63666),T=n(502601),v=n(70964),S=n(588694),w=n(601538),A=n(463546),N=n(839662),C=n(304516);let O="dev_handoff_seen_marketing_overlay",L=(0,_.r1)(O);function R({target:e}){let r=(0,u.hX)(`[data-onboarding-key=${e}]`);if(!r)return null;let n=r.left+r.width/2,a=r.top+r.height;return i.createElement("div",{className:N.Wn,style:{left:n-8,top:a+8}},i.createElement(I.gm,{arrowPosition:b.F_.TOP,arrowOffset:0,modalColor:"var(--color-bg)"}))}i.memo(function(){let e=(0,g.aV)(),r=(0,a.d4)(e=>e.mirror.appModel.currentPage),n=(0,a.wA)(),u=(0,a.Pj)(),_=i.useRef(!0),b=(0,o.md)(L),I=(0,m.e)({overlay:A.Qqu,priority:E.N.DEFAULT_MODAL},[b]),P=(0,i.useCallback)(()=>{I.show({canShow:e=>!e,onShow:()=>{n(d.b({[O]:!0})),(0,h.ds)("Dev Handoff Marketing Popup Shown",u.getState().openFile?.key,u.getState())}})},[I,n,u]),D=(0,f.Fk)((e,r)=>!!r&&!!e.get(r)?.childrenGuids?.length,r);(0,i.useEffect)(()=>{e||(_.current&&D&&P(),_.current=!1)},[P,e,r,D]);let k=(0,y.U)("modal"),M=(0,i.useCallback)(()=>{I.complete(),k("handoff")},[I,k]),F=(0,i.useCallback)(()=>{I.complete(),(0,h.ds)("Dev Handoff Marketing Popup Dismissed",u.getState().openFile?.key,u.getState())},[I,u]),x=(0,p.GS)()?w.ON:"dev_handoff_marketing_overlay_anchor_key";return I.isShowing?i.createElement(T.Q,null,i.createElement(S.x,{target:x}),i.createElement(R,{target:x}),i.createElement("div",{className:N.yl},i.createElement("div",{className:N.jE},i.createElement("div",{className:N.wx},i.createElement("p",{className:N.TK},(0,c.tx)("dev_handoff.onboarding.pointer_modal.title")),i.createElement(s.Jn,{onClick:F,svg:C.A})),i.createElement(v.Gv,{src:"https://static.figma.com/uploads/f002267b1461462f42a75efcf6b5dd8d77e6ac32"}),i.createElement("div",{className:N.OQ},i.createElement("p",{className:N.h_},(0,c.tx)("dev_handoff.onboarding.pointer_modal.description")),i.createElement("div",{className:N.cQ},i.createElement(l.M7,{onClick:F,recordingKey:"dismissPersistentInspectModal"},(0,c.tx)("dev_handoff.onboarding.pointer_modal.not_now_button")),i.createElement(l.KL,{onClick:M,recordingKey:"switchToInspectModeFromPersistentModal"},(0,c.tx)("dev_handoff.onboarding.pointer_modal.primary_button"))))))):null})},806284:(e,r,n)=>{"use strict";n.d(r,{je:()=>s});var i=n(411855);n(188507),n(587670),n(794272);var a=n(153234),o=n(522739);function s({text:e,isActive:r,onClick:n,recordingKey:s,isSingle:l}){return i.createElement(o.D8,{role:"button",recordingKey:a.Pt(s,"tab"),onMouseDown:n,tabIndex:0,className:l?"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabsHeader--Tv3Sg":r?"dev_handoff_panel_tab_group--tabActive--Ex7NX pages_panel--tabActive--BitzC pages_panel--tab--Uge5B":"dev_handoff_panel_tab_group--tab--Y0iYX pages_panel--tab--Uge5B","data-label":e},e)}n(762638),n(939863),n(175290),n(809840),n(519685),n(931828),n(226055),n(561004),n(554294),n(118658),n(978527),n(157147),n(252828),n(785315)},86538:(e,r,n)=>{"use strict";n.d(r,{HT:()=>c,RB:()=>d});var i=n(38580),a=n(288706),o=n(529928);let s=(0,i.eU)(void 0),l=(0,o.bt)(e=>e.universalInsertModal.initialFdView),c=(0,a.t_)(e=>{let r=e(l),n=e(s);return r||n||"recents_and_saved"}),d=(0,i.eU)(!1)},603689:(e,r,n)=>{"use strict";n.d(r,{sX:()=>u}),n(411855);var i=n(587670),a=n(91408),o=n(38580);n(617453);var s=n(860168);let l=(0,a.jz)(s.QBm),c=300+l,d=640+l;function u(){return Math.max(c,Math.min(d,(i.Ez5?.editorPreferences().devHandoffInspectSplitPosition.getCopy()??0)||0))}(0,o.eU)(!1)},870505:(e,r,n)=>{"use strict";var i=n(91408),a=n(38580),o=n(860168);let s=(0,i.jz)(o.YI7),l=(0,i.jz)(o.Qhc);(0,a.eU)(s+l)},85304:(e,r,n)=>{"use strict";n.d(r,{e:()=>l}),n(411855);var i=n(38580),a=n(374626);n(30637);var o=n(507956);let s=(0,i.eU)(!1);function l(){let e=(0,o.LS)(),[r]=(0,a.fp)(s);return r&&e}},256975:(e,r,n)=>{"use strict";n.d(r,{Nc:()=>l,U4:()=>d,_I:()=>c,tn:()=>s});var i=n(188507);n(915440);var a=n(335682);n(279453);var o=n(479296);let s=(0,o.n)(e=>{let r=(0,a.tB)({openFile:e.openFile??null});return r?.canAccessFullDevMode??!0}),l=(0,o.n)(e=>{let r=(0,a.tB)({openFile:e.openFile??null});return r?.canAccessDevModeEntryPoint??!0});function c(){return(0,i.d4)(s)}function d(){return(0,i.d4)(l)}},400181:(e,r,n)=>{"use strict";n.d(r,{O:()=>K});var i=n(411855),a=n(188507),o=n(767129),s=n(593961),l=n(101165),c=n(183686),d=n(143984),u=n(587670),p=n(86625),m=n(629019),h=n.n(m);n(758271);var _=n(776250),g=n(91408),f=n(966712),E=n(268537);n(194400);var y=n(574176),b=n(939863),I=n(118830),T=n(444736),v=n(239349),S=n(46415),w=n(738269),A=n(696673);n(617453),n(779709);var N=n(843495);n(335682),n(100197),n(147206);var C=n(471224);n(793485);var O=n(279702),L=n(498606),R=n(620722);n(788612);var P=n(297281),D=n(60968),k=n(227795),M=n(538697),F=n(343827),x=n(146935),U=n(862473),B=n(139387),V=n(968109);let G=4*(0,g.jz)(x.devHandoffAssetPreviewMaxWidth),H=4*(0,g.jz)(x.devHandoffAssetPreviewMaxHeight),W=e=>e.stopPropagation(),K={format:e=>e};i.memo(({assetInfo:e,openFileKey:r,disabled:n,media:m,showGuids:g,saveAsState:x,dropdownShown:j,isSelected:z})=>{let{assetId:Y,assetName:$,thumbnailVersion:q}=e,Z=e.instancesGUIDs?.[0]??e.duplicateGUIDs?.[0]??Y,X=(0,I.O)({assetId:Z,thumbnailVersion:q,width:G,height:H,scale:4}),J=function(e,r){let{exportSettings:n}=(0,v.mJ)(e)??{exportSettings:null};return n?.[0]?.imageType??(r&O.PW.ASSET_ICON?"SVG":"PNG")}(Y,e.type),Q=(0,T.aT)(e),ee=(0,a.wA)(),et=i.useCallback(async e=>{e.stopPropagation(),(0,_.sx)("Asset Panel Export Clicked"),await (0,C.Dc)(C.hV.Export,x,ee,"export-assets-handoff",[Z],"export-assets-handoff",{[Z]:J}),ee(S.rg()),ee(w.oB())},[Z,ee,J,x]),er=i.useCallback(e=>{m.length>0&&r?ee(w.j7({type:"save-media-select",data:{assetId:Z}})):et(e),e.stopPropagation()},[ee,et,m,Z,r]),en=(0,F.d)(!1,void 0,Z),ei=i.useCallback(e=>{en?.(),e.stopPropagation()},[en]),ea=e?.instancesGUIDs??e?.duplicateGUIDs??[Y],eo=i.useCallback(e=>{p.l7.user("image-type-change",()=>{u.glU.setDevHandoffAssetExport(Y,e)})},[Y]),es=!!(e.type&O.PW.ASSET_COMPONENT),el=!!(e.type&O.PW.ASSET_ICON),ec=!!(e.type&O.PW.ASSET_IMAGE),ed=!!(e.type&O.PW.ASSET_GIF),eu=!!(e.type&O.PW.ASSET_VIDEO),ep=ed||eu,em=(el||ec)&&!ep,eh=m.length>0&&null!==r?k.DK:k.K0,e_=(0,f.kc)().ds_publish_file_deprecation?e.isFromLibrary:e.libraryKey,eg=!!e.libraryFileKey&&(0,A.wJ)(e.libraryFileKey),ef=i.useMemo(()=>[i.createElement(D.N5,{key:"png",value:"PNG"}),i.createElement(D.N5,{key:"jpeg",value:"JPEG"}),...el?[i.createElement(D.N5,{key:"svg",value:"SVG"})]:[],i.createElement(D.N5,{key:"pdf",value:"PDF"})],[el]),eE=e=>{let r=e.split(".");if(!r||!(r.length>0))return{name:e,extension:""};{let e=r[r.length-1];return{name:r.slice(0,r.length-2).join("."),extension:e}}};return i.createElement("div",{className:U.s,onMouseEnter:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set(ea),onMouseLeave:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set([]),onClick:()=>N.tJ([e?.instancesGUIDs?.[0]??Y]),role:"link",tabIndex:0},i.createElement("div",{className:h()(U.Re,j?.type==="save-media-select"&&j.data.assetId===Z?U.Lq:void 0)},i.createElement("div",{className:U.ZE,style:X.backgroundStyle},X&&i.createElement(R.J,{className:U.Wb,src:X.url})),i.createElement("div",{className:U.DE},i.createElement("div",{className:U.SM},g?`${$} (${Y})`:$),es&&!z?i.createElement("div",{className:U._w},i.createElement(y.B,{svg:V.A}),i.createElement("div",{className:U.R5},(0,b.tx)("dev_handoff.assets.instance"))):i.createElement("div",{className:U.Rn},i.createElement(T.$R,{assetInfo:e,media:em?m:[],dataTestId:"assetPanel",shouldShowTypeLabel:!0}))),i.createElement("div",{className:U.Uo},em&&i.createElement(i.Fragment,null,i.createElement(D.SV,{id:`asset-image-type-${Y}`,property:J,formatter:D.A3,onChange:eo,dispatch:ee,dropdownShown:j,onMouseDown:W,dropdownWidth:150},ef),i.createElement("div",{className:U.yL},i.createElement(eh,{svg:B.A,onClick:er,"data-tooltip-type":L.Ib.TEXT,"data-tooltip":n?(0,b.t)("fullscreen.properties_panel.export_disabled"):(0,b.t)("fullscreen.export.export"),disabled:n,className:U.x6,containerClassName:U.Li,isBackgroundTransparent:!0}),j?.type==="save-media-select"&&i.createElement(i.Fragment,null,i.createElement("div",{className:U.Vx}),i.createElement(E.ms,{className:U.Yw},m.map(e=>{let{name:n,extension:a}=eE(e.name);return i.createElement(E.gS,{onClick:e=>{e.stopPropagation(),ee(w.oB())},href:(0,P.ij)(r,e.hash),target:"_blank",key:e.hash,className:U.cu,"data-tooltip-type":L.Ib.TEXT,"data-dropdown-tooltip":e.name},i.createElement("div",null,(0,b.t)("fullscreen.export.source")),i.createElement("div",{className:U.Mo},i.createElement(T.yP,{pxWidth:e.width,pxHeight:e.height,dataTestId:"assetPanel"}),i.createElement("div",{className:U.Om},"\xb7"),i.createElement("div",{className:U.VZ,"data-content-start":n,"data-content-end":`.${a}`},e.name)))}),i.createElement(E.gS,{key:"export",className:U.HL,onClick:et},i.createElement("div",null,(0,b.t)("fullscreen.export.layer_export")),i.createElement("div",{className:U.Mo},i.createElement(T.$R,{assetInfo:e,dataTestId:"assetPanel",hideDot:!0}),i.createElement("div",{className:U.Om},"\xb7"),i.createElement("div",{className:U.VZ},D.A3.format(J)))))))),ep&&i.createElement(i.Fragment,null,i.createElement(M.uQ,{property:ed?"GIF":"MP4",formatter:K,isDisabled:!0}),i.createElement("a",{href:Q??"",target:"_blank"},i.createElement(o.K,{"aria-label":(0,b.t)("fullscreen.export.export"),disabled:!Q,htmlAttributes:{"data-tooltip":(0,b.t)("fullscreen.export.export"),"data-tooltip-type":L.Ib.TEXT}},i.createElement(s.b,null)))),es&&!z&&i.createElement(o.K,{onClick:ei,"aria-label":eg?(0,b.t)("design_systems.instance_panel.view_library_in_community"):e_?(0,b.t)("dev_handoff.library.view"):(0,b.t)("design_systems.instance_panel.go_to_main_component"),htmlAttributes:{"data-tooltip":eg?(0,b.t)("design_systems.instance_panel.view_library_in_community"):e_?(0,b.t)("dev_handoff.library.view"):(0,b.t)("design_systems.instance_panel.go_to_main_component"),"data-tooltip-type":L.Ib.TEXT}},eg?i.createElement(l.c,null):e_?i.createElement(c.l,null):i.createElement(d.K,null)))))})},301854:(e,r,n)=>{"use strict";n.d(r,{X:()=>v});var i=n(411855),a=n(188507),o=n(767129),s=n(421757),l=n(615925),c=n(587670),d=n(629019),u=n.n(d),p=n(468794);n(794272);var m=n(966712),h=n(939863),_=n(970516),g=n(60088),f=n(788612),E=n(538697),y=n(564092),b=n(712685),I=n(346754);let T={format:()=>(0,h.t)("inspect_panel.copy_as")};function v(e){let{basisContent:r="",changeContent:n=""}=e,a=i.useMemo(()=>(0,p.pR)(r,n).map(e=>{let r=e.added?I.Qs:e.removed?I.Tk:"";return i.createElement("span",{key:e.value,className:r},e.value)}),[r,n]);return i.createElement(S,{content:i.createElement(i.Fragment,null,a),contentToCopy:n,showVariable:!1})}function S({content:e,contentToCopy:r,showVariable:n=!0}){let{value:d,eventHandlers:p,isHovered:v}=(0,f.ZQ)(I.O7,I.O7),S=(0,a.wA)(),{Dropdown:w,toggleDropdown:A,dropdownTargetRef:N,isDropdownShown:C}=(0,g.B)("CONTENT_COPY_DROPDOWN"),O=(0,f.SV)("inspection_panel_copy_text_variable"),L=(0,y.oU)("TEXT_DATA",{type:c.Z_n.STRING,resolvedType:c.rXF.STRING,value:r}),R=L.variableDisplayName,P=!!R&&n,D=(e,r)=>{S(_.lW({stringToCopy:e,ignoreLineBreaks:!1})),O({value:e,valueType:r})},k=[{displayText:(0,h.t)("inspect_panel.copy_variable_name"),callback:()=>{R&&D(R,"name")}},{displayText:(0,h.t)("inspect_panel.copy_variable_content"),callback:()=>{D(r,"value")}}],M=P?i.createElement(i.Fragment,null,i.createElement(E.uQ,{ref:N,containerClassName:u()(I.$1,C&&I.zv),formatter:T,property:null,onClick:A}),i.createElement(w,{items:k,showPoint:!0})):(0,m.kc)().dt_inferred_vars_modal?i.createElement(o.K,{htmlAttributes:p,onClick:()=>D(r,"value"),"aria-label":(0,h.t)("inspect_panel.copy")},i.createElement(l.X,null)):i.createElement("span",{className:I.cL},i.createElement(s.$n,{variant:"link",htmlAttributes:p,onClick:()=>D(r,"value")},(0,h.tx)("inspect_panel.copy")));return i.createElement(f.VZ,{title:(0,h.t)("inspect_panel.property.content"),hideHeader:!0,padding:f.UZ.NONE,recordingKey:"content"},i.createElement("div",{className:I.Om},i.createElement(f.SH,{title:(0,h.t)("inspect_panel.property.content"),isHovered:v||C,recordingKey:"contentHeader",additionalHeaders:M}),i.createElement("div",{className:I.eR},P&&i.createElement(b.w,{text:R,isInferred:L.isSuggested,disableHover:!0,dataTestId:"textVariableName",tooltip:L.isSuggested?(0,h.t)("dev_handoff.variables.inferred_text"):r}),i.createElement("div",{className:u()(I.P_,d),dir:"auto","data-testid":"textContent"},e))))}},118830:(e,r,n)=>{"use strict";n.d(r,{O:()=>c});var i=n(411855),a=n(587670),o=n(275725),s=n(15859);let l={};function c({assetId:e,thumbnailVersion:r,width:n,height:c,scale:d}){let u=function({assetId:e,width:r,height:n,scale:i}){return`${e}-${r}x${n}@${i}x`}({assetId:e,width:n,height:c,scale:d}),[p,m]=i.useState(l[u]?.url),h=(0,o.c6)(e);return(i.useEffect(()=>{let i=async()=>{await (0,s.Jr)().loadAllImagesUnder([e],a.MoD.NON_ANIMATED_ONLY,"handoff.assetPreview");let[i,o]=a.Vzr.generateThumbnailForNode(e,n,c,d,{});if(o.length>0){let e=l?.[u]?.url;e&&URL.revokeObjectURL(e);let n=URL.createObjectURL(new Blob([o]));l[u]={url:n,version:r,error:null},m(n)}},o=!!l?.[u],p=o&&l[u].version!==r,h=o&&!!l[u].error;o&&(!p||h)||i().catch(e=>{l[u]={error:e},console.error(e)})},[e,c,d,n,u,r]),p)?{url:p,backgroundStyle:h}:{backgroundStyle:h}}},444736:(e,r,n)=>{"use strict";n.d(r,{$R:()=>E,aI:()=>I,aT:()=>b,yP:()=>f});var i=n(411855),a=n(188507),o=n(587670),s=n(939863),l=n(393812),c=n(945099),d=n(92597),u=n(618056),p=n(29680),m=n(335682),h=n(279702),_=n(297281),g=n(239349);function f({pxWidth:e,pxHeight:r,dataTestId:n}){let{unit:a}=(0,d.gc)(),s=(0,c.sQ)()&&a===o.tKW.SCALED,l=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),u=l(e),p=l(r),m=i.createElement("span",{"data-testid":`${n}Width`},u),h=i.createElement("span",{"data-testid":`${n}Height`},p);return i.createElement(i.Fragment,null,m,"\u2009x\u2009",h,i.createElement("span",{"data-testid":`${n}Unit`},s?" (px)":""))}function E({assetInfo:e,media:r,dataTestId:n,shouldShowTypeLabel:a,hideDot:o}){let s=(0,g.mJ)(e.instancesGUIDs?.[0]??e.assetId),l=s?.size?.x??0,c=s?.size?.y??0;if(r&&r.length>0){let e=r[0];l=e.width,c=e.height}return i.createElement(y,{assetType:e.type,pxWidth:l,pxHeight:c,dataTestId:n,hideDot:o,shouldShowTypeLabel:a})}function y({assetType:e,pxWidth:r,pxHeight:n,dataTestId:a,hideDot:o,shouldShowTypeLabel:l}){let c=e&h.PW.ASSET_VIDEO?(0,s.t)("dev_handoff.assets.video"):e&h.PW.ASSET_GIF?(0,s.t)("dev_handoff.assets.gif"):e&h.PW.ASSET_IMAGE?(0,s.t)("dev_handoff.assets.image"):e&h.PW.ASSET_ICON?(0,s.t)("dev_handoff.assets.icon"):e&h.PW.ASSET_COMPONENT?(0,s.t)("dev_handoff.assets.instance"):void 0;return i.createElement("span",null,l&&c,!o&&i.createElement(i.Fragment,null,"\xa0","\xb7 "),i.createElement(f,{pxWidth:r,pxHeight:n,dataTestId:a}))}function b(e){let r=(0,a.d4)(m.sS),n=(0,p.eY)(),[o,s]=i.useState(null);if(o)return o;if(!(e.type&(h.PW.ASSET_GIF|h.PW.ASSET_VIDEO)))return null;let l=n.get(e.assetId);if(!l)return null;let c=u.N9(l?.fills)?.filter(e=>e.opacity>0&&e.visible);if(!c)return null;for(let e of c)if(e.animatedImage||e.video){if(!r)return null;(0,_.tW)({paint:e,fileKey:r}).then(e=>{s(e)});break}return o}function I(e){let r=(0,g.uQ)(),n=e??r;return n?(0,l.ZC)(n):h.PW.NOT_ASSET}},275725:(e,r,n)=>{"use strict";n.d(r,{c6:()=>T});var i=n(411855),a=n(188507),o=n(587670),s=n(707458),l=n(776250),c=n(344780),d=n(568214),u=n(966712),p=n(444736),m=n(239349),h=n(168039),_=n(416095),g=n(284321),f=n(49116),E=n(173454),y=n(279702),b=n(32067);let I=e=>e.visible&&!(0,d.ty)(e.color);function T(e){let r=function(e,r,n){let T=i.useMemo(()=>new s.q,[]),v=(void 0)??T,S=function(e){let r=(0,b.jY)(),n=(0,a.d4)(g.FZ),i=(0,a.d4)(f.c5);return(0,_.NY)(e,r,n,i)}(e),w=(0,h.DP)(),A=(0,p.aI)(e),N=S?.containing_frame?.backgroundColor??"";return S?.type===E.PW.STATE_GROUP&&S.fill_color&&(N=S.fill_color),i.useCallback(()=>{let r=w&&("light"===w||"dark"===w)?w:"dark";if(!e)return N&&!(0,d.ty)(N)?(0,d.HD)(N)?"dark":"light":r;if((0,u.kc)().dt_component_bg_improvements){c.sn.start("dev_mode_calculate_component_color");let r=o.w3z.getApproximateNodeColor(e),n=c.sn.stop("dev_mode_calculate_component_color");return n&&(0,l.sx)("dev_mode_calculate_component_color",{elapsedMs:n},{forwardToDatadog:!0}),(0,d.HD)(r)?"light":"dark"}{if(N&&!(0,d.ty)(N))return(0,d.HD)(N)?"dark":"light";let n=function e(r,n,i){let a=(0,m.Zl)(r,n);if(!a)return;let o=[];if(a.visible){if(i){o.push(...a.strokePaints.data);let e=a.fillPaints.data.filter(I);if(e.length)return(0,d.AW)(e)}else{let e=[...a.fillPaints.data,...a.strokePaints.data].filter(I);if(e.length)return(0,d.AW)(e)}}for(let n of a.childrenGuids){let a=e(r,n,i);if(a)return a}if(i)return(0,d.AW)(o)}(v,e,!(A&y.PW.ASSET_ICON));return n&&(0,d.BU)(n,w)?"light"===r?"dark":"light":r}},[A,N,e,void 0,v,w])}(e);return"dark"===(0,i.useMemo)(r,[r])?v:S}let v={background:"#383838"},S={background:"#f5f5f5"}},666930:(e,r,n)=>{"use strict";n.d(r,{Bv:()=>_,wS:()=>h,x9:()=>g});var i=n(411855);n(188507),n(215122);var a=n(587670);n(534611);var o=n(707458);n(752553),n(939863);var s=n(44892);n(848661);var l=n(29680);n(335682);var c=n(216158),d=n(656012),u=n(273226);n(510879);var p=n(107244);n(958317),n(835808),n(731262),n(239349),c.M4.Query({fetch:async({componentKey:e})=>{try{let r=await d.Z.getLibraryComponentV2Destination({componentKey:e});if(!r||!r.data||!r.data.meta)return null;return{nodeId:r.data.meta.node_id,fileKey:r.data.meta.file_key,component:r.data.meta.component,componentSet:r.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),c.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let r=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,i=e.dataStorageKey,o=await s.Eo.getCanvas({canvas_url:e.canvasUrl});if(!o)return{};let l=a.glU.loadDetachedComponent(r??"",i,o,n);return l?{result:{...e,dataLocation:"temp-scene",dataComponentId:l}}:{}},enabled:e=>e.enabled});let m=i.createContext({status:"loading"});function h(){return i.useContext(m)||{status:"errors"}}function _(e,r){let n=h(),i=(0,l.eY)();if("loaded"===n.status){let e="temp-scene"===n.result.dataLocation,r=n.result.dataComponentId??"",a=e?n.result.dataStateGroupId:(0,u.Yi)([r],i)??(0,p.nM)(i,[r]),o=e?g(r):i.get(r);return n.result.isVariant&&a?{backingSymbol:o,backingStateGroup:e?g(a):i.get(a)}:{backingSymbol:o,backingStateGroup:null}}return{backingSymbol:e,backingStateGroup:r}}function g(e){return new o.q(a.juq.DETACHED_COMPONENTS).get(e)}},187796:(e,r,n)=>{"use strict";n.d(r,{$G:()=>h,Cs:()=>_,I9:()=>g,Ud:()=>f,oz:()=>p}),n(411855),n(188507);var i=n(459401),a=n(587670);n(704513);var o=n(794272),s=n(939863),l=n(848661);n(618056),n(335682);var c=n(998905),d=n(239349);function u(e){return(0,l.gl)(e)?0:e??0}function p(e){return"NONE"!==e.stackMode||!!e.inferredAutoLayoutResult&&"NONE"!==e.inferredAutoLayoutResult.stackMode}function m(e,r,n){return"NONE"!==e.stackMode?e[r]:e.inferredAutoLayoutResult?.[n]}function h(e){let r;let{selectionProperties:n,sceneGraph:i,sceneGraphSelection:a}=(0,o.R)(e=>({selectionProperties:e.mirror.selectionProperties,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection}));if(e)return{distance:{top:{distance:0,type:"distance"},bottom:{distance:0,type:"distance"},left:{distance:0,type:"distance"},right:{distance:0,type:"distance"}},border:{top:0,bottom:0,left:0,right:0},radius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},padding:{top:0,bottom:0,left:0,right:0},width:0,height:0};let s=(0,d.Zl)(i,(0,d.RJ)(a)),h=s?.parentNode||null,_=function(e){let r=e?.borderStrokeWeightsIndependent;if((0,l.hS)(r)&&r){let{borderTopVisible:r,borderBottomVisible:n,borderLeftVisible:i,borderRightVisible:a,borderTopWeight:o,borderBottomWeight:s,borderLeftWeight:l,borderRightWeight:c}=e;return{top:r?u(o):0,bottom:n?u(s):0,left:i?u(l):0,right:a?u(c):0}}let n=e?.strokePaints;if((0,l.hS)(n)&&Array.isArray(n)&&n.length>0){let r=(n?.filter(e=>e?.visible&&(e?.opacity??0>0))||[]).length>0?u(e?.strokeWeight):0;return{top:r,bottom:r,left:r,right:r}}return{top:0,bottom:0,left:0,right:0}}(n),g=(0,c.AF)(n),f={topLeft:u(g.topLeft),topRight:u(g.topRight),bottomRight:u(g.bottomRight),bottomLeft:u(g.bottomLeft)},E=p(n);r=E?{top:u(m(n,"stackVerticalPadding","stackPaddingTop")),bottom:u(m(n,"stackPaddingBottom","stackPaddingBottom")),left:u(m(n,"stackHorizontalPadding","stackPaddingLeft")),right:u(m(n,"stackPaddingRight","stackPaddingRight"))}:{top:0,bottom:0,left:0,right:0};let y=E&&n.bordersTakeSpace?{top:r.top+_.top,bottom:r.bottom+_.bottom,left:r.left+_.left,right:r.right+_.right}:{...r},b=u(n.width)-y.left-y.right,I=u(n.height)-y.top-y.bottom;return{distance:h&&"NONE"!==h.stackMode&&s?.stackPositioning!=="ABSOLUTE"?function(e,r){if(!e||!r||"NONE"===r.stackMode)return{};let n=r.childrenNodes.filter(e=>e?.stackPositioning!=="ABSOLUTE").map(e=>e?.guid),i=n.indexOf(e.guid),a=0===i,o=i===n.length-1;return"HORIZONTAL"===r.stackMode?{top:{distance:r.stackTopPadding,type:"padding"},bottom:{distance:r.stackBottomPadding,type:"padding"},left:a?{distance:r.stackLeftPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},right:o?{distance:r.stackRightPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"}}:{top:a?{distance:r.stackTopPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},bottom:o?{distance:r.stackBottomPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},left:{distance:r.stackLeftPadding,type:"padding"},right:{distance:r.stackRightPadding,type:"padding"}}}(s,h):function(e,r){if(!e||!r||"CANVAS"===r.type||"DOCUMENT"===r.type||"SECTION"===r.type)return{};let n=r.absoluteBoundingBox.w,i=r.absoluteBoundingBox.h,a=r.absoluteBoundingBox.y,o=r.absoluteBoundingBox.x,s=e.absoluteBoundingBox.w,l=e.absoluteBoundingBox.h,c=e.absoluteBoundingBox.y,d=e.absoluteBoundingBox.x;return{top:{distance:c-a,type:"distance"},bottom:{distance:a+i-(l+c),type:"distance"},left:{distance:d-o,type:"distance"},right:{distance:n+o-(d+s),type:"distance"}}}(s,h),border:_,radius:f,padding:r,width:b,height:I}}let _=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e;function g(e=0,r,n){if(!n||(0,l.gl)(r))return e;let i={[a.mKm.FILL_CONTAINER]:(0,s.t)("inspect_panel.properties.fill"),[a.mKm.HUG_CONTENT]:(0,s.t)("inspect_panel.properties.hug"),[a.mKm.FIXED]:(0,s.t)("inspect_panel.properties.fixed")}[r||a.mKm.FIXED],o=(e||0).toLocaleString("en",{maximumFractionDigits:2});return`${i} (${o}px)`}function f(...e){let[r=0,n=0,a=0,o=0]=e;return(0,i.areAllEqual)(e)?0!==r?[r]:void 0:[r,n,a,o]}},843245:(e,r,n)=>{"use strict";n.d(r,{M4:()=>d,lA:()=>c});var i=n(188507);n(587670),n(29680),n(335682),n(416095),n(49116);var a=n(234945),o=n(32067),s=n(666930),l=n(239349);function c(){let e=(0,o.jY)(),r=(0,s.wS)(),n=(0,i.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),a=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected);if("loaded"===r.status&&r.result.dataComponentId)return"temp-scene"===r.result.dataLocation&&r.result.componentKey?(0,s.x9)(r.result.dataComponentId):(0,l.Zl)(e,r.result.dataComponentId);if(1!==a||!n)return null;let c=Object.keys(n)[0];return(0,l.Zl)(e,c)}function d(){let e=(0,o.jY)(),r=(0,s.wS)();return function e(r,n,i){let a=(0,l.Zl)(r,n);return a?"SYMBOL"===a.type||"INSTANCE"===a.type||a.isStateGroup||a.detachedInfo?a:a.parentGuid?e(r,a.parentGuid):null:null}(e,(0,i.d4)(a.$J),r)}},470669:(e,r,n)=>{"use strict";n.d(r,{V0:()=>I,ls:()=>T});var i=n(411855),a=n(109388),o=n(188507),s=n(939863),l=n(308977);n(979385);var c=n(256975),d=n(544818),u=n(225266),p=n(738269),m=n(318812),h=n(694687),_=n(376485),g=n(498606),f=n(978527),E=n(206074),y=n(538697),b=n(863193);function I({codeLanguage:e,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:i,showAddInsteadOfBrowse:a,addCodegenPluginCallback:s,currentSavedCodeLanguage:c}){let u=(0,l.AC)(e),p=(0,l.Pt)(u),m=(0,h.sZ)(),g=(0,o.d4)(e=>e.whitelistedPlugins),f=(0,_.ow)(u,g,m)?e:{type:"first-party",id:"WEB"},E=(0,d.Z)({codeLanguage:f,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:i,formatter:p,showAddInsteadOfBrowse:a,addCodegenPluginCallback:s,currentSavedCodeLanguage:c});return{codeLanguage:f,onCodeLanguageChange:r,codeLanguageOptions:E,activeCodegenPlugin:u,formatter:p}}function T({dropdownId:e,disabled:r,codeLanguageApi:n,onDropdownHidden:l,parentElementId:d}){let h=(0,c._I)(),{codeLanguage:_,activeCodegenPlugin:I,formatter:T,codeLanguageOptions:v}=n,S=I&&"first-party"!==_.type?i.createElement(f.d,{plugin:I}):null,w=(0,o.wA)();i.useEffect(()=>w(u.aq()),[w]);let A=(0,m.Um)(),N=i.useRef(null),C=A?.type===e;return i.createElement("div",{className:b.aD,"data-tooltip":(0,s.t)("dev_handoff.code.language"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},i.createElement("div",{className:b.lj},i.createElement(y.uQ,{formatter:T,property:_,icon:S,onClick:()=>{C?w(p.oB()):h&&w(p.j7({type:e}))},inputClassName:b.UD,ref:N,dataTestId:"code_language_dropdown",isDisabled:r})),C&&!r&&N.current&&(0,a.createPortal)(i.createElement("div",{className:b.aD},i.createElement(E.j,{items:v,onSelectItem:e=>{e.callback&&e.callback("",null,w)},dispatch:w,parentRect:N.current.getBoundingClientRect(),showPoint:!1,lean:"right",leanPadding:8,alwaysShowCheckMarkOffset:!0,onDropdownHidden:l,activatePathOnMount:"local-plugin"!==_.type?[T.format(_)]:[v[0].displayText]})),document.getElementById(d||"dev-handoff-inspect-panel")))}},426299:(e,r,n)=>{"use strict";n.d(r,{n2:()=>P});var i=n(411855),a=n(109388),o=n(188507),s=n(535904),l=n(221768),c=n(243742),d=n(587670),u=n(629019),p=n.n(u),m=n(966712),h=n(860601),_=n(153234),g=n(762638),f=n(939863),E=n(806284),y=n(256975),b=n(470669),I=n(945099),T=n(738269),v=n(779709),S=n(318812),w=n(498606),A=n(206074),N=n(788612),C=n(227795),O=n(538697);n(581250);var L=n(216487),R=n(999918);function P({dropdownPrefix:e,inspectionModeLayout:r="drop-down",preferencesApi:n,parentElementId:u}){let p=(0,y._I)(),_=e?`${e}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",g=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",E=(0,o.wA)(),{inspectionMode:P,setInspectionMode:k,inspectionModes:M,supportsAlternativeUnits:F,preferenceOptions:x,preferences:U,codeLanguageApi:B}=n,V=(0,S.Um)(),G=i.useRef(null),H=V?.type===_,W=v.z4.getIsExtension(),K=M.includes("code")&&void 0!==x&&void 0!==U&&void 0!==B,j=(W||"code"===P)&&K,z=()=>{H?E(T.oB()):p&&E(T.j7({type:_}))},Y=i.useMemo(()=>M.map(e=>i.createElement(O.c$,{key:e,value:e})),[M]),$="ui3"===(0,c.DP)().version;return i.createElement(i.Fragment,null,i.createElement(N.VZ,{hideHeader:!0,padding:N.UZ.NONE,noBorder:!0,recordingKey:"preferences"},i.createElement("div",{className:L.NR},!W&&("drop-down"===r?i.createElement(O.l6,{id:`${e}_dev_handoff_inspection_mode`,property:P,formatter:I.a9,onChange:k,dispatch:E,dropdownShown:V,className:L.VM,dropdownWidth:$?"120px":"auto",onShowDropdownOverride:p?void 0:h.lQ},Y):i.createElement(D,{onTabClick:k,selectedTabKey:P,tabs:M.map(e=>({key:e,label:I.a9.format(e)})),recordingKey:"preferences-tabs"})),K&&i.createElement("div",{className:L.d2},j&&i.createElement(b.ls,{dropdownId:g,codeLanguageApi:B,parentElementId:u}),i.createElement("div",{ref:G},(0,m.kc)().dt_fpl_migration?i.createElement(s.d,{onClick:z,"aria-label":(0,f.t)("dev_handoff.inspect_settings"),toggled:H,disabled:!j||0===x.length,recordingKey:"preferencesDropdownButton",htmlAttributes:{"data-tooltip":(0,f.t)("dev_handoff.inspect_settings"),"data-tooltip-type":w.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(l.A,null)):i.createElement(C.YW,{svg:R.A,className:L.Yn,onClick:z,"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,f.t)("dev_handoff.inspect_settings"),"data-tooltip-show-above":!0,selected:H,disabled:!j||0===x.length,recordingKey:"preferencesDropdownButton"}))))),H&&K&&G.current&&(0,a.createPortal)(i.createElement(A.j,{items:x,onSelectItem:e=>{e.callback&&e.callback("",null,E)},recordingKey:"preferencesDropdown",dispatch:E,parentRect:G.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:F?U.unit===d.tKW.PIXEL?[x[1].displayText]:[x[2].displayText]:void 0}),document.getElementById(u||"dev-handoff-inspect-panel")))}function D({tabs:e,onTabClick:r,selectedTabKey:n,recordingKey:a}){return i.createElement("div",{className:p()(g.cx.flex.flexRow.$,L.rb)},e.map(o=>i.createElement(E.je,{key:o.key,text:o.label,isActive:n===o.key,onClick:()=>r(o.key),recordingKey:_.Pt(a,o.key)||"",isSingle:1===e.length})))}},909999:(e,r,n)=>{"use strict";n.d(r,{j6:()=>O});var i=n(411855),a=n(188507),o=n(145191),s=n(7760),l=n(986111),c=n(485463),d=n(256296),u=n(368832),p=n(860601),m=n(939863),h=n(308977),_=n(470669),g=n(92597),f=n(973149),E=n(318812),y=n(237870),b=n(205135),I=n(538697),T=n(893606),v=n(162419);let S=new f.KD({min:.1}),w=[3,2,1,.5,1/3],A=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,m.t)("dev_handoff.alternative_units.no_scale")}};function N({scaleFactor:e,onChange:r,onDropdownHidden:n,className:o,inputClassName:s}){let l=(0,a.wA)(),c=(0,E.Um)(),d=(0,T.R)();return i.createElement(I.l6,{dispatch:l,property:e,id:"SCALE_FACTOR",onChange:r,formatter:A,dropdownShown:c,className:o,inputClassName:s,dropdownWidth:d?"120px":"auto",autoFocus:!0,onDropdownHidden:n},w.map(r=>i.createElement(I.c$,{key:r,value:r,selected:r===e,fullWidth:!0})))}function C({codeLanguage:e}){let r=(0,g.$s)(e);switch(e.id){case h.p:case h.Ap:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_ios");case h.LK:case h.NU:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_android");case h.uz:return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_web")}return(0,m.tx)("dev_handoff.alternative_units.description_scale_factor_third_party",{unitName:r})}let O=(0,y.Ju)(function(e){let r=(0,h.v4)(),[n,a]=i.useState(r),f=(0,g.aq)(n),E=(0,g.gc)(n.id),y=(0,g.Bs)(),I=(0,T.R)(),w=o.hS(e),A=i.useCallback(e=>{e&&y(n,f,{scaleFactor:e})},[n,y,f]),O="first-party"===n.type&&(n.id===h.LK||n.id===h.NU||n.id===h.p||n.id===h.Ap),L="first-party"===n.type&&(n.id===h.uz||n.id===h.A0),R=(0,u.A)(()=>{L&&y(n,f,{customSettings:{onlyText:"true"===(E.customSettings?.onlyText||"false")?"false":"true"}})},250),P=E?.scaleFactor??1,D=(0,_.V0)({onChange:a,codeLanguage:n,shouldHideLanguagesWithNoAltUnitSupport:!0});return i.createElement(s.bL,{manager:w,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,m.t)("dev_handoff.alternative_units.unit_settings_modal_title")),i.createElement(l.jk,null,i.createElement(_.ls,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",codeLanguageApi:D}))),i.createElement(l.nB,null,O?i.createElement("div",{className:v.iF},i.createElement(N,{scaleFactor:P,onChange:A,onDropdownHidden:p.lQ,className:v.j8}),i.createElement("div",{className:v.rc})):i.createElement("div",{className:v.hq},i.createElement(b.Q7,{className:v.IC,property:P,formatter:S,onChange:A,autoFocus:!0})),i.createElement("div",{className:v.A3},i.createElement(C,{codeLanguage:n})),L&&(I?i.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:i.createElement(d.J,null,(0,m.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:i.createElement("span",{className:v.D0},(0,m.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}):i.createElement("div",{className:v.sM},i.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:i.createElement(d.J,null,(0,m.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:i.createElement("span",{className:v.D0},(0,m.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}))))))},"SCALE_FACTOR_MODAL")},92597:(e,r,n)=>{"use strict";n.d(r,{$s:()=>w,Bs:()=>I,Em:()=>v,SF:()=>O,aq:()=>T,b1:()=>A,gc:()=>y,lX:()=>b,wA:()=>C,wQ:()=>N});var i=n(411855),a=n(188507),o=n(587670),s=n(212046),l=n.n(s),c=n(38329),d=n(939683),u=n(939863),p=n(308977),m=n(370934),h=n(756085);n(779709);var _=n(960628),g=n(376485),f=n(638311);let E={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",pixel:"px"};function y(e){let r=(0,p.v4)().id,n=(0,a.d4)(e=>e.mirror.appModel.devHandoffPreferences),o=e??r;return(0,i.useMemo)(()=>n.codeExtensionPreferences?.[o]??{},[n,o])}function b(){let e=c.D.getState()?.mirror?.appModel,r=e?.devHandoffCodeLanguage?.id??"";return e?.devHandoffPreferences?.codeExtensionPreferences?.[r]??{}}function I(){let e=(0,a.d4)(e=>e.mirror.appModel.devHandoffPreferences),r=(0,d.U)();return(0,i.useCallback)((n,i,a)=>{let{customSettings:s,...c}=a;l()(c)||(void 0!==c.unit&&(c.unit=c.unit===o.tKW.PIXEL?E.pixel:S(n,i)),r("Dev Mode Preference Changed",{languageType:n.type,languageId:n.id,...c})),(0,m.D8)(e,n,a)},[e,r])}function T(e){let{id:r,type:n}=e;return(0,h.S0)(r,{searchLocalPlugins:"local-plugin"===n,searchPublishedPlugins:"published-plugin"===n})}function v(e){let r=(0,p.v4)(),n=T(e??r);return(0,m.ZA)(e??r,n)}function S(e,r){let{id:n,type:i,pluginLanguage:a}=e;if("first-party"!==i&&r){let e=(0,f.X)(r,a),n=(0,m.K6)(r,e);if(n)return n.scaledUnit}switch(n){case p.uz:return E.scaledWeb;case p.p:case p.Ap:return E.scaledIOS;case p.LK:case p.NU:return E.scaledAndroid;default:return E.scaledWeb}}function w(e){let r=T(e);return S(e,r)}function A(e){switch(e){case p.uz:return(0,u.t)("dev_handoff.alternative_units.rem_unit");case p.LK:case p.NU:return(0,u.t)("dev_handoff.alternative_units.dp_unit");case p.p:case p.Ap:return(0,u.t)("dev_handoff.alternative_units.pt_unit");default:return(0,u.t)("dev_handoff.alternative_units.rem_unit")}}function N(e){let r=(0,p.v4)();return C(e??r)}function C(e){let r=w(e);return"first-party"===e.type?A(e.id):r}function O({localCodeLanguage:e,includeActions:r=!0,includeSelectSettings:n=!0}={}){let a=(0,p.v4)(),o=e??a,s=(0,p.AC)(o),l=y(o.id),c=I();return i.useMemo(()=>(function({includeActions:e=!1,includeSelectSettings:r=!0,codeLanguage:n,plugin:i,codeExtensionPreferences:a,onChangePreferences:o}){let s=[];if(!i||"first-party"===n.type||(0,m.GL)(i)!==n.id)return s;for(let l of(0,m.zZ)(i,(0,f.X)(i,n.pluginLanguage)))e&&(0,g.Wt)(l)&&s.push({name:l.propertyName,displayText:l?.label||l.propertyName,callback:()=>_.d1.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),r&&(0,g.ZV)(l)&&s.push({name:l.propertyName,recordingKey:l.propertyName,displayText:l?.label??l.propertyName,children:l.options.map((e,r)=>({name:e.value,displayText:e.label,isChecked:a?.customSettings?.[l.propertyName]?a?.customSettings?.[l.propertyName]===e.value:0===r,callback:()=>o(n,i,{customSettings:{...a?.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}))});return s})({includeActions:r,includeSelectSettings:n,codeLanguage:o,plugin:s,codeExtensionPreferences:l,onChangePreferences:c}),[r,n,o,s,l,c])}},208186:(e,r,n)=>{"use strict";n.d(r,{Co:()=>O,Iy:()=>S,Me:()=>N,SD:()=>v,TU:()=>I,WV:()=>C});var i=n(675678),a=n(534611),o=n(640783),s=n(38329),l=n(853828),c=n(776621),d=n(96328),u=n(743282),p=n(27087),m=n(330654),h=n(988022),_=n(416095),g=n(754168),f=n(882698),E=n(273226);let y=m.object({id:m.string(),node_id:m.string(),file_key:m.string(),link_name:m.string(),link_url:m.string(),is_user_override:m.boolean(),link_preview_json:m.any()}),b=m.object({meta:m.array(y)});async function I({fileKey:e,nodeId:r,includeInheritedLinks:n}){let i=(await g.S.getRelatedLinks({nodeId:r,fileKey:e})).data,a=b.safeParse(i);if(!a.success)throw Error("Invalid response from server");let o=a.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!n)return o;let l=s.D.getState().mirror.sceneGraph,c=(0,E.k4)([r],l),d=(0,E.Yi)([r],l),u=await T(e,c),p=await T(e,d);return[...o,...u.map(e=>({...e,nodeId:r,mainComponentId:c})),...p.map(e=>({...e,nodeId:r,mainComponentId:d}))]}async function T(e,r){let n=s.D.getState().mirror.sceneGraph;if(!r)return[];let i=n.get(r);if(!i)return[];let{publishID:o}=i,l=a.fn(a.sH(o));return await I({fileKey:(0,_.yW)(i)??e,nodeId:l?o??"":r,includeInheritedLinks:!1})}async function v(e){let r=new Set([e]),n=new Map,i=new Map,o=s.D.getState().mirror.sceneGraph,l=(s,l)=>{if(!l)return;let c=o.get(l);if(!c)return;let{publishID:d,guid:u}=c,p=(0,_.yW)(c);if(!p||!d||!a.fn(a.sH(d))||p===e){n.set(u,s),i.set(u,l);return}n.set(d,s),i.set(d,l),r.add(p)},c=o.get("0:0")?.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);c&&c.length>0&&c.forEach(e=>{let r=o.get(e);if(!r||"INSTANCE"!==r.type)return;l(e,r.symbolId);let n=(0,E.Yi)([e],o);l(e,n)});let d=await p.Ay.post("/api/files/related_links",{file_keys:Array.from(r.values())}),u=[];return d.data.meta.forEach(r=>{let a=e===r.file_key&&!!o.get(o.guidFromDeveloperFriendlyId(r.node_id)),s={id:r.id,linkName:r.link_name,linkUrl:r.link_url,fileKey:r.file_key,isUserOverride:!!r.is_user_override,linkPreviewJson:r.link_preview_json};a&&u.push({...s,nodeId:r.node_id,mainComponentId:void 0}),n.has(r.node_id)&&u.push({...s,nodeId:n.get(r.node_id),mainComponentId:i.get(r.node_id)})}),u}async function S({fileKey:e,nodeId:r,url:n,name:i,nodeType:a,pluginId:o,source:s}){if((await I({fileKey:e??"",nodeId:r??""})).find(e=>e.linkUrl===n))throw Error(`Link already exists on node ${r} with url ${n}`);return A({fileKey:e,nodeId:r,url:n,name:i,nodeType:a,pluginId:o,source:s})}async function w(e){let r;try{let n=await f.E.getLinkMetadata({text:e}),i=n?.data?.meta;i?.title&&(r=decodeURIComponent(i?.title))}catch(e){}finally{if(!r){let n=(0,o.Gw)(e);r=n?(0,d.Zr)(n):"N/A"}}return r}async function A({url:e,nodeId:r,fileKey:n,name:i,onPost:a,nodeType:c,pluginId:d,source:m}){let _="";if(i)_=i;else{let r=(0,o.FB)(e);if(r?.toLowerCase()==="github.com")_="Github";else if(r?.toLowerCase()==="jira.com"||r?.toLowerCase()==="atlassian.net"){_="Jira";let r=function(e){for(let r of P){let n=e.match(r);if(n?.[1])return n[1]}return null}(e);r&&(_=`Issue ${r}`)}else _=await w(e)}let g={node_id:r??"",link_name:_,link_url:e},f=p.Ay.post(`/api/files/${n}/related_links`,g);return a&&a(),l.WB()?.optimisticallyCreate({DeveloperRelatedLink:{[`optimistic-link-${u.g()}`]:{nodeId:r??"",fileKey:n??"",linkName:_,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},f),f.then(e=>((0,h.ds)("Dev Handoff Related Links Added New Link Success",n,s.D.getState(),{nodeId:r,nodeType:c,source:m,pluginId:d}),e))}async function N({fileKey:e,nodeId:r,currentUrl:n,newValue:i,nodeType:a,pluginId:o,source:c}){let d=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return d||R({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,name:i,url:a,isUserOverride:o,clearLinkPreview:c,nodeType:d,pluginId:u,source:m}){let _={node_id:r,link_id:n,new_link_name:i,new_link_url:a};void 0!==o&&(_.is_user_override=o),c&&(_.link_preview_json=null);let g=p.Ay.put(`/api/files/${e}/related_links`,_);return l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[n]:{linkName:i,linkUrl:a,isUserOverride:o,linkPreviewJson:c?"":void 0}}},g),g.then(n=>((0,h.ds)("Dev Handoff Related Links Edit Link Success",e,s.D.getState(),{nodeId:r,nodeType:d,source:m,pluginId:u}),n))}({fileKey:e,nodeId:r,linkId:d.id,name:i.name||d.linkName,url:i.url||d.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:a,pluginId:o,source:c})}async function C({fileKey:e,nodeId:r,url:n,nodeType:i,pluginId:a,source:o}){let c=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return c||R({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,nodeType:i,pluginId:a,source:o}){let c=p.Ay.del(`/api/files/${e}/related_links`,{node_id:r,link_id:n});return l.WB()?.optimisticallyDelete({DeveloperRelatedLink:{[n]:null}},c),c.then(n=>((0,h.ds)("Dev Handoff Related Links Delete Link Success",e,s.D.getState(),{nodeId:r,nodeType:i,source:o,pluginId:a}),n))}({fileKey:e,nodeId:r,linkId:c.id,nodeType:i,pluginId:a,source:o})}async function O({fileKey:e,nodeId:r,url:n,linkPreviewJson:i}){let a=(await I({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return a||R({nodeId:r,url:n}),L({link:a,linkPreviewJson:i})}async function L({link:e,linkPreviewJson:r}){try{let n=p.Ay.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:r});l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(r)}}},n),await n}catch(n){(0,c.$D)(i.FigmaTeam.DEVELOPER_TOOLS,n,{extra:{link:e,linkPreviewJson:r}})}}function R({nodeId:e,url:r}){throw Error(`url ${r} and nodeId ${e} not found`)}m.object({node_id:m.string(),link_name:m.string(),link_url:m.string()}),m.object({meta:y});let P=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},598393:(e,r,n)=>{"use strict";n.d(r,{VI:()=>d}),n(411855),n(188507);var i=n(939863),a=n(154483);n(666930);var o=n(843245),s=n(497306),l=n(555074);n(416095),n(216158),n(601607);var c=n(32067);function d(){let e=(0,l.kl)("numSelected"),r=(0,c.VW)(),n=(0,o.lA)();return 1===e&&r&&r.isAlive()?function(e,r){let n=e.isState?e.parentNode:null,a=n?.name||e.name,o=r?.isState?r?.parentNode?.name:r?.name,l="SYMBOL"===e.type||"INSTANCE"===e.type;return{id:e.guid,name:a,backingSymbolName:o,type:function(e,r,n=null){if(!e?.isAlive())return null;let a=e.type;if((0,s.GI)(e)&&(a="STAMP"),n?.status==="loaded"&&"SYMBOL"!==a&&"INSTANCE"!==a)return(0,i.tx)("inspect_panel.node_type.detached_component");if("BOOLEAN_OPERATION"===a)switch(e.booleanOperation){case"UNION":return(0,i.tx)("inspect_panel.node_type.union");case"INTERSECT":return(0,i.tx)("inspect_panel.node_type.intersect");case"SUBTRACT":return(0,i.tx)("inspect_panel.node_type.subtract");case"XOR":return(0,i.tx)("inspect_panel.node_type.exclude")}switch(a){case"VECTOR":return(0,i.tx)("inspect_panel.node_type.vector");case"STAR":return(0,i.tx)("inspect_panel.node_type.star");case"LINE":return(0,i.tx)("inspect_panel.node_type.line");case"ELLIPSE":return(0,i.tx)("inspect_panel.node_type.ellipse");case"RECTANGLE":case"ROUNDED_RECTANGLE":return(0,i.tx)("inspect_panel.node_type.rectangle");case"REGULAR_POLYGON":return(0,i.tx)("inspect_panel.node_type.polygon");case"TEXT":return(0,i.tx)("inspect_panel.node_type.text");case"SLICE":return(0,i.tx)("inspect_panel.node_type.slice");case"GROUP":case"FRAME":if(e.isStateGroup)return(0,i.tx)("inspect_panel.node_type.main_component_set");if("HORIZONTAL"===e.stackMode)return(0,i.tx)("inspect_panel.node_type.horizontal_al");if("VERTICAL"===e.stackMode)return(0,i.tx)("inspect_panel.node_type.vertical_al");if(e.resizeToFit)return(0,i.tx)("inspect_panel.node_type.group");else return(0,i.tx)("inspect_panel.node_type.frame");case"SYMBOL":if(e.isState||r?.isStateGroup)return(0,i.tx)("inspect_panel.node_type.main_variant");return(0,i.tx)("inspect_panel.node_type.main_component");case"INSTANCE":return(0,i.tx)("inspect_panel.node_type.instance");case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"STAMP":return(0,i.tx)("inspect_panel.node_type.figjam");case"SECTION":return(0,i.tx)("inspect_panel.node_type.section");case"WIDGET":return(0,i.tx)("inspect_panel.node_type.widget");case"CANVAS":return(0,i.tx)("inspect_panel.node_type.page");case"TABLE":return(0,i.tx)("inspect_panel.node_type.table")}return null}(e,n,null),isSymbol:e.isStateGroup||l,isFrame:"FRAME"===e.type,isSection:"SECTION"===e.type}}(r,n):null}(0,a.fv)()},812505:(e,r,n)=>{"use strict";n.d(r,{M:()=>a});var i=n(411855);function a(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},i.createElement("g",{clipPath:"url(#a)"},i.createElement("mask",{id:"b",width:16,height:16,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},i.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.346 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.14.14a.996.996 0 0 0-1.137.193L4.697 6.087 1.95 4.002a.666.666 0 0 0-.85.037l-.882.802a.667.667 0 0 0 0 .986L2.6 8 .217 10.173a.667.667 0 0 0 .001.986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.656-11.522L7.217 8l4.785 3.632V4.368Z",clipRule:"evenodd"})),i.createElement("g",{mask:"url(#b)"},i.createElement("path",{fill:"#0065A9",d:"M15.434 1.727 12.137.14A.997.997 0 0 0 11 .333L.208 10.173a.667.667 0 0 0 0 .986l.882.802a.667.667 0 0 0 .851.037L14.938 2.14A.662.662 0 0 1 16 2.667v-.039a1 1 0 0 0-.566-.9Z"}),i.createElement("g",{filter:"url(#c)"},i.createElement("path",{fill:"#007ACC",d:"m15.434 14.273-3.297 1.587A.996.996 0 0 1 11 15.667L.208 5.827a.667.667 0 0 1 0-.986l.882-.802a.667.667 0 0 1 .851-.037l12.997 9.859A.662.662 0 0 0 16 13.333v.039a1 1 0 0 1-.566.9Z"})),i.createElement("g",{filter:"url(#d)"},i.createElement("path",{fill:"#1F9CF0",d:"M12.137 15.86A.997.997 0 0 1 11 15.667a.586.586 0 0 0 1-.415V.747a.586.586 0 0 0-1-.414c.3-.3.755-.377 1.137-.193l3.296 1.585a1 1 0 0 1 .567.901v10.748a1 1 0 0 1-.567.901l-3.296 1.585Z"})),i.createElement("path",{fill:"url(#e)",fillRule:"evenodd",d:"M11.336 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.13.14a.996.996 0 0 0-1.137.193L4.687 6.087 1.94 4a.666.666 0 0 0-.85.038l-.882.802a.667.667 0 0 0 0 .986L2.59 8 .208 10.173a.667.667 0 0 0 0 .986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.657-11.522L7.208 8l4.785 3.632V4.368Z",clipRule:"evenodd",opacity:.25,style:{mixBlendMode:"overlay"}}))),i.createElement("defs",null,i.createElement("filter",{id:"c",width:32.676,height:28.759,x:-8.343,y:-4.467,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:4.167}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),i.createElement("filter",{id:"d",width:21.667,height:32.584,x:2.667,y:-8.292,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:4.167}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),i.createElement("linearGradient",{id:"e",x1:7.99,x2:7.99,y1:.041,y2:15.959,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#fff"}),i.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),i.createElement("clipPath",{id:"a"},i.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"}))))}},786110:(e,r,n)=>{"use strict";n.d(r,{Ib:()=>N,Zy:()=>O,q1:()=>L,vY:()=>R});var i=n(411855),a=n(587670),o=n(629019),s=n.n(o),l=n(794272),c=n(38580),d=n(374626),u=n(860601),p=n(574176),m=n(118830),h=n(444736),_=n(617453),g=n(843495),f=n(29680),E=n(698993),y=n(100197),b=n(279702),I=n(319882),T=n(620722),v=n(371591),S=n(716866),w=n(949207),A=n(432023);let N=(0,c.eU)(new Map);function C(e){let{isHovered:r,selection:n}=(0,l.R)(r=>({isHovered:r.mirror.appModel.hoveredNode===e.guid,selection:r.mirror.sceneGraphSelection})),o=i.useRef(null);i.useEffect(()=>{o.current&&e.isSelected&&o.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let c="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||L.includes(e.type),u=[S.nM,e._className];e.isSelected&&u.push(S.wH),r&&u.push(S.yo),c&&u.push(S.HR),e.isExpanded(e.guid)&&u.push(S.sz),e.isAncestorSelected&&u.push(S.bx),0!==e.indentation&&u.push(S.BT);let p=Array.from({length:e.indentation},(e,r)=>r+1);return i.createElement("div",{onMouseDown:r=>{(0,E.S)("html_tree"),e.didSelectRow(e.guid);let i=Object.keys(n);if(d.zl.set(I.J,!1),r.metaKey){var o;n[o=e.guid]?g.D$([o]):g.Dh([o])}else r.shiftKey&&i.length>0?g.GL(i[i.length-1],e.guid):a.w3z.selectAndPanToNode(e.guid)},onDoubleClick:r=>e.isExpandable&&e.toggleExpanded(r,e.guid),onContextMenu:r=>e.openContextMenu(r,e.guid),onMouseEnter:()=>g.Uc(e.guid),onMouseLeave:()=>g.Uc(g.Hr),role:"button",tabIndex:0,className:s()(u),ref:o,"data-fullscreen-intercept":!0},p.map(e=>i.createElement("div",{key:e,className:S.Mh})),e.children)}function O(e){return i.createElement(p.B,{onMouseDown:e.visible?r=>{r.preventDefault(),r.stopPropagation(),e.onMouseDown?.(r)}:void 0,className:s()(S.GE,e.visible&&S.RK),svg:e.expanded?w.A:A.A,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let L=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function R(e,r){let n=e?.type??b.PW.NOT_ASSET,i=n&(b.PW.ASSET_IMAGE|b.PW.ASSET_ICON);return r?i:n&b.PW.ASSET_IMAGE}function P(e){return"SYMBOL"===e||"INSTANCE"===e}function D({guid:e}){let r=(0,d.md)(N).get(e);if(!r)return null;let n=r.state;return"added"===n?i.createElement("div",{className:S.vN}):"changed"===n?i.createElement("div",{className:S.tD}):"removed"===n?i.createElement("div",{className:S.rq}):null}function k(e){return i.createElement(C,{...e,_className:e.hasChildren?S.aw:void 0},i.createElement(O,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),i.createElement(v.Bf,{className:S.V3,guid:e.guid}),i.createElement("span",{className:S.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement(D,{guid:e.guid}))}function M(e){return i.createElement(C,{...e,_className:S.aw},i.createElement(O,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),i.createElement(v.Bf,{className:S.V3,guid:e.guid}),i.createElement("span",{className:S.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement(D,{guid:e.guid}))}function F(e){var r,n;let o;let s=(0,f.eY)(),l=e.inheritedTextStyle;if(l){let e=a.glU.getStyleNodeId(l.key,l.version);o=s.get(e)?.name}let c=e.isInstanceSublayer?(r=e.name,n=e.textContent,r===n?.trim().replace(/\s+/gm," ")):e.autoRename;return i.createElement(C,{...e,_className:S.yL},i.createElement(O,{visible:!1,expanded:!1,name:e.name}),i.createElement(v.Bf,{className:S.V3,guid:e.guid}),c?null:i.createElement("span",{className:S.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement("span",{className:S.P_},e.textContent),i.createElement("span",{className:S.bT}," \xb7 ",o),i.createElement(D,{guid:e.guid}))}function x(e){return i.createElement(i.Fragment,null,i.createElement(v.Bf,{className:s()(S.V3,S.MS,{[S.hR]:!e.figJam}),guid:e.guid}),i.createElement("span",{className:s()(S.Hn,S.MS)},e.name,e.showGuids&&` (${e.guid})`))}function U(e){let r=e.guid;return i.createElement(C,{...e},i.createElement(O,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(r),onMouseDown:n=>e.toggleExpanded(n,r),name:e.name}),i.createElement(x,{guid:r,name:e.name,showGuids:e.showGuids}),i.createElement(D,{guid:e.guid}))}function B(e){let r=e.guid;return i.createElement(C,{...e},i.createElement(O,{visible:!1,expanded:!1,onMouseDown:u.lQ,name:e.name}),i.createElement(x,{guid:r,name:e.name,showGuids:e.showGuids,figJam:!0}),i.createElement(D,{guid:e.guid}))}function V(e){let{assetInfo:r}=e;return r?i.createElement(H,{...e,assetInfo:r}):i.createElement(k,{...e})}function G({guid:e,assetInfo:r,hasEnabledStaticImagePaint:n}){let a=r.type&b.PW.ASSET_IMAGE||n,o=(0,m.O)({assetId:e,thumbnailVersion:r.thumbnailVersion,width:64,height:64,scale:2});return i.createElement(T.J,{className:s()(S.ZE,a?S.Ym:S.ye),style:o.backgroundStyle,src:o.url})}function H(e){let{assetInfo:r}=e;return i.createElement(C,{...e,_className:S.Re},i.createElement(O,{visible:!1,expanded:!1,name:e.name}),i.createElement(G,{guid:e.guid,assetInfo:r,hasEnabledStaticImagePaint:e.hasEnabledStaticImagePaint}),i.createElement(i.Fragment,null,P(e.type)?i.createElement(x,{guid:e.guid,name:e.name,showGuids:!1}):i.createElement(i.Fragment,null,i.createElement("span",{className:S.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement("span",{className:S.UZ},i.createElement(h.$R,{assetInfo:r,dataTestId:"layerPanelAsset"})))))}i.memo(e=>{let r=(0,y.J2)((0,_.UK)().showGuids),n=(0,y.J2)(a.Ez5.devHandoffState().automaticIconDetection),o=i.useMemo(()=>a.w3z.getOrAddAssetInfo(e.guid),[e.guid]),s=(0,f.eY)().get(e.guid);if(!s)return null;let l=s.devToolsOrderedVisibleChildren,c=function(e,r,n){return L.includes(e.type)?B:n&&R(n,r)?V:P(e.type)?U:"FRAME"===e.type&&"NONE"!==e.stackMode?M:"TEXT"===e.type?F:k}(s,n,o);if(!c)return null;let d=l.length>0&&!(o&&R(o,n));return i.createElement(c,{toggleExpanded:e.toggleExpanded,isExpanded:e.isExpanded,openContextMenu:e.openContextMenu,indentation:e.indentation,hasChildren:d,isSelected:e.isSelected,isAncestorSelected:e.isAncestorSelected,didSelectRow:e.didSelectRow,guid:s.guid,type:s.type,name:s.name,textContent:s.textContent,absoluteBoundingBox:s.absoluteBoundingBox,hasEnabledStaticImagePaint:s.hasEnabledStaticImagePaint,inheritedTextStyle:s.inheritedTextStyle,autoRename:s.autoRename,stackMode:s.inferredAutoLayoutResult?s.inferredAutoLayoutResult.stackMode:s.stackMode,isInstanceSublayer:s.isInstanceSublayer,isSymbolSublayer:s.isSymbolSublayer,isExpandable:!e.isRoot&&d,showGuids:r,assetInfo:o})})},693897:(e,r,n)=>{"use strict";n.d(r,{Ym:()=>u});var i=n(966712),a=n(256975),o=n(988022),s=n(99506),l=n(239671),c=n(520425);let d="Enter Inspect Mode";function u(e,r,n,p,m={}){let h=r===l.nT.DevHandoff?d:"Enter Design Mode",_={source:n,hasSeatForDevMode:(0,a.tn)(e),...m},g=e.openFile?.key;if((0,o.ds)(h,g,e,_,{forwardToDatadog:p}),(0,i.Ay)().org_id&&g&&"init"!==n){let e=h===d?s.Mr.DEV_MODE_FILE_SEEN:s.Mr.DESIGN_FILE_SEEN;c.L.postRecentActivity({fileKey:g,activityType:e})}}},812890:(e,r,n)=>{"use strict";n.d(r,{d:()=>a});var i=n(582947);(0,i.Fu)("dev_mode_should_see_paywall_reminder");let a=(0,i.Fu)("dev_mode_seen_paywall_reminder")},321961:(e,r,n)=>{"use strict";n(188507),n(335682),n(243987),n(428467),n(984968),n(668860)},40987:(e,r,n)=>{"use strict";n.d(r,{cR:()=>l,d:()=>s,hv:()=>d,pc:()=>c});var i=n(38580),a=n(582947),o=n(147723);(0,i.eU)(void 0);let s=(0,i.eU)(!1),l=(0,i.eU)(!1),c=(0,i.eU)(!1),d=(0,a.Fu)(o.Ih)},165514:(e,r,n)=>{"use strict";n.d(r,{D0:()=>s,zi:()=>o});var i=n(587670),a=n(939863);function o(e){switch(e){case i.zIx.BUILD:return(0,a.t)("dev_handoff.status.ready_for_dev");case i.zIx.COMPLETED:return(0,a.t)("dev_handoff.status.completed");case i.zIx.NONE:return null}}function s(e){if(e.length>0){let r=e[0].metadata;return{status:r?.status??null,nodes:e.map(e=>({id:e.node_id,name:e.node_name}))}}return{status:null,nodes:[]}}},964881:(e,r,n)=>{"use strict";n.d(r,{Wl:()=>s,hA:()=>l,l7:()=>o,s4:()=>c}),n(411855);var i=n(188507);n(587670),n(900956),n(17604),n(493862),n(29680),n(100197);var a=n(507956);function o(){return(0,i.d4)(e=>s(e.selectedView))}function s(e){return!!e&&e?.view==="fullscreen"&&e?.showOverview===!0}function l(){return(0,i.d4)(e=>c(e.selectedView)??null)}function c(e){if(e)return(0,a.$A)(e)?e.devModeFocusId:void 0}},203264:(e,r,n)=>{"use strict";n.d(r,{E1:()=>l,ei:()=>s});var i=n(794272),a=n(966712);n(29680);var o=n(601607);function s(e,r=!1,n){return(0,o.Fk)((e,r,i)=>r&&function(e,r,n){let i=e.get(r)?.editInfo;return!i||n&&i.userId===a.Ay().user_data?.id||0===i.lastEditedAt?null:(i.lastEditedAt=1e3*i.lastEditedAt,i.createdAt=1e3*i.createdAt,i)}(n??e,r,i)||null,e,r)}function l(){let{lastViewedStamp:e,lastEditedStamp:r}=(0,i.R)(e=>({fileKey:e.openFile?.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}));return function(e,r){if(!e)return r?new Date(r):void 0;if(!r)return e?new Date(e):void 0;let n=new Date(e),i=new Date(r);return n>i?n:i}(e,r)}var c=(e=>(e.NOT_RECENT="NOT_RECENT",e.RECENTLY_EDITED="RECENTLY_EDITED",e.RECENTLY_CREATED="RECENTLY_CREATED",e))(c||{})},46415:(e,r,n)=>{"use strict";n.d(r,{E:()=>_,ce:()=>m,cv:()=>g,hZ:()=>f,rg:()=>h});var i=n(167249),a=n(38329),o=n(27087),s=n(881388),l=n(980820),c=n(156367),d=n(988022),u=n(239318);let p=e=>{let r=a.D.getState();if(!r.openFile)return;let n=r.openFile;n&&n.parentOrgId&&o.Ay.post(`/api/activity_logs/${n.key}`,{event_name:e})};function m(){p("fig_file_save_as")}let h=(0,l.nF)((e,r)=>{p("fig_file_export")}),_=(0,i.N)("GET_ACTIVITY_LOGS");(0,l.nF)((e,r)=>{let{newQuery:n,teamId:i,emails:a,eventName:o,date:l}=r,p=e.getState();u.J.getActivityLogs({pageSize:"30",orgId:p.currentUserOrgId,startTime:l.start,endTime:(0,c.H3)(l.end),...i?{teamId:i}:null,...o?{eventName:JSON.stringify(o)}:null,...a?{emails:a.join()}:null,...n?null:{after:p.activityLogs.cursor.after}}).then(({data:r})=>{let s=r.meta,u=s[0],m=s[1],h=n?u:e.getState().activityLogs.logs.concat(u);e.dispatch(f({logs:h,cursor:m})),(0,d.Fr)("Activity Logs Fetched",p.currentUserOrgId,p,{teamIdFilter:i,eventNamesFilter:o,startDateFilter:l.start,endDateFilter:(0,c.H3)(l.end),filtersOnActorEmail:!!a&&a.length>0,filtersOnActedOnEmail:!!a&&a.length>0,isNewQuery:n,numberOfResults:u.length})}).catch(r=>{let n=r.data?.message||"An error occurred while fetching activity logs.";e.dispatch(s.s.flash(n))}),e.dispatch(_(r))});let g=(0,i.N)("CLEAR_CURSOR_ACTIVITY_LOGS"),f=(0,i.N)("SET_ACTIVITY_LOGS")},955066:(e,r,n)=>{"use strict";n.d(r,{DF:()=>g,TP:()=>f,Y3:()=>y,h0:()=>b,vv:()=>h,zE:()=>E});var i=n(167249),a=n(776250),o=n(517333),s=n(374626),l=n(980820),c=n(738269),d=n(154823),u=n(788811),p=n(132367),m=n(216158);let h=(0,l.nF)(async(e,r)=>{let n=e.getState()?.user?.id;if(!n)return;let i=Object.keys(r);await (0,u.wI)(n,i),p.hp.sendToAllTabs(p.c6,i),(0,a.sx)("Delete New Autosave Files",{deletedCount:i.length})}),_=(0,l.nF)(async e=>{let r=e.getState(),n=r.user?.id;if(!n)return;await (0,u.JI)(n);let i=await (0,u.kl)(n);e.dispatch(y({filesWithChangesInIDB:i.unsyncedFiles,filesCreatedOffline:i.newFiles})),e.dispatch(f(i.nextGarbageCollectionTimestamp))}),g=(0,i.N)("SET_AUTOSAVE_ONBOARDING_TOOLTIP_VISIBLE"),f=(0,i.N)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),E=(0,i.N)("SET_AUTOSAVE_SNOOZE"),y=(0,i.N)("SET_UNCLAIMED_FILES");function b(e){p.hp.register(p.ec,()=>(function(e){let r=e.getState().user?.id??null;m.M4.fetch((0,u.OL)({userId:r}),{policy:"networkOnly"})})(e)),p.hp.register(p.c6,r=>(function(e,r){let n=s.zl.get(d.h);n&&r.includes(n)&&(o.eD?o.eD.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(c.$T({view:"recentFiles"}))),e.dispatch(_())})(e,r)),p.hp.register(p.m6,({localFileKey:e,realFileKey:r})=>(0,u.Gc)(e,r))}},113853:(e,r,n)=>{"use strict";n.d(r,{AY:()=>I,PI:()=>y,_E:()=>f,nx:()=>E,pI:()=>T,s6:()=>v});var i=n(587670),a=n(167249),o=n(1844);n(572206);var s=n(27087),l=n(881388),c=n(939863),d=n(392592),u=n(980820),p=n(99403),m=n(902957),h=n(196495);n(931770);var _=n(731078),g=n(56342);function f(e,r,n,i){let a=document.createElement("canvas"),o=a.getContext("2d");return a.width=a.height=r,o.fillStyle="image/png"===i?"transparent":"#FFF",o.fillRect(0,0,r,r),o.drawImage(a,0,0),o.drawImage(e,n.x,n.y,n.width,n.height),"image/png"===i?a.toDataURL():a.toDataURL("image/jpeg",.92)}function E(e){let r=atob(e.slice(e.indexOf(",")+1)),n=[];for(let e=0;e<r.length;e++)n.push(r[e].charCodeAt(0));return new Uint8Array(n)}let y=(0,a.N)("AVATAR_EDITOR_RESET"),b=(0,u.nF)((e,r)=>{if(r.entityType===_.ck.CURRENT_USER)s.Ay.put("/api/user",{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;n?.img_url&&i.h3O?.setImgUrl(n.img_url),e.dispatch(h.yJ({user:n,userInitiated:!1})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),r),e.dispatch(y())});else if(r.entityType===_.ck.TEAM){let n=r.entity.id;s.Ay.put(`/api/teams/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(m.yJ({team:n,userInitiated:!1})),e.dispatch(y()),e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.team_icon_updated")}))},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(y())})}else if(r.entityType===_.ck.ORG){let n=r.entity.id;s.Ay.put(`/api/orgs/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(p.yJ({org:n})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred")+r.data?.message)),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),r),e.dispatch(y())})}else if(r.entityType===_.ck.WORKSPACE){let n=r.entity.id;g.u.updateImage({workspaceId:n,img_url:r.smallUrl,img_url_500_500:r.largeUrl,onfulfilled:()=>{e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.workspace_icon_updated")}))},onrejected:r=>{let n=(0,c.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.s.error(n)),console.error(n),e.dispatch(y())}})}}),I=(0,a.N)("AVATAR_EDITOR_UPLOAD"),T=(0,u.nF)((e,r)=>{Promise.all([(0,o.Q)("profile",r.small,r.contentType),(0,o.Q)("profile",r.large,r.contentType)]).then(function(n){let i=n[0].data.meta.url,a=n[1].data.meta.url;e.dispatch(b({entity:r.entity,entityType:r.entityType,smallUrl:i,largeUrl:a}))},()=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(y())}),e.dispatch(I(r))}),v=(0,a.N)("AVATAR_EDITOR_INIT")},772167:(e,r,n)=>{"use strict";n.d(r,{DI:()=>c,NY:()=>d,V2:()=>o,cL:()=>u,dY:()=>s,sV:()=>a,zx:()=>l});var i=n(167249);let a=(0,i.N)("CANVAS_SEARCH_SET_MODE"),o=(0,i.N)("CANVAS_SEARCH_SET_SCOPE"),s=(0,i.N)("CANVAS_SEARCH_CLEAR_CATEGORY_FILTERS"),l=(0,i.N)("CANVAS_SEARCH_SWITCH_CATEGORY_FILTER_EXCLUSIVE"),c=(0,i.N)("CANVAS_SEARCH_TOGGLE_CATEGORY_FILTER"),d=(0,i.N)("CANVAS_SEARCH_SET_QUERY"),u=(0,i.N)("CANVAS_SEARCH_RESET")},975350:(e,r,n)=>{"use strict";n.d(r,{$0:()=>en,$M:()=>eA,AY:()=>V,At:()=>$,C:()=>F,CX:()=>ei,Df:()=>eM,F8:()=>ea,Fm:()=>em,Jc:()=>eD,Mv:()=>W,NJ:()=>ep,Oo:()=>eu,PB:()=>ew,Q8:()=>es,QD:()=>eR,QY:()=>B,Qe:()=>eh,RI:()=>ef,RO:()=>ev,RP:()=>ec,Tb:()=>G,U3:()=>eS,UU:()=>er,We:()=>eg,Z5:()=>eO,_B:()=>et,_v:()=>Y,a$:()=>eo,bB:()=>Z,cL:()=>eW,dB:()=>x,gi:()=>J,hY:()=>j,hx:()=>K,i4:()=>e_,js:()=>eK,k7:()=>eP,l5:()=>q,lI:()=>ee,lV:()=>Q,li:()=>ex,nL:()=>eE,nb:()=>eC,on:()=>eL,pD:()=>X,pI:()=>eV,q4:()=>eN,rW:()=>z,sQ:()=>ey,uy:()=>ek,uz:()=>eF,vV:()=>el,wJ:()=>eU,wg:()=>ed,xH:()=>eI,y3:()=>eB,yH:()=>eG,z$:()=>H});var i=n(587670),a=n(534611),o=n(167249),s=n(776250),l=n(609494),c=n(934480),d=n(966712),u=n(374626),p=n(853828),m=n(746746),h=n(776621),_=n(877432),g=n(27087),f=n(881388),E=n(939863),y=n(392592),b=n(980820),I=n(738269),T=n(792608),v=n(988022),S=n(277810),w=n(294167),A=n(356390),N=n(707465),C=n(440535),O=n(319882),L=n(917701),R=n(406457),P=n(662275),D=n(37943),k=n(801161),M=n(931828);async function F(e,r,n,i,a){await U(a.messageMeta,e,r,n,i).then(r=>{e(Y({comment:a.comment,messageMeta:a.messageMeta,attachmentUpdates:a.attachmentUpdates,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function x(e,r,n,i,a,o,s,l){return await U(o.messageMeta,r,n,i,a).then(n=>{r(eD({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}})),r(Q({commentsWriteApi:e,threadId:o.threadId,threadUuid:o.threadUuid,uuid:s,forceWithInvite:n,forceMention:n,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{r(eN({threadId:o.threadId,resetStatusOnly:!0})),r(eD({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}}))})}function U(e,r,n,i,a){return new Promise(o=>{r((0,P.to)({type:R.VB,data:{messageMeta:e,dispatch:r,usersWithoutAccess:n,externalUsersWithoutAccess:i,uninvitableUsers:a,onConfirm:()=>o(!0),onCancel:()=>o(!1)}}))})}let B=(0,b.nF)((e,r)=>{let{receiptsAPI:n,comment:i}=r;n.markAsUnread(i.id).catch(r=>{let n=(0,E.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}})}),V=(0,b.nF)((e,r)=>{let{receiptsAPI:n,thread:i}=r;n.markAsRead(i.comments.map(e=>e.id)).catch(r=>{let n=(0,E.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}})}),G=(0,b.nF)((e,r)=>{let{commentReceiptsAPI:n,canvasMentionReceiptsAPI:i}=r;n.markAllAsRead().catch(r=>{let n=(0,E.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}}),i.markAllAsRead().catch(r=>{let n=(0,E.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{r=JSON.parse(r),e.dispatch(f.s.error((0,E.Jv)(r,n)))}catch(r){e.dispatch(f.s.error(n))}})});(0,b.nF)((e,r)=>{let{reactionsApi:n,id:i,emoji:a}=r,o=n.removeReaction(i,a),s=(0,E.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,f.Q)({promise:o,fallbackError:s}))}),(0,b.nF)((e,r)=>{let n=e.getState(),{reactionsApi:i,id:a,emoji:o}=r,s=i.addReaction(a,o,{prototype_mode:"prototype"===n.selectedView.view,selectedView:n.selectedView.view,quickReply:!1}),l=(0,E.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,f.Q)({promise:s,fallbackError:l}))});let H=(0,b.nF)((e,r)=>{let{reactionsApi:n,id:i}=r,{emoji:a}=r,o=e.getState();(0,c.uD)(a)&&null!==(0,c.$f)()&&(a=(0,c.Kh)(a)[0]+(0,c.$f)());let s=n.toggleReaction(i,a,{prototype_mode:"prototype"===o.selectedView.view,selectedView:o.selectedView.view,quickReply:r.quickReply}),l=(0,E.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,f.Q)({promise:s,fallbackError:l}))}),W=(0,b.nF)((e,r)=>{let n;let{comment:i}=r,{key:a,id:o,uuid:l,parent_id:c}=i,d=g.Ay.del(`/api/file/${a}/comments/${o}`),u=(0,E.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,f.Q)({promise:d,fallbackError:u})),T.O.remove(o),n=l?(0,p.WB)().optimisticallyDeleteWithUUID({Comment:{[l]:null}},d):(0,p.WB)().optimisticallyDelete({Comment:{[o]:null}},d),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!l}),(0,m.f)(n,e.dispatch,eG({comment:{id:o,parent_id:c}}))}),K=(0,b.nF)((e,{thread:{key:r,id:n,uuid:i},resolved:a})=>{let o=e.getState();if(a&&o.comments.activeThread?.id===n&&!o.comments.showResolved&&e.dispatch(er()),(0,d.kc)().comments_undo_resolve&&a){let a={text:(0,E.t)("comments.undo"),action:()=>{e.dispatch(K({thread:{key:r,id:n,uuid:i},resolved:!1}))}};e.dispatch(y.F.enqueue({message:(0,E.t)("comments.comment_resolved"),type:"comment-resolved",button:a,onDismiss:()=>{}}))}T.O.remove(n);let c=a?"true":"false",u=a?(0,E.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,E.t)("comments.an_error_occurred_while_unresolving_this_comment");if(i&&(0,l.L4)(n)){let n=(0,p.WB)().getIdFromUuid("Comment",i).then(n=>{let i=g.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});return e.dispatch((0,f.Q)({promise:i,fallbackError:u})),i});(0,p.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:a?new Date:null}}},n),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let o=g.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});e.dispatch((0,f.Q)({promise:o,fallbackError:u})),i?(0,p.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:a?new Date:null}}},o):(0,p.WB)().optimisticallyUpdate({Comment:{[n]:{resolvedAt:a?new Date:null}}},o),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!i})}}),j=(0,b.nF)((e,{thread:{key:r,id:n,uuid:i},clientMeta:a})=>{let o;i&&(0,l.L4)(n)?(o=(0,p.WB)().getIdFromUuid("Comment",i).then(e=>g.Ay.put(`/api/file/${r}/comments/${e}`,{client_meta:a})),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(o=g.Ay.put(`/api/file/${r}/comments/${n}`,{client_meta:a}),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!i}));let c=(0,E.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,f.Q)({promise:o,fallbackError:c})),i?(0,p.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,clientMeta:{x:a.x,y:a.y,pageId:void 0===a.page_id?null:a.page_id,nodeId:void 0===a.node_id?null:a.node_id,nodeOffset:void 0===a.node_offset?null:a.node_offset,inFrame:void 0===a.in_frame?null:a.in_frame,selectionBoxAnchor:a.selection_box_anchor?a.selection_box_anchor:null,stablePath:a.stable_path?a.stable_path:null}}}},o):(0,p.WB)().optimisticallyUpdate({Comment:{[n]:{clientMeta:{x:a.x,y:a.y,pageId:void 0===a.page_id?null:a.page_id,nodeId:void 0===a.node_id?null:a.node_id,nodeOffset:void 0===a.node_offset?null:a.node_offset,inFrame:void 0===a.in_frame?null:a.in_frame,selectionBoxAnchor:a.selection_box_anchor?a.selection_box_anchor:null,stablePath:a.stable_path?a.stable_path:null}}}},o)}),z=(0,o.N)("COMMENTS_SET_COMMENT_CONTENT"),Y=(0,b.nF)((e,r)=>{let n=r.comment.key;if(!n||(0,l.I)(r.messageMeta)){e.dispatch(z());return}let i=(0,l.cs)(r.messageMeta),a=g.Ay.put(`/api/file/${n}/comments/${r.comment.id}`,{message_meta:r.messageMeta,attachment_updates:(0,C.Gq)(r.attachmentUpdates),share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,pending_mentions:i}).then(({data:r})=>{r.message?.warning_message&&0!==r.message.warning_message.length&&e.dispatch(y.F.enqueue({type:"at-mention-error",message:r.message.warning_message}))}).catch(e=>{let n=e.data?.reason?.failure_info;e.data?.reason?.reason!=="comment_validation_failure"||void 0===n||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite||r.onCommentValidationFailure(n.users_without_view,n.ext_users_without_view,n.uninvitable_users,{comment:r.comment,messageMeta:r.messageMeta})}),o=(0,E.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,f.Q)({promise:a,fallbackError:o}));let c=r.comment.uuid,d=(0,l.Rc)(r.messageMeta);if(c?(0,p.WB)().optimisticallyUpdateWithUUID({Comment:{[c]:{uuid:c,messageMeta:d,messageMetaStylized:d}}},a):(0,p.WB)().optimisticallyUpdate({Comment:{[r.comment.id]:{messageMeta:d,messageMetaStylized:d}}},a),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!c}),r.attachmentUpdates){let e=(0,S.LO)(r.attachmentUpdates.deleted);(0,p.WB)().optimisticallyDelete({CommentAttachment:e},a);let n=(0,S.Mu)(Object.values(r.attachmentUpdates.attachments),r.comment.key,r.comment.id);(0,p.WB)().optimisticallyCreate({CommentAttachment:n},a)}e.dispatch(z())}),$=(0,b.nF)(async(e,r)=>{let n=e.dispatch(q(r));if(!n||r.thread.isPendingFromSinatra)return;let o=r.thread.comments[0];if(!o)return;let l=e.getState(),c=o.client_meta?.node_id,d=o.client_meta?.stable_path?o.client_meta.stable_path:a.EP;!d&&c&&(d=[c]);let u=r.thread.id,p=r.source;o.client_meta?.page_id&&"communityHub"===l.selectedView.view&&(u!==l.selectedView.commentThreadId&&e.dispatch(I.$T({...l.selectedView,commentThreadId:u})),l.selectedView.commentThreadId&&(0,s.sx)("Comment Thread Read",{commentThreadId:u,threadType:"community_preview"})),await n,e.dispatch(em({threadId:u,source:p})),r.thread.comments.some(e=>e.isUnread)&&r.receiptsAPI&&!r.thread.isPendingFromSinatra&&!r.thread.isCanvasMention&&(e.dispatch(V({receiptsAPI:r.receiptsAPI,thread:r.thread})),(0,s.sx)("Comment Thread Read",{commentThreadId:u})),"fullscreen"===l.selectedView.view&&i.glU.setActiveCommentAnchorData({stablePath:`[${d.join(",")}]`})}),q=(0,b.nF)((e,r)=>{let n=e.getState();if(n.comments.activeThread&&n.comments.activeThread.id!==r.thread.id&&!r.skipDeactivatingExistingActiveComment&&!e.dispatch(er()))return null;n=e.getState();let{thread:a,viewport:o,config:s,navigate:l,isOrphanedComment:c}=r,{setCurrentPageIdAsync:d,pageIdForNodeId:u}=o;if(!o.getViewportInfo())return null;let p=a.comments[0];if(!p)return null;let m=p.client_meta?.node_id,h=a.page||m&&u(m)||p.client_meta?.page_id,g=[],f=n.mirror?.appModel?.currentPage,E=!1;h&&(E=f!==h,g.push(d(h).then(async()=>{E&&await (0,_.yQ)()})));let y=n.mirror.appModel.currentTool===i.NLJ.COMMENTS;if(!c&&s.repositionViewportOnCommentSelection){let e=l((0,w.E)(a,o,n.selectedView,E,y),{jump:E,jumpOnAbort:!0});e&&g.push(e)}return Promise.all(g).then()}),Z=(0,b.nF)((e,r)=>{let n=e.getState();n.comments.activeThread?.id===r.thread.id?e.dispatch(er()):(r.skipDeactivatingExistingActiveComment||e.dispatch(er()),(0,l.H3)(n.comments)&&(e.dispatch($(r)),u.zl.set(O.J,!1)))}),X=(0,o.N)("COMMENTS_STOP_EDITING"),J=(0,o.N)("COMMENTS_SUBMIT_REPLY"),Q=(0,b.nF)((e,r)=>{let n=e.getState(),{commentsWriteApi:a,commentsConfiguration:o}=r,s=n.comments.threads[r.threadId],[l,c]=a.reply({threadId:r.threadId,threadUuid:r.threadUuid,uuid:r.uuid,messageMeta:s.reply.messageMeta,attachments:Object.values(s.reply.attachments||{})},{forceMention:r.forceMention||!1,forceWithInvite:r.forceWithInvite||!1,prototypeMode:"prototype"===n.selectedView.view,trackingContext:r.trackingContext});(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(ex({commentUuid:r.uuid})),e.dispatch(eD({threadId:r.threadId,reply:{messageMeta:[],attachments:{}}})),l.then(r=>{if(!r)return;let{data:a}=r;if(a.message?.warning_message&&0!==a.message.warning_message.length&&e.dispatch(y.F.enqueue({type:"at-mention-error",message:a.message.warning_message})),a.message&&a.message.is_new_file_follower){let r=o.showNotificationSettings?{text:(0,E.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(er()),r.mirror.appModel.showUi||A.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&A.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:L.a}))})}}:void 0;e.dispatch(y.F.enqueue({message:(0,E.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let s=a.meta;e.dispatch(eH({comment:s,userInitiated:!1})),v.ds("Comment Submitted",s.key,n,{commentId:s.id,parentCommentId:s.id,selectedView:n.selectedView.view,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),(0,d.kc)().comments_faster_saving_ux_v2&&s.id&&s.uuid&&e.dispatch(eB({commentId:s.id,commentUuid:s.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(M.b({has_created_comment:!0}))}).catch(n=>{let i=n.data?.reason?.failure_info;if(n.data?.reason?.reason!=="comment_validation_failure"||void 0===i||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite){let i=(0,E.Jv)(n,(0,E.t)("comments.an_error_occurred"));e.dispatch(f.s.error(i)),e.dispatch(eN({threadId:r.threadId,resetStatusOnly:!0})),e.dispatch(eD({threadId:r.threadId,reply:s.reply}));return}r.onCommentValidationFailure(i.users_without_view,i.ext_users_without_view,i.uninvitable_users,{threadId:r.threadId,messageMeta:s.reply.messageMeta,attachments:s.reply.attachments})}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid}))}),e.dispatch(J(r))}),ee=(0,o.N)("COMMENTS_SUBMIT_NEW_COMMENT"),et=(0,b.nF)((e,r)=>{(0,s.sx)("New comment starting dispatched action",{uuid:r.uuid});let n=e.getState(),a=(0,N.U2)(n.selectedView);if(!a)return Promise.resolve();let o=r.newCommentState||n.comments.newComment,{canvasPosition:l,nodeId:c,nodeOffset:u,inFrame:p,pageId:m,viewport:h,stablePath:_}=r.destination,g=o.selectionBoxAnchor?o.selectionBoxAnchor:void 0;e.dispatch(er({force:!0})),e.dispatch(eA({resetStatusOnly:!1}));let{messageMeta:f,attachments:b}=o;(0,s.sx)("New comment creating promise",{uuid:r.uuid});let[T,S]=r.commentsWriteApi.create({fileKey:a,messageMeta:f,attachments:Object.values(b),pageId:m,uuid:r.uuid,clientMeta:{x:l.x,y:l.y,node_id:c,node_offset:u,page_id:m,viewport:h,in_frame:p,selection_box_anchor:g,stable_path:_}},{prototypeMode:"prototype"===n.selectedView.view,onValidationError:async(r,n,i)=>{if(await U(o.messageMeta,e.dispatch,r,n,i))return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eA({resetStatusOnly:!0}));let r={text:(0,E.t)("comments.view"),action(r,n){if(e.getState().comments.activeThread?.id===C.hm&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(eT()),e.dispatch(y.F.update({id:n,message:(0,E.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(ew(o)),e.dispatch(ei())}};e.dispatch(y.F.enqueue({type:`comment-creation-failure: ${S}`,error:!1,message:(0,E.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:r,timeoutOverride:1/0}));return}e.dispatch(ew(o)),e.dispatch(ei()),e.dispatch(eT())}});return(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(ex({commentUuid:r.uuid})),e.dispatch(ee(r)),T.then(p=>{if((0,s.sx)("New comment promise resolved",{uuid:r.uuid}),!p)return;let{data:h}=p;if((0,N.U2)(e.getState().selectedView)!==a)return;if(h.message?.warning_message&&0!==h.message.warning_message.length&&e.dispatch(y.F.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let n=r.commentsConfiguration.showNotificationSettings?{text:(0,E.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(er({force:!0})),r.mirror.appModel.showUi||A.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&A.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:L.a}))})}}:void 0;e.dispatch(y.F.enqueue({message:(0,E.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:n,onDismiss:()=>{}}))}let g=h.meta,f=e.getState().comments.newComment!==o;e.dispatch(eA({resetStatusOnly:f})),(0,d.kc)().comments_faster_saving_ux_v2&&g.id&&g.uuid&&e.dispatch(eB({commentId:g.id,commentUuid:g.uuid})),v.ds("Comment Submitted",a,n,{commentId:g.id,locationX:l&&l.x,locationY:l&&l.y,nodeId:c,pageId:m,nodeOffsetX:u&&u.x,nodeOffsetY:u&&u.y,selectedView:n.selectedView.view,stablePath:_,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),e.getState().userFlags.has_created_comment||e.dispatch(M.b({has_created_comment:!0})),e.dispatch((0,D.zq)({lastCreatedCommentId:g.id}))}).catch(n=>{if(e.dispatch(eA({resetStatusOnly:!0})),!(n?.data?.status>=400&&n?.data?.status<500&&n?.data?.message))return e.dispatch(y.F.enqueue({type:`comment-creation-failure: ${S}`,message:(0,E.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,E.t)("comments.retry"),action(){(0,s.sx)("New comment dispatching retry submission",{uuid:r.uuid}),e.dispatch(et({...r,newCommentState:o}))}}}));{let r=(0,E.Jv)(n);if(r)return e.dispatch(y.F.enqueue({type:`comment-creation-failure: ${S}`,message:r,error:!0}))}}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid}))})}),er=(0,b.nF)((e,r)=>{let n=e.getState(),o=r instanceof Object&&r.force,{newComment:s}=n.comments,c=n.comments.activeThread?.id,d=(0,l.Kx)(s.messageMeta)&&0===Object.keys(s.attachments).length;if(!o&&!d&&!(0,l.H3)(n.comments))return e.dispatch(eT()),!1;let u=c&&n.comments.threads[c],p=u&&(0,l.Kx)(u.reply.messageMeta)&&0===Object.keys(u.reply.attachments||{}).length;if(!o&&c&&u&&!p&&(!u.discardAttempts||u.discardAttempts<1))return e.dispatch(eb(c)),!1;let m=n.comments.editingComment;return!o&&m?(e.dispatch(eb(m.id)),!1):("fullscreen"===n.selectedView.view&&i.glU.setActiveCommentAnchorData({stablePath:a.x7}),"communityHub"===n.selectedView.view&&e.dispatch(I.$T({...n.selectedView,commentThreadId:void 0})),e.dispatch(eW()),e.dispatch(eK()),e.dispatch(eA({resetStatusOnly:!1})),n.tooltip&&e.dispatch(k.jD()),!0)}),en=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ACTIVE"),ei=(0,b.nF)((e,r)=>{let n=e.getState();if("fullscreen"===n.selectedView.view){if(n.comments.newComment.anchorPosition){let{x:e,y:a}=n.comments.newComment.anchorPosition,o=r?.stablePath;o?i.glU.setActiveCommentAnchorData({stablePath:`[${o.join(",")}]`}):i.glU.setActiveCommentAnchorData(i.glU.getCommentAnchorDataAtPosition(e,a))}else i.glU.setActiveCommentAnchorData({stablePath:a.x7})}e.dispatch(en(r))}),ea=(0,o.N)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION"),eo=(0,b.nF)((e,r)=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(M.b({has_created_selection_comment:!0})),e.dispatch(ea(r))}),es=(0,o.N)("COMMENTS_SET_NEW_ANCHOR_POSITION"),el=(0,b.nF)((e,r)=>{if("fullscreen"===e.getState().selectedView.view){let{x:e,y:n}=r.anchorPosition;i.glU.setActiveCommentAnchorData(i.glU.getCommentAnchorDataAtPosition(e,n))}e.dispatch(es(r))}),ec=(0,o.N)("COMMENTS_REMOVE_HOVERED_PIN"),ed=(0,o.N)("COMMENTS_ADD_HOVERED_PIN"),eu=(0,o.N)("COMMENTS_REMOVE_EMPHASIZED_PIN"),ep=(0,o.N)("COMMENTS_ADD_EMPHASIZED_PIN"),em=(0,o.N)("COMMENTS_SET_ACTIVE"),eh=(0,b.nF)(e=>{let r=e.getState(),n=r.selectedView;"subView"in n&&("hubFile"===n.subView||"plugin"===n.subView)&&(0,s.sx)("at_mention_search_started",{comment_type:r.comments.activeThread?.id?"community_pinned":"community_general",profile_id:r.user?.community_profile_id,resource_id:"hubFile"===n.subView?n.hubFileId:n.publishedPluginId,resource_type:"hubFile"===n.subView?"hub_file":"plugin"})}),e_=(0,o.N)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),eg=(0,o.N)("COMMENTS_SET_TYPEAHEAD"),ef=(0,o.N)("COMMENTS_SHOW_EMOJI_PICKER"),eE=(0,o.N)("COMMENTS_SET_ACTIVE_SORT"),ey=(0,o.N)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT"),eb=(0,b.nF)((e,r)=>{let n=e.getState().comments,i=n.activeThread?.id,a=i&&n.threads[i];if(a&&a.discardAttempts===l.B2){let e=(0,l._Z)(a.reply.messageMeta),r=(0,l.Kx)(a.reply.messageMeta);(0,h.Lo)("Comment discard active thread attempt","comment info",{threadId:i,messageLength:e.length,isMessageDiscardable:r}),(0,h.kF)("isMessageDiscardable",String(r)),(0,h.kF)("messageType","reply"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(ey(r))}),eI=(0,o.N)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT"),eT=(0,b.nF)(e=>{let r=e.getState().comments.newComment;if(r.discardAttempt===l.B2){let e=(0,l._Z)(r.messageMeta),n=(0,l.Kx)(r.messageMeta);(0,h.Lo)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:n}),(0,h.kF)("isMessageDiscardable",String(n)),(0,h.kF)("messageType","new"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eI())}),ev=(0,o.N)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),eS=(0,o.N)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),ew=(0,o.N)("COMMENTS_REVERT_NEW_COMMENT"),eA=(0,o.N)("COMMENTS_RESET_NEW_COMMENT"),eN=(0,o.N)("COMMENTS_RESET_THREAD"),eC=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eO=(0,o.N)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),eL=(0,o.N)("COMMENTS_SET_NEW_COMMENT"),eR=(0,o.N)("COMMENTS_SET_REPLY_ATTACHMENT"),eP=(0,o.N)("COMMENTS_SET_REPLY_MESSAGE"),eD=(0,o.N)("COMMENTS_SET_REPLY"),ek=(0,o.N)("COMMENTS_SET_EDITING_ATTACHMENT"),eM=(0,o.N)("COMMENTS_SET_EDITING"),eF=(0,o.N)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),ex=(0,o.N)("COMMENTS_SET_SAVING"),eU=(0,o.N)("COMMENTS_CLEAR_SAVING"),eB=(0,o.N)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eV=(0,o.N)("COMMENTS_CLEAR_LG_PENDING_UUID"),eG=(0,o.N)("COMMENTS_DEL"),eH=(0,b.nF)((e,r)=>{let n=e.dispatch,i=e.getState(),{comment:a}=r;if(i.user&&i.user.id===a.user_id&&!r.userInitiated){if(a.parent_id){let e=i.comments.threads[a.parent_id];if(e&&e.state===C.EB.BUSY){let i=!function(e,r){if(!e)return!r;if(!r)return!e;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++){let i=e[n],a=r[n],o=new Set(Object.keys(i)),s=Object.keys(a);if(o.size!==s.length||!s.every(e=>!!o.has(e)&&i[e]===a[e]))return!1}return!0}(r.comment.message_meta,e.reply.messageMeta);n(eN({threadId:a.parent_id,resetStatusOnly:i}))}}else{let e=i.comments.newComment;e&&e.state===C.EB.BUSY&&n(er({force:!0})),n(eA({resetStatusOnly:!1}))}}}),eW=(0,o.N)("COMMENTS_RESET"),eK=(0,o.N)("COMMENTS_RESET_ACTIVE_ID")},63397:(e,r,n)=>{"use strict";n.d(r,{Ad:()=>F,Ch:()=>L,Dg:()=>D,Hx:()=>H,LO:()=>K,RS:()=>k,Rx:()=>M,X2:()=>er,Zj:()=>B,_8:()=>j,_F:()=>G,aP:()=>X,cO:()=>x,cR:()=>P,d6:()=>en,dL:()=>Y,dv:()=>Q,e6:()=>ee,eg:()=>et,gT:()=>$,h1:()=>Z,ig:()=>V,oB:()=>J,qo:()=>z,r1:()=>U,rO:()=>R,vQ:()=>q});var i=n(167249),a=n(776250),o=n(183297),s=n(27087),l=n(881388),c=n(939863),d=n(123026),u=n(392592),p=n(837324),m=n(913270),h=n(980820),_=n(975350),g=n(738269),f=n(507877),E=n(994988),y=n(99403),b=n(506513),I=n(697551),T=n(147206),v=n(320741),S=n(935757),w=n(440535),A=n(555328),N=n(66037),C=n(746058),O=n(651705);let L=(0,i.N)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),R=(0,i.N)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),P=d.cR,D=(0,h.nF)((e,r)=>{let n;let{user:i,authedUsers:o,orgUsersByOrgId:s,authedTeamsById:l,teamAdminRolesForAuthedUsers:d,authedProfilesById:p,selectedView:h,currentUserOrgId:_}=e.getState(),E=r.profileId?p[r.profileId]:null,y=r.view&&(!E||(0,I.UK)(E,r.view))?r.view:{view:"communityHub",subView:"searchAndBrowse",data:(0,m.Gu)()};if(!E){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),e.dispatch(g.$T(y));return}let b=_;if(E.org_id){b=E.org_id;let e=s[E.org_id];n=Object.keys(o.byId).find(r=>{let n=e[r];if(n&&(0,T.Ay)(n.permission)>=N.jh.ADMIN)return n.user_id})}else E.team_id?(b=l[E.team_id]?.org_id||null,n=Object.keys(o.byId).find(e=>{let r=d[e];return r?.find(e=>e.team_id===E.team_id)?.user_id})):n=E.primary_user_id===i?.id?i?.id:o.orderedIds.find(e=>E.associated_users?.find(r=>r.user_id===e)?.user_id);if((0,S.Il)(E.id),(0,a.sx)("Community profile IA switched",{profileId:E.id,view:h.view}),e.dispatch(P(E)),e.dispatch(L()),n&&(n!==i?.id||_!==b)){let r={userId:n,orgId:b};e.dispatch(f._l({workspace:r,view:y}))}else e.dispatch(g.$T(y))}),k=(0,i.N)("COMMUNITY_HUB_ADD_FOLLOW"),M=(0,i.N)("COMMUNITY_HUB_DELETE_FOLLOW"),F=(0,i.N)("COMMUNITY_HUB_SAVE_PAGE_STATE"),x=(0,i.N)("COMMUNITY_HUB_RESET_COMMENT_STATE"),U=(0,i.N)("COMMUNITY_HUB_SET_COMMENTS"),B=(0,i.N)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),V=(0,i.N)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),G=(0,i.N)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),H=(0,i.N)("COMMENTS_INSERT_COMMUNITY_MENTION"),W=(e,r)=>{let n=/\?/.test(e)?"&":"?";return e+`${n}${r}`};(0,h.nF)((e,r)=>{if(!(0,o.u9)(r))return;let n=`/api/${(0,I.n)(r.resourceType)}/${r.resourceId}/comments`;r.selectedCommentId&&r.selectedCommentId!==w.hm&&!r.pagination?.selected_comment&&(n=W(n,`selected_comment_id=${r.selectedCommentId}`)),r.activeFeedType===A.Qv.ME&&(n=W(n,`feed_type=${r.activeFeedType}`),void 0===r.numCommentsForResource&&(n=W(n,"include_total_count=true"))),(0,o.En)(n,r.pageSizeOverride??o.vs,r,o.AS).then(e=>{let n=!e.selected_comment||e.comments.find(r=>r.id===e.selected_comment?.id),{commentsById:i,authorsById:a,feed:o}=(0,I.HR)(n?e.comments:[...e.comments,e.selected_comment]),s=e.pagination;e.selected_comment&&(s.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:i,authorsById:a,feed:o,activeFeedType:r.activeFeedType,type:r.resourceType,id:r.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),r.onSuccess&&r.onSuccess(l)}).catch(n=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_fetch_comments"))),r.onError&&r.onError()})});let K=(0,i.N)("COMMUNITY_HUB_RESTRICT_PROFILE"),j=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:i})=>{s.Ay.post(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{i&&i()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_restrict_profile_error",{error:n}),type:"RESTRICT_PROFILE_ERROR"}))}),e.dispatch(K({profileId:r,blockedProfileId:n,onSuccess:i}))}),z=(0,i.N)("COMMUNITY_HUB_UNRESTRICT_PROFILE"),Y=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:i})=>{s.Ay.del(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{i&&i()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_unrestrict_profile_error",{error:n}),type:"UNRESTRICT_PROFILE_ERROR"}))}),e.dispatch(z({profileId:r,blockedProfileId:n,onSuccess:i}))}),$=(0,i.N)("COMMUNITY_HUB_SET_COMMENT_STATE");(0,h.nF)((e,r)=>{let{id:n,type:i}=r;(n!==e.getState().communityHub.comments.id||i!==e.getState().communityHub.comments.type)&&e.dispatch(x()),e.dispatch(U(r)),e.dispatch($(r))}),(0,h.nF)((e,{profileId:r,on404Redirect:n},{loadingKey:i})=>{let a=C.s.getProfile({profileId:r});(0,v.N)(a,e,i),a.then(({data:r})=>{e.dispatch(O.Oo(r.meta.profile)),e.dispatch(g.$T(e.getState().selectedView))}).catch(r=>(404===r.status&&n?n():e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information"))),null))}),(0,h.nF)((e,{handle:r,on404Redirect:n},{loadingKey:i})=>{let a=e.getState().currentUserOrgId,o=C.s.getHandle({currentOrgId:a||void 0,handle:r});(0,v.N)(o,e,i),o.then(({data:r})=>{e.dispatch(O.Oo(r.meta.profile))}).catch(({data:r})=>{r?.status===404&&n&&n(),e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`);let q=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:i,description:a,location:o,profileHandle:d,onSuccess:u,userId:p,teamId:m,orgId:h}=r,_=s.Ay.post("/api/profile",{website:i,description:a,location:o,profile_handle:d,primary_user_id:p,team_id:m,org_id:h});(0,v.N)(_,e,n),_.then(({data:r})=>{e.dispatch(O.HZ(r.meta)),e.dispatch(O.Oo(r.meta));let{currentUserOrgId:n,orgById:i}=e.getState(),a=n&&i[n];n&&a&&n===h&&e.dispatch(y.F6({id:n,community_profile_handle:r.meta.profile_handle,community_profile_id:r.meta.id})),u&&u(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),Z=(0,h.nF)((e,r)=>{s.Ay.post("/api/profile/generate_handle").then(({data:n})=>{e.dispatch(O.HZ(n.meta)),e.dispatch(O.Oo(n.meta)),r.onSuccess&&r.onSuccess(e)}).catch(({data:r})=>{e.dispatch(l.s.error(r.message))})}),X=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:i,twitter:a,instagram:o,pronouns:d,description:m,location:h,profileId:_,profileHandle:f,onSuccess:E}=r,b=e.getState().communityHub.currentProfile;if(_===b?.id&&Object.entries(r).every(([e,r])=>void 0===r||e in b&&b[e]===r))return;let T=a?.trim(),S=o?.trim();if(T&&b?.twitter!==T&&!p.HD.test(T)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_twitter_handle_is_not_valid",{handle:T}),error:!0}));return}if(S&&b?.instagram!==S&&!p.Co.test(S)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_instagram_handle_is_not_valid",{handle:S}),error:!0}));return}let w=s.Ay.put(`/api/profile/${_}`,{website:i,twitter:T,instagram:S,pronouns:d,description:m,location:h,profile_handle:f});(0,v.N)(w,e,n);let A=e.getState().user?.community_profile_handle;w.then(({data:n})=>{let{communityHub:i,currentUserOrgId:a,orgById:o}=e.getState();i.currentProfile?.id===n.meta.id&&e.dispatch(O.Oo(n.meta));let s=o[a];if(s&&"string"==typeof s.id&&s.id===n.meta.org_id&&e.dispatch(y.F6({id:n.meta.org_id,community_profile_handle:n.meta.profile_handle})),f){let r=e.getState().selectedView;(0,I.Cj)(r)&&r?.handle===A&&e.dispatch(g.$T({view:"communityHub",subView:"handle",handle:f})),n.meta.primary_user_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:f}),type:"profile-handle"})):n.meta.team_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"team-handle"})):n.meta.org_id&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(i=>{if(i in n.meta&&i in r){let r={twitter:(0,c.t)("community.actions.your_twitter_handle_was_updated"),location:(0,c.t)("community.actions.your_location_was_updated"),instagram:(0,c.t)("community.actions.your_instagram_handle_was_updated"),website:(0,c.t)("community.actions.your_website_url_was_updated"),description:(0,c.t)("community.actions.your_description_was_updated")};e.dispatch(u.F.enqueue({message:r[i],type:"profile-updated"}))}}),E&&E(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),J=(0,h.nF)((e,r,{loadingKey:n})=>{let{profileId:i,handle:a}=r;s.Ay.del(`/api/profile/${i}`).then(()=>{e.dispatch(O.cr(a));let{currentUserOrgId:r,orgById:n}=e.getState(),o=r&&n[r];r&&o&&o.community_profile_id===i&&e.dispatch(y.F6({id:r,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})});(0,h.nF)(async(e,{file:r,profileId:n,onSuccessCallback:i},{loadingKey:a})=>{let o=(0,b.c)(r).then(e=>(function(e,r,n,i){return r?s.Ay.post(e).then(({data:e})=>e.meta).then(async({cover_image_path:e,signature:r,fields:n})=>{let a=new FormData;return n&&Object.entries(n).forEach(([e,r])=>a.append(e,r)),a.set("content-type",i.type),a.append("file",i),await fetch(e,{method:"POST",body:a}),{cover_image_path:e,signature:r}}):Promise.resolve({cover_image_path:"",signature:""})})(`/api/profile/${n}/upload`,e,r.type,r));(0,v.N)(o,e,a),await o.then(({signature:e})=>s.Ay.put(`/api/profile/${n}`,{signature:e})).then(({data:r})=>{e.dispatch(O.Oo(r.meta)),i()}).catch(r=>{e.dispatch(l.s.error(r?(0,c.t)("community.actions.an_error_occurred_with_error",{error:r}):(0,c.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`);let Q=(0,i.N)("COMMUNTY_HUB_FOLLOW_ENTITY"),ee=(0,h.nF)(async(e,r,{loadingKey:n})=>{let i=s.Ay.put("/api/follows",{followed_profile_id:r});(0,v.N)(i,e,n),await i.then(({data:n})=>{e.getState().user?.community_profile_id&&(e.dispatch(k({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.followed_profile_name",{profileName:n.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:n}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))}),e.dispatch(Q(r))},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),et=(0,i.N)("COMMUNTY_HUB_UNFOLLOW_ENTITY"),er=(0,h.nF)((e,r,{loadingKey:n})=>{let i=s.Ay.del("/api/follows",{followed_profile_id:r});(0,v.N)(i,e,n),i.then(()=>{e.getState().user?.community_profile_id&&(e.dispatch(M({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:`Unable to unfollow this profile: ${n}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))}),e.dispatch(et(r))},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function en(e){return{updateStatus:(0,i.N)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,i.N)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,i.N)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,i.N)(`${e}_CLEAR_PUBLISHING`)}}(0,h.nF)(async(e,r)=>{let n;let{thread:i,resolved:a}=r,o=e.getState();a&&o.comments.activeThread?.id===i.id&&!o.comments.showResolved&&e.dispatch(_.UU()),n=a?s.Ay.put(`/api/community_comments/${i.id}/resolve`):s.Ay.put(`/api/community_comments/${i.id}/unresolve`),await n.then(({data:r})=>{e.dispatch(E.kE({comment:{id:i.id,resolved_at:r.meta.resolved_at}}))}).catch(r=>{e.dispatch(u.F.enqueue({error:!0,message:a?(0,c.t)("community.actions.failed_to_resolve_comment"):(0,c.t)("community.actions.failed_to_unresolve_comment")}))})})},609219:(e,r,n)=>{"use strict";n.d(r,{M2:()=>h,Sp:()=>p,k3:()=>m});var i=n(167249),a=n(776621),o=n(286640),s=n(466636),l=n(980820),c=n(320741),d=n(596578);(0,l.nF)((e,r)=>{let{payments:n,source:i}=r,l=e.getState().user?.id;if(!l||!n)return;let c=n.filter(s.QQ),d=`${u}_${l}`,p=o.TQ()?.getItem(d);if(p){let e=JSON.parse(p);if(Array.isArray(e)){let r=new Set(c.map(e=>e.monetized_resource_metadata_id)),o=e.map(e=>e.monetized_resource_metadata_id).filter(e=>!r.has(e));o.length&&(0,a.x1)("community","[ActivePayments] mismatch detected",{source:i,userId:l,revoked:o,previousPayments:e,currentPayments:n},{reportAsSentryError:!0})}}let m=JSON.stringify(c);o.TQ()?.setItem(d,m)});let u="debug_succeeded_payments";(0,l.nF)((e,r,{loadingKey:n})=>{let i=d.C.getBuyerActivePayments();(0,c.N)(i,e,n),i.then(({data:r})=>{e.dispatch(h(r.meta))}).catch(()=>{})});let p=(0,i.N)("M10N_DEL_ACTIVE_USER_PAYMENT"),m=(0,i.N)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),h=(0,i.N)("M10N_SET_ACTIVE_USER_PAYMENTS")},384162:(e,r,n)=>{"use strict";n.d(r,{sz:()=>h,wJ:()=>m});var i=n(167249),a=n(776621),o=n(868389),s=n(84336),l=n(980820),c=n(697551),d=n(320741),u=n(555328),p=n(222085);let m=(0,i.N)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE"),h=(0,l.nF)((e,{shelfType:r,limit:n},{loadingKey:i})=>{let o={shelfType:r,limitShelfContent:n},s=p.A.getCommunityShelves(o);(0,d.N)(s,e,i),s.then(({data:n})=>{let i=n.meta;i.forEach(r=>_(e.dispatch,r.shelf_content)),e.dispatch(m({shelfType:r,shelves:i}))}).catch(e=>{(0,a.x1)("collections","error fetching collections",{...o,error:e.toString()})})},({shelfType:e,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${r}`);function _(e,r){let n=[],i=[],a=[];r.forEach(e=>{let r=(0,c.x1)(e);r===u.Ug.HUB_FILE?n.push(e):r===u.Ug.PLUGIN?i.push(e):r===u.Ug.WIDGET&&a.push(e)}),e((0,o.Sb)({hubFiles:n,src:"fetchShelvesForShelfType"})),e((0,s.Qi)({publishedPlugins:[...i,...a],src:"fetchShelvesForShelfType"}))}(0,l.nF)((e,{shelfType:r,filterLabel:n,limit:i},{loadingKey:a})=>{let o=p.A.getCommunityShelves({shelfType:r,filterLabel:n,limitShelfContent:i});(0,d.N)(o,e,a),o.then(({data:n})=>{let i=n.meta;i.forEach(r=>_(e.dispatch,r.shelf_content)),e.dispatch(m({shelfType:r,shelves:i}))})},({shelfType:e,filterLabel:r,limit:n})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${r}_${n}`)},410424:(e,r,n)=>{"use strict";n.d(r,{Af:()=>el,D3:()=>S.D3,FO:()=>ec,L1:()=>S.L1,N4:()=>eN,QA:()=>ed,Ri:()=>es,Sb:()=>S.Sb,VS:()=>ey,ax:()=>eC,bk:()=>eT,eq:()=>ep,i9:()=>ev,oO:()=>eI,p7:()=>eh,rH:()=>ef,rL:()=>e_,sW:()=>eR,ts:()=>eg,wO:()=>eE,yh:()=>eO});var i=n(238267),a=n(675678),o=n(587670),s=n(167249),l=n(776250),c=n(511617),d=n(354703),u=n(737947),p=n(404843),m=n(966712),h=n(374626),_=n(853828),g=n(563706),f=n(776621),E=n(27087),y=n(761870),b=n(881388),I=n(939863),T=n(392592),v=n(749949),S=n(868389),w=n(980820),A=n(63397),N=n(944682),C=n(738269),O=n(837900),L=n(662275),R=n(404717),P=n(986270),D=n(936500),k=n(107877),M=n(453909),F=n(988022),x=n(697551),U=n(782501),B=n(661060),V=n(820642),G=n(132135),H=n(99506),W=n(962155),K=n(320741),j=n(973131),z=n(284321),Y=n(984968),$=n(813408),q=n(809073),Z=n(637590),X=n(851363),J=n(596578),Q=n(955617),ee=n(301400),et=n(977466),er=n(897925),en=n(953289),ei=n(662268),ea=n(651705);let eo=n(876401).ZS,es=(0,s.N)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),el=(0,s.N)("UPDATE_HUB_FILE_PAGE_TITILE"),ec=(0,s.N)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),ed=(0,s.N)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),eu=(0,s.N)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),ep=(0,s.N)("HUB_FILE_PUT_HUB_FILE_REMIX"),em=e=>{let r=(0,I.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(g.rr){window.location.href="/login";return}e.dispatch(y.Ts({origin})),e.dispatch(L.to({type:et.x,data:{headerText:r}}))},eh=(0,w.nF)((e,r,{loadingKey:n})=>{let i=e.getState();if(!i.user){em(e);return}let a={headers:{...E.Ay.defaults.headers,"X-Figma-User-ID":r.workspace.userId}},o=E.Ay.post(`/api/hub_files/v2/${r.hubFileId}/copy`,{org_id:r.workspace.orgId},a);(0,K.N)(o,e,n),o.then(({data:n})=>{let a=n.meta;(0,l.sx)(k.M5.HUB_FILE_DUPLICATED,{hubFileId:r.hubFileId,figFileKey:a.key,searchSessionId:(0,v.w)(i)}),"whiteboard"===a.editor_type&&e.dispatch(P.Hx({storeInRecentsKey:q.$A.FigJam,id:r.hubFileId,type:q.vt.CommunityResource}));let o=(0,G.to)(a);o=(0,c.dR)(o,{[V.pt.KEY]:V.pt.VALUE,fuid:r.workspace.userId}),u.Ay.redirect(o,g.rr?void 0:"_blank"),e.dispatch(C.oB())}).catch(r=>{e.dispatch(T.F.enqueue({error:!0,message:(0,I.t)("community.actions.failed_to_duplicate_file_error",{error:(0,I.Jv)(r,(0,I.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),e_=(0,w.nF)((e,r)=>{let{canRetry:n=!0}=r,i=e.getState(),a=i.currentUserOrgId,o=(0,m.kc)().ps_benchmark?i.currentTeamId:null;if(r.folderId){let n=i.folders[r.folderId]?.team_id,a=n?i.teams[n]:null,o=(0,M.N)(i.hubFiles[r.hubFileId].viewer_mode),s=function(e){switch(e){case H._Y.WHITEBOARD:return{type:Y.sK.ADD_FIGJAM_FILE};case H._Y.SLIDES:return{type:Y.sK.ADD_SLIDES_FILE};default:return{type:Y.sK.ADD_DESIGN_FILE}}}(o);if(a&&!(0,Y.rR)(a,s)){e.dispatch(L.to({type:er.Y,data:{teamId:a.id,createInDrafts:()=>{e.dispatch(e_({...r,folderId:void 0}))},teamName:a.name,editorType:o,dispatch:e.dispatch,action:X.ZN.CREATE_FILE_FROM_TEMPLATE}}));return}}return E.Ay.post(`/api/hub_files/template/${r.hubFileId}/copy`,{folder_id:r.folderId,org_id:a,team_id:o||void 0}).then(({data:n})=>{let a=n.meta;(0,F.f5)("File Created",a,{selectedView:i.selectedView},{source:r.source}),r.callback&&r.callback(a?.key),"whiteboard"===a.editor_type&&e.dispatch(P.Hx({storeInRecentsKey:q.$A.FigJam,id:r.hubFileId,type:q.vt.CommunityResource}));let o=(0,G.to)(a);u.Ay.redirect(o,r.openInNewTab&&!g.rr?"_blank":void 0)}).catch(i=>{let a={error:!0,message:(0,I.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:r.hubFileName})};n&&(a.button={text:(0,I.t)("community.actions.retry"),action:()=>e.dispatch(e_({...r,canRetry:!1}))}),e.dispatch(T.F.enqueue(a))})}),eg=(0,w.nF)(async(e,{hubFileId:r,callback:n},{loadingKey:i})=>{let a=null,o=Promise.resolve(null),s=ee.H.getVersions({id:r});o=s;try{a=(await s).data.meta}catch(e){return}(0,K.N)(o,e,i);let{fig_file_metadata:l,remixed_from_metadata:c,...d}=a,u=d.related_content,p=d.remixed_to_metadata,m=[...u?u.content:p||[],d];c&&m.push(c),e.dispatch((0,S.Sb)({hubFiles:m,src:"getHubFileVersions"})),l&&(e.dispatch(es({hubFileId:d.id,fileKey:l.key})),l.file&&e.dispatch(N.yJ({file:l.file})),l.roles&&e.dispatch(D.uo({roles:l.roles}))),e.dispatch(el({hubFileId:d.id}));let h=new Set(p?.map(e=>e.id));e.dispatch(ep({hubFileId:d.id,from:c?c.id:null,to:h})),n?.(d)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),ef=(0,w.nF)((e,{fileKey:r})=>{(0,m.Ay)().user_data&&Q.D.getHubFileMetadata({fileKey:r}).then(({data:n})=>{let i=n.meta.published_as;i?.id?e.dispatch(es({hubFileId:i.id,fileKey:r})):e.dispatch(ec({fileKey:r}));let a=n.meta.remixed_from_metadata,o=n.meta.is_preview;a?.id?e.dispatch(ed({hubFileId:a.id,fileKey:r,isPreview:!!o})):e.dispatch(eu({fileKey:r}));let s=[i,a].filter(e=>!!e);s.length>0&&e.dispatch((0,S.Sb)({hubFiles:s,src:"getHubFileMetadata"}))}).then(()=>{(0,m.kc)().ce_new_missing_fonts_logging&&(0,B.DI)()}).catch(e=>{console.error(e)}).finally(()=>{h.zl.set(p.x,!0)})}),eE=(0,A.d6)("HUB_FILE"),{updateMetadata:ey,updateStatus:eb,clearMetadataAndStatus:eI,clearMetadata:eT}=eE,ev=(0,w.nF)((e,r)=>{let n=r.onSuccess;delete r.onSuccess;let i=[],a=r.viewerMode===H.y4.SLIDE_TEMPLATE;if(a&&en.UM){i=(0,z.AC)(e.getState());let n=(0,z.x6)(e.getState());if(!r.hubFileId&&0===i.length||(0,W.aB)(Object.values(n),new Set(i))){(0,ei.Dl)(e.dispatch);return}h.zl.set(en.UM,{state:en.F4.PUBLISH_HUB_FILE_INITIATED})}e.dispatch(eb({id:r.fileKey,status:{code:$.aP.UPLOADING}})),ew(e,r).then(({hubFile:i,actingProfile:a,profileCreated:o})=>(e.dispatch((0,S.Sb)({hubFiles:[i],src:"createHubFile"})),e.dispatch(es({hubFileId:i.id,fileKey:r.fileKey})),o&&(a.profile_created=o,e.dispatch(ea.HZ(a))),e.dispatch(ea.Oo(a)),e.dispatch(eb({id:r.fileKey,status:{code:$.aP.SUCCESS}})),r.suggestedCategory&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:i.id,categoryId:i.category_id,suggestedCategory:r.suggestedCategory},{forwardToDatadog:!0}),n?.(i),{hubFile:i})).then(({hubFile:n})=>{if(!a||null===eo)return;let i=(0,z.AC)(e.getState()),s=Object.values((0,z.x6)(e.getState())).map(e=>e.node_id),l=o.Ez5.slideThemeLibBindings().renameThemeForTemplatePublish(r.name)?s:i;if(l.length>0){let{onPublishSuccess:r,onPublishProgress:i,onPublishError:a}=(0,O.u)(H._Y.SLIDES);requestAnimationFrame(()=>{e.dispatch(eo({savepointDescription:"Community slide template publish",itemsToPublish:new Set(l),hubFileId:n.id,onPublishSuccess:r,onPublishProgress:i,onPublishError:a}))})}else h.zl.set(en.UM,{state:en.F4.PUBLISH_HUB_FILE_COMPLETED})}).catch(n=>{(a||en.UM)&&h.zl.set(en.UM,{state:en.F4.PUBLISH_HUB_FILE_ERRORED}),e.dispatch(T.F.enqueue({message:n.message,type:"hub-file-created-error",error:!0})),e.dispatch(eb({id:r.fileKey,status:{code:$.aP.FAILURE,error:n.message}}))})});function eS(e,r){if(!r)return -1;if("buffer"in r&&r.buffer){let n=r.buffer;return e.findIndex(e=>e.sha1===(0,i.sha1OfUint8Array)(n))}return"sha1"in r&&r.sha1?e.findIndex(e=>e.sha1===r.sha1):-1}async function ew(e,r){let n;let{fileKey:i,name:s,description:l,categoryId:c,publisherIds:d,tags:u,creatorPolicy:p,thumbnailBuffer:m,viewerMode:h,scalingMode:_,authorOrgId:g,authorTeamId:y,hasCustomUploadedThumbnail:b,validPrototype:T,commentsSetting:v,agreedToTos:S,isPaid:w,price:A,supportContact:N,carouselMedia:C,customCarouselThumbnail:O}=r;if(g&&y)throw Error((0,I.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(h===H.y4.PROTOTYPE&&o.X3B.firstPagePrototypeStatus()!==o.bOM.VALID)throw Error((0,I.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let L=await (0,j.m)(i,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error(e.data?.message||(0,I.t)("community.actions.could_not_connect_to_the_server"))});try{n=await eA(m,C||[],L)}catch(e){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,I.t)("community.actions.error_uploading_images_e"))}let R=eS(n?.carousel_images||[],O),P={file_version_id:L,name:s,description:l,tags:u,category_id:c,creator_policy:p,signature:n?.cover_image.signature,cover_image_uploaded:n?.cover_image.cover_image_uploaded,publisher_ids:d,viewer_mode:h,scaling_mode:_,author_org_id:g,author_team_id:y,has_custom_uploaded_thumbnail:b,valid_prototype:T,comments_setting:v,agreed_to_tos:S,is_paid:w,price:A,support_contact:N,carousel_images:n?.carousel_images,cover_image_carousel_image:n?.carousel_images[R]};return E.Ay.post("/api/hub_files",P).then(({data:e})=>{let r=e.meta;return{hubFile:r.hub_file,actingProfile:r.acting_profile,profileCreated:r.profile_created}}).catch(e=>{throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,I.Jv)(e,(0,I.t)("community.actions.could_not_publish_hub_file",{error:e.message})))})}async function eA(e,r,n,i){let o,s,l,c;let{uploadImages:u,allMedia:p}=(0,U.Kg)(r);if(!e?.length&&!u?.length)return{cover_image:{cover_image_uploaded:!1,signature:null},carousel_images:p};try{let e=await E.Ay.post("/api/hub_files/upload",{file_version_id:n,hub_file_id:i,images_sha1:u});({cover_image:{cover_image_upload_url:o,signature:s,fields:l},carousel_images:c}=e.data.meta)}catch(e){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,I.Jv)(e,(0,I.t)("community.actions.could_not_connect_to_the_server")))}let m=c.map(({url:e,fields:n,carousel_position:i})=>{let a=r[i];if(!a||!("buffer"in a)||!a.buffer)return;let o=new FormData;return Object.entries(n).forEach(([e,r])=>o.append(e,r)),o.set("content-type",(0,d.i)(a.buffer)??"image/png"),o.append("file",new Blob([a.buffer])),fetch(e,{method:"POST",body:o})});if(e?.length){let r=new FormData;Object.entries(l).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,d.i)(e)??"image/png"),r.append("file",new Blob([e])),m.push(fetch(o,{method:"POST",body:r}))}try{return await Promise.all(m),{cover_image:{cover_image_uploaded:!!e?.length,signature:s},carousel_images:p}}catch(e){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,e),Error((0,I.Jv)(e,(0,I.t)("community.actions.error_connecting_to_server_to_upload_file_images")))}}let eN=(0,w.nF)(async(e,{payload:r,onSuccess:n})=>{let i;let{hubFileId:o,name:s,description:c,categoryId:d,suggestedCategory:u,creatorPolicy:p,publisherIds:m,tags:h,viewerMode:_,scalingMode:g,commentsSetting:y,price:v,supportContact:w,carouselMedia:A,customCarouselThumbnail:N,hasCustomUploadedThumbnail:C,thumbnailBuffer:O}=r;try{i=await eA(O,A||[],void 0,o)}catch(r){throw(0,f.$D)(a.FigmaTeam.COMMUNITY,r),e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.error_uploading_images_publish_update_from_editor"),type:"hub-file-updated-error",error:!0})),Error(r)}let L=eS(i?.carousel_images||[],N),R={name:s,description:c,category_id:d,creator_policy:p,publisherIds:m,tags:h,viewer_mode:_,scaling_mode:g,comments_setting:y,price:v,support_contact:w,carousel_images:i?.carousel_images,cover_image_carousel_image:i?.carousel_images[L],has_custom_uploaded_thumbnail:C,cover_image_uploaded:i?.cover_image.cover_image_uploaded,signature:i?.cover_image.signature};await E.Ay.put(`/api/hub_files/${o}`,R).then(({data:r})=>{let i=r.meta;e.dispatch((0,S.Sb)({hubFiles:[i],src:"updateHubFile"})),u&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:i.id,categoryId:i.category_id,suggestedCategory:u},{forwardToDatadog:!0}),n?.(i)}).catch(r=>{let n=(0,I.Jv)(r,(0,I.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));throw e.dispatch(b.s.error(n)),(0,f.$D)(a.FigmaTeam.COMMUNITY,r),Error(`Error updating file ${r}`)})}),eC=(0,w.nF)((e,{hubFileId:r,redirectLink:n,onSuccess:i,onError:o})=>{E.Ay.del(`/api/hub_files/${r}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,S.Sb)({hubFiles:[n],src:"unpublishHubFile"}))}).then(()=>{n&&u.Ay.redirect(n),i?.()}).catch(e=>{(0,f.$D)(a.FigmaTeam.COMMUNITY,e),console.error(Error(`Error unpublishing file ${e}`)),o?.()})}),eO=(0,w.MM)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:r,viewContext:n},{optimistId:i})=>{E.Ay.post(`/api/hub_files/v2/${r}/copy`).then(({data:a})=>{e.dispatch(R.c(i));let o=a.meta,s=(0,G.to)(o);s=(0,c.dR)(s,{[V.pt.KEY]:V.pt.VALUE}),u.Ay.redirect(s,g.rr?void 0:"_blank"),(0,l.sx)(k.M5.HUB_FILE_DUPLICATED,{hubFileId:r,figFileKey:o.key,viewContext:n,searchSessionId:(0,v.w)(e.getState())})}).catch(r=>{e.dispatch(R.r(i)),e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_duplicate",{error:(0,I.Jv)(r,r.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})});(0,w.nF)((e,{hubFileId:r},{loadingKey:n})=>{let i=E.Ay.post(`/api/hub_files/${r}/like`);(0,K.N)(i,e,n),i.catch(r=>{e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_like_this_file_error",{error:(0,I.Jv)(r,r.data?.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let a=e.getState().user,o=a&&(0,x.sD)(a,e.getState().authedProfilesById);a?.id&&o&&(0,_.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${o.id}`]:{pluginId:null,hubFileId:r,profileId:o.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},i)},e=>`LIKE_HUB_FILE_${e}`),(0,w.nF)((e,{hubFileId:r,likeId:n},{loadingKey:i})=>{let a=E.Ay.del(`/api/hub_files/${r}/like`);(0,K.N)(a,e,i),a.catch(r=>{e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,I.Jv)(r,r.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))}),e.getState().user?.id&&n&&(0,_.WB)().optimisticallyDelete({CommunityHubLike:{[n]:null}},a)},e=>`UNLIKE_HUB_FILE_${e}`),(0,w.nF)((e,{hubFileId:r})=>E.Ay.post(`/api/hub_files/${r}/view`,{hubFileId:r}));let eL={};(0,w.nF)(async(e,{hubFileId:r})=>{let n=e.getState(),i=n.user?.id;i&&((0,l.sx)(k.M5.SLIDE_TEMPLATE_USED,{hubFileId:r}),eL[i]?.includes(r)||await J.C.updateSlideTemplateCommunityUsageCount({hubFileId:r}).then(()=>{eL[i]||(eL[i]=[]),eL[i].includes(r)||eL[i].push(r)}).catch(e=>{(0,f.x1)("Error updating Community Slide Template usage count",e,{hubFileId:r},{reportAsSentryError:!0})}))});let eR=(0,w.nF)((e,r)=>{(r===Z.G4.FULLSCREEN||r===Z.G4.FULLSCREEN_WITH_COMMENTS)&&((0,l.sx)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),r===Z.G4.FULLSCREEN_WITH_COMMENTS&&(0,l.sx)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let n={...e.getState().selectedView,fullscreenState:r};r===Z.G4.FULLSCREEN&&n.commentThreadId&&delete n.commentThreadId,e.dispatch(C.$T(n))})},853799:(e,r,n)=>{"use strict";n.d(r,{C:()=>p});var i=n(853828),a=n(27087),o=n(939863),s=n(392592),l=n(980820),c=n(697551),d=n(320741),u=n(555328);let p=(0,l.nF)((e,{id:r,resourceType:n},{loadingKey:l})=>{let p=a.Ay.post(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(p,e,l),p.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,o.Jv)(r,r.data.message)}):(0,o.t)("community.actions.unable_to_like_this_widget_error",{error:(0,o.Jv)(r,r.data.message)}),type:`${n.toUpperCase()}_LIKE_FAILED`,error:!0}))});let m=e.getState().user,h=m&&(0,c.sD)(m,e.getState().authedProfilesById);m?.id&&h&&(0,i.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${h.id}`]:{pluginId:r,hubFileId:null,profileId:h.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},p)},({id:e})=>`LIKE_RESOURCE_${e}`);(0,l.nF)((e,{id:r,resourceType:n,likeId:l},{loadingKey:p})=>{let m=a.Ay.del(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(m,e,p),m.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_unlike_this_plugin_error",{error:r.data.message}):(0,o.t)("community.actions.unable_to_unlike_this_widget_error",{error:r.data.message}),type:`${n.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&l&&(0,i.WB)().optimisticallyDelete({CommunityHubLike:{[l]:null}},m)})},74021:(e,r,n)=>{"use strict";n.d(r,{Ob:()=>y,Po:()=>b,Zy:()=>I});var i=n(167249),a=n(297666),o=n(881388),s=n(980820),l=n(113237),c=n(4564),d=n(428467),u=n(215822),p=n(384792),m=n(262151),h=n(561004),_=n(376485),g=n(249436),f=n(650947),E=n(941381);let y=(0,i.N)("PLUGIN_INITIALIZE_LOCAL"),b=(0,i.N)("PLUGIN_UPDATE_LOCAL"),I=(0,i.N)("PLUGIN_DELETE_LOCAL"),T=!1,v=(0,c.M)();(0,s.nF)(async e=>{if(v){if(v.isCompatibleWith({desktopVersion:59})){let r=await v.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},n=Object.keys(r).map(e=>parseInt(e)),i=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};i.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=r[e.localFileId].lastKnownPluginId||"",a[e.localFileId]=e}),e.dispatch(y(a))}else if(v.isCompatibleWith({desktopVersion:58})){let r=await v.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),n=Object.keys(r).map(e=>parseInt(e)),i=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};i.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId],a[e.localFileId]=e}),e.dispatch(y(a))}else{let r=await v.getAllLocalFileExtensionIds(),n=await Promise.all(r.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};n.forEach(e=>{i[e.localFileId]=e}),e.dispatch(y(i))}if(!T){T=!0,v.registerManifestChangeObserver(r=>{if("added"===r.type||"changed"===r.type){let n;let i=r.id,a=(0,u.mm)(i,r.localLoadResult,{resourceType:"unknown"}),s=e.getState().localPlugins[i]?.plugin_id;e.dispatch(b(a));let l=e.getState(),{publishingPlugins:c,localPlugins:p,publishedPlugins:m,publishedWidgets:h,currentUserOrgId:_,authedProfilesById:g,modalShown:y}=l,I=c[i];a.plugin_id!==s&&y?.type!==f.o.type&&e.dispatch((0,E.Ij)({id:i}));try{n=(0,u.mI)({...(0,d.getPermissionsState)(l),currentUserOrgId:_,localPlugins:p,publishedPlugins:m,publishedWidgets:h,authedProfilesById:g},i)}catch(r){e.dispatch(o.s.error(r.message));return}I&&I.metadata&&(0,u.L1)(I.metadata)&&!a.error&&e.dispatch((0,E.fy)({id:i,metadata:n}))}else"removed"===r.type&&e.dispatch(I(r.id))});let r=(0,a.s)(r=>{if("added"===r.type||"changed"===r.type){let n=e.getState().mirror?.selectionProperties?.selectedWidgetInfo;n&&n.pluginID&&l.x.mountWidget(n.pluginID,n.widgetID,"hot-reloading re-render");let i=p.SH()?.plugin,a=p.SH()?.triggeredFrom,o=e.getState();"manifestFileId"in r&&i&&(0,_.ZQ)(i)&&o.mirror.appModel.hotReloadPluginDev&&r.manifestFileId===i.localFileId&&(0,m.hM)()&&(async()=>{await (0,h.wY)(),"codegen"!==a&&(0,m.A9)({newTriggeredFrom:null}),(0,g.c)()})()}});v.registerCodeChangeObserver(r),v.registerManifestChangeObserver(r),v.registerUiChangeObserver(r)}}})},941381:(e,r,n)=>{"use strict";n.d(r,{$Z:()=>K,Cf:()=>$,Dl:()=>ei,GV:()=>_.GV,Ij:()=>er,KJ:()=>Q,L4:()=>F,LP:()=>q,O8:()=>Y,Qi:()=>_.Qi,R8:()=>es,Vp:()=>ea,Vx:()=>_.Vx,W9:()=>j,a8:()=>Z,b6:()=>V,et:()=>el,f1:()=>z,fd:()=>B,fs:()=>H,fy:()=>ee,gD:()=>et,l5:()=>_.l5,l7:()=>_.l7,pm:()=>en,se:()=>U,uF:()=>x,uV:()=>_.uV,uX:()=>G,uw:()=>W,wx:()=>ec,zn:()=>eo});var i=n(675678),a=n(167249),o=n(776250),s=n(38329),l=n(966712),c=n(717037),d=n(776621),u=n(27087),p=n(881388),m=n(939863),h=n(392592),_=n(84336),g=n(545941),f=n(980820),E=n(63397),y=n(651705),b=n(182976),I=n(506513),T=n(697551),v=n(782501),S=n(216158),w=n(428467),A=n(272794),N=n(215822),C=n(320741),O=n(303454),L=n(555328),R=n(813408),P=n(93623),D=n(492330),k=n(415408),M=n(56714);let F=(0,a.N)("PLUGIN_REPLACE_FEATURED"),x=(0,f.nF)((e,r,{loadingKey:n})=>{if(!e.getState().user)return;let i=P.V.getPlugins(),a=D.U.getWidgets();i.then(({data:r})=>{let n=r.meta;e.dispatch((0,_.Qi)({publishedPlugins:n,src:"initializeUserPublishedPlugins"}))}),a.then(({data:r})=>{let n=r.meta;e.dispatch((0,_.Qi)({publishedPlugins:n,src:"initializeUserPublishedWidgets"}))}),(0,C.N)(a,e,n)}),U=S.M4.Query({fetch:async e=>(await P.V.getUnpublishedPlugins()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),B=S.M4.Query({fetch:async e=>(await D.U.getUnpublishedWidgets()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),V=(0,f.nF)((e,{widgetIDToVersions:r})=>{let{publishedCanvasWidgetVersions:n,currentUserOrgId:i}=e.getState();for(let[e,a]of Object.entries(r))a.forEach(a=>{let o=n[e]?.[a];o&&new Set(r[e]).forEach(e=>{A.F.getAndCache({...o,id:e},i??void 0)})})}),G=(0,f.nF)(async(e,{resourceId:r,resourceType:n})=>{let i=n===L.bD.WIDGET?D.U.getWidgets({id:r}):P.V.getPlugins({id:r}),{data:a}=await i,o=a.meta.find(e=>e.id===r);o&&e.dispatch((0,_.Qi)({publishedPlugins:[o],src:"getPublishedResource"}))}),H=(0,a.N)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),W=(0,a.N)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function K(e,r,n){let i=await j({[e]:[r]},n);return i[e]?.[r]}async function j(e,r){let n=s.D.getState(),i=n.openFile?.key,a=await u.Ay.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:r,file_key:i}),o=a?.data?.meta||{};return s.D.dispatch(H(o)),s.D.dispatch(W(Object.fromEntries(Object.entries(e).map(([e,r])=>[e,Object.fromEntries(r.map(e=>[e,!0]))])))),o}let z=(0,f.nF)(async(e,{pluginIds:r})=>{let{currentUserOrgId:n,publishedPlugins:i}=e.getState(),a=r.filter(e=>!i[e]);if(a.length)try{let e=await P.V.postPluginsBatch(a,n),r=e.data?.meta??[];s.D.dispatch((0,_.Qi)({publishedPlugins:r,src:"fetchPublishedPlugins",overrideInstallStatus:!0}))}catch{return}}),Y=(0,f.nF)(async(e,{widgetIds:r})=>{let{currentUserOrgId:n,publishedWidgets:i}=e.getState(),a=r.filter(e=>!i[e]);if(a.length)try{let e=await u.Ay.post("/api/widgets/batch",{ids:a,org_id:n}),r=e.data?.meta??[];s.D.dispatch((0,_.Qi)({publishedPlugins:r,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),$=(0,f.nF)(async(e,{widgetIDAndVersions:r})=>{let{currentUserOrgId:n}=e.getState(),i=[],a={};r.forEach(({widgetID:e,widgetVersionID:r})=>{a[e]?a[e].includes(r)||a[e].push(r):(i.push(e),a[e]=[r])}),0!==i.length&&(await j(a,n),e.dispatch(V({widgetIDToVersions:a})),e.dispatch(Y({widgetIds:Object.keys(a)})))});(0,f.nF)((e,r,{loadingKey:n})=>{let i=P.V.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),a=(0,M.UM)(r.profileId);return(0,C.N)(i,e,n),i.then(async({data:r})=>{let n=[...await a,...r.meta];return e.dispatch((0,_.Qi)({publishedPlugins:n,src:"getCommunityProfilePlugins"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),(0,f.nF)((e,r,{loadingKey:n})=>{let i=D.U.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),a=(0,M.Jr)(r.profileId);return(0,C.N)(i,e,n),i.then(async({data:r})=>{let n=[...await a,...r.meta];return e.dispatch((0,_.Qi)({publishedPlugins:n,src:"getCommunityProfileWidgets"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`);let q=(0,f.nF)((e,r,{loadingKey:n})=>{let i=P.V.getOrg({orgId:r});return(0,C.N)(i,e,n),i.then(({data:r})=>{let n=r.meta;return e.dispatch((0,_.Qi)({publishedPlugins:n,src:"getOrgPublishedPlugins"})),n})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),Z=(0,f.nF)(async(e,r,{loadingKey:n})=>{try{e.dispatch(b.Cx({key:n}));let i=await D.U.getOrg({orgId:r}),a=i?.data?.meta||[];return e.dispatch((0,_.Qi)({publishedPlugins:a,src:"getOrgPublishedWidgets"})),e.dispatch(b.x2({key:n})),a}catch(r){return p.s.flash(r.message||(0,m.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(b.of({key:n})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function X(e,r,n){if(null===e.current_plugin_version_id||!e.id)throw Error((0,m.t)("community.actions.resource_is_invalid"));let a=0;r.iconBlob&&(a=(0,N.wf)(r.iconBlob));let s=0;r.coverBlob&&(s=(0,N.oD)(r.coverBlob));let c=r.carouselMedia,{uploadImages:p,uploadVideos:h,allMedia:_}=(0,v.Kg)(c),g=(await u.Ay.post(`/api/${(0,T.KH)(e,{pluralized:!0})}/${e.id}/images/upload`,{images_sha1:p})).data.meta,f=Promise.resolve(!1),E=r.iconBlob;void 0!==E&&(f=(0,I.c)(E).then(e=>g.icon_upload_url&&(0,l.kc)().plugins_presigned_post_img_urls?ed(g.icon_upload_url,E,e):u.Ay.crossOriginPut(g.icon_path,e,{raw:!0,headers:{...u.Ay.defaults.headers,"Content-Type":E.type}})).then(()=>!0).catch(r=>{(0,d.$D)(i.FigmaTeam.COMMUNITY,r);let n=(0,m.Jv)(r,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error((0,L.xQ)(e)?(0,m.t)("community.actions.error_uploading_widget_icon_error",{error:n}):(0,m.t)("community.actions.error_uploading_plugin_icon_error",{error:n}))}));let y=Promise.resolve(!1),b=r.coverBlob;void 0!==b&&(y=(0,I.c)(b).then(e=>g.cover_image_upload_url&&(0,l.kc)().plugins_presigned_post_img_urls?ed(g.cover_image_upload_url,b,e):u.Ay.crossOriginPut(g.cover_image_path,e,{raw:!0,headers:{...u.Ay.defaults.headers,"Content-Type":b.type}})).then(()=>!0).catch(r=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,r),Error((0,L.xQ)(e)?(0,m.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,m.Jv)(r,r.data?.message||"unknown error")}):(0,m.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,m.Jv)(r,r.data?.message||"unknown error")}))}));let{snapshotBlob:S}=r,w=Promise.resolve(!1);void 0!==S&&(w=(0,I.c)(S).then(e=>g.snapshot_upload_url&&(0,l.kc)().plugins_presigned_post_img_urls?ed(g.snapshot_upload_url,S,e):u.Ay.crossOriginPut(g.snapshot_path,e,{raw:!0,headers:{...u.Ay.defaults.headers,"Content-Type":S.type}})).then(()=>!0).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,m.Jv)(e,e.data?.message||"unknown error")}))}));let A=(0,v.Rd)(g.carousel_images,c),[C,R,P]=await Promise.all([f,y,w,A]),D=h.map(r=>(0,O.Gf)((0,T.KH)(e,{pluralized:!0}),e.id,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{_.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_plugin_video_error",{error:(0,m.Jv)(e,e.data?.message||"unknown error")}))}));await Promise.all(D);let{data:k}=await u.Ay.put(`/api/${(0,T.KH)(e,{pluralized:!0})}/${e.id}/versions/${r.id}`,{icon_uploaded:C,cover_image_uploaded:R,snapshot_uploaded:P,carousel_media:_,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,release_notes:r.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:g.image_upload_nonce,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:n}).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error((0,m.t)("community.actions.error_finalizing_plugin_error",{error:(0,m.Jv)(e,e.data?.message||"unknown error")}))}),M=k.meta;M.plugin.redirect_thumbnail_url=g.cover_image_path.split("?")[0];let F=M.plugin;if(F.id!==e.id)throw Error((0,m.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:a,coverFileSize:s}),{publishedPlugin:F,profile:M.profile}}async function J(e,r,n,a,s,l,c,p,h,_){let g;if(!e)throw Error((0,m.t)("community.actions.plugin_id_is_invalid"));let[f,E]=await Promise.all([(0,N.c2)(r,{resourceType:(0,T.nF)(h),isPublishing:!0}),(0,N.MB)(r)]),y=(0,N.ZT)(E),b=0;n.iconBlob&&(b=(0,N.wf)(n.iconBlob));let S=0;n.coverBlob&&(S=(0,N.oD)(n.coverBlob));let w=l.tokens.map(e=>e.content),A=n.carouselMedia,{uploadImages:C,uploadVideos:L,allMedia:R}=(0,v.Kg)(A),P={manifest:f,release_notes:n.releaseNotes,name:n.name,description:n.description,tagline:n.tagline,creator_policy:n.creatorPolicy,tags:w,category_id:s,images_sha1:C};g=h?u.Ay.post(`/api/widgets/${e}/upload`,P):u.Ay.post(`/api/plugins/${e}/upload`,P);let{codeUploadUrl:D,iconUploadUrl:k,coverImageUploadUrl:M,snapshotUploadUrl:F,signature:x,versionId:U,imageUploadNonce:B,carouselImageUrls:V}=await g.then(({data:e})=>({codeUploadUrl:e.meta.code_upload_url,iconUploadUrl:e.meta.icon_upload_url,coverImageUploadUrl:e.meta.cover_image_upload_url,snapshotUploadUrl:e.meta.snapshot_upload_url,signature:e.meta.signature,versionId:e.meta.version_id,imageUploadNonce:e.meta.image_upload_nonce,carouselImageUrls:e.meta.carousel_images})).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error((0,m.Jv)(e,(0,m.t)("community.actions.could_not_connect_to_the_server")))}),G=e=>{let r=e.data;if(!r||"string"!=typeof r)return;let n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Code");if(n&&n[0]&&"EntityTooLarge"===n[0].textContent)return(0,m.t)("community.actions.file_too_large")},H=Promise.resolve(!1);E&&(H=(e=>{if(e.fields&&e.code_path){let{fields:r,code_path:n}=e,i=new FormData;return Object.entries(r).forEach(([e,r])=>i.append(e,r)),i.set("Content-Type","text/javascript"),i.append("file",E),u.Ay.crossOriginPost(n,i,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}})}return"string"==typeof e?u.Ay.crossOriginPut(D,E,{headers:{...u.Ay.defaults.headers,"Content-Type":""}}):Promise.reject(Error("Invalid presigned_url"))})(D).then(()=>!0).catch(e=>{(0,d.$D)(i.FigmaTeam.COMMUNITY,e);let r=G(e)??(0,m.Jv)(e,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error(h?(0,m.t)("community.actions.error_uploading_widget_code_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_code_error",{error:r}))}));let W=Promise.resolve(!1),K=n.iconBlob;null!=K&&(W=(0,I.c)(K).then(e=>ed(k,K,e)).then(()=>!0).catch(e=>{(0,d.$D)(i.FigmaTeam.COMMUNITY,e);let r=G(e)??(0,m.Jv)(e,e.data?.message||"unknown error");throw Error(h?(0,m.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_icon_error",{error:r}))}));let j=Promise.resolve(!1),z=n.coverBlob;null!=z&&(j=(0,I.c)(z).then(e=>ed(M,z,e)).then(()=>!0).catch(e=>{(0,d.$D)(i.FigmaTeam.COMMUNITY,e);let r=G(e)??(0,m.Jv)(e,(0,m.t)("community.actions.could_not_connect_to_the_server"));throw Error(h?(0,m.t)("community.actions.error_uploading_widget_artwork_image_error",{error:r}):(0,m.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:r}))}));let{snapshotBlob:Y}=n,$=Promise.resolve(!1);null!=Y&&($=(0,I.c)(Y).then(e=>ed(F,Y,e)).then(()=>!0).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:G(e)??(0,m.Jv)(e,e.data?.message||"unknown error")}))}));let q=(0,v.Rd)(V,A),[Z,X,J,Q]=await Promise.all([H,W,j,$,q]),ee=L.map(r=>(0,O.Gf)(h?"widgets":"plugins",e,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{R.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error((0,m.t)("community.actions.error_uploading_plugin_video_error",{error:(0,m.Jv)(e,e.data?.message||"unknown error")}))}));await Promise.all(ee);let{data:et}=await u.Ay.put(`/api/${(0,T.nF)(!!h,{pluralized:!0})}/${e}/versions/${U}`,{icon_uploaded:X,cover_image_uploaded:J,snapshot_uploaded:Q,carousel_media:R,code_uploaded:Z,comments_setting:a,category_id:s,signature:x,image_upload_nonce:B,agreed_to_tos:c,org_id:p,playground_fig_file_key:n.playground_fig_file_key,playground_file_publish_type:_}).catch(e=>{throw(0,d.$D)(i.FigmaTeam.COMMUNITY,e),Error(h?(0,m.t)("community.actions.error_finalizing_widget_error",{error:(0,m.Jv)(e,e.data?.message||"")}):(0,m.t)("community.actions.error_finalizing_plugin_error",{error:(0,m.Jv)(e,e.data?.message||"")}))}),er=et.meta,en=er.plugin;if(en.id!==e)throw Error((0,m.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!f.ui,apiVersion:f.api,codeLength:y,iconFileSize:b,coverFileSize:S,isWidget:h,editorType:f.editorType?.sort().join(", ")}),{publishedPlugin:en,profile:er.profile}}let Q=(0,E.d6)("PLUGIN"),{updateMetadata:ee,updateStatus:et,clearMetadataAndStatus:er,clearMetadata:en}=Q,ei=(0,f.nF)(async(e,r)=>{let{pluginVersion:n,localFileId:a,pluginId:o,commentsSetting:s,categoryId:l,callback:u,agreedToTos:p,orgId:g,isWidget:f,playgroundFilePublishType:E,tags:b}=r;e.dispatch(et({id:a,status:{code:R.aP.UPLOADING}}));try{let{publishedPlugin:r,profile:i}=await J(o,a,n,s,l,b,p,g,f,E);e.dispatch((0,_.Qi)({publishedPlugins:[r],src:"publishPluginVersion"})),i&&(e.dispatch(y.HZ(i)),e.dispatch(y.Oo(i))),e.dispatch(et({id:a,status:{code:R.aP.SUCCESS}})),e.dispatch(en({id:a})),u()}catch(n){e.dispatch(et({id:a,status:{code:R.aP.FAILURE,error:n.message}}));let r=(0,m.t)("community.actions.could_not_publish_plugin_error",{error:(0,m.Jv)(n,n.message)});throw n instanceof c.q?(0,k.MZ)(e.dispatch,(0,m.t)("check_network_compatibility.error_bell.video_upload.message")):n.message.includes("invalid word")||e.dispatch(h.F.enqueue({message:r,error:!0})),(0,d.$D)(i.FigmaTeam.COMMUNITY,n),Error(r)}}),ea=(0,f.nF)(async(e,r)=>{let{resource:n,pluginVersion:a,callback:o,playgroundFilePublishType:s,localFileIdOrPluginId:l}=r;try{e.dispatch(et({id:l,status:{code:R.aP.UPLOADING}}));let{profile:r,publishedPlugin:i}=await X(n,a,s);e.dispatch((0,_.Qi)({publishedPlugins:[i],src:"updatePublishedPluginRole"})),r&&e.dispatch(y.Oo(r)),e.dispatch(et({id:l,status:{code:R.aP.SUCCESS}})),o()}catch(n){let r=(0,m.Jv)(n,n.message);throw n instanceof c.q?(0,k.MZ)(e.dispatch,(0,m.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(h.F.enqueue({message:r,error:!0})),e.dispatch(et({id:l,status:{code:R.aP.FAILURE,error:r}})),(0,d.$D)(i.FigmaTeam.COMMUNITY,n),Error(`Failed plugin patchVersion: ${n.message}`)}}),eo=(0,f.nF)(async(e,{pluginId:r,role:n,agreedToTos:a,isWidget:s})=>{let l;let c={org_id:n.org?n.org.id:void 0,is_public:n.is_public,agreed_to_tos:a};l=s?u.Ay.put(`/api/widgets/${r}/roles`,c):u.Ay.put(`/api/plugins/${r}/roles`,c),await l.then(({data:n})=>{let i=n.meta;(0,o.sx)("Hub Plugin Publish Role",{pluginId:r,toPublic:i.roles.is_public,toOrg:!!i.roles.org,needApproval:(0,g.AC)(i),isWidget:s}),e.dispatch((0,_.Qi)({publishedPlugins:[i],src:"updatePublishedPluginRole"}))}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,m.t)("community.publishing.could_not_publish_plugin_error",{error:(0,m.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(i.FigmaTeam.COMMUNITY,r)})}),es=(0,f.nF)(async(e,r)=>{let n;if(r.authorOrgId&&r.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:a,pluginId:o}=r,s={tags:r.tags,support_contact:r.supportContact,author_org_id:r.authorOrgId,author_team_id:r.authorTeamId,publisher_ids:r.publisherIds,hide_related_content_by_others:r.hideRelatedContentByOthers,agreed_to_tos:r.agreedToTos,is_paid:r.isPaid,is_subscription:r.isSubscription,price:r.price,has_freemium_code:r.hasFreemiumCode,category_id:r.categoryId,is_public:r.isPublic,annual_discount_percentage:r.annualDiscount,is_annual_discount_active:r.isAnnualDiscountActive};n=a?u.Ay.put(`/api/widgets/${o}`,s):u.Ay.put(`/api/plugins/${o}`,s),await n.then(({data:n})=>{let i=n.meta;e.dispatch((0,_.Qi)({publishedPlugins:[i],src:"updatePublishedPlugin"})),r.onSuccess?.()}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,m.t)("community.publishing.could_not_publish_plugin_error",{error:(0,m.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(i.FigmaTeam.COMMUNITY,r)})}),el=(0,f.nF)((e,{resource:r})=>{u.Ay.del(`/api/${(0,T.KH)(r,{pluralized:!0})}/${r.id}`).then(({data:n})=>{let i=n.meta;e.dispatch((0,_.Qi)({publishedPlugins:[i],src:"unpublishPublishedPlugin"})),(0,o.sx)("Hub Unpublish Plugin",{pluginId:r.id,...(0,N.L8)(r)})}).catch(n=>{e.dispatch(h.F.enqueue({message:(0,L.xQ)(r)?(0,m.t)("community.actions.could_not_publish_widget_error",{error:(0,m.Jv)(n,n.data?.message)}):(0,m.t)("community.actions.could_not_publish_plugin_error",{error:(0,m.Jv)(n,n.data?.message)}),error:!0})),(0,d.$D)(i.FigmaTeam.COMMUNITY,n)})});(0,f.nF)((e,{id:r,resourceType:n},{loadingKey:i})=>{let a=r=>e.dispatch((0,_.Qi)({publishedPlugins:[r],src:"getResourceVersions",overrideInstallStatus:!0})),o=n===L.bD.WIDGET?D.U.getVersions({widgetId:r}):P.V.getVersions({pluginId:r});(0,C.N)(o,e,i),o.then(({data:e})=>{a(e.meta.plugin)}).catch(e=>{console.log(`Versions of ${n} with id ${r} cannot be fetched at this time:`,e.data?.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`);let ec=(0,f.nF)(async(e,r)=>{let{role:n,userId:a,resource:o}=r;try{let r=(o.is_widget?await u.Ay.put(`/api/widgets/${o.id}/publishers/${a}`,{role:n}):await u.Ay.put(`/api/plugins/${o.id}/publishers/${a}`,{role:n})).data.meta.plugin,i=e.getState().user;n===R.kM.NONE&&a===i?.id&&(r.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,_.Qi)({publishedPlugins:[r],src:"setPluginPublisherRole"}));let s=e.getState(),{publishingPlugins:l,localPlugins:c,publishedPlugins:d,publishedWidgets:p,currentUserOrgId:m,authedProfilesById:h}=s,g=Object.values(c).find(e=>e.plugin_id===o.id),f=g?.localFileId??o.id,E=(0,N.mI)({...(0,w.getPermissionsState)(s),currentUserOrgId:m,localPlugins:c,publishedPlugins:d,publishedWidgets:p,authedProfilesById:h},g?.localFileId),y={...l[f].metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(ee({id:f,metadata:y}))}catch(r){throw e.dispatch(h.F.enqueue({message:(0,m.Jv)(r,r.message),error:!0})),(0,d.$D)(i.FigmaTeam.COMMUNITY,r),Error(r.message)}});function ed(e,r,n){if("object"==typeof e&&"fields"in e&&"image_path"in e){let{fields:n,image_path:i}=e,a=new FormData;return Object.entries(n).forEach(([e,r])=>a.append(e,r)),a.set("Content-Type",r.type),a.append("file",r),u.Ay.crossOriginPost(i,a,{raw:!0,headers:{"Content-Type":r.type}})}return"string"==typeof e?u.Ay.crossOriginPut(e,n,{raw:!0,headers:{...u.Ay.defaults.headers,"Content-Type":r.type}}):Promise.reject(Error("Invalid presigned_url"))}},727749:(e,r,n)=>{"use strict";n.d(r,{d6:()=>C,g3:()=>A,oj:()=>P,s1:()=>O,uR:()=>N});var i=n(167249),a=n(776250),o=n(966712),s=n(853828),l=n(743282),c=n(27087),d=n(939863),u=n(392592),p=n(980820),m=n(941381),h=n(662275),_=n(404717),g=n(107877),f=n(756085),E=n(988022),y=n(697551),b=n(555328),I=n(813408),T=n(93623),v=n(492330),S=n(395750),w=n(479296);let A=(0,i.N)("SET_SAVED_PLUGIN_VERSIONS");(0,p.nF)((e,r)=>{let n={};Object.keys(r).forEach(e=>{n[e]=[r[e].id]}),e.dispatch(m.b6({widgetIDToVersions:n}))});var N=(e=>(e.COMMUNITY_HUB="community_hub",e.INSERTS_MODAL="inserts_modal",e))(N||{});let C=(0,w.n)((0,p.MM)("SAVE_EXTENSION",(e,{id:r,resourceType:n,versionId:i,orgId:p,communityProfile:h,onSuccess:E,hideSuccessVisualBell:T,onFail:v,source:S,optimisticData:w},{optimistId:A})=>{let N=e.getState(),C={plugin_version_id:i,org_id:p,current_org_id:N.currentUserOrgId};C.can_handle_first_time_install=!0,C.use_upgraded_version=!0,C.profile_id=e.getState().authedActiveCommunityProfile?.id,n===b.vt.WIDGET&&(C.current_org_id=void 0);let O=`/api/${(0,y.n)(n)}/${r}/install`,L=c.Ay.post(O,C);if(N.user&&w?.resource){let e=`optimistic-plugin-install-${(0,l.g)()}`,r=(0,f.N3)(w.resource,{userId:p?null:N.user.id,orgId:p??null});r&&(0,s.WB)().optimisticallyCreate({PluginInstall:{[e]:r}},L)}L.then(({data:r})=>{e.dispatch(_.c(A));let i=r.meta,s=n===b.vt.WIDGET?{publishedPlugins:[i],src:"installResource",isWidget:!0}:{publishedPlugins:[i],src:"installResource"};if(e.dispatch(m.Qi({...s,overrideInstallStatus:!0})),E?.(),!T){let r=(()=>{if("inserts_modal"===S)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved"):(0,d.t)("community.saves.widget_saved");if((0,o.kc)().cmty_deprecate_browse_as_admin){if(p){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===p);return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_saved_for_everyone_at":"community.saves.widget_saved_for_everyone_at",{orgName:r?.name||"your org"})}if(e.getState().user?.community_profile_id)return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_saved_for_your_account_and_profile":"community.saves.widget_saved_for_your_account_and_profile")}else{if(h?.entity_type===I.o1.ORG)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_everyone_at",{orgName:h.name}):(0,d.t)("community.saves.widget_saved_for_everyone_at",{orgName:h.name});if(h?.public_at)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_your_account_and_profile"):(0,d.t)("community.saves.widget_saved_for_your_account_and_profile")}return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_saved_for_your_account"):(0,d.t)("community.saves.widget_saved_for_your_account")})();e.dispatch(u.F.enqueue({message:r,type:"plugin-installed"}))}(0,a.sx)((0,b.xQ)(i)?g.M5.WIDGET_INSTALLED:g.M5.PLUGIN_INSTALLED,{communityHubEntity:(0,b.xQ)(i)?g.ZO.WIDGETS:g.ZO.PLUGINS,communityHubEntityId:i.id,source:S})}).catch(r=>{v?.(),e.dispatch(_.r(A)),403===r.data.status?e.dispatch(u.F.enqueue({message:n===b.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_error",{error:(0,d.Jv)(r,r.data?.message)}):(0,d.t)("community.actions.unable_to_save_widget_error",{error:(0,d.Jv)(r,r.data?.message)}),type:"PLUGIN_INSTALL_FAILED",error:!0})):e.dispatch(u.F.enqueue({message:n===b.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_please_try_again"):(0,d.t)("community.actions.unable_to_save_widget_please_try_again"),type:"PLUGIN_INSTALL_FAILED",error:!0}))})})),O=(0,p.MM)("UNSAVE_EXTENSION",(e,{id:r,resourceType:n,orgId:i,communityProfile:l,hideSuccessVisualBell:p,source:h,optimisticData:f},{optimistId:E})=>{let T={org_id:i,current_org_id:e.getState().currentUserOrgId};T.use_upgraded_version=!0,T.profile_id=e.getState().authedActiveCommunityProfile?.id,n===b.vt.WIDGET&&(T.current_org_id=void 0);let v=`/api/${(0,y.n)(n)}/${r}/install`,S=c.Ay.del(v,T);f?.pluginInstallId&&(0,s.WB)().optimisticallyDelete({PluginInstall:{[f.pluginInstallId]:null}},S),S.then(({data:s})=>{let c=s.meta,f=n===b.vt.WIDGET?{publishedPlugins:[c],src:"uninstallResource",isWidget:!0}:{publishedPlugins:[c],src:"uninstallResource"};if(e.dispatch(m.Qi({...f,overrideInstallStatus:!0})),e.dispatch(_.c(E)),!p){let a={message:(()=>{if("inserts_modal"===h)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account"):(0,d.t)("community.saves.widget_removed_from_your_account");if((0,o.kc)().cmty_deprecate_browse_as_admin){if(i){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===i);return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_removed_for_everyone_at":"community.saves.widget_removed_for_everyone_at",{orgName:r?.name||"your org"})}if(e.getState().user?.community_profile_id)return(0,d.t)(n===b.vt.PLUGIN?"community.saves.plugin_removed_from_your_account_and_profile":"community.saves.widget_removed_from_your_account_and_profile")}else{if(l?.entity_type===I.o1.ORG)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_for_everyone_at",{orgName:l.name}):(0,d.t)("community.saves.widget_removed_for_everyone_at",{orgName:l.name});if(l?.public_at)return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account_and_profile"):(0,d.t)("community.saves.widget_removed_from_your_account_and_profile")}return n===b.vt.PLUGIN?(0,d.t)("community.saves.plugin_removed_from_your_account"):(0,d.t)("community.saves.widget_removed_from_your_account")})(),type:"PLUGIN_UNINSTALL_SUCCESS",button:{text:(0,d.t)("community.undo"),action:()=>{e.dispatch(u.F.dequeue({matchType:"PLUGIN_UNINSTALL_SUCCESS"})),e.dispatch(C({id:r,resourceType:n,orgId:i,communityProfile:l,hideSuccessVisualBell:!0,source:h}))}}};e.dispatch(u.F.enqueue(a))}(0,a.sx)((0,b.xQ)(c)?g.M5.WIDGET_UNINSTALLED:g.M5.PLUGIN_UNINSTALLED,{communityHubEntity:(0,b.xQ)(c)?g.ZO.WIDGETS:g.ZO.PLUGINS,communityHubEntityId:c.id,source:h})}).catch(r=>{e.dispatch(_.r(E)),console.error(r)})}),L={[b.bD.PLUGIN]:function(e){return T.V.getInstallStatus({orgId:e})},[b.bD.WIDGET]:function(e){return v.U.getInstallStatus({orgId:e})}},R=(0,p.nF)((e,r)=>{let n={plugin_id:r.id};r.orgId&&(n.org_id=r.orgId);let i=L[r.resourceType];i&&i(r.orgId).then(({data:e})=>{r.callback(!e.meta.previously_installed_plugin)}).catch(n=>{e.dispatch(u.F.enqueue({type:"plugin-save-error",message:r.resourceType===b.vt.PLUGIN?(0,d.t)("community.actions.unable_to_save_plugin_error",{error:(0,d.Jv)(n,n.data.message||"unknown error")}):(0,d.t)("community.actions.unable_to_save_widget_error",{error:(0,d.Jv)(n,n.data.message||"unknown error")}),error:!0}))})}),P=(0,p.nF)((e,r)=>{let{orgId:n,id:i,resourceType:a,communityProfile:o}=r;e.dispatch(R({orgId:n,id:i,resourceType:a,callback:r=>{r?((0,E.Cu)({action:g.s0.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN,communityHubEntity:g.ZO.PLUGINS,communityHubEntityId:i}),e.dispatch((0,h.to)({type:S.c,data:{dispatch:e.dispatch,id:i,resourceType:a,callback:()=>{e.dispatch(C({id:i,resourceType:a,orgId:n,communityProfile:o,source:"community_hub"}))}}}))):e.dispatch(C({id:i,resourceType:a,orgId:n,communityProfile:o,source:"community_hub"}))}}))})},162895:(e,r,n)=>{"use strict";n.d(r,{aI:()=>K,cx:()=>W});var i=n(675678),a=n(776250),o=n(966712),s=n(315044),l=n(563706),c=n(776621),d=n(761870),u=n(939863),p=n(392592),m=n(934533),h=n(351226),_=n(749949),g=n(291861),f=n(980820),E=n(662275),y=n(986270),b=n(697551),I=n(655215),T=n(935308),v=n(411916),S=n(750668),w=n(428467),A=n(215822),N=n(935757),C=n(555328),O=n(239671),L=n(567088),R=n(809073),P=n(379791),D=n(237870),k=n(734309),M=n(488578),F=n(372069),x=n(109226),U=n(685121);let B=()=>async e=>{let r="org-admin-team-creation";e(p.F.enqueue({message:(0,u.t)("resources_tab.create_team_modal.team_creation_loading"),type:r,icon:m.zX.SPINNER}));try{let n=(await P.G.createStarterTeam()).data.meta;return e(p.F.dequeue({matchType:r})),e(E.Lo()),n}catch(n){return e(p.F.dequeue({matchType:r})),e(E.Lo()),e(p.F.enqueue({message:(0,u.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},V=(0,D.Ju)(M.Rw),G=(e,r,n)=>i=>{i(E.to({type:V,data:{confirmationTitle:(0,u.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,u.t)("resources_tab.create_team_modal.content",{orgName:r}),confirmText:(0,u.t)("general.continue"),onConfirm:()=>{i(B()).then(n)},hideCancel:!0}}))},H=(0,f.nF)(async(e,r)=>{let{workspaces:n,plans:i}=r,a=e.getState(),{authedUsers:o,orgById:s}=a,l=n.map(e=>({...e,workspaceName:(0,v.HE)(a,e),user:o.byId[e.userId]})),c=await Promise.all(l.map(async e=>{let n=e.orgId&&s[e.orgId],o=!0,l=!0;if(n&&(o=await (0,I.hb)(r.resource,n),l=(0,I.VT)(r.resource,n)),(0,A.Rt)(r.resource)&&!(0,w.canMemberOrg)(e.orgId,a,e.userId))return;let c=(0,g.y)(e,(0,O.wN)(r.editorType),a,i);return c.publicPluginsOrWidgetDisabled=!o,c.extensionRequestsAllowed=l,c})),d=[];if(c.forEach(e=>{void 0!==e&&d.push(e)}),d.length<=1){let e=d.length?d[0]:void 0;r.onSelectWorkspace(e);return}e.dispatch(E.to({type:h._,data:{payload:{extension:r.resource,workspaces:d,onSelectWorkspace:r.onSelectWorkspace,mode:"new_file"}}}))}),W=(0,f.nF)((e,r)=>{if(l.rr){window.location.href="/login";return}let n=r.isWidget?(0,u.t)("community.logged_out.sign_up_modal_widget_header"):(0,u.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(d.Ts({origin:"plugin_try_signed_out"})),e.dispatch(E.to({type:k.l,data:{headerText:n,icon:r.isWidget?U.A:x.A,dispatch:e.dispatch,redirectPath:r.redirectPath}}))});(0,f.nF)((e,r)=>{let n=e.getState().user,i=!!r.extension.isWidget,a=r.extension.currentPluginVersion;if(!a||!n)return;let o=a.hasPlaygroundFile,s=r.fullscreenEditorType===O.nT.DevHandoff,l={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:a.id,tryPluginName:a.name??"",isWidget:i,isPlaygroundFile:!!(o||s),fuid:n.id,tryPluginParams:void 0};(0,N.Y9)(n.id,!1,null),(0,F.j)(l,null,null,n.id),(()=>{let o={storeInRecentsKey:r.fullscreenEditorType===O.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:a.id,currentUserId:n.id};i?e.dispatch(y.RH(o)):e.dispatch(y.gU(o))})()}),(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user,a=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!i)return;let l=()=>{let n={storeInRecentsKey:r.fullscreenEditorType===O.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:o.id,currentUserId:i.id};a?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},c=o.hasPlaygroundFile,d=r.fullscreenEditorType===O.nT.DevHandoff,u={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(c||d),fuid:i.id,tryPluginParams:void 0},p=n.plans.filter(e=>e.plan_type===L.O.TEAM).map(e=>{let r=(0,s.O)(e,i.id);return{...r,workspaceName:(0,v.HE)(n,r),user:i}});if(0===p.length){e.dispatch(G(o.name,n.orgById[n.currentUserOrgId].name,e=>{(0,N.Y9)(i.id,!1,null,void 0,e.id),(0,F.j)(u,null,e.id,i.id),l()}));return}1===p.length?((0,N.Y9)(i.id,!1,null,void 0,p[0].teamId??null),(0,F.j)(u,null,p[0].teamId??null,i.id),l()):e.dispatch(E.to({type:h._,data:{payload:{workspaces:p,onSelectWorkspace:e=>{(0,N.Y9)(i.id,!1,null,void 0,e?.teamId??null),(0,F.j)(u,null,e?.teamId??null,i.id),l()},mode:"new_file"}}}))}),(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user,a=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!i)return;let s=o.hasPlaygroundFile,l=r.fullscreenEditorType===O.nT.DevHandoff,c={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(s||l),fuid:i.id,tryPluginParams:void 0},d=n.plans.find(e=>e.plan_type===L.O.ORG&&e.plan_id===n.currentUserOrgId);(0,N.Y9)(i.id,!1,d.plan_id,void 0,null),(0,F.j)(c,d.plan_id,null,i.id),(()=>{let n={storeInRecentsKey:r.fullscreenEditorType===O.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:o.id,currentUserId:i.id};a?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))})()});let K=(0,f.nF)(async(e,r)=>{let n=e.getState(),{user:s,authedActiveCommunityProfile:l}=n,d=(0,_.w)(n),m=(0,C.xQ)(r.resource),h=(0,A.uF)(r.resource);if(!s){e.dispatch(W({isWidget:m}));return}let g=()=>{let n={storeInRecentsKey:r.fullscreenEditorType===O.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.resource.id,version:h.id,currentUserId:s.id};m?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},f=(0,b.Gg)(n).length>1,E=(0,b.cs)(l),w=!!(s?.id&&(0,v.Tt)([s.id],n)),L=[],P=null;if((0,o.kc)().ps_benchmark)try{P=await e.dispatch((0,T.nm)(!0)),L=(0,S.F)(n,r.resource,P)}catch(n){let r=n?.data?.message||(0,u.t)("file_browser.error_try_again");e.dispatch(p.F.enqueue({message:r,type:"error"}))}else L=(0,S.F)(n,r.resource,{plansByUserId:{},teams:[],orgs:[]});let D=(f||w)&&!E&&!r.fileKey;(0,o.kc)().ps_benchmark&&(D=L.length>1&&!r.fileKey);let k={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.resource.id,tryPluginVersionId:h.id,tryPluginName:h.name,tryPluginEditorType:(0,A.iz)(h.manifest.editorType),isWidget:m,isPlaygroundFile:!!r.isPlaygroundFile,tryPluginParams:void 0,fileKey:r.fileKey};if((0,a.sx)("CTA Clicked",{name:"Try it out",pluginId:r.resource.id,isWidget:m,editorType:r.fullscreenEditorType,isMonetized:(0,C.m3)(r.resource),fileKey:r.fileKey,searchSessionId:d}),D)(0,a.sx)("try_it_out_drafts_picker_menu_opened",{pluginId:r.resource.id,isWidget:m,searchSessionId:d}),e.dispatch(H({plans:P,workspaces:L,resource:r.resource,editorType:(0,O.oD)(r.fullscreenEditorType),onSelectWorkspace:e=>{e?(k.fuid=e.userId,(0,N.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,F.j)(k,e.orgId,e.teamId??null,e.userId)):(0,F.j)(k,null,null,s.id),g()}}));else{if((0,o.kc)().ps_benchmark){if(r.fileKey)k.fuid=r.userId??s.id,(0,F.j)(k,null,null,k.fuid);else if(1===L.length){let i=L[0];if(i.orgId&&!(0,I.VT)(r.resource,n.orgById[i.orgId])&&!await (0,I.hb)(r.resource,n.orgById[i.orgId])){e.dispatch(G(h.name,(0,v.HE)(n,i),e=>{(0,N.Y9)(s.id,!1,null,void 0,e.id),(0,F.j)(k,null,e.id,s.id),g()}));return}(0,N.Y9)(i.userId,!1,i.orgId,void 0,i.teamId??null),(0,F.j)(k,i.orgId,i.teamId??null,i.userId)}else(0,c.$D)(i.FigmaTeam.COMMUNITY,Error("No workspaces found")),e.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.error_try_again"),error:!0}))}else r.userId?(k.fuid=r.userId,(0,N.Y9)(r.userId,!1),(0,F.j)(k,null,null,r.userId)):(0,F.j)(k,null,null,s.id);g()}})},225266:(e,r,n)=>{"use strict";n.d(r,{MZ:()=>E,Nn:()=>g,Xt:()=>I,aq:()=>b,dx:()=>f,gI:()=>T});var i=n(27087),a=n(881388),o=n(939863),s=n(868389),l=n(980820),c=n(941381),d=n(164185),u=n(988022),p=n(215822),m=n(772192),h=n(867795),_=n(76158),g=(e=>(e.INVITE_TILE="invite_tile",e.COMMUNITY_PAGE="community_page",e))(g||{});(0,l.nF)((e,r)=>{i.Ay.put("/api/community_publishers/accept",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let f=(0,l.nF)((e,r)=>{let{src:n,plugin_id:s,widget_id:l}=r;i.Ay.put("/api/plugin_publishers/accept",{plugin_id:s,widget_id:l}).then(({data:r})=>{let i=y(r.meta);i&&e.dispatch(i),(0,u.ye)("plugin_publisher_invite_accepted",{src:n,userId:e.getState().user?.id,pluginId:s??l,isWidget:!!l});let a=(0,p.T)();s?(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===a?h.p.PLUGINS:void 0,initialFdResourceTab:"figma"===a?_.s.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===a,initialFdView:"figma"===a?"development":void 0,source:`extension-publisher-invite-${n}`}):l&&(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===a?h.p.WIDGETS:void 0,initialFdResourceTab:"figma"===a?_.s.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===a,initialFdView:"figma"===a?"development":void 0,source:`extension-publisher-invite-${n}`})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});(0,l.nF)((e,r)=>{i.Ay.del("/api/community_publishers/remove",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let E=(0,l.nF)((e,r)=>{i.Ay.del("/api/plugin_publishers/remove",r).then(({data:n})=>{let i=n.meta;if(n.meta.plugin){let{plugin_publishers:e}=n.meta.plugin;n.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(n.meta.widget){let{plugin_publishers:e}=n.meta.widget;n.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let a=y(i);a&&e.dispatch(a),(0,u.ye)("plugin_publisher_invite_removed",{src:r.src,userId:e.getState().user?.id,pluginId:r.plugin_id||r.widget_id,isWidget:!!r.widget_id})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});function y(e){return e.hub_file?(0,s.Sb)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?c.Qi({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?c.Qi({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}let b=(0,l.nF)(e=>{m.R.loadPluginsPublishedByUser(e),m.R.loadPluginsAuthoredByCurrentOrg(e)}),I=(0,l.nF)(e=>{m.R.loadPluginsAuthoredByCurrentOrg(e)}),T=(0,l.nF)(async e=>{await m.R.loadWidgetsAuthoredByCurrentOrg(e)})},57879:(e,r,n)=>{"use strict";n.d(r,{r:()=>E});var i=n(587670),a=n(939863),o=n(392592),s=n(545941),l=n(980820),c=n(662275),d=n(988022),u=n(428467),p=n(215822),m=n(555328),h=n(650947),_=n(749449),g=n(530498),f=n(941381);let E=(0,l.nF)((e,{localFileId:r,publishedPluginId:n,entryPoint:l,initialTab:E,initialAllowedTabs:y,localSnapshotUrl:b,localSnapshotBlob:I})=>{let T=e.getState(),{localPlugins:v,publishedPlugins:S,publishedWidgets:w,publishingPlugins:A,currentUserOrgId:N,authedProfilesById:C,user:O}=T,L=n&&S[n]||n&&w[n],R=null!=r&&v[r];if(L&&!(0,m.m3)(L)&&(0,s.Ul)(L)&&R&&R.manifest.permissions?.includes("payments")&&O&&!O.has_passed_visual_compliance){e.dispatch(c.$O({type:g.O.type}));return}if(null==r||A[r]){if(null!=r&&A[r])try{if(b&&A[r].metadata.widgetSnapshotImageSrc!==b){let{metadata:n}=A[r];n.widgetSnapshotImageSrc=b,n.widgetSnapshotImageBlob=I,e.dispatch((0,f.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(o.F.enqueue({message:(0,a.Jv)(r)||r.message,error:!0}));return}else if(void 0===r&&n&&L)try{let r=(0,p.mI)({...(0,u.getPermissionsState)(T),currentUserOrgId:N,localPlugins:v,publishedPlugins:S,publishedWidgets:w,authedProfilesById:C},void 0,n,b);e.dispatch((0,f.fy)({id:L.id,metadata:r}))}catch(r){e.dispatch(o.F.enqueue({message:(0,a.Jv)(r)||r.message,error:!0}));return}}else try{let i=(0,p.mI)({...(0,u.getPermissionsState)(T),currentUserOrgId:N,localPlugins:v,publishedPlugins:S,publishedWidgets:w,authedProfilesById:C},r,n,b,I);e.dispatch((0,f.fy)({id:r,metadata:i}))}catch(r){e.dispatch(o.F.enqueue({message:(0,a.Jv)(r)||r.message,error:!0}));return}i.glU&&i.glU.triggerAction("set-tool-default",null),(0,d.uE)("show_publish_plugin_modal",T,{entryPoint:l,userId:T.user?.id,orgId:T.currentUserOrgId,resourceType:L?L.is_widget?"widget":"plugin":void 0,publishedResourceId:L?L.id:void 0,initialTab:E??_.KM.PUBLISH}),e.dispatch(c.to({type:h.o,data:{localFileId:r,entryPoint:l,initialTab:E,initialAllowedTabs:y??_.x5,publishedPluginId:L?L.id:void 0,existingSecurityFormResponse:null}}))})},970516:(e,r,n)=>{"use strict";n.d(r,{Pv:()=>_,S:()=>h,TH:()=>p,lW:()=>u,le:()=>m});var i=n(686759),a=n(939863),o=n(392592),s=n(662275),l=n(707465),c=n(558356),d=n(980820);let u=(0,d.nF)((e,r)=>{let n=r.stringToCopy,s={withLineBreaks:!(r.ignoreLineBreaks??!0),successText:r.successText};(0,i.Dk)(n,s).then(()=>{e.dispatch(o.F.enqueue({type:"copied_to_clipboard",message:s.successText??(0,a.t)("fullscreen_actions.copied_to_clipboard")}))})});function p(e){return(0,d.nF)((e,r)=>{let n=r.selector.selectedViewToPath(r.selectedView,r.data);if(!n)return;let i=new URL(n,document.baseURI).href;e.dispatch(h({url:i}))})(e)}(0,d.nF)((e,r)=>{let n=r.emailList,s=n.length,l=n.join("; ");(0,i.Dk)(l).then(()=>{e.dispatch(o.F.enqueue({message:(0,a.t)("copy_to_clipboard.emails_copied_to_clipboard",{numEmails:s,emailText:l}),type:"emails-copied"}))})});let m=(0,d.nF)((e,r)=>{let n=new URL((0,l.Np)(e.getState(),r),document.baseURI).href;e.dispatch(h({url:n}))}),h=(0,d.nF)((e,r)=>{let n=r.url;(0,i.Dk)(n).then(()=>{e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:(0,a.t)("copy_to_clipboard.link_to_selection_copied_to_clipboard")}))}).catch(()=>{e.dispatch(s.to({type:c.o,data:{link:n}}))})}),_=(0,d.nF)((e,r)=>{let n=r.url,l="plugin"===r.extensionType?(0,a.t)("copy_to_clipboard.link_to_plugin_copied_to_clipboard"):(0,a.t)("copy_to_clipboard.link_to_widget_copied_to_clipboard");(0,i.Dk)(n).then(()=>{e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:l}))}).catch(()=>{e.dispatch(s.to({type:c.o,data:{link:n}}))})})},56691:(e,r,n)=>{"use strict";n.d(r,{Ri:()=>L,c3:()=>P,j3:()=>O,mg:()=>C,on:()=>R});var i=n(167249),a=n(776250),o=n(627776),s=n(297666),l=n(517333),c=n(737947),d=n(315044),u=n(738269),p=n(119198),m=n(974105),h=n(788811),_=n(99506),g=n(623746),f=n(428467),E=n(707465),y=n(776615),b=n(239671),I=n(945020),T=n(967409),v=n(294662),S=n(637590),w=n(980820),A=n(445092);let N=(0,w.nF)((e,{viewport:r})=>{let{selectedView:n}=e.getState();if("fullscreen"===n.view){e.dispatch(u.$T({...n,viewport:r}));let i=h.ZG()?.fileKey||n.fileKey;i&&l.eD?.updateViewport(i,r)}});(0,w.nF)(e=>{let r=e.getState(),n=function(e){let r=(0,f.getPermissionsStateMemoized)(e);return r.currentUserOrgId?(0,f.canMemberOrg)(r.currentUserOrgId,r)?T.Rx.ORG:T.Rx.ORG_GUEST:T.Rx.PERSONAL}(r);e.dispatch(A.Rz({query:r.desktopNewTab.searchQuery,searchScope:n,searchModelType:T.uH.FILES})),e.dispatch(A.r0({entryPoint:"desktop_new_tab"})),r=e.getState();let i=(0,E.xS)(r,{view:"search",entryPoint:"desktop_new_tab",previousView:r.selectedView&&((0,S.QB)(r.selectedView)||(0,S.bN)(r.selectedView))?r.selectedView:void 0});c.Ay.redirect(i)});let C=(0,i.N)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),O=(0,i.N)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),L=(0,i.N)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY");function R(e,r){return null==r?"#00000000":"whiteboard"===r?"#ffffff":`#${(0,y.w2)(e)}`}(0,w.nF)((e,r)=>{let n=e.getState(),i=r.result,a=i.model,o={position:r.index,resource_id:a.key,resource_type:i.search_model_type.toString(),matched_queries:i.matched_queries,result:i},s={plan:(0,d.S)(n)};new v.vj.Analytics(n.search,o,s).click(i.search_model_type,n.selectedView,{action:r.clickAction}),e.dispatch(A.ky()),e.dispatch(u.$T({view:"fullscreen",fileKey:a.key,editorType:(0,b.wN)(a.editor_type??_._Y.DESIGN)}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey);(0,a.sx)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:i.key}),e.dispatch(u.$T({view:"prototype",file:(0,g.ge)(i),nodeId:r.pageId,pageId:r.pageId}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey);(0,a.sx)("Desktop New Tab Open Recent",{itemType:"file",fileKey:i.key}),e.dispatch(u.$T({view:"fullscreen",fileKey:i.key,editorType:(0,b.wN)(i.editor_type??_._Y.DESIGN)}))}),(0,w.nF)((e,r)=>{let n=e.getState();if(!n.desktopNewTab.isCreatingFile){let i=(0,o.ce)()?I.ai.SAME_TAB:I.ai.NEW_TAB,a=(0,m.xA)(e.getState(),i,r.projectId?{folderId:r.projectId}:"drafts",{from:I.f6.DESKTOP_NEW_TAB_BUTTON,selectedView:n.selectedView},r.editorType,void 0);e.dispatch(p.uM(a))}});let P=(0,s.s)((e,r)=>{e.dispatch(N({viewport:r}))},1e3)},244673:(e,r,n)=>{"use strict";n.d(r,{A3:()=>K,CE:()=>V,Cs:()=>Y,HS:()=>R,I4:()=>eh,Ir:()=>P,N9:()=>J,NL:()=>j,Np:()=>X,OC:()=>en,OJ:()=>L,Ox:()=>U,Pg:()=>er,Qv:()=>ed,UX:()=>q,V9:()=>F,VV:()=>eu,Vk:()=>em,WA:()=>O,_1:()=>ep,bA:()=>ec,e9:()=>es,g6:()=>C,h8:()=>ea,he:()=>k,iy:()=>G,k1:()=>ee,ks:()=>H,lV:()=>et,lu:()=>ei,mI:()=>el,n0:()=>Q,ne:()=>e_,oI:()=>N,ot:()=>B,wk:()=>W});var i=n(587670),a=n(167249),o=n(157663),s=n(297666),l=n(966712),c=n(939863),d=n(392592),u=n(988022),p=n(974105),m=n(857766),h=n(355513),_=n(960628),g=n(239671),f=n(518261),E=n(846456),y=n(587467),b=n(411189),I=n(728406),T=n(368702),v=n(980820);function S(e){return e.multiplayer.allUsers.length}function w(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}async function A(e,r){let n=e;return await (0,b._s)({songID:e,onSuccess:()=>{},onNotFound:()=>{r.dispatch($({selectedSongID:"",musicStartTimeMs:0})),n="",r.dispatch(Z()),r.dispatch(d.F.enqueue({message:(0,c.t)("whiteboard.timer.song_not_available_error"),error:!0,type:"active-song-not-found"}))}}),n}let N=(0,a.N)("SET_SELECTED_SONG_ID_MUSIC");(0,v.nF)((e,r)=>{let{music:n}=e.getState().music,i=!r.dontTransmitWhenPaused;if(n&&!n.isStopped&&(!n.isPaused||i)){let i=e.getState().music.activeSongs.find(e=>e.song_id===r.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!n||n.isPaused,selectedSongID:r.selectedSongID,lastReceivedSongTimestampMs:i?.start_at_ms||0,isStopped:!n||n.isStopped}))}e.dispatch(N(r))});let C=(0,v.nF)(e=>{e.dispatch(O()),(0,b.I8)(),(0,b.om)()}),O=(0,a.N)("RESET_LOCAL_MUSIC"),L=(0,v.nF)((e,r)=>{if(e.dispatch(R(r)),r.isPaused||r.isStopped||!r.selectedSongID)(r.isPaused||r.isStopped)&&(0,b.c4)()&&(0,b.I8)();else{let n=M(r.selectedSongID,e.getState().music.activeSongs);(0,b.$_)(n,()=>{e.dispatch(D())})}}),R=(0,a.N)("SET_MUSIC_STATE"),P=(0,a.N)("RESUME_MUSIC");(0,v.nF)(async(e,r)=>{let n=w(r),i=e.getState(),a=i.music.music?.selectedSongID;a&&(a=await A(a,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1})),e.dispatch(P(r))}),(0,v.nF)((e,r)=>{let n=w(r),i=e.getState(),a=i.music.music?.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1}))});let D=(0,v.nF)(e=>{let r=e.getState(),n=r.music.music?.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),k=(0,a.N)("START_MUSIC");(0,v.nF)(async(e,{musicStartTimeMs:r=0})=>{let{music:n}=e.getState().music,i="";n&&(i=n.selectedSongID),i&&(i=await A(i,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:i,lastReceivedSongTimestampMs:r,isStopped:!1})),e.dispatch(k({musicStartTimeMs:r}))});let M=(e,r)=>r.find(r=>r.song_id===e),F=(0,a.N)("SEND_MUSIC_MESSAGE"),x=(0,v.nF)((e,r)=>{let n=e.getState().music;i.h3O.sendMusic(r.isPaused,(n?.music?.musicMessageID||0)+1,r.selectedSongID||"",r.lastReceivedSongTimestampMs||0,r.isStopped),e.dispatch(F(r))});(0,v.nF)((e,r)=>{"open"===r.state&&(0,T.D)(()=>{e.getState().music?.modalState==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(r))});let U=(0,a.N)("SET_MUSIC_MODAL"),B=(0,a.N)("RESET_LOCAL_TIMER"),V=(0,a.N)("SET_MUSIC_STANDALONE_VOLUME");(0,v.nF)((e,r)=>{z(e.getState(),r),e.dispatch(V(r))});let G=(0,a.N)("SET_MUSIC_IS_MUTED");(0,v.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(G({isMuted:r,userInitiated:n}))});let H=(0,a.N)("SET_TIMER_AND_MUSIC_ARE_MUTED");(0,v.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(H({isMuted:r,userInitiated:n}))});let W=(0,a.N)("SET_STANDALONE_MUSIC_PLAYER"),K=(0,a.N)("SET_MAIN_MUSIC_PLAYER"),j=(0,a.N)("SET_MUSIC_VOLUME");(0,v.nF)((e,r)=>{z(e.getState(),r),e.dispatch(j(r))});let z=(0,s.s)((e,r)=>(0,y.qV)(e,r),1e3,!1),Y=(0,a.N)("SET_SELECTED_SONG_ID"),$=(0,v.nF)((e,r)=>{let{time:n}=e.getState().timer;if(n&&n.totalTimeMs>0){let i=(0,I.P$)(n);e.dispatch(eo({eventName:"update-timer-song-id",totalTimeMs:n.totalTimeMs,timeRemainingMs:i,isPaused:n.isPaused,songID:r.selectedSongID,lastReceivedSongTimestampMs:r.musicStartTimeMs})),_.d1.timerChange("timerupdatesongid")}e.dispatch(Y(r))}),q=(0,a.N)("GET_ACTIVE_SONGS_SUCCESS"),Z=(0,v.nF)(async e=>{try{let r=await f.N.getSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw o.k.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(q(r.data.meta))}catch(e){throw o.k.warn("Failed to fetch active songs"),e}}),X=(0,a.N)("GET_ALL_SONGS_SUCCESS");(0,v.nF)(async e=>{if(!(0,l.kc)().figjam_more_tracks_listen)throw Error("Fetching all songs disabled");try{let r=await f.N.getAllSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw o.k.warn("Failed to fetch all songs"),Error("Api error while fetching all songs");e.dispatch(X(r.data.meta))}catch(e){throw o.k.warn("Failed to fetch all songs"),e}});let J=(0,a.N)("SET_SHOWING_FILE_FOOTER"),Q=(0,a.N)("SET_SELECTED_TYPED_PROP_DEF_ID"),ee=(0,a.N)("SET_START_CHIME_PLAYED"),et=(0,a.N)("SET_TIMER_NOTIFICATION"),er=(0,a.N)("SET_TIMER_AUDIO_ENABLED"),en=(0,a.N)("SET_TIMER_MODAL"),ei=(0,v.nF)((e,r)=>{if("open"===r.state&&(0,I.FR)()&&(0,T.D)(()=>{let r=(0,I.FR)();e.getState().timer?.modalState==="open"&&r&&e.dispatch(ei({state:"closed",userInitiated:!1}))}),r.userInitiated){let n=e.getState(),i=n.timer.time?.timeRemainingMs>0;(0,u.ds)(`timer-modal-${r.state}`,n.openFile?.key,n,{"multiplayer-users":S(n),"timer-active":i,source:r.source})}e.dispatch(en(r))}),ea=(0,a.N)("SEND_TIMER"),eo=(0,v.nF)((e,r)=>{let n=e.getState(),a=n.timer,o=a.setBy;if("start-timer"===r.eventName){let e=n.multiplayer.allUsers.find(e=>e.sessionID===n.multiplayer.sessionID);o=e?e.name:l.Ay().user_data?.handle||"anonymous user"}if(i.h3O.sendTimer(r.totalTimeMs||0,r.timeRemainingMs||0,!!r.isPaused,(a?.time?.timerID||0)+1,o,r.songID||"",r.lastReceivedSongTimestampMs||0),r.eventName){let e={"multiplayer-users":S(n)};if("adjust-timer"===r.eventName){let i=Math.round((r.totalTimeMs-n.timer.time.totalTimeMs)/1e3);e["time-added-s"]=i}else"start-timer"===r.eventName&&(e["duration-s"]=Math.round(r.totalTimeMs/1e3));(0,u.ds)(r.eventName,n.openFile?.key,n,e,{forwardToDatadog:!0})}e.dispatch(ea(r))}),es=(0,a.N)("SET_TIMER"),el=(0,v.nF)((e,r)=>{if(0===r.totalTimeMs){let r=e.getState(),n=(0,p.d1)(r);if(n){let e=(0,m.L8)(n,r.repos);!function(e,r,n){if(!e)return;let i=new E.a().selectedViewNameHelper(e,r,void 0);(0,h.hL)(i,(0,g.wN)(e.editor_type))}(n,e)}}e.dispatch(es(r))}),ec=(0,a.N)("START_TIMER"),ed=(0,v.nF)(async(e,{totalTimeMs:r,musicStartTimeMs:n=0})=>{let i=e.getState().timer.selectedSongID;i&&(i=await A(i,e)),e.dispatch(eo({eventName:"start-timer",totalTimeMs:r,timeRemainingMs:r,isPaused:!1,songID:i,lastReceivedSongTimestampMs:n})),_.d1.timerChange("timerstart"),e.dispatch(ec({totalTimeMs:r,musicStartTimeMs:n}))}),eu=(0,v.nF)((e,r)=>{let n=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"adjust-timer",totalTimeMs:r.timer.totalTimeMs+r.deltaMs,timeRemainingMs:(0,I.P$)(r.timer)+r.deltaMs,isPaused:r.timer.isPaused,songID:n,lastReceivedSongTimestampMs:r.timer.lastReceivedSongTimestampMs})),_.d1.timerChange("timeradjust")}),ep=(0,v.nF)((e,r)=>{let n=(0,I.P$)(r),i=w(r),a=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"pause-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:n,isPaused:!0,songID:a,lastReceivedSongTimestampMs:i})),_.d1.timerChange("timerpause")}),em=(0,v.nF)(e=>{let r=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),_.d1.timerChange("timerstop")}),eh=(0,a.N)("RESUME_TIMER"),e_=(0,v.nF)(async(e,r)=>{let n=e.getState().timer.selectedSongID;n&&(n=await A(n,e)),e.dispatch(eo({eventName:"resume-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:r.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:r.lastReceivedSongTimestampMs})),_.d1.timerChange("timerresume"),e.dispatch(eh(r))})},54552:(e,r,n)=>{"use strict";n.d(r,{DN:()=>R,EX:()=>C,Fb:()=>F,Mv:()=>O,N9:()=>w,U6:()=>T,X7:()=>P,dy:()=>A,gG:()=>M,iN:()=>D,jv:()=>N,lF:()=>I,ox:()=>L,pS:()=>S,qP:()=>k,to:()=>v});var i=n(634832),a=n(167249),o=n(722138),s=n(853828),l=n(286098),c=n(547807),d=n(27087),u=n(881388),p=n(939863),m=n(392592),h=n(980820),_=n(857766),g=n(723245),f=n(477782),E=n(99506),y=n(225868),b=n(404717);let I=(0,a.N)("SET_FAVORITES_COUNT"),T=(0,a.N)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),v=(0,a.N)("SET_MOVING_RESOURCE"),S=(0,a.N)("SET_NEW_SECTION_INDEX");(0,h.nF)((e,r)=>{let{name:n,orderedFavoriteIds:i}=r,a=d.Ay.put(`/api/user_sidebar_sections/${r.sectionId}`,{ordered_favorited_resource_ids:i,name:n}).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.data.message}`}))});(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{...n?{name:n}:{},...i?{orderedFavoritedResourceIds:i}:{}}}},a),r.name&&(0,o.K2)(r.sectionId,r.name)}),(0,h.nF)((e,r)=>{let n=d.Ay.del(`/api/user_sidebar_sections/${r.sidebarSectionId}`).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.msg}`}))});(0,o.Pe)(r.sidebarSectionId),(0,s.WB)().optimisticallyDelete({UserSidebarSection:{[r.sidebarSectionId]:null}},n)}),(0,h.nF)((e,r)=>{let n={favorited_resource_ids:r.favoriteIds,team_id:r.teamId};(0,o.Dr)(r.favoriteIds,r.teamId),d.Ay.put("/api/planless_favorited_resource_plan_id",n).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.data.message}`}))})}),(0,h.nF)((e,r)=>{let n={section_id:r.sectionId,ordered_favorite_ids:r.orderedFavoriteIds},i=d.Ay.put(`/api/favorited_resources/${r.favoriteId}`,n).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.data.message}`}))});r.sectionId&&(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:r.orderedFavoriteIds}}},i);let a={[r.favoriteId]:{sidebarSectionId:r.sectionId}};switch(r.resourceType){case E.bk.TEAM:(0,s.WB)().optimisticallyUpdate({FavoritedTeam:a},i);break;case E.bk.FOLDER:(0,s.WB)().optimisticallyUpdate({FavoritedProject:a},i);break;case E.bk.FILE:(0,s.WB)().optimisticallyUpdate({FavoritedFile:a},i);break;case E.bk.PROTOTYPE:(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:a},i);break;case E.bk.WORKSPACE:(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:a},i)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,i={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},a=d.Ay.post("/api/user_sidebar_sections",i).then(n=>{if(!n?.data.meta){e.dispatch(v({movingResource:void 0}));return}U(e.dispatch,r.newResourceForSection.resourceType,r.newResourceForSection.isFavorited,r.newResourceForSection.resourceId,void 0,n.data.meta),e.dispatch(v({movingResource:void 0}))}).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.msg}`}))});if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[V]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},a),r.prefs&&r.currentOrderedSections){let i=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),V,...r.currentOrderedSections.slice(r.insertAtIndex,i)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,y.ah)(s,e.getState().user?.id,n,null,a)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,i={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},a=d.Ay.post("/api/user_sidebar_sections",i).then(e=>{(0,o.SX)(e?.data.meta,r.name)}).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.msg}`}))}),l="optimistic-id-custom-section-id";if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[l]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},a),r.prefs&&r.currentOrderedSections){let i=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),l,...r.currentOrderedSections.slice(r.insertAtIndex,i)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,y.ah)(s,e.getState().user?.id,n,null,a)}});let w=(0,h.MM)("BULK_RESOURCE_SET_FAVORITE",(e,r,{optimistId:n,liveStore:i})=>{let{files:a,repos:c,prototypes:p,orgId:h,teamId:_,selectedView:g,entrypoint:f}=r,I=e.getState().currentTeamId,T=e.getState().currentUserOrgId,v=I??T,S=a.filter(e=>!e.is_favorited&&(e.team_id===v||e.parent_org_id===v)),w=S.map(e=>e.key),A=c.filter(e=>!e.is_favorited&&(e.team_id===v||e.parent_org_id===v)).filter(Boolean),N=A.map(e=>e.default_file_key),C=p.filter(e=>!e.is_favorited&&(e.parent_team?.id===v||e.parent_org?.id===v)),O=C.map(e=>e.file_key+","+e.page_id),L={files:N.concat(w),org_id:h,team_id:_,prototypes:O,insert_at_index:r.insertAtIndex,ordered_favorites:r.orderedFavorites,section_id:r.sectionId};a.forEach(e=>{(0,o.gB)(e.key,g,f,E.bk.FILE,e.editor_type,!0)}),c.forEach(e=>{(0,o.gB)(e.default_file_key??void 0,g,f,E.bk.FILE,"design",!0)}),p.forEach(e=>{(0,o.gB)(e.file_key,g,f,E.bk.PROTOTYPE,"design",!0)});let R=d.Ay.put("/api/bulk_favorite_resources",L).then(()=>{e.dispatch(b.c(n))}).catch(r=>{e.dispatch(b.r(n));try{e.dispatch(m.F.enqueue({message:r.message}))}catch(r){e.dispatch(u.s.error("An error occurred while favoriting these items"))}}),P=e.getState().user?.id;if(!P)return;let D={},k={},M=[];if(C.forEach(e=>{M.push(`optimistic-id-${e.fig_file.key}`),k[`optimistic-id-${e.fig_file.key}`]=(0,l.XJ)(e,P,h,r.sectionId)}),A.forEach(e=>{let n=e.default_file_key;if(n){let e=i.readCachedFile(n);e&&(M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId))}}),S.forEach(e=>{M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId)}),(0,s.WB)().optimisticallyCreate({FavoritedFile:D,FavoritedPrototype:k},R),null===r.insertAtIndex)return;let F=[...r.orderedFavorites.slice(0,r.insertAtIndex),...M,...r.orderedFavorites.slice(r.insertAtIndex)];if(r.sectionId)(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:F}}},R);else{let e={id:r.fileBrowserPrefs?.id||"optimistic-id",orderedFavoritedResourceIds:F,orderedTeamIds:r.fileBrowserPrefs?.orderedTeamIds,orderedLicenseGroupIds:r.fileBrowserPrefs?.orderedLicenseGroupIds};(0,y.ah)(e,P,h,null,R)}}),A=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:a,entrypoint:o,favoriteId:s,fileBrowserEntryPoint:l}=r;switch(a.type){case f.nb.FILE:e.dispatch(k({entrypoint:o,favoriteId:s,file:a.file,fileBrowserEntryPoint:l}));return;case f.nb.PINNED_FILE:let c=await n.fetchFile(a.file.key);e.dispatch(k({entrypoint:o,favoriteId:s,file:c,fileBrowserEntryPoint:l}));return;case f.nb.PROTOTYPE:e.dispatch(P({entrypoint:o,favoriteId:s,prototype:a.prototype,fileBrowserEntryPoint:l}));return;case f.nb.REPO:e.dispatch(k({entrypoint:o,favoriteId:s,file:(0,_.mr)(a.repo,a.branches,{}),repoId:a.repo.id,fileBrowserEntryPoint:l}));return;case f.nb.OFFLINE_FILE:return;default:(0,i.assertNever)(a)}}),N=(0,h.MM)("REMOVE_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:i,sectionId:a}=r;(0,o.to)(i.id,e.getState().selectedView.view,r.entrypoint,E.bk.FOLDER);let l=U(e.dispatch,E.bk.FOLDER,!1,i.id,n,a);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedProject:{[r.favoriteId]:null}},l)}),C=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:a,entrypoint:o,favoriteId:s,sectionId:l,fileBrowserEntryPoint:c}=r;switch(a.type){case f.nb.FILE:e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:a.file,fileBrowserEntryPoint:c}));return;case f.nb.PINNED_FILE:let d=await n.fetchFile(a.file.key);e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:d,fileBrowserEntryPoint:c}));return;case f.nb.PROTOTYPE:e.dispatch(D({entrypoint:o,favoriteId:s,sectionId:l,prototype:a.prototype,fileBrowserEntryPoint:c}));return;case f.nb.REPO:e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:(0,_.mr)(a.repo,a.branches,e.getState().selectedBranchKeyByRepoId),repoId:a.repo.id,fileBrowserEntryPoint:c}));return;case f.nb.OFFLINE_FILE:return;default:(0,i.assertNever)(a)}}),O=(0,h.MM)("ADD_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:i,sectionId:a}=r;(0,o.gB)(i.id,e.getState().selectedView.view,r.entrypoint,E.bk.FOLDER);let c=U(e.dispatch,E.bk.FOLDER,!0,i.id,n,a),d=e.getState().user?.id,u=e.getState().currentUserOrgId;d&&(r.favoriteId&&r.sectionId&&(0,s.WB)().optimisticallyUpdate({FavoritedProject:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c),"is_favorited"in i&&(r.favoriteId||(0,s.WB)().optimisticallyCreate({FavoritedProject:{[`optimistic-id-${i.id}`]:(0,l.ad)(i,d,u,a)}},c)))});(0,h.nF)((e,r)=>{let{workspace:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.WORKSPACE);let i=U(e.dispatch,E.bk.WORKSPACE,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedWorkspace:{[r.favoriteId]:null}},i)}),(0,h.nF)((e,r)=>{let{workspace:n,sectionId:i}=r,a=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.WORKSPACE);let c=U(e.dispatch,E.bk.WORKSPACE,!0,n.id,void 0,i),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedWorkspace:{[`optimistic-id-${n.id}`]:(0,l.Nc)(n,d,a,i)}},c))});let L=(0,h.nF)((e,r)=>{let{team:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.TEAM);let i=U(e.dispatch,E.bk.TEAM,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedTeam:{[r.favoriteId]:null}},i)}),R=(0,h.nF)((e,r)=>{let{team:n,sectionId:i}=r,a=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.TEAM);let c=U(e.dispatch,E.bk.TEAM,!0,n.id,void 0,i),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedTeam:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${n.id}`]:(0,l.zb)(n,d,a,i)}},c))}),P=(0,h.MM)("REMOVE_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:i,entrypoint:a,fileBrowserEntryPoint:l}=r;(0,o.to)(i.file_key,e.getState().selectedView.view,a,E.bk.PROTOTYPE,void 0,l);let c=U(e.dispatch,E.bk.PROTOTYPE,!1,i.file_key,n,void 0,i.page_id);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedPrototype:{[r.favoriteId]:null}},c)}),D=(0,h.MM)("ADD_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:i,entrypoint:a,sectionId:c,fileBrowserEntryPoint:d}=r,u=e.getState().currentUserOrgId;(0,o.gB)(i.file_key,e.getState().selectedView.view,a,E.bk.PROTOTYPE,"prototype",d);let p=U(e.dispatch,E.bk.PROTOTYPE,!0,i.fig_file.key,n,c,i.page_id),m=e.getState().user?.id;m&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},p):(0,s.WB)().optimisticallyCreate({FavoritedPrototype:{[`optimistic-id-${i.fig_file.key}`]:(0,l.XJ)(i,m,u,c)}},p))}),k=(0,h.MM)("REMOVE_FILE_FAVORITE",(e,r,{optimistId:n})=>{let i=e.getState().selectedView.view,{file:a,entrypoint:l,fileBrowserEntryPoint:c}=r;(0,o.to)(a.key,i,l,E.bk.FILE,a.editor_type??"design",c);let d="fullscreen"===i?x(e.dispatch,E.bk.FILE,!1,a.key,(0,g.D6)(e.getState().currentUserOrgId)):U(e.dispatch,E.bk.FILE,!1,a.key,n);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedFile:{[r.favoriteId]:null}},d)}),M=(0,a.N)("ADD_FILE_FAVORITE"),F=(0,h.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(M(r)),{file:i,entrypoint:a,sectionId:c,fileBrowserEntryPoint:d}=r;(0,o.gB)(i.key,e.getState().selectedView.view,a,E.bk.FILE,i.editor_type??"design",d);let u=U(e.dispatch,E.bk.FILE,!0,i.key,n,c,void 0,(0,g.D6)(e.getState().currentUserOrgId)),p=e.getState().user?.id;if(p){if(r.favoriteId&&r.sectionId)(0,s.WB)().optimisticallyUpdate({FavoritedFile:{[r.favoriteId]:{sidebarSectionId:r.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:E.bk.FILE,userId:p}}},u);else if(e.getState().currentTeamId&&e.getState().currentTeamId===r.file.team_id||e.getState().currentUserOrgId&&r.file.parent_org_id){let n=(0,l.h7)(i);(0,s.WB)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${i.key}`]:{userId:p,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:r.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:i.key,resourceType:E.bk.FILE,readableFile:n}}},u)}}}),x=(e,r,n,i,a)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,file_key:i}).then(()=>{let r=a?(0,p.t)("tile.favoriting.file_removed_from_sidebar"):(0,p.t)("tile.favoriting.file_removed_from_favorites"),i=a?(0,p.t)("tile.favoriting.file_added_to_sidebar"):(0,p.t)("tile.favoriting.file_added_to_favorites");e(m.F.enqueue({message:n?i:r}))}).catch(r=>{let n=(0,p.Jv)(r);if(n)try{e(m.F.enqueue({message:n}))}catch(r){e(u.s.error("An error occurred while favoriting this item"))}}),U=(e,r,n,i,a,o,s,l)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,resource_id_or_key:i,page_id:s,section_id:o}).then(()=>{if(a&&e(b.c(a)),l||r!==E.bk.FILE){let r=n?(0,p.t)("sidebar.item_added_bell_message"):(0,p.t)("sidebar.item_removed_bell_message");e(m.F.enqueue({message:r}))}}).catch(r=>{let i=(0,p.Jv)(r);if(i){a&&e(b.r(a));try{e(m.F.enqueue({message:i}))}catch(i){let r=n?"favoriting this item":"removing this favorite";e(u.s.error(`An error occurred while ${r}`))}}}),B=e=>((0,o.j4)(e.favorited_resource_ids),d.Ay.del("/api/favorited_resources",c.td.toAPIParameters(e)));(0,h.nF)((e,r)=>{B({favorited_resource_ids:r.favoriteIds}).catch(r=>{e.dispatch(m.F.enqueue({message:`${r.data.message}`}))})});let V="optimistic-id-custom-section-id"},738274:(e,r,n)=>{"use strict";n.d(r,{EG:()=>l,Ji:()=>a,lr:()=>o,qC:()=>s});var i=n(167249);let a=(0,i.N)("FIGJAM_SET_IS_MAKE_SOMETHING_V2_ACTIVE"),o=(0,i.N)("FIGJAM_SET_DELIGHTFUL_TOOLBAR_OVERFLOW_MENU"),s=(0,i.N)("FIGJAM_SET_IMAGE_DIALOG"),l=(0,i.N)("FIGJAM_SET_QUICK_ACCESS_TOOL")},753643:(e,r,n)=>{"use strict";n.d(r,{fC:()=>m,o2:()=>u,s7:()=>p});var i=n(167249),a=n(980820),o=n(410424),s=n(941381),l=n(182976),c=n(336599),d=n(288813);let u=(0,i.N)("UPDATE_FACE_STAMPS"),p=(0,i.N)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS");(0,a.nF)(e=>{let r=e.getState().selectedView;r&&"fullscreen"===r.view&&h(e)});let m="FETCH_FIGJAM_DEFAULT_INSERTS";async function h(e){let r=e.getState();if((0,c.Sc)(r.loadingState,m)){e.dispatch(l.Cx({key:m}));try{let n=await d.d.getDefaultInserts({orgId:r.currentUserOrgId||void 0}),i=[...n.data.meta.plugins,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&!e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],a=[...n.data.meta.widgets,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],c=[...n.data.meta.templates,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"viewer_mode"in e&&e.viewer_mode&&r.push(e);return r}(n.data.meta.use_cases)];e.dispatch((0,o.Sb)({hubFiles:c,src:"figjam-inserts"})),e.dispatch(p(n.data.meta)),e.dispatch(s.Vx(i)),e.dispatch(s.uV(a));let u={},h={};a.forEach(e=>{let n=e.current_plugin_version_id;!(n&&r.publishedCanvasWidgetVersions[e.id]?.[n])&&(u[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(h[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,s.fs)(h)),e.dispatch((0,s.b6)({widgetIDToVersions:u})),e.dispatch(l.x2({key:m}))}catch(r){e.dispatch(l.of({key:m}))}}}},944682:(e,r,n)=>{"use strict";n.d(r,{$m:()=>z,FE:()=>U,GZ:()=>j,Ip:()=>Y,Lk:()=>ed,Nw:()=>et,P6:()=>Z,PB:()=>ea,PF:()=>J,Rh:()=>K,S:()=>ee,U2:()=>en,VK:()=>X,YF:()=>$,YK:()=>q,YW:()=>G,Yn:()=>Q,Yp:()=>er,ZN:()=>H,bE:()=>ei,c3:()=>ec,jO:()=>x,og:()=>B,rA:()=>W,sF:()=>V,uo:()=>eo,yJ:()=>es});var i=n(723069),a=n(587670),o=n(167249),s=n(297666),l=n(517333),c=n(686759),d=n(737947),u=n(966712),p=n(853828),m=n(130097),h=n(711525),_=n(179940),g=n(776621),f=n(27087),E=n(881388),y=n(939863),b=n(392592),I=n(980820),T=n(662275),v=n(988022),S=n(857766),w=n(132135),A=n(892542),N=n(279453),C=n(623746),O=n(216158),L=n(401352),R=n(694517),P=n(754168),D=n(558356),k=n(479296),M=n(938908),F=n(31913);function x(e){return void 0!==e.file_repo}function U(e,r){return f.Ay.put(`/api/files/${e}/thumbnail_guid`,{thumbnail_guid:r}).then(()=>{a.Ez5.canvasViewState().thumbnailNodeId.set(r)})}let B=(0,I.nF)((e,r)=>{r.file.created_at&&console.error("It looks like you are PUT-ting to the API with the entire file object; please only pass the key and file permission attributes");let n=P.S.putFile(r).then(()=>{r.onSuccess?.()}).catch(n=>{if(r.onError?.(),e.dispatch(b.F.enqueue({message:(0,y.t)("file_permissions.generic_error"),error:!0})),(0,u.b5)())throw n}),i=r.file,a={...(0,C.Ns)(i,i.key),...(0,C.yT)(i,r.linkExpirationConfigId,r.currentUser)},o=(0,C.TP)(i,r.linkExpirationConfigId,r.currentUser);Object.keys(a).length>0&&(0,p.WB)().optimisticallyUpdate(a,n),o&&(0,p.WB)().optimisticallyCreate(o,n)}),V=(0,o.N)("FILE_PERMISSIONS_PUT"),G=(0,I.nF)(async(e,r)=>{let n=e.getState(),a={},o=r.file,s=o.folderId,c=!1;if(s){let e="design"===o.editorType?N.RmP:N.JkW;c=!!h.oA((await m.Ek(e,{id:s})).project)?.hasPermission}c&&(a.folder_id=s),r.versionId&&(a.version_id=r.versionId),e.dispatch(b.F.enqueue({type:"file_duplicating",message:(0,y.t)("visual_bell.duplicating")})),f.Ay.post(`/api/multiplayer/${o.key}/copy?${(0,_.lF)(a)}`).then(a=>{e.dispatch(b.F.dequeue({}));let s=!!n.openFile;if(!a.data.error&&a.data.meta&&s){let s=a.data.meta;if((0,v.ds)("File Duplicated",o.key,e.getState(),{duplicatedFileKey:s.key,duplicatedContainingFolderId:s.folder_id,duplicatedFileTeamId:s.team_id}),r.checkOssSalesExperiment&&(0,L.Lb)(s.key),l.eD){l.eD.openFile({fileKey:s.key,title:s.name,fileEditorType:s.editor_type,target:i.a.FOCAL_TAB,isBranch:(0,S.Xm)(s),isLibrary:!!s.last_published_at,isTeamTemplate:!1,userId:n.user?.id});return}d.Ay.redirect((0,w.to)(s),"_blank")}}).catch(()=>{e.dispatch(b.F.dequeue({})),e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.file_copy_error")))})}),H=(0,I.nF)((e,r)=>{let n=r.file_key;n&&(e.getState().fileByKey[n]||P.S.getFiles({fileKey:n}).then(r=>e.dispatch(es({file:r.data.meta}))))}),W=(0,I.nF)(async(e,r)=>{try{await f.Ay.del(`/api/files/${r.file_key}/workshop`)}catch(e){}}),K=(0,I.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey),a=f.Ay.post(`/api/files/${r.fileKey}/workshop`).then(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_started_notification"),button:{text:(0,y.t)("whiteboard.open_sessions.open_session_started_notification_copy_link"),action:()=>{e.dispatch(ee({fileKey:r.fileKey,url:(0,w.to)(i),source:A.d.WORKSHOP_VISUAL_BELL}))}}}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_start_failed_notification"),error:!0}))}),o=e.getState().user?.id;if(o){let e=new Date;e.setDate(e.getDate()+1),(0,p.WB)().optimisticallyCreate({FigFileWorkshopMode:{[`optimistic-${r.fileKey}`]:{fileKey:r.fileKey,expiresAt:e,userId:o}}},a)}}),j=(0,I.nF)(async(e,r)=>{await f.Ay.post(`/api/files/${r.fileKey}/view`).then(({data:n})=>{let{last_view_at:i,last_edit_at:a}=n.meta;e.dispatch(F.FB({lastViewed:i,lastEdited:a})),e.dispatch((0,R.Ul)({openFileKey:r.fileKey,versionHistory:e.getState().versionHistory}))}).catch(e=>{(0,g.x1)("recent files","Error marking file view / retrieving last seen times",{error:e})})}),z=(0,I.nF)((e,r)=>{U(r.file_key,r.thumbnail_guid).then(()=>{let n=r.thumbnail_guid?(0,y.t)("file_browser.file_browser_actions.thumbnail_set"):(0,y.t)("file_browser.file_browser_actions.default_thumbnail_restored");e.dispatch(b.F.enqueue({message:n}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("file_browser.error_try_again"),error:!0}))})}),Y=O.M4.Mutation((e,{objects:r})=>{e.forEach(e=>{r.File.update(e,e=>{e.trashed_at=null})})}),$=(0,o.N)("RESTORE_TRASHED_FILES"),q=(0,o.N)("DELETE_FILES_PERMANENTLY"),Z=(0,o.N)("DELETE_FILES"),X=(0,I.nF)((e,r)=>{e.dispatch(Z(r)),e.dispatch((0,M.sM)({fileKeys:Object.keys(r.fileKeys)}))}),J=(0,o.N)("FILE_RESTORE"),Q=(0,I.nF)((e,r)=>{(0,c.Dk)(r.embedCode).then(()=>{(0,v.ds)("Embed Code Copied",r.fileKey,e.getState()),e.dispatch(b.F.enqueue({type:"embeded_code_copied_to_clipboard",message:(0,y.t)("file_browser.file_browser_actions.embed_code_copied")}))}).catch(()=>{e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.embed_code_copy_error")))})}),ee=(0,k.n)((0,I.nF)((e,r)=>{let n;let i=r.url,a=r.label;if(a){let e=document.createElement("a");e.href=i,e.innerText=a;let r=e.outerHTML;n=(0,c.wY)(r,i)}else n=(0,c.Dk)(i);n.then(()=>{(0,v.ds)("File Share Link Copied",r.fileKey,e.getState(),{copyLinkSource:A.d[r.source],...r.trackingProperties}),r.skipVisualBell||e.dispatch(b.F.enqueue({type:"link_copied_to_clipboard",message:r.visualBellMessageOverride??(0,y.t)("copy_to_clipboard.link_copied_to_clipboard"),button:r.visualBellButton}))}).catch(()=>{e.dispatch(T.to({type:D.o,data:{link:i}}))})})),et=(0,I.nF)((e,r)=>{if(r.name.length<=100){let n={key:r.file.key,name:r.name,updated_at:new Date().toISOString()};e.dispatch(es({file:n,userInitiated:!0})),(0,v.ds)("File Renamed",n.key,e.getState(),{fileName:n.name})}}),er=(0,o.N)("FILE_REMOVE_FROM_PROJECT"),en=(0,o.N)("FILE_MOVE"),ei=(0,o.N)("FILE_POST"),ea=(0,o.N)("FILE_BATCH_SUBSCRIBE_TO_REALTIME"),eo=(0,o.N)("FILE_BATCH_PUT"),es=(0,o.N)("FILE_PUT"),el=(0,s.s)((e,r)=>{let n=r.getState();n.activeFileUsers&&(e=e.filter(e=>!(e in n.activeFileUsers))),e.length&&f.Ay.post("/api/active_file_users",{keys:e}).then(({data:e})=>{!function(e,r,n=!1){let i=r.getState();for(let a in e){if(n&&i.activeFileUsers&&a in i.activeFileUsers)continue;let o=e[a],s=[];if(o)for(let e in o){let r=JSON.parse(o[e]);s.push(r)}r.dispatch(ed({fileKey:a,users:s}))}}(e.meta.active_file_users,r,!0)}).catch(e=>{})},1e3);(0,I.nF)((e,r)=>{el(r.fileKeys,e)});let ec=(0,o.N)("FILE_CLEAR_ACTIVE_USERS"),ed=(0,o.N)("FILE_SET_ACTIVE_USERS")},225868:(e,r,n)=>{"use strict";n.d(r,{ah:()=>l});var i=n(966712),a=n(853828),o=n(27087),s=n(980820);function l(e,r,n,i,o){e.id&&"optimistic-id"!==e.id?a.WB()?.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:n,teamId:i,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},o):null!=r&&a.WB()?.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:r,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:n,teamId:i,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},o)}(0,s.nF)((e,r)=>{let n=e.getState().user?.id,a=e.getState().currentUserOrgId,s=(0,i.kc)().ps_benchmark?e.getState().currentTeamId:null,c=o.Ay.put("/api/file_browser_preferences",{ordered_team_ids:r.prefs.orderedTeamIds,ordered_favorites:r.prefs.orderedFavoritedResourceIds,org_id:a,team_id:s,ordered_license_group_ids:r.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:r.prefs.orderedSidebarSections});l(r.prefs,n,a,s,c)}),(0,s.nF)((e,r)=>{let n=e.getState().user?.id,i=e.getState().currentTeamId,a=r.teamUser,s=r.prefs.orderedFavoritedResourceIds,c=[];if(s)for(var d of s)(a.favoritedFiles?.some(e=>e.id===d)||a.favoritedPrototypes?.some(e=>e.id===d))&&c.push(d);let u=a.favoritedProjects?.filter(e=>r.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id)??[];c.push(...u);let p=o.Ay.put("/api/file_browser_preferences",{ordered_favorites:c,team_id:i});l({id:"optimistic-id",orderedFavoritedResourceIds:c},n,null,i,p)})},507877:(e,r,n)=>{"use strict";n.d(r,{Dw:()=>X,Ef:()=>$,Fs:()=>q,UN:()=>Y,V3:()=>K,_l:()=>G,dm:()=>z,gN:()=>j,gR:()=>W,hm:()=>B,kg:()=>Z,mT:()=>H,q0:()=>V,qj:()=>U});var i=n(776250),a=n(511617),o=n(517333),s=n(737947),l=n(966712),c=n(187623),d=n(218881),u=n(27087),p=n(939863),m=n(392592),h=n(787133),_=n(349410),g=n(988022),f=n(697551),E=n(369870),y=n(441088),b=n(216158),I=n(320741),T=n(707465),v=n(935757),S=n(349719),w=n(696915),A=n(451e3),N=n(622139),C=n(644344),O=n(637590),L=n(540351),R=n(52571),P=n(241136),D=n(159518),k=n(757406),M=n(980820),F=n(738269),x=n(662275);let U=(0,M.nF)((e,r)=>{e.getState().modalShown?.type!=null&&e.dispatch((0,x.Ce)()),e.getState().dropdownShown?.type!=null&&e.dispatch((0,F.oB)()),e.dispatch((0,F.DE)({show:!0})),r?.until.then(()=>{e.dispatch(F.DE({show:!1}))}),h.q.addDependency("FILE_BROWSER_SET_LOADING",r?.until||"pending")}),B=(0,M.nF)(e=>{R.H.getState().then(r=>{e.dispatch((0,F.os)(r.data.meta)),e.dispatch(V(r.data.meta))}).catch(r=>{let n=r.data?.message||(0,p.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(m.F.enqueue({error:!0,message:n}))})}),V=(0,M.nF)((e,r)=>{new c.P().sendToOtherTabs(L.y,r)}),G=(0,M.nF)((e,r)=>{let n=e.getState(),i=r.view||{view:"recentFiles"},l=(0,T.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},i),c=!(0,f.d9)(n.selectedView)&&(0,f.d9)(i);if(o.eD&&c){o.eD.openCommunity(l,r.workspace.userId);return}function d(){let e=(0,f.d9)(n.selectedView)&&!(0,f.d9)(i);o.eD&&e&&s.Ay.redirect((0,a.dR)((0,T.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},n.selectedView),{fuid:r.workspace.userId}))}if(e.dispatch(U()),r.path){(0,g.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,teamId:n.currentTeamId,newTeamId:r.workspace.teamId,view:n.selectedView.view,newPath:r.path}),s.Ay.redirect((0,a.dR)(r.path,{fuid:r.workspace.userId})),d();return}(0,g.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,view:n.selectedView.view,newView:i.view,newTeamId:r.workspace.teamId,teamId:n.currentTeamId}),(r.workspace.orgId&&!l.includes(r.workspace.orgId)||r.workspace.teamId&&!l.includes(r.workspace.teamId)||(0,f.d9)(i)&&!r.workspace.orgId&&n.currentUserOrgId)&&(0,v.Y9)(r.workspace.userId,(0,f.d9)(i),r.workspace.orgId,void 0,r.workspace.teamId),(0,E.ck)()?k.m({action:"reloadPage",payload:{fuid:r.workspace.userId}}):(s.Ay.redirect((0,a.dR)(l,{fuid:r.workspace.userId})),d())});(0,M.nF)(e=>{u.Ay.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:r})=>{let n=r.meta.id,i=`/app_auth/${n}/grant`,a=e.getState().authedUsers.orderedIds;a.length>0&&(i+=`?authed_ids=${a.join(",")}`),o.eD?.startAppAuth(i),e.dispatch(m.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(r=>{console.error(r),e.dispatch(m.F.enqueue({message:(0,p.t)("file_browser.error_try_again"),error:!0}))})});let H=(0,M.nF)((e,r)=>{e.getState().dropdownShown||e.dispatch((0,F.j7)(r))}),W=(0,M.nF)((e,r)=>{let n=e.getState().dropdownShown;n?.type===r.type?e.dispatch((0,F.oB)()):e.dispatch((0,F.j7)(r))}),K=(0,M.nF)((e,r)=>{(0,y.T)()?(0,S.Qn)(r.url):s.Ay.redirect(r.url,"_blank")});function j(e,r={}){return(0,F.$T)({view:"folder",folderId:e,...r})}function z(e,r={},n){return(0,F.$T)({view:"team",teamId:e,...r,teamViewTab:n})}(0,M.nF)((e,{index:r})=>{(0,i.sx)("Recent File Clicked",{index:r},{forwardToDatadog:!0})});let Y=(0,M.nF)((e,{fileKey:r,entrypoint:n,currentPlanFilter:i,currentSharedByFilter:a,viewMode:o})=>{(0,g.k1)(r,{state:e.getState(),entrypoint:n,planFilterId:i?.planId,planFilterType:i?.planType,sharedByFilter:a,viewMode:o})}),$=(0,M.nF)(e=>{(0,g.uE)("Font Installer Downloaded",e.getState())}),q=(0,M.nF)(e=>{(0,g.uE)("Font Uninstaller Downloaded",e.getState())}),Z=(0,M.nF)((e,{clickedResourceType:r,resourceIdOrKey:n})=>{(0,g.uE)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:r,resourceIdOrKey:n})});b.M4.Query({fetch:async e=>(await P.p.getTrashedFilesV2(e)).data.meta,schema:e=>e.object({files:e.array(w.L.nullable()),repos:e.array(e.object({repo:C.z.nullable(),main_file:w.L.nullable()}))}),output:({data:e})=>({files:e.files.filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1),repos:e.repos.filter(e=>!!e.repo&&!!e.repo.trashed_at&&!e.repo.deleted_at).sort((e,r)=>new Date(e.repo.trashed_at)<new Date(r.repo.trashed_at)?1:-1)})}),b.M4.Query({fetch:async e=>(await D.V.getTrashedFolders(e)).data.meta,schema:e=>e.object({folders:e.array(A.lH.extend({touched_at:e.string()}))}),output:({data:e})=>({folders:e.folders.map(e=>({...e,touched_at:""})).filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1)})}),(0,M.nF)((e,{orgId:r,teamId:n},{loadingKey:i})=>{let a=P.p.getTrashedFilesV2({orgId:r||"",teamId:n||""});(0,I.N)(a,e,i),a.then(r=>{let n=JSON.parse(r.response);e.dispatch((0,F.pB)({deletedFiles:n.meta.files})),e.dispatch((0,F.pg)({deletedRepos:n.meta.repos}))})});let X=(0,M.nF)(async(e,{previousView:r,openInNewTab:n,onSubmitReturnToPrevView:i,isEduTeam:a,ignoreCurrentPlan:o})=>{let s=e.getState();if(n){let r=(0,T.xS)(s,{view:"teamCreation",ignoreCurrentPlan:o});e.dispatch(K({url:r}));return}if(s.user&&(0,l.kc)().close_starter_team_loophole){let n=(0,d.hW)("starter_team_loophole_experiment_m0"),i=(0,d.hW)("starter_team_loophole_experiment_m1"),[l,c]=await Promise.all([n,i]);if((0,_.e5)({userId:s.user.id,teams:Object.values(s.teams),rolesByTeamId:s.roles.byTeamId,getM0Config:()=>l,getM1Config:()=>c})){e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:O.SC.CREATE_AND_UPGRADE,teamId:null,paymentStep:N.tn.PLAN_COMPARISON,previousView:r,isEduTeam:a,ignoreCurrentPlan:o}));return}}s.user&&(0,_.Mk)(s.user.id,Object.values(s.teams),s.roles.byTeamId)?e.dispatch((0,F.$T)({view:"teamUpgrade",teamFlowType:O.SC.CREATE,teamId:null,paymentStep:N.tn.CREATE_TEAM,previousView:r,isEduTeam:a,ignoreCurrentPlan:o})):e.dispatch((0,F.$T)({view:"teamCreation",previousView:r,onSubmitReturnToPrevView:i,isEduTeam:a,ignoreCurrentPlan:o}))})},270056:(e,r,n)=>{"use strict";n.d(r,{$l:()=>F,$o:()=>w,HA:()=>C,IU:()=>L,Kc:()=>k,MR:()=>N,Q2:()=>v,TI:()=>U,WC:()=>B,ZJ:()=>P,bE:()=>x,gO:()=>A,ub:()=>T,vt:()=>R,y2:()=>D,yH:()=>O,yJ:()=>M,z6:()=>S});var i=n(167249),a=n(966712),o=n(853828),s=n(790724),l=n(27087),c=n(881388),d=n(939863),u=n(392592),p=n(738269),m=n(662275),h=n(988022),_=n(875847),g=n(99506),f=n(426197),E=n(668860),y=n(344950),b=n(980820),I=n(936500);let T=(0,b.nF)((e,r)=>l.Ay.put(`/api/folders/${r.folderId}/description`,{description:r.description}).then(({data:r})=>{e.dispatch(M({folder:r.meta}))}).catch(r=>{console.error(r),e.dispatch(c.s.error((0,d.t)("file_browser.file_browser_actions.update_subscription_error")))})),v=(0,i.N)("FOLDER_UNPIN_FILE"),S=(0,b.nF)((e,r)=>{let n=e.optimisticDispatch(v(r));return l.Ay.del(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit()}).catch(()=>{n.revert(),e.dispatch(c.s.error((0,d.t)("file_browser.file_browser_actions.file_unpin_error")))})}),w=(0,i.N)("FOLDER_PIN_FILE"),A=(0,b.nF)(async(e,r)=>{let n=e.optimisticDispatch(w(r));(0,h.xr)("file_browser_folder_pin_file",r.folderId,null,e.getState(),{fileKey:r.fileKey}),await l.Ay.post(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit(),e.dispatch(u.F.enqueue({error:!1,message:(0,d.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(()=>{n.revert(),e.dispatch(c.s.error((0,d.t)("file_browser.file_browser_actions.file_pin_error")))})}),N=(0,i.N)("FOLDER_SET_PINNED_FILE"),C=(0,i.N)("FOLDER_DELETE_LG_SHIM"),O=(0,i.N)("FOLDER_DELETE"),L=(0,i.N)("FOLDER_CLEAR"),R=(0,b.nF)((e,r)=>{let n=(0,_.SS)(r.name);if(n)return e.dispatch(c.s.error(n)),null;if(e.dispatch(m.Lo()),e.dispatch(p.bx()),void 0===r.isInviteOnly&&void 0===r.isViewOnly&&void 0===r.teamAccess)return e.dispatch(c.s.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let i={id:(0,_.d)(),name:r.name,description:null,path:r.name,team_id:r.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},deleted_at:null,sharing_audience_control:null,team_access:null,trashed_at:null},a=l.Ay.post("/api/folders",{team_id:r.teamId,path:r.name,is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly,sharing_audience_control:r.sharingAudienceControl,team_access:r.teamAccess}).then(({data:n})=>{e.dispatch(O({folderIds:[i.id]}));let a=n.meta;for(let n of a)if(n.name===r.name){e.dispatch(x(n)),r.onFolderCreated&&r.onFolderCreated(n.id,n.name),(0,h.xr)("Folder Created",n.id,n.team_id,e.getState(),{sharingAudienceControl:r.sharingAudienceControl,teamAccess:r.teamAccess});let i=e.getState().user;r.inviteEmails?.length&&r.teamAccess&&e.dispatch((0,f.rq)({emails:r.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:g.vt.FOLDER,resourceIdOrKey:n.id,level:r.inviteLevel||E.e6.VIEWER,source:"new_project_creation_modal"})),y.G.getRoles({resourceId:n.id,resourceType:g.vt.FOLDER}).then(({data:r})=>{for(let n of r.meta)e.dispatch(I.bE({role:n}))}),r.shouldRedirect&&e.dispatch(p.$T({view:"folder",folderId:n.id}));break}return a});return(0,s.Q)({store:e,requestPromise:a,fallbackError:(0,d.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:x(i)})}),P=(0,b.nF)((e,{folderId:r,folderName:n,teamId:i,isSubscribed:c})=>{let u=c?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,h.xr)(u,r,i,e.getState());let p=l.Ay.put(`/api/folders/${r}`,{is_subscribed:c});if(c)(0,o.WB)().optimisticallyCreate({ProjectSubscription:{[`optimistic-${r}`]:{folderId:r,userId:(0,a.Ay)().user_data.id,projectV2:{id:r,path:n,updatedAt:new Date,createdAt:new Date,deletedAt:null,viewOnlyAt:null,inviteOnlyAt:null,orgId:(0,a.Ay)().org_id||null,teamId:i,canRead:!0,canEdit:!1}}}},p);else{let e=(0,o.WB)();V[r]&&e.optimisticallyDelete({ProjectSubscription:{[V[r]]:null}},p)}(0,s.Q)({store:e,requestPromise:p,fallbackError:(0,d.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:M({folder:{id:r,is_subscribed:c}})})});(0,i.N)("FOLDER_LOAD");let D=(0,i.N)("FOLDER_PUT_UPDATED_AT"),k=(0,i.N)("FOLDER_LOADED"),M=(0,i.N)("FOLDER_PUT"),F=(0,i.N)("FOLDER_BATCH_POST"),x=(0,i.N)("FOLDER_POST"),U=(0,i.N)("FOLDER_STOP_RENAME"),B=(0,i.N)("FOLDER_BEGIN_RENAME"),V={}},293017:(e,r,n)=>{"use strict";n.d(r,{Bs:()=>eo,D9:()=>H,Dr:()=>ee,FP:()=>V,Gm:()=>U,J4:()=>ey,JM:()=>G,Jt:()=>M,Kx:()=>z,M3:()=>eC,Mt:()=>$,OB:()=>eL,PQ:()=>D,QA:()=>L,Ql:()=>Q,Qm:()=>eT,R5:()=>x,Rw:()=>P,ST:()=>R,TB:()=>Z,U8:()=>K,UC:()=>eO,UM:()=>eE,Uv:()=>X,VB:()=>ed,Wk:()=>el,XE:()=>ei,XQ:()=>e_,Y:()=>Y,Y6:()=>eg,Z1:()=>eb,Z_:()=>ef,_O:()=>q,aK:()=>eI,bO:()=>eA,bS:()=>J,eH:()=>eN,fG:()=>j,fk:()=>ep,fy:()=>eu,ho:()=>eR,il:()=>W,kP:()=>eh,lp:()=>ev,lz:()=>F,nA:()=>ew,nN:()=>es,p5:()=>em,pj:()=>k,sx:()=>B,u1:()=>ea,vg:()=>ec,yv:()=>eS});var i=n(587670),a=n(167249),o=n(776250),s=n(511617),l=n(517333),c=n(737947),d=n(966712),u=n(712366),p=n(47506),m=n(939863),h=n(738269),_=n(662275),g=n(626783),f=n(259927),E=n(988022),y=n(356390),b=n(630331),I=n(643067),T=n(707465),v=n(984968),S=n(945020),w=n(567088),A=n(935938),N=n(723127),C=n(553841),O=n(980820);let L=(0,a.N)("SET_SHOW_EDIT_BUTTON"),R=(0,a.N)("CLEAR_SELECTED_VIEW_COMMENT_ID"),P=(0,a.N)("UPDATE_RECENTLY_USED_QUICK_COMMAND"),D=(0,a.N)("RECENTLY_USED_QUICK_COMMANDS"),k=(0,a.N)("FULLSCREEN_UPDATE_CANVAS_MENTION_POPUP_POSITION"),M=(0,a.N)("FULLSCREEN_SET_CANVAS_MENTION_POPUP"),F=(0,a.N)("FULLSCREEN_UPDATE_HYPERLINK_POPUP_POSITION"),x=(0,a.N)("FULLSCREEN_SET_HYPERLINK_POPUP"),U=(0,a.N)("FULLSCREEN_SET_EYEDROPPER"),B=(0,O.nF)((e,r)=>{let n=e.getState(),i=r.params||{},{fileKey:a}=n.selectedView;(0,E.ds)(r.name,a??null,n,i)}),V=(0,a.N)("FULLSCREEN_SET_LEFT_PANEL_TAB"),G=(0,a.N)("FULLSCREEN_SHOW_FILE_CREATION_FAILURE_BANNER"),H=(0,a.N)("FULLSCREEN_HIDE_UPGRADE_BANNER"),W=(0,a.N)("FULLSCREEN_SHOW_UPGRADE_BANNER"),K=(0,a.N)("FULLSCREEN_SET_PREFERRED_VALUES_PICKER_LIST_LAYOUT"),j=(0,a.N)("FULLSCREEN_SET_INSTANCE_SWAP_PICKER_LIST_LAYOUT"),z=(0,a.N)("FULLSCREEN_SET_PICKER_LIST_LAYOUT"),Y=(0,O.nF)((e,r)=>{(0,o.sx)("Style Picker View Changed",{styleType:"FILL",oldViewMode:r.isListLayout?"GRID":"LIST",newViewMode:r.isListLayout?"LIST":"GRID"}),e.dispatch(z(r))}),$=(0,a.N)("FULLSCREEN_SHOULD_SHOW_STACK_ALIGNMENT_PICKER"),q=(0,a.N)("FULLSCREEN_HIDE_EXPORT_SETTINGS_PICKER"),Z=(0,a.N)("FULLSCREEN_SHOW_EXPORT_SETTINGS_PICKER"),X=(0,a.N)("FULLSCREEN_HIDE_STYLE_PICKER"),J=(0,a.N)("FULLSCREEN_SHOW_STYLE_PICKER"),Q=(0,a.N)("FULLSCREEN_HIDE_PICKER"),ee=(0,a.N)("FULLSCREEN_SHOW_PICKER");function et(e){return e&&e.startsWith(f.F7)}function er(e){return e&&e.startsWith(f.yJ)}function en(e,r,n){let a=e&&e.id,s=r&&r.id,l=a!==f.k8&&s===f.k8,c=a===f.k8&&s!==f.k8,d=a!==f.$T&&s===f.$T,u=a===f.$T&&s!==f.$T,p=a!==f.AB&&a!==f.h2&&(s===f.AB||s===f.h2),m=(a===f.AB||a===f.h2)&&s!==f.AB&&s!==f.h2,h=a!==f._V&&s===f._V,_=a===f._V&&s!==f._V,E=!et(a)&&et(s),b=et(a)&&!et(s),I=!er(a)&&er(s),T=er(a)&&!er(s);l?i.Ez5.uiState().backgroundPickerOpen.set(!0):c?i.Ez5.uiState().backgroundPickerOpen.set(!1):d?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!0}):u?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!1}):p?(i.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!0),(0,o.sx)("Type Details Panel Opened")):m&&i.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!1),E?i.Osy.setIsPaintPickerOpen(!0):b&&i.Osy.setIsPaintPickerOpen(!1),I?i.Osy.setIsStylePickerOpen(!0):T&&i.Osy.setIsStylePickerOpen(!1),h?i.Ez5.uiState().minMaxModalShown.set(!0):_&&i.Ez5.uiState().minMaxModalShown.set(!1),b&&n(g.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))}let ei=(0,O.nF)(e=>{let r=e.getState().pickerShown;e.dispatch(Q()),en(r,e.getState().pickerShown,e.dispatch)}),ea=(0,O.nF)((e,r)=>{let n=e.getState().pickerShown;e.dispatch(ee(r)),en(n,e.getState().pickerShown,e.dispatch)}),eo=(0,a.N)("FULLSCREEN_UPDATE_LOCAL_FONT_AGENT_VERSION"),es=(0,a.N)("FULLSCREEN_UPDATE_FONT_LIST"),el=(0,a.N)("FULLSCREEN_STOP_RENAMING"),ec=(0,a.N)("FULLSCREEN_BEGIN_RENAMING"),ed=(0,O.nF)((e,r)=>{let n=e.getState(),a=r.newSelectedView;if(n.saveStatus&&n.saveStatus.hasUnsavedChanges&&n.saveStatus.tabCloseText!==i.E63.SUPPRESS_UNSAVED_CHANGES_UI){let i=(0,m.t)("autosave.unable_to_leave_document.unsaved_changes_save_in_background");e.dispatch(_.to({type:C.v,data:{message:i}})),c.Ay.push((0,T.Np)(n,a),{...e.getState().selectedView,previousSelectedView:r.oldSelectedView,jsCommitHash:(0,d.tl)().release_manifest_git_commit}),e.dispatch(h.$T(r.oldSelectedView))}else n.saveStatus&&n.saveStatus.tabCloseText===i.E63.SUPPRESS_UNSAVED_CHANGES_UI&&(0,o.sx)("suppress_unsaved_changes_ui",{},{forwardToDatadog:!0}),e.dispatch(h.$T({...a,fromPopstate:!0}))}),eu=(0,a.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_THUMBNAIL_URL"),ep=(0,a.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_PROPERTIES"),em=(0,a.N)("FULLSCREEN_UPDATE_MIRROR"),eh=(0,a.N)("FULLSCREEN_SET_NEEDS_UPGRADE"),e_=(0,a.N)("FULLSCREEN_SET_FILE_VERSION"),eg=(0,a.N)("FULLSCREEN_SET_PROGRESS_BAR_STATE"),ef=(0,a.N)("FULLSCREEN_STOP_OBSERVING_OTHER_USER"),eE=(0,a.N)("FULLSCREEN_UPDATE_MULTIPLAYER_STATE"),ey=(0,O.nF)((e,r)=>{void 0!==r.allUsers&&(b.k6(r.allUsers.length,r.presenterSessionID),(0,p.YQ)({id:S.M8})),e.dispatch(eE(r))}),eb=(0,a.N)("FULLSCREEN_HIDE_OPEN_DESKTOP_APP_MODAL"),eI=(0,a.N)("FULLSCREEN_SHOW_OPEN_DESKTOP_APP_MODAL"),eT=(0,a.N)("FULLSCREEN_RECONNECTING_SUCCEEDED"),ev=(0,O.nF)(e=>{b.Dg(),e.dispatch(eT())}),eS=(0,a.N)("FULLSCREEN_RECONNECTING_STARTED"),ew=(0,O.nF)(e=>{b.Ug(),e.dispatch(eS())}),eA=(0,a.N)("FULLSCREEN_ATTEMPT_CLOSE"),eN=(0,O.nF)((e,r)=>{if(l.eD){l.eD.showFileBrowser(),r?.closeCurrentDesktopTab&&l.eD.close({suppressReopening:!0,shouldForceClose:!0});return}if(s.GZ()){if((0,d.kc)().integ_zoom_allow_file_switching&&(0,u.LR)())return;c.Ay.redirect("/","_blank");return}let n=e.getState(),{openFile:a,selectedView:o}=n,p=a?.project?.id,m=(0,d.kc)().ps_benchmark,_={view:"recentsAndSharing",tab:A.G.RECENTLY_VIEWED};if(a&&o){let e=a.parentOrgId||N.P;if(m&&"fullscreen"===o.view&&n.lastVisitedPlan&&n.lastVisitedPlan.planId!==(n.lastVisitedPlan.planType===w.O.ORG?a?.parentOrgId:a?.teamId)){let e=(0,T.xS)(n,_);o.prevSelectedView&&(e=(0,T.xS)(n,o.prevSelectedView));let r=(0,I.nX)(e),i=(0,v.Eq)(e);(r||i)&&(e=(0,T.Tk)(e,r?w.O.ORG:w.O.TEAM,r||i,n.lastVisitedPlan.planType,n.lastVisitedPlan.planId)),c.Ay.redirect(e);return}if(!m&&"fullscreen"===o.view&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==e){let e=(0,T.xS)(n,_);o.prevSelectedView&&(e=(0,T.xS)(n,o.prevSelectedView));let r=(0,I.nX)(e);if(!r&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==N.P){let r=e.split("files/");e=r[0]+`files/${n.lastVisitedPlanId}/`+r[1]}else if(r&&r!==n.lastVisitedPlanId){let i=n.lastVisitedPlanId===N.P?"":n.lastVisitedPlanId,a=n.lastVisitedPlanId===N.P?`/${r}`:r;e=e.replace(a,i)}c.Ay.redirect(e);return}"fullscreen"===o.view&&o.prevSelectedView?_=o.prevSelectedView:a&&p&&(_={view:"folder",folderId:p})}if(i.Ez5?.uiState().isRecovery.getCopy()){let e=(0,T.xS)(n,_);c.Ay.redirect(e)}y.Y5.dispatchIfSaved(h.$T(_)),b.V(),e.dispatch(eA(r))}),eC=(0,a.N)("FILE_SELECTED_SHARE_MODAL_TAB"),eO=(0,a.N)("UPDATE_OPEN_FILE"),eL=(0,a.N)("NEW_FILE_LOADED"),eR=(0,a.N)("FULLSCREEN_OPEN")},994988:(e,r,n)=>{"use strict";n.d(r,{HF:()=>h,QA:()=>E,TW:()=>g,Zv:()=>m,kE:()=>p,mH:()=>_,tG:()=>u,zs:()=>f});var i=n(167249),a=n(27087),o=n(939863),s=n(392592),l=n(980820),c=n(404717),d=n(440535);let u=(0,i.N)("GENERIC_COMMENT_COMMIT_CREATED_COMMENT"),p=(0,i.N)("GENERIC_COMMENT_COMMIT_EDITED_COMMENT"),m=(0,i.N)("GENERIC_COMMENT_COMMIT_DELETED_COMMENT"),h=(0,i.N)("GENERIC_COMMENT_COMMIT_HIDE_COMMENT");(0,l.nF)(async(e,r)=>{let{authorId:n,removeCommentsCallback:i}=r,a=e.getState().communityHub.comments,{activeFeedType:o,commentsById:s,id:l,type:c}=a;if(!l||!c||!a.feeds[o]?.feed)return;let d=[];for(let e in s)s[e]?.author.id===n&&d.push(s[e]);await i(d),e.dispatch(m({resourceType:c,resourceId:l,comments:d}))});let _=(0,i.N)("GENERIC_COMMENT_SET_SHOW_RESOLVED");(0,i.N)("GENERIC_COMMENT_SAVE_PAGE_SCROLL_POSITION");let g=(0,i.N)("GENERIC_COMMENT_RESET_COMMENT_STATUS"),f=(0,i.N)("GENERIC_COMMENT_SUBMIT");(0,l.nF)(async(e,r)=>{let{messageMeta:n,resourceId:i,resourceType:l,onSuccess:c,onError:p,clientMeta:m,pageId:h,parentId:_,isReply:E}=r;await a.Ay.post("/api/community_comments",{message_meta:n,resource_id:i,resource_type:l,client_meta:m,page_id:h,parent_id:_}).then(({data:r})=>{e.dispatch(u({comment:r.meta,resourceId:i,resourceType:l,isReply:E})),c&&c(r.meta)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_create_comment",{errorMessage:n})})),_?e.dispatch(g({commentId:_})):e.dispatch(g({commentId:d.hm})),p&&p())}),e.dispatch(f(r))},({resourceId:e})=>`GENERIC_COMMENT_SUBMIT_${e}`);let E=(0,l.MM)("GENERIC_COMMENT_EDIT",async(e,r,{optimistId:n})=>{let{commentId:i,messageMeta:l,callback:d,clientMeta:u}=r;await a.Ay.put(`/api/community_comments/${i}`,{message_meta:l,client_meta:u}).then(({data:r})=>{e.dispatch(c.c(n)),d(r.meta),e.dispatch(p({comment:r.meta}))}).catch(r=>{e.dispatch(c.r(n)),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_edit_comment"),error:!0}))})});(0,l.nF)((e,r,{loadingKey:n})=>{let{commentId:i,onFinish:l}=r,{type:c,id:d}=e.getState().communityHub.comments;if(null===c||null===d)return;let u=e.getState().communityHub.comments.commentsById[i];a.Ay.del(`/api/community_comments/${i}`).then(()=>{e.dispatch(m({resourceType:c,resourceId:d,comments:[u]})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_deleted")})),l?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_delete_comment",{errorMessage:n})})),l?.(!0))})},({commentId:e})=>`GENERIC_COMMENT_DELETE_${e}`),(0,l.nF)((e,r)=>{let n;let{commentId:i,userIsAdmin:l,onFinish:c}=r,{type:d,id:u}=e.getState().communityHub.comments;null!==d&&null!==u&&(l&&(n={hide:!0}),a.Ay.post(`/api/community_comments/${i}/report`,n).then(()=>{e.dispatch(h({commentId:i,resourceId:u,resourceType:d})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_reported_and_hidden"),type:"COMMENT_REPORTED"})),c?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_report_comment",{errorMessage:n}),type:"COMMENT_REPORT_ERROR"})),c?.(!0))}))})},22774:(e,r,n)=>{"use strict";n.d(r,{FU:()=>s,v6:()=>c,yu:()=>l});var i=n(167249),a=n(47506),o=n(980820);let s=(0,i.N)("SET_KEYBOARD_SHORTCUT_PANEL_TAB"),l=(0,i.N)("USED_KEYBOARD_SHORTCUT"),c=(0,o.nF)((e,r)=>{"paste"===r.key&&(0,a.YQ)({id:"Used Keyboard Shortcut Paste"}),e.dispatch(l(r))})},271245:(e,r,n)=>{"use strict";n.d(r,{QC:()=>x,fi:()=>k,zK:()=>F});var i=n(966712),a=n(374626),o=n(27087),s=n(154483),l=n(868389),c=n(980820),d=n(944682),u=n(395281),p=n(632430),m=n(182976),h=n(453681),_=n(416095),g=n(933342),f=n(666068),E=n(336599),y=n(707465),b=n(935757),I=n(239671),T=n(173454),v=n(809073),S=n(656012),w=n(705129);let A=new Map,N=(0,s.fv)();async function C(e,r){let n=(0,y.zg)(e.getState().selectedView),o=!(0,i.Ay)().user_data;if(o&&!n)return;if((A.get(r)||0)>20){(0,_.LC)();return}let s=(0,w.yD)(r);if(!(0,E.Sc)(e.getState().loadingState,s)){(0,_.LC)();return}e.dispatch(m.Cx({key:s}));let c=e.getState();try{let n=c.selectedView.editorType===I.nT.Whiteboard?"figjam":"design",p=S.Z.getLibrarySubscribedComponentsEditorType({key:r,editorType:n}),[f]=await Promise.all([p]);o||await b.kb.promise,e.dispatch(d.uo({files:f.data.meta.files,subscribeToRealtime:!0})),f.data.meta.files.forEach(e=>{(0,_.WY)(e.key)});let E=e.getState().fileByKey,y=a.zl.get(h.qp),v=f.data.meta.hub_files;v&&(v.forEach(e=>{(0,_.WY)(e.id)}),e.dispatch((0,l.D3)(v)));let w=f.data.meta.state_groups.map(e=>({...e,team_id:(0,i.kc)().ds_use_lib_keys?y[e.library_key]?.team_id:E[N(e)]?.team_id})),A=f.data.meta.components.map(e=>({...e,team_id:(0,i.kc)().ds_use_lib_keys?y[e.library_key]?.team_id:E[N(e)]?.team_id}));e.dispatch(u.uo({items:w,type:T.PW.STATE_GROUP})),e.dispatch(u.uo({items:A,type:T.PW.COMPONENT})),e.dispatch(u.t2({libraries:f.data.meta.libraries})),(0,_.LC)(),e.dispatch(m.x2({key:s})),g.YG.queryDidChange(e)}catch(n){(0,_.LC)(),A.set(r,(A.get(r)||0)+1),e.dispatch(m.of({key:s}))}}async function O(e){let r=e.getState().openFile,n=e.getState().fileVersion;if(!r||!n)return;let a=(0,_.iw)(r.key,n),o=e.getState().loadingState;if(!((0,E.D2)(o,a)||(0,E.VP)(o,a))){e.dispatch(m.Cx({key:a}));try{let r=e.getState().selectedView;if("fullscreen"!==r.view)return;let n=await S.Z.getDefaultLibraries({editorType:(0,I.Bu)(r.editorType)});R(e,n.data.meta.components,T.PW.COMPONENT),R(e,n.data.meta.state_groups,T.PW.STATE_GROUP),n.data.meta.files.forEach(r=>{r.team_id=T.Yu,e.dispatch(d.yJ({file:r}))});let o=n.data.meta.files.map(e=>e.key);if(e.dispatch(u.Vk({fileKeys:o})),e.dispatch(u.t2({libraries:n.data.meta.libraries})),r.editorType===I.nT.Whiteboard&&(0,i.kc)().ad_shapes_panel){let r=await S.Z.getDefaultLibraries({editorType:"whiteboard_shapes"});P(e,r.data.meta.components,T.PW.COMPONENT),P(e,r.data.meta.state_groups,T.PW.STATE_GROUP),r.data.meta.files.forEach(r=>{r.team_id=T.Yu,e.dispatch(d.yJ({file:r}))});let n=r.data.meta.files.map(e=>e.key);e.dispatch(u.MI({shapeFileKeys:n})),e.dispatch(u.t2({libraries:r.data.meta.libraries}))}(0,_.kG)(),e.dispatch(m.x2({key:a}))}catch(r){(0,_.kG)(),e.dispatch(m.of({key:a})),g.YG.queryDidChange(e)}}}let L=(0,s.fv)(),R=(e,r,n)=>{let i={[T.Yu]:{}};r.forEach(e=>{let r=L(e=(0,f.aV)(e));i[T.Yu][r]=i[T.Yu][r]||{},i[T.Yu][r][e.node_id]=e}),e.dispatch(u.Ho({publishedItemsByTeamId:i,type:n}))},P=(e,r,n)=>{let i={[T.Yu]:{}};r.forEach(e=>{let r=L(e=(0,f.aV)(e));i[T.Yu][r]=i[T.Yu][r]||{},i[T.Yu][r][e.node_id]=e}),e.dispatch(u.g9({publishedItemsByTeamId:i,type:n}))};(0,c.nF)(e=>{let r=e.getState(),n=!!r.user;if(!r.openFile?.key)return;let i=e.getState().selectedView;i&&"fullscreen"===i.view&&(i.editorType===I.nT.Whiteboard||i.editorType===I.nT.Slides?O(e):(0,_.kG)(),n&&M(e,i.editorType===I.nT.Whiteboard?v.$A.FigJam:v.$A.Design)),n&&(e.dispatch(p.tg()),p.xZ(e))});let D=(0,s.fv)(),k="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function M(e,r){let n;if((0,E.VP)(e.getState().loadingState,k))return;e.dispatch(m.Cx({key:k})),await _.NW;let i=e.getState();if("fullscreen"!==i.selectedView.view){e.dispatch(m.x2({key:k}));return}let s=new Set,l=new Set;for(let e of i.recentlyUsed.libraryItems[r])e.type===T.PW.COMPONENT&&e.key&&!i.library.published.components[e.team_id]?.[D(e)]?.[e.node_id]?s.add(e.key):e.type===T.PW.STATE_GROUP&&e.key&&!i.library.published.stateGroups[e.team_id]?.[D(e)]?.[e.node_id]&&l.add(e.key);if(0===s.size&&0===l.size){e.dispatch(m.x2({key:k}));return}try{n=await o.Ay.post("/api/design_systems/components_state_groups",{component_keys:Array.from(s),state_group_keys:Array.from(l),org_id:i.openFile?.parentOrgId,fv:i.fileVersion})}catch(r){e.dispatch(m.of({key:k}));return}e.dispatch(m.x2({key:k})),e.dispatch(d.uo({files:n.data.meta.files,subscribeToRealtime:!1})),e.dispatch(u.dC({subscribedOldKeyToNewKey:n.data.meta.move_remappings,localOldGuidToNewKey:{}}));let c=e.getState().fileByKey,g=a.zl.get(h.qp);p.VF(n.data.meta.components,T.PW.COMPONENT,c,g,e.dispatch),p.VF(n.data.meta.state_groups,T.PW.STATE_GROUP,c,g,e.dispatch)}let F=(0,c.nF)(e=>{let r=e.getState().fileVersion,n=e.getState().openFile;r&&n&&C(e,n.key)});function x(e){e.dispatch(F())}},632430:(e,r,n)=>{"use strict";n.d(r,{$h:()=>eY,AA:()=>rs,AV:()=>e5,As:()=>e3,BK:()=>eG,Bs:()=>eQ,Cz:()=>tY,D6:()=>tN,EY:()=>rr,Ee:()=>eZ,Fz:()=>rl,G5:()=>tZ,Kd:()=>tu,Kk:()=>rt,Kn:()=>t$,Ky:()=>tA,M8:()=>tg,Mv:()=>tz,NW:()=>tj,Nf:()=>tn,Oe:()=>tl,P8:()=>eK,PI:()=>tX,Qn:()=>tr,SH:()=>t3,Sn:()=>t0,Tn:()=>tk,VF:()=>rd,YD:()=>tH,Yb:()=>tD,Yf:()=>e$,Yi:()=>ts,Yx:()=>tK,Z:()=>tR,Zn:()=>ra,_K:()=>ti,a9:()=>tI,am:()=>t5,b$:()=>eX,bi:()=>tq,e$:()=>th,fR:()=>t6,ff:()=>ta,fv:()=>tL,g1:()=>tB,jD:()=>ex,jW:()=>tQ,n8:()=>re,nE:()=>t2,nh:()=>e4,nz:()=>tW,rX:()=>e8,sb:()=>t1,t5:()=>te,tL:()=>t8,tg:()=>t_,u7:()=>tb,uO:()=>eH,uP:()=>eB,x:()=>rn,xZ:()=>tC,yJ:()=>ro,zn:()=>tw});var i=n(411855),a=n(188507),o=n(675678),s=n(215122),l=n(587670),c=n(86625),d=n(656020),u=n(534611),p=n(593779),m=n(707458),h=n(89865),_=n.n(h),g=n(758271),f=n.n(g),E=n(167249),y=n(776250),b=n(354189),I=n(522205),T=n(38329),v=n(737947),S=n(358145),w=n(966712),A=n(374626),N=n(853828),C=n(915440),O=n(711525),L=n(752553),R=n(535972),P=n(776621),D=n(572206),k=n(27087),M=n(47506),F=n(881388),x=n(939863),U=n(588666),B=n(154483),V=n(392592),G=n(934533),H=n(868389),W=n(980820),K=n(944682),j=n(395281),z=n(182976),Y=n(662275),$=n(404717),q=n(846018),Z=n(931828),X=n(298527),J=n(988022),Q=n(974105),ee=n(378905),et=n(696673),er=n(44892),en=n(453681),ei=n(742621),ea=n(999881),eo=n(151283),es=n(356390),el=n(567245),ec=n(457630),ed=n(560286),eu=n(416095),ep=n(279453),em=n(216158),eh=n(336599),e_=n(243987),eg=n(830524),ef=n(946778),eE=n(320741),ey=n(388094),eb=n(984968),eI=n(935757),eT=n(610267),ev=n(173454),eS=n(246680),ew=n(735974),eA=n(656012),eN=n(755515),eC=n(776018),eO=n(252430),eL=n(372291),eR=n(705129),eP=n(479296),eD=n(229055),ek=n(672474),eM=n(479984);let eF=(0,B.fv)();async function ex(e,r=l.ZiZ.ACTIVE_SCENE){let n;if(!e.canvas_url&&r===l.ZiZ.PLAYGROUND_SCENE)return{newSymbolOrStateGroupGuid:l.BXd.upsertLocalProductComponentToPlaygroundScene(e.node_id)};let i=await er.Eo.getCanvas(e);if(e.type===ev.PW.COMPONENT){let a=c.l7.system("upsert-shared-symbol",()=>l.BXd.upsertSharedSymbol(e.component_key??s.ii.INVALID,e.content_hash??s.F7.INVALID,eF(e),l.zol.NO,i,r));if(!a||a.fileUpdateRequired)return;if(!a.localGUID)throw Error("Swap to Shared Component Error, no local GUID");n=a.localGUID}else if(e.type===ev.PW.STATE_GROUP){let a=c.l7.system("upsert-shared-state-group",()=>l.BXd.upsertSharedStateGroup(e.key,e.version,eF(e),l.zol.NO,i,r));if(!a||a.fileUpdateRequired)return;if(!a.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(a.C2)throw Error(a.C2);n=a.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:n,buffer:i}}let eU=(0,B.fv)(),eB=(0,W.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:s,alwaysFetch:c,targetUpsertScene:d=l.ZiZ.ACTIVE_SCENE}=r,u=(0,Q.d1)(e.getState());if(u){if(!(0,ee.N2)(n,u)||c){let r=async()=>{try{let e=await ex(n,d);e&&(i?.(e.newSymbolOrStateGroupGuid),e.buffer&&a?.(e.buffer))}catch(r){e.dispatch(F.s.error("An error occurred while retrieving the component or state group.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),s?.()}};e.dispatch((0,ek.vQ)({assetResourceId:eU(n),onInsertAsset:r,source:ek.jE.LOAD_COMPONENT}))}else i?.(n.node_id)}}),eV=(0,B.fv)(),eG=(0,E.N)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP"),eH=(0,W.nF)((e,r)=>{let{item:n,instanceGUIDs:i,usedSwapInstanceKeyboardShortcut:a,storeInRecentsKey:s,queryId:d}=r,u=(0,eR.Ml)(n,i);e.dispatch(z.Cx({key:u}));let p=e.getState(),m=(0,ed.s)(p);e.dispatch(tX({storeInRecentsKey:s,item:n,userId:m}));let h=(0,Q.d1)(p);if(!h){e.dispatch(z.of({key:u}));return}let _=async()=>{try{let r=await ex(n);if(r){let o=n.type===ev.PW.STATE_GROUP?l.glU.getSimilarStates(i,r.newSymbolOrStateGroupGuid,n.default_state_key):{[r.newSymbolOrStateGroupGuid]:i};c.l7.user("replace-symbol-backing-instances",()=>{l.glU.replaceSymbolBackingInstances(o,a)}),e.dispatch(z.x2({key:u})),(0,eD.V)(h.key,n,!0,!!e.getState().userFlags.apple_eula_accepted)}}catch(r){e.dispatch(z.of({key:u})),e.dispatch(F.s.error("An error occurred while adding an instance of this component.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),(0,eD.V)(h.key,n,!1,!!e.getState().userFlags.apple_eula_accepted)}(0,J.ds)("Instance Swapped To Shared Component",h.key,e.getState(),{componentFileKey:eV(n),componentLibraryKey:n.library_key,componentId:n.id,source:r.sourceForTracking,queryId:d})};e.dispatch((0,ek.vQ)({assetResourceId:eV(n),onInsertAsset:_,source:ek.jE.SWAP_TO_COMPONENT}))}),eW="<!--(figcomponent)";(0,W.nF)((e,r)=>{let n=r.dataTransfer?.getData("text/html");if(n){let i=n.indexOf(eW)+eW.length,a=n.indexOf("(/figcomponent)-->");if(i>=0&&a>=0&&i<a){let o=n.substring(i,a).trim();try{let n=JSON.parse(o);if("object"==typeof n){let i=n.fileKey,a=n.nodeId;if(i&&a){let n=es.Y5.getViewportInfo(),o=new D.Mi(n.x,n.y),s=new D.Mi(r.clientX,r.clientY).subtract(o),l=(0,ec.$$)(n,s);e.dispatch(eK({fileKey:i,nodeId:a,canvasX:l.x,canvasY:l.y}))}}}catch(e){}}}});let eK=(0,W.nF)(async(e,r)=>{let{fileKey:n,nodeId:i,canvasX:a,canvasY:o}=r,s=e.getState(),l=(0,Q.d1)(s),c=null;if(l&&l.key===n)c=s.library.local.components[i];else{s.fileByKey[n]||(await tO(e,n),s=e.getState());let r=s.fileByKey[n];!r||(c=(0,eu.j7)(s.library.published.components,r)[i])||(await tO(e,n),s=e.getState(),c=(0,eu.j7)(s.library.published.components,r)[i])}c?e.dispatch(e$({item:c,canvasPosition:new D.Mi(a,o),percentageOffset:new D.Mi(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(V.F.enqueue({type:"insert_component_error",message:(0,x.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))});function ej(e){return e(V.F.enqueue({type:"insert_instance",message:(0,x.t)("design_systems.subscriptions.inserting_instance"),icon:G.zX.SPINNER,delay:1e3})),function(){e(V.F.dequeue({matchType:"insert_instance"}))}}let ez=(0,B.fv)(),eY=(0,E.N)("INSERT_SHARED_COMPONENT"),e$=(0,W.nF)((e,r)=>{e.dispatch(eY(r));let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:d,isFromDoubleClick:p,useSmartPositioning:h,storeInRecentsKey:_,fromPlayground:g,insertLogArgsOverride:f}=r,E=e.getState(),y=(0,et.wJ)(ez(n))&&!!(0,w.kc)().presets_baseline,b=async()=>{let r=(0,ed.s)(E);e.dispatch(tX({storeInRecentsKey:_,item:n,userId:r}));let b=(0,Q.d1)(E);if(!b)return;let I=(r,n)=>{let o=c.l7.user("insert-component",()=>g?l.glU.insertPlaygroundInstance({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},y):l.glU.insertInstance(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},n,d,h??!1,y));if(e.dispatch(Y.ES({type:eC.V})),(0,w.kc)().presets_baseline&&o!==u.AD){let n=(0,eg.C$)(m.q.instance.get(r)),i=E.mirror.sceneGraph.get(o),a=Object.keys(i&&"INSTANCE"===i.type&&i.componentProperties()||{}).length>0;n&&a?(e.dispatch(q.E({nodeId:o})),(0,M.YQ)({id:eS.sh})):n?(e.dispatch(q.E({nodeId:o})),(0,M.YQ)({id:eS.Sp})):a?(0,M.YQ)({id:eS.An}):(0,M.YQ)({id:eS.fe})}es.Y5.triggerAction("commit"),es.Y5.triggerAction("set-tool-default")};if((0,ee.N2)(n,b)){let r=E.library.local.components[n.node_id];if(!r||!E.mirror.sceneGraph.get(r.node_id)){e.dispatch(Y.to({type:eO.Q}));return}try{I(r.node_id,f),(0,J.ds)("Component Local Symbol Inserted",b.key,e.getState(),{componentFileKey:ez(n),componentLibraryKey:n.library_key,componentId:n.id,ComponentCanvasPositionX:i.x,ComponentCanvasPositionY:i.y}),(0,eD.V)(b.key,r,!0,!!e.getState().userFlags.apple_eula_accepted),e.dispatch(ri())}catch(n){e.dispatch(F.s.error("An error occurred while adding an instance of this component.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,n),(0,eD.V)(b.key,r,!1,!!e.getState().userFlags.apple_eula_accepted)}}else{let r=performance.now();if(tf&&tf===n.component_key&&tE){let e=(await tE).component;e&&e.updated_at>n.updated_at&&(n=e)}let a=ej(e.dispatch);er.Eo.getCanvas(n).then(e=>{let r=c.l7.system("upsert-shared-symbol",()=>l.BXd.upsertSharedSymbol(n.component_key??s.ii.INVALID,n.content_hash??s.F7.INVALID,ez(n),l.zol.NO,e,l.ZiZ.ACTIVE_SCENE));if(!r)throw(0,P.x1)("design-systems","response from upsertSharedSymbol was nullish",{componentKey:n.component_key??s.ii.INVALID,contentHash:n.content_hash??s.F7.INVALID},{reportAsSentryError:!0}),Error("An error occurred while adding an instance of this component.");if(r.fileUpdateRequired||!r.localGUID)throw Error("An error occurred while adding an instance of this component.");I(r.localGUID,f)},e=>{let r=l.glU.getSymbolNodeId(n.component_key,n.content_hash);if(!r){if(e?.status===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}I(r,f)}).then(()=>{let a=performance.now()-r;(0,J.ds)("Component Shared Symbol Inserted",b.key,e.getState(),{elapsedMs:a,componentFileKey:ez(n),componentLibraryKey:n.library_key,componentId:n.id,componentName:n.name,ComponentCanvasPositionX:i.x,ComponentCanvasPositionY:i.y,isFromDefaultLibrary:(0,eu.td)(E.library,ez(n)),isFromDoubleClick:!!p,useSmartPositioning:!!h}),(0,eD.V)(b.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:a}),e.dispatch(ri())}).catch(i=>{e.dispatch(F.s.error(i.message)),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,i),(0,eD.V)(b.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-r})}).finally(()=>{a()})}};e.dispatch((0,ek.vQ)({assetResourceId:ez(n),onInsertAsset:b,source:ek.jE.INSERT_SHARED_COMPONENT}))}),eq=(0,B.fv)(),eZ=(0,E.N)("INSERT_SHARED_STATE_GROUP"),eX=(0,W.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:d,isFromDoubleClick:p,useSmartPositioning:m,storeInRecentsKey:h,fromPlayground:_,insertLogArgsOverride:g}=r,f=e.getState(),E=(0,et.wJ)(eq(n))&&!!(0,w.kc)().presets_baseline,y=async()=>{let r=(0,ed.s)(f);e.dispatch(tX({storeInRecentsKey:h,item:n,userId:r}));let y=(0,Q.d1)(f);if(!y)return;let b=(r,n,o)=>{let s=c.l7.user("insert-state-group",()=>_?l.glU.insertPlaygroundInstance({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},E):l.glU.insertStateGroup(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},o,d,m??!1,n,E));return e.dispatch(Y.ES({type:eC.V})),es.Y5.triggerAction("commit"),es.Y5.triggerAction("set-tool-default"),s};if((0,ee.N2)(n,y)){let r=f.library.local.stateGroups[n.node_id];if(!r||!f.mirror.sceneGraph.get(r.node_id)){e.dispatch(Y.to({type:eO.Q}));return}b(r.node_id,"",g),(0,J.ds)("State Group Local Symbol Inserted",y.key,e.getState(),{stateGroupFileKey:eq(n),stateGroupLibraryKey:n.library_key,stateGroupId:n.id,StateGroupCanvasPositionX:i.x,StateGroupCanvasPositionY:i.y}),e.dispatch(ri())}else{let r=performance.now();if(tT&&tT===n.key&&tv){let e=await tv;e&&e.updated_at>n.updated_at&&(n=e)}let a=ej(e.dispatch);er.Eo.getCanvas(n).then(r=>{let i=c.l7.system("upsert-shared-state-group",()=>l.BXd.upsertSharedStateGroup(n.key??s.q.INVALID,n.version,eq(n),l.zol.NO,r,l.ZiZ.ACTIVE_SCENE));if(!i||i.fileUpdateRequired||!i.localGUID)throw Error("An error occurred while adding an instance of this component.");let a=b(i.localGUID,n.default_state_key,g);if((0,w.kc)().presets_baseline){let r=f.mirror.sceneGraph.get(i.localGUID)?.childrenNodes[0];r&&((0,eg.C$)(r)&&a!==u.AD?(e.dispatch(q.E({nodeId:a})),(0,M.YQ)({id:eS.sh})):(0,M.YQ)({id:eS.An}))}},e=>{let r=l.glU.getStateGroupNodeId(n.key,n.version);if(!r)throw Error("An error occurred while adding an instance of this component.");b(r,"",g)}).then(()=>{(0,J.ds)("State Group Shared Symbol Inserted",y.key,e.getState(),{stateGroupFileKey:eq(n),stateGroupLibraryKey:n.library_key,stateGroupId:n.id,stateGroupName:n.name,StateGroupCanvasPositionX:i.x,StateGroupCanvasPositionY:i.y,isFromDefaultLibrary:(0,eu.td)(f.library,eq(n)),isFromDoubleClick:!!p}),(0,eD.V)(y.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r}),e.dispatch(ri())}).catch(i=>{e.dispatch(F.s.error(i.message)),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,i),(0,eD.V)(y.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r})}).finally(()=>{a()})}};await e.dispatch((0,ek.vQ)({assetResourceId:eq(n),onInsertAsset:y,source:ek.jE.INSERT_SHARED_STATE_GROUP}))}),eJ=(0,B.fv)(),eQ=(0,W.nF)(async(e,r)=>{let{item:n}=r;if(!(0,eL.RX)(n))return;let{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:s,useSmartPositioning:d,insertLogArgsOverride:u,afterModuleInsertion:p,storeInRecentsKey:m,fromPlayground:h,selectAfterInsert:_,isClick:g,shouldShowVisualBell:f=!0,errorCallback:E}=r,y=e.getState(),b=(0,ed.s)(y);e.dispatch(tX({storeInRecentsKey:m,item:n,userId:b}));let I=(r,n)=>{let o=c.l7.user("insert-module",()=>h?l.glU.insertPlaygroundModuleUsage({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y}):l.glU.insertModule(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},n,s,d??!1,_??!0));return p?.(o,i,g),e.dispatch(Y.ES({type:eC.V})),es.Y5.triggerAction("set-tool-default"),o},T=(0,Q.d1)(y);if((0,ee.N2)(n,T))I(n.node_id,u),e.dispatch(ri());else{let r=()=>{};f&&(r=function(e){return e(V.F.enqueue({type:"insert_template",message:(0,x.t)("design_systems.subscriptions.inserting_template"),icon:G.zX.SPINNER,delay:1e3})),function(){e(V.F.dequeue({matchType:"insert_template"}))}}(e.dispatch));try{let e=await e0(n);I(e.localGUID,u)}catch(r){e.dispatch(F.s.error(r.message)),E?E(r):(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}finally{f&&r()}}});async function e0(e){let r=await er.Eo.getCanvas(e),n=c.l7.system("upsert-shared-module",()=>l.BXd.upsertSharedModule(e.key??s.mW.INVALID,e.version??s.Pg.INVALID,eJ(e),l.zol.NO,r,l.ZiZ.ACTIVE_SCENE));if(!n||n.fileUpdateRequired||!n.localGUID)throw Error("An error occurred while inserting this template.");return n}function e1(e,r,n){return(0,I.a)(r,n,{batchSize:5,onBatchFinish(r,n){e(eM.qB({delta:n}))}})}(0,W.nF)(async(e,r)=>{let{modules:n,canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:s,afterSlideModulesInsertion:d,useSmartPositioning:u,insertLogArgsOverride:p,storeInRecentsKey:m,selectAfterInsert:h,errorCallback:_}=r;if(n.some(e=>e.moduleSource!==l.QjO.SLIDES_TEMPLATE||!(0,eL.RX)(e)))return;let g=e.getState(),f=(0,ed.s)(g),E=(e,r)=>c.l7.user("insert-module",()=>l.glU.insertModule(e,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},r,s,u??!1,h??!0));try{let r=(await Promise.all(n.map(e0))).map(e=>E(e.localGUID,p));n.forEach(r=>{e.dispatch(tX({storeInRecentsKey:m,item:r,userId:f}))}),d(n,r),es.Y5.triggerAction("set-tool-default")}catch(e){_?_(e):(0,P.$D)(o.FigmaTeam.SLIDES,e)}});let e2=(0,B.fv)(),e3=(0,W.nF)(async(e,r)=>{let{stateGroups:n,usedItemsByKey:i,instanceIdsToUpdate:a,updateStartTime:s}=r,d=e.getState(),u=d.openFile;if(u)try{let r=await Promise.all(n.map(e=>er.Eo.getCanvas(e))),o=new Set;if((0,w.kc)().ds_update_batching_ui)await e1(e.dispatch,n,(e,n)=>{let p=r[n];if(c.l7.user("update-shared-state-group",()=>{l.BXd.updateSharedStateGroup(e.key,e2(e),e.newStateKeyToOutdatedItems,a.map(b.v.toString),p,s)}),Object.keys(e.newStateKeyToOutdatedItems).length)for(let r of Object.values(e.newStateKeyToOutdatedItems)){let{localIdsToUpdate:n,oldSubscribedKeysToUpdate:a}=r;if((0,eu.GA)(d.library,u,n,a,i)){o.add(e2(e));break}}});else for(let e=0;e<n.length;e++){let p=n[e],m=r[e];if(c.l7.user("update-shared-state-group",()=>{l.BXd.updateSharedStateGroup(p.key,e2(p),p.newStateKeyToOutdatedItems,a.map(b.v.toString),m,s)}),Object.keys(p.newStateKeyToOutdatedItems).length)for(let e of Object.values(p.newStateKeyToOutdatedItems)){let{localIdsToUpdate:r,oldSubscribedKeysToUpdate:n}=e;if((0,eu.GA)(d.library,u,r,n,i)){o.add(e2(p));break}}}es.Y5.triggerAction("commit");let p=n.map(e=>e.id);(0,J.ds)("Components Updated",u.key,e.getState(),{stateGroups:p,isSgShimFFEnabled:!0}),o.size&&t7(e,o)}catch(r){e.dispatch(F.s.error("An error occurred while updating the instances of this component.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}}),e6=(0,B.fv)(),e8=(0,W.nF)(async(e,r)=>{let{components:n,usedItemsByKey:i,instanceIdsToUpdate:a,updateStartTime:d}=r,u=e.getState(),p=u.openFile;if(p)try{let r=await Promise.all(n.map(e=>er.Eo.getCanvas(e))),o=new Set;if((0,w.kc)().ds_update_batching_ui)await e1(e.dispatch,n,(e,n)=>{let m=r[n];c.l7.user("update-shared-symbol",()=>{l.BXd.updateSharedSymbol(e.component_key??s.ii.INVALID,e6(e),e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,a.map(b.v.toString),m,d)}),(e.localIdsToUpdate.length||e.oldSubscribedKeysToUpdate.length)&&(0,eu.GA)(u.library,p,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,i)&&o.add(e6(e))});else for(let e=0;e<n.length;e++){let m=n[e],h=r[e];c.l7.user("update-shared-symbol",()=>{l.BXd.updateSharedSymbol(m.component_key??s.ii.INVALID,e6(m),m.oldSubscribedKeysToUpdate,m.localIdsToUpdate,a.map(b.v.toString),h,d)}),(m.localIdsToUpdate.length||m.oldSubscribedKeysToUpdate.length)&&(0,eu.GA)(u.library,p,m.localIdsToUpdate,m.oldSubscribedKeysToUpdate,i)&&o.add(e6(m))}es.Y5.triggerAction("commit");let m=n.map(e=>e.id);(0,J.ds)("Components Updated",p.key,e.getState(),{components:m,isShimFFEnabled:!0}),o.size&&t7(e,o)}catch(r){e.dispatch(F.s.error("An error occurred while updating the instances of this component.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}}),e5=(0,W.nF)((e,r)=>{let{style:n,inheritStyleKeyField:i,fromSearch:a}=r,o=e.getState(),s=(0,Q.d1)(o),d=s&&!(0,ee.N2)(n,s),u=o.openFile,{resourceId:p,libraryKey:m}=(0,ei.Cw)((0,ei.cO)(n,d??!1),u),h=(0,eo.X)(p);e.dispatch(e4({style:n,callback:(r,o)=>{if(o){e.dispatch(V.F.enqueue({type:"missing-font",message:(0,x.t)("design_systems.missing_font_cant_make_changes"),button:{text:(0,x.t)("design_systems.missing_font_learn_more"),action:()=>{v.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/360039956894-Add-a-font-to-Figma-design","_blank")}}}));return}c.l7.user("apply-style-to-selection",()=>l.glU.applyStyleToSelection(i,r,!0)),(0,y.sx)("Style Applied",{styleType:n.style_type,isShared:!!d,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!a,nonInteraction:0,styleKey:n.key,consumedVariableIds:l.CWU.getConsumedVariableIDs(n.node_id),styleLibraryKey:m,consumingFileKey:u?.key,fileTeamId:u?.teamId,fileParentOrgId:u?.parentOrgId,partnerType:h,success:!0,appleEulaAccepted:!!e.getState().userFlags.apple_eula_accepted},{forwardToDatadog:!0})},errorCallback:()=>{(0,y.sx)("Style Applied Error",{partnerType:h},{forwardToDatadog:!0})}}))}),e7=(0,B.fv)(),e4=(0,W.nF)((e,r)=>{let n=e.getState(),{style:i}=r,a=(0,Q.d1)(n);if(!a)return;let u=!(0,ee.N2)(i,a),p="GRID"===i.style_type&&!l.Ez5.editorPreferences().showFrameGrids.getCopy();if(u){let n=async()=>{try{let n=await er.Eo.getCanvas(i);r.bufferCallback?.(n);let a=c.l7.system("ensure-style-is-loaded",()=>l.BXd.getOrCreateSubscribedStyleNodeId(i.key,i.content_hash??s.IA.INVALID,e7(i),n));if(a?.fileUpdateRequired)return;r.omitFullscreenCommit||es.Y5.triggerAction("commit"),p&&((0,el.c6)(),l.Ez5.editorPreferences().showFrameGrids.set(!0));let o=!1;if("TEXT"===i.style_type&&a&&a.localGUID){let r=e.getState().mirror.sceneGraph.get(a.localGUID),n=r&&r.fontName;n&&await (0,d.VC)(n.family,n.style).catch(()=>{console.error(`Text style font did not load: ${n.family} ${n.style}`),o=!0})}r.callback?.(a.localGUID,o)}catch(n){e.dispatch(F.s.error("An error occurred while applying the style to the selection.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,n),r.errorCallback?.()}};e.dispatch((0,ek.vQ)({assetResourceId:e7(i),onInsertAsset:n,source:ek.jE.LOAD_STYLE}))}else p&&((0,el.c6)(),l.Ez5.editorPreferences().showFrameGrids.set(!0)),r.callback?.(i.node_id,!1),r.bufferCallback?.(void 0)}),e9=(0,B.fv)(),te=(0,W.nF)(async(e,r)=>{let{styles:n,updateStartTime:i}=r,a=e.getState().openFile;if(a)try{let r=await Promise.all(n.map(e=>er.Eo.getCanvas(e))),o=new Set,d=e.getState();if((0,w.kc)().ds_update_batching_ui)await e1(e.dispatch,n,(e,n)=>{let u=r[n];c.l7.user("update-shared-style",()=>{l.BXd.updateSharedStyle(e.key,e9(e),e.content_hash??s.IA.INVALID,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,u,i)}),(0,eu.GA)(d.library,a,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,d.library.used__LIVEGRAPH.styles)&&o.add(e9(e))});else for(let e=0;e<n.length;e++){let u=n[e],p=r[e];c.l7.user("update-shared-style",()=>{l.BXd.updateSharedStyle(u.key,e9(u),u.content_hash??s.IA.INVALID,u.oldSubscribedKeysToUpdate,u.localIdsToUpdate,p,i)}),(0,eu.GA)(d.library,a,u.localIdsToUpdate,u.oldSubscribedKeysToUpdate,d.library.used__LIVEGRAPH.styles)&&o.add(e9(u))}es.Y5.triggerAction("commit");let u=n.map(e=>e.id);(0,J.ds)("Styles Updated",d.openFile?.key,e.getState(),{styles:u}),o.size&&t7(e,o)}catch(r){e.dispatch(F.s.error("An error occurred while updating this style.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)}}),tt=(0,B.fv)(),tr=(0,W.nF)((e,r)=>{let n=l.BXd.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:i,oldStyleGUID:a,consumerGUIDsToUpdate:s}=r,{updateAsset:d}=i;er.Eo.getCanvas(d).then(r=>{let i=e.getState(),{content_hash:o}=d;if(!a)throw Error("guid to update can not be empty");if(!o)throw Error("content_hash not specified on style");let u=c.l7.user("update-selected-shared-style-consumers",()=>l.BXd.updateSelectedSharedStyleConsumers(d.key,tt(d),o,d.oldSubscribedKeysToUpdate,d.localIdsToUpdate,s,a,r,n));if(es.Y5.triggerAction("commit"),!u)throw Error("unable to update");(0,J.ds)("Styles Updated",i.openFile?.key,e.getState(),{styles:[d.id]})}).catch(r=>{e.dispatch(F.s.error("An error occurred while updating this style.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)})}),tn=(0,W.nF)(e=>{(0,eu.KQ)(e)}),ti=(0,W.nF)((e,r)=>{let{variableSets:n,updateStartTime:i}=r;if(e.getState().openFile){if((0,w.kc)().ds_update_batching_ui)return Promise.all(n.map(e=>er.Eo.getCanvas(e))).then(r=>e1(e.dispatch,n,(e,n)=>{let a=r[n];c.l7.user("update-shared-variable-set",()=>{l.BXd.updateSharedVariableSet(e.node_id,(0,ev.GI)(e)?[]:e.libraryVariableIdsForUpdate,a,i)})})).then(()=>{es.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(F.s.error("An error occurred while updating this variable collection")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)});Promise.all(n.map(e=>er.Eo.getCanvas(e))).then(e=>{for(let r=0;r<n.length;r++){let a=n[r],o=e[r];c.l7.user("update-shared-variable-set",()=>{l.BXd.updateSharedVariableSet(a.node_id,(0,ev.GI)(a)?[]:a.libraryVariableIdsForUpdate,o,i)})}es.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(F.s.error("An error occurred while updating this variable collection")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r)})}});async function ta(e){let r=await er.Eo.getCanvas(e);if(!c.l7.system("upsert-shared-variable",()=>l.BXd.upsertSharedVariable(e.node_id,l.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let to=(0,B.fv)(),ts=(0,W.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:s}=r;if(!(0,Q.d1)(e.getState())){s?.(Error("editing file not found"));return}if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await ta(n);e&&(i?.(n.node_id),a?.(e.buffer))}catch(r){e.dispatch(F.s.error("An error occurred while retrieving the variable.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),y.az.trackDefinedEvent("variables.variable_load.error",{partnerType:(0,eo.X)(to(n))}),s?.(r)}};e.dispatch((0,ek.vQ)({assetResourceId:to(n),onInsertAsset:r,source:ek.jE.LOAD_VARIABLE}))}else i?.(n.node_id)}),tl=(0,W.nF)((e,r)=>new Promise((n,i)=>{e.dispatch(ts({item:r,callback:n,errorCallback:i}))}));async function tc(e){let r=await er.Eo.getCanvas(e);if(!c.l7.system("upsert-shared-variable-set",()=>l.BXd.upsertSharedVariableSet(e.node_id,l.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let td=(0,B.fv)();(0,W.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:s}=r;if((0,Q.d1)(e.getState())){if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await tc(n);e&&(i?.(n.node_id),a?.(e.buffer))}catch(r){e.dispatch(F.s.error("An error occurred while retrieving the variable collection.")),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_EDITOR,r),s?.()}};e.dispatch((0,ek.vQ)({assetResourceId:td(n),onInsertAsset:r,source:ek.jE.LOAD_VARIABLE_SET}))}else i?.(n.node_id)}});let tu=(0,W.nF)((e,r)=>{let n=e.getState().fileVersion||eT.O;e.dispatch(z.yH({key:(0,eR.yD)(r.openFileKey)})),e.dispatch(z.yH({key:(0,eu.iw)(r.openFileKey,n)}))}),tp=new Set,tm=new Set;function th(){tp=new Set,tm=new Set}let t_=(0,W.nF)(async e=>{let r=e.getState();r.user&&(await ef.gi,tg((0,ey.OQ)(r),(0,ey.LL)(r),e))}),tg=async(e,r,n,i)=>{if(0===e.length&&0===r.length)return;let a=n.getState().openFile,o=n.getState().fileVersion;if(!a||!o)return;let s=(i=i??(0,eu.lG)(n)).loadingKey;(0,eh.VP)(n.getState().loadingState,s)&&await i.promise,n.dispatch(z.Cx({key:s})),"whiteboard"===a.editorType&&await eu.kw;let l=n.getState(),c=[];if(e.length>0){let r=new Set((0,eu.kD)(l.library.published.components).map(e=>e.component_key).concat((0,eu.kD)(l.library.defaultPublished.components).map(e=>e.component_key)).concat((0,eu.kD)(l.library.defaultShapes.components).map(e=>e.component_key)));c=e.filter(e=>!r.has(e)&&!tp.has(e))}let d=[];if(r.length>0){let e=new Set((0,eu.kD)(l.library.published.stateGroups).map(e=>e.key).concat((0,eu.kD)(l.library.defaultPublished.stateGroups).map(e=>e.key)).concat((0,eu.kD)(l.library.defaultShapes.stateGroups).map(e=>e.key)));d=r.filter(r=>!e.has(r)&&!tm.has(r))}try{if(c.length>0||d.length>0){let e=await k.Ay.post("/api/design_systems/components_state_groups",{component_keys:c,state_group_keys:d,org_id:a.parentOrgId,fv:o});c.forEach(e=>{tp.add(e)}),d.forEach(e=>{tm.add(e)});let r=e.data.meta.components,i=e.data.meta.state_groups,s=e.data.meta.files;n.dispatch(K.uo({files:s,subscribeToRealtime:!0})),n.dispatch(j.dC({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let l=n.getState().fileByKey,u=A.zl.get(en.qp);rd(r,ev.PW.COMPONENT,l,u,n.dispatch),rd(i,ev.PW.STATE_GROUP,l,u,n.dispatch)}i.callbackForComponent?.(!0)}catch(e){i.callbackForComponent?.(!1)}i.resetPromise(),n.dispatch(z.yH({key:s})),i.callback()},tf=null,tE=null,ty=(0,B.fv)();async function tb(e,r,n){try{let i=e.getState().fileVersion||0,a=await eA.Z.getLibraryComponentV2({componentKey:r,source:n,fv:i}),o=a.data.meta.file;o&&e.dispatch(K.yJ({file:o}));let s=a.data.meta.component||null,l=a.data.meta.component_set||null,c=e.getState().fileByKey,d=A.zl.get(en.qp);if(s&&(s.team_id=(0,w.kc)().ds_use_lib_keys?d[s.library_key]?.team_id:c[ty(s)]?.team_id),l&&(l.team_id=(0,w.kc)().ds_use_lib_keys?d[l.library_key]?.team_id:c[ty(l)]?.team_id),o){let r={};r[s.node_id]=s,a.data.meta.state_components.forEach(e=>{r[e.node_id]=e}),e.dispatch(ro({itemsById:r,fileKey:o.key,libraryKey:(0,p.l)(o.library_key),teamId:o.team_id,type:ev.PW.COMPONENT})),a.data.meta.component_set&&e.dispatch(ro({itemsById:{[a.data.meta.component_set.key]:a.data.meta.component_set},fileKey:o.key,libraryKey:(0,p.l)(o.library_key),teamId:o.team_id,type:ev.PW.STATE_GROUP})),s&&er.Eo.getCanvas(s)}return{component:s,parentStateGroup:a.data.meta.component_set||null}}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");(0,R.t)("component"),console.error(e)}return{component:null,parentStateGroup:null}}}let tI=(0,W.nF)((e,r)=>{tf=r.componentKey,tE=tb(e,r.componentKey,r.callsite)}),tT=null,tv=null,tS=(0,B.fv)();async function tw(e,r){try{let n=e.getState().fileVersion||0,i=(await eA.Z.getLibraryStateGroupFv({stateGroupKey:r,fileVersion:n})).data.meta,a={[i.node_id]:i},o=A.zl.get(en.qp),s=(0,w.kc)().ds_use_lib_keys?o[i.library_key]:e.getState().fileByKey[tS(i)];if(!s)return i;return i.team_id=s.team_id,e.dispatch(ro({itemsById:a,fileKey:s.key,libraryKey:(0,p.l)(s.library_key),teamId:s.team_id,type:ev.PW.STATE_GROUP})),er.Eo.getCanvas(i),i}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");(0,R.t)("state"),console.error(e)}return null}}async function tA(e,r){try{let{style:n,file:i}=(await eA.Z.getLibraryStyleByKey({styleKey:r})).data.meta;return i&&e.dispatch(K.yJ({file:i})),er.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");(0,R.t)("style"),console.error(e)}return null}}let tN=(0,W.nF)((e,r)=>{tT=r.stateGroupKey,tv=tw(e,r.stateGroupKey)});async function tC(e){let{loadingState:r}=e.getState(),n=e.getState().openFile,i=e.getState().fileVersion;if(null==n||null===i)return;let a=(0,eu.Mb)(n.key,i);if(!(0,eh.Sc)(r,a))return;let o=eA.Z.getLibraryPublishedAndMovedComponentsFv({openFileKey:n.key,fileVersion:i});(0,eE.N)(o,{dispatch:e.dispatch},a),eu.Ys.add(a);try{let r=await o;e.dispatch(K.uo({files:r.data.meta.files,subscribeToRealtime:!0})),(0,eu.WY)(n.key);let i=e.getState().fileByKey,a=A.zl.get(en.qp);rd(r.data.meta.state_groups,ev.PW.STATE_GROUP,i,a,e.dispatch),rd(r.data.meta.components,ev.PW.COMPONENT,i,a,e.dispatch),e.dispatch(j.dC({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:r.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,eu._B)()}function tO(e,r,n=!1){let{loadingState:i}=e.getState();return n?rl(r,i,e.getState().fileVersion,e.dispatch):rs(r,i,e.getState().fileVersion,e.dispatch)}let tL=em.M4.Query({fetch:async e=>(await eN.PT.getOrgMigrationStatus({orgId:e})).data.meta,enabled:e=>!!e}),tR=em.M4.Query({fetch:async e=>await tP(T.D.dispatch,e),key:"libraryStats"}),tP=async(e,r)=>{let n=eN.PT.getLibraries({orgId:r,fv:eT.O}),i=function(e){return`LIBRARY${e?"_"+e:""}'_STATS'`}(r);(0,eE.N)(n,{dispatch:e},i);try{let r=await n,i=r&&r.data&&r.data.meta||[],a=0,o=0,s=0,l=0,c=0,d=0,u=0,p=0,m=[],h=[],_=[],g=new Set;for(let e of i)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!g.has(e.team_id)&&(g.add(e.team_id),u++),m.push(e),h.push(e.file),e.thumbnail_url&&_.push({file_key:e.library_file_key,thumbnail_url:e.thumbnail_url}),a+=e.num_components,s+=e.num_styles,l+=e.num_variable_collections,c+=e.num_variables,e.num_state_groups=0,o+=e.num_state_groups,d+=e.num_module_assets,p++);return h.length>0&&e(K.uo({files:h,subscribeToRealtime:!1})),_.length>0&&e(j.t2({libraries:_})),{totalComponents:a,totalStateGroups:o,totalStyles:s,totalVariableCollections:l,totalVariables:c,totalModuleAssets:d,teamsWithLibraries:u,totalLibraries:p,files:m}}catch(e){return ev.wg}},tD=em.M4.Query({fetch:e=>tM(e),key:"libraryInfo"});function tk(e,r={}){let n=(0,em.IT)(tD(e),r),i=(0,a.wA)(),[o]=n;return(0,L.DC)(o,e=>{let r=e.files.map(e=>e.file);r.length>0&&i(K.uo({files:r,subscribeToRealtime:!1})),e.libraries.length>0&&i(j.t2({libraries:e.libraries}))}),n}let tM=(0,eP.D)(async({currentOrgId:e,excludeDrafts:r,subscriptionFileKey:n,includeThumbnails:i})=>{let a=eA.Z.getLibraries({orgId:e,fv:eT.O,subscriptionFileKey:n||void 0,includeThumbnails:i});try{let e=await a,n=e&&e.data&&e.data.meta||[],o=0,s=0,l=0,c=0,d=0,u=0,p=0,m=0,h=[],_=[],g=[],f=new Set;for(let e of n)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!r||e.team_id)&&(e.team_id&&!f.has(e.team_id)&&(f.add(e.team_id),p++),h.push(i?{...e,thumbnail_url:e.file.thumbnail_url}:e),_.push(e.file),e.thumbnail_url&&g.push({file_key:e.library_file_key,thumbnail_url:e.thumbnail_url}),o+=e.num_components,l+=e.num_styles,c+=e.num_variable_collections,d+=e.num_variables,s+=e.num_state_groups,u+=e.num_module_assets,m++);return{totalComponents:o,totalStateGroups:s,totalStyles:l,totalVariableCollections:c,totalVariables:d,totalModuleAssets:u,teamsWithLibraries:p,totalLibraries:m,files:h,libraries:g}}catch(e){return{...ev.wg,libraries:[]}}});function tF(e){let r=e.communityLibrary&&O.oA(e.communityLibrary)?.hubFileId,n=e.library&&O.oA(e.library)?.fileKey;return r??n}function tU(e){return e.communityLibrary&&!!O.oA(e.communityLibrary)?.hubFileId}function tB(e,r){let n=r?.ignoreCommunitySubs??!1,i={};for(let r of e)tU(r)&&n||(i[tF(r)]={design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed});return i}function tV(e,r,n){if(!r||!n)return;let i=_()(r,tF);for(let r of n){let n=tF(r),a=i[n];a&&a.isSubscribed===r.isSubscribed&&a.figJamSubscribed===r.figJamSubscribed&&a.slidesSubscribed===r.slidesSubscribed||tJ(e,n,{design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed},tU(r))}}function tG(e,r,n){tV(e,r?.map(tH),n?.map(tH))}let tH=e=>({...e,slidesSubscribed:e.slidesSubscribed.status===O.tT.Loaded?e.slidesSubscribed.data:void 0}),tW=function(){let e=(0,a.wA)(),r=(0,a.Pj)(),n=(0,X.n1)(),o=(0,X.Ck)(),s=(0,eu.LH)(),l=(0,eb.ol)(),{data:c}=(0,C.Rs)(ep.Lew,{});(0,i.useEffect)(()=>{let r=c?.currentUser?.libraryUserSubscriptions;r&&e(t$({subscriptions:tB(r.map(tH),{ignoreCommunitySubs:!o()})}))},[o,c,e]);let d=(0,S.ZC)(c);(0,i.useEffect)(()=>{if(!d||!c)return;let e=c?.currentUser?.libraryUserSubscriptions;tG(r,d?.currentUser?.libraryUserSubscriptions,e)},[r,c,d]);let u=(0,ea.M)(),{data:p}=(0,C.Rs)(ep.fy7,{group:u},{enabled:null!=u}),m=(0,i.useMemo)(()=>{if(!p||!p.libraryPresetSubscriptionsV2)return;let e=!!l&&(0,e_.w5)(l);return s||e?[]:p.libraryPresetSubscriptionsV2},[s,l,p]);(0,i.useEffect)(()=>{if(!m)return;let r={};for(let e of m)r[e.hubFileId]={design:!0,figjam:!1,slides:!1};e(tZ({subscriptions:r}))},[m,e]);let h=(0,S.ZC)(m);(0,i.useEffect)(()=>{if(!m||!h)return;let e=e=>({communityLibrary:(0,O.Wk)({hubFileId:e.hubFileId}),library:(0,O.Wk)(null),isSubscribed:!0}),n=m.map(e);tV(r,h.map(e),n)},[r,m,h]);let{data:_}=(0,C.Rs)(ep.AXx,{orgId:s},{enabled:!!s});(0,i.useEffect)(()=>{let r=_?.orgLibrarySubscriptions;r&&e(tq({subscriptions:tB(r.map(tH),{ignoreCommunitySubs:!o()})}))},[o,_,e]);let g=(0,S.ZC)(_);(0,i.useEffect)(()=>{if(!g||!_)return;let e=_?.orgLibrarySubscriptions;tG(r,g?.orgLibrarySubscriptions,e)},[r,_,g]);let E=(0,eb.cD)(),y=(0,C.Rs)(ep.f19,{}),{data:b}=(0,i.useMemo)(()=>y.transform(e=>{let r=(e.allTeamRoles||[]).filter(e=>e.team&&!e.team.deletedAt&&(e.team.orgId===s||e.team.id===E)).map(e=>e.team),i=[];if(o()&&!n)for(let r of e.communityQuickstartLibraries??[]){let e=r.communityLibrary?.hubFileId??null;e&&i.push({library:(0,O.Wk)(null),communityLibrary:(0,O.Wk)({hubFileId:e}),isSubscribed:!0})}let a={};for(let e of r){let r=[...e.libraryTeamSubscriptionOverrides.map(tH).filter(e=>o()||!tU(e)),...i],n=f()(r,tF);a[e.id]=n}return a}),[o,s,E,y,n]);(0,i.useEffect)(()=>{if(!b)return;let r={};for(let[e,n]of Object.entries(b)){let i=tB(n,{ignoreCommunitySubs:!o()});r[e]=i}e(tz({fileSubscriptionsByTeamId:r}))},[o,b,e]);let I=(0,S.ZC)(b);(0,i.useEffect)(()=>{I&&b&&tV(r,Object.values(I).flat(),Object.values(b).flat())},[r,b,I])},tK=(0,W.nF)(async e=>{if(await eI.kb.promise,!e.getState().user)return;let r=Promise.resolve(null),n=Promise.resolve(null),i=Promise.resolve(null);try{await Promise.all([r,i,n])}catch(e){}});async function tj(e){if(!e)return 0;try{return(await eN.PT.getNumTeams({orgId:e})).data.meta.num_teams}catch(e){}return 0}let tz=(0,E.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_TEAM"),tY=(0,E.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_FILE"),t$=(0,E.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_USER"),tq=(0,E.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_ORG"),tZ=(0,E.N)("LIBRARY_SUBSCRIPTIONS_INITIALIZE_PRESET"),tX=(0,E.N)("ADD_ASSET_TO_RECENTS"),tJ=(0,eP.D)((e,r,n,i=!1)=>{if(!n||(0,eu.td)(e.getState().library,r))return;let a=(0,Q.d1)(e.getState());if(a){let o=a.editor_type??"design";(!0===n||"design"===o&&n.design||"whiteboard"===o&&n.figjam)&&(e.getState().leftPanel.activeTab===l.xae.ASSETS||e.getState().universalInsertModal.showing?tO(e,r,i):e.dispatch(z.yH({key:(0,eR.yD)(a.key)})))}}),tQ=(0,E.N)("LIBRARY_SUBSCRIPTION_POST_ORG"),t0=(0,W.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(tQ(r)),{libraryOrgSubscription:i,libraryTeamId:a,userInitiated:s}=r,{isCommunityLibrary:l,orgId:c,resourceId:d,subscriptions:u}=i;if(tJ(e,d,u,l),s){if(r.currentSubscription){let e=i.subscriptions.design;!(r.currentSubscription?.design||r.currentSubscription?.figjam)&&e?(0,y.sx)("Team Library File Enabled",{orgId:c,fileKey:d,fileTeamId:a}):(0,y.sx)("Org Library File Disabled",{orgId:c,fileKey:d,fileTeamId:a}),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle",{designSubscribed:i.subscriptions.design,figjamSubscribed:i.subscriptions.figjam,slidesSubscribed:i.subscriptions.slides,subscriptionType:"org",libraryType:l?"community":"file"})}k.Ay.post(`/api/library_org_subscriptions/${d}`,{subscriptions:u,is_community_library:l,org_id:c}).then(()=>{e.dispatch($.c(n)),e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.settings_updated_for",{libraryName:r.libraryName,orgOrWorkspaceName:r.orgName})})),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:i.subscriptions.design,figjamSubscribed:i.subscriptions.figjam,slidesSubscribed:i.subscriptions.slides,subscriptionType:"org",libraryType:l?"community":"file",outcome:"success"})}).catch(r=>{e.dispatch($.r(n)),e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:i.subscriptions.design,figjamSubscribed:i.subscriptions.figjam,slidesSubscribed:i.subscriptions.slides,subscriptionType:"org",libraryType:l?"community":"file",outcome:"error"}),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:d,designSubscribed:u.design,figjamSubscribed:u.figjam,slidesSubscribed:u.slides,isCommunityLibrary:l}})})}});(0,W.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=r,{isCommunityLibrary:o,resourceId:s,subscriptions:l,workspaceId:c}=n,d=k.Ay.post(`/api/library_workspace_subscriptions/${s}`,{subscriptions:l,workspace_id:c,is_community_library:o});n.id?(0,N.WB)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides}}},d):(0,N.WB)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:s,workspaceId:c,isSubscribed:l.design,figJamSubscribed:l.figjam,slidesSubscribed:l.slides,canRead:!0,hubFileId:o?s:null}}},d);try{await d,e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(r){e.dispatch(V.F.enqueue({message:r?.message??(0,x.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,W.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=r,{isCommunityLibrary:o,resourceId:s,workspaceId:l}=n,c=k.Ay.del(`/api/library_workspace_subscriptions/${s}`,{workspace_id:l,is_community_library:o});n.id&&(0,N.WB)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},c);try{await c,e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(r){e.dispatch(V.F.enqueue({message:r?.message??(0,x.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}});let t1=(0,E.N)("LIBRARY_SUBSCRIPTION_POST_TEAM"),t2=(0,W.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(t1(r)),{libraryTeamSubscription:i,userInitiated:a,isCommunityLibrary:s}=r,{file_key:l,subscriptions:c,team_id:d}=i;tJ(e,l,c,s),a&&(s?ew.f.createCommunityLibraryTeamSubscription({libraryHubFileId:l,subscriptions:c,teamId:d}):k.Ay.post(`/api/library_team_subscriptions/${l}`,{subscriptions:c,team_id:d})).then(()=>{e.dispatch($.c(n)),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"team",libraryType:s?"community":"file",outcome:"success"})}).catch(r=>{e.dispatch($.r(n)),e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"team",libraryType:s?"community":"file",outcome:"error"}),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:l,designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,isCommunityLibrary:s}})})}),t3=(0,E.N)("LIBRARY_SUBSCRIPTION_POST_USER"),t6=(0,W.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(t3(r)),{libraryUserSubscription:i,isCommunityLibrary:a,userInitiated:s}=r,{file_key:l,subscriptions:c}=i;tJ(e,l,c),s&&k.Ay.post(`/api/library_user_subscriptions/${l}`,{subscriptions:c,is_community_library:a}).then(()=>{e.dispatch($.c(n)),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"user",libraryType:a?"community":"file",outcome:"success"})}).catch(r=>{e.dispatch($.r(n)),e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),y.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,subscriptionType:"user",libraryType:a?"community":"file",outcome:"error"}),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:l,designSubscribed:c.design,figjamSubscribed:c.figjam,slidesSubscribed:c.slides,isCommunityLibrary:a}})})}),t8=(0,E.N)("LIBRARY_SUBSCRIPTION_POST_FILE"),t5=(0,W.nF)((e,r)=>{let{libraryFileSubscription:n,userInitiated:i,isCommunityLibrary:a,publishedLibrary:s}=r,{file_key:l,library_file_key:c,is_subscribed:d,id:u}=n,p=e.getState().openFile?.key||null;p===l&&tJ(e,c,d,a);let m=e.getState().library.subscriptions.byFile[l];if((!m||!(c in m)||m[c]!==d)&&i){let{optimistId:n}=e.optimisticDispatch(t8(r)),i=a?ew.f.createCommunityLibraryFileSubscription({fileKey:l,libraryHubFileId:c,isSubscribed:d}):k.Ay.post(`/api/library_file_subscriptions/${l}/${c}`,{is_subscribed:d});u?N.WB()?.optimisticallyUpdate({LibraryFileSubscription:{[u]:{isSubscribed:d}}},i):d&&s&&N.WB()?.optimisticallyCreate({LibraryFileSubscription:{[`optimistic-id-${c}`]:{isSubscribed:d,fileKey:l,hubFileId:a?c:null,libraryFileKey:c,canRead:!0,library:{updatedAt:new Date,createdAt:new Date,numComponents:s.num_components,numStateGroups:s.num_state_groups??0,numStyles:s.num_styles,numStylesFill:0,numStylesText:0,numStylesEffect:0,numStylesGrid:0,numVariables:s.num_variables,numVariablesBoolean:0,numVariablesColor:0,numVariablesFloat:0,numVariablesString:0,numVariableSets:s.num_variable_collections,numModuleAssets:s.num_module_assets,fileKey:c,file:{_id:`optimistic-id-${c}`,_name:null,key:c,name:s.library_name,libraryKey:s.library_key,signedThumbnailUrl:s.thumbnail_url,signedThumbnailUrlOverride:null,parentOrgId:null,thumbnailGuid:ev.Nf(s)?s.thumbnail_guid:null},hubFileId:a?c:null,canRead:!0},communityLibrary:null}}},i),i.then(()=>{e.dispatch($.c(n)),a&&y.az.trackDefinedEvent("library_preferences_modal.community_library_file_subscription_toggle.outcome",{isSubscribed:d,fileKey:l,libraryFileKey:c,outcome:"success"})}).catch(r=>{e.dispatch($.r(n)),e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),y.az.trackDefinedEvent("library_preferences_modal.community_library_file_subscription_toggle.outcome",{isSubscribed:d,fileKey:l,libraryFileKey:c,outcome:"error"}),(0,P.$D)(o.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{openFileKey:p,fileKey:l,libraryFileKey:c,isSubscribed:d,isCommunityLibrary:a}})})}}),t7=(e,r)=>{let n=e.getState(),i=n.openFile?.key||null;i&&r.forEach(r=>{r!==i&&e.dispatch(t5({libraryFileSubscription:{file_key:i,library_file_key:r,is_subscribed:!0},userInitiated:!0}))})},t4="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",t9=null,re=(0,W.nF)((e,r)=>{t9={done:0,total:r.total},e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:r.total}),type:t4,icon:G.zX.SPINNER,timeoutOverride:1/0}))}),rt=(0,W.nF)((e,r)=>{t9&&(t9.done+=r.done,e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connecting_fraction",{current:t9.done,total:t9.total}),type:t4,icon:G.zX.SPINNER,timeoutOverride:1/0})))}),rr=(0,W.nF)(e=>{t9=null,e.dispatch(V.F.dequeue({matchType:t4})),e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connected"),type:t4,icon:G.zX.CHECK}))}),rn=(0,W.nF)(e=>{t9=null,e.dispatch(V.F.enqueue({message:(0,x.t)("design_systems.subscriptions.remap_connection_failed"),type:t4,error:!0}))}),ri=(0,W.nF)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch(Z.b({has_inserted_component:!0}))}),ra=(0,W.nF)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch(Z.b({has_opened_libraries_modal:!0}))}),ro=(0,W.nF)((e,r)=>{e.dispatch(j.$I(r)),e.getState().openFile&&e.dispatch(tn())});async function rs(e,r,n,i,a={}){if(null===n)return;let o=(0,eu.Mb)(e,n);if(!(0,eh.Sc)(r,o))return;let s=eA.Z.getLibraryPublishedComponentsFv({key:e,fileVersion:n,includeThumbnail:a.includeThumbnail,includeRealtime:a.subscribeToRealtime});(0,eE.N)(s,{dispatch:i},o),eu.Ys.add(o);try{let e=await s,r=e?.data?.meta?.components||[],n=e?.data?.meta?.state_groups||[],o=e?.data?.meta?.file,l=e?.data?.meta?.library;if(i(K.uo({files:[o],subscribeToRealtime:a.subscribeToRealtime})),l&&i(j.t2({libraries:[l]})),r=r.map(e=>({...e,team_id:o.team_id})),n=n.map(e=>({...e,team_id:o.team_id})),0!==n.length){let e=n.reduce((e,r)=>(e[r.node_id]=r,e),{});i(ro({itemsById:e,fileKey:o.key,libraryKey:(0,p.l)(o.library_key),teamId:o.team_id,type:ev.PW.STATE_GROUP}))}if(0!==r.length){let e=r.reduce((e,r)=>(e[r.node_id]=r,e),{});i(ro({itemsById:e,fileKey:o.key,libraryKey:(0,p.l)(o.library_key),teamId:o.team_id,type:ev.PW.COMPONENT}))}(0,eu.WY)(o.key)}catch(r){console.warn(`Failed to get published components from file ${e}`)}}async function rl(e,r,n,i){if(null===n)return;let a=(0,eu.Mb)(e,n);if(!(0,eh.Sc)(r,a))return;let o=eA.Z.getCommunityLibraryPublishedComponents({hubFileId:e});(0,eE.N)(o,{dispatch:i},a),eu.Ys.add(a);try{let r=await o,n=r?.data?.meta?.components||[],a=r?.data?.meta?.state_groups||[],s=r?.data?.meta?.hub_file,l=r?.data?.meta?.library;if(s&&i((0,H.D3)([s])),l&&i(j.t2({libraries:[l]})),0!==a.length){let e=a.reduce((e,r)=>(e[r.node_id]=r,e),{});i(ro({itemsById:e,fileKey:s.id,libraryKey:(0,U.$)(s.id),teamId:null,type:ev.PW.STATE_GROUP}))}if(0!==n.length){let r=n.reduce((e,r)=>(e[r.node_id]=r,e),{});i(ro({itemsById:r,fileKey:e,libraryKey:(0,U.$)(e),teamId:null,type:ev.PW.COMPONENT}))}(0,eu.WY)(e)}catch(r){console.warn(`Failed to get published components from Community Library ${e}`)}}let rc=(0,B.fv)();function rd(e,r,n,i,a){let o=(e=e.map(e=>({...e,team_id:(0,w.kc)().ds_use_lib_keys?i[e.library_key].team_id:n[rc(e)].team_id}))).reduce((e,r)=>(rc(r) in e?e[rc(r)].push(r):e[rc(r)]=[r],e),{}),s=new Map;for(let r of e){let e=r.library_key;s.has(e)?s.get(e).push(r):s.set(e,[r])}if((0,w.kc)().ds_use_lib_keys)for(let[e,n]of s.entries())a(ro({itemsById:n.reduce((e,r)=>(e[r.node_id]=r,e),{}),fileKey:rc(n[0]),libraryKey:e,teamId:i[e].team_id,type:r}));else for(let[e,i]of Object.entries(o))a(ro({itemsById:i.reduce((e,r)=>(e[r.node_id]=r,e),{}),fileKey:e,libraryKey:i[0].library_key,teamId:n[e].team_id,type:r}))}},876401:(e,r,n)=>{"use strict";n.d(r,{De:()=>G,Sb:()=>U,TS:()=>H,WM:()=>V,ZS:()=>q,df:()=>B,sb:()=>j});var i=n(752795),a=n(675678),o=n(587670),s=n(636149),l=n.n(s),c=n(167249),d=n(776250),u=n(966712),p=n(742808),m=n(717037),h=n(776621),_=n(47506),g=n(939863),f=n(265746),E=n(696808),y=n(934533),b=n(980820),I=n(395281),T=n(632430),v=n(662275),S=n(931828),w=n(974105),A=n(151283),N=n(599280),C=n(642481),O=n(416095),L=n(962155),R=n(973131),P=n(284321),D=n(173454),k=n(656012),M=n(776047),F=n(114721),x=n(765431);let U=(0,c.N)("START_PUBLISH"),B=(0,c.N)("PUBLISH_PROGRESS"),V=(0,c.N)("PUBLISH_REQUEST_FINISHED"),G=(0,c.N)("SAVE_PUBLISH_DESCRIPTION"),H=(0,b.nF)(e=>{e.dispatch(E.Q.dequeue({type:f._.MOVE_COMPONENTS_PROMPT})),(0,_.YQ)({id:"Finished publishing components"}),e.dispatch(V())}),W="library publish SSP";var K=(e=>(e.PublishStart="publish_start",e.CreateSavepoint="create_savepoint",e.GetPresignedPost="get_presigned_post",e.UploadThumbnails="upload_thumbnails",e.UploadParams="upload_params",e.AssetValidation="asset_validation",e.NonS3Error="non_s3_error",e.GenericError="generic_error",e))(K||{});let j=(0,b.nF)((e,{hubFileId:r})=>{let n=e.getState(),i=(0,u.kc)().ds_remove_redux_library_status;if(!i){let r=e=>{for(let r in e={...e})(0,O.HF)(e[r].status)?e[r].status=D.E8.DELETED:e[r].status===D.E8.NEW&&(e[r].status=D.E8.NOT_STAGED);return e},i=r(n.library.local.components),a=r(n.library.local.stateGroups),o=r(n.library.local.styles);e.dispatch(I.I0({local:i,type:D.PW.COMPONENT})),e.dispatch(I.I0({local:a,type:D.PW.STATE_GROUP})),e.dispatch(I.I0({local:o,type:D.PW.STYLE}))}e.dispatch(B({state:D.Qx.NONE})),e.dispatch(q({unpublishAll:i,hubFileId:r}))});async function z(e,r,n,i){let o=performance.now();if(!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let s=e.length,l=0,c=()=>{!function(e,r,n){e.dispatch(B({state:D.Qx.ASSEMBLING_COMPONENTS,progress:r,publishType:n,publishStartMs:Y(e.getState().library.publishProgress)}))}(i,(l+=1)/s,r?D.M$.UNPUBLISH:D.M$.PUBLISH)},u=Object.create(null),_=[],g=[];if(await Promise.all(e.map(async e=>{try{let r=await scheduler.postTask(()=>(0,F.I6)(e,n),{priority:"user-blocking"});if(!r||0===r.length)throw Error("Unable to generate thumbnail");let[i,a]=e.node_id.split(":").map(e=>Number(e));if(isNaN(i))throw Error("Unable to parse sessionId");if(isNaN(a))throw Error("Unable to parse localId");g.push({sessionId:i,localId:a,thumbnail:r}),e.type===D.PW.STYLE&&(u[e.node_id]=JSON.stringify((0,F.fn)(e,n)))}catch(r){(0,h.x1)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),_.push(e.type===D.PW.COMPONENT&&e.containing_frame?.containingStateGroup?.nodeId||e.node_id)}finally{c()}})),0===g.length)return{s3Paths:[],failedThumbnailNodeIds:_,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let f=[];for(;g.length;)f.push(g.splice(0,D.v$));let E=M.b.getThumbnailsBufferPresignedPostUrl(f.length),y=f.map(e=>e.reduce(({buffer:e,offset:r,guids:n},{sessionId:i,localId:a,thumbnail:o})=>(e.set([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,(4278190080&o.byteLength)>>24,(16711680&o.byteLength)>>16,(65280&o.byteLength)>>8,255&o.byteLength],r),r+=12,e.set(o,r),r+=o.byteLength,n.push(`${i}:${a}`),{buffer:e,offset:r,guids:n}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:r})=>e+r.byteLength+12,0)),offset:0,guids:[]})),b=[],I=(await E).data.meta.presigned_posts,T=!1;await Promise.allSettled(I.map(async({url:e,fields:r})=>{let n=y.shift();if(!n){(0,h.$D)(a.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{b.push(await (0,m.E)(a.FigmaTeam.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,r,n.buffer,"application/octet-stream")),(0,p.S3)("publish.thumbnails_buffer.bytes",n.buffer.byteLength)}catch(e){e instanceof m.q&&(T=!0),_.push(...n.guids)}})),T&&(0,h.$D)(a.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let v=performance.now()-o;return(0,d.sx)("Library generate and upload thumbnails",{duration:v}),{s3Paths:b,styleMetaByNodeId:u,failedThumbnailNodeIds:_,uploadDurationMs:v,encounteredNonS3PresignedPostError:T}}function Y(e){return e.state===D.Qx.NONE?((0,h.x1)(W,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function $(e,r,n,i){let a=Y(e);if(a){let e=performance.now()-a;(0,d.sx)(r,{duration:e}),(0,p.S3)(n,e,{error:i})}else(0,h.x1)(W,"Publish start time was null")}let q=(0,b.nF)(async(e,r={})=>{let n,s,c,_,f,E,b;let I=e.getState(),M=r.onPublishSuccess??x.cc,V=r.onPublishProgress??x.UN,K=r.onPublishError??x.tZ;if(I.library.publishProgress.state!==D.Qx.NONE){e.dispatch(H());return}let j=(0,w.d1)(I);if(!j){console.error("library publishChanges: file is null"),K({error:x.jO.NoFile,dispatch:e.dispatch}),e.dispatch(H());return}let q=r.itemsToPublish;if(void 0!==q&&0===q.size){console.error("No items selected to publish"),K({error:x.jO.NoItemsToPublish,dispatch:e.dispatch}),e.dispatch(H());return}let Z=r.unpublishAll||(0,L.aB)(Object.values((0,P.MH)(I)),q)&&(0,L.aB)(Object.values((0,P.dM)(I)),q)&&(0,L.aB)(Object.values((0,P.cM)(I)),q)&&(0,L.aB)(Object.values((0,P.bh)(I)),q)&&(!(0,u.kc)().dse_module_publish||(0,L.aB)(Object.values((0,P.x6)(I)),q));if(!navigator.onLine){K({error:x.jO.Offline,publishType:Z?D.M$.UNPUBLISH:D.M$.PUBLISH,dispatch:e.dispatch}),e.dispatch(H());return}(0,p.Rh)(`${Z?D.M$.UNPUBLISH:D.M$.PUBLISH}.start`),e.dispatch(U({unpublishAll:!!Z})),e.dispatch(S.b({has_published_library_items:!0}));let X=(n,i,a,s)=>{e.dispatch(T.Nf());let l=s?.encounteredNonS3PresignedPostError?"non_s3_error":i;$(e.getState().library.publishProgress,n,`${Z?D.M$.UNPUBLISH:D.M$.PUBLISH}.error.duration`,l);let c=s?.error;(0,h.x1)(W,n,{...r,name:c?.name,message:c?.message,stack:c?.stack},{logToConsole:o.NUh.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==a&&(0,d.sx)("Publish ended",{savepointId:a,hadException:!0}),function(e,r,n,i,a,o,s,l){0===r?function(e,r,n,i){if(r.state===D.Qx.UPLOADING){let e=Y(r);if(e){let i=performance.now(),a=i-e,o=n?{totalDurationMs:a}:{totalDurationMs:a,uploadBuffersDurationMs:i-r.commitUpdatesDurationMs,clientPreWorkDurationMs:r.clientPreWorkDurationMs,createSavePointDurationMs:r.createSavePointDurationMs};for(let[e,n]of((0,d.sx)(`Client perceived ${r.publishType} duration`,o),Object.entries(o))){let i=`${r.publishType}.success.${e}`;(0,p.S3)(i,n)}}else(0,h.x1)(W,"Publish start time was null")}i({publishProgress:r,publishType:n?D.M$.UNPUBLISH:D.M$.PUBLISH,dispatch:e}),e(G(""))}(i,e,n,a):function(e,r,n,i,a,o,s){let l=i?D.M$.UNPUBLISH:D.M$.PUBLISH;if(o&&e(G(o)),s){a({error:x.jO.NonS3PresignedPost,publishType:l,dispatch:e});return}"number"!=typeof n?a({error:x.jO.GenericError,publishType:l,dispatch:e}):($(r,"Partial publish failure",`${l}.partial_error.duration`,"asset_validation"),a({error:x.jO.PartialPublish,publishType:l,dispatch:e,numPublishSkippedDueToError:n}))}(i,e,r,n,o,s,l)}(e.getState().library.publishProgress,s?.numSkippedDueToError??{__tag:"UNKNOWN"},Z,e.dispatch,M,K,r.savepointDescription,s?.encounteredNonS3PresignedPostError),e.dispatch(H()),e.dispatch(v.Ce())},J=performance.now(),Q="slides"===j.editor_type,ee=Q?(0,g.t)("design_systems.publish_actions.savepoint_for_unpublish_slides"):(0,g.t)("design_systems.publish_actions.savepoint_for_unpublish"),et=Q?(0,g.t)("design_systems.publish_actions.savepoint_for_publish_slides"):(0,g.t)("design_systems.publish_actions.savepoint_for_publish");try{n=await (0,R.m)(j.key,Z?ee:et,r.savepointDescription,e.dispatch,!0)}catch(e){X("Unable to create savepoint during library publish","create_savepoint",null,{error:e});return}if(!n){X("Created savepoint is null","create_savepoint",null);return}let er=performance.now()-J;(0,d.sx)("Publish start: savepoint successfully created",{savepointId:n.id});let en=l()(Object.values(I.library.local.components).filter(e=>e.isLocal),e=>(0,O.E2)(e)||D.Nv),{orderedUpdates:ei}=function(e){let r=[],n=e=>{e.assets.length&&r.push(e)},i=e[D.PW.VARIABLE_SET][D.M$.PUBLISH];n({publishType:D.M$.PUBLISH,assetType:D.PW.VARIABLE_SET,assets:i}),n({publishType:D.M$.UNPUBLISH,assetType:D.PW.VARIABLE_SET,assets:e[D.PW.VARIABLE_SET][D.M$.UNPUBLISH]}),n({publishType:D.M$.UNPUBLISH,assetType:D.PW.VARIABLE,assets:e[D.PW.VARIABLE][D.M$.UNPUBLISH]});let a=e[D.PW.STATE_GROUP][D.M$.PUBLISH],o=e[D.PW.COMPONENT][D.M$.UNPUBLISH].filter(e=>null===(0,O.E2)(e));return n({publishType:D.M$.PUBLISH,assetType:D.PW.STATE_GROUP,assets:a}),n({publishType:D.M$.UNPUBLISH,assetType:D.PW.STATE_GROUP,assets:e[D.PW.STATE_GROUP][D.M$.UNPUBLISH]}),n({publishType:D.M$.PUBLISH,assetType:D.PW.COMPONENT,assets:e[D.PW.COMPONENT][D.M$.PUBLISH].filter(e=>!(0,O.E2)(e))}),n({publishType:D.M$.UNPUBLISH,assetType:D.PW.COMPONENT,assets:o}),n({publishType:D.M$.PUBLISH,assetType:D.PW.STYLE,assets:e[D.PW.STYLE][D.M$.PUBLISH]}),n({publishType:D.M$.UNPUBLISH,assetType:D.PW.STYLE,assets:e[D.PW.STYLE][D.M$.UNPUBLISH]}),(0,u.kc)().dse_module_publish&&(n({publishType:D.M$.PUBLISH,assetType:D.PW.MODULE,assets:e[D.PW.MODULE][D.M$.PUBLISH]}),n({publishType:D.M$.UNPUBLISH,assetType:D.PW.MODULE,assets:e[D.PW.MODULE][D.M$.UNPUBLISH]})),{orderedUpdates:r}}((0,L.jx)((0,P.dM)(I),(0,P.MH)(I),(0,P.cM)(I),(0,P.tK)(I),(0,P.bh)(I),(0,P.x6)(I),j,I.teams,{overridePublishPermissions:!!r.hubFileId,moveRemappings:r.moveInformation?.moveRemappings??{},itemsToPublish:q,forcePublish:r.forcePublish,unpublishAll:r.unpublishAll})),ea=ei.reduce((e,{publishType:r,assetType:n,assets:i})=>{let a="";switch(n){case D.PW.COMPONENT:a="numComponentBuffers";break;case D.PW.STATE_GROUP:a="numStateGroupBuffers";break;case D.PW.STYLE:a="numStyleBuffers";break;case D.PW.VARIABLE_SET:a="numVariableSetBuffers";break;case D.PW.MODULE:a="numTemplateBuffers";case D.PW.VARIABLE:}r===D.M$.UNPUBLISH&&(a=`${a}Unpublished`);let o=a;return o in e&&(e[o]=i.length),e},{numComponentBuffers:0,numStateGroupBuffers:0,numStyleBuffers:0,numVariableSetBuffers:0,numTemplateBuffers:0,numComponentBuffersUnpublished:0,numStateGroupBuffersUnpublished:0,numStyleBuffersUnpublished:0,numVariableSetBuffersUnpublished:0,numTemplateBuffersUnpublished:0});(0,d.sx)("Library publish upload",{fileKey:j.key,publishMode:(0,A.z)((0,P.Io)(I)),...ea});let eo=ei.flatMap(e=>e.publishType===D.M$.PUBLISH?e.assets:[]).reduce((e,r)=>r.type===D.PW.VARIABLE||r.type===D.PW.VARIABLE_SET?e:r.type===D.PW.MODULE&&(0,u.kc)().dse_module_publish?e.concat(r):e.concat(r).concat(en[r.node_id]||[]),[]);try{s=await z(eo,Z,I.library.local.thumbnails,e)}catch(e){X("Unable to upload thumbnails during library publish","upload_thumbnails",n.id,{error:e});return}let{failedThumbnailNodeIds:es,s3Paths:el,styleMetaByNodeId:ec,uploadDurationMs:ed,encounteredNonS3PresignedPostError:eu}=s,ep=ei.flatMap(e=>e.assets).length;if(es.length===ep){X("All thumbnails failed to upload"+(eu?" (non-s3 error)":""),"upload_thumbnails",n.id,{numSkippedDueToError:ep,encounteredNonS3PresignedPostError:eu});return}let em=ei.map(({publishType:e,assetType:r,assets:n})=>{let i=n.filter(e=>!es.includes(e.node_id));return i.length>0?{publishType:e,assetType:r,assets:i}:null}).filter(i.isNotNullish);if((0,u.kc)().first_draft_publish_ux){let e=o.XJn.getLocalDesignSystemKits();e.length>1?(0,h.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:e.map(e=>e.name)}):1===e.length&&(b=await (0,N.Hj)(e[0].pageId,e[0].name,{publishType:C.tf.LIBRARY_PUBLISH,localComponents:(0,P.MH)(I),localStateGroups:(0,P.dM)(I),localVariableSets:(0,P.bh)(I)},r.firstDraftVariablesForTheme))}let eh={updates:em.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let r=(0,F.p$)(e);return r||(console.warn("Asset with null nodeId:",e),(0,h.$D)(a.FigmaTeam.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),r}).filter(i.isNotNullish)})),moveRemappings:r.moveInformation?.moveRemappings??{},s3ThumbnailBufferPaths:el,styleMetaByNodeId:ec,clientProtocolVersion:window.mpGlobal.version,themeMetaData:r.themePublishData??{},...b?{kitMetaData:b}:{}};try{let e=(await k.Z.postUploadPublishParams()).data.meta;c=e.url,_=e.fields}catch(e){X("Unable to get presigned post url for params","get_presigned_post",n.id,{error:e});return}try{let e=new TextEncoder;f=await (0,m.E)(a.FigmaTeam.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",c,_,e.encode(JSON.stringify(eh)),"application/json")}catch(r){let e=r instanceof m.q;X("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",n.id,{error:r,encounteredNonS3PresignedPostError:e});return}try{E=(await k.Z.postLibraryPublish({fileKey:j.key,checkpointKey:n.checkpoint_key,paramsPath:f,publishToCommunity:!!r.hubFileId,publishScope:r.publishScope})).data.meta.library_publish_id}catch(e){X("Unable to publish","generic_error",n.id,{error:e});return}try{!function(e,r,n,i,a,o,s,l){let c=performance.now(),d=r?D.M$.UNPUBLISH:D.M$.PUBLISH;e.dispatch(B({state:D.Qx.UPLOADING,publishType:d,progress:0,libraryPublishId:n,savepoint:i,numSkippedPriorToPublish:a,publishStartMs:Y(e.getState().library.publishProgress),commitUpdatesDurationMs:c,clientPreWorkDurationMs:o,createSavePointDurationMs:s})),l({publishType:d,dispatch:e.dispatch,icon:y.zX.SPINNER})}(e,Z,E,n,es.length,ed,er,V)}catch(e){X("Unable to notify publish start","generic_error",n.id,{error:e});return}})},145519:(e,r,n)=>{"use strict";n.d(r,{F6:()=>h,Ho:()=>p,K6:()=>u,PU:()=>g,V9:()=>f,mu:()=>_,sm:()=>d,sp:()=>E,yc:()=>m});var i=n(587670),a=n(167249),o=n(988022),s=n(805286),l=n(301922),c=n(980820);let d=(0,a.N)("MULTIPLAYER_EMOJI_UPDATE_EMOJI_WHEEL_POSITION"),u=(0,a.N)("MULTIPLAYER_EMOJI_CLEAR_STATE"),p=(0,c.nF)(e=>{i.glU.setIsInCursorChat(!1),e.dispatch(u())}),m=(0,a.N)("MULTIPLAYER_EMOJI_START_CHATTING"),h=(0,c.nF)((e,r)=>{let n=e.getState();0>[i.NLJ.HAND,i.NLJ.SELECT,i.NLJ.HAND_SELECT].indexOf(n.mirror.appModel.currentTool)&&i.glU.triggerAction("set-tool-default",null),(0,l.q)().then(e=>{e||(i.glU.setIsInCursorChat(!0),(0,o.ds)("Started chatting",n.openFile?.key,n,{source:r.source}))}),e.dispatch(m(r))}),_=(0,a.N)("MULTIPLAYER_EMOJI_STOP_REACTING"),g=(0,a.N)("MULTIPLAYER_EMOJI_START_REACTING");(0,c.nF)((e,r)=>{s.R9.resetReactions(),e.dispatch(g(r))});let f=(0,a.N)("MULTIPLAYER_EMOJI_TOGGLE_EMOJI_WHEEL"),E=(0,c.nF)((e,r)=>{let n=e.getState();(0,o.ds)("Toggled emoji wheel",n.openFile?.key,n,{wheelType:r.wheelType,...r.source&&{source:r.source}}),e.dispatch(f(r))})},492379:(e,r,n)=>{"use strict";n.d(r,{Jd:()=>w,QC:()=>v,UF:()=>A,aJ:()=>I,kN:()=>T,lT:()=>S});var i=n(776250),a=n(853828),o=n(27087),s=n(881388),l=n(939863),c=n(392592),d=n(980820);n(662275);var u=n(99403),p=n(982957),m=n(964258),h=n(935757),_=n(657193),g=n(668860),f=n(410436),E=n(679892),y=n(738269),b=n(936500);let I="team_join_request_submitted",T="permission_request_submitted",v=(0,d.nF)(async(e,r)=>{let n={team_id:r.teamId,level:r.level,message:r.message},a=e.getState().user,c=e.getState().roles.byTeamId,d=a&&c&&c[r.teamId]?c[r.teamId][a.id]?.level:null,u={level:r.level,team_id:r.teamId,team_type:r.teamOrgAccess,source:r.source,folder_id:r.folderId};r.actionType===T?(0,i.sx)(T,u):(0,i.sx)(I,u),await o.Ay.post("/api/team_role_requests",n).then(({data:n})=>{let i=n.meta;i.status===f.c.APPROVED?e.dispatch((0,m.vr)({teamId:i.team_id,joinedUser:a||void 0})):r.level===g.e6.EDITOR&&d===g.e6.VIEWER?e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),S=(0,d.nF)((e,r)=>{o.Ay.del(`/api/team_role_requests/${r.requestId}`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_withdrawn")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),w=(0,d.nF)((e,r)=>{o.Ay.post(`/api/team_role_requests/${r.requestId}/approve`,{level:`${r.level}`}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_approved"))),e.dispatch(b.bE({role:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})}),A=(0,d.nF)((e,r)=>{o.Ay.post(`/team_role_requests/${r.requestId}/deny`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_denied")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})});(0,d.nF)((e,{orgId:r})=>{o.Ay.put(`/api/orgs/${r}`,{public_plugins_allowed:!0}).then(({data:r})=>{e.dispatch(u.yJ({org:r.meta}))})}),(0,d.nF)((e,{payload:r,successMessage:n})=>{let i=e.getState().currentUserOrgId;o.Ay.put(`/api/orgs/${i}`,r).then(r=>{e.dispatch(u.yJ({org:r.data.meta})),n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,googleSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{google_sso_only:n}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,samlSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{saml_sso_only:n}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,attribute:n})=>{o.Ay.put(`/api/orgs/${r}`,{featured_scim_metadata:n}).then(r=>{e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{onFailure:r,onSuccess:n,orgId:i,timeoutDurationInSecs:a})=>{o.Ay.put(`/api/orgs/${i}`,{idle_timeout_duration_in_secs:a}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(u.yJ({org:r.data.meta})),n()}).catch(n=>{r(),e.dispatch(s.s.error((0,l.Jv)(n)||(0,l.t)("org_actions.an_error_occurred")))})}),(0,d.nF)((e,{orgId:r,ipAllowlistEnabled:n,ipAllowlistRanges:i,onSuccess:a})=>o.Ay.put(`/api/orgs/${r}/ip_allowlist_ranges`,{ip_ranges:n?i:void 0,ip_allowlist_enabled:n}).then(i=>{let o={...e.getState().orgById[r].shared_org_license_group_settings,ip_allowlist:n};e.dispatch(u.F6({id:r,shared_org_license_group_settings:o})),e.dispatch(s.s.flash("Updated IP allowlist settings")),a()}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})),(0,d.nF)((e,{orgId:r})=>{o.Ay.post(`/api/org/${r}/deletion_request`).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.deletion_request_submitted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{let n=r.successMessage,i=r.autogenPasswordControl,o=r.settingsId,d=E.Eh.apiAutogenControls({orgId:r.orgId,autogen_password_controls:i});d.then(()=>{n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}),o?(0,a.WB)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[o]:{autogenPasswordControls:i}}},d):(0,a.WB)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${r.orgId}`]:{autogenPasswordControls:i,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:r.orgId}}},d)}),(0,d.nF)((e,r)=>{o.Ay.post(`/api/org/${r.orgId}/delete_org_users`,{org_user_ids:r.orgUserIds}).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.user_data_deleted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{(0,_.yP)(e.getState(),r.selectedView)?((0,h.nt)(r.orgId),(0,i.sx)("file-browser-hydrate",{location:"selectViewAndLoadItsResources"}),(0,h._X)("orgSelectViewAndLoadItsResources").then(n=>{e.dispatch(p.cL()),e.dispatch(y.Qv(n.data.meta)),e.dispatch(y.$T(r.selectedView))})):(r.actionsIfNotHydrating&&r.actionsIfNotHydrating.forEach(e.dispatch),e.dispatch(y.$T(r.selectedView)))}),(0,d.nF)((e,{orgId:r,slidesDisabled:n,successMessage:i})=>{E.Eh.putToggleSlidesDisabled({orgId:r,slidesDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{e.dispatch(u.F6({id:r,is_slides_disabled:n})),i&&e.dispatch(s.s.flash(i))})})},783162:(e,r,n)=>{"use strict";n.d(r,{hZ:()=>m,wc:()=>u,yH:()=>p});var i=n(167249),a=n(27087),o=n(881388),s=n(939863),l=n(392592),c=n(980820),d=n(662275);(0,c.nF)((e,r)=>{let{idpUser:n}=r,i=e.getState();a.Ay.put(`/api/org_invites/${n.id}`,{org_id:i.currentUserOrgId,account_type:n.account_type}).then(({data:r})=>{e.dispatch(m([r.meta])),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_update_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_update_error");e.dispatch(o.s.flash(n))})}),(0,c.nF)((e,r)=>{let n=e.getState(),{emails:i,accountType:o,isResentInvite:c,licenseGroupId:p,workspaceId:h}=r;e.dispatch(u({creating:!0})),a.Ay.post("/api/org_invites",{org_id:n.currentUserOrgId,emails:i,account_type:o,license_group_id:p,workspace_id:h}).then(({data:r})=>{let n=r.meta;e.dispatch(m(n)),e.dispatch(u({creating:!1})),e.dispatch(d.Lo());let a=(0,s.t)("org_invite.invite_resent");if(!c){let e=(0,s.t)("org_invite.new_members_message",{numInvites:n.length}),r=i.length-n.length,o=(0,s.t)("org_invite.existing_members_message",{numExisting:r});n.length>0?(a=e,r>0&&(a=[a,o].join(" "))):a=o}e.dispatch(l.F.enqueue({message:a}))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_creation_error");e.dispatch(u({creating:!1})),e.dispatch(l.F.enqueue({message:n,error:!0}))})}),(0,c.nF)((e,r)=>{let{idpUser:n}=r,i=e.getState();a.Ay.del(`/api/org_invites/${n.id}`,{org_id:i.currentUserOrgId}).then(r=>{e.dispatch(p({org_invite_id:n.id})),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_deletion_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_deletion_error");e.dispatch(o.s.flash(n))})});let u=(0,i.N)("IS_CREATING_ORG_INVITES"),p=(0,i.N)("DELETE_ORG_INVITE"),m=(0,i.N)("SET_ORG_INVITES")},731723:(e,r,n)=>{"use strict";n.d(r,{E:()=>l,hZ:()=>c});var i=n(167249),a=n(881388),o=n(980820),s=n(210397);let l=(0,i.N)("ORG_SAML_CONFIG_GET");(0,o.nF)(e=>{let r=e.getState().currentUserOrgId;s.P.getOrgSamlConfig({orgId:r}).then(r=>{e.dispatch(c({orgSamlConfig:r.data.meta}))}).catch(r=>{e.dispatch(a.s.flash(r.data?.message||"An error occurred while fetching org saml config.",5e3)),console.error(r)}),e.dispatch(l())});let c=(0,i.N)("ORG_SAML_CONFIG_SET")},377090:(e,r,n)=>{"use strict";n.d(r,{E:()=>y,GR:()=>v,Lx:()=>b,MT:()=>I,hZ:()=>T}),n(411855),n(188507);var i=n(88823),a=n.n(i),o=n(167249),s=n(27087),l=n(881388),c=n(939863),d=n(980820),u=n(902957),p=n(964258),m=n(937294),h=n(320741),_=n(679892),g=n(56342),f=n(182976);(0,d.nF)(async(e,r)=>{let n=r.team.id;try{let i=(await s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess})).data.meta;e.dispatch(T({teams:[i]}))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}}),(0,d.nF)(async(e,r)=>{let n={};if(r.teams.forEach(e=>{let r=e.workspace_id;r&&(r in n||(n[r]=[]),n[r].push(e.id))}),Object.keys(n).length)try{let r=Object.keys(n).map(e=>{let r=n[e];return s.Ay.del(`/api/workspace/${e}/teams`,{team_ids:r})}),i=await Promise.all(r),a=[].concat(...i.map(e=>e.data.meta));e.dispatch(T({teams:a})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_unassigned",{numTeams:a.length})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.teams.map(e=>e.id),i=r.workspaceId;try{let a=(await s.Ay.post(`/api/workspace/${i}/teams`,{team_ids:n})).data.meta;e.dispatch(T({teams:a})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:a.length,workspaceName:r.workspaceName})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.workspaceId;e.dispatch(b("loading"));try{let r=(await g.u.getTeams({includeSecretTeams:!0,workspaceId:n})).data.meta;e.dispatch(T({teams:r})),e.dispatch(b("loaded"))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(b("errors"))}}),(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,i=e.getState().user,a=r.teamIds,o={team_ids:a};r.level&&(o.level=r.level);let d=(0,m.n1)(a);e.dispatch(f.Cx({key:d})),s.Ay.post(`/api/orgs/${n}/teams/join`,o).then(()=>{e.dispatch((0,p.UM)({teamIds:a,joinedUser:i||void 0,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(f.of({key:d}))})});let E=(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,i=e.getState().user,a=r.teamId,o={team_ids:[a]};r.level&&(o.level=r.level);let d=(0,m.p9)(a);e.dispatch(f.Cx({key:d})),s.Ay.post(`/api/orgs/${n}/teams/join`,o).then(()=>{e.dispatch((0,p.vr)({teamId:a,joinedUser:i||void 0,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(f.of({key:d}))})});(0,d.nF)((e,r,{loadingKey:n})=>{let i=e.getState().currentUserOrgId,{teamId:a,disableFlashError:o}=r,s=_.Eh.getTeam({orgId:i,teamId:a});(0,h.N)(s,e,n),s.then(r=>{let n=r.data.meta;e.dispatch(u.yJ({team:n,userInitiated:!1}))}).catch(r=>{o||e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`);let y=(0,o.N)("ORG_FETCH_DISCOVERABLE_TEAMS");(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,{includeProjectCount:i,includeMemberCount:a,includeTopMembers:o,includeSecretTeams:s}=r||{};_.Eh.getTeams({orgId:n,includeMemberCount:a,includeProjectCount:i,includeTopMembers:o,includeSecretTeams:s}).then(r=>{let n=r.data.meta;e.dispatch(T({teams:n}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))}),e.dispatch(y(r))});let b=(0,o.N)("SET_ORG_TEAMS_STATUS"),I=(0,o.N)("RESET_ORG_TEAMS"),T=(0,o.N)("ORGS_SET_DISCOVERABLE_TEAMS");function v(e,r,n){return a()(()=>e(E({teamId:r,level:n})),500,{leading:!0,trailing:!1})}},193360:(e,r,n)=>{"use strict";n.d(r,{$V:()=>b,AW:()=>I,IJ:()=>S,Pg:()=>A,bu:()=>v,cN:()=>w,hZ:()=>E,lk:()=>N,uo:()=>T,yJ:()=>y});var i=n(167249),a=n(966712),o=n(27087),s=n(881388),l=n(939863),c=n(123026),d=n(392592),u=n(980820),p=n(750293),m=n(336599),h=n(320741),_=n(379791),g=n(679892),f=n(404717);let E=c.hG,y=(0,u.MM)("ORG_USER_PUT",async(e,r,{optimistId:n})=>{if(r.userInitiated)try{let i=await _.G.updateOrgUser({id:r.orgUser.id,changes:{description:r.orgUser.description}});e.dispatch(f.c(n)),e.dispatch(y({orgUser:i.data.meta,userInitiated:!1}))}catch(r){e.dispatch(f.r(n)),e.dispatch(s.s.error(r.data?.message||(0,l.t)("org_user_actions.an_error_occurred")))}});(0,u.nF)(async(e,r)=>{try{let n={...!1===r.showUserOnboarding&&{show_figjam_user_onboarding:!1},...r.shownPreLaunchAdminOnboarding&&{has_shown_figjam_admin_onboarding:!0},...r.shownPostLaunchAdminOnboarding&&{has_shown_figjam_admin_launch_onboarding:!0}},i=await _.G.updateOrgUser({id:r.orgUserId,changes:n});e.dispatch(y({orgUser:i.data.meta,userInitiated:!1}))}catch(r){e.dispatch(s.s.error(r.data?.message||(0,l.t)("org_user_actions.an_error_occurred_closing_onboarding")))}});let b=(0,u.nF)(async(e,r)=>{try{(0,a.kc)().edit_action_vr?await _.G.requestOrgAccountTypeRequest({org_id:r.orgId,entry_point:r.entryPoint,message:r.message,admin_ids:r.adminIds,editor_type:r.licenseType,billable_product_key:r.seatTypeKey,file_key:r.fileKey}):await o.Ay.put(`/api/org_account_type_request/${r.orgUserId}`,{entry_point:r.entryPoint,message:r.message,admin_ids:r.adminIds,editor_type:r.licenseType,billable_product_key:r.seatTypeKey,file_key:r.fileKey});let n=r.entryPoint===p.PE.CreateFileProjectView?(0,l.t)("org_user_actions.user_upgrade_request_submitted"):(0,l.t)("org_user_actions.upgrade_request_sent");r.suppressVisualBell||e.dispatch(d.F.enqueue({message:n,type:"upgrade-request-sent"}))}catch(n){console.error(n),e.dispatch(s.s.error(n.data?.message||(0,l.t)("org_user_actions.an_error_occurred_requesting_account_type"))),r.onError?.()}}),I=(0,u.nF)(async(e,r)=>{try{await o.Ay.del(`/api/org_user/${r.orgId}`),e.dispatch(d.F.enqueue({type:"org_guest_leave",message:(0,l.t)("org_user_actions.you_successfully_left_organization",{orgName:r.orgName})}))}catch(n){console.error(n),e.dispatch(s.s.error(n.data?.message||(0,l.t)("org_user_actions.an_error_occurred_leaving_organization",{orgName:r.orgName})))}}),T=(0,u.MM)("ORG_USER_BATCH_UPDATE_ORG_USERS",async(e,r,{optimistId:n})=>{let i,a;let o=e.getState();if(r.lastUpdateTimestampOverride)i=r.lastUpdateTimestampOverride,a=r.lastUpdateTimestampOverride;else{let e=Object.values(o.orgUsersByOrgId[r.orgId]).filter(e=>r.params.org_user_ids.includes(e.id));if(0===e.length)return;if(a=new Date(Math.max(...e.map(e=>+new Date(e.updated_at)))).toISOString(),void 0!==r.params.license_group_id){let r=e.map(e=>e.license_group_member?.updated_at).filter(Boolean);i=r.length>0?new Date(Math.max(...r.map(e=>+new Date(e)))).toISOString():null}}try{let o=(await _.G.updateOrgUsers({orgId:r.orgId,...r.params,latest_ou_update:a,latest_lg_member_update:i,showing_billing_groups:!0})).data.meta;e.dispatch(f.c(n)),e.dispatch(E({orgUsers:o,orgId:r.orgId})),r.successCallback&&r.successCallback()}catch(r){console.error("Batch Update Failed",r),e.dispatch(f.r(n)),e.dispatch(s.s.error(r.data?.message||(0,l.t)("org_user_actions.an_error_occurred_updating_org_users")))}}),v=(0,i.N)("ORG_USER_BATCH_DELETE_ORG_USERS"),S=(0,u.nF)(async(e,r)=>{if(e.dispatch(v(r)),r.userInitiated)try{await o.Ay.del(`/api/orgs/${r.orgId}/org_users`,r.params);let n=r.params.org_user_ids.length,i=(0,l.t)("org_user_actions.user_has_been_removed_from_organization",{deletedOrgUserCount:n});e.dispatch(s.s.flash(i))}catch(r){e.dispatch(s.s.error(r.data?.message||(0,l.t)("org_user_actions.an_error_occurred")));return}}),w=({orgId:e})=>`ORG_USER_GET_ADMINS_${e}`,A=(0,u.nF)(async(e,{orgId:r},{loadingKey:n})=>{let i=e.getState();if(!m.Sc(i.loadingState,n))return;let a=g.Eh.getAdmins({includeLicenseAdmins:!0,orgId:r});(0,h.N)(a,e,n);try{let n=await a;e.dispatch(E({orgUsers:n.data.meta,orgId:r}))}catch(r){e.dispatch(s.s.error(r.message||(0,l.t)("org_user_actions.an_error_occurred_fetching_org_admins")))}},w),N=(0,i.N)("LOAD_ORG_DRAFTS_OWNERS");(0,u.nF)(async(e,r,{loadingKey:n})=>{let i=g.Eh.getUser({orgId:r.orgId,userId:r.userId});(0,h.N)(i,e,n);try{let n=[(await i).data.meta];return e.dispatch(E({orgUsers:n,orgId:r.orgId})),n.find(e=>e.user_id===r.userId)||null}catch(r){return console.error(r),e.dispatch(s.s.error(r.message||(0,l.t)("org_user_actions.an_error_occurred_fetching_org_users"))),null}},e=>`ORG_USER_GET_BY_USER_ID_${e.orgId}_${e.userId}`)},995852:(e,r,n)=>{"use strict";n.d(r,{$h:()=>L,Ay:()=>N,Az:()=>B,Bq:()=>K,Ef:()=>R,I2:()=>F,Je:()=>x,Lj:()=>C,Lo:()=>G,M2:()=>U,MN:()=>v,Mv:()=>W,Qe:()=>P,Qg:()=>k,Ts:()=>H,WG:()=>S,WX:()=>z,Wc:()=>D,XS:()=>A,bJ:()=>O,eK:()=>T,i:()=>w,js:()=>V,pv:()=>j,yy:()=>M});var i=n(167249),a=n(181912),o=n(966712),s=n(988261),l=n(27087),c=n(881388),d=n(939863),u=n(738269),p=n(243987),m=n(707465),h=n(622139),_=n(637590),g=n(668526),f=n(980820),E=n(507877),y=n(662275),b=n(902957),I=n(114961);(0,f.nF)((e,{teamId:r,showBreadcrumbs:n,onCloseOrComplete:i})=>{e.dispatch(u.$T({view:"eduReview",teamId:r,showBreadcrumbs:n,onCloseOrComplete:i})),e.dispatch(G({billingPeriod:h.tY.STUDENT}))});let T=(0,i.N)("PAYMENT_RESTORE_SAVED_CART"),v=(0,i.N)("PAYMENT_SET_CURRENCY"),S=(0,i.N)("PAYMENT_SET_TOKEN"),w=(0,i.N)("PAYMENT_SET_TAXES"),A=(0,i.N)("PAYMENT_SET_PROMO"),N=(0,f.nF)((e,r)=>{r.promo||(0,s._H)(),e.dispatch(A(r))}),C=(0,i.N)("PAYMENT_SET_SUBMIT_PUT_ANNUAL_QUANTITY_PENDING"),O=(0,i.N)("PAYMENT_PUT_ANNUAL_QUANTITY");(0,f.nF)((e,r)=>{let{teamId:n,annualQuantity:i,annualWhiteboardQuantity:a}=r;l.Ay.put(`/api/subscriptions-2018-11-08/team/${n}`,{annual_quantity:i,annual_whiteboard_quantity:a||0}).then(()=>{e.dispatch(I.Be({teamId:n})),e.dispatch(y.Ce()),e.dispatch(C({submitPending:!1})),e.dispatch(c.s.flash((0,d.t)("flash.updated_annual_seats")))}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(C({submitPending:!1}))}),e.dispatch(O())});let L=(0,i.N)("PAYMENT_SET_VAT_GST_ID"),R=(0,i.N)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),P=(0,i.N)("PAYMENT_MAKE_STUDENT_TEAM");(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user?.id,a=(0,o.kc)().ps_benchmark;l.Ay.put(`/api/teams/${r.teamId}/student_team`,{student_team:!0}).then(()=>{a&&i?e.dispatch(E._l({workspace:{userId:i,teamId:r.teamId,orgId:null},view:{view:"allProjects"}})):e.dispatch(u.$T({view:"team",teamId:r.teamId})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_upgraded_to_an_education_team"))),e.dispatch(F({submitPending:!1})),r.onCloseOrComplete?.()}).catch(r=>{(0,p.UE)(r,e.dispatch),e.dispatch(F({submitPending:!1}))}),e.dispatch(P())});let D=(0,f.nF)((e,{teamId:r})=>{let n=e.getState().teams[r];n.student_team?l.Ay.put(`/api/teams/${r}/student_team`,{student_team:!1}).then(()=>{e.dispatch(I.Be({teamId:r})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_downgraded_to_a_starter_team")))}).catch(r=>(0,p.UE)(r,e.dispatch)):l.Ay.del(`/api/subscriptions-2018-11-08/team/${r}`).then(({data:i})=>{let o=i.meta&&i.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(I.Be({teamId:r}));let{annual_subscription:s,monthly_subscription:l}=e.getState().teamBilling.summary,u=s?.quantity?s.current_period_end:null,p=l?.quantity?l.current_period_end:null,m=u&&p?(0,a.A)(u).isAfter((0,a.A)(p))?u:p:u||p;e.dispatch(c.s.flash(m?(0,d.t)("flash.team_will_become_free_starter_team_on_date",{teamName:n.name,cancelDate:(0,a.A)(m).toDate()}):(0,d.t)("flash.team_will_be_downgraded_at_the_end_of_the_current_subscription_period",{teamName:n.name}),8e3))}).catch(r=>(0,p.UE)(r,e.dispatch))}),k=(0,i.N)("PAYMENT_SHOW_ERROR");(0,f.nF)((e,{teamId:r})=>{let n=e.getState(),i=n.user?.id,a=(0,o.kc)().ps_benchmark,s={annual_quantity:n.payment.numDesignEditors||0,annual_whiteboard_quantity:n.payment.numWhiteboardEditors||0};l.Ay.put(`/api/subscriptions-2018-11-08/team/${r}`,s).then(({data:n})=>{let o=n.meta&&n.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(I.Be({teamId:r})),a&&i?e.dispatch(E._l({workspace:{userId:i,teamId:r,orgId:null},view:{view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:g.I.BILLING}})):e.dispatch(u.$T({view:"team",teamId:r,teamViewTab:g.A.BILLING})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_added_an_annual_plan"))),e.dispatch(F({submitPending:!1}))}).catch(r=>{e.dispatch(F({submitPending:!1})),(0,p.UE)(r,e.dispatch)})});let M=(0,i.N)("PAYMENT_SET_COMPANY_DETAILS"),F=(0,i.N)("PAYMENT_SET_SUBMIT_PENDING"),x=(0,i.N)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),U=(0,i.N)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),B=(0,i.N)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),V=(0,i.N)("PAYMENT_SET_NUM_EDITORS"),G=(0,i.N)("PAYMENT_SET_BILLING_PERIOD"),H=(0,i.N)("PAYMENT_INIT"),W=(0,i.N)("PAYMENT_START_ORG_UPGRADE_FLOW"),K=(0,f.nF)((e,r)=>{let{openInNewTab:n,newTeamProps:i,upsellSource:a}=r;if(n){let r=e.getState(),n=new URL((0,m.Np)(r,{view:"orgSelfServe",upsellSource:a}),document.baseURI).href;e.dispatch(E.V3({url:n}))}else e.dispatch(u.$T({view:"orgSelfServe",newTeamProps:i,upsellSource:a}));e.dispatch(W({currency:r.currency}))}),j=(0,i.N)("PAYMENT_START_PRO_UPGRADE_FLOW"),z=(0,f.nF)((e,r)=>{let{teamId:n,billingPeriod:i,onBillingCompleteRedirectInfo:a}=r,o={view:"teamUpgrade",teamFlowType:_.SC.UPGRADE_EXISTING_TEAM,teamId:n,paymentStep:h.tn.CHOOSE_PLAN,billingPeriod:i,planType:_.Sc.TEAM,...a?{searchParams:{onCompleteRedirectFileKey:a.fileKey,onCompleteRedirectNodeId:a.nodeId}}:{}};if(r.openInNewTab){let r=e.getState(),n=new URL((0,m.Np)(r,o),document.baseURI).href;e.dispatch(E.V3({url:n}))}else o.previousView=r.selectedView,e.dispatch(u.$T(o));e.dispatch(j({newTeam:r.newTeam,currency:r.currency}))})},986270:(e,r,n)=>{"use strict";n.d(r,{F9:()=>I,Hx:()=>C,KA:()=>E,Kq:()=>x,Ks:()=>S,QN:()=>k,RH:()=>M,TN:()=>V,Vg:()=>R,Vu:()=>w,WR:()=>T,ay:()=>y,cu:()=>O,f0:()=>L,fR:()=>B,gU:()=>D,jS:()=>v,jX:()=>P,lD:()=>F,nM:()=>A,pj:()=>N,v8:()=>b});var i=n(167249),a=n(157663),o=n(27087),s=n(939863),l=n(667231),c=n(980820),d=n(941381),u=n(233675),p=n(697551),m=n(72274),h=n(215822),_=n(331626),g=n(555328),f=n(809073);let E=(0,i.N)("SET_RECENT_WHITEBOARD_TOOLS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.WHITEBOARD_TOOL);e.dispatch(E({storeInRecentsKey:r.storeInRecentsKey,recentWhiteboardTools:n}))});let y=(0,i.N)("ADD_WHITEBOARD_TOOL_TO_RECENTS"),b=(0,i.N)("SET_RECENT_FACE_STAMPS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.FACE_STAMP);e.dispatch(b({storeInRecentsKey:r.storeInRecentsKey,recentFaceStamps:n}))});let I=(0,i.N)("ADD_FACE_STAMP_TO_RECENTS"),T=(0,i.N)("SYNC_RECENT_PLUGINS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.PLUGIN);e.dispatch(S({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let i=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:i})),e.dispatch(T(r))});let v=(0,i.N)("SYNC_RECENT_WIDGETS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.WIDGET);e.dispatch(w({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let i=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:i})),e.dispatch(v(r))});let S=(0,i.N)("SET_RECENT_PLUGINS"),w=(0,i.N)("SET_RECENT_WIDGETS"),A=l.nM,N=l.pj,C=l.Hx,O=(0,i.N)("ADD_FETCHED_PLUGIN_VERSION"),L=(0,i.N)("ADD_FETCHED_WIDGET_VERSION"),R=(0,c.nF)((e,r)=>{V(e,r)}),P=(0,i.N)("ADD_PLUGIN_TO_RECENTS"),D=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:[r.id]})),r.skipPluginRun||(U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[r.id],e.getState().recentlyUsed.plugins[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(P(r)))}),k=(0,i.N)("ADD_WIDGETS_TO_RECENTS"),M=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:[r.id]})),U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[r.id],e.getState().recentlyUsed.widgets[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(k(r))}),F=(0,i.N)("REMOVE_RECENTLY_USED_PLUGIN"),x=(0,i.N)("REMOVE_RECENTLY_USED_WIDGET"),U=(e,r,n,i,l,c,d)=>{if(i&&i.current_user_has_run||!r||(0,m.Vi)(e)||c)return;let p=l.find(r=>r.id===e);p?.run_by_user_ids?.includes(r)||o.Ay.post(`/api/plugin_runs/${e}`,{org_id:n}).then(({data:r})=>{d(u.R({resourceId:e,userFirstRanAt:r.meta.created_at}))}).catch(e=>{a.k.error((0,s.Jv)(e))})},B=(e,r)=>n=>{let i=(0,h.uF)(e),a=(i.manifest?.editorType??[]).map(e=>"figma"===e?f.$A.Design:f.$A.FigJam),o=(0,g.xQ)(e)?M:D;a.forEach(a=>n(o({storeInRecentsKey:a,id:e.id,version:i.id,currentUserId:r})))};function V(e,r){let n={},i=({id:i,version:a,status:o})=>{let s=r.resourceType===g.bD.PLUGIN?O:L;return a&&(n[i]=a),e.dispatch(s({id:i,version:a,status:o}))},a=[];if(r.resourceIds.forEach(o=>{let s=r.resourceType===g.bD.PLUGIN?e.getState().installedPluginVersions.plugins[o]:void 0;if(s){i({id:o,version:s,status:f.Lx.FETCHED});return}let l=r.resourceType===g.bD.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[o]:e.getState().recentlyUsed.widgets.fetchedResources[o];l&&l.status!==f.Lx.NOT_FETCHED&&l.version?l.version&&(n[o]=l.version):a.push(o)}),!a.length)return Promise.resolve(n);a.forEach(e=>{i({id:e,status:f.Lx.FETCHING})});let s={ids:a,org_id:e.getState().currentUserOrgId,include_pending:!0};return o.Ay.post(`/api/${(0,p.n)(r.resourceType)}/batch`,s).then(({data:r})=>(e.dispatch(d.Qi({publishedPlugins:r.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),a.forEach(e=>{let n;let a=r.meta.find(r=>r.id===e);a&&(n=(0,_.ul)(a)),i({id:e,version:n,status:f.Lx.FETCHED})}),n)).catch(()=>(a.forEach(e=>{i({id:e,status:f.Lx.NOT_FETCHED})}),{}))}},750293:(e,r,n)=>{"use strict";n.d(r,{PE:()=>o,Wc:()=>a,tc:()=>i});var i=(e=>(e.EDIT_FILE="edit_file_button",e.DOWNGRADE_EMAIL="downgrade_email",e.SHARE_DRAFTS="share_drafts",e.RESTRICTED_DRAFT_SHARED_EMAIL="restricted_draft_shared_email",e.CREATE_FILE_PROJECT_VIEW="create-file-project-view",e))(i||{}),a=(e=>(e.CREATE_FILE_PROJECT_VIEW="create-file-project-view",e.DEPRECATED_VR_SHARE_MODAL="vr_share_modal",e))(a||{}),o=(e=>(e.Teams="teams",e.CreateBranch="create-branch",e.Settings="settings",e.CreateFile="create-file",e.CreateFileProjectView="create-file-project-view",e.FileMoveUpsell="file-move-upsell",e.ViewerRestrictedDraftCopiedLink="viewer-restricted-draft-copied-link",e.DEPRECATED_RequestToEditNudge="request-to-edit-nudge",e.DEPRECATED_Plugin="plugin",e.DEPRECATED_RequestToEdit="request-to-edit",e.DEPRECATED_Drafts="drafts",e.DEPRECATED_Recents="recents",e))(o||{}),s=(e=>(e.DevMode="dev_mode",e.BlockingModal="dev_mode_blocking_modal",e.DowngradeEmail="dev_mode_downgrade_email",e.Inspection="dev_mode_inspection",e.Navigation="dev_mode_navigation",e.TrackChanges="dev_mode_track_changes",e.QuickHandoff="dev_mode_quick_handoff",e.Plugin="dev_mode_plugin",e.SuperModal="dev_mode_super_modal",e.BetaOver="dev_mode_beta_over",e.TopBanner="dev_mode_top_banner",e))(s||{})},650769:(e,r,n)=>{"use strict";n.d(r,{MV:()=>E,N:()=>g,Xk:()=>u,cq:()=>m,hh:()=>_,lX:()=>f,q0:()=>h,zT:()=>y,zU:()=>p});var i=n(587670),a=n(167249),o=n(686759),s=n(286640),l=n(980820),c=n(707465),d=n(442617);let u="seen_try_onboarding",p=(0,a.N)("SET_WORKSHOP_USER_NAME"),m=(0,l.nF)((e,r)=>{let n=r.name.trim().substring(0,170),a=e.getState(),o="fullscreen"===a.selectedView.view&&a.selectedView.workshopModeInfo;if(o)i.h3O.setName(n),(0,d.Vv)(o.id,n),e.dispatch(p(r))}),h=(0,a.N)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),_=(0,a.N)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),g=(0,a.N)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED");(0,l.nF)(e=>{(0,s.DN)().set(u,!0),e.dispatch(g())});let f=(0,a.N)("SET_WORKSHOP_MODE_UNTIL"),E=(0,a.N)("CLEAR_TRY_PLUGIN"),y=(0,l.nF)((e,r)=>{let n=e.getState();return(0,o.Dk)((0,c.xS)(n,r))})},906899:(e,r,n)=>{"use strict";n.d(r,{Ev:()=>g,FL:()=>_,nH:()=>E,rk:()=>f,sw:()=>m});var i=n(752795),a=n(167249),o=n(966712),s=n(374626),l=n(154483),c=n(980820),d=n(453681),u=n(754168),p=n(944682);let m=(0,a.N)("FULLSCREEN_HIDE_STYLE_PREVIEW");(0,c.nF)(e=>{let r=e.getState().stylePreviewShown;r.isShown&&!r.isCreating&&e.dispatch(m())}),(0,c.nF)((e,r)=>{let{rowTop:n,rowLeft:i,styleType:a,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}=r;e.dispatch(_({rowTop:n,rowLeft:i,styleType:a,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}))});let h=(0,l.fv)(),_=(0,a.N)("SHOW_CREATE_STYLE_PREVIEW"),g=(0,a.N)("FULLSCREEN_SHOW_STYLE_PREVIEW"),f=(0,c.nF)((e,r)=>{let n=h(r.style),a=s.zl.get(d.qp);((0,o.kc)().ds_use_lib_keys?(0,i.isNotNullish)(a[r.style.library_key]):null!=e.getState().fileByKey[n])||u.S.getFiles({fileKey:n}).then(r=>e.dispatch(p.yJ({file:r.data.meta}))),e.dispatch(g(r))}),E=(0,a.N)("STYLE_FILE_PUT_STYLE_SET");(0,a.N)("STYLE_FILE_GET_STYLE_SET")},902957:(e,r,n)=>{"use strict";n.d(r,{$I:()=>O,$V:()=>E,$w:()=>N,Jt:()=>D,TI:()=>I,WC:()=>T,_E:()=>f,aB:()=>w,bE:()=>P,bQ:()=>A,ii:()=>y,mw:()=>b,n9:()=>S,r1:()=>v,uo:()=>C,yH:()=>R,yJ:()=>L});var i=n(167249),a=n(737947),o=n(27087),s=n(881388),l=n(939863),c=n(123026),d=n(392592),u=n(980820),p=n(446297),m=n(99506),h=n(320741),_=n(845213),g=n(404717);let f=(0,u.MM)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:r,userIds:n},{optimistId:i})=>{o.Ay.del(`/api/teams/${r}/users`,{user_ids:n}).then(()=>{e.dispatch(g.c(i))}).catch(r=>{e.dispatch(g.r(i))})});(0,u.nF)(async(e,r)=>{let{teamId:n}=r;await o.Ay.put(`/api/teams/${n}/restore`).then(()=>{let r=`/files/team/${n}`;a.Ay.redirect(r),e.dispatch(s.s.flash((0,l.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(r=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:r.data.message||(0,l.t)("file_browser.file_browser_actions.unknown_error")})))})}),(0,u.nF)(async(e,r)=>{await o.Ay.put(`/api/teams/${r.teamId}`,{description:r.description}).then(()=>{e.dispatch(L({team:{id:r.teamId,description:r.description},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_description_error")))})}),(0,u.nF)(async(e,r)=>{let n=r.figma_provided_libraries_disabled;await _.$.updatePresetsDisabled({teamId:r.teamId,presetsDisabled:n}).then(()=>{e.dispatch(d.F.enqueue({message:n?(0,l.t)("settings_tab.ui_kits_disabled"):(0,l.t)("settings_tab.ui_kits_enabled"),type:"team.ui_kit_toggle",error:!1})),e.dispatch(L({team:{id:r.teamId,figma_provided_libraries_disabled:n},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r},{loadingKey:n})=>{let i=_.$.getTeam({teamId:r});(0,h.N)(i,e,n),i.then(({data:r})=>{e.dispatch(L({team:r.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r,userInitiated:n=!0},{loadingKey:i})=>{let a=_.$.getMembers({teamId:r});n&&(0,h.N)(a,e,i),a.then(({data:n})=>{let i={};n.meta.forEach(e=>{i[e.email]=e}),e.dispatch(E({members:i,teamId:r}))},r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`);let E=(0,i.N)("TEAM_SET_MEMBERS"),y=(0,i.N)("TEAM_BATCH_JOIN"),b=(0,i.N)("TEAM_JOIN"),I=(0,i.N)("TEAM_STOP_RENAME"),T=(0,i.N)("TEAM_BEGIN_RENAME"),v=(0,i.N)("TEAM_CREATION_SET_LOADING"),S=(0,i.N)("TEAM_CHANGE_DEFAULT_PERMISSION"),w=(0,i.N)("TEAM_CHANGE_SHARING_SETTINGS"),A=(0,i.N)("TEAM_CHANGE_ORG_ACCESS");(0,i.N)("TEAM_LOADED");let N=(0,i.N)("TEAM_RENAME"),C=(0,i.N)("TEAM_BATCH_PUT"),O=c.RF,L=(0,u.nF)((e,r)=>{let n=r.team.id,i=e.getState().teams[n];e.dispatch(O(r));let a=e.getState(),o=e.getState().teams[n];!r.userInitiated&&o.subscription&&o.subscription!==m.Qh.INCOMPLETE&&i&&(null==i.subscription||i.subscription===m.Qh.INCOMPLETE)&&"teamUpgrade"===a.selectedView.view&&a.selectedView.teamId===o.id&&e.dispatch(p.zn({teamId:o.id}))}),R=c.Nh,P=(0,i.N)("TEAM_POST"),D=(0,i.N)("TEAM_GET")},114961:(e,r,n)=>{"use strict";n.d(r,{Be:()=>p,OP:()=>_,l0:()=>h,tp:()=>m});var i=n(167249);n(27087);var a=n(881388),o=n(939863);n(392592);var s=n(980820);n(662275);var l=n(336599);n(820113);var c=n(320741),d=n(659969);let u=(0,s.nF)((e,{teamId:r},{loadingKey:n})=>{let i=d.T.getTeamInvoices({teamId:r});(0,c.N)(i,e,n),i.then(({data:r})=>{r.meta.forEach(e=>{e.design_quantity||(e.design_quantity=e.quantity)}),e.dispatch(m({invoices:r.meta}))}).catch(()=>{e.dispatch(a.s.error((0,o.t)("flash.team_invoices_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_INVOICES::teamId::${e.teamId}`),p=(0,s.nF)((e,{teamId:r},{loadingKey:n})=>{let i=d.T.getTeamSummary({teamId:r});(0,c.N)(i,e,n),i.then(({data:r})=>{e.dispatch(h({summary:r.meta}))}).catch(()=>{e.dispatch(a.s.error((0,o.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`);(0,s.nF)((e,{teamId:r,shouldForceFetch:n})=>{let i=p.loadingKeyForPayload({teamId:r}),a=e.getState();(0,l.VP)(a.loadingState,i)||!n&&(0,l.D2)(a.loadingState,i)||e.dispatch(p({teamId:r}));let o=u.loadingKeyForPayload({teamId:r});(0,l.VP)(a.loadingState,o)||!n&&(0,l.D2)(a.loadingState,o)||e.dispatch(u({teamId:r}))});let m=(0,i.N)("TEAM_ADMIN_POST_INVOICE"),h=(0,i.N)("TEAM_ADMIN_SET_SUMMARY"),_=(0,i.N)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER")},569172:(e,r,n)=>{"use strict";n.d(r,{BC:()=>y,EF:()=>C,FJ:()=>S,Oy:()=>A,Y9:()=>_,au:()=>g,cx:()=>b,gX:()=>I,hK:()=>E,t9:()=>T,v6:()=>L,yu:()=>f});var i=n(167249),a=n(776250),o=n(609494),s=n(966712),l=n(853828),c=n(743282),d=n(27087),u=n(980820),p=n(320741),m=n(440535),h=n(888592);let _=(0,i.N)("REFRESH_FEED"),g=(0,u.nF)((e,r,{loadingKey:n})=>{if(!(0,s.kc)().xr_debounce_threshold)return;let i=h.K.getFeedBellStates();(0,p.N)(i,e,n),i.then(r=>{e.dispatch(E({bellStates:r.data.meta}))})}),f=(0,i.N)("TEAM_FEED_SET_BELL_STATE"),E=(0,i.N)("TEAM_FEED_SET_INITIAL_BELL_STATES"),y=(0,u.nF)((e,r)=>{let n=e.getState().user,i=(0,l.WB)(),a=r.uuid;if(!n||!i||!a||r.commentId.startsWith(L))return;let o=i.getIdFromUuid("FeedComment",a).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}`));i.optimisticallyDeleteWithUUID({FeedComment:{[a]:null}},o)}),b=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,i=(0,l.WB)(),s=r.uuid;if(!n||!i||!s)return;let c=i.getIdFromUuid("FeedComment",s).then(e=>d.Ay.put(`/api/feed_posts/comments/${e}`,{message_meta:r.messageMeta,attachment_updates:(0,m.Gq)(r.attachmentUpdates)}));(0,a.sx)("Team Feed Comment Edited",{text:(0,o._Z)(r.messageMeta)});let u=(0,o.Rc)(r.messageMeta);i.optimisticallyUpdateWithUUID({FeedComment:{[s]:{messageMeta:u}}},c)}),I=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,i=(0,l.WB)();if(!n||!i)return;let s=(0,c.g)(),u=d.Ay.post(`/api/feed_posts/${r.postUuid}/comments`,{message_meta:r.messageMeta,uuid:s,attachment_ids:r.attachmentIds}),p=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EMOJI),m=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EDITOR_MENTION);(0,a.sx)("Team Feed Comment Added",{emojiUsed:p,mentionUsed:m,text:(0,o._Z)(r.messageMeta),postUuid:r.postUuid});let h=(0,o.Rc)(r.messageMeta);i.optimisticallyCreateWithUUID({FeedComment:{[s]:{feedPostPublicUuid:r.postUuid,uuid:s,userId:n.id,user:{id:n.id,handle:n.handle,imgUrl:n.img_url},messageMeta:h,createdAt:new Date,reactions:[]}}},u)}),T=(0,u.nF)((e,r)=>{let{commentUuid:n,emoji:i,reactionId:a}=r,o=v(n,i);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),v=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),S=(0,u.nF)((e,r)=>{let{commentUuid:n,commentId:i,emoji:o}=r,s=e.getState().user;if(!s||i.startsWith(L))return;let c=w(n,o);(0,a.sx)("Team Feed Reaction Added",{commentId:i,type:o});let d=`optimistic-id-comment-${i}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:i,feedResourceType:"FeedComment",userId:s.id}}},c)}),w=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.post(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),A=(0,u.nF)((e,r)=>{let{feedPostUuid:n,emoji:i,reactionId:a}=r,o=N(n,i);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),N=(e,r)=>d.Ay.del(`/api/feed_posts/${e}/reactions`,{emoji:r}),C=(0,u.nF)((e,r)=>{let{feedPostUuid:n,feedPostId:i,emoji:o}=r,s=e.getState().user;if(!s)return;let c=O(n,o);(0,a.sx)("Team Feed Reaction Added",{postUuid:n,type:o});let d=`optimistic-id-${n}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:i,feedResourceType:"FeedPost",userId:s.id,user:{id:s.id,handle:s.handle,imgUrl:s.img_url}}}},c)}),O=(e,r)=>d.Ay.post(`/api/feed_posts/${e}/reactions`,{emoji:r}),L="pending-feed-comment"},331363:(e,r,n)=>{"use strict";n.d(r,{F1:()=>g,Kq:()=>_,LN:()=>b,Nw:()=>E,do:()=>y,ui:()=>f});var i=n(167249),a=n(27087),o=n(881388),s=n(939863),l=n(392592),c=n(980820),d=n(988022),u=n(99506),p=n(320741),m=n(937890),h=n(970516),_=(e=>(e.TEAM_PERMISSIONS_MODAL="team permissions modal",e.NUX_INVITE_COLLABORATOR="nux invite collaborator",e))(_||{});let g=(0,i.N)("TEAM_JOIN_LINKS_SET_REQUEST_STATE"),f=(0,c.nF)(async(e,r,{loadingKey:n})=>{let i=a.Ay.put("/api/team_join_link/disable",{team_id:r.teamId});(0,p.N)(i,e,n),await i.then(()=>{e.dispatch(g({disabled:!0,url:void 0}))}).catch(r=>{e.dispatch(o.s.error(r.message))})}),E=(0,c.nF)(async(e,r)=>{let n=a.Ay.post("/api/team_join_link/reset",{team_id:r.teamId,level:r.level});(0,p.N)(n,e,(0,m._M)(r.teamId)),await n.then(({data:n})=>{let i=n.meta,a=(0,m.jx)(i);e.dispatch(g({disabled:!1,url:a})),r.shouldShowVisualBell&&e.dispatch(l.F.enqueue({message:(0,s.t)("flash.team_join_link_actions.invite_links_reset")}))}).catch(r=>{e.dispatch(o.s.error(r.data.message||"Unknown error"))})}),y=(0,c.nF)((e,r)=>{let n=(0,m.wZ)(r.teamId,r.level);(0,p.N)(n,e,(0,m.OL)(r.teamId)),n.then(r=>{if(r.disabled)e.dispatch(g({disabled:!0,url:void 0}));else if(r.link){let n=(0,m.jx)(r.link);e.dispatch(g({disabled:!1,url:n}))}}).catch(n=>{r.shouldShowFailureMessage&&e.dispatch(o.s.error(n.message)),r.callbackOnFailure?.()})}),b=(0,c.nF)((e,r)=>{(0,d._J)("Team Join Link Copied",r.teamId,e.getState(),{userId:e.getState().user?.id,teamJoinLink:r.url,resourceType:u.vt.TEAM,resourceId:r.teamId,copyLinkSource:r.source}),e.dispatch(h.S({url:r.url}))})},495481:(e,r,n)=>{"use strict";n.d(r,{m:()=>h});var i=n(27087),a=n(881388),o=n(939863),s=n(392592),l=n(784151),c=n(662275),d=n(36816),u=n(980820),p=n(404717),m=n(229403);(0,u.nF)((e,{members:r,team:n,teamUsers:i,usersWithNoTeamUserIds:a=[],paidStatusType:u,paidStatus:p,entryPoint:m,showModalsBeneath:_=!1})=>{e.dispatch((0,c.to)({type:(0,l.j)(),data:{onConfirm:()=>{let l;e.dispatch(h({teamId:n.id,teamUsers:i,usersWithNoTeamUserIds:a,paidStatus:p,paidStatusType:u,userInitiated:!0,entryPoint:m}));let c=r.length,_={productName:u===d.j4.WHITEBOARD?(0,o.t)("general.figjam"):(0,o.t)("general.figma_design"),nameOrEmail:r[0].name||r[0].email,numTeamMembers:c};switch(p){case d.Zf.FULL:l=(0,o.t)("team_user.actions.team_members_upgraded.seat_rename",_);break;case d.Zf.STARTER:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",_);break;case d.Zf.RESTRICTED:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",_)}e.dispatch(s.F.enqueue({type:"team-paid-status-updated",message:l}))},members:r,team:n,paidStatusType:u,paidStatus:p},showModalsBeneath:_}))});let h=(0,u.MM)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:r,teamUsers:n,usersWithNoTeamUserIds:s,paidStatus:l,paidStatusType:c,userInitiated:u,entryPoint:h},{optimistId:_})=>{if(u){let u=n.map(e=>e.user_id).concat(s||[]);await i.Ay.put(`/api/teams/${r}/team_user_batch`,{team_user_deltas:u.map(e=>{let r={user_id:e};return c===d.j4.WHITEBOARD?r.whiteboard_paid_status=l:r.design_paid_status=l,r}),entry_point:h}).then(function({data:n}){e.dispatch(p.c(_)),e.dispatch((0,m.yJ)({teamUsers:n.meta,teamId:r}))}).catch(function(r){e.dispatch(p.r(_));let n=(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(a.s.error(n)),console.error(r)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`)},340159:(e,r,n)=>{"use strict";n.d(r,{c0:()=>f});var i=n(167249),a=n(966712),o=n(27087),s=n(330654),l=n(881388),c=n(868389),d=n(980820),u=n(944682),p=n(216158),m=n(320741),h=n(696915),_=n(754168),g=n(301400);let f=(0,i.N)("ONBOARDING_TEMPLATES_PUT_ALL");(0,d.nF)(e=>{g.H.getTemplates({type:"onboarding"}).then(({data:r})=>{let n=r.meta;Object.keys(n).forEach(r=>{e.dispatch((0,c.Sb)({hubFiles:n[r],src:"getOnboardingTemplates"}))}),e.dispatch(f(n))})}),(0,d.nF)((e,r)=>o.Ay.post("/api/files/first_template_type",{template_type:r.type})),(0,d.nF)((e,r,{loadingKey:n})=>{let i;let s=e.getState();i=(0,a.kc)().ps_benchmark?{current_org_id:s.currentUserOrgId,current_team_id:s.currentTeamId}:{current_org_id:s.currentUserOrgId};let c=o.Ay.post("/api/figjam_template",i);(0,m.N)(c,e,n),c.then(({data:r})=>{let n=r.meta.file;n&&e.dispatch(u.yJ({file:n}))}).catch(r=>{e.dispatch(l.s.error(r.data?.message||"An error occurred while fetching the template file"))})}),p.M4.Query({fetch:async e=>{let r=await _.S.getTaggedUserFiles({...e});return 200!==r.status||r.data.meta.files.length<1?[]:r.data.meta.files},key:"starter_files",schema:s.array(h.L)})},196495:(e,r,n)=>{"use strict";n.d(r,{C$:()=>P,S5:()=>A,WJ:()=>R,hz:()=>L,yJ:()=>D});var i=n(675678),a=n(167249),o=n(776250),s=n(517333),l=n(737947),c=n(187623),d=n(776621),u=n(27087),p=n(939863),m=n(123026),h=n(392592),_=n(632376),g=n(743905),f=n(738269),E=n(662275),y=n(988022),b=n(788811),I=n(697551),T=n(540351),v=n(52571),S=n(980820),w=n(507877);(0,S.nF)(async()=>{try{await u.Ay.post("/api/user/migrate_personal_drafts")}catch(r){let e=r?.data?.message||"undefined";(0,d.$D)(i.FigmaTeam.SHARING_AND_ACCESS,Error(`Failed to migrate starter drafts for user: ${e}`))}});let A=(0,S.nF)(async e=>{try{let r=e.getState();for(let n of r.authedUsers.orderedIds)if(await (0,b.z$)(n)){C(),e.dispatch(E.to({type:_.xv,data:{users:Object.values(r.authedUsers.byId),onLogOut:()=>{e.dispatch(N())}}}));return}}catch(e){(0,d.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(N())}),N=(0,S.nF)(e=>{if(s.eD){l.Ay.redirect("/logout");return}let r=(0,I.d9)(e.getState().selectedView);v.H.logoutAllUsers().then(()=>{(0,y.Pg)(),g.U2.clear(),new c.P().sendToAllTabs(T.y,T.J),l.Ay.redirect(`${r?"/community":""}/?fuid=`)}).catch(r=>{let n=r.data?.message||(0,p.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(h.F.enqueue({error:!0,message:n}))})});(0,S.nF)(async(e,r)=>{try{await (0,b.z$)(r.user.id)?(C(),e.dispatch(E.to({type:_.xv,data:{users:[r.user],onLogOut:()=>{e.dispatch(O(r))}}}))):e.dispatch(O(r))}catch(n){(0,d.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(O(r))}});let C=()=>{try{(0,o.sx)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},O=(0,S.nF)((e,r)=>{v.H.logoutOneUser(r.user.id).then(n=>{e.dispatch(f.os(n.data.meta)),e.dispatch(w.q0(n.data.meta)),n.data?.meta?.users?.length===0&&((0,y.Pg)(),g.U2.clear());let i=n.data?.meta?.redirect_url;i?l.Ay.redirect(i):e.dispatch(h.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:r.user.email})}))}).catch(n=>{let i=n.data?.message||(0,p.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:r.user.email});e.dispatch(h.F.enqueue({error:!0,message:i}))})}),L=(0,a.N)("DELETE_USER_LOADING"),R=(0,a.N)("USER_ERASE_SECRETS"),P=(0,a.N)("USER_TOGGLE_TWO_FACTOR"),D=m.vv},725561:(e,r,n)=>{"use strict";n.d(r,{DO:()=>I,G_:()=>N,Q$:()=>y,X0:()=>S,_i:()=>f,cL:()=>T,hd:()=>w,ku:()=>A,uR:()=>v});var i=n(587670),a=n(167249),o=n(27087),s=n(939863),l=n(265746),c=n(696808),d=n(392592),u=n(980820),p=n(974105),m=n(356390),h=n(917701),_=n(975350),g=n(738269);let f=(0,a.N)("USER_NOTIFICATIONS_MARK_COMMUNITY_AS_READ");(0,u.nF)(async e=>{try{await o.Ay.post("/api/user_notifications/community/mark_read",{currentView:e.getState().selectedView.view})}catch(r){e.dispatch(d.F.enqueue({message:(0,s.t)("community.actions.unable_to_mark_all_as_read_error_message",{error:(0,s.Jv)(r,r.message)}),type:"mark-as-read",error:!0}))}e.dispatch(f())});let E=e=>{let r=e.getState();e.dispatch(_.UU({force:!0})),r.mirror.appModel.showUi||m.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&m.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(g.j7({type:h.a}))})},y=(0,a.N)("USER_NOTIFICATIONS_SET_COMMUNITY_PROFILE_BELL");(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n={text:(0,s.t)("comments.manage"),action:()=>E(e)},i="all"===r.preference?(0,s.t)("comments.you_will_be_notified_about_file_comments"):(0,s.t)("comments.you_will_be_notified_about_replies_and_at_mentions");e.dispatch(d.F.enqueue({message:i,type:"comments-opted-in",button:n,onDismiss:()=>{},timeoutOverride:15e3}))}});let b=(e,r)=>{let n;return"exp_notification_catfile"===r?n=`/api/user_notifications/catfile_optin/${e}`:"exp_notification_catfic"===r&&(n=`/api/user_notifications/catfic_optin/${e}`),e=>{o.Ay.post(n,{opted_in:e})}};(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n=b(r.fileKey,r.experimentName),i={text:(0,s.t)("comments.turn_on"),action:()=>{n(!0)}};setTimeout(()=>{e.dispatch(d.F.enqueue({message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),type:"get_notified_about_all_comments_prompt",button:i,onDismiss:()=>n(!1),timeoutOverride:15e3}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n=b(r.fileKey,r.experimentName);setTimeout(()=>{e.dispatch(c.Q.enqueue({notification:{type:l._.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS,message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),acceptCallback:()=>n(!0),dismissCallback:()=>n(!1)}}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,p.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let r={text:(0,s.t)("comments.manage"),action:()=>E(e)},n=(0,s.t)("dev_mode.you_will_be_notified_about_status_changes");e.dispatch(d.F.enqueue({message:n,type:"dev-mode-opted-in",button:r,onDismiss:()=>{},timeoutOverride:15e3}))}});let I=(0,a.N)("USER_NOTIFICATIONS_SET_FETCHING"),T=(0,a.N)("USER_NOTIFICATIONS_RESET"),v=(0,a.N)("USER_NOTIFICATIONS_SET_BELL"),S=(0,a.N)("USER_NOTIFICATIONS_MARK_ALL_AS_READ"),w=(0,a.N)("USER_NOTIFICATIONS_RESOLVE"),A=(0,a.N)("USER_NOTIFICATIONS_REJECT"),N=(0,a.N)("USER_NOTIFICATIONS_INSERT")},625651:(e,r,n)=>{"use strict";n.d(r,{D6:()=>R,H1:()=>A,Ho:()=>P,U6:()=>N,Vw:()=>b,au:()=>C,cx:()=>v,gA:()=>y,hL:()=>L,rT:()=>I,w9:()=>T});var i=n(587670),a=n(138020),o=n(167249),s=n(776250),l=n(374626),c=n(853828),d=n(746746),u=n(27087),p=n(881388),m=n(939863),h=n(392592),_=n(980820),g=n(843495),f=n(900073),E=n(182976);let y=(0,o.N)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,o.N)("SET_HOVERED_IN_MODAL_VOTE_PIN"),I=(0,o.N)("DESELECT_VOTE_PIN"),T=(0,o.N)("SELECT_VOTE_PIN"),v=(0,o.N)("INITIATED_VOTING_SESSION");(0,_.nF)(async(e,{uiSurface:r})=>{let n=e.getState(),{fileKey:i}=n.selectedView,a=n.mirror.appModel.votingSessionInfo.sessionId;if(!i||!a)return;let o=S(i),s="end-voting-session-failed",c=()=>{e.dispatch(E.of({key:o})),e.dispatch(h.F.enqueue({type:s,message:(0,m.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(E.Cx({key:o})),e.dispatch(h.F.dequeue({matchType:s})),await u.Ay.put(`/api/file/${i}/voting_sessions/${a}`,{in_progress:!1}).then(({status:n})=>{200===n?(e.dispatch(E.x2({key:o})),"MeetingsPanel"===r&&l.zl.set(f.Qs,{type:"SET_VIEW",payload:f.iN.PAST_VOTES})):c()}).catch(e=>{throw c(),e})});let S=e=>`end_voting_session_${e}`;(0,_.nF)((e,{source:r,usedCustomTitle:n,requestBody:i,uiSurface:a})=>{let{fileKey:o}=e.getState().selectedView;if(!o)return;let c=w(o),d=()=>{e.dispatch(E.of({key:c})),e.dispatch(h.F.enqueue({type:"start-voting-session-failed",message:(0,m.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(E.Cx({key:c})),e.dispatch(h.F.dequeue({matchType:"start-voting-session-failed"})),u.Ay.post(`/api/file/${o}/voting_sessions`,i).then(i=>{200===i.status?(e.dispatch(v({votingSessionId:i.data.meta.id})),"MeetingsPanel"===a&&l.zl.get(f.Qs).activeToolModal===f.sx.VOTING&&l.zl.set(f.Qs,{type:"SET_TOOL",payload:null}),e.dispatch(E.x2({key:c})),(0,s.sx)("start_voting_session",{source:r,usedCustomTitle:n,votingSessionId:i.data.meta.id,fileKey:o})):d()}).catch(e=>{throw d(),e})});let w=e=>`create_voting_session_${e}`;(0,_.nF)((e,{votingSessionId:r})=>{let n=e.getState().selectedView;if(!n.fileKey)return null;let i=u.Ay.del(`/api/file/${n.fileKey}/voting_sessions/${r}`);e.dispatch((0,p.Q)({promise:i,fallbackError:(0,m.t)("voting.modal.delete_voting_session_error")})),e.dispatch(h.F.enqueue({message:(0,m.t)("voting.modal.delete_voting_session_visual_bell")})),(0,d.f)(i,e.dispatch,O({votingSessionId:r})),(0,c.WB)().optimisticallyDelete({VotingSession:{[r]:null}},i)});let A=(0,_.nF)((e,r)=>{let n;let o=r.votingStage,s=e.getState(),l=s?.mirror?.appModel?.currentPage;if(o===i.W8Y.NO_SESSION){i.ofk.setVotingSessionInfo("",i.W8Y.NO_SESSION,0,l);return}let c=s?.openFile?.votingSessions;if(o===i.W8Y.ENDED){let e=r.sessionId;n=c?.find(r=>r.id===e&&!r.inProgress)}else n=c?.find(e=>e.inProgress);if(!n)return;let d=(0,a.oA)(n.pageNodeId);d&&(i.ofk.setVotingSessionInfo(n.id,o,n.userVoteLimit,d),o===i.W8Y.JOINED&&(e.dispatch(N()),s.mirror.selectionProperties.whiteboardNumSelectedByType?.STAMP&&(0,g.wr)()))}),N=(0,o.N)("DISMISS_JOIN_CONFIRMATION"),C=(0,o.N)("HIDE_JOIN_VOTING_SESSION_MODAL"),O=(0,o.N)("DELETE_VOTING_SESSION"),L=(0,o.N)("SET_VOTES_PER_USER_LIMIT"),R=(0,o.N)("SET_TITLE"),P=(0,o.N)("CLEAR_STATE")},103907:(e,r,n)=>{"use strict";n.d(r,{$J:()=>s.qZS,AK:()=>g,H5:()=>l,I_:()=>E,Le:()=>h,Tv:()=>f,j9:()=>c,jp:()=>p,n6:()=>y,qN:()=>m,wq:()=>_});var i=n(411855),a=n(934480),o=n(711525),s=n(279453);let l="You are trying to use comments functionality but didn't wire a provider for comments",c=(0,i.createContext)(void 0);function d(){return(0,i.useContext)(c)}let u={};function p(){return function(e,r){let n=(0,i.useMemo)(()=>e?.status!=="loaded"?u:r(e.data),[e,r]),a=e?.status||"loading",s=e?.errors||[];return(0,i.useMemo)(()=>n===u||"loading"===a?(0,o.Xm)():"errors"===a?{status:a,data:null,errors:s}:{status:"loaded",errors:s,data:n},[a,s,n])}((0,i.useContext)(c),e=>e.file?.currentUserFileFollower||null)}function m(){let e=d();return!!e&&e.isUnresolvedLoaded}function h(){let e=d();return!!e&&e.isUnresolvedLoaded&&e.isResolvedLoaded}function _(){let e=d();return e?e.threads:(0,o.Xm)()}function g(e){let r=(0,i.useContext)(c);return(0,i.useMemo)(()=>{if(!r)throw Error(l);if("loaded"!==r.status||!r.data||!r.api.reactionsApi)return 0;let n=r.api.reactionsApi?.getReactions(e);return n?.length||0},[e,r])}function f(e,r){let n=(0,i.useContext)(c);return(0,i.useMemo)(()=>{if(!n)throw Error(l);return"loaded"===n.status&&n.data?{status:"loaded",data:function(e,r){if(!r)return{typed:[],users:[],yours:0,total:0};let n={};return r.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()).reduce((r,i)=>{let[o,s]=(0,a.Kh)(i.emoji);r.total++;let l=n[o];if(!l){let e={count:0,selected:!1,users:[],emoji:o,skinTonesToUsers:{}};r.typed.push(e),l=e,n[o]=e}let c={id:i.user.id,handle:i.user.handle,img_url:i.user.imgUrl};return null!==s&&(void 0===l.skinTonesToUsers[s]&&(l.skinTonesToUsers[s]=[]),l.skinTonesToUsers[s].push(c)),l.count++,l.users.push(c),l.selected=l.selected||i.userId===e,r},{typed:[],yours:0,total:0,users:[]})}(r,n.api.reactionsApi?.getReactions(e)),errors:n.errors}:(0,o.Xm)()},[e,r,n])}function E(){let e=(0,i.useContext)(c);if(!e)throw Error(l);return e.api}function y(){return function(e){if("loaded"!==e.status)return 0;let r=0;for(let n of e.data)if((n.anchored||n.isCanvasMention)&&!n.comments[0].resolved_at)for(let e of n.comments)e.isUnread&&r++;return r}(_())}},696097:(e,r,n)=>{"use strict";n.d(r,{NX:()=>H});var i=n(411855),a=n(188507),o=n(730371),s=n(776250),l=n(609494),c=n(358145),d=n(966712),u=n(853828),p=n(915440),m=n(711525),h=n(886653),_=n(776621),g=n(437304),f=n(743282),E=n(455396),y=n(27087),b=n(975350),I=n(309249),T=n(809831),v=n(277810),S=n(654034),w=n(661843),A=n(912924),N=n(860178),C=n(279453),O=n(239671),L=n(860007),R=n(103907),P=n(736239),D=n(859624),k=n(297586),M=n(792608);class F{constructor(e){this.client=e}toggleReaction(e,r,n){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");return this.getReactions(e).find(n=>n.emoji===r&&n.fileCommentId===e&&n.userId===this.client.user.id)?this.removeReaction(e,r):this.addReaction(e,r,n)}async addReaction(e,r,n){let i=y.Ay.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r,prototype_mode:n?.prototype_mode||!1,selected_view:n?.selectedView||"",quick_reply:n?.quickReply||!1});return this.client.optimistically(async(n,a,o)=>{let s=new Date,l=`${e}_${r}_${o.id}`;await a.optimisticallyCreate({CommentReaction:{[l]:{id:l,fileCommentId:e,emoji:r,fileKey:n.file.id,userId:o.id,user:{id:o.id,handle:o.handle,imgUrl:o.img_url},createdAt:s,sortTimestamp:s}}},i)}),await i}async removeReaction(e,r){let n=y.Ay.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r});return this.client.optimistically(async(i,a,o)=>{let s=o.id,l=this.getReactions(e).filter(e=>e.emoji===r&&e.userId===s).map(e=>e.id),c=l?.reduce((e,r)=>({...e,[r]:null}),Object.create(null));await a.optimisticallyDelete({CommentReaction:c},n)}),await n}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let r=this.client.subscription.data.file;if(!r)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in r)return r.reactions.filter(r=>r.fileCommentId===e);{let n=r.mobileCommentThread.find(r=>r.id===e);return n?n.reactions:[]}}}function x(e){return e.map(e=>({...e,id:e.id.toString()}))}class U{constructor(e){this.client=e}trackMissingCommentData(e,r,n,i,a,o){let s=!1;M.O.records[n.id]={parentId:n.parent_id,report:(r,l)=>{if(!s&&(s=!0,(0,_.kF)("comments_optimistic_updates","true"),(0,_.kF)("isLoadedComments",a.isLoadedComments?"true":"false"),(0,_.kF)("commentType",e),(0,_.x1)(r,l,{id:n.id,fileKey:this.client.fileKey,parentId:n.parent_id,pageId:n.client_meta?.page_id,userId:this.client.user.id,clientMeta:n.client_meta,...o}),this.client.livegraphClient)){let e=i(),n=null,a=null,o=null;for(let i of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===i.type||"STORE.ADD_INSTANCE"===i.type||"STORE.REMOVE_INSTANCE"===i.type||"SESSION.APPLY_MUTATIONS"===i.type||"SESSION.APPLY_SHADOW_MUTATIONS"===i.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===i.type||"REQUEST_MESSAGE"===i.type&&"sync"===i.message.messageType||"RESPONSE_MESSAGE"===i.type&&"synced"===i.message.messageType||"RESPONSE_MESSAGE"===i.type&&"pendingMutations"===i.message.messageType)(0,_.Lo)(r,JSON.stringify(i));else if("VIEW_QUERY_NODE.ADD_RESULT"===i.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===i.type){if(i.type===n&&i.queryId===a&&i.instance===o)continue;(0,_.Lo)(r,JSON.stringify(i)),n=i.type,a=i.queryId,o=i.instance}else"SESSION.NOTIFY_OBSERVERS"===i.type&&i.view._name.includes("Comments")&&(0,_.Lo)(r,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:i.view._name}));(0,_.x1)(r,l)}}},setTimeout(()=>{let a=M.O.records[n.id];if(a||i(),delete M.O.records[n.id],"loaded"!==this.client.subscription.status)return;let o=this.client.loadedComments.some(e=>e.id===n.id||e.id===r);a&&!o?a.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):i()},1e4)}create(e,r){let n=(0,u.S6)(),{fileKey:i,messageMeta:a,attachments:o,clientMeta:c,pageId:p,uuid:m}=e;(0,s.sx)("New comment API create",{uuid:m});let h=(0,d.kc)().show_at_mention_invited_users?[...new Set((0,l.cs)(a))]:[],_=async e=>{let n=e.data?.reason;if(!n||"comment_validation_failure"!==n.reason||!r?.onValidationError)throw e;let l=n.failure_info,d=await r.onValidationError(x(l.users_without_view),x(l.ext_users_without_view),x(l.uninvitable_users));return d?((0,s.sx)("New comment API handling validation",{uuid:m}),y.Ay.post(`/api/file/${i}/comments`,{file_key:i,message_meta:a,attachments:o.map(e=>e.id),client_meta:c,page_id:p,prototype_mode:r?.prototypeMode,share_to_mentions:d.forceWithInvite,force:d.forceMentions,uuid:m,pending_mentions:h}).catch(_)):null},g=(0,D.e)(this.client.subscription),f=this.client.subscription.data?.file?.currentUserCommentReadStatus,E=y.Ay.post(`/api/file/${i}/comments`,{file_key:i,message_meta:a,attachments:o.map(e=>e.id),client_meta:c,page_id:p,prototype_mode:r?.prototypeMode,share_to_mentions:null===r.onValidationError,force:null===r.onValidationError,pending_mentions:h,uuid:m,...!f&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically((e,r)=>{let n=this.client.loadedComments.map(e=>e.orderId||0),s=n.length>0?Math.max(...n):0,d=(0,l.Rc)(a);r.optimisticallyCreateWithUUID({Comment:{[m]:{uuid:m,key:i,userId:this.client.user.id,parentId:null,orderId:s+1,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:{x:c.x,y:c.y,nodeId:c.node_id||null,pageId:c.page_id||null,nodeOffset:c.node_offset||null,inFrame:c.in_frame||null,selectionBoxAnchor:c.selection_box_anchor||null,stablePath:c.stable_path||null},messageMeta:d,messageMetaStylized:d,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},E);let u=(0,v.Mu)(o,i,m);if(u&&r.optimisticallyCreate({CommentAttachment:u},E),!e.file.currentUserCommentReadStatus){let e=new Date;r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{}}}},E)}}),[E.catch(_).then(e=>{if(!e)return null;try{let i=e.data.meta;this.trackMissingCommentData("New Comment",m,i,n,{isLoadedComments:g},r)}catch{}return e}),m]}reply(e,r){let n=(0,u.S6)(),{threadId:i,threadUuid:a,messageMeta:o,attachments:c,uuid:d}=e,{fileKey:p}=this.client,m=(0,l.cs)(o),h=y.Ay.post(`/api/file/${p}/comments/${e.threadId}`,{file_key:p,uuid:d,message_meta:o,attachments:c.map(e=>e.id),prototype_mode:r?.prototypeMode,share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,tracking_context:r.trackingContext,pending_mentions:m}),_=(0,l.Rc)(o),g=(0,D.e)(this.client.subscription),{user:f}=this.client;return this.client.optimistically((e,r)=>{a?r.optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:null}}},h):r.optimisticallyUpdate({Comment:{[i]:{resolvedAt:null}}},h),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!a}),r.optimisticallyCreateWithUUID({Comment:{[d]:{uuid:d,key:p,userId:f.id,parentId:i,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:null,messageMeta:_,messageMetaStylized:_,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null,attachments:c.map(e=>(0,v.QG)(e,p,d))}}},h);let n=(0,v.Mu)(c,p,d);n&&r.optimisticallyCreate({CommentAttachment:n},h)}),[h.then(e=>{if(!e)return null;let i=e.data.meta;return this.trackMissingCommentData("Reply Comment",d,i,n,{isLoadedComments:g},r),e}),d]}}class B{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,i,a)=>{let o=r.file.currentUserCommentReadStatus,s=new Date;if(o){let{[e]:r,...a}=o.readComments;await i.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,allReadAt:S.gj.allReadAt,readComments:a,unreadComments:{...o.unreadComments,[e]:"true"}}}},n)}else await i.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},n)}),await n}async markAllAsRead(){let e=this.client.subscription.data?.file?.currentUserCommentReadStatus,r=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!e&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(e,n,i)=>{let a=e.file.currentUserCommentReadStatus,o=new Date;a?await n.optimisticallyUpdate({CommentReadStatus:{[a.id]:{...a,allReadAt:o,readComments:{},unreadComments:{}}}},r):await n.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:o,readComments:{},unreadComments:{}}}},r)}),await r}async markAsRead(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=y.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!r&&{all_read_at:S.gj.allReadAt}});return this.client.optimistically(async(r,i,a)=>{let o=r.file.currentUserCommentReadStatus,s=new Date,l=e.reduce((e,r)=>({...e,[r]:s.toUTCString()}),{});o?await i.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,readComments:{...o.readComments,...l},unreadComments:Object.keys(o.unreadComments).filter(r=>!e.includes(r)).reduce((e,r)=>(e[r]="true",e),{})}}},n):await i.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:S.gj.allReadAt,readComments:l,unreadComments:{}}}},n)}),await n}}let V=(0,h.xx)(e=>{let r=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:n=>r(e.filter(n)),map:n=>r(e.map(n)),join:n=>r([...e,...n||[]])}}}),e);return r(e)});function G(e,r,n){let a=i.useMemo(()=>{if("loaded"!==n.status)return new Set([]);let e=n.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[n]),o=(0,c.ZC)(a),{removed:s}=i.useMemo(()=>(0,g.Zv)(a,o),[a,o]),l=i.useCallback(e,r);i.useEffect(()=>{s.forEach(e=>{l(e)})},[l,s])}function H(e){let{userId:r,file:n,activeId:s,anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:h,getPageIdsForNodes:_,children:g}=e,y=i.useRef({}),v=(0,T.E3)()===O.nT.Whiteboard,S=!!(0,d.kc)().xr_debounce_threshold,x=!!(0,d.kc)().async_spotlight,H=n?.key,W=!!H,K=i.useMemo(()=>({fileKey:H??""}),[H]),j=i.useMemo(()=>(0,f.g)(),[K]),z=(0,p.Rs)(R.$J,K,{enabled:W,traceId:j}),Y=(0,p.Rs)(C.ZBn,K,{enabled:W}),$=(0,p.Rs)(C.qRE,K,{enabled:S&&W}),q=(0,p.Rs)(C.bCq,K,{enabled:x&&W}),Z=(0,p.Rs)(C.gkf,K,{enabled:v&&W}),X=(0,a.d4)(e=>e.comments.lgPendingUuidToServerIdMap),J=(0,a.wA)(),Q=i.useMemo(()=>{if("loaded"!==z.status||!z.data.file)return z;let e=V(z.data.file.comments).transform.filter(e=>null===e.resolvedAt);if("loaded"===Y.status){let r=Y.data.file?.resolvedComments;e=e.transform.join(r)}let r={...z.data.file,comments:e};return{...z,data:{...z.data,file:r}}},[z,Y]);i.useMemo(()=>{"loaded"===Q.status&&Q.data?.file?.comments?.forEach(e=>{e.id in X?(y.current[e.id]=e,e.id=X[e.id]):e.uuid&&e.uuid in X&&y.current[e.uuid]&&y.current[e.uuid]!==e&&(J(b.pI({commentUuid:e.uuid})),delete y.current[e.uuid])})},[J,Q,X]);let ee=(0,a.d4)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:et,commentThreadNodeIds:er,commentThreadStablePaths:en}=i.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],r=new Set,n=new Set;return Q.data.file.comments.forEach(i=>{if(null===i.parentId){let a=i.clientMeta?.nodeId,o=i.clientMeta?.stablePath;o&&h?(e.push(i),n.add(`[${o.join(",")}]`)):a&&u&&(e.push(i),r.add(a))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:r,commentThreadStablePaths:n}},[Q,u,h]),ei=i.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file||S&&!$.data?.file)return[];let e=new Set(er);return S&&(0,A.N)($.data.file.feedPosts).forEach(r=>{e.add(r)}),Array.from(e)},[Q,$,S,er]),ea=i.useMemo(()=>"loaded"===Q.status&&Q.data.file?Array.from(new Set(en)):[],[Q,en]);i.useEffect(()=>{u&&u(ei),h&&h(ea)},[u,ei,h,ea]);let eo=(0,w.W9)(r,Q,s,l,_,ee),es=(0,w.gu)(r,Z,e.activeId),el=(0,L.i)($,e.activeId,_,c),ec=(0,E.Z)(q),ed=i.useMemo(()=>{if("loaded"!==Q.status||S&&"loaded"!==$.status||v&&"loaded"!==Z.status)return(0,m.gB)([]);let e=[];return eo.data&&(e=e.concat(eo.data)),es.data&&(e=e.concat(es.data)),el.data&&(e=e.concat(el.data)),ec.data&&(e=e.concat(ec.data)),(0,m.gB)(e)},[Q.status,S,$.status,v,Z.status,eo.data,es.data,el.data,ec.data]),eu=function(e){let r=(0,p.ZA)(),n=(0,N.iZ)(),{args:a,subscription:s}=e,[l,c]=i.useState(()=>{if(n)return new D.I(a,s,n)});return i.useEffect(()=>{if(!n){c(void 0);return}if(!l||!(0,o.deepEquals)(l.args,a)){c(new D.I(a,s,n));return}},[l,a,s,n,r]),l&&(n&&(l.user=n),l.subscription=s,l.livegraphClient=r),i.useMemo(()=>l?{commentReceipts:new B(l),reactionsApi:new F(l),writeAPI:new U(l),pinApi:new k.xI(l)}:{},[l])}({args:K,subscription:Q}),ep=(0,P.r)({args:K,subscription:$});eu.canvasMentionReceipts=(0,I.pf)({canvasMentionArgs:K,canvasMentionSubscription:Z}),(0,w.Hu)(et,{enabled:!!(0,d.kc)().comments_absolute_positioning}),G(e=>{M.O.records[e]?.report?.("New Comment Missing","Comment disappeared within ten seconds of creation")},[],z),G(e=>{M.O.records[e]?.report?.("New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],Y);let em=i.useMemo(()=>W?{...Q,api:eu,feedApi:ep,threads:ed,isUnresolvedLoaded:"loaded"===z.status,isResolvedLoaded:"loaded"===Y.status}:{status:"loading",data:null,errors:null,threads:(0,m.Xm)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[W,Q,eu,ep,ed,z.status,Y.status]);return i.createElement(R.j9.Provider,{value:em},g)}},465201:(e,r,n)=>{"use strict";n.d(r,{t:()=>o});var i=n(966712),a=n(939863);function o(){let e=(0,i.kc)().ce_tv_fill_hug_suggest?[{separator:!0},{action:"set-selection-hug-horizontal",displayText:(0,a.t)("fullscreen_actions.set-hug-width")},{action:"set-selection-hug-vertical",displayText:(0,a.t)("fullscreen_actions.set-hug-height")},{action:"set-selection-fill-horizontal",displayText:(0,a.t)("fullscreen_actions.set-fill-width")},{action:"set-selection-fill-vertical",displayText:(0,a.t)("fullscreen_actions.set-fill-height")}]:[];return{name:"multi-stack-selection-submenu",featureFlags:["auto_auto_layout"],flags:["design","edit","slides"],children:[{action:"run-multi-stack-auto-layout",displayText:(0,a.t)("fullscreen_actions.run-multi-stack-auto-layout")},{action:"destroy-all-auto-layout",displayText:(0,a.t)("fullscreen_actions.destroy-all-auto-layout")},{separator:!0},{action:"resize-to-fit",displayText:(0,a.t)("fullscreen_actions.resize-to-fit")},...e]}}},107877:(e,r,n)=>{"use strict";n.d(r,{E2:()=>A,M5:()=>l,M6:()=>y,QB:()=>b,Tb:()=>S,V9:()=>m,W_:()=>d,XG:()=>p,ZO:()=>s,_O:()=>w,aY:()=>v,eg:()=>_,s0:()=>c,vY:()=>T});var i=n(330654),a=n(762194),o=n(99506),s=(e=>(e.USERS="users",e.TEAMS="teams",e.ORGS="orgs",e.PLUGINS="plugins",e.WIDGETS="widgets",e.HUB_FILES="hub_files",e.PROFILES="profiles",e.CATEGORIES="community_categories",e))(s||{}),l=(e=>(e.HUB_FILE_DUPLICATED="Hub File Duplicated",e.PLUGIN_INSTALLED="Hub Plugin Installed",e.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",e.WIDGET_INSTALLED="Hub Widget Installed",e.WIDGET_UNINSTALLED="Hub Widget Uninstalled",e.SLIDE_TEMPLATE_USED="slide_template_used",e))(l||{}),c=(e=>(e.PLUGIN_INSTALL="community_hub_plugin_install",e.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",e.PROFILE_FOLLOW="community_hub_follow",e.PROFILE_UNFOLLOW="community_hub_unfollow",e.HUB_FILE_LIKE="community_hub_file_like",e.HUB_FILE_UNLIKE="community_hub_file_unlike",e.PLUGIN_LIKE="community_plugin_like",e.PLUGIN_UNLIKE="community_plugin_unlike",e.WIDGET_LIKE="community_widget_like",e.WIDGET_UNLIKE="community_widget_unlike",e.SHARE_TWITTER="community_hub_share_twitter",e.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",e.SHARE_FACEBOOK="community_hub_share_facebook",e.SHARE_LINK="community_hub_share_link",e.CREATE_PROFILE="community_hub_create_profile",e.COMMUNITY_OPT_IN="community_hub_opt_in",e.UPDATE_PROFILE_HANDLE="community_hub_update_handle",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",e.SEE_MORE_IN_COMMUNITY="see_more_in_community",e.FIND_MORE_PLUGINS="find_more_plugins",e))(c||{}),d=(e=>(e.PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",e))(d||{}),u=(e=>(e.FIGJAM="figjam",e))(u||{}),p=(e=>(e.PLUGINS="plugins",e.FILES="files",e.CREATORS="creators",e.FIGJAM_PLUGINS="figjam_plugins",e.FIGMA_DESIGN_PLUGINS="figma_design_plugins",e.WIDGETS="widgets",e.FIGJAM_WIDGETS="figjam_widgets",e.FIGMA_DESIGN_WIDGETS="figma_design_widgets",e))(p||{});function m(e){switch(e){case"figjam_plugins":case"figjam_widgets":return o._Y.WHITEBOARD;case"figma_design_plugins":case"figma_design_widgets":return o._Y.DESIGN;default:return(0,a.r)()}}var h=(e=>(e.HAS_RESTORED="has_restored",e.RESTORE_SMOOTH="restore_smooth",e.RESTORE="restore",e))(h||{}),_=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e.INSTALLS_DESC="installs",e.RUNS_DESC="runs",e.LAST_UPDATED_DESC="updated_at",e.INSTALLS_ASC="installs_asc",e.RUNS_ASC="runs_asc",e.LAST_UPDATED_ASC="updated_at_asc",e))(_||{}),g=(e=>(e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e))(g||{}),f=(e=>(e.DESC="desc",e.ASC="asc",e))(f||{}),E=(e=>(e.by_creator="by_creator",e.by_tags="by_tags",e))(E||{});function y(e){return i.object({types:i.array(i.nativeEnum(E)),content:i.array(e)})}function b(e){switch(e){case"installs_asc":return{sort:"installs",order:"asc"};case"installs":return{sort:"installs",order:"desc"};case"runs_asc":return{sort:"runs",order:"asc"};case"runs":return{sort:"runs",order:"desc"};case"updated_at_asc":return{sort:"last_updated",order:"asc"};case"updated_at":return{sort:"last_updated",order:"desc"};default:return{sort:e,order:"desc"}}}let I={resourceIds:{},unmergedResourceIds:[],loading:!1};({...I});var T=(e=>(e.NAME="name",e.PUBLISHER="publisher",e.INSTALLS="installs",e.RUNS="runs",e.CREATED_AT="created_at",e.LAST_UPDATED="last_updated",e))(T||{}),v=(e=>(e.FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",e.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",e.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",e.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",e))(v||{});let S="checkout",w="freemium_preview",A="1"},992271:(e,r,n)=>{"use strict";n.d(r,{BG:()=>S,Fh:()=>N,LM:()=>I,L_:()=>A,UV:()=>b,WT:()=>T,hY:()=>d,ln:()=>w,qt:()=>v}),n(634832);var i=n(752795),a=n(630372),o=n(969468),s=n(831474),l=n(45259);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.eo,s.o,l.t,a.E])for(let r of e)d[r.presetIdentifier]=r;function u(e,r){let n=new Set,i=[];for(let a of e)n.has(a.deviceName)||(n.add(a.deviceName),a.archived?r?.push(a.deviceName):i.push(a.deviceName));return i}let p=[],m=u(o.eo,p),h=u(s.o,p),_=u(l.t,p),g=u(a.E,p),f=Object.create(null);for(let e in d){let r=d[e],n=r.deviceName;n in f||(f[n]=[]),f[n].push(r)}let E=(e,r)=>{for(let n of[o.eo,s.o,l.t,a.E])for(let i of n)if(i.framePresetSize.x===e&&i.framePresetSize.y===r)return i;return null};var y=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PHONE=1]="PHONE",e[e.TABLET=2]="TABLET",e[e.WATCH=3]="WATCH",e[e.DESKTOP=4]="DESKTOP",e))(y||{});let b={1:m,2:h,3:_,4:g,0:[]},I={1:u(o.eo.filter(function(e){return!0===e.isSuggested})).slice(0,5),2:u(s.o).slice(0,5),3:u(l.t).slice(0,5),4:u(a.E).slice(0,5),0:[]};function T(e,r){let n=d[r.presetIdentifier];return e.map(e=>e===n.deviceName?null:N(e,r)).filter(i.isNotNullish)}function v(e){let r=d[e];if(null==r)return 0;let n=r.deviceName;return -1!==m.indexOf(n)?1:-1!==h.indexOf(n)?2:-1!==_.indexOf(n)?3:-1!==g.indexOf(n)?4:0}function S(e,r){for(let n of c)if(n.framePresetSize.x===e&&n.framePresetSize.y===r)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let n=E(e,r);return null!=n?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"NONE"}:null!=(n=E(r,e))&&function(e,r){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=r){let e=d[r];if(null!=e){let r=-1!==_.indexOf(e.deviceName),n=-1!==g.indexOf(e.deviceName);return!r&&!n}}return!1}("PRESET",n.presetIdentifier)?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"CCW_90"}:null}function w(e){let r=v(e||"");return 4!==r&&0!==r}let A=e=>!!function(e){let r=d[e];return r?.inlinePreviewInfo||null}(e);function N(e,r){let n=d[e]||f[e][0];if(r&&"PRESET"===r.type){let i=d[r.presetIdentifier],a=i.hideUnlessActive&&!i.archived&&n.framePresetSize.x===i.framePresetSize.x&&n.framePresetSize.y===i.framePresetSize.y;if(i&&i.deviceName===e)n=i;else if(!a&&n.hideUnlessActive&&!n.archived)return null}else if(n.hideUnlessActive&&!n.archived)return null;return n}},457858:(e,r,n)=>{"use strict";n.d(r,{$W:()=>c,fS:()=>d});var i=n(939863);let a=[{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,i.t)("presets.i_phone_se")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,i.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,i.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,i.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,i.t)("presets.android_large")}],o=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,i.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,i.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,i.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,i.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,i.t)("community.categories.wireframe")},{name:"TV",width:1280,height:720,i18nName:()=>(0,i.t)("presets.tv")}],s=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,i.t)("presets.slide_4_3")}],l=u(Object.values({phonePresets:a,tabletPresets:[{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,i.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,i.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,i.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,i.t)("presets.i_pad_pro_12_9")}],desktopPresets:o,presentationPresets:s,watchPresets:[{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,i.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,i.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,i.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,i.t)("presets.apple_watch_40_mm")}],paperPresets:[{name:"A4",width:595,height:842,i18nName:()=>(0,i.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,i.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,i.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,i.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,i.t)("presets.tabloid")}],socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,i.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,i.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,i.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,i.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,i.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,i.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,i.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,i.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,i.t)("presets.linked_in_cover")}],figmaPresets:[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,i.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,i.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.plugin_file_cover")}],archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_x")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,i.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,i.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,i.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,i.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,i.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,i.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,i.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,i.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,i.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,i.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,i.t)("presets.mac_128k")}]})),c=u([a,o,s]);function d(e){let r=null;for(let n of Object.values(l)){if(e.width===n.width&&e.height===n.height)return n;e.width===n.height&&e.height===n.width&&(r=n)}return r}function u(e){return e.reduce((e,r)=>{for(let n of r)e[n.name]=n;return e},{})}},324597:(e,r,n)=>{"use strict";function i(e){return"children"in e||"childDropdown"in e}function a(e){return"action"in e||"callback"in e}function o(e){return"separator"in e}function s(e){return"header"in e}function l(e){return"render"in e}function c(e,r){var n;return!!r.checked||null!=r.property&&("string"==typeof(n=r.property)?e[n]:n.getCopy())===r.propertyValue}function d(e,r){return"string"==typeof r?e[r]:r.getCopy()}function u(e){return e.action||e.name}n.d(r,{Dz:()=>u,M3:()=>h,MH:()=>g,TV:()=>i,WJ:()=>c,_o:()=>a,_p:()=>m,f4:()=>d,gN:()=>s,hV:()=>y,id:()=>l,k$:()=>o,lW:()=>E,pn:()=>f,rH:()=>p,u2:()=>_});let p="edit-menu",m="view-menu",h="object-menu",_="vector-menu",g="text-menu",f="arrange-menu",E="preferences-menu",y="figma-account-menu"},349410:(e,r,n)=>{"use strict";n.d(r,{A7:()=>B,Ao:()=>G,CS:()=>w,Cv:()=>V,Mk:()=>T,Mx:()=>N,WZ:()=>L,Xt:()=>U,Yz:()=>M,cK:()=>x,e5:()=>b,fn:()=>D,ih:()=>P,jb:()=>A,ji:()=>R,kO:()=>v,kX:()=>O,nz:()=>f,sh:()=>y,uL:()=>C,y:()=>E,zq:()=>F});var i=n(411855),a=n(786013);n(138020);var o=n(966712);n(915440);var s=n(563706),l=n(218881);n(875847),n(335682);var c=n(860178),d=n(99506);n(279453);var u=n(243987),p=n(556261),m=n(56099),h=n(984968),_=n(668860);function g({showExpAtMentionInvite:e,isDraftFile:r,isFigmaDesign:n,inOrg:i,isMobile:a}){return!(r||a||!e||!n||i)}async function f(e){return!!g(e)&&"variant"===(await (0,l.hW)("exp_at_mention_invited_users")).get("treatment","")}function E(){let{getConfig:e}=(0,l.I7)("exp_at_mention_invited_users");return(0,i.useCallback)(r=>!!g(r)&&"variant"===e().get("treatment",""),[e])}function y(e){let{getConfig:r}=(0,l.I7)("exp_library_upsells_v1");return!!e&&!!r().getValue("show_library_upsell",!1)}function b({userId:e,teams:r,rolesByTeamId:n,getM0Config:i,getM1Config:a}){if(!(0,o.kc)().close_starter_team_loophole)return!1;let s=I(e,r,n);return 0!==s&&(1===s?i().get("should_block_second_starter_team",!1):a().get("should_block_more_than_one_starter_team",!1))}function I(e,r,n){let i=0,a={};for(let o of(r.forEach(e=>a[e.id]=e),Object.keys(n))){let r=a[o],s=n[o][e];r&&s&&s.level===_.e6.OWNER&&r.starter_team&&!r.org_team&&!r.student_team&&null===r.subscription&&null===r.deleted_at&&i++}return i}function T(e,r,n){return!!(0,o.kc)().close_starter_team_loophole&&0===I(e,r,n)&&(0,o.kc)().close_starter_loophole_team_one}function v(){let{getConfig:e}=(0,l.I7)("exp_pro_tier_onboarding");return(0,i.useCallback)(()=>e().get("show_pro_onboarding",!1),[e])}let S={component:"useGetExpDevModeGraceDays",migrationGroup:m.L.GROUP_2};function w(){let e=(0,p.yN)({...S,attribute:"isCurrentOrg",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===d.OL.ORG}),r=(0,p.yN)({...S,attribute:"isProTeam",legacy:e=>(0,u.w5)(e)&&!e?.org_id,migrated:e=>e?.tier===d.Ag.PRO}),n=(0,p.wy)({...S,attribute:"currentPaidPlanUserType",legacy:(n,i)=>e&&i?d.h4.ORG_USER:r&&n?d.h4.TEAM_USER:null,migrated:e=>e?.key.type??null}),{getConfig:o}=(0,l.I7)("exp_dev_mode_grace_period_v2_org"),{getConfig:s}=(0,l.I7)("exp_dev_mode_grace_period_v2_team");return(0,i.useCallback)(()=>{let i=!e&&r?a.zi5:a.W7o;switch(n){case d.h4.ORG_USER:return i=o().get("dev_mode_grace_day",a.W7o),{inExperiment:o().get("in_experiment",!1),devModeGraceDays:i};case d.h4.TEAM_USER:return i=s().get("dev_mode_grace_day",a.zi5),{inExperiment:s().get("in_experiment",!1),devModeGraceDays:i};default:return{inExperiment:!1,devModeGraceDays:a.W7o}}},[n,o,s,e,r])}function A(){let{getConfig:e}=(0,l.I7)("exp_pro_viewer_to_editor_v1");return(0,i.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function N(){let{getConfig:e}=(0,l.I7)("exp_in_product_sales_contact_form");return!!e().getValue("has_updated_sales_contact_form",!1)}function C(){let{getConfig:e}=(0,l.I7)("exp_org_viewer_to_editor_v1");return(0,i.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function O(e){return e().get("switch_button_hierarchy",!1)}function L(e,r){return!!r.subscription&&!r.org_team&&e().get("hide_toolbar_request_cta",!1)}function R(e){return!!(0,o.tl)().org_id&&e().get("hide_toolbar_request_cta",!1)}var P=(e=>(e.CONTROL="control",e.VARIANT_A="variantA",e.VARIANT_B="variantB",e))(P||{});function D(){let{getConfig:e}=(0,l.I7)("exp_fbg_navigation_updates"),r=(0,h.ol)(),n=r&&(0,o.kc)().ps_benchmark,i=r&&!(0,u.w5)(r);return n&&i?e().getValue("treatment","control"):"control"}var k=(e=>(e.CONTROL="control",e.DYNAMIC_NUX="dynamic_nux",e.SIGNAL_NUX="signal_nux",e))(k||{});function M(){let{getConfig:e}=(0,l.I7)("exp_resurrect_locked_teams"),r=(0,h.cD)();return(0,i.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_locked_state_redesign",!1),[e,r])}function F(){let{getConfig:e}=(0,l.I7)("exp_viewer_upgrade_awareness");return(0,i.useCallback)(()=>!!e().getValue("enabled",!1),[e])}async function x(){return(await (0,l.hW)("exp_viewer_upgrade_awareness")).get("enabled",!1)}function U(){let{getConfig:e}=(0,l.I7)("exp_drafts_copy_link_org");return!!e().getValue("has_drafts_copy_link_experience",!1)}function B(){let{getConfig:e}=(0,l.I7)("exp_delayed_marketing_opt_in");return(0,i.useCallback)(()=>!(0,s.C8)()&&!!e().getValue("enabled",!1),[e])}function V(){let e=(0,p.rO)(),{getConfig:r}=(0,l.I7)("exp_admin_revamp_for_team"),{getConfig:n}=(0,l.I7)("exp_admin_revamp_for_org");return(0,i.useCallback)(()=>(e===d.OL.TEAM?r():n()).getValue("nav_revamp_enabled",!1),[r,n,e])}function G(){let{getConfig:e}=(0,l.I7)("exp_prototype_header_google_sso"),r=(0,c.iZ)();return(0,i.useCallback)(()=>!(0,s.C8)()&&!r&&!!e().getValue("enabled",!1),[e,r])}},140908:(e,r,n)=>{"use strict";n.d(r,{U6:()=>d,eZ:()=>m,k3:()=>p,wN:()=>c,yo:()=>u});var i=n(133537);n(697170);var a=n(966712),o=n(38580);n(563706);var s=n(218881);n(309798);var l=n(99506);function c(e){return!1}function d(){return!!(0,a.kc)().rollout_pinned_comments_ff}function u({user:e,file:r,numPinnedCommentThreads:n}={}){return!!d()&&!!e&&!!r&&r.editorType===l._Y.DESIGN&&(!!n&&n>0||!!((0,a.b5)()&&(0,i.jm)(e.email))||!!r.team&&!r.parentOrgId)}function p(){let{getConfig:e}=(0,s.I7)("rollout_pinned_comments_ff");return e().getValue("can_pin_comments",!1)}function m(){let{getConfig:e}=(0,s.I7)("exp_user_initiated_request_nudges");return!!e().getValue("has_user_initiated_request_nudges_enabled",!1)}var h=(e=>(e.DEFAULT="default",e.PZ_THEN_PRODUCT="pz_then_product",e.PRODUCT_THEN_PZ="product_then_pz",e))(h||{});(0,o.eU)(null)},325469:(e,r,n)=>{"use strict";n.d(r,{d:()=>l});var i=n(411855),a=n(188507);n(218881);var o=n(335682),s=n(643067);function l({file:e}){let{currentOrg:r,currentTeam:n}=function(){let e=(0,a.d4)(e=>(0,s.wA)(e)),r=(0,o.q5)();return{currentOrg:e,currentTeam:r?.team??null,currentFile:r}}();(0,i.useEffect)(()=>{if(r||!n||e?.editor_type!=="design")return},[r,n,e])}},921472:(e,r,n)=>{"use strict";n.d(r,{Nh:()=>d,S3:()=>u,bf:()=>p,pI:()=>c,xn:()=>m});var i=n(966712),a=n(376485),o=n(384775),s=n(781267);function l(e){let r="insert-local-widget"===e.menuAction.type,n="run-local-plugin"===e.menuAction.type;return(0,s.qs)(e)?r?"Widgets Development":"Widgets":n?"Plugins Development":"Plugins"}function c(){return!!(0,i.kc)().qa_consolidate_ext_submenu&&(0,o.gn)()}function d(e,r){let n=e.path;if("plugin-name"!==e.name.type)return"";let i=l(e);return c()&&r?[...n.slice(1),e.name.plugin].join(" "):[i,...n,e.name.plugin].join(" ")}function u(e){return e.submenu.find(e=>"run-menu-action"===e.type)}function p(e){let r=u(e);return r?[l(r),e.name].join(" "):e.name}function m(e){let{extension:r}=e,n=[];return(0,a.k0)(r)?n.push("Widgets"):n.push("Plugins"),(0,a.ZQ)(r)&&n.push("Development"),n.push(r.name),n.join(" ")}},124271:(e,r,n)=>{"use strict";n.d(r,{NG:()=>m,UK:()=>function e(r){let{item:n,isReadOnly:s,extensionMenuProps:l,includeDisabled:c,isSubmenuChild:m,isItemSubmenu:h}=r,_=[];if("run-menu-action"===n.type){if(n.disabled&&!c)return _;if("plugin-name"===n.name.type){if(!l.userCanRunPlugins)return _;let e=(0,u.qs)(n)?(0,a.t)("widgets.insert_widget",{widgetName:n.name.plugin}):n.name.plugin,r=[...n.path,e],i=("run-installed-plugin"===n.menuAction.type||"run-local-plugin"===n.menuAction.type)&&n.menuAction.parameterOnly,s=(0,p.Nh)(n,m),c=function(e,r){let{orgPrivatePlugins:n,orgPrivateWidgets:i}=r,a="pluginId"in e.menuAction?e.menuAction.pluginId:void 0;return a&&(n?.some(e=>e.plugin_id===a)||i?.some(e=>e.plugin_id===a))?[o.$.ORG]:"run-local-plugin"===e.menuAction.type||"insert-local-widget"===e.menuAction.type?[o.$.DEV]:void 0}(n,l),h={name:"plugins-menu-item",extensionSearchString:s,itemPath:r,itemParameterArgs:(0,d.o0)(n.menuAction),callback:()=>(0,u.Im)(l,"quick-actions",n.menuAction),menuActionType:n.menuAction.type,pluginId:"run-installed-plugin"===n.menuAction.type||"insert-installed-widget"===n.menuAction.type?n.menuAction.pluginId:void 0,pluginLocalFileId:"run-local-plugin"===n.menuAction.type||"insert-local-widget"===n.menuAction.type?n.menuAction.localFileId:void 0,disabled:n.disabled,flags:["edit"],parametersRequired:i,tags:c};_.push(h)}else{if(s&&n.disabled)return _;let e={name:n.name.key,callback:()=>(0,u.Im)(l,"filemenu",n.menuAction),disabled:n.disabled,iconType:n.iconType,property:n.property,propertyValue:n.propertyValue};_.push(e)}}else if("submenu"===n.type){if((0,p.pI)()&&!m&&"manifest"===n.subtype){let r={name:"plugins-menu-item",extensionSearchString:(0,p.bf)(n),itemPath:[n.name],callback:i.lQ,submenu:n.submenu.map(r=>e({item:r,isReadOnly:s,extensionMenuProps:l,includeDisabled:c,isItemSubmenu:!0})).flat()},a=(0,p.S3)(n);a&&(r.menuActionType=a.menuAction.type,"pluginId"in a.menuAction&&(r.pluginId=a.menuAction.pluginId),"localFileId"in a.menuAction&&(r.pluginLocalFileId=a.menuAction.localFileId)),_.push(r)}if(h)return _;for(let r of n.submenu){let n=e({item:r,isReadOnly:s,extensionMenuProps:l,includeDisabled:c,isSubmenuChild:!0});_.push(...n)}}return _}});var i=n(860601),a=n(939863),o=n(419527),s=n(620604),l=n(780700),c=n(376485),d=n(875571),u=n(781267),p=n(921472);function m(e){let{extension:r,canRun:n}=e;return r.manifest.menu&&r.manifest.menu.length>0?{type:"submenu",subtype:"manifest",name:r.name,submenu:(0,s.z)(r.manifest.menu,r)}:{type:"run-menu-action",name:{type:"plugin-name",plugin:r.name},menuAction:(0,l.IK)(r),disabled:!n,isWidget:(0,c.k0)(r),path:[]}}},973149:(e,r,n)=>{"use strict";n.d(r,{GW:()=>v,KD:()=>h,LN:()=>I,LS:()=>m,Lk:()=>_,NB:()=>E,PZ:()=>f,X9:()=>w,cu:()=>S,f0:()=>b,h7:()=>N,k$:()=>g,mz:()=>O,o1:()=>A,t6:()=>T,wf:()=>C});var i=n(459401),a=n(346124),o=n(776250),s=n(127285),l=n(951158),c=n(776621),d=n(939863),u=n(848661),p=n(287010);class m extends Error{constructor(e,r){super(`${e}: ${JSON.stringify(r)}`),this.errorInfo=r}}class h{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,r){e=this.preProcessForExpressionEvaluation(e);let n=(0,s.O4)(e,r);if(null!==n.value&&isFinite(n.value))return n.value;throw(0,c.Lo)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:r}),new m("Could not parse input",n.error)}onParseThrow(e,r){if(e instanceof m&&e.errorInfo)return this.options.onEvaluateExpressionError?.(e.errorInfo,r)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,r){return e+r}clamp(e){return(0,a.clampOptional)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??p.bA}bigNudgeAmount(){return this.options.bigNudgeAmount??p._q}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class _ extends h{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let r=String(parseFloat(e.toFixed(2))),n=r.includes(".");return this.floatingPointFormat&&n&&r.length-1>this.floatingPointFormat.maxNumDigits?String(parseFloat(e.toFixed(1))):r}parse(e,r){return/[0-9]+\,[0-9]+/g.test(e)&&(0,o.sx)("editor-parsing-float-input-with-comma",{input:e}),super.parse(e,r)}}class g extends h{format(e){return null==e?"":String(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(e).replace("USD","").trim())}parse(e,r){return parseFloat(super.parse(e,r).toFixed(0))}}class f{constructor(e){this.pixelFormatter=new _(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,r){e=e.trim().toLocaleLowerCase();let n=(0,d.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&n.startsWith(e)?u.Q8:this.pixelFormatter.parse(e,r)}format(e){if((0,u.SX)(e))return(0,d.t)("fullscreen.properties_panel.stack_panel.auto");if(this.allowUnformatted)try{return this.pixelFormatter.format(e)}catch{return e}return this.pixelFormatter.format(e)}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.incrementBy(e,r)}clamp(e){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.clamp(e)}}class E{constructor(e){this.pixelFormatter=new _(e)}parse(e,r){let n=new RegExp(/[^\,\s]*(\s*[+\-*\/\^]\s*[^\,\s]*)*/g),i=e.match(n);return i?i.filter(e=>e.length).map((e,n)=>{let i=this.pixelFormatter.parse(e,r&&r[n]);if(!isFinite(i))throw Error("could not parse padding input");return i}).map(e=>Math.max(e,0)):[]}format(e){return null==e?"":(0,i.areAllEqual)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r,n){return e.map((e,i)=>!n||n[i]?this.pixelFormatter.incrementBy(e,r):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,r){return e.map(e=>(0,a.snapToNearestMultiple)(e,r))}isEqual(e,r){return(0,i.valuesEqual)(e,r)}getIncrementTargets(e,{start:r,end:n}){let i={};if(0===r&&n>=e.length)return null;let a=r===n;if(a&&r>=e.length)return{[e.split(",").length-1]:!0};let o=0;for(let s=0,l=e.length;s<l;++s){let l=","===e[s];if(a){if(s===r)return{[o]:!0};l&&++o}else if(l&&++o,r<=s&&s<n&&(i[o]=!0),s>=n)break}return i}getSelection(e,r){let n;let i=Object.keys(r).map(Number),a=e.length,o=0;for(let r=0,s=e.length;r<s;++r){if(","===e[r]){++o;continue}if(i.includes(o)){if(null==n){if(/[\s,]/.test(e[r]))continue;n=r}for(;r<s&&/[^,]/.test(e[r]);)++r;a=r,--r}}return{start:n??0,end:a}}}var y=(e=>(e[e.SECONDS=0]="SECONDS",e[e.MILLISECONDS=1]="MILLISECONDS",e))(y||{});class b extends h{constructor(e,r=!1,n=!0){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.padMinutes=!0,this.displayFractions=r,this.padMinutes=n}parse(e,r){if(e.includes(":")){let n=e.split(":");if(n.length>3)throw Error("Format must match HH:MM:SS");let[i,a,o]=n.reverse().map(e=>e.trim()),s=i?super.parse(i,r):0,l=a?super.parse(a,r):0,c=o?super.parse(o,r):0,d=![l,c].every(Number.isInteger),u=!this.displayFractions&&!Number.isInteger(s);if(d||u)throw Error("Cannot have fractional parts in timestamp");return 3600*c+60*l+s}let[n,i]=e.split(".",2),a=`${n.slice(-6,-4)}:${n.slice(-4,-2)}:${n.slice(-2)}`,o=i?`${a}.${i}`:a;return this.parse(o)}format(e){if(null==e)return"";let r=Math.floor(e/3600);e%=3600;let n=`${Math.floor(e/60)}`;this.padMinutes&&(n=n.padStart(2,"0")),e%=60;let i=this.displayFractions?e:Math.floor(e),a=Number.isInteger(i)?i:i.toFixed(2),o=Number.isInteger(i)?`${i}`.padStart(2,"0"):`${a}`.padStart(5,"0");return r?`${r}:${n}:${o}`:`${n}:${o}`}}class I extends h{constructor({decimals:e,hidePercentSign:r,...n}={}){super(n),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=r&&(this.hidePercentSign=r)}format(e){if(null==e)return"";let r=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(r+="%"),r}parse(e,r){return super.parse(e,null!=r?100*r:void 0)/100}getNudgeAmount(e){return e?.1:.01}}class T extends h{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class v extends h{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class S extends h{constructor(e={}){super((0,l.b$)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class w extends h{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,r){return Math.round(super.parse(e,r))}}class A extends h{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,r){return super.parse(e,r)/this.normalizeFactor}format(e){let r=e*this.normalizeFactor;return`${Math.round(r)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class N{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||p._q,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||p.bA,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let r=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let n=(0,s.O4)(e,NaN);if(null!==n.value&&isFinite(n.value))return[n.value,r]}parse(e,r){let n=N.parse(e);if(void 0===n)throw Error("Could not parse input");let[i,a]=n;return void 0===a&&(a=null==r?"PERCENT":r.units),{value:i,units:a}}format(e){if(null==e||e.value!=e.value)return"";let r=parseFloat(e.value.toFixed(2));return"PERCENT"===e.units?`${r}%`:`${r}px`}getNudgeAmount(e,r){return e?"PIXELS"===r.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===r.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,r){return{value:e.value+r,units:e.units}}clamp(e){return{value:(0,a.clampOptional)(e.value,this.min,this.max),units:e.units}}snap(e,r){return{value:(0,a.snapToNearestMultiple)(e.value,r),units:e.units}}isEqual(e,r){return e.units===r.units&&e.value===r.value}}let C=new N({bigPixelNudgeAmount:p._q,smallPixelNudgeAmount:p.bA});class O{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){let r=(e=e.toLowerCase()).includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let n=(0,s.O4)(e);if(null!==n.value&&isFinite(n.value))return{value:n.value,type:r};throw new m("Could not parse input",n.error)}format(e){if(null==e)return"";let r=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${r}x`;case"CONTENT_WIDTH":return`${r}w`;case"CONTENT_HEIGHT":return`${r}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,r){return{value:(0,a.snapToNearestMultiple)(e.value+r,r),type:e.type}}clamp(e){let r=e.value;return(r=Math.min(r,"CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE))<=0&&(r=1),{value:r,type:e.type}}snap(e,r){return{value:(0,a.snapToNearestMultiple)(e.value,r),type:e.type}}isEqual(e,r){return e.type===r.type&&e.value===r.value}}},723081:(e,r,n)=>{"use strict";n.d(r,{D:()=>p,VG:()=>I,Xi:()=>E,ZB:()=>u,_r:()=>c,cP:()=>h,el:()=>_,js:()=>f,mj:()=>g,qj:()=>m,ro:()=>d});var i=n(634832),a=n(534611);n(157663);var o=n(966712),s=n(939863),l=n(848661);n(973149);class c{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class d{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class u{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,s.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,s.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,s.t)("fullscreen.properties_panel.gif"):(0,s.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,s.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,s.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,s.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,s.t)("fullscreen.properties_panel.diamond");default:return""}}}}class p{constructor(){this.format=e=>{switch(e){case"FILL":return(0,s.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,s.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,s.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,s.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.background_blur");default:return""}}}}class h{constructor(e){this.scene=e}hasNameForNode(e){return e===a.AD||null==e||!!this.scene.get(e)}format(e){if((0,l.gl)(e))return(0,s.t)("fullscreen.mixed");if(e===a.AD||null==e)return(0,s.t)("proto.node_name_formatter.none");let r=this.scene.get(e);return r?r.stateAbbreviatedName||r.name:(0,s.t)("proto.node_name_formatter.missing")}}class _{constructor(e){this.useNoneInsteadOfInstant=!1,this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return this.useNoneInsteadOfInstant?(0,s.t)("slides.properties_panel.slide_transition.option.none"):(0,s.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,s.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,s.t)("proto.transition_behavior.push");case"MOVE":return(0,s.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,s.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,s.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,s.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,s.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,s.t)("proto.transition_behavior.animate")}return""},e&&(this.useNoneInsteadOfInstant=e)}}function g(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}class f{constructor(e){this.isUI3=!1,this.isUI3=!!e}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to");case"GO_BACK":return(0,s.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay");case"OPEN_URL":return(0,s.t)("proto.action_open_link");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto)return(0,s.t)("proto.action_set_variable_or_component_property");return(0,s.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return this.isUI3?(0,s.t)("proto.action_check_if_else"):(0,s.t)("proto.action_conditional");default:return""}}}class E{constructor(e){this.isUI3=!1,this.isUI3=!!e}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none_interaction");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to_interaction");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay_interaction");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to_interaction");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay_interaction");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to_interaction");case"GO_BACK":return(0,s.t)("proto.action_back_interaction");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay_interaction");case"OPEN_URL":return(0,s.t)("proto.action_open_link_interaction");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto)return(0,s.t)("proto.action_set_variable_or_property_interaction");return(0,s.t)("proto.action_set_variable_interaction");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode_interaction");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_interaction");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_interaction");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle_interaction");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_interaction");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_interaction");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_forward_interaction");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_backward_interaction");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_time_interaction");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_interaction");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_interaction");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_time_interaction");case"CONDITIONAL":return this.isUI3?(0,s.t)("proto.action_check_if_else_interaction"):(0,s.t)("proto.action_conditional_interaction");default:return""}}}let y=()=>(0,s.t)("proto.interaction.type.mouse_enter_deprecated"),b=()=>(0,s.t)("proto.interaction.type.mouse_leave_deprecated");class I{constructor(){this.format=e=>{if(null==e)return(0,s.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,s.t)("proto.interaction.type.none");case"ON_CLICK":return(0,s.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,s.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,s.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,s.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return y();case"MOUSE_OUT":return b();case"MOUSE_ENTER":return(0,s.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,s.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,s.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,s.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,s.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,s.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,s.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,s.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,s.t)("proto.interaction.type.when_video_ends");default:(0,i.assertNever)(e)}}}}},453909:(e,r,n)=>{"use strict";n.d(r,{N:()=>a});var i=n(99506);function a(e){switch(e){case i.y4.WHITEBOARD:return i._Y.WHITEBOARD;case i.y4.SLIDE_TEMPLATE:return i._Y.SLIDES;default:return i._Y.DESIGN}}},13379:(e,r,n)=>{"use strict";n.d(r,{i:()=>o});var i=n(563706),a=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(a||{});function o(e){return"which"in e?3===e.which||i.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||i.Ay.mac&&0===e.button&&e.ctrlKey)}},297336:(e,r,n)=>{"use strict";n.d(r,{mc:()=>o,vx:()=>a});var i=n(730371);function a(e,r){return null!=e[r]&&e[r]>0}function o(e,r){return Object.keys(e).some(n=>n in e&&!(0,i.deepEquals)(r[n],e[n],!1))}n(848661)},74930:(e,r,n)=>{"use strict";n.d(r,{B:()=>c}),n(411855);var i=n(707458),a=n(178323),o=n(497306);class s{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,s.instance=this}static removeInstance(){s.instance=void 0}trackNodesAsTemplate(e,r,n,a){let o=i.q.instance;if(Array.from(r).forEach(e=>{l(o.get(e))||r.delete(e)}),0===r.size)return;let s=Math.floor(.1*r.size),c={templateId:e,fileKey:n,nodeGUIDs:r,trackedNodeCount:r.size,deletionThreshold:s,creationMethod:a};this.allTemplateInfo.add(c),r.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let r=this.nodeGUIDsToTemplate.get(e);if(!r)return;this.nodeGUIDsToTemplate.delete(e);let n=r.nodeGUIDs;n.delete(e),n.size<=r.deletionThreshold&&(this.stopTrackingTemplate(r),(0,a._)("template_deleted",{templateId:r.templateId,fileKey:r.fileKey,productType:"figjam",trackedNodeCount:r.trackedNodeCount,creationMethod:r.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let l=e=>!!e&&("CANVAS"===e.type?e.visible:l(e.parentNode));async function c(e,r,n,i,{enableTracking:a=!0}={}){let l=s.instance;if(!a||!l)return await i();let d=(0,o.UP)(),u=await i(),p=new Set((0,o.UP)());return d.forEach(e=>p.delete(e)),r||="null",l.trackNodesAsTemplate(e(),p,r,n),u}},710667:(e,r,n)=>{"use strict";n.d(r,{Fq:()=>u,N1:()=>_,kt:()=>g});var i=n(966712),a=n(391388),o=n(776621),s=n(218881),l=n(978779),c=n(216158),d=n(248361),u=(e=>(e.NUX="nux",e.ORG_SELF_SERVE="org-self-serve",e.ORG_UPGRADE="org-upgrade",e.TEAM_ADMIN_CONSOLE="team-admin-console",e.TEAM_UPGRADE="team-upgrade",e.UPSELL_MODALS="upsell-modals",e))(u||{});let p=c.M4.Query({fetch:()=>d.n.getRates().then(e=>e.data.meta).catch(e=>{throw(0,l.Ix)(a.Qw.error(e)),e}),key:"billing_prices_active_rates"}),m=(c.M4.Query({fetch:({type:e,id:r})=>d.n.getContractRates(e,r).then(e=>e.data.meta).catch(e=>{throw(0,l.Ix)(a.Qw.error(e)),e}),key:"billing_prices_contract_rates"}),e=>{switch(e){case"nux":return"billing_price_loading_nux";case"org-self-serve":return"billing_price_loading_org_self_serve";case"org-upgrade":return"billing_price_loading_org_upgrade";case"team-admin-console":return"billing_price_loading_team_admin_console";case"team-upgrade":return"billing_price_loading_team_upgrade";case"upsell-modals":return"billing_price_loading_upsell_modals";default:return(0,o.us)(`No feature flag mapped to price context "${e}". Price data will not be loaded.`),null}}),h=e=>{let r=m(e);if(!r)return!1;let n=!!(0,i.kc)()[r];return!!(0,i.kc)().billing_price_loading_web&&n};function _(e){return function(e,r){let n=h(e),[o]=(0,c.IT)(r,{enabled:n}),s=(0,i.kc)().billing_price_loading_allow_errors;return"errors"!==o.status||s?o:a.Qw.disabledSuspendable({release:()=>{}})}(e,p(null))}function g(){let{getConfig:e}=(0,s.I7)("exp_price_fetching"),r=e().get("enabled",!1),n=p(null),[i]=(0,c.IT)(n,{enabled:r});return"errors"===i.status?a.Qw.disabledSuspendable({release:()=>{}}):i}},521033:(e,r,n)=>{"use strict";n.d(r,{J:()=>m});var i=n(411855),a=n(188507),o=n(587670),s=n(568214),l=n(428654),c=n(809831),d=n(774191),u=n(144119),p=n(168039);function m(){let e=(0,c.ow)(),r=(0,u.sO)(),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),m=(0,a.d4)(e=>e.mirror.sceneGraph?.get(n)?.backgroundColor),h=(0,p.DP)(),_=(0,i.useMemo)(()=>l.F.format(m),[m]);if(e){let e=o.DV9?.getWhiteboardCanvasColor();return e?l.F.format((0,d.aH)(e)):"#ffffff"}return r&&o.Ez5?l.F.format((0,d.aH)((0,d.R0)(o.Ez5.getFSCanvasDefaultFill()))):m?_:(0,s.Bx)(h)}},289104:(e,r,n)=>{"use strict";n.d(r,{JT:()=>d});var i=n(188507),a=n(915440),o=n(30637),s=n(99506),l=n(279453),c=n(137459);function d(){let e=(0,i.d4)(e=>e.openFile?.key);if((0,o.lZ)())return(0,i.d4)(r=>{let{hubFiles:n,figFilePublishedAsHubFile:i}=r,a=e&&i[e];return a?(0,c.B4)(n[a]):null});let r=(0,a.Rs)(l.ehp,{fileKey:e||""},{enabled:!!e});if("loaded"!==r.status)return null;let n=r.data.file?.publishedHubFile;return n?.publishingStatus!==s.KB.APPROVED_PUBLIC?null:n}},592096:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670);var i=n(91408);n(44948),n(489604),n(964881),n(346124);var a=(e=>(e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e.COLLINEAR="COLLINEAR",e))(a||{}),o=(e=>(e.TOP="TOP",e.RIGHT="RIGHT",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.UNKNOWN="UNKNONWN",e))(o||{}),s=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP="TOP",e.TOP_RIGHT="TOP_RIGHT",e.RIGHT="RIGHT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM="BOTTOM",e.BOTTOM_LEFT="BOTTOM_LEFT",e.LEFT="LEFT",e.OVERLAP="OVERLAP",e))(s||{});n(617453),n(100197),n(507956);var l=n(146935);(0,i.jz)(l.leftNavLeftMarginUI3),(0,i.jz)(l.propertiesPanelRightMarginUI3)},809831:(e,r,n)=>{"use strict";n.d(r,{E3:()=>m,Em:()=>p,HW:()=>d,JV:()=>_,XE:()=>c,lg:()=>l,my:()=>h,ow:()=>u,u8:()=>g});var i=n(188507),a=n(529928),o=n(99506),s=n(239671);function l(){return(0,i.d4)(e=>{var r;return(r=e.selectedView)&&"fullscreen"===r.view?(0,s.oD)(r.editorType):o._Y.DESIGN})}function c(e){return e&&"fullscreen"===e.view?e.editorType:s.nT.Design}function d(){return(0,i.d4)(e=>"prototype"===e.selectedView.view)}function u(){return l()===o._Y.WHITEBOARD}function p(){return l()===o._Y.DESIGN}function m(){return(0,i.d4)(e=>{let r=e.selectedView;return"fullscreen"!==r.view?s.nT.Design:r.editorType})}function h(){return(0,i.d4)(e=>_(e.selectedView))}function _(e){return"fullscreen"!==e.view?null:e.editorType}let g=(0,a.bt)(e=>_(e.selectedView))},984472:(e,r,n)=>{"use strict";n.d(r,{Ol:()=>l,xy:()=>s});var i=n(411855);n(86538);var a=n(809831),o=n(215822);function s(e,r){let n=(0,a.my)();return(0,i.useMemo)(()=>(0,o.NW)(n,e,r),[n,r,e])}function l(e){let r=(0,a.my)();return(0,i.useMemo)(()=>(0,o.AG)(r,e),[r,e])}n(507956)},151166:(e,r,n)=>{"use strict";n(188507),n(511617),n(737947),n(761870),n(939863),n(662275),n(977466),n(601538)},198371:(e,r,n)=>{"use strict";n.d(r,{$D:()=>m,DG:()=>p,dk:()=>h});var i=n(411855),a=n(188507),o=n(38580),s=n(374626),l=n(915440),c=n(279453),d=n(479296);let u=(0,o.eU)(null),p=(0,d.D)((e,r=!1)=>{let n=(0,l.Rs)(c.JKh,{fileKey:e},{enabled:!!e});return(0,i.useMemo)(()=>"loaded"!==n.status?r?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:n.data.figFileWorkshopMode&&new Date<n.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:n.data.figFileWorkshopMode.expiresAt,id:n.data.figFileWorkshopMode.id}:{enabled:!1},[n,r])});function m(e=!1){return function(e=!1){let r=(0,a.d4)(e=>e.openFile);return p(r?.key||"",e)}(e).enabled}function h(e){let r=s.zl.get(u);return!!e&&!!r&&new Date<r&&!e.isTryFile}},480952:(e,r,n)=>{"use strict";n.d(r,{V:()=>m}),n(411855),n(188507);var i=n(302245);n(794272),n(103907);var a=n(59181),o=n(12493);n(678340);var s=n(335682),l=n(428467),c=n(284321),d=n(984968),u=n(279145);n(636227),n(963067),n(261607);let p=(0,i.Mz)([s.tB,l.getPermissionsStateMemoized,e=>e.selectedView.editorType,e=>e.mirror.appModel.topLevelMode,e=>e.mirror.appModel.multiplayerSessionState,e=>(0,d.ZT)(e)||null,(e,r)=>r],(e,r,n,i,a,s,l)=>(0,o.gW)(e,r,n,l.warningLevel,i,a,l.isRecovery,s));function m(e,{fullscreenMemoryWarningLevel:r,unreadCommentCount:n,pluginAndWidgetMenuArgs:i,isRecovery:p}){let m=(0,d.ZT)(e)||null;return(0,a.p)({fileMenuArgs:{branchingActionsStatus:(0,o.gW)((0,s.tB)(e),(0,l.getPermissionsState)(e),e.selectedView.editorType,r,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,p,m),saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:n,isOrgMember:(0,l.canMemberOrg)(e.currentUserOrgId,e),shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:i,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,u.Yh)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,u.Yh)(e.mirror.appModel,"zoom-out")},publishingModalArgs:{isPublishingModalDisabled:(0,c.LD)(e)}})}(0,i.Mz)([p,e=>e.saveAsState,e=>e.mirror.appModel.topLevelMode,(e,r)=>r],(e,r,n,i)=>({branchingActionsStatus:e,saveAsState:r,topLevelMode:n,unreadCommentCount:i.unreadCommentCount,isOrgMember:i.isOrgMember,shouldShowSlideConversionEntrypoint:i.shouldShowSlideConversionEntrypoint}))},818:(e,r,n)=>{"use strict";n.d(r,{b:()=>s}),n(411855),n(358145),n(617453),n(29680);var i=n(69961),a=n(239671),o=n(809831);function s(){let e=(0,o.my)(),r=e===a.nT.Design,n=e===a.nT.DevHandoff,s=e===a.nT.Slides,l=(0,i.o3)(i.nt.ui3InsetEditor);return(!!r||!!n||!!s)&&l}},877645:(e,r,n)=>{"use strict";n.d(r,{v:()=>c});var i=n(411855);n(841563);var a=n(915440),o=n(857766),s=n(279453),l=n(971646);function c(e){let r=(0,a.Rs)(s.ZzU,{figFileKey:null!=e?(0,o.Kz)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return i.useMemo(()=>{if("loaded"!==r.status)return;let e=r.data?.figFileLinkExpirationConfig,n=r.data?.file;if(!e)return;let i=(0,l.d4)(e);return{file:n,accessReverted:!!e.accessReverted,expiresAt:e.expiresAt?.toISOString(),activeExpiration:i?.toISOString()}},[r])}},475820:(e,r,n)=>{"use strict";n.d(r,{cQ:()=>a}),n(711525),n(864319),n(99506),n(679892);let i=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,9})?Z?$/;function a(e,r,n=()=>!1,i){let o=[],l=[],c={},d=r.reduce((e,r)=>(e.set(r[i],r),e),new Map),u=e.reduce((e,r)=>(e.set(r[i],r),e),new Map);for(let r of e){let e=r[i],a=d.get(e);if(a){let o=s(r,a,n,[],"",e);o.length&&(c[r[i]]=o)}else o.push(e);d.delete(r[i])}for(let e of d.values()){let r=e[i],a=u.get(r);if(a){let i=s(a,e,n,[],"",r);i.length&&(c[r]=i)}else l.push(r)}return{lgMissingIds:o,lgExtraIds:l,differences:c}}function o(e){return"object"==typeof e&&null!==e}function s(e,r,n,a,l,c){if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return a.push({id:c,key:l,sinatraValue:e,lgValue:r}),a;let i=Math.max(e.length,r.length);for(let d=0;d<i;d++){let i=e[d],u=r[d];if(o(i)&&o(u)){s(i,u,n,a,`${l}[${d}]`,c);continue}i!==u&&a.push({id:c,key:`${l}[${d}]`,sinatraValue:i,lgValue:u})}return a}for(let d of new Set([...Object.keys(e),...Object.keys(r)])){if(n(d))continue;let u=e[d],p=r[d],m=l?`${l}.${d}`:d;if(o(u)&&o(p)){s(u,p,n,a,m,c);continue}d.endsWith("_at")&&"string"==typeof u&&"string"==typeof p&&i.test(u)&&i.test(p)&&u?.substring(0,17)===p?.substring(0,17)||u===p||a.push({id:c,key:m,sinatraValue:u,lgValue:p})}return a}},731130:(e,r,n)=>{"use strict";n(411855),n(188507),n(776250),n(966712),n(915440),n(743282),n(279453),n(643067)},892677:(e,r,n)=>{"use strict";n(38329);var i=n(374626),a=n(38580),o=n(915440);n(711525),n(195847);var s=n(335682);n(860178);var l=n(279453),c=n(479296);n(151166),(0,c.D)(()=>{let e=(0,i.md)(s.ze);return(0,o.Rs)(l.jmg,{fileKey:e||""},{enabled:!!e})}),(0,a.eU)(!1)},529982:(e,r,n)=>{"use strict";n.d(r,{z:()=>o});var i=n(411855),a=n(459401);function o(e,r,n){let[o,s]=i.useState(e),l=i.useCallback(e=>{s({columnName:e,isReversed:o.columnName===e&&!o.isReversed})},[o.columnName,o.isReversed]),c=i.useMemo(()=>{let e=[...r],i=n.find(e=>e.name===o.columnName);return i&&i.getSortValue&&function(e,r,n){if(!r.getSortValue)return;let i=n.isReversed,o=i;r.sortReversed&&(i=!i),r.sortSecondaryReversed&&(o=!o),r.sortNumerically?(0,a.sortNumericallyByFn)(e,r.getSortValue,i,r.getSecondarySortValue,o):(0,a.sortAlphabeticallyByFn)(e,r.getSortValue,{isDescending:i,isSecondaryDescending:o},r.getSecondarySortValue)}(e,i,o),e},[n,r,o]);return[o,l,c]}},963067:(e,r,n)=>{"use strict";n.d(r,{Cb:()=>l,U5:()=>c,Yo:()=>s.Yo,yy:()=>d});var i=n(188507);n(207286);var a=n(694687),o=n(99506),s=n(697551);function l(){let e=(0,a.sZ)();return(0,i.d4)(r=>{let n=e&&r.orgUsersByOrgId[e.id];return n&&n[r.user.id]?.permission===o._D.GUEST})}function c(){let e=(0,a.sZ)(),r=(0,i.d4)(r=>e&&r.orgUsersByOrgId[e.id][r.user.id]?.permission);return r&&r!==o._D.GUEST}function d(){return(0,i.d4)(e=>e.openFile?.parentOrgId&&e.orgById[e.openFile.parentOrgId]||void 0)}},6949:(e,r,n)=>{"use strict";n.d(r,{LQ:()=>c,a9:()=>o,eV:()=>l}),n(411855);var i=n(188507);n(634832),n(841563),n(776250),n(966159),n(157663),n(358145),n(733556),n(853828),n(130097),n(915440),n(711525),n(586459),n(743282),n(881388),n(939863),n(411045),n(581063),n(783162),n(193360),n(582410),n(720647),n(99506),n(279453),n(296796),n(912458),n(227544);var a=n(596607);n(916525),n(66037),n(679892),n(475820);function o(){return(0,i.d4)(e=>(0,a.xw)(e))}class s extends null{}function l(e,r){return!!(e&&e.are_custom_templates_allowed&&r)}function c(e){let r=(0,a.xw)(e);return l(e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,r)}},884484:(e,r,n)=>{"use strict";n.d(r,{NV:()=>v,OX:()=>T,Pt:()=>S,qi:()=>N,qu:()=>A,x2:()=>w});var i=n(188507),a=n(634832),o=n(939863),s=n(545941),l=n(71425),c=n(57879),d=n(662275),u=n(483990),p=n(813648),m=n(860178),h=n(4564),_=n(215822),g=n(555328),f=n(813408),E=n(376485),y=n(749449),b=n(180881),I=n(774620);function T(e){let r;let n=(0,i.wA)(),a=(0,m.TA)();if(!e||a!==e.creator.id)return null;if((0,s.AC)(e))r=(0,o.t)("community.plugins.cancel_review");else if((0,g.m3)(e)){if((0,s.Pg)(e))return null;r=(0,o.t)("community.resource.delist")}else r=(0,o.t)("community.resource.unpublish");return{displayText:r,callback:()=>{n((0,d.to)({type:b.H,data:{plugin:e},showModalsBeneath:!0}))}}}function v(e,r){let n=(0,i.wA)(),a=(0,p.LR)(),s=e&&!e.error?r?(0,o.t)("community.plugins.publish_new_version"):(0,o.t)("community.resource.publish"):r?r.is_widget?(0,o.t)("community.plugins.edit_resource_details.widget"):(0,o.t)("community.plugins.edit_resource_details.plugin"):void 0;return s?{displayText:s,callback:()=>{a(),n((0,c.r)({localFileId:e?.localFileId,publishedPluginId:r?.id,entryPoint:f.k2.EDITOR}))}}:null}function S(e,r){let n=(0,i.wA)();if(!e||!r)return null;switch(e){case E.ho.LOAD:return{action:()=>{let e=r.localFileId;n((0,l.JZ)({resourceType:(0,E.k0)(r)?"widget":"plugin",localFileIdToRemove:e}))},msg:(0,o.t)("universal_insert.missing_manifest"),buttonText:(0,o.t)("universal_insert.locate"),displayText:(0,o.t)("universal_insert.locate_missing_manifest")};case E.ho.VALIDATE:case E.ho.PARSE:return{action:()=>{n((0,d.to)({type:I.K,data:{localPlugin:r}}))},msg:(0,o.t)("universal_insert.manifest_error"),buttonText:(0,o.t)("universal_insert.see_details"),displayText:(0,o.t)("universal_insert.manifest_error_view")};default:(0,a.assertNever)(e)}}function w(e,r,n){let a=(0,i.wA)();return{displayText:(0,o.t)("universal_insert.manage_permissions"),callback:()=>{n&&n();let i=e&&(0,E.ZQ)(e)?e.localFileId:void 0;a((0,c.r)({localFileId:i,publishedPluginId:r?.id,initialTab:y.KM.PERMISSIONS,entryPoint:f.k2.EDITOR}))}}}function A(e){let r=(0,h.M)();return e?{displayText:(0,u.A)((0,_.YQ)()),callback:()=>{r&&r.openExtensionDirectory(e.localFileId)}}:null}function N(e,r){return{displayText:e?(0,o.t)("universal_insert.remove_local_version"):(0,o.t)("universal_insert.remove"),callback:r}}},964197:(e,r,n)=>{"use strict";n.d(r,{a:()=>l});var i=n(411855),a=n(915440),o=n(279453);let s=(e,r,n)=>{let s=(0,a.Rs)(o.i1D,{orgId:e},{enabled:!!e});return i.useMemo(()=>{if("loaded"===s.status){let e=s.data?.currentUser?.baseOrgUser?.pluginRequests;if(e)return e.filter(e=>{let i=n?e.workspaceId===n:!!e.workspaceId==!!n;return e.pluginId===r&&i})}return[]},[s,n,r])};function l(e,r,n){return s(e,r,n).filter(e=>"pending"===e.status).length>0}},780700:(e,r,n)=>{"use strict";n.d(r,{Bi:()=>L,Gt:()=>C,IK:()=>R,RK:()=>A,dR:()=>D,ee:()=>O,hN:()=>P});var i=n(411855),a=n(188507),o=n(675678),s=n(794272),l=n(374626),c=n(776621),d=n(979385),u=n(785315),p=n(370934),m=n(693897),h=n(738269),_=n(750425),g=n(781267),f=n(809831),E=n(697551),y=n(147206),b=n(215822),I=n(239671),T=n(376485),v=n(16774),S=n(756085);function w(){let e=(0,f.E3)(),{orgEntity:r,org:n,openFile:a,isReadOnly:o,userCanRunPlugins:l,activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}=(0,s.R)(e=>({orgEntity:(0,E.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,y.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),p=(0,S.$1)();return i.useMemo(()=>({openFile:a,localExtensions:p,orgEntity:r,org:n,isReadOnly:o,userCanRunPlugins:l,editorType:e,allSavedPlugins:{},activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}),[a,p,r,n,o,l,e,c,d,u])}function A(e){let r=(0,S.Be)(),n=r.plugins[e]||r.orgPlugins[e],i=(0,S.cW)()[e];return n||(i?(0,b.Ar)(i):null)}function N(e){return{type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function C(e,r){let n=A(e),s=w(),m=(0,v.b)(),h=(0,d.gB)(),_=(0,a.Pj)(),[f,E]=(0,l.fp)(u.H);return i.useCallback(e=>{if(!n){console.error("Plugin version not found"),(0,c.$D)(o.FigmaTeam.EXTENSIBILITY,Error("Plugin version not found"));return}let i=N(n);if((0,b.YG)(n)&&k(_),(0,b.mx)(n)){h((0,p.$n)(n)),k(_),E(u._.PRIMARY);return}(0,g.Im)({...s,allSavedPlugins:{[n.plugin_id]:n}},r,e||i),m()},[n,s,r,m,_,h,E])}function O(e){return{type:"insert-local-widget",localFileId:e.localFileId,command:void 0}}function L(e){return{type:"insert-installed-widget",pluginId:e.plugin_id,command:void 0}}function R(e){return(0,T.ZQ)(e)?(0,T.k0)(e)?O(e):P(e):(0,T.k0)(e)?L(e):N(e)}function P(e){return{type:"run-local-plugin",localFileId:e.localFileId,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function D(e,r){let n=w(),o=Object.values((0,S.$1)()).find(r=>r.plugin_id===e),s=(0,v.b)(),c=(0,d.gB)(),m=(0,a.Pj)(),[h,_]=(0,l.fp)(u.H);return i.useCallback(e=>{if(!o){console.error("Plugin not found");return}let i=P(o);if((0,b.YG)(o)&&k(m),(0,b.mx)(o)){c((0,p.$n)(o)),k(m),_(u._.PRIMARY);return}(0,g.Im)(n,r,e||i),s()},[o,n,r,s,m,c,_])}function k(e){let{selectedView:r}=e.getState();"fullscreen"===r.view&&r.editorType===I.nT.Design&&(e.dispatch(h.$T({...r,view:"fullscreen",editorType:I.nT.DevHandoff})),(0,m.Ym)(e.getState(),I.nT.DevHandoff,"plugin_run"))}},756085:(e,r,n)=>{"use strict";n.d(r,{$1:()=>k,B7:()=>B,Be:()=>Y,JI:()=>ed,N3:()=>G,S0:()=>eo,U6:()=>ea,Ud:()=>V,WK:()=>M,YN:()=>ec,YW:()=>q,ZT:()=>x,_P:()=>$,b4:()=>ee,cW:()=>F,j1:()=>eu,j8:()=>es,ll:()=>ei,mf:()=>H,op:()=>ep,qr:()=>X,tB:()=>et});var i=n(411855),a=n(188507),o=n(730371),s=n(675678),l=n(889012),c=n.n(l);n(776250);var d=n(794272),u=n(966712),p=n(915440);n(395900);var m=n(776621),h=n(939863),_=n(321476),g=n(392592);n(545941),n(971120);var f=n(956143),E=n(941381),y=n(809831);n(258237);var b=n(641638),I=n(29680);n(737499);var T=n(335682),v=n(694687),S=n(860178),w=n(99506),A=n(279453),N=n(336599),C=n(147206),O=n(215822),L=n(376485);n(508567);var R=n(507956),P=n(984472),D=n(720289);function k(e){let r=(0,a.d4)(e=>e.localPlugins);return(0,P.xy)(r,e)}function M(e){return Object.values(k()).find(r=>r.plugin_id===e)}function F(){let e=(0,a.d4)(e=>e.publishedPlugins),r=(0,y.my)();return(0,i.useMemo)(()=>(0,O.xC)(r,e),[e,r])}let x=()=>(0,a.d4)(e=>e.publishedWidgets);function U({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=F();return(0,i.useMemo)(()=>{if(!r)return[];let i=(0,O.i8)(Object.values(n));return(0,O.Q4)((0,O.ky)(i,r,e))},[n,r,e])}function B(e){return Object.values(U({includePendingPublishers:!1})).find(r=>r.id===e)}function V(e){return Object.values(function({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=x();if(!r)return[];let i=(0,O.i8)(Object.values(n));return(0,O.Q4)((0,O.ky)(i,r,e))}({includePendingPublishers:!1})).find(r=>r.id===e)}function G(e,r){if(null===e.current_plugin_version_id)return null;let n=e.versions[e.current_plugin_version_id],i={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:n.redirect_icon_url,coverImageUrl:n.redirect_cover_image_url,name:n.name,version:n.version,releaseNotes:n.release_notes,description:n.description,tagline:n.tagline,creatorPolicy:n.creator_policy,manifest:JSON.stringify(n.manifest),createdAt:new Date(n.created_at),iconPath:n.redirect_icon_url,coverImagePath:n.redirect_cover_image_url,codePath:n.redirect_code_url,plugin:{currentPluginVersionId:n.id},playgroundFigFileKey:n.playground_fig_file_key??null,hasPlaygroundFile:!!n.playground_fig_file_key,playgroundFileVersionId:n.playground_file_version_id??null,userId:"",snapshotPath:""},a={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,thumbnailUrl:"",userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===w.KB.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,installStatus:null,monetizedResourceMetadataId:e.monetized_resource_metadata?.id??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,categoryId:"",uniqueRunCount:0,pluginEditorType:0,commentsSetting:"",currentUserFirstRanAt:"",profileInstallStatus:2,redirectThumbnailUrl:"",communityPublishers:e.community_publishers?.accepted.map(r=>({id:r.id,isPending:!1,role:w.un.CREATOR,userId:r.primary_user_id,profileId:r.id,pluginId:e.id,hubFileId:null,profile:{id:r.id,profileHandle:r.profile_handle,team:"team"===r.entity_type?{id:r.id,name:r.name}:null,org:"org"===r.entity_type?{id:r.id,name:r.name}:null,user:"user"===r.entity_type?{id:r.primary_user_id,name:r.name}:null,teamId:"team"===r.entity_type?r.id:null,orgId:"org"===r.entity_type?r.id:null,primaryUserId:"user"===r.entity_type?r.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:r.current_user_is_following,communityUserIsFollowed:r.current_user_is_followed,entityType:r.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:r.name,imgUrl:null}}))||[],currentPluginVersion:i,viewableInEditor:!0};return{pluginId:e.id,createdAt:new Date(Date.now()),userId:r.userId,orgId:r.orgId,pluginVersionId:e.current_plugin_version_id,plugin:a,pinnedStatus:w.hM.UNPINNED}}function H(e,r,n,i){if(!e||e.publishingStatus&&[w.KB.ORG_PRIVATE,w.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus)&&(!e.orgId||e.orgId!==r)&&!(0,u.kc)().community_hub_admin)return;let a=e.currentPluginVersion;if(!a)return;if(!a.manifest){(0,m.$D)(s.FigmaTeam.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let o=e.isWidget?"widget":"plugin",l=function(e){try{let r="string"==typeof e?JSON.parse(e):e;"dynamic-page"!==r.documentAccess&&delete r.documentAccess;let n=L.pL.safeParse(r);if(!n.success)return(0,m.$D)(s.FigmaTeam.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(r,null,2),rawManifest:JSON.stringify(e,null,2),errors:n.error.format()}}),r;return n.data}catch(r){(0,m.$D)(s.FigmaTeam.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}(a.manifest);if(!l)return;let c=`?resource_type=${o}&resource_id=${e.id}`;n&&(c+=`&fuid=${n}`);let d={id:a.id,plugin_id:e.id,name:a.name||"",current_plugin_version_id:a.plugin?.currentPluginVersionId||void 0,version:a.version||"",release_notes:a.releaseNotes||"",is_private:!!e.orgId,description:a.description||"",creator_policy:a.creatorPolicy??"",manifest:l,installed_by:i,tagline:a.tagline||"",created_at:a.createdAt.toString(),redirect_icon_url:`/community/icon${c}`,redirect_cover_image_url:`/community/thumbnail${c}`,redirect_code_url:`/community/${o}/${e.id}/code`};return e.communityPublishers&&(d.community_publishers=e.communityPublishers),e.isWidget&&(d.redirect_snapshot_url=`/community/snapshot${c}`),e.orgId&&(d.org_id=e.orgId),d}let W=(e,r,n)=>{let i={},a={},o={},s={},l={},c={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{},userPlugins:{},userWidgets:{}};let d=e.data;for(let e of[{source:"org",savedExtensions:d.org?.installedPlugins},{source:"user",savedExtensions:d.currentUser?.installedPlugins}]){let{source:d,savedExtensions:u}=e;if(u)for(let e of u){let{plugin:u}=e;if(!u||!u.viewableInEditor)continue;let p=H(u,r,n,d);p&&(u.isWidget?(a[e.pluginId]=p,"org"===d?s[e.pluginId]=p:"user"===d&&(c[e.pluginId]=p)):(i[e.pluginId]=p,"org"===d?o[e.pluginId]=p:"user"===d&&(l[e.pluginId]=p)))}}return{plugins:i,widgets:a,orgPlugins:o,orgWidgets:s,userPlugins:l,userWidgets:c}},K=new Set,j=new Set,z=c()(e=>{K.size>0&&(e(E.f1({pluginIds:Array.from(K)})),K.clear()),j.size>0&&(e(E.O8({widgetIds:Array.from(j)})),j.clear())},300);function Y(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.currentUserOrgId),n=(0,p.Rs)(A.BB3,{orgId:r}),o=(0,S.TA)();return i.useMemo(()=>{if("loaded"!==n.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{},userWidgets:{},userPlugins:{}};let{plugins:i,widgets:a,orgPlugins:s,orgWidgets:l,userPlugins:c,userWidgets:d}=W(n,r,o);return!function(e,r,n){let i=Object.keys(r),a=Object.keys(n);i.forEach(e=>K.add(e)),a.forEach(e=>j.add(e)),z(e)}(e,i,a),{loaded:!0,plugins:i,widgets:a,orgPlugins:s,orgWidgets:l,userPlugins:c,userWidgets:d}},[e,n,r,o])}function $(e,r){let n=v.sZ()?.id??null,a=(0,S.TA)(),o=(0,p.Rs)(A.k_1,{orgId:n,pluginId:e},{enabled:r}),s=o.data?.plugin,l=o.status;return i.useMemo(()=>"loaded"!==l?{loaded:!1,plugin:null}:{loaded:!0,plugin:s?H(s,n,a,null)??null:null},[l,s,n,a])}function q(e,r){return e.name.localeCompare(r.name)}let Z={loaded:!0,plugins:{}};function X(){return Q(function(){let e=(0,a.d4)(e=>e.recentlyUsed.widgets),r=function(){let e=k();return(0,i.useMemo)(()=>{let r={};for(let n in e){let i=e[n];(0,L.k0)(i)&&(r[n]=i)}return r},[e])}(),n=(0,D.o)(),o=(0,S.TA)(),s=(0,u.kc)().ext_filter_recents_by_user_id;return(0,i.useMemo)(()=>{let i=[];return n&&(o||!s)&&e[n].forEach(n=>{if(s&&o&&!n.run_by_user_ids?.includes(o))return;let a=e.fetchedResources[n.id];if(a&&a.version){i.push(a.version);return}if(r[n.id]){i.push(r[n.id]);return}}),i},[n,r,e,o,s])}())}function J(){let e=(0,a.d4)(e=>e.recentlyUsed.plugins),r=function(e){let r=k(void 0);return(0,i.useMemo)(()=>{let e={};for(let n in r){let i=r[n];(0,L.k0)(i)||(e[n]=i)}return e},[r])}(),n=(0,D.o)(),o=(0,S.TA)(),s=(0,u.kc)().ext_filter_recents_by_user_id,l=(0,i.useMemo)(()=>{let i=[];return n&&(o||!s)&&e[n].forEach(n=>{if(s&&o&&!n.run_by_user_ids?.includes(o))return;let a=e.fetchedResources[n.id];if(a&&a.version){i.push(a.version);return}if(r[n.id]){i.push(r[n.id]);return}}),i},[n,e,r,o,s]);return(0,P.Ol)(l)}function Q(e){let r={};return e.filter(e=>!r[e.plugin_id]&&(r[e.plugin_id]=!0,!0))}function ee(){let e=Q(J());return i.useMemo(()=>{let r={};return e.forEach(e=>r[e.plugin_id]=e),r},[e])}function et(){let e=(0,a.d4)(e=>e.recentlyUsed.plugins),r=(0,a.d4)(e=>e.recentlyUsed.widgets),n=(0,S.TA)(),o=(0,D.o)();return(0,i.useMemo)(()=>{let i={};return o&&n&&(e[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(i[e.id]=r)}),r[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(i[e.id]=r)})),i},[o,n,e,r])}function er(e,r,n){let i=Object.keys(e).reduce((e,n)=>{if(r[n]){let i=r[n],a=(0,O.Ar)(i);if(!a)return e;e[n]=a}return e},{});return(0,O.NW)(n,i)}function en(e){let r=v.sZ()?.id??"",n=(0,a.wA)(),i=(0,a.d4)(r=>"plugin"===e?r.whitelistedPlugins:r.whitelistedWidgets),s=!!r,l=function(e,r=!0){let n=v.sZ()?.id??"",i=(0,T.tS)(),a=(0,b.CR)(e,r&&!!i),o=(0,b.kA)(n??"",e,r&&!!n&&!i);return i?a:o}(e,s),c=l.loaded?l.data:[];if(!s)return i;if(!l.loaded)return{};let d={};return c.forEach(e=>{e&&(d[e]=!0)}),(0,o.deepEquals)(d,i)||n(("plugin"===e?_.P:_.o)(d)),d}function ei(){let e=(0,y.my)(),r=(0,v.sZ)(),n=F(),o=!!(r&&r.plugins_whitelist_enforced),s=en("plugin"),l=(0,a.wA)(),c=(0,T.tS)(),d=(0,L.Gb)(r?.id??"",c),u=(0,a.d4)(e=>!!r&&(0,N.mn)(e.loadingState,d));return i.useEffect(()=>{o&&!u&&l(f.Vl({}))},[o,l,u]),i.useMemo(()=>er(s,n,e),[e,s,n])}function ea(){let e=(0,y.my)(),r=(0,v.sZ)(),n=x(),o=!!(r&&r.widgets_whitelist_enforced),s=en("widget"),l=(0,a.wA)(),c=(0,T.tS)(),d=(0,L.n_)(r?.id??"",c),u=(0,a.d4)(e=>!!r&&(0,N.mn)(e.loadingState,d));return i.useEffect(()=>{o&&!u&&l(f.mV({}))},[o,l,u]),i.useMemo(()=>er(s,n,e),[s,n,e])}function eo(e,{searchLocalPlugins:r,searchPublishedPlugins:n}){let a=k(),o=F();return i.useMemo(()=>(0,O.DM)({idToSearch:e,localExtensionsByFileId:r?a:void 0,publishedExtensions:n?o:void 0}),[e,r,n,a,o])}function es(){let e=function(){let e=(0,a.d4)(e=>e.selectedView),r=(0,a.d4)(e=>e.installedPluginVersions);if("fullscreen"!==e.view)return Z;let n=(0,O.GX)(e.editorType);if(!r.loaded)return r;let i={};for(let a of Object.values(r.plugins))(0,O.EK)(n,a.manifest.editorType)?i[a.plugin_id]=a:((0,R.$A)(e)&&(0,O.M5)(a)||"figma"===n&&(0,O.M5)(a))&&(i[a.plugin_id]=a);let o="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,O.NW)(o,i)}}(),r=U(),n=J(),i={};return Object.values(e.plugins).forEach(e=>{i[e.plugin_id]||(i[e.plugin_id]=e)}),Object.values(r).map(O.uF).forEach(e=>{i[e.plugin_id]||(0,L.ZQ)(e)||(i[e.plugin_id]=e)}),n.forEach(e=>{i[e.plugin_id]||(0,L.ZQ)(e)||(i[e.plugin_id]=e)}),i}function el(e){let r={};return Object.keys(e).forEach(e=>{r[e]=!0}),r}function ec(){let e=(0,y.E3)(),r=el(ei()),n=el(ea()),a=(0,d.R)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,selectedView:e.selectedView,openFile:e.openFile})),o=(0,I.p8)("isReadOnly");return i.useCallback(i=>{let{canRun:s}=(0,O.JT)({plugin:i,editorType:e,canRunPluginState:{...a,mirror:{appModel:{isReadOnly:o}},whitelistedPlugins:r,whitelistedWidgets:n}});return s},[e,a,r,n,o])}function ed(){return(0,a.d4)(C.GP)}function eu(e){let r=(0,a.wA)(),n=(0,v.sZ)(),o=!!(n&&n.plugins_whitelist_enforced),s=(0,a.d4)(e=>e.whitelistedPlugins)[e],l=k(),c=i.useMemo(()=>Object.values(l).find(r=>r.plugin_id===e),[l,e]),d=(0,a.d4)(r=>r.publishedPlugins[e]),u=!o||c||d?.org_id,p=!s&&!u;return{validatePublishedPluginInOrgAllowlist:i.useCallback(()=>!p||(r(g.F.enqueue({message:(0,h.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[p,r]),isPluginBlockedByAllowlist:p}}function ep(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:r}=function(e){let r=(0,v.sZ)(),n=!!(r&&r.plugins_whitelist_enforced),a=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,s=ei(),l=ea(),c=e?l:s,d=e?a:n,u=r?.id??"",p=(0,T.tS)(),m=(0,N.oh)(e?(0,L.n_)(u,p):(0,L.Gb)(u,p)),h=i.useCallback(e=>d?e.filter(e=>!(0,L.LR)(e)||!!c[e.plugin_id]):e,[c,d]),_=i.useCallback(e=>o?e.filter(e=>!(0,L.LR)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:m,hasPluginAllowList:n,hasWidgetAllowList:a,filterByPublicResourcesAllowed:_,filterByAllowlist:h}}(!1);return e(r(Q(J())))}},726864:(e,r,n)=>{"use strict";n.d(r,{Yk:()=>g,hX:()=>f,uo:()=>_});var i=n(411855),a=n(188507),o=n(243742);n(587670);var s=n(91408),l=n(38580);n(111538);var c=n(85304);n(964881);var d=n(809831);n(457630);var u=n(737499);n(100197),n(258159);var p=n(693348);n(202232);var m=n(979686),h=n(860168);function _(){let e=(0,u.kd)();return(0,i.useCallback)(async()=>e?.toastBottomInset?await e.toastBottomInset():Promise.reject(),[e])}function g(){let e=(0,m.FF)(),r=(0,m.bz)(),n=(0,m.oV)(),i=(0,m.rD)(),l=(0,p.N)(),u=(0,c.e)(),_=(0,a.d4)(e=>!!e.prototype?.isFooterVisible),g="ui3"===(0,o.DP)().version,f=(0,d.ow)(),E=(0,a.d4)(e=>e.mirror?.appModel.showUi),y=g?h.LQy:h.IuL,b=64+l;return f?e&&(r||n||i)?(0,s.jz)(y)+(0,s.jz)(h.jl4):e?(0,s.jz)(y):0:u?g?b+40:(0,s.jz)(h.ZB$):_?(0,s.jz)(h.P4e):g&&E?b:0}function f(e){let[r,n]=(0,i.useState)(null);return(0,i.useEffect)(()=>{function r(){let r=document.querySelector(e);n(r?.getBoundingClientRect()??null)}r();let i=setInterval(()=>r(),500);return()=>clearInterval(i)},[e]),r}(0,l.eU)(0)},506599:(e,r,n)=>{"use strict";n.d(r,{iT:()=>u});var i=n(411855),a=n(188507),o=n(587670);n(358145),n(438741);var s=n(29680),l=n(100197),c=n(187882);n(144119);var d=n(226055);function u(){let e=(0,d.GS)(),r=!(0,l.ut)(o.Ez5?.uiState().showPropertiesPanel,!0),n=function(){let e=(0,d.GS)(),r=(0,c.Ye)(),n=(0,s.ax)(),i=(0,s.dH)(),l=i===o.NLJ.FRAME||i===o.NLJ.COMMENTS||i===o.NLJ.VECTOR_PENCIL,u=(0,a.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT);return!!e&&!!u&&!!r&&!n&&!l}(),u=e&&(r||n),p=(0,i.useCallback)(e=>{r!==e&&o.Ez5?.uiState().showPropertiesPanel.set(!e)},[r]),m=(0,i.useCallback)(()=>{p(!u)},[u,p]);return{isPropertiesPanelCollapsed:u,setPropertiesPanelCollapsed:p,togglePropertiesPanelCollapsed:m}}},965480:(e,r,n)=>{"use strict";n.d(r,{Et:()=>k,GR:()=>F,Gi:()=>N,J3:()=>L,JU:()=>R,UF:()=>P,b2:()=>V,kD:()=>D,kN:()=>A,li:()=>x,mZ:()=>O,qI:()=>M,tS:()=>C,wv:()=>B});var i=n(411855),a=n(188507),o=n(634832),s=n(126049),l=n(436408);n(794272);var c=n(966712),d=n(38580),u=n(915440),p=n(752553),m=n(875847),h=n(335682),_=n(694687),g=n(99506),f=n(279453),E=n(643067),y=n(243987);n(284321);var b=n(984968);n(694517);var I=n(106112),T=n(383986),v=n(576144),S=n(809831),w=n(6949),A=(e=>(e.NOT_ENABLED="NOT_ENABLED",e.CAN_PUBLISH="CAN_PUBLISH",e.FILE_IN_DRAFTS="FILE_IN_DRAFTS",e.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",e.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",e.CANNOT_PUBLISH="CANNOT_PUBLISH",e))(A||{});function N(){let e=(0,_.sZ)(),r=(0,w.a9)(),n=(0,w.eV)(e,r),i=(0,b.ol)(),a=G((0,S.lg)(),i);return e&&n?{type:"org",entity:e,name:e.name}:i&&a?{type:"team",entity:i,name:i.name}:null}function C(){return!!N()}function O(e){let r=G(e?.editorType,e?.team),n=(0,_.sZ)(),i=(0,w.a9)();return!!e&&(n?(0,w.eV)(n,i):r)}function L(){let e=(0,_.sZ)(),r=(0,b.ol)(),n=(0,a.d4)(e=>e.openFile),i=G(n?.editorType,r),o=!!n?.canPublishTemplate,s=!!n?.canEdit,l=!!e?.are_custom_templates_allowed,c=function(){let e=N();return(0,a.d4)(r=>{let n=r.openFile;return!!n&&!!n.folderId&&(e?.type==="team"?(0,m.ye)(r.folders[n.folderId]):e?.type==="org"&&(0,m.Gi)(r.folders[n.folderId]))})}();return(e||i)&&n?.editorType!==g._Y.DESIGN?o?"CAN_PUBLISH":s?e&&!l?"DISABLED_IN_SETTINGS":c?n?.canDelete?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"CANNOT_PUBLISH":"NOT_ENABLED"}function R(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,o.assertNever)(e)}}function P({fileCanEdit:e,editor_type:r,team_id:n,state:i}){let a=i.currentUserOrgId&&i.orgById[i.currentUserOrgId];return!!(a&&e&&(r===g._Y.WHITEBOARD||r===g._Y.SLIDES)&&a.are_custom_templates_allowed&&n)}function D(){let e=(0,h.q5)(),r=k(e);return e?.template&&r?e?.template:null}function k(e){let r=O(e);return!!e&&!!e.template&&!e.template.unpublishedAt&&r}function M(e){return e.id===T.s}function F(e,r){let[n,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[u,p]=(0,i.useState)([]),[m,h]=(0,i.useState)(0),[_,g]=(0,i.useState)(!0),f=(0,E.G7)(e),y=(0,i.useCallback)(({ids:n,myTeamsOnly:i,offset:a=0})=>{e&&v.q.getFilteredTeamTemplates({orgId:e.id,from:a,size:5,template_type:r,...f?{my_teams_only:i,workspace_ids:n}:{team_ids:n}}).then(({data:e})=>{p("filterable_workspaces"in e.meta?e.meta.filterable_workspaces:e.meta.filterable_teams),d(r=>0===a?e.meta.templates_by_team:[...r,...e.meta.templates_by_team]),h(e.meta.templates_by_team.length),g(!1)})},[e,r,f]);(0,i.useEffect)(()=>{y({ids:null,myTeamsOnly:!1})},[y]);let b=(0,s.A)(y,300),I=(0,i.useCallback)(r=>{e&&(T.current={},g(!0),a(r.ids),l(r.myTeamsOnly),b(r))},[e,b]),T=(0,i.useRef)({}),S=(0,i.useCallback)(()=>{5===m&&y({ids:n,myTeamsOnly:o,offset:c.length})},[n,o,c,m,y]),w=(0,i.useCallback)(n=>{let i=c.find(e=>e.team_id===n);if(e?.id&&i&&i.templates.length<i.total){let a=i.templates.length;if((T.current[n]||0)>=a)return;T.current[n]=a,v.q.getTeamBrowsePaginated({orgId:e.id,teamId:n,from:a,size:10,templateType:r}).then(({data:e})=>{d(r=>r.map(r=>r.team_id===n?{...r,templates:[...r.templates,...e.meta.templates]}:r))})}},[e?.id,c,r]);return{selectedTeamOrWorkspaceOrLicenseGroupIds:n,isMyTeamsOnly:o,onFilterChange:I,userTeamOrWorkspaceIds:U(e),templatesByTeam:c,filterOptions:u,requestLoadMore:S,requestLoadMoreForTeam:w,isLoadingTeamTemplates:_}}function x({teamId:e,editorType:r,pageSize:n=10,revalidateOnMount:i=!0}){let[{status:a,data:o}]=(0,p.IT)((0,f.hjj)({teamId:e,editorType:r,firstPageSize:n}),{enabled:!!e,revalidateOnMount:i});return{requestLoadMoreForTeam:()=>{let e=o?.templatesByTeam;e&&e.hasNextPage()&&!e?.isLoadingNextPage&&e.loadNext(n)},templatesByTeam:function(e){let r;if(e&&e.templatesByTeam)return e.templatesByTeam.forEach(e=>{if(!e.file)return;let n={...e.template,libraryKey:e.libraryKeyToFile?.libraryKey,signedThumbnailUrl:e.file.signedThumbnailUrl,checkpointClientMeta:e.file.checkpointClientMeta,editorType:e.file.editorType};r?r.templates.push(n):r={teamId:e.teamId,totalTemplatesByTeam:e.totalTemplatesByTeam,info:e.team,templates:[n]}}),r}(o),isLoading:"loading"===a}}let U=e=>{let r=(0,E.G7)(e),n=(0,u.Rs)(f.z8m,{currentOrgId:e?.id||""},{enabled:!!e});if("loaded"!==n.status||!e)return null;if(r){let e=n.data.currentUser.privilegedOrgUser?.workspaceUsers.find(e=>e.isMainWorkspace);return e?[e.workspaceId]:null}return n.data.currentUser.orgAwareTeamRoles.reduce((e,r)=>r.team?[...e,r.team.id]:e,[])};function B(e=2,r=g._Y.WHITEBOARD){let n;let[a,o]=(0,i.useState)(!1),s=N(),[c,d]=(0,i.useState)(null),{templatesByTeam:u,isLoading:p}=x({teamId:s?.type==="team"?s.entity.id:null,editorType:r,pageSize:e}),m=(0,l.T)();if((0,i.useEffect)(()=>{if(s?.type!=="org")return;let n=v.q.getSearchPaginated({orgId:s.entity.id,size:e,from:0,templateType:r});o(!0),m(n,e=>{d(e.data.meta.templates),o(!1)})},[m,e,r,s?.type,s?.entity.id]),!s)return{teamTemplates:void 0,isLoading:!1};switch(s.type){case"org":n=c?.map(e=>({type:I.n.TeamTemplate,template:e}));break;case"team":n=u?.templates.map(e=>({type:I.n.TeamTemplateLg,template:e}))}return{teamTemplates:n,isLoading:a||p}}let V=(0,d.eU)(null);function G(e,r){return!!(r&&e&&("student_team"in r?(0,y.w5)(r):(0,y.XX)(r)))&&(e===g._Y.SLIDES?!!(0,c.kc)().pro_templates_slides:e===g._Y.WHITEBOARD&&!!(0,c.kc)().pro_templates_figjam)}},777078:(e,r,n)=>{"use strict";n.d(r,{Fz:()=>H,Ou:()=>q,WS:()=>$,_R:()=>X,b4:()=>Y,dT:()=>B,eE:()=>W,jd:()=>z});var i=n(411855),a=n(188507),o=n(634832),s=n(587670),l=n(86625),c=n(776250),d=n(737947),u=n(436408),p=n(733556),m=n(586459),h=n(395900),_=n(27087),g=n(939863),f=n(392592),E=n(980820),y=n(182976),b=n(875458),I=n(986270),T=n(931828),v=n(74930),S=n(178323),w=n(128765),A=n(946413),N=n(694687),C=n(860178),O=n(132135),L=n(336599),R=n(106112),P=n(809073),D=n(576144);let k=(e,r)=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${F(e)}/${r}/prepare_insert`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${F(e)}/${r}/prepare_insert`}},M=e=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${F(e)}/template_canvas`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${F(e)}/template_canvas`}},F=({type:e,template:r})=>{switch(e){case R.n.HubFile:return r.id;case R.n.TeamTemplate:return r.file_key;case R.n.TeamTemplateLg:return r.fileKey;default:(0,o.assertNever)(e)}},x=({template:e,type:r})=>{switch(r){case R.n.HubFile:return{type:P.vt.CommunityResource,id:e.id};case R.n.TeamTemplate:return{type:P.vt.TeamTemplate,file_key:e.file_key};case R.n.TeamTemplateLg:return{type:P.vt.TeamTemplate,file_key:e.fileKey};default:(0,o.assertNever)(r)}};async function U({insert:e,dispatch:r,fileKey:n,template:i,onSuccess:a,onFailure:o,userTriggered:s=!0,isPreview:l=!1,triggeredFrom:d}){let u=new h.jk(`template_insert.${d}`,{key:n??""});u.start();let p=e=>{let r=u.stop();(0,c.sx)(e,{elapsedMs:r,triggeredFrom:d,isPreview:l},{forwardToDatadog:!0,batchRequest:!0})},m=F(i);try{await (0,v.B)(()=>m,n,S.T.STANDARD,async()=>{await e()&&(a&&a(),p("template_insert_success"),(0,S._)(l?"resource_previewed":"resource_inserted",{fileKey:n,resourceType:"template",resourceName:(0,w.gY)(i),resourceId:m,triggeredFrom:d,templateType:i.type,templateCategory:i.type===R.n.HubFile?i.category:void 0}),s)&&(r(T.b({inserted_figjam_template:!0})),i.type===R.n.TeamTemplate&&r(b.D([i.template])),"section-preset"!==d&&r(I.Hx({storeInRecentsKey:P.$A.FigJam,...x(i)})))},{enableTracking:!l})}catch(e){r(f.F.enqueue({message:(0,g.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),p("template_insert_failure")}}async function B({template:e,fileKey:r,fileVersion:n}){if(!r)throw Error("Missing file key");if(!n)throw Error("Missing file version");let i=k(e,r),a=M(e),o=e.type===R.n.HubFile?{fv:`${n}`}:void 0,s=_.Ay.post(a,{fv:`${n}`},{responseType:"arraybuffer"});return await Promise.all([s,_.Ay.post(i,o)]).then(([{data:e}])=>e)}async function V(e){let{userTriggered:r=!0,templateInsertionDirection:n=s.hKj.RIGHT,templateCustomPosition:i,selectTemplateAfterInsertion:a}=e,o=e.editScopeType;o||(o=r?s.zkO.USER:s.zkO.SYSTEM),await U({insert:async()=>await B(e).then(e=>((0,l.l7)(o,"insert-figjam-template",()=>s.glU.insertTemplateInCanvas(e,n,a??r,!i,i?i.x:null,i?i.y:null)),!0)),...e})}function G(e,r){return`INSERT_FIGJAM_TEMPLATE_${e}_${r}`}function H(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.openFile?e.openFile.key:null),n=(0,a.d4)(e=>e.fileVersion),i=(0,a.d4)(e=>e.loadingState);return{insertTemplate:async({onSuccess:a,onFailure:o,...s})=>{let l=G(r,F(s.template));(0,L.VP)(i,l)||(e(y.Cx({key:l})),await V({dispatch:e,fileKey:r,fileVersion:n,...s,onSuccess:()=>{e(y.yH({key:l})),a&&a()},onFailure:()=>{e(y.yH({key:l})),o&&o()}}))},isInsertingTemplate:e=>{let n=G(r,e);return(0,L.VP)(i,n)}}}function W(e){let r=(0,a.d4)(e=>e.recentlyUsed.templates),n=(0,a.d4)(e=>e.hubFiles),s=(0,a.d4)(e=>e.recentCustomTemplates);return(0,i.useMemo)(()=>r[e].map(e=>{let{type:r}=e;switch(r){case P.vt.CommunityResource:return{type:R.n.HubFile,template:n[e.id]};case P.vt.TeamTemplate:return{type:R.n.TeamTemplate,template:s[e.key]};default:(0,o.assertNever)(r)}}).filter(({template:e})=>!!e),[r,n,s,e])}async function K({dispatch:e,templateIdentifier:r,onSuccess:n,onFailure:i,templateName:a,openInNewTab:o,folderId:s}){await _.Ay.post(`/api/templates/${r.file_key}/duplicate`,{folder_id:s}).then(({data:i})=>{let{fig_file:a,template:s}=i.meta;n(),e(b.D([s])),e(I.Hx({storeInRecentsKey:P.$A.FigJam,...r})),d.Ay.redirect((0,O.to)(a),o?"_blank":void 0)}).catch(()=>{let r={error:!0,message:(0,g.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:a})};e(f.F.enqueue(r)),i()})}function j(e){return`DUPLICATE_FIGJAM_TEMPLATE_${e}`}let z=(0,E.nF)((e,r)=>{let n=j(r.templateIdentifier.file_key),{dispatch:i}=e,{loadingState:a}=e.getState();(0,L.VP)(a,n)||(i(y.Cx({key:n})),K({...r,dispatch:i,onSuccess:()=>{i(y.yH({key:n})),r.onSuccess&&r.onSuccess()},onFailure:()=>{i(y.yH({key:n})),r.onFailure&&r.onFailure()}}))});function Y(){let e=(0,a.wA)();return(0,i.useCallback)(r=>e(z(r)),[e])}function $(){let e=(0,a.d4)(e=>e.loadingState);return r=>{let n=j(r);return(0,L.VP)(e,n)}}function q(e,r,n,a=10){let[o,s]=(0,i.useState)(null),[l,c]=(0,i.useState)(0),[d,p]=(0,i.useState)(!1),[m,h]=(0,i.useState)([]),_=(0,u.T)(),g=(0,N.sZ)();(0,i.useEffect)(()=>{s({offset:0,searchTerm:e})},[e]),(0,i.useEffect)(()=>{if(!o?.searchTerm||!g||!r){h([]),c(0);return}let e=D.q.getSearchPaginated({orgId:g.id,query:o.searchTerm,from:o.offset,size:a,templateType:n});p(!0),_(e,e=>{o.offset>0?h(r=>[...r,...e.data.meta.templates]):h(e.data.meta.templates),c(e.data.meta.total),p(!1)})},[g,r,o,_,n,a]);let f=(0,i.useCallback)(()=>m.length<l&&(s(e=>e?{...e,offset:e.offset+10}:null),!0),[m.length,l]);return{templates:m,requestLoadMore:f,total:l,isLoading:d}}let Z={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII=",buffer:null};function X(e){let r=(0,C.iZ)(),n=(0,p.J)(()=>r?(0,A.$)(e,r):Promise.reject(Error("User not logged in")),[e,r]),[a,o]=(0,i.useState)(Z);return(0,i.useEffect)(()=>{n.status===m.r.SUCCESS&&o(n.value),n.status===m.r.FAILURE&&o(Z)},[n]),a}},226055:(e,r,n)=>{"use strict";n.d(r,{GS:()=>a}),n(411855);var i=n(243742);function a(){return"ui3"===(0,i.DP)().version}n(587670),n(878227),n(737947),n(966712),n(259829),n(563706),n(776621),n(824189),n(809831),n(779709),n(114716),n(69961),n(239671),n(872429),n(144119)},837378:(e,r,n)=>{"use strict";n.d(r,{K:()=>o});var i=n(411855);function a(e,r){if(!r)return e;let n=new Set(r.map(e=>e.id)),i=e.filter(e=>!n.has(e));return i.length===e.length?e:i}function o(e,r=50){let[n,s]=i.useState([]),l=i.useMemo(()=>a(n,e),[e,n]);return i.useEffect(()=>{s(l)},[l]),{optimisticIds:l,addOptimisticIds:i.useCallback(e=>s(n=>{let i=[...n,...e];return i.length>r?i.slice(i.length-r):i}),[r]),setServerData:i.useCallback(e=>{s(r=>a(r,e))},[])}}},835156:(e,r,n)=>{"use strict";function i(e){return e?.file?.activeFileUsers?.map(e=>e)??[]}n.d(r,{Z:()=>i})},156367:(e,r,n)=>{"use strict";n.d(r,{H3:()=>a});var i=n(181912);function a(e){return e?(0,i.A)(e).add(1,"day").subtract(1,"second").format():null}n(133537)},988022:(e,r,n)=>{"use strict";n.d(r,{Cu:()=>H,Dc:()=>p,E9:()=>S,FE:()=>N,Fr:()=>k,GS:()=>v,Nb:()=>y,OH:()=>C,PB:()=>O,Pg:()=>b,WL:()=>Y,Ws:()=>G,Yg:()=>z,_J:()=>D,_R:()=>W,ak:()=>R,ds:()=>I,f5:()=>T,fy:()=>K,k1:()=>A,oP:()=>B,pf:()=>L,pi:()=>m,qD:()=>j,uE:()=>M,v5:()=>h,xr:()=>P,ye:()=>U,ys:()=>f,z_:()=>x});var i=n(587670),a=n(776250),o=n(776621),s=n(99506),l=n(239671),c=n(935938),d=n(479296),u=n(140047);function p(e){switch(e){case l.nT.Design:return"design";case l.nT.Whiteboard:return"figjam";case l.nT.DevHandoff:return"dev_handoff";case l.nT.Slides:return"slides";case l.nT.Sites:return"sites";default:return"unknown"}}function m(e){switch(e&&e.editorType){case s._Y.DESIGN:return"design";case s._Y.WHITEBOARD:return"figjam";case s._Y.SLIDES:return"slides";case s._Y.SITES:return"sites";default:return"unknown"}}function h(e,r){return e?.view==="fullscreen"?p(e.editorType):r?m({editorType:r}):"unknown"}let _=(e,r)=>{switch(r?.selectedView?.view){case"prototype":case"mobileViewer":if(r.selectedView.file?.key===e)return r.selectedView.file||null;return null;default:return e&&r.fileByKey[e]||null}},g=null;function f(e){g=e}let E=(e,r,n,a={})=>{let o=h(n?.selectedView,r&&r.editor_type),s={...a,...y(o,n?.selectedView?.view)};return s.productType=o,s.fileKey=e||"new",s.fileParentOrgId=r&&r.parent_org_id,s.fileTeamId=r&&r.team_id,r&&r.file_repo_id&&(s.fileRepoId=r.file_repo_id),s.fileTeamId=r&&r.team_id,s.containingFolderId=r&&r.folder_id,s.entrypoint=a.entrypoint,s.figmaBasicsExperiment=r?.track_tags?.figma_basics_experiment,g&&(s.loadID=g),s.fileIsIncremental=!!i.h3O?.isIncrementalSession(),s.fileIsValidatingIncremental=!!i.h3O?.isValidatingIncremental(),s};function y(e,r){return e===s._Y.SLIDES&&"fullscreen"===r?{slide_view:i.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()?"ssv":"grid"}:{}}function b(){(0,a.Pg)()}let I=(0,d.n)((e,r,n,i={},o)=>{let s=_(r,n),l=E(r,s,n,i);(0,a.sx)(e,l,o)}),T=(0,d.n)((e,r,n,i={},o)=>{let s=E(r.key,r,n,i);(0,a.sx)(e,s,o)}),v=(0,d.n)((e,r,n,i)=>{let o=_(r,n),s=E(r,o,n,i);a.az.trackDefinedEvent(e,s)});function S(e,r,n={},i){n.productType=r&&m(r),n.fileKey=r?.key||"new",n.fileParentOrgId=r?.parentOrgId,n.fileTeamId=r?.teamId,n.containingFolderId=r?.folderId,r&&r.fileRepoId&&(n.fileRepoId=r.fileRepoId),(0,a.sx)(e,n,i)}let w="File Browser File Clicked";function A(e,r,n){if(r.state){var i;I(w,e,r.state,{selectedView:"recentsAndSharing"===(i=r.state).selectedView.view?i.selectedView.tab||c.G.RECENTLY_VIEWED:"folder"===i.selectedView.view&&i.selectedView.folderId===i.user?.drafts_folder_id?"drafts":i.selectedView.view,entrypoint:r.entrypoint,planFilterId:r.planFilterId,planFilterType:r.planFilterType,sharedByFilter:r.sharedByFilter,viewMode:r.viewMode},n)}else r.selectedViewName?(0,a.sx)(w,{fileKey:e,selectedView:r.selectedViewName,entrypoint:r.entrypoint},n):(0,a.sx)(w,{fileKey:e,entrypoint:r.entrypoint},n)}function N(e,r,n){(0,a.sx)("file_browser_plan_filter_selected",{planId:e,entryPoint:r,planType:n})}function C(e,r,n={},i){n.fileKeys=r.map(e=>e.key),n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,a.sx)(e,n,i)}function O(e,r,n,i={},o){let s=r.map(e=>n.fileByKey[e]);i.fileKeys=r,i.fileParentOrgIds=[],i.fileTeamIds=[],i.containingFolderIds=[],s.forEach(e=>{i.fileParentOrgIds.push(e.parent_org_id),i.fileTeamIds.push(e.team_id),i.containingFolderIds.push(e.folder_id)}),(0,a.sx)(e,i,o)}function L(e,r,n={},i){n.fileKeys=[],n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileKeys.push(e.key),n.fileParentOrgIds.push(e.parentOrgId),n.fileTeamIds.push(e.teamId),n.containingFolderIds.push(e.folderId)}),(0,a.sx)(e,n,i)}function R(e,r,n,i){let a=e.map(e=>e.key),o=[],s=[],l=[];a.forEach((e,n)=>{let i=r[n];o.push(i.key),s.push(i.folder_id),l.push(i.team_id)}),O("File Copied",a,n,{copiedFileKeys:o,copiedContainingFolderIds:s,copiedFileTeamIds:l},i)}function P(e,r,n,i,o={},s){let l=i.folders[r];o.folderId=l?.id||r,o.folderTeamId=l?.team_id||n,(0,a.sx)(e,o,s)}function D(e,r,n,i={},o){let s=(0,u._)(r,n);i.teamId=s?.id,i.teamName=s?.name,(0,a.sx)(e,i,o)}function k(e,r,n,i={},o){let s=n.orgById[r];i.orgId=s.id,i.orgName=s.name,(0,a.sx)(e,i,o)}function M(e,r,n={},i){n.userId=r.user&&r.user.id,(0,a.sx)(e,n,i)}let F={[s.vt.FILE]:"fileKey",[s.vt.FILE_REPO]:"fileRepoId",[s.vt.FOLDER]:"folderId",[s.vt.TEAM]:"teamId"};function x(e,r,n={},i){let o=F[r.resource_type];n.roleId=r.id,n[o]=r.resource_id_or_key,r.user_id&&(n.roleUserId=r.user_id),(0,a.sx)(e,n,i)}function U(e,r){(0,a.sx)(e,r)}function B(e){return{canEdit:e.canEdit,fileKey:e.key,productType:m(e)}}var V=(e=>(e.DESIGN="DESIGN",e.WHITEBOARD="WHITEBOARD",e))(V||{});let G="CTA Clicked";function H(e,r,n){let i=r||G;(0,o.Lo)(i,e.text||"",e,{logToConsole:o.NU.NEVER});let s={...e,nonInteraction:0};(0,a.sx)(i,s,{forwardToDatadog:!0,sendAsBeacon:n})}var W=(e=>(e.NOT_POPULATED="not_populated",e.POPULATED_INCOMPLETE="populated_incomplete",e.POPULATED_COMPLETE="populated_complete",e))(W||{});function K(e,r){let n={...e,nonInteraction:0};(0,a.sx)("Input Blurred",n,r)}function j(e,r={}){(0,a.sx)("Context Viewed",e,{forwardToDatadog:!0,...r})}let z="User Submits Reupgrade Request",Y=5e3},128765:(e,r,n)=>{"use strict";n.d(r,{fG:()=>m,gY:()=>p,gp:()=>u});var i=n(411855),a=n(634832),o=n(593779),s=n(99506),l=n(106112),c=n(694687),d=n(820642);function u(e){switch(e.type){case l.n.HubFile:return e.template.id;case l.n.TeamTemplate:return e.template.file_key;case l.n.TeamTemplateLg:return e.template.fileKey;default:return(0,a.assertNever)(e)}}function p(e){switch(e.type){case l.n.HubFile:return(0,d.a6)(e.template).name;case l.n.TeamTemplate:case l.n.TeamTemplateLg:return e.template.name;default:return(0,a.assertNever)(e)}}function m(){let e=(0,c.sZ)();return(0,i.useCallback)(r=>{let n=u(r),i=p(r),c=function(e){switch(e.type){case l.n.HubFile:return(0,d.a6)(e.template).description;case l.n.TeamTemplate:case l.n.TeamTemplateLg:return e.template.description;default:return(0,a.assertNever)(e)}}(r),{type:m,template:h}=r;switch(m){case l.n.HubFile:return{imageUrl:h.thumbnail_url||void 0,clientMeta:h.client_meta,thumbnailIsSet:!!h.thumbnail_is_set,isWhiteboard:h.viewer_mode===s.y4.WHITEBOARD,name:i,description:c,hubFileId:h.id,publishers:h.community_publishers?.accepted||[],primaryKey:n,duplicateLink:`${window.location.origin}/community/file/${h.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:h.resized_thumbnail_urls,libraryKey:h.library_key};case l.n.TeamTemplate:{let r=h.published_by_user?[{name:h.published_by_user.handle,img_url:h.published_by_user.img_url}]:e?[{name:e.name,img_url:e.img_url}]:[];return{imageUrl:h.signed_thumbnail_url,clientMeta:h.client_meta,thumbnailIsSet:!!h.has_custom_thumbnail,isWhiteboard:!0,name:i,description:c,publishers:r,primaryKey:n,duplicateLink:`${window.location.origin}/new/template/${h.file_key}`,viewSourceFileUrl:`/file/${h.file_key}`,libraryKey:h.library_key}}case l.n.TeamTemplateLg:{let r=h.publishedByUserNullable?[{name:h.publishedByUserNullable.handle,img_url:h.publishedByUserNullable.imgUrl}]:e?[{name:e.name,img_url:e.img_url}]:[];return{imageUrl:h.coverImagePath??h.signedThumbnailUrl,clientMeta:h.checkpointClientMeta,thumbnailIsSet:h.hasCustomThumbnail,isWhiteboard:h.editorType===s._Y.WHITEBOARD,name:i,description:c,publishers:r,primaryKey:n,duplicateLink:`${window.location.origin}/new/template/${h.fileKey}`,viewSourceFileUrl:`/file/${h.fileKey}`,libraryKey:(0,o.l)(h.libraryKey)}}default:(0,a.assertNever)(m)}},[e])}},974105:(e,r,n)=>{"use strict";n.d(r,{Kl:()=>p,d1:()=>d,e9:()=>u,l$:()=>h,xA:()=>m,yt:()=>c});var i=n(966712),a=n(99506),o=n(243987),s=n(428467),l=n(707465);function c(e){if("fullscreen"===e.selectedView.view){let r=e.selectedView.fileKey;if(r)return e.fileByKey[r]??null}return null}function d(e){let r=(0,l.U2)(e.selectedView);return r?e.fileByKey[r]??null:null}function u(e){return"folder"===e.selectedView.view?e.folders[e.selectedView.folderId]:null}function p(e){return{...(0,s.getPermissionsState)(e),selectedView:e.selectedView,currentOrgId:e.currentUserOrgId}}function m(e,r,n=null,s,l=a._Y.DESIGN,c,d,p,h,_,g){let f=null;if(null===n){let r=u(e);r&&!(0,o.ZZ)(r,e)&&(f=r.id)}else"drafts"!==n&&(f=n.folderId);let E=null,y=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null;y&&(E=y.id);let b=null;if((0,i.kc)().ps_benchmark){let r=e.currentTeamId?e.teams[e.currentTeamId]:null;r&&(b=r.id)}return{folder_id:f,org_id:E,openNewFileIn:r,trackingInfo:s||null,editorType:l,fileName:c,figjamAiNewFileData:p,slidesAiNewFileData:h,figjamMakeSomethingUseCase:_,slidesNewFileData:g,callback:d,team_id:b}}function h(e){return{...e,optimist:void 0}}},788811:(e,r,n)=>{"use strict";n.d(r,{$3:()=>el,GT:()=>eP,Gc:()=>eF,Gg:()=>eU,JI:()=>ee,OL:()=>eN,Oz:()=>ex,R0:()=>es,Ww:()=>ep,ZG:()=>eT,ZW:()=>et,bD:()=>Y,b_:()=>eO,dm:()=>ek,go:()=>ed,gp:()=>eA,kl:()=>er,lu:()=>eR,mu:()=>ev,oE:()=>eC,t:()=>eS,wI:()=>ec,yn:()=>ew,z$:()=>ei});var i=n(411855),a=n(188507),o=n(843407),s=n(459401),l=n(752795),c=n(675678),d=n(587670),u=n(86625),p=n(194812),m=n(776250),h=n(224857),_=n(38329),g=n(966712),f=n(374626),E=n(38580),y=n(915440),b=n(391388),I=n(395900),T=n(563706),v=n(776621),S=n(825871),w=n(47506),A=n(939863),N=n(265746),C=n(696808),O=n(944682),L=n(988022),R=n(106757),P=n(493862),D=n(314809),k=n(760640),M=n(279453),F=n(216158),x=n(973131),U=n(565167),B=n(546312),V=n(786701),G=n(154823),H=n(823699),W=n(63104),K=n(132367),j=n(153297);function z(e,r){let n="unknown";e?"string"==typeof e?n=e:"message"in e&&(n=e.message):n="no error message",(0,v.x1)("Autosave",n,{message:r})}function Y(){return 7776e6}async function $(e,r,n,i){let a=i.objectStore(H.Sp),o=await a.index(H.SW).get([e,r,n]);return o&&o.id?{id:o.id,...o}:void 0}async function q(e,r,n,i){let a=await $(e,r,n,i);return a?.id}async function Z(e,r,n){let i=e.objectStore(H.Sp),a=e.objectStore(H.jP),o=e.objectStore(H.DV),s=e.objectStore(H.w8),l=[];for(let e of n){let r=await i.index(H.SW).get([e.userID,e.fileKey,e.sessionID]);r&&r.id&&l.push(r)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,r)=>r.fileVersion-e.fileVersion);let c=l[0],u=new Map,p=new Map;for(let e of(await a.getAll((0,H.iM)(c.id))))u.set(e.nodeID,[e.changes,e.snapshots]);for(let e of(await s.getAll((0,H.iM)(c.id))))p.set(e.nodeID,e.buffer);let m=c.lastUpdatedAt;for(let e of l.slice(1)){let r=e.fileVersion===c.fileVersion;if(r){for(let r of(await a.getAll((0,H.iM)(e.id)))){let e=u.get(r.nodeID),n=r.changes,i=r.snapshots;if(e){let[a,o]=e;n=d.i6g.mergeMultiplayerMessages(a,r.changes,c.fileVersion),i={...o,...r.snapshots}}u.set(r.nodeID,[n,i]),a.put({editorSessionID:c.id,nodeID:r.nodeID,changes:n,snapshots:i}).catch(e=>z(e,"mergeAndClaimChanges: updating session IDs"))}for(let r of(await s.getAll((0,H.iM)(e.id))))p.set(r.nodeID,r.buffer),s.put({editorSessionID:c.id,nodeID:r.nodeID,buffer:r.buffer}).catch(e=>z(e,"mergeAndClaimChanges: merge referenced nodes"));m=Math.max(m,e.lastUpdatedAt)}a.delete((0,H.iM)(e.id)).catch(e=>z(e,"mergeAndClaimChanges: node changes for session")),s.delete((0,H.iM)(e.id)).catch(e=>z(e,"mergeAndClaimChanges: referenced nodes for session"));let n=await o.openCursor((0,H.iM)(e.id));for(;n;)r&&o.put({...n.value,editorSessionID:c.id}).catch(e=>z(e,"mergeAndClaimChanges: merge images")),n.delete().catch(e=>z(e,"mergeAndClaimChanges: remove old image")),n=await n.continue();i.delete(e.id).catch(e=>z(e,"mergeAndClaimChanges: delete old session id"))}return await i.put({...c,sessionID:r,lastUpdatedAt:m}),(0,H.dU)(e),await e.done,(0,v.Lo)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:d.NUh.ALWAYS}),{changesByNode:u,referencedNodeMap:p,fileVersion:c.fileVersion}}async function X(e,r){let n=(0,H.Zt)(e,r),i=[];return await k.xK.timeAsync("checkForAutosave",async()=>{let e=await (0,H.Z4)();if(!e)return;let r=e.transaction(H.Sp),a=r.objectStore(H.Sp),o=await a.index(H.SW).openCursor(n);for(;o;)i.push(o.value),o=await o.continue();await r.done}),i.length>0&&(0,v.ED)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:d.NUh.ALWAYS}),i}async function J(e){return await k.xK.timeAsync("filterAutosaveSessions",async()=>{let r=await Promise.all(e.map(e=>(0,j.mc)(e))),n=Date.now()-Y(),i=e.filter((e,i)=>!r[i]&&e.lastUpdatedAt>n);return 0===i.length&&(0,v.Lo)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:d.NUh.ALWAYS}),i})}let Q=null;async function ee(e){async function r(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,p.MR)(e).catch(()=>{});try{let r=await ed((0,H.cu)(e),e=>Date.now()-e.lastUpdatedAt<Y());if(r.length>0){let e=r.map(e=>e.lastUpdatedAt);(0,m.sx)("autosave garbage collect",{numSessions:r.length,localSessionCount:r.reduce((e,r)=>e+(r.isLocalFile?1:0),0),nodeCount:r.reduce((e,r)=>e+r.nodeCount,0),imageCount:r.reduce((e,r)=>e+r.imageCount,0),referencedNodeCount:r.reduce((e,r)=>e+r.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,W.Lf)("Failed to garbage collect autosave changes",e)}(0,B.L_)()}Q||(Q=r()),await Q}async function et(e){let r={};for(let n of e){let e=await er(n);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(r[n]=e)}return r}async function er(e){let r=await (0,H.Z4)();if(!r)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:n,newFilesByKey:i,newFilesWithChanges:a}=await en(r,e),s=new Set,l=new Map,c=-1,d=[];for(let r of n)s.has(r.fileKey)||d.push((0,j.mc)({userID:e,fileKey:r.fileKey,sessionID:r.sessionID}).then(e=>{if(!e){s.add(r.fileKey);let e=Math.max(l.get(r.fileKey)||0,r.lastUpdatedAt);l.set(r.fileKey,e),c=-1===c?r.lastUpdatedAt:Math.min(c,r.lastUpdatedAt)}}));return await Promise.all(d),{unsyncedFiles:Array.from(s).filter(e=>!(0,o.T)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),newFiles:Array.from(s).filter(e=>(0,o.T)(e)&&i.has(e)).map(e=>{let r=i.get(e);return eo(r,l,a.has(r.fileKey))}).filter(({hasChanges:e})=>e),nextGarbageCollectionTimestamp:c}}async function en(e,r){let n=e.transaction([H.Sp,H.jP,H.JR]),i=Error("original async stack");n.done.catch(e=>{e.cause=i,(0,v.$D)(c.FigmaTeam.UNOWNED,e)});let a=n.objectStore(H.Sp),o=await a.index(H.SW).getAll((0,H.cu)(r)),s=[],l=n.objectStore(H.jP);for(let e of o)if(await l.count((0,H.iM)(e.id))>0){for(let r of(await l.getAll((0,H.iM)(e.id))))if(!((0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation)||d.i6g&&!d.i6g.changesAreOnlyNewFileSystemChanges(r.changes,e.fileVersion)){s.push(e);break}}let u=new Map,p=n.objectStore(H.JR),m=new Set;for(let e of(await p.getAll((0,H.cu)(r)))){u.set(e.fileKey,e);let r=o.find(r=>r.fileKey===e.fileKey);if(r){let n=await l.getAll((0,H.iM)(r.id));(e_(e.fileKey,n)||e.hasChangedMetadata)&&m.add(e.fileKey)}}return{editorSessionRowsWithChanges:s,newFilesByKey:u,newFilesWithChanges:m}}async function ei(e){let r=await er(e);return r.unsyncedFiles.length>0||r.newFiles.length>0}async function ea(e){if((0,W.rQ)())return[];let r=await (0,H.Z4)();if(!r)return[];let{editorSessionRowsWithChanges:n,newFilesByKey:i,newFilesWithChanges:a}=await en(r,e),o=new Set,s=new Map;for(let e of n)o.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(o).map(e=>{let r=i.get(e);return r?eo(r,s,a.has(r.fileKey)):null}).filter(l.isNotNullish);return eI?.fileCreationManager?.updateNewFileInfoFromFiles(c),c}function eo(e,r,n){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:r.get(e.fileKey),orgId:e.orgID??null,hasChanges:n,hasChangedMetadata:e.hasChangedMetadata??!1}}async function es(e,r,n){await ed((0,H.Zt)(e,r),e=>e.sessionID!==n)}async function el(e,r){if((0,W.rQ)())return;let n=async(e,n)=>{let i=n.objectStore(H.jP);return e_(r,await i.getAll((0,H.iM)(e.id)))};await ed((0,H.Zt)(e,r),n)}async function ec(e,r){await ed((0,H.cu)(e),e=>!r.includes(e.fileKey))}async function ed(e,r){let n=await (0,H.Z4)();if(!n)return[];let i=n.transaction([H.Sp,H.jP,H.DV,H.w8,H.JR],"readwrite"),a=Error("original async stack");i.done.catch(e=>{e.cause=a,(0,v.$D)(c.FigmaTeam.UNOWNED,e)});let s=i.objectStore(H.Sp),l=i.objectStore(H.jP),d=i.objectStore(H.DV),u=i.objectStore(H.w8),p=i.objectStore(H.JR),m=!1,h=await s.index(H.SW).getAll(e),_=[],g=[];for(let e of h)if(!(r&&await r(e,i))){let[r,n,i]=await Promise.all([l.count((0,H.iM)(e.id)),d.count((0,H.iM)(e.id)),u.count((0,H.iM)(e.id))]);g.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,o.T)(e.fileKey),nodeCount:r,imageCount:n,referencedNodeCount:i,lastUpdatedAt:e.lastUpdatedAt}),s.delete(e.id).catch(e=>z(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,H.iM)(e.id)).catch(e=>z(e,"deleteAutosaveDataForSessions: delete node changes")),d.delete((0,H.iM)(e.id)).catch(e=>z(e,"deleteAutosaveDataForSessions: delete images")),u.delete((0,H.iM)(e.id)).catch(e=>z(e,"deleteAutosaveDataForSessions: delete referenced nodes")),m=!0,(0,o.T)(e.fileKey)&&_.push({localFileKey:e.fileKey,userID:e.userID})}for(let{localFileKey:e,userID:r}of _)0===await s.index(H.SW).count((0,H.Zt)(r,e))?await p.delete((0,H.Zt)(r,e)):(0,W.W6)("Local file has remaining sessions");return await s.count()===0&&(await l.count()>0&&((0,W.W6)("Found leftover node changes in IDB"),l.delete((0,H.BE)()).catch(e=>z(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await d.count()>0&&((0,W.W6)("Found leftover images in IDB"),d.delete((0,H.IE)()).catch(e=>z(e,"deleteAutosaveDataForSessions: delete leftover images"))),await u.count()>0&&((0,W.W6)("Found leftover referenced node buffers in IDB"),u.delete((0,H.Ab)()).catch(e=>z(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,H.dU)(i),await i.done,m&&(0,K.HZ)(),g}async function eu(e,r){await r.objectStore(H.jP).count((0,H.iM)(e))===0&&await r.objectStore(H.DV).count((0,H.iM)(e))===0&&await r.objectStore(H.w8).count((0,H.iM)(e))===0&&r.objectStore(H.Sp).delete(e).catch(e=>z(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function ep(e,r){let n=await (0,H.Z4)();if(!n)throw Error("Could not open autosave data");let i=n.transaction([H.Sp,H.jP,H.DV,H.w8]),a=i.objectStore(H.Sp),o=i.objectStore(H.jP),s={};for(let e of(await a.getAll()))s[e.id]=e,s[e.id].changes={},s[e.id].snapshotsByNodeField__DEPRECATED={};for(let n of(s.unknown={changes:{},snapshotsByNodeField__DEPRECATED:{}},(await o.getAll()).slice(0,e)))n.editorSessionID in s?(s[n.editorSessionID].changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,s[n.editorSessionID].fileVersion,!!r)),s[n.editorSessionID].snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots):(s.unknown.changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,1,!!r)),s.unknown.snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots);return await i.done,s}async function em(e){let{transaction:r,commitPolicy:n,userID:i,fileKey:a,fileVersion:s,sessionID:l,oldSessionID:c,pendingChanges:u,pendingImages:p,pendingReferencedNodes:m,reason:h,isFirstCommitOfAutosaveSession:_}=e,f=r.objectStore(H.Sp),E=r.objectStore(H.jP),y=r.objectStore(H.DV),b=r.objectStore(H.w8),I=await $(i,a,c,r),T=0;I&&(T=(I.offlineEditingTime||0)+(_?0:Date.now()-I.lastUpdatedAt));let v=I?.id,w={userID:i,fileKey:a,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,g.Ay)().release_git_tag||"",fileVersion:s,lastCommitReason:h,offlineEditingTime:T,originalTrackingSessionId:(0,S.f)()};for(let e of(null==v?v=await f.add(w):(n===d.W2B.REPLACE_CHANGES&&(E.delete((0,H.iM)(v)).catch(e=>z(e,"commitChanges: replace node changes")),b.delete((0,H.iM)(v)).catch(e=>z(e,"commitChanges: replace referenced nodes"))),f.put({id:v,...w}).catch(e=>z(e,"commitChanges: update session"))),u))e.changes?E.put({editorSessionID:v,nodeID:e.nodeID,changes:e.changes}).catch(e=>z(e,"commitChanges: put node changes")):E.delete([v,e.nodeID]).catch(e=>z(e,"commitChanges: clear node changes"));for(let e of p)if(await y.count([v,e])===0){let r=d.Bko.getCompressedImage(e);r&&y.add({editorSessionID:v,hash:e,blob:r}).catch(e=>z(e,"commitChanges: add images"))}for(let e of m)b.add({editorSessionID:v,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>z(e,"commitChanges: add referenced nodes"));let A=await E.count((0,H.iM)(v));return 0===A&&(await y.delete((0,H.iM)(v)),await b.delete((0,H.iM)(v))),await eu(v,r),(0,H.dU)(r),await r.done,(0,o.T)(a)&&(0,K.HZ)(),A}async function eh(e,r,n){(0,v.Lo)("Autosave","assigning file key for new file",{localFileKey:r,newFileKey:n}),await (0,H.DB)([H.Sp,H.JR],async i=>{let a=i.objectStore(H.Sp);(await a.index(H.SW).getAll((0,H.Zt)(e,r))).map(e=>{e.fileKey=n,a.put(e)}),i.objectStore(H.JR).delete((0,H.Zt)(e,r))},"readwrite"),(0,K.HZ)()}function e_(e,r){if(!(0,o.T)(e))return r.length>0;if(r.length>2)return!0;for(let{nodeID:e}of r)if(!["0:0","0:1"].includes(e))return!0;return!1}class eg{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class ef{constructor(e,r){this.userID=e,this._state={type:"connecting"},this._fileKey="",this._hasReportedError=!1,this.fileCreationManager=null,this.fileKey=r,(0,W.rQ)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,o.T)(r)?this._sessionsToRestore=X(e,r):this._sessionsToRestore=X(e,r).then(e=>J(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let r=(0,o.T)(e)?e:null;f.zl.set(G.h,r)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,W.W6)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},f.zl.set(G.h,null),await e?.destroy().catch(()=>W.W6("Failed to destroy autosave session"))}terminateDueToError(e,r){(0,v.xi)("Autosave","autosave disabled",{message:e}),r&&(0,W.W6)(e);let n="connected"===this._state.type;this._hasReportedError||((0,m.sx)("autosave_disabled",{message:e,hasSessionInProgress:n},{forwardToDatadog:!0}),this._hasReportedError=!0),this.terminateAndWaitForCleanup().catch(r=>(0,W.W6)("Failed to terminate autosave",{message:e,error:r.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,H.Fy)()}catch(e){(0,v.Lo)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:d.NUh.ALWAYS}),(0,m.sx)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1);return}let r=new I.M4;r.start();let n=await this._sessionsToRestore;(0,o.T)(this.fileKey)&&(n.length>1?((0,W.W6)("Local file has multiple sessions",{sessionCount:n.length,sessionIds:n.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===n.length&&0!==n[0].sessionID&&((0,W.W6)("Local file with changes from non-zero session",{existingSessionId:n[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let i=await (0,j.A2)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!i){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new eb(e,this,r,n,i)}}async onConnectNewFile(e){let r=this.fileKey;if((0,o.T)(r))try{await (0,H.DB)([H.JR],async n=>{let i=n.objectStore(H.JR);if(await i.get((0,H.Zt)(this.userID,r)))return;let a={fileKey:r,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,A.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await i.put(a)},"readwrite"),this.fileCreationManager&&(0,W.W6)("File creation manager already exists",{fileKey:r}),this.fileCreationManager=new ey(r,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function eE(e,r,n){if((0,o.T)(r)&&e)try{await (0,H.DB)([H.JR],async i=>{let a=i.objectStore(H.JR),o=await a.get((0,H.Zt)(e,r));o&&await a.put({...o,name:n,hasChangedMetadata:!0})},"readwrite"),(0,K.HZ)()}catch(e){(0,v.$D)(c.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class ey{constructor(e,r){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=r}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let r=e.find(e=>e.fileKey===this.fileKey);if(r){let e=(0,U.B)(r,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,K.hp.sendToAllTabs(K.m6,{localFileKey:this.fileKey,realFileKey:e})}}class eb{constructor(e,r,n,i,a){this.sessionID=e,this.manager=r,this.restoreTimer=n,this.changesToRestore=i,this.webLock=a,this.transactionQueue=new V.O,this.commitEventListener=new eg,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.activityLogger=navigator.storage?.estimate?new B.hS:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0,isIncremental:!1},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>z(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,r,n,i){let a=(0,H.DB)(r,n,i);return a.catch(r=>{(0,m.sx)("autosave_transaction_failure",{transactionName:e,message:r.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),a}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,W.W6)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(d.i6g.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){let{changes:r,commitPolicy:n,fileVersion:i,fileKey:a,newSessionID:o,numberOfUncleanRegisters:s,reason:l}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(a&&a!==this.manager.fileKey){(0,W.W6)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":a}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}this.activityLogger?.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,u=null;if(o!==this.sessionID){u=this.webLock,this.sessionID=o;let e=await (0,j.A2)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,j.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let p=r.changedNodes.length,m=r.changedNodes.map(e=>({nodeID:e.nodeID,changes:e.changes})).concat(r.clearedNodes.map(e=>({nodeID:e,changes:null,snapshots:null}))),h=[];for(let e of r.referencedNodes)h.push({nodeID:e.nodeID,buffer:e.changes});let g=new Set;for(let e of r.imageHashes)g.add(e);let f=await this.sessionTransaction("commit",[H.Sp,H.jP,H.DV,H.w8],async e=>await em({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:i,oldSessionID:c,sessionID:this.sessionID,pendingChanges:m,pendingImages:g,pendingReferencedNodes:h,reason:l,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");this.hasCommitted=!0;let E={stored_node_changes:f,unclean_registers:s,changed_nodes:p,cleared_nodes:r.clearedNodes.length,referenced_nodes:h.length,pending_images:g.size,commit_policy:d.W2B[n],session_id:this.sessionID,new_session_id:o,commit_reason:void 0!==l?d.uXP[l]:void 0,file_key:a,manager_file_key:this.manager.fileKey};if((0,v.Lo)("Autosave","commit completed",E),(0,L.ds)("autosave_commit_completed",a,_.D.getState(),E),!this.reportedStorageError&&void 0!==s&&s!==f){if(f>0&&0===s){let e=e=>{if(!(e.length>5))return e;{let r=e.slice(0,5);return r.push("..."),r}},n=await ep(5,!0);(0,v.x1)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:n,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:d.h3O.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else f>s?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):f<s&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=u&&u.release().catch(e=>z(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===d.W2B.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,w.YQ)({id:K.Cr})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(d.i6g.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,o.T)(this.manager.fileKey),this.restoring=!0;let e=function(){if(!T.Ay.chrome||!navigator.storage?.persist)return Promise.resolve(!1);let e=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),e])}(),r=(0,W.U4)(),n=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=n.length,n.length>0){let e=n[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?d.uXP[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(n)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:i,quotaBytes:a}=await r;this.restoreAnalytics.storageUsageBytes=i,this.restoreAnalytics.storageQuotaBytes=a,this.restoreAnalytics.isIncremental=d.h3O.isIncrementalSession(),this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,L.ds)("autosave_restore_on_load",this.restoreAnalytics.fileKey,_.D.getState(),this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,j.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:r,referencedNodeMap:n,fileVersion:i}=await this.sessionTransaction("restore",[H.Sp,H.jP,H.DV,H.w8],async r=>await Z(r,this.sessionID,e),"readwrite"),a=r.size>0;for(let e of(a?((0,o.T)(this.manager.fileKey)||await (0,x.m)(this.manager.fileKey,"Offline sync","Before syncing changes",_.D.dispatch).catch(e=>(0,W.W6)("Failed to create before savepoint",{status:e.status,message:e.data?.message})),(0,v.Lo)("Autosave","Restoring auto-saved data",void 0,{logToConsole:d.NUh.ALWAYS}),await this.restoreChanges(r,n,i)):(0,v.Lo)("Autosave","Changes are empty!",void 0,{logToConsole:d.NUh.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{K.hp.sendToOtherTabs(K.a)}).catch(e=>z(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=a,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=r.size,this.restoreAnalytics.numberOfReferencedNodes=n.size,r.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,r,n){let i=Array.from(e.entries()).sort(([e,r],[n,i])=>e<n?-1:1),a=(0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation&&i.every(([e,[r]])=>d.i6g.changesAreOnlyNewFileSystemChanges(r,n));for(let[e,[r,a]]of i)d.i6g.loadAutosavedNodeChanges(e,r,a,n);if(this.restoreAnalytics.changesAreAllDerivedData=d.i6g.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=d.i6g.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=d.i6g.currentFileVersion()>n,(0,P.Ff)()){(0,L.ds)("autosave_load_containing_pages_start",this.manager.fileKey,_.D.getState(),{node_count:e.size,fileKey:this.manager.fileKey});let r=performance.now(),n=new Set(e.keys());for(let e of d.i6g.getParentIndexChanges())n.add(e);await (0,P.Xl)(n),(0,L.ds)("autosave_load_containing_pages_end",this.manager.fileKey,_.D.getState(),{node_count:e.size,timeElapsed:performance.now()-r,fileKey:this.manager.fileKey})}let s=d.i6g.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(s);let l=this.restoreAvailableReferencedNodes(r);d.i6g.migrateAndSetAutosaveChanges(l,n),u.l7.autosave("autosave",()=>d.i6g.applyAutosavedChanges()),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,v.Lo)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS});let c=()=>{_.D.dispatch(C.Q.enqueueFront({notification:{type:N._.AUTOSAVE_CHANGES_RESTORED,message:"Your offline changes were synced"}})),(0,v.Lo)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS})};(0,o.T)(this.manager.fileKey)?(0,D.l)().then(()=>{this.manager.fileKey!==_.D.getState().openFile?.key||a||c()}):(await (0,D.l)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),await (0,x.m)(this.manager.fileKey,"Offline sync","After syncing changes",_.D.dispatch).catch(e=>{(0,L.ds)("autosave_skip_after_checkpoint",this.manager.fileKey,_.D.getState(),{error:e.data?.message}),(0,W.W6)("Failed to create after savepoint",{status:e.status,message:e.data?.message})}),a||c())}async restoreImagesIfAvailable(e){let r=0;return await this.sessionTransaction("restore images",[H.Sp,H.DV],async n=>{let i=await this.currentEditorSessionID(n);if(!i)return;let a=n.objectStore(H.DV);for(let n of e){let e=await a.get([i,n]);e&&(d.i6g.restoreImageBytes(n,e.blob),r++)}await n.done}),r}restoreAvailableReferencedNodes(e){let r=[];for(let[n,i]of e)d.i6g.restoreReferencedNodeFile(n,i),r.push(n);return r}currentEditorSessionID(e){return q(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,H.Z4)();if(!e)throw Error("Unable to get DB");let r=e.transaction([H.Sp,H.jP],"readonly"),n=r.objectStore(H.jP),i=await this.currentEditorSessionID(r);return i?await n.getAll((0,H.iM)(i)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return e_(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,r){let n=this.manager.fileKey;if(!(0,o.T)(n)){(0,W.W6)("Only local file keys can be reassigned");return}if((0,o.T)(e)){(0,W.W6)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let i=this.webLock,a=await (0,j.A2)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!a){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=a,await eh(this.manager.userID,n,e),r(),await i?.release()})}}let eI=null;function eT(){return eI}function ev(e,r){if(eI){if(eI.fileKey===e)return(0,v.Lo)("Autosave","Autosave manager already exists"),eI;(0,W.W6)("Manager already exists. Updating file key",{"current fileKey":eI.fileKey,"new fileKey":e}),eI.terminateAndWaitForCleanup(),eI=null}return(0,v.ED)("Autosave","Create autosave manager",{fileKey:e}),eI=new ef(r,e)}function eS(){ew().catch(e=>z(e,"failed to destroy autosave manager"))}async function ew(){if((0,v.ED)("Autosave","Destroy autosave manager"),!eI){(0,v.Lo)("Autosave","No manager to destroy");return}let e=eI;eI=null,await e.terminateAndWaitForCleanup()}function eA(e,{offlineFiles:r}){let n={};for(let i in e){let e=r[i];e&&(n[i]=e)}return n}let eN=F.M4.Query({async fetch({userId:e}){if(!e)return{};let r=await ea(e),n={};for(let e of r)n[e.fileKey]=e;return n}});var eC=(e=>(e.OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",e.EDITOR="EDITOR",e))(eC||{});let eO=F.M4.Mutation(({fileKey:e,name:r,source:n},{atomStore:i,query:a,reduxStore:o})=>{if(i.set(eD,null),!r)return;let s=o.getState().user?.id??null;a.mutate(eN({userId:s}),n=>{let i=n[e];i&&(i.name=r)});let l=eI?.fileCreationManager;return l&&(l.fileKey===e?(l.updateNewFileInfo({fileName:r}),l.pendingRealFileKey&&_.D.dispatch(O.yJ({file:{key:l.pendingRealFileKey,name:r},userInitiated:!0}))):(0,W.W6)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:l.fileKey})),(0,m.sx)("Rename New Autosave File",{source:n,isOffline:!navigator.onLine}),eE(s,e,r)}),eL=(0,E.eU)(e=>{let r=e(R.kS),n={};if(r){let i=e(eN({userId:r}));for(let[e,r]of Object.entries(i?.data??{}))r.hasChanges&&(n[e]=r)}return n}),eR=(0,E.eU)(e=>{let r=e(G.h),n=e(R.kS);if(r&&n){let i=e(eN({userId:n})),a=i?.data??{};if(r in a)return a[r]}return null});function eP(){return f.zl.get(eR)}let eD=(0,E.eU)(null);function ek(e){f.zl.set(eD,e.fileKey)}let eM=(0,E.eU)({});function eF(e,r){let n=f.zl.get(eM);f.zl.set(eM,{...n,[e]:r})}function ex(e){let r=(0,a.d4)(r=>!!r.autosave.unclaimedFilesWithChangesInIDB.find(r=>r.fileKey===e)),n=(0,h.l)(M.dDF,r?e:"");return r?n:b.Qw.loaded(!1)}function eU(){let e=(0,a.d4)(e=>e.autosave.unclaimedFilesWithChangesInIDB),r=(0,a.d4)(e=>e.autosave.unclaimedFilesCreatedOffline),n=(0,y.p)(M.dDF,i.useMemo(()=>e.map(({fileKey:e})=>({key:e})),[e])),o=i.useMemo(()=>n.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[n]),l=(0,a.d4)(e=>e.fileByKey);return i.useMemo(()=>({unsyncedFiles:(0,s.removeNullish)(e.map(({fileKey:e,lastUpdatedAt:r},n)=>{let i=l[e];return i&&!i.trashed_at&&o[n].unwrapOr(!1)?{type:"autosave-file",fileKey:e,lastUpdatedAt:r,file:i}:null})),localUnsyncedFiles:r}),[e,r,l,o])}(0,E.eU)(e=>{let r={...e(eL)},n=e(eD),i=e(eM),a={};for(let e in r)e in i||(a[e]=r[e]);if(n&&n in a){let e=a[n];a[n]={...e,isRenaming:!0}}return a})},742809:(e,r,n)=>{"use strict";n.d(r,{X:()=>d});var i=n(762638),a=n(980820),o=n(113853),s=n(662275),l=n(731078),c=n(648834);let d=(0,a.nF)((e,{entity:r,entityType:n,shape:a})=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.className=i.cx.hidden.$,l.style.display="none",l.onchange=()=>{let i=l.files;null!==i&&i.length>0&&(e.dispatch(o.s6({entity:r,entityType:n,file:i[0],shape:a||"CIRCLE"})),e.dispatch(s.to({type:c._,showModalsBeneath:!0})))},document.body.appendChild(l),l.click()});(0,a.nF)((e,{team:r})=>{e.dispatch(d({entity:r,entityType:l.ck.TEAM,shape:"SQUARE"}))})},864319:(e,r,n)=>{"use strict";n.d(r,{NT:()=>g,TA:()=>I,g7:()=>y});var i=n(675678),a=n(776621),o=n(807539),s=n(330654),l=n(99506),c=n(36816),d=n(304769),u=n(13513),p=n(720647);let m={design:d.ud.DESIGN,whiteboard:d.ud.FIGJAM,figjam:d.ud.FIGJAM,dev_mode:d.ud.DEV_MODE,slides:d.ud.SLIDES,collaborator:d.ud.COLLABORATOR,developer:d.ud.DEVELOPER,expert:d.ud.EXPERT};(0,o.x)()(m);let h={design:l.ud.DESIGN,whiteboard:l.ud.WHITEBOARD,figjam:l.ud.WHITEBOARD,dev_mode:l.ud.DEV_MODE,slides:l.ud.SLIDES,collaborator:l.ud.COLLABORATOR,developer:l.ud.DEVELOPER,expert:l.ud.EXPERT};(0,o.x)()(h);let _={design:p.lM.DESIGN,whiteboard:p.lM.FIGJAM,figjam:p.lM.FIGJAM,dev_mode:p.lM.DEV_MODE,slides:p.lM.SLIDES};function g(e){return _[e]??e}(0,o.x)()(_);let f={design:p.oM.DESIGN,whiteboard:p.oM.WHITEBOARD,figjam:p.oM.WHITEBOARD,dev_mode:p.oM.DEV_MODE,slides:p.lM.SLIDES};(0,o.x)()(f);let E={design:c.j4.DESIGN,whiteboard:c.j4.WHITEBOARD,figjam:c.j4.WHITEBOARD};function y(e){return s.object(u.dk.dict(()=>e.optional()))}(0,o.x)()(E),d.ud.DESIGN,d.ud.DEV_MODE,d.ud.FIGJAM,d.ud.SLIDES,d.ud.EXPERT,d.ud.DEVELOPER,d.ud.COLLABORATOR;let b=u.N_.dict();function I(e){var r;if(!e)return null;let n=b[m[r=e.key]??r];return n?{key:n,license_types:e.licenseTypes.map(e=>g(e))}:((0,a.$D)(i.FigmaTeam.BILLING,Error(`convertLgSeatTypeProduct encountered unexpected seat type key: ${e.key}`)),null)}},582410:(e,r,n)=>{"use strict";n.d(r,{H5:()=>o});var i=n(545697),a=n(720647);let o=new i.X([a.G_.DESIGN,a.G_.FIGJAM,a.G_.DEV_MODE]);new i.X([a.G_.DESIGN,a.Mg,a.G_.DEV_MODE])},720647:(e,r,n)=>{"use strict";n.d(r,{DK:()=>d,G_:()=>c,Mg:()=>l,Te:()=>u,_R:()=>f,gj:()=>g,lM:()=>p,oM:()=>h,vc:()=>_,wk:()=>m});var i=n(634832),a=n(330654),o=n(99506),s=(e=>(e.DESIGN="design",e.FIGJAM="figjam",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e))(s||{});let l="whiteboard",c={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode"},d=a.nativeEnum(c),u={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode"};a.nativeEnum(u);let p={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode",SLIDES:"slides"},m=a.nativeEnum(p),h={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode",SLIDES:"slides"};function _(e){switch(e){case o._Y.DESIGN:case o._Y.SLIDES:case o._Y.SITES:case o._Y.COOPER:case null:return u.DESIGN;case o._Y.WHITEBOARD:return u.WHITEBOARD;default:(0,i.assertNever)(e)}}function g(e){switch(e){case o.G_.DESIGN:return c.DESIGN;case o.G_.DEV_MODE:return c.DEV_MODE;case o.G_.WHITEBOARD:return c.FIGJAM;default:(0,i.assertNever)(e)}}function f(e,r){return e===o._Y.WHITEBOARD?r?.whiteboardPaidStatus===o.dQ.RESTRICTED:e===o._Y.DESIGN&&r?.designPaidStatus===o.dQ.RESTRICTED}a.nativeEnum(h)},176824:(e,r,n)=>{"use strict";n.d(r,{p:()=>a}),n(752553),n(710667);var i=n(622139);function a(e,r){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===i.tn.CONFIRM_PAY&&r.promo}n(720647),n(978779)},774442:(e,r,n)=>{"use strict";n(411855),n(75274),n(966712),n(915440),n(711525),n(391388),n(594901),n(860178),n(99506),n(279453),n(428467)},12493:(e,r,n)=>{"use strict";n.d(r,{$n:()=>w,ac:()=>C,gW:()=>v});var i=n(411855),a=n(188507),o=n(587670),s=n(374626),l=n(915440),c=n(391388),d=n(857766),u=n(678340),p=n(335682),m=n(99506),h=n(279453),_=n(428467),g=n(239671),f=n(66037),E=n(594901),y=n(775099),b=n(100197),I=n(147206),T=n(984968);function v(e,r,n,i,a,s,l,c){var p;return{createBranch:A(e,r,l,c,n,i),openBranchSource:e&&(0,d.Kz)(e)?{status:"enabled"}:{status:"hidden"},viewBranches:e&&e.fileRepoId?l?{status:"hidden",reason:"Recovery mode"}:{status:"enabled"}:{status:"hidden"},viewBranchDiff:(p=e?.sourceFile||null,e?(0,d.Kz)(e)?e.canView?p?.canView?l?{status:"hidden",reason:"Recovery mode"}:a!==o.lyf.BRANCHING&&i!==u.Wy.SAFE?{status:"disabled",reason:"Low memory"}:{status:"enabled"}:{status:"hidden",reason:"Can't view source"}:{status:"hidden",reason:"Can't view branch"}:{status:"hidden",reason:"Not a branch"}:{status:"hidden"}),mergeBranch:function(e,r,n,i,a,s){if(!e)return{status:"hidden"};if(!(0,d.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canManage)return{status:"hidden",reason:"Can't edit source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(s)return{status:"hidden",reason:"Recovery mode"};if(i!==o.lyf.BRANCHING){if(n!==u.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(a!==o.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,i,a,s,l),viewSourceDiff:function(e,r,n,i,a,s,l){if(!e)return{status:"hidden"};if(!(0,d.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canView)return{status:"disabled",reason:"Can't view branch"};if(!r?.canView)return{status:"disabled",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],p=n.fileByKey[e.key];if(!c||!N(p,c))return{status:"disabled",reason:"No changes"};if(a!==o.lyf.BRANCHING){if(i!==u.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(s!==o.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,i,a,s,l),updateBranch:function(e,r,n,i,a,s,l){if(!e||!(0,d.Kz)(e))return{status:"hidden"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canView)return{status:"hidden",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],p=n.fileByKey[e.key];if(!c||!N(p,c))return{status:"disabled",reason:"No changes"};if(a!==o.lyf.BRANCHING){if(i!==u.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(s!==o.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,i,a,s,l)}}function S(){return(0,b.ut)(o.Ez5?.uiState().isRecovery,!1)}function w(){let e=(0,E.FC)(),r=(0,p.q5)(),n=(0,a.d4)(e=>e.selectedView.editorType),o=S(),l=(0,s.md)(u.eE),c=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),d=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState),m=r?.teamId??null;return(0,i.useMemo)(()=>v(r,e,n,l,c,d,o,m),[r,e,n,l,c,d,o,m])}function A(e,r,n,i,a,o){if(!e)return{status:"hidden",reason:"No file"};if(n)return{status:"hidden",reason:"Recovery"};if(a!==g.nT.Design)return{status:"hidden",reason:"Invalid editor type"};if(void 0!==o&&o!==u.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if((0,I.Pe)(e))return{status:"disabled",reason:"File is copy/export restricted"};if((0,_.isOrgUserExternallyRestrictedFromState)(r))return{status:"hidden",reason:"Your organization doesn't allow you to create branches in external spaces."};if((0,y.XD)({currentTeamId:i,hasCurrentOrg:!!r.currentUserOrgId}))return{status:"upsell-org",reason:"Not in org but can upsell into it"};if(!e.parentOrgId)return{status:"hidden",reason:"File is not in org"};if(!r.currentUserOrgId)return{status:"hidden",reason:"Not in org"};let s=(0,d.up)(e,r.repos);if(s&&!(0,d.SA)(e,s))return{status:"hidden",reason:"Not the main file"};let l=r.user&&r.orgUsersByOrgId[e.parentOrgId]&&r.orgUsersByOrgId[e.parentOrgId][r.user.id]?r.orgUsersByOrgId[e.parentOrgId][r.user.id]:null,c=l&&l.design_paid_status;if(null===c)return{status:"hidden",reason:"Unknown account type"};switch(c){case m.El.RESTRICTED:if(l&&(0,I.Ay)(l.permission)===f.jh.GUEST)return{status:"hidden",reason:"Guests cannot see upsell"};return{status:"upsell-org-seat"};case m.El.STARTER:return{status:"hidden",reason:"Invalid account type"};case m.El.FULL:return{status:"enabled"}}}function N(e,r){return r.checkpoint_id&&e.source_checkpoint_id&&e.source_checkpoint_id!==r.checkpoint_id}function C(e){let r=(0,T.cD)(),n=e?.key,a=(0,l.Rs)(h.XRI,{fileKey:n},{enabled:!!n}),o=(0,E.FC)(),s=S();return(0,i.useMemo)(()=>e?c.Qw.from(a).transform(n=>A(n.file&&e?{key:e.key,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,canEdit:n.file.canEdit,viewerExportRestricted:n.file.viewerExportRestricted}:null,o,!!s,r,(0,g.sL)(e.editor_type))):c.Qw.loaded({status:"hidden",reason:"No file"}),[r,s,o,e,a])}},654034:(e,r,n)=>{"use strict";n.d(r,{CR:()=>O,F$:()=>U,GV:()=>b,JG:()=>w,PK:()=>y,Zz:()=>B,eR:()=>A,gj:()=>P,hx:()=>E,k0:()=>F,mz:()=>S,o8:()=>N,rN:()=>I,ro:()=>D,t$:()=>v,us:()=>x,vl:()=>k,wB:()=>f});var i=n(634832),a=n(609494),o=n(91408),s=n(966712),l=n(711525),c=n(886653),d=n(572206),u=n(309249),p=n(226055),m=n(457630),h=n(440535),_=n(911259),g=n(860168);let f=1,E={x:16,y:-4},y={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:h.EB.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function I(e,r){return!r||(0,d.gR)(r,e)}function T(e){return(0,o.jz)(e?g.NJv:g.QP5)}function v(){return T((0,p.GS)())}function S(){var e;return e=(0,p.GS)(),(0,o.jz)(e?g.oGx:g.RdL)}function w(e,r,n){let{messageMeta:i,attachments:a,anchorPosition:o,selectionBoxAnchor:s}=r;return{id:h.hm,key:h.hm,uuid:h.hm,anchored:!0,canvasPosition:o,selectionAnchorCanvasPosition:s,page:n,isActive:e===h.hm,comments:[],messageMeta:i,attachments:Object.values(a),pageName:null,isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD}}function A(e){return e===h.hm}let N=(0,c.cm)(e=>e.map(e=>e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:e.children?.length?N(e.children):void 0})),C=(0,c.cm)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),O=(0,c.cm)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),L=(e,r,n)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(r.unreadComments[e.id])return!0;if(r.readComments[e.id])return!1;let i=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&e.user.id!==n},R=new Date,P={id:"",userId:"",fileKey:"",createdAt:R,allReadAt:R,readComments:{},unreadComments:{}};function D(e,r,n,i,o,c,d,u){if("loaded"!==r.status)return r;let p=r.data.file;if(!p)return(0,l.gB)([]);let m=p?.comments.filter(e=>!e.parentId),_=p.comments.filter(e=>e.parentId).reduce((e,r)=>{let n=e[r.parentId]||[];return n.push(r),e[r.parentId]=n,e},{}),g=p.commentAttachments.reduce((e,r)=>{if(!r.fileCommentId)return e;let n=e[r.fileCommentId]||[];return n.push(r),e[r.fileCommentId]=n,e},{}),f=o(m.filter(e=>e.clientMeta?.nodeId).map(e=>e.clientMeta.nodeId)),E=m.map(r=>{let o=r.clientMeta&&r.clientMeta.nodeId,l=i[r.id]||r.uuid&&i[r.uuid],m=null;if(l&&r.clientMeta?.selectionBoxAnchor){let e=r.clientMeta.x-r.clientMeta.selectionBoxAnchor.x,n=r.clientMeta.y-r.clientMeta.selectionBoxAnchor.y;m={x:l.x-e,y:l.y-n}}let E=o?f[o]||r.clientMeta?.pageId||null:r.clientMeta?.pageId||"0:1",y=_[r.id]||[],b=[r,...y.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime())],I=p.currentUserCommentReadStatus||P,T=b.map(n=>{let i=g[n.id]??(n.uuid&&g[n.uuid]);return function(e,r,n,i,o,l,c){let d=L(n,i,e),u=(0,a.L4)(n.id),p=n.messageMeta;n.messageMetaStylized?.length&&(p=n.messageMetaStylized);let m=(0,s.kc)().comments_faster_saving_ux?!!n.uuid&&o.has(n.uuid):void 0,h=(0,s.kc)().comments_faster_saving_ux_v2?u||!!r.uuid&&r.uuid in l:void 0;return{id:n.id,uuid:n.uuid,key:r.key,parent_id:n.parentId,user_id:n.user.id,created_at:n.createdAt.toISOString(),resolved_at:r.resolvedAt?r.resolvedAt.toISOString():null,deleted_at:null,message_meta:N(p),attachments:c,client_meta:n.clientMeta?C(n.clientMeta):null,order_id:null!==n.orderId?n.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:m,isPendingFromLg:h,user:O(n.user)}}(e,r,n,I,d,u,i)}),v=(0,a.L4)(r.id),S=(0,s.kc)().comments_faster_saving_ux?!!r.uuid&&d.has(r.uuid):void 0,w=(0,s.kc)().comments_faster_saving_ux_v2?v||!!r.uuid&&r.uuid in u:void 0;return{id:r.id,uuid:r.uuid||void 0,key:r.key,anchored:!!l,canvasPosition:l,selectionAnchorCanvasPosition:m,page:E,pageName:E&&c[E]||null,isActive:n===r.id,isPendingFromSinatra:v,isSaving:S,isPendingFromLg:w,comments:T,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD,commentPin:r.commentPin}});return(0,l.gB)(E)}function k(e,r,n,a){let{canvasPosition:o}=r,s=o&&e?(0,m.Z0)(e,o):null,l=function(e,r,n,a,o,s){if(!e||!r)return null;let l=(function(e){switch(e){case h.kT.COMMENT_THREAD:return _.XC;case h.kT.FEED_POST:return _.b1;case h.kT.WALKTHROUGH_MEDIA:return _.Yp;default:(0,i.assertNever)(e)}})(a).getPinSize(n).width,c=l+E.x+T(o)+25;return e.width-r.x-(s??0)<c?{x:-1*T(o)-E.x,y:-55}:{x:l+E.x,y:-55}}(e,s,new Set(r.comments.map(e=>e.user_id)).size,r.sidebarItemType,n,a),c=s&&l?d.Mi.add(s,l):null;return{...r,anchorPosition:s,threadPosition:c,threadOffset:l}}let M=(e,r,n)=>{let i=e.id;if(r.unreadCanvasMentions[i])return!0;if(r.readCanvasMentions[i])return!1;let a=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=a.getTime())&&n!==e.id};function F(e,r,n){if("loaded"!==r.status)return r;let i=r.data.file;if(!i)return(0,l.gB)([]);let a=i.fileCanvasMentions,o=i.currentUserFileCanvasMentionReadStatus||u.ih,s=a.map(r=>(function(e,r,n,i){let a=`canvas_mention_${r.id.replace(/-/g,"_")}`,o=r.id,s=M(r,n,e);return{id:a,uuid:o,key:r.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:(0,l.oA)(r.pageId,null),pageName:null,isActive:i===a,isPendingFromSinatra:void 0,comments:[{id:a,uuid:o,key:o,parent_id:null,user_id:r.fileKey,created_at:r.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:N(r.messageMeta),client_meta:null,order_id:null,isUnread:s,isPendingFromSinatra:!1,user:O(r.mentionedByUser)}],messageMeta:N(r.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:h.kT.COMMENT_THREAD,nodeId:r.nodeIdPath[0]}})(e,r,o,n));return(0,l.gB)(s)}function x(){return{reply:{messageMeta:[],attachments:{}},state:h.EB.READY}}function U(e){let r=[];for(let n=0;n<e.message_meta.length;n++){let i=e.message_meta[n];i.hasOwnProperty("user_id")&&r.push(i.user_id)}return r}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},661843:(e,r,n)=>{"use strict";n.d(r,{Hu:()=>w,Kq:()=>O,W9:()=>N,gu:()=>C,kx:()=>A});var i=n(411855),a=n(188507),o=n(587670),s=n(534611),l=n(707458),c=n(636149),d=n.n(c),u=n(776250),p=n(966712),m=n(572206),h=n(975350);n(763223),n(912924),n(356390),n(160402),n(497306);var _=n(29680),g=n(514736),f=n(788256),E=n(654034),y=n(289032),b=n(114716),I=n(74505),T=n(547465);(0,p.kc)().comments_new_observer;let v=(e,r)=>({anchorPositionById:r(i.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let r=e.data.file,n=Object.create(null),i=new Set,a=r.comments.filter(e=>null===e.parentId);for(let e of a)if(e.clientMeta){let{x:r,y:a,nodeId:o,nodeOffset:s,stablePath:l}=e.clientMeta;n[e.id]={canvasPosition:{x:r,y:a},nodeId:o,nodeOffset:s,stablePath:l?`[${l.join(",")}]`:void 0},null!=o&&i.add(o)}return{commentNodeInfoById:n,commentNodeIds:i,commentThreads:a}},[e]).commentNodeInfoById)}),S="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function w(e,r){let n=i.useMemo(()=>d()(e,e=>e.clientMeta?.nodeId),[e]),s=i.useMemo(()=>Object.keys(n),[n]),l=i.useRef({}),c=(0,a.wA)(),u=(0,b.g)(),p=i.useCallback(e=>{let{nodeId:r,position:i,eventOrigins:a}=e,o=l.current[r],s=a.includes("LOCAL"),d=navigator.onLine;if(s&&d){if(null===i){let e=n[r]||[];o&&e.forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},i=m.Mi.add(o.position,n);(r.x!==i.x||r.y!==i.y)&&c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else i&&i.page!==o?.position?.page&&(n[r]||[]).forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},a=m.Mi.add(i,n);c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:i.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}l.current[r]=e},[n,l,c]);i.useEffect(()=>{if(r.enabled&&o.glU&&u){let{currentNodePosition:e}=(0,I.EE)(S,s,p);l.current=e}return()=>{o.glU&&u&&(0,I.lB)(S)}},[s,p,r.enabled,u])}function A(e){return i.useCallback(r=>r.reduce((r,n)=>{let i=e?.pageIdForNodeId(n)||null;return i&&l.q.instance.get(i)?.isInternalOnlyNode&&(i=null),r[n]=i,r},{}),[e])}function N(e,r,n,o,s,l){let c=v(r,o),d=(0,a.d4)(e=>e.comments.savingCommentUuids),p=(0,a.d4)(e=>e.comments.lgPendingUuidToServerIdMap);i.useEffect(()=>{if("errors"===r.status){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load comments: ${e}`),(0,u.sx)("Livegraph Comments Errors",{errors:e})}},[r]),(0,T.t)(e=>{if("loading"!==r.status){if("errors"===r.status){e("comments_fetched",{status:r.status});return}e("comments_fetched",{count:r.data?.file?.comments?.length,status:r.status})}},[r]);let m=i.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,r)=>(e["nodeId"in r?r.nodeId:r.id]=r.name,e),{}),[l]),h=i.useMemo(()=>(0,E.ro)(e,r,n,c.anchorPositionById,s,m,d,p),[e,r,n,c.anchorPositionById,s,m,d,p]);return(0,y.E)("loaded"===h.status&&h.data||[]),h}function C(e,r,n){return i.useEffect(()=>{if(r.errors&&r.errors.length){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load canvas mentions: ${e}`),(0,u.sx)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[r.errors]),i.useMemo(()=>(0,E.k0)(e,r,n),[n,r,e])}function O(e){let r;let n=(0,g.s)(),i=(0,_.eY)();if(!(0,f.Qf)(i))return!1;switch(n.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!1;return!i.get(r);case"non_slide_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!0;let a=l.q.instance.get(r);if(!a)return!0;return a.findContainingSlideOrSelf()===s.AD;default:return!1}}},697551:(e,r,n)=>{"use strict";n.d(r,{CR:()=>P,Cj:()=>eh,D:()=>et,Dp:()=>V,Gg:()=>e_,Gq:()=>X,HE:()=>$,HN:()=>er,HR:()=>eo,Hc:()=>T,IZ:()=>ea,Jl:()=>O,KH:()=>ey,Ks:()=>G,Lg:()=>z,MZ:()=>Q,T9:()=>ec,Tn:()=>H,UK:()=>N,UP:()=>eu,Uc:()=>q,V4:()=>F,Wh:()=>j,Wi:()=>ee,Yo:()=>L,Yp:()=>v,ax:()=>I,b:()=>Y,c0:()=>M,cV:()=>eg,cs:()=>es,d9:()=>ep,gS:()=>R,kc:()=>el,kl:()=>B,n:()=>eE,nF:()=>eb,nR:()=>eT,o:()=>U,oH:()=>S,ou:()=>A,pH:()=>J,qA:()=>ef,sD:()=>ed,uS:()=>x,vr:()=>w,x1:()=>ei,xp:()=>D,yO:()=>Z,zU:()=>em});var i=n(188507);n(730371);var a=n(776250),o=n(886653),s=n(939863),l=n(837324),c=n(22863),d=n(107877),u=n(661976),p=n(521010),m=n(560718);n(860178);var h=n(99506),_=n(428467),g=n(23001),f=n(555328),E=n(239671),y=n(813408);n(66037);var b=n(809073);function I(e,r){return{...e&&e.versions||{},...r&&r.versions||{}}}function T(e,r,n){return e&&r&&r[e]||n}function v(e){return e&&e.trim()||""}function S(e){return e&&e.status||{code:y.aP.EDIT}}function w(e,r){let n=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:n}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:n}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:n})}function A(e,r){let n=r.authedProfilesById[e];return n?.primary_user_id?!!r.user&&!!n.associated_users?.find(e=>e.user_id===r.user.id):n?.team_id?!!(r.user&&r.teamAdminRolesForAuthedUsers[r.user.id].some(e=>e.team_id===n.team_id))||(0,_.hasAdminRoleAccessOnTeam)(n.team_id,r):!!n?.org_id&&(0,_.canAdminOrg)(n.org_id,r)}function N(e,r){return!!e.primary_user_id||"communityHub"!==r.view||"landing"!==r.subView||r.category!==u.aH&&r.sortState!==d.eg.FOLLOWING_FEED}let C=(0,o.xx)((e,r,n,i)=>{let a=null;if(e&&r[e]){let o=(0,_.canAdminOrg)(e,{currentUserOrgId:e,user:n,orgById:r,orgUsersByOrgId:i,fileByKey:{}}),s=r[e];a={isAdmin:o,id:s.id,name:s.name}}return a});function O(e){return C(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function L(){let e=(0,i.d4)(e=>e.currentUserOrgId);return C(e,(0,i.d4)(e=>e.orgById),(0,i.d4)(e=>e.user),(0,i.d4)(e=>e.orgUsersByOrgId))}let R=(0,o.xx)((e,r,n)=>{let i;let a=r.plugins.fetchedResources;switch(e){case E.nT.Design:i=b.$A.Design;break;case E.nT.DevHandoff:i=b.$A.Handoff;break;case E.nT.Slides:i=b.$A.Slides;break;default:i=b.$A.FigJam}let o=[];for(let e of r.plugins[i]){let r=a[e.id];if(r&&r.version){o.push(r.version);continue}let i=n[e.id];i&&o.push(i)}return o});function P(e){return R(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function D(e){return!!(e.plugin_install||e.plugin||e.widget||e.whitelisted_plugin||e.hub_file||e.community_comment||e.community_resource_payment)}let k=e=>e.trim().toLocaleLowerCase().replace(/^#/,"");function M(e,r){return{content:e=k(e),state:W(e)||function(e,r){for(let n=0;n<r.length;n++)if(r[n]===e)return K(e);return null}(e,r.map(e=>e.content))?g.d.ERROR:g.d.OK}}function F(e,r){let n=e.find(e=>e.id===r);return n?.tags||[]}function x(e){return(0,s.Yd)(e.i18n_meta.text,e.text)}function U(e){return new Map(e.map(e=>[e.text,x(e)]))}function B(e,r,n,i){return r.find(r=>r===e)?(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${i.get(e)??e}'`}):n.find(r=>r.text===e)?void 0:(0,s.t)("community.publishing.tag_not_in_category",{tag:`'${i.get(e)??e}'`})}function V(e,r,n){let i=[];if(e.length>12)return(0,s.t)("community.publishing.cannot_have_more_than_12_tags");let a=U(n);for(let n=0;n<e.length;n++){let o=e[n],s=B(o,i,r,a);if(s)return s;i.push(o)}}let G=(e,r)=>(n,i)=>{let a=null;if(r.forEach((e,r)=>{0===e.toLocaleLowerCase().localeCompare(n.toLocaleLowerCase().trim())&&(a=r)}),!a)return{content:n,state:g.d.ERROR,errorMessage:(0,s.t)("community.publishing.tag_not_in_category",{tag:`'${n}'`})};let o=B(a,i.map(e=>e.content),e,r);return{content:a,state:o?g.d.ERROR:g.d.OK,errorMessage:o}};function H(e,r,n){let i=U(n),a=[];return e.tokens.forEach(e=>{let n=B(e.content,a.map(e=>e.content),r,i);a.push({...e,state:n?g.d.ERROR:g.d.OK,errorMessage:n})}),{...e,tokens:a}}function W(e){return e.match(/^[\P{Script_Extensions=Common} _\-0-9]*$/gu)?e.match(/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu)?e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}let K=e=>(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${e}'`});function j(e){if(e.length>12)return(0,s.t)("community.publishing.cannot_have_more_than_12_tags");let r=function(e){let r={};for(let n=0;n<e.length;n++){if(r[e[n]])return K(e[n]);r[e[n]]=!0}return null}(e);if(r)return r;for(let r=0;r<e.length;r++){let n=W(k(e[r]));if(n)return n}return null}function z(e){return e.length>er?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let Y={name:"",description:"",tags:{inputValue:"",errorMessage:"",tokens:[]},categoryId:null,creatorPolicy:"",viewerMode:h.y4.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:m.Ni.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},$=["Tab","Enter",","],q=5242880,Z=15728640,X=104857600,J=100,Q=12,ee=10,et=60,er=100;function en(e){return"is_widget"in e&&e.is_widget?f.vt.WIDGET:"current_plugin_version_id"in e?f.vt.PLUGIN:f.vt.HUB_FILE}function ei(e){return"profile_handle"in e?f.Ug.PROFILE:en(e)===f.vt.HUB_FILE?f.Ug.HUB_FILE:en(e)===f.vt.WIDGET?f.Ug.WIDGET:f.Ug.PLUGIN}function ea(e){return e>=ee-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:ee}):null}function eo(e){let r={},n={},i=e.map(e=>(r[e.id]=e,n[e.author.id]=e.author,e.id));return{commentsById:r,authorsById:n,feed:i}}d.eg.POPULAR;let es=c.c;function el(){return(0,i.d4)(e=>e.authedActiveCommunityProfile)}function ec({authedProfilesById:e,profileId:r,userId:n,orgId:i,teamId:a}){return r?e[r]:i?Object.values(e).find(e=>e.org_id===i)||null:a?Object.values(e).find(e=>e.team_id===a)||null:n&&Object.values(e).find(e=>e.associated_users?.find(e=>e.user_id===n))||null}function ed(e,r){return Object.values(r).find(r=>r.associated_users?.find(n=>n.user_id===e.id&&r.public_at))||null}function eu(){return(0,i.d4)(e=>ep(e.selectedView))}function ep(e){return"communityHub"===e.view||em(e)||!1}function em(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function eh(e){return"communityHub"===e.view&&"handle"===e.subView}function e_(e){return(0,p.G)(e)}function eg(e){return e.community_publishers?.accepted.find(e=>es(e))||null}function ef(e,r){let n=eg(r);if(n)return e.authedProfilesById[n.id]||null;let i=e.user&&ed(e.user,e.authedProfilesById);return i&&r.community_publishers?.accepted.find(e=>e.id===i.id)?i:null}function eE(e){switch(e){case f.bD.PLUGIN:return"plugins";case f.bD.WIDGET:return"widgets";case f.bD.COMMENT:return"comments";case f.bD.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function ey(e,{pluralized:r,capitalized:n}={}){return function(e,{pluralized:r,capitalized:n}={}){return eI((()=>{switch(e){case f.vt.PLUGIN:return"plugin";case f.vt.WIDGET:return"widget";case"comment":return"comment";case f.vt.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})(),{pluralized:r,capitalized:n})}((0,l.Vm)(e),{pluralized:r,capitalized:n})}function eb(e,{pluralized:r,capitalized:n}={}){return e?eI(f.bD.WIDGET,{pluralized:r,capitalized:n}):eI(f.bD.PLUGIN,{pluralized:r,capitalized:n})}function eI(e,{pluralized:r,capitalized:n}={}){return e+=r?"s":"",n&&(e=e[0].toUpperCase()+e.substr(1)),e}function eT(e,r){(0,a.sx)(d.W_.PROFILE_ADMIN_MENU_OPEN,{source:e,view:r})}},61057:(e,r,n)=>{"use strict";n.d(r,{D:()=>l,VH:()=>s});var i=n(96328),a=n(939863),o=n(697551);function s(e){let r=(0,o.cV)(e);if(r)return r.name;let n=e.community_publishers.accepted;return function(e,r,n){if(0===e.length)return"";if(1===e.length)return n(e[0]);let o=e.slice(0,r-1),s=e.slice(r-1);0===s.length&&(s=[o[o.length-1]],o=o.slice(0,o.length-1));let l=1===s.length?n(s[0]):(0,a.t)("community.resource.by_x_others",{numPublishers:s.length}),c=o.map(n);return l&&c.push(l),(0,i.Yx)(c)}(n,n.length,e=>e.name)}function l(e){let r=e.community_publishers.accepted;return e.community_publishers.pending&&(r=r.concat(e.community_publishers.pending)),r.reduce((e,r)=>{let n=r.associated_users?.map(e=>e.user_id)||[];return r.primary_user_id&&e.push(r.primary_user_id),e.concat(n)},[])}},258237:(e,r,n)=>{"use strict";n.d(r,{Ro:()=>o,jY:()=>s,o0:()=>l});var i=n(27087),a=n(697551);function o(e,r){return!!e&&!!e.plugin_publishers?.accepted?.some(e=>e.id===r)}function s(e,r){return!!e&&!!e.plugin_publishers?.pending?.some(e=>e.id===r)||o(e,r)}async function l(e,r){let{data:n}=await i.Ay.post(`/api/${(0,a.KH)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:r});return{resource:n.meta.plugin,errors:n.meta.errors}}},986323:(e,r,n)=>{"use strict";n(99506),n(596607);var i=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.ACCEPTED=2]="ACCEPTED",e[e.ADMIN=3]="ADMIN",e))(i||{})},782501:(e,r,n)=>{"use strict";n.d(r,{$W:()=>en,$x:()=>Y,Dd:()=>N,En:()=>C,G_:()=>W,Gp:()=>$,Ii:()=>U,Kg:()=>J,N8:()=>q,Rd:()=>Q,Rv:()=>k,UU:()=>x,Vo:()=>T,Wl:()=>K,f7:()=>L,gO:()=>A,j4:()=>B,kN:()=>V,l8:()=>j,mH:()=>H,n1:()=>M,nK:()=>ee,o1:()=>G,oB:()=>w,of:()=>F,vC:()=>Z,xw:()=>er});var i=n(188507),a=n(238267),o=n(675678),s=n(354703),l=n(38329);n(966712);var c=n(776621),d=n(939863);n(837324);var u=n(545941),p=n(697551);n(411916);var m=n(428467),h=n(555328),_=n(813408),g=n(28588),f=n(376485),E=n(506513);n(986323),n(216158);var y=n(204279),b=n(596607),I=n(837502);let T=10;var v=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.DISPLAY_ONLY=2]="DISPLAY_ONLY",e[e.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",e[e.ADMIN=4]="ADMIN",e[e.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",e[e.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",e[e.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",e[e.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",e))(v||{});let S=e=>!0===e.is_public||null!=e.org;function w(e,r,n,i){return(0,h.m3)(e)||i?f.Lu.PUBLIC:S(e.roles)?e.roles.is_public||(0,u.AC)(e)?f.Lu.PUBLIC:f.Lu.ORG:null!=r&&n?f.Lu.ORG:f.Lu.PUBLIC}function A(e,r,n,i){let a=k(r.team_id,n,e,r.parent_org_id||null);if(0===a.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return O(e,a,n.authedProfilesById,n.user?.id,i)}function N(e,r){return e.creator.id===r}function C(e,r){if(e){let n=F(r,e);if(n)return n}let n=x(r,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return O(e,n,r.authedProfilesById,r.user?.id)}let O=(e,r,n,a,o)=>{if(0===r.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let s=e?.id&&Object.keys(e.versions).length>0?function(e,r,n){if((e.community_publishers?.accepted||[]).length>0){let i=(0,p.cV)(e),a=i&&r[i.id];return a?.team_id?{team_id:a.team_id}:a?.org_id?{org_id:a.org_id}:{user_id:n||e.creator.id}}let i=r[e.publisher.id];return i.org_id?{org_id:i.org_id}:i.team_id?{team_id:i.team_id}:{user_id:i.primary_user_id}}(e,n,a):null;if(s&&r.some(e=>L(e,s)))return s;if(o&&r.find(e=>(0,i.bN)(e,o)))return o;let l=r.find(D);if(l)return l;let c=r.find(R);return c?c:r.find(P)||r[0]};function L(e,r){return"team_id"in e?"team_id"in r&&e.team_id===r.team_id:"org_id"in e?"org_id"in r&&e.org_id===r.org_id:"user_id"in e&&"user_id"in r&&e.user_id===r.user_id}let R=e=>"org_id"in e,P=e=>"team_id"in e,D=e=>"user_id"in e;function k(e,r,n,i){let a=[];if((n?.community_publishers?.accepted||[]).length>0){if(!e&&!i)return[{user_id:r.user.id}];let a=n&&(0,p.cV)(n),o=a?r.authedProfilesById[a.id]:null;if(o?.team_id)return(0,m.hasAdminRoleAccessOnTeam)(o?.team_id,r)?[{team_id:o.team_id}]:[];if(o?.org_id)return(0,m.canAdminOrg)(o?.org_id,r)?[{org_id:o.org_id}]:[]}if(r.currentUserOrgId){let n=r.orgById[r.currentUserOrgId];if(!n)return[];if((0,m.canAdminOrg)(r.currentUserOrgId,r)&&(a.push({org_id:r.currentUserOrgId}),n.cmty_publish_as_user_enabled&&a.push({user_id:r.user.id})),e&&r.teams[e]){if("secret"===r.teams[e].org_access)return[];((0,I.Bg)(n.shared_org_license_group_settings)?(0,m.canAdminOrg)(r.currentUserOrgId,r):(0,m.hasAdminRoleAccessOnTeam)(e,r))&&a.push({team_id:e})}return a}return e?((0,m.hasAdminRoleAccessOnTeam)(e,r)&&a.push({team_id:e}),a.push({user_id:r.user.id}),a):[{user_id:r.user.id}]}function M(e,r,n,i){let a;let o=e.has_file_link_password||e.hasFileLinkPassword;a="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null;let s=k("team_id"in e?e.team_id:e.teamId,n,i,a||null),l=!!n.figFileDuplicatedFromHubFile[e.key],c=!i;return r&&!("is_template"in e&&e.is_template||e.trackTags?.isTemplate||"is_new_user_playground_library"in e&&e.is_new_user_playground_library||e.track_tags?.source==="default")&&!o&&s.length>0&&!(l&&c)}function F(e,r){if(r.publisher.id&&e.user)switch(r.publisher.entity_type){case _.o1.ORG:{let n=Object.values(e.orgById).find(e=>e.community_profile_id===r.publisher.id);return{org_id:n?.id??e.currentUserOrgId??""}}case _.o1.TEAM:{let n=Object.values(e.teams).find(e=>e.community_profile_id===r.publisher.id);return{team_id:n?.id||""}}default:return{user_id:r.creator.id}}return null}function x(e,r,n=!0){let i=[],a=n&&r?F(e,r):null;return e.currentUserOrgId&&(0,m.canAdminOrg)(e.currentUserOrgId,e)&&i.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(r=>{let n=e.teams[r];n&&"secret"!==n.org_access&&(0,m.hasAdminRoleAccessOnTeam)(r,e)&&i.push({team_id:r})}),i.push({user_id:e.user.id}),a&&!i.some(e=>L(e,a))&&i.unshift(a),i}function U(e,r){if(!e)return!1;let{team_id:n,org_id:i}=e;if("user_id"in r){let n=e.associated_users;return!!r.user_id&&r.user_id===e.primary_user_id||n?.some(e=>e.user_id===r.user_id)}return"team_id"in r&&n===r.team_id||"org_id"in r&&i===r.org_id}function B(e){let r=l.D.getState();return"user_id"in e?r.authedUsers.byId[e.user_id]:"org_id"in e?r.orgById[e.org_id]:"team_id"in e?r.teams[e.team_id]:void 0}function V(e,r){if("org_id"in e)return r.orgById[e.org_id]?.name??null;if("team_id"in e)return r.teams[e.team_id]?.name??null;{let e=r.user&&(0,p.sD)(r.user,r.authedProfilesById);return e?.public_at&&e?.name?e.name:e?.public_at&&e?.profile_handle?`@${e.profile_handle}`:r.user?.handle||null}}function G(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?(0,d.t)("community.publishing.org_name",{org:n.name}):(0,d.t)("general.fallback_org_name")}if("team_id"in e){let n=r.teams[e.team_id];return n?(0,d.t)("community.publishing.team_name",{team:n.name}):(0,d.t)("general.fallback_team_name")}{let n=r.authedUsers.byId[e.user_id]??r.user,i=(0,p.sD)(n,r.authedProfilesById);return i?i.name:n?.name||(0,d.t)("general.fallback_user_name")}}function H(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?.community_profile_handle||null}if("team_id"in e){let n=r.teams[e.team_id];return n?.community_profile_handle||null}{let n=r.authedUsers.byId[e.user_id]??r.user,i=(0,p.sD)(n,r.authedProfilesById);return i?i.profile_handle:n?.handle||null}}function W(e,r){var[n,i]=e.split(",");let a=atob(i),o=[];for(var s=0;s<a.length;s++)o.push(a.charCodeAt(s));let l=n.split(/;|:/)[1];return new Blob([new Uint8Array(o)],{type:l})}function K(e,r="Image",n=g.xp){if(!e)throw Error((0,d.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(0>n.indexOf(e.type))throw Error((0,d.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:r}));if(e.size>p.Uc)throw Error((0,d.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(p.Uc/1e6)}));return e.size}function j(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=n,i.src=e})}let z=new Set;async function Y(e,r){if(null===e.files||0===e.files.length)throw Error((0,d.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));r&&ee(r);let n=e.files[0];K(n,(0,d.t)("community.publishing.thumbnail_image"),[...g.xp,"image/svg+xml"]);let[i,a]=await Promise.all([j(URL.createObjectURL(n)),(0,E.c)(n)]);return z.add(i.src),{url:i.src,buffer:new Uint8Array(a)}}async function $(e,r){let n=[];for(let i=0;i<Math.min(T,e.length);i++){let o=e[i];if(r&&o.type.startsWith("video/")){!function(e,r,n="Video"){if(!e)throw Error((0,d.t)("community.publishing.error_thumbnail_image_not_found",{filename:n}));if(!g.VY.includes(e.type))throw Error((0,d.t)("community.publishing.error_video_wrong_format",{filename:n}));if(e.size>p.Gq)throw Error((0,d.t)("community.publishing.error_thumbnail_image_too_large",{filename:n,max_size:Math.floor(p.Gq/1e6)}))}(o,o.name);let e=URL.createObjectURL(o);await Promise.all([et(o),(0,y.jm)(e),X(e,o.name)]).then(([r,i])=>{let o=URL.createObjectURL(new Blob([i]));z.add(e),z.add(o),n.push({url:e,buffer:r.bytes,sha1:r.sha1,type:"video",thumbnail_url:o,thumbnail_buffer:i,thumbnail_sha1:(0,a.sha1OfUint8Array)(i)})}).catch(e=>{throw Error(e)})}else K(o,(0,d.t)("community.publishing.carousel_media_image"),[...g.xp,"image/svg+xml"]),await Promise.all([j(URL.createObjectURL(o)),(0,E.c)(o)]).then(([e,r])=>{z.add(e.src);let i=new Uint8Array(r);n.push({url:e.src,buffer:i,sha1:(0,a.sha1OfUint8Array)(i),type:"image"})}).catch(e=>{throw Error(e)})}return n}async function q(e,r){return null===e.files||0===e.files.length?Promise.resolve([]):await $(e.files,r)}function Z(e){if(!e||!e.length)return(0,d.t)("community.publishing.upload_at_least_one_image")}let X=(e,r)=>new Promise((n,i)=>{let a=document.createElement("video");a.preload="metadata",a.addEventListener("error",e=>{i(e.message)}),a.addEventListener("loadedmetadata",()=>{a.duration>30&&i((0,d.t)("community.publishing.error_video_too_long",{filename:r,max_length:30})),n(a)}),a.src=e,a.currentTime=0,a.load(),setTimeout(()=>{i("Video load timeout during video length validation")},1e4)});function J(e){let r=[],n=[],i=[];if(!e)return{uploadImages:r,uploadVideos:n,allMedia:i};for(let o=0;o<e.length;o++){let s=e[o];if("buffer"in s&&s.buffer&&s.buffer.length){if("video"===s.type){if(!s.thumbnail_buffer)throw Error((0,d.t)("community.publishing.error_video_thumbnail_not_found"));let e={carousel_position:o,sha1:(0,a.sha1OfUint8Array)(s.buffer),bytes:s.buffer,video_thumbnail_buffer:s.thumbnail_buffer,video_thumbnail_sha1:(0,a.sha1OfUint8Array)(s.thumbnail_buffer)};n.push(e)}else{let e={carousel_position:o,sha1:(0,a.sha1OfUint8Array)(s.buffer)};r.push(e),i.push(e)}}else if("id"in s){let e="video"===s.type?{carousel_position:o,sha1:s.sha1,video_file_uuid:s.video_file_uuid,video_thumbnail_sha1:s.thumbnail_sha1}:{carousel_position:o,sha1:s.sha1};i.push(e)}}return{uploadImages:r,uploadVideos:n,allMedia:i}}function Q(e,r){return r&&r?.length&&e?.length?e.map(async({url:e,fields:n,carousel_position:i})=>{let a=r[i];if(!a||!("buffer"in a)||!a.buffer)return!1;let l=new FormData;Object.entries(n).forEach(([e,r])=>l.append(e,r)),l.set("content-type",(0,s.i)(a.buffer)??"image/png"),l.append("file",new Blob([a.buffer]));try{await fetch(e,{method:"POST",body:l})}catch(e){throw(0,c.$D)(o.FigmaTeam.COMMUNITY,e),Error((0,d.t)("community.actions.error_uploading_carousel_image_error",{error:(0,d.Jv)(e,e.data?.message||"unknown error")}))}return!0}):[]}function ee(e){e&&z.has(e.url)&&(URL.revokeObjectURL(e.url),z.delete(e.url),"type"in e&&"video"===e.type&&z.has(e.thumbnail_url)&&(URL.revokeObjectURL(e.thumbnail_url),z.delete(e.thumbnail_url)))}async function et(e){let r=new Uint8Array(await (0,E.c)(e));return{sha1:(0,a.sha1OfUint8Array)(r),bytes:r}}function er(e){if(!e.currentUserOrgId)return!1;let r=(0,b.xw)(e);return!(r&&r.agreed_to_community_tos_at)}function en(e,r){return Object.entries(r).reduce((r,[n,i])=>r+Number(e.includes(n)&&!!i),0)}},696673:(e,r,n)=>{"use strict";n.d(r,{$Q:()=>b,GS:()=>T,JB:()=>S,N4:()=>I,hT:()=>v,tz:()=>E,wJ:()=>y});var i=n(411855);n(188507);var a=n(593779);n(966712);var o=n(38580),s=n(837324),l=n(298527),c=n(173454);n(875387);var d=n(479296),u=n(378260),p=n(335682),m=n(694687),h=n(279453);n(58032);var _=n(984968);let g=["1341960932129965145","1341958841682444374","1341960613427075160"],f=["1344465555686977718","1344465264817347765","1344464949811785908"];function E(e){return g.includes(e)||f.includes(e)}let y=(0,d.D)(e=>22!==e.length&&!e.match(/\D/));function b(e){return(0,i.useMemo)(()=>e&&y(e)?e:null,[e])}function I(e){let{name:r}=(0,s.qD)(e),{id:n,thumbnail_url:i,library_key:o,publisher:l}=e;return{name:r,key:n,type:c.PP,thumbnail_url:i,library_key:o??(0,a.l)(""),author_name:l.name,author_handle:l.profile_handle}}function T(e){let{library_file_name:r,library_file_key:n,thumbnail_url:i,library_key:a,author_name:o,author_handle:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:i,library_key:a,author_name:o,author_handle:s}}function v(e){let{file:r,components:n,stateGroups:i,styles:a,variables:o,variableSets:s}=e,{name:l,key:c,type:d,thumbnail_url:u,library_key:p,author_name:m,author_handle:h}=r;return{library_file_key:c,library_file_name:l,thumbnail_url:u,num_components:n.length,num_state_groups:i.length,num_styles:a.length,num_variable_collections:s.length,num_variables:o.length,num_module_assets:0,type:d,library_key:p,author_name:m,author_handle:h}}let S=(0,o.eU)(e=>{let r=e(_.Me),n=(0,_.jv)(r?.id)?r?.id:null,i=e(m.h0),a=e(p.yV),o=a?a.parentOrgId:i,s=e(u.mQ),c=o?s[o]:null,d=e((0,h.U8U)(n||o?{teamId:n||"-1",orgId:o}:null));return"loaded"===d.status&&(0,l.rM)(d)?(0,l.Pp)(d.data.org,d.data.team):(0,l.MJ)(c,r)});(0,o.eU)(e=>{let r=e(S);return()=>!!r})},269167:(e,r,n)=>{"use strict";n.d(r,{EO:()=>U,FP:()=>x,OY:()=>B,Qj:()=>K,Rm:()=>V,Y8:()=>$,aQ:()=>Z,ej:()=>D,gn:()=>X,kA:()=>P,lt:()=>z,ul:()=>q,vT:()=>k,vl:()=>M,xp:()=>Y,y1:()=>W,zH:()=>H});var i=n(411855),a=n(188507),o=n(776250),s=n(157663),l=n(38329),c=n(737947),d=n(966712),u=n(286640),p=n(761870);n(881388);var m=n(939863),h=n(654923),_=n(837324),g=n(466636),f=n(545941);n(376441);var E=n(662275),y=n(986270),b=n(756085),I=n(521010),T=n(555328);n(401730);var v=n(376485),S=n(977466),w=n(248144),A=n(638541),N=n(541158),C=n(479296),O=n(860178),L=n(215822);function R(e,r,n,i){return a=>{a(E.$O({type:w.h.type,data:{userId:e.id,resource:r,onSuccess:()=>{a(n=>{((0,T.I0)(r)||(0,T.xQ)(r))&&n(y.fR(r,e.id))}),n&&n()},onCancel:i}}))}}let P=(0,C.n)((e,r,n,i,a,o)=>{let l=(0,d.kc)().community_hub_admin&&n&&(0,f.AC)(n);return new Promise(d=>{let u=()=>{if(r){if(i||l){var a;e((a=()=>{K({type:"PAID"}),d()},e=>{e(E.$O({type:w.h.type,data:{userId:r.id,resource:n,localResource:i,onSuccess:a,onCancel:d,noInteractionMode:!0}}))}));return}(0,T.m3)(n)?e(R(r,n,()=>d(),()=>d())):s.k.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(p.Ts({origin:"freemium_checkout_modal_in_open_session",redirectUrl:c.Ay.location.pathname,signedUpFromOpenSession:!0})),e((0,E.to)({type:S.x,data:{headerText:(0,m.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};o===A.P.SKIP?u():e(E.$O({type:A.V.type,data:{type:r?o||A.P.PAID_FEATURE:A.P.LOGGED_OUT,onContinue:u,onClose:d,plugin:n&&(0,L.uF)(n)||i||a,monetizedResourceMetadata:n?.monetized_resource_metadata}}))})});function D(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.authedActiveCommunityProfile),s=(0,a.d4)(e=>e.authedUsers),l=(0,h.I)(e);return i.useCallback(()=>{if(!e)return;let i=(0,g.QQ)(l),a=(0,T.m3)(e);if((0,o.sx)("cmty_resource_usage_action",{resourceType:(0,_.Dl)(e),resourceId:e.id,profileId:n?.id,hasActiveCommunityResourcePayment:i,isMonetizedResource:a}),!a||i||!1===function(e,r,n){if(!(0,T.m3)(n))return!1;let i=(0,I.G)({authedActiveCommunityProfile:e,authedUsers:r}),{usersCanPurchase:a,publishers:o}=(0,g.V4)(i,n);return(0!==a.length||0!==o.length)&&(0!==a.length||0===o.length)}(n,s,e))return;let c=(0,I.G)({authedActiveCommunityProfile:n,authedUsers:s}),{usersCanPurchase:d,publishers:u}=(0,g.V4)(c,e);if((0,o.sx)("Checkout Flow Entered",{resourceType:(0,_.Dl)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:d.length,numLoggedInAssociatedPublishers:u.length}),1===d.length&&0===u.length){r(R(d[0],e));return}r((0,E.to)({type:N.I,data:{onUserSelect:n=>{(0,o.sx)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,_.Dl)(e),resourceId:e.id,userIdForPurchase:n.id}),r(R(n,e))},resource:e}}))},[e,l,n,s,r])}function k(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return(0,g.QQ)(n)}function M(e,r){let{publishers:n}=(0,g.V4)([r],e);return n.length>0}function F(e,r,n){return!(!e||!(0,T.m3)(e)||(0,T.PM)(e)||!(0,T.U)(e)&&((0,v.f5)(e)||(0,T.zF)(e))||n&&M(e,n))&&!(k(e,r)&&!function(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return n&&(0,g.UO)(n)}(e,r))}function x(){return(0,a.d4)(e=>e.communityPayments)}function U(e){return F(e,x(),(0,O.iZ)()||void 0)}function B(e){let r=x();return(0,T.m3)(e)&&k(e,r)}function V(e){return F(e,l.D&&l.D.getState().communityPayments,l.D&&l.D.getState().user||void 0)}let G="local-resource-payment";var H=(e=>(e.PAID="PAID",e.UNPAID="UNPAID",e.NOT_SUPPORTED="NOT_SUPPORTED",e))(H||{});function W(){return(0,u.DN)().get(G)}function K(e){(0,u.DN)().set(G,e)}function j(e,r){if(r&&(0,T.m3)(r))return e?.[r.monetized_resource_metadata.id]||r.community_resource_payment}function z(e){return j(x(),e)}function Y(e){let r=(0,a.d4)(r=>(0,L.my)(e,r.publishedPlugins)),n=z(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function $({extension:e,publishedPlugins:r,publishedWidgets:n,communityPaymentsState:i}){let a=((0,v.k0)(e)?n:r)[e.plugin_id];if(!a)return;let o=j(i,a);return{...a,community_resource_payment:o}}function q(e){let r=(0,b.cW)()[e],n=z(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function Z(e){let r=(0,a.d4)(r=>r.publishedWidgets[e]),n=z(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function X(e){let r=z(e);return!!r&&(0,g.UO)(r)}},574724:(e,r,n)=>{"use strict";n.d(r,{c6:()=>c,Ay:()=>l,Jm:()=>a.J});var i=n(474750),a=n(291516),o=(e=>(e[e.STARTING=0]="STARTING",e[e.FRONTMATTER=1]="FRONTMATTER",e[e.BODY=2]="BODY",e[e.FOOTER=3]="FOOTER",e))(o||{}),s=n(742808);let l=(0,i.yu)({onError:e=>{(0,s.Rh)("web.cortex.error",{route:e})}});class c{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read(),{done:n,value:i}=await r;if(n)break;yield i}}finally{e.releaseLock()}}}Symbol.asyncIterator},677074:(e,r,n)=>{"use strict";n.d(r,{BQ:()=>u,Ay:()=>d,sZ:()=>p,_0:()=>m});var i=n(341092),a=n(374626),o=n(825871),s=n(378260),l=n(106757),c=n(335682);function d(){return{orgId:a.zl.get(s._s)||null,teamId:a.zl.get(c.As)||null,fileKey:a.zl.get(c.ze)||null,userId:a.zl.get(l.kS)||null,trackingSessionId:(0,o.f)()}}var u=(e=>(e.RATE_LIMIT_EXCEEDED="rate_limit_exceeded",e.CONTENT_LENGTH_LIMIT="content_length_limit",e.UNSAFE_OR_HARMFUL_CONTENT="unsafe_or_harmful_content",e.GENERIC="generic",e.OFFLINE="offline",e.METER_EXCEEDED="meter_exceeded",e))(u||{});function p(e){if(e instanceof TypeError&&!navigator.onLine)return"offline";if(e instanceof i.G1)switch(e.type){case"rate_limit_exceeded":return"rate_limit_exceeded";case"content_length_limit_exceeded":case"payload_too_large":return"content_length_limit";case"unsafe_or_harmful_content":return"unsafe_or_harmful_content";case"offline":return"offline";case"meter_exceeded":return"meter_exceeded";case"generic":if(e.data&&"status"in e.data&&413===e.data.status)return"content_length_limit"}return"generic"}function m(e){return e instanceof i.G1&&"meter_exceeded"===e.type&&!!e.data.resetsAt}},385326:(e,r,n)=>{"use strict";n.d(r,{D:()=>o,a:()=>s});var i=n(38580),a=n(288706);let o=(0,i.eU)(null),s=(0,a.um)([],(e,r)=>{switch(r.type){case"mount":return[...e,r?.uniqueOverlayId];case"unmount":return e.filter(e=>e!==r?.uniqueOverlayId)}})},683694:(e,r,n)=>{"use strict";n.d(r,{PD:()=>g,wg:()=>y});var i=n(38580),a=n(408405),o=n(335682),s=n(529928),l=n(243987),c=n(746869),d=n(442617),u=n(986060),p=n(284111),m=n(378260),h=n(723239),_=n(582947);let g=(0,p.Z1)(h.Z_,(e,r)=>{let n=r(o.yV);if(null==n||null==e)return!1;let i=e.map(e=>e.team).find(e=>null!=e&&e.id===n.teamId);return null!=i&&c.ng.getProTrialStatus({grace_period_end:i.gracePeriodEnd?i.gracePeriodEnd.toISOString():null,grace_period_type:i.gracePeriodType})===u.a.IN_TRIAL});(0,p.J9)([h.Hh],([e],r)=>{let n=r(o.yV),i=r(m._s)?null:e;return!!n&&!!i&&!n.teamId&&!n.parentOrgId&&n.folderId===i}),(0,s.bt)(({openFile:e})=>{let r=e?.parentOrgId!=null,n=e?.team==null;return r&&n});let f=(0,s.bt)(({progressBarState:e})=>(0,a.T)(e?.mode));(0,i.eU)(e=>new Promise(r=>{e(f)||r(!1)})),(0,_.r1)("figjam_editor_onboarded");let E=(0,p.Z1)(h.Vm,(e,r)=>{let n=r(o.yV);return n?.teamId?e?.find(e=>e.id===n?.teamId):null});(0,p.J9)([m.KI,E],([e,r],n)=>{let i=n(o.yV),a=i?.parentOrgId?e[i.parentOrgId]:null,s=r?{id:r.id,subscription:r.subscription,student_team:!!r.studentTeamAt,grace_period_end:r.gracePeriodEnd?.toDateString()||null}:null;return(0,d.M_)({editorType:i?.editorType??null,org:a,team:s})}),(0,s.bt)(({openFile:e})=>e?.showEditButton??!1),(0,i.eU)(e=>{let r=e(o.yV);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,l.w5)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:n.gracePeriodEnd?.toISOString()??null})});let y=(0,i.eU)(e=>{let r=e(o.yV);return r?.canEdit??!1})},378260:(e,r,n)=>{"use strict";n.d(r,{KI:()=>u,UC:()=>_,ZS:()=>m,_s:()=>p,mQ:()=>h,rg:()=>d});var i=n(374626),a=n(529928),o=n(99506),s=n(279453),l=n(502665),c=n(284111);let d=(0,c.Z1)((0,s.Tej)({}),e=>e.currentUser.orgUsers),u=(0,c.Z1)(d,e=>{let r=e?.map(e=>e.org);if(void 0===r)return{};let n={};for(let e of r)null!=e&&(n[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return n}),p=(0,a.bt)(e=>e.currentUserOrgId),m=(0,c.J9)([u],([e],r)=>{let n=r(p);return null!=n?e[n]:null}),h=(0,a.bt)(e=>e.orgById),_=(0,i.Iz)(e=>(0,c.Z1)((0,s.s5h)({orgId:e}),e=>!!e.org?.workspaces?.length&&!!e.org?.bigmaEnabledAt));(0,c.J9)([m,d,l.N],([e,r,n],i)=>{if(!e)return!1;let a=i(h)[e.id];if(!a.bigma_enabled||!a.workspaces_nux_active_at)return!1;let s=r?.find(r=>r.orgId===e.id&&r.userId===n);return!!s&&s.permission!==o._D.GUEST}),(0,c.J9)([(0,s.Tej)({}),m],([e,r])=>{let{orgUsers:n}=e.currentUser;if(null!=r){let e=n?.find(e=>e.orgId===r.id);if(e)return"full"===e.designPaidStatus?"design":"full"===e.devModePaidStatus?"dev mode":"none"}return null}),(0,c.Z1)(u,e=>!!Object.values(e).find(e=>e.k12GoogleOrg))},543312:(e,r,n)=>{"use strict";n.d(r,{e:()=>l});var i=n(99506),a=n(243987),o=n(284111),s=n(723239);(0,o.Z1)(s.Vm,e=>(e??[]).some(e=>null!=e&&!(0,a.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})&&!e.orgId&&e.canEdit));let l=(0,o.Z1)(s.Vm,e=>(e??[]).filter(e=>null!=e&&e.subscription===i.Qh.OK&&null==e.gracePeriodEnd&&!e.orgId&&e.canEdit))},723239:(e,r,n)=>{"use strict";n.d(r,{Fy:()=>E,Hh:()=>y,NT:()=>A,Vm:()=>T,Z_:()=>I,mp:()=>f,t:()=>w,zN:()=>b});var i=n(133537),a=n(966712),o=n(314866),s=n(38580),l=n(374626),c=n(288706),d=n(529928),u=n(279453),p=n(243987),m=n(605228),h=n(143678),_=n(284111),g=n(378260);(0,_.J9)([(0,u.Tej)({}),g.ZS],([e,r])=>null!=e.currentUser.id&&r?.canRead?h.qo.ORG:h.qo.PERSONAL);let f=(0,_.Z1)((0,u.Tej)({}),e=>e.currentUser.createdAt),E=(0,_.Z1)(f,e=>e.getTime()<=Date.now()-12096e5),y=(0,_.J9)([g.rg,(0,u.Tej)({})],([e,r],n)=>{let i=n(g._s);if(!i)return r.currentUser.draftsFolderId;{let r=e?.find(e=>e.orgId===i);return r?.draftsFolderId||null}});(0,_.Z1)((0,u.Tej)({}),e=>{let r=e.currentUser.email;return(0,i.jm)(r)||!!r?.endsWith("@dev.figma.com")});let b=(0,_.Z1)((0,u.Tej)({}),e=>null!=e.currentUser.studentValidatedAt);(0,_.Z1)((0,u.UpR)({}),e=>e.currentUser.eduPeriodEnd);let I=(0,_.Z1)((0,u.Tej)({}),e=>e.currentUser.teamRoles),T=(0,_.Z1)(I,e=>e?.map(e=>e.team).filter(e=>null!=e)),v=(0,d.bt)(e=>e.isFreeUser),S=(0,_.J9)([g.rg,T],([e,r])=>(!e?.length||!(e.length>0))&&(null==r||!r.some(e=>e.canEdit&&(0,p.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})))),w=(0,_.Z1)(S,(e,r)=>(0,a.kc)().ps_benchmark?r(v):e);(0,_.Z1)(g.rg,e=>!!e?.length&&e.length>0),(0,_.Z1)((0,u.Tej)({}),e=>{let r=e.currentUser.email;return null!=r?(0,i.qe)(r):void 0});let A=(0,_.Z1)((0,u.Tej)({}),e=>e.currentUser.profile?.jobTitle);(0,_.Z1)(A,e=>{let r=void 0!==e&&o.s_.includes(e)?e:"other";return"design"!==r&&"other"!==r}),(0,_.Z1)((0,u.Tej)({}),e=>e.currentUser.profile?.usagePurpose);let N=(0,d.bt)(e=>e.authedProfilesById);(0,s.eU)(e=>Object.values(e(N)).some(e=>!!e.org_id||!!e.team_id)),(0,_.Z1)((0,u.Tej)({}),e=>e.currentUser.email),(0,_.Z1)((0,u.Tej)({}),e=>e.currentUser.emailValidatedAt);let C=(0,d.bt)(e=>e.userAnalyticsData);(0,l.Iz)(e=>(0,c.mg)(C,r=>{if(null==r)return;let n=r[e];return m.bW.includes(e)&&n?new Date(n):n})),(0,_.J9)([(0,u.Tej)({}),g.ZS],([e,r])=>{let n="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&n&&r?.id!==n)})},582947:(e,r,n)=>{"use strict";n.d(r,{Fu:()=>c,r1:()=>u});var i=n(374626),a=n(279453),o=n(59530),s=n(284111);let l=(0,s.Z1)((0,a.Tej)({}),e=>e.currentUser.userFlags.reduce((e,r)=>({...e,[r.name]:r}),{})),c=(0,i.Iz)(e=>(0,s.Z1)(l,r=>r[e])),d=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0;(0,s.Z1)(l,e=>d(Array.from(o.V5).map(r=>e[r]?.updatedAt).filter(e=>null!=e)));let u=(0,i.Iz)(e=>(0,s.Z1)(l,r=>null!=r[e]));u("file_browser_onboarded"),c("not_gen_0")},205548:(e,r,n)=>{"use strict";function i(e,r){return!!e[r]}function a(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}n.d(r,{KI:()=>a,mW:()=>i}),n(966712),n(99506),n(243987),n(746869),n(442617),n(986060),n(59530),n(143678)},116723:(e,r,n)=>{"use strict";n.d(r,{X:()=>i});let i="curator_global_request_close";var a=(e=>(e.FigjamUniversalInsertsMenuOpen="figjam_universal_inserts_menu_open",e.FigjamDLTSubmenuOpen="figjam_DLT_submenu_open",e))(a||{})},708277:(e,r,n)=>{"use strict";n.d(r,{Op:()=>a,gV:()=>o,nr:()=>s});var i=n(43538);function a(e){let r=new Map,n=new Map;for(let{id:i,...a}of e.states){if(r.has(i))throw Error(`Duplicate state ID ${i.toString()} found when building state machine`);if(r.set(i,a),null==a.transitions)continue;let e=new Map;for(let{event:r,...o}of(n.set(i,e),a.transitions)){let n=e.get(r);null==n&&(n=[],e.set(r,n)),n?.push(o)}}return{config:e,isComplete(e){let n=r.get(e);return n?.terminal??!1},isInitial:r=>r===e.initial,start:()=>e.initial,transition(e,r){let i=n.get(e)?.get(r.id);if(null==i)return null;for(let n of i)if(null==n.condition||n.condition({from:e,to:n.target,event:r}))return n.target;return null}}}function o(e){let r=new Set;for(let n of e.config.states)if(null!=n.transitions)for(let e of n.transitions)e.event===i.b&&e.meta?.userEvents!=null&&e.meta.userEvents.forEach(e=>r.add(e));return r}function s(e,r,n){var a,o;let s=new Set("string"==typeof e?[e]:e),l={userEvents:[...s]};return a=i.b,o={condition:e=>s.has(e.event.type)&&(n?.condition?.(e)??!0),meta:l},{event:a,target:r,condition:o?.condition,meta:o?.meta}}},835691:(e,r,n)=>{"use strict";n.d(r,{zl:()=>o});var i=n(411855),a=n(374626);function o({_atom:e,machine:r}){let[{currentState:n,lastEvent:o,previousState:s},l]=(0,a.fp)(e),c=r.isComplete(n);return(0,i.useMemo)(()=>({completed:c,currentState:n,lastEvent:o,previousState:s,reset:l}),[c,n,o,s,l])}n(47506)},268223:(e,r,n)=>{"use strict";n.d(r,{Op:()=>i.Op,nr:()=>i.nr,rn:()=>a.rn});var i=n(708277),a=n(593788);n(835691)},758431:(e,r,n)=>{"use strict";n.d(r,{A3:()=>p,IK:()=>u});var i=n(675678),a=n(517333);n(737947);var o=n(853828);n(563706);var s=n(776621);n(738269),n(369351),n(273709);var l=n(36240);let c=new Map,d=new l.v;function u(e){let r=(0,o.WB)();a.S8?.setListener({name:"updateRealtimeTokens",listener(n){d.updateSubscriptions(e,n,r)}});let n=(0,a.O_)(2);if(n){let a=n.getRealtimeTokens();if(null==a&&((0,s.$D)(i.FigmaTeam.DESKTOP,Error(`initDesktopBellFeedBindings: got ${a} from getRealtimeTokens() on first try`),{level:"warning"}),a=n.getRealtimeTokens()),null==a){(0,s.$D)(i.FigmaTeam.DESKTOP,Error(`initDesktopBellFeedBindings: got ${a} from getRealtimeTokens() on second try`));return}d.updateSubscriptions(e,a,r)}}function p(e){d.handleFileMessage(e)}a.S8?.setListener({name:"notificationClicked",listener(e){c.get(e)?.(),c.delete(e)}})},788744:(e,r,n)=>{"use strict";n.d(r,{Fl:()=>u,cm:()=>c,kL:()=>l,x6:()=>s});var i=n(411855),a=n(374626),o=n(555301);function s(e,r){let n=d(r);return!!e&&n.has(e)}function l(e){let r=(0,a.md)(o.S0);return!!e&&r.has(e)}function c(e,r){let n=s(e,r),i=l(e);return n||i}function d(e){return(0,a.md)(e?o.Gg:o.bJ)}function u(e){let r=d(e),n=(0,a.md)(o.S0);return i.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}},756317:(e,r,n)=>{"use strict";n.d(r,{FX:()=>I,KP:()=>y,L1:()=>b});var i=n(411855),a=n(902634),o=n(132361),s=n(629019),l=n.n(s),c=n(374626),d=n(46481),u=n(762638),p=n(694687),m=n(788744),h=n(680681),_=n(555301),g=n(154113),f=n(109903);function E({isForSelect:e,orgNameForTooltip:r,workspaceNameForTooltip:n,tooltipDelay:s=250,tooltipLocation:c="above",size:u="small",variant:p}){let m=r||n?(0,h.wZ)({orgName:r,workspaceName:n,tooltipLocation:c,tooltipDelay:s}):{};return i.createElement(d.U,{className:l()("secondary"===p?g.Wo:g.Kk,e?g.cH:void 0),svg:f.A,...m},i.createElement("div",{className:l()("secondary"===p?g.Wo:g.Kk,e?g.cH:void 0),...m},"large"===u?i.createElement(a.U,null):i.createElement(o.x,null)))}function y(e){let r=(0,c.md)(_.d$),n=(0,p.sZ)(),a=(0,m.kL)(e.fileKey);return i.createElement(E,{...e,orgNameForTooltip:a?n?.name:void 0,workspaceNameForTooltip:r?.name})}function b(e){let r=(0,c.md)(_.G7),n=(0,p.sZ)(),a=(0,m.kL)(e.fileKey);return i.createElement(E,{...e,orgNameForTooltip:a?n?.name:void 0,workspaceNameForTooltip:r?.name})}function I(){return i.createElement("div",{className:u.cx.flex.alignCenter.justifyCenter.flexShrink0.ml4.mr4.$},i.createElement(E,{isForSelect:!0}))}},680681:(e,r,n)=>{"use strict";n.d(r,{NX:()=>y,Qy:()=>h,k9:()=>m,vR:()=>E,wZ:()=>f}),n(133554);var i=n(91408),a=n(374626),o=n(708389),s=n(416095),l=n(498606),c=n(109311),d=n(555301),u=n(860168);let p=(0,i.jz)(u.UEm);function m({libraries:e,approvedLibraryKeysByResourceType:r,currentTeamId:n=null,shouldSortByTeam:i=!1}){e.sort((e,a)=>h({libraryA:e,libraryB:a,approvedLibraryKeysByResourceType:r,currentTeamId:n,shouldSortByTeam:i}))}function h({libraryA:e,libraryB:r,approvedLibraryKeysByResourceType:n,currentTeamId:i=null,shouldSortByTeam:a=!1}){let{workspaceApprovedLibraryKeys:l,orgApprovedLibraryKeys:c}=n;if(a&&"file"in e&&"file"in r&&e.team_id!==r.team_id)return(0,s.r9)(e,r,i);let d=_(e),u=_(r),p=c.has(d)?1:0,m=c.has(u)?1:0;if(p!==m)return m-p;let h=l.has(d)?1:0,f=l.has(u)?1:0;return h!==f?f-h:o.f.LEXICOGRAPHICALLY(g(e),g(r))}function _(e){return"key"in e?e.key:e.library_file_key}function g(e){return"name"in e?e.name:e.library_file_name}function f({orgName:e,workspaceName:r,tooltipLocation:n,tooltipDelay:i}){let a=e??r;if(!a)return{};let o=function(e){try{if(e){let r=function(e){let r=document.createElement("span");r.textContent=e,r.style.visibility="hidden",r.style.fontWeight="bold",r.style.display="inline-block",document.body.appendChild(r);let n=r.offsetWidth;return document.body.removeChild(r),n}(e);if(r){if(r>p)return p;if(r>p/2)return Math.max(116,r);return 116}}}catch(e){console.error(e)}return p}(a);return{"data-tooltip-type":l.Ib.SPECIAL,"data-tooltip":c.A,..."below"===n?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...i?{"data-tooltip-timeout-delay":i}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":o,"data-tooltip-workspace-name":r,"data-tooltip-org-name":e}}function E(e){if(!e)return!1;let r=a.zl.get(d.bJ).has(e),n=a.zl.get(d.S0).has(e);return r||n}function y({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:r}){return e.size>0||r.size>0}},146817:(e,r,n)=>{"use strict";n.d(r,{V:()=>a});var i=n(416095);function a(e){return e.isLocal?(0,i.Gj)(e):(0,i.Av)(e)??(0,i.Gj)(e)}n(173454)},371751:(e,r,n)=>{"use strict";n.d(r,{R8:()=>l});var i=n(411855),a=n(915440),o=n(279453),s=n(173454);function l({assetKey:e,type:r}){let n=function({assetKey:e,type:r}){let n=(0,a.Rs)(o.ftA,{key:e??""},{enabled:r===s.PW.COMPONENT&&!!e}),l=(0,a.Rs)(o.iL6,{key:e??""},{enabled:r===s.PW.STATE_GROUP&&!!e}),c=(0,a.Rs)(o.bUF,{key:e??""},{enabled:r===s.PW.STYLE&&!!e}),d=(0,a.Rs)(o.EW,{key:e??""},{enabled:r===s.PW.VARIABLE_SET&&!!e}),u=i.useMemo(()=>r!==s.PW.COMPONENT?null:n,[n,r]),p=i.useMemo(()=>r!==s.PW.STATE_GROUP?null:l,[l,r]),m=i.useMemo(()=>r!==s.PW.STYLE?null:c,[c,r]),h=i.useMemo(()=>r!==s.PW.VARIABLE_SET?null:d,[d,r]);return i.useMemo(()=>null!=u?"loaded"!==u.status?u:{status:u.status,data:{user:u.data?.component?.user,communityProfile:u.data?.component?.hubFile?.profile},errors:u.errors}:null!=p?"loaded"!==p.status?p:{status:p.status,data:{user:p.data?.stateGroup?.user,communityProfile:p.data?.stateGroup?.hubFile?.profile},errors:p.errors}:null!=m?"loaded"!==m.status?m:{status:m.status,data:{user:m.data?.style?.user,communityProfile:m.data?.style?.hubFile?.profile},errors:m.errors}:null!=h?"loaded"!==h.status?h:{status:h.status,data:{user:h.data?.variableCollection?.user,communityProfile:h.data?.variableCollection?.hubFile?.profile},errors:h.errors}:{status:"disabled",data:null,errors:null},[u,p,m,h])}({assetKey:e,type:r});return i.useMemo(()=>{if("loaded"!==n.status)return n;let e=n.data.communityProfile;return null!=e?{status:"loaded",data:{type:"community",communityProfile:e},errors:n.errors}:null!=n.data.user?{status:"loaded",data:{type:"team",user:n.data.user},errors:n.errors}:{status:"loaded",data:null,errors:n.errors}},[n])}},957987:(e,r,n)=>{"use strict";n.d(r,{P:()=>g});var i=n(411855),a=n(629019),o=n.n(a),s=n(966712),l=n(335682),c=n(694687),d=n(643067),u=n(788744),p=n(756317),m=n(288542),h=n(830445),_=n(256887);function g({resourceId:e,showPresetTooltip:r,tooltipDelay:n,tooltipLocation:a,compact:g,colorPrimaryOnHover:f}){let E=(0,c.sZ)(),y=(0,d.Oe)(E),b=(0,l.tS)(),I=(0,u.cm)(e),T=o()(_.iE,{[_.oE]:g,[_.FT]:f});return y&&e!==b&&I?i.createElement("div",{className:T},i.createElement(p.KP,{fileKey:e,tooltipDelay:n,tooltipLocation:a})):(0,s.kc)().dse_preset_libraries&&e!==b&&(0,h.TX)(e)?i.createElement("div",{className:T},i.createElement(m.S,{showTooltip:r,hubFileId:e,tooltipDelay:n,tooltipLocation:a})):null}},830445:(e,r,n)=>{"use strict";n.d(r,{E_:()=>w,Gb:()=>b,HA:()=>y,Os:()=>k,TX:()=>A,Xx:()=>E,ee:()=>f,fn:()=>v,ku:()=>M,lR:()=>T,nT:()=>D,p9:()=>P,qA:()=>S});var i=n(593779),a=n(776250),o=n(374626),s=n(38580),l=n(130097),c=n(173748),d=n(154483),u=n(696673),p=n(99506),m=n(279453),h=n(216158),_=n(137459),g=n(875387);function f(e,r){return"fileKey"===r?{fileKey:e,type:r}:{hubFileId:e,type:r}}function E(e,r){let{type:n,...i}=r;return{...e,...i}}function y(e,r,n){if("loaded"===e.status){let n=e.data.libraryPresetSubscriptionsV2?.find(e=>e.hubFileId===r);if(n)return n.partner_type??void 0}if(null==n)return;let i=n.publisher.profile_handle.toLowerCase(),a=(0,_.oA)(n);return"apple"===i?p.Pn.APPLE:a?.toLowerCase?.()?.includes("material")?p.Pn.GOOGLE:p.Pn.FIGMA}function b(e){return T((0,o.md)(g.q),e)}let I=(0,d.fv)();function T(e,r){if(r.hub_file_id)return e.has(r.hub_file_id);let n=I(r);return!!(0,u.wJ)(n)&&e.has(n)}let v=(0,s.eU)(null),S=(0,s.eU)({value:(0,c.N)(),updateSource:"page_load"});function w(e){let r=(0,o.md)(g.q);return!!e&&r.has((0,i.l)(e))}function A(e){return!!e&&o.zl.get(g.q).has((0,i.l)(e))}let N={VariableByKey:null,VariableCollectionByKey:null,StyleByKey:null,CommunityLibraryComponentsAndStateGroups:null},C=[m.Lom,m.bsh,m.yFE,m.vsj],O=e=>C.some(r=>r._name===e),L=e=>O(e)?e:void 0,R=e=>h.M4.Query({fetch:async r=>{let n=(0,l.S8)(e,r.arguments),i=L(e._name);if(i){let n=N[i];(null===n||r.nonce.value>n)&&(a.az.trackDefinedEvent("preset_libraries.static_update_fetch",{viewName:L(e._name),batchSize:r.arguments.length,updateSource:r.nonce.updateSource}),N[i]=r.nonce.value)}return await n}}),P=R(m.Lom),D=R(m.bsh);R(m.yFE);let k=R(m.vsj);function M(e,r,n){let i=n(v),a=n(S),o=n(e({arguments:r,nonce:a}));return"loading"===o.status&&null!==i&&(o=n(e({arguments:r,nonce:i}))),o}},450225:(e,r,n)=>{"use strict";n.d(r,{Ci:()=>o,WJ:()=>i,vO:()=>s,yc:()=>a}),n(939683);var i=(e=>(e.PASTE="PASTE",e.MODAL="MODAL",e.PLUGIN="PLUGIN",e))(i||{}),a=(e=>(e.ATTEMPT="figjam_link_metadata_attempt",e.ERROR="figjam_link_metadata_error",e.SUCCESS="figjam_link_metadata_success",e.EMBED_CLICK="figjam_link_embed_click",e.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",e.OPEN_PREVIEW="figjam_link_preview_open",e.EMBED_EXPAND="figjam_link_embed_expand",e.COPY_LINK="figjam_link_metadata_copy_url",e.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",e.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",e.EMBED_DEACTIVATE="figjam_embed_deactivate",e))(a||{}),o=(e=>(e.EMBED="embed",e.LINK_PREVIEW="preview",e))(o||{});function s(e){try{return new URL(e).hostname}catch(e){return"Could not parse"}}},641638:(e,r,n)=>{"use strict";n.d(r,{BF:()=>h,CR:()=>p,RW:()=>_,XL:()=>m,kA:()=>u});var i=n(138020),a=n(966712),o=n(915440),s=n(763185),l=n(279453),c=n(335682);function d(e,r,n){let o=[],s=[];for(let r of e){var l;if(!r.plugin)continue;if("status"in r.plugin){if(r.plugin.status!==i.tT.Loaded)continue;l=r.plugin.data}else l=r.plugin;if(!l)continue;let e="Workspace"===r.allowlistGroupType,c=r.allowlistedWorkspace;if(e&&!c||(0,a.kc)().ext_hide_draft_workspace_extensions&&e&&!n)continue;let d=c?.id;n&&d&&d!==n||(l.isWidget?s.push(l.id):o.push(l.id))}return"plugin"===r?o:s}function u(e,r,n=!0){let i=_(),a=(0,o.Rs)(l.M9I,{orgId:e},{enabled:n}),s=a.data?.org;return"loading"!==a.status&&i.loaded?"errors"!==a.status&&s?{loaded:!0,data:d(s.allowlistedPlugins,r,i.data?.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function p(e,r=!0){let n=(0,s.c)(r);if(!n.loaded)return{loaded:!1};let i=n.data;return{loaded:!0,data:d(i?.allowlistedExtensions??[],e,i?.workspace?.id)}}function m({workspace:e,hasPendingRequest:r,extension:n}){return!!(e.publicPluginsOrWidgetDisabled&&!r&&e.extensionRequestsAllowed&&!n?.roles.org)}function h({org:e,extensionVersion:r,isWidget:n,allowlistedExtensions:i}){return!!e&&!!r&&!!(function({org:e,isWidget:r}){if(!e)return!1;let n=r?e.widgets_whitelist_enforced:e.plugins_whitelist_enforced,i=r?e.widget_requests_allowed:e.plugin_requests_allowed;return n&&i}({org:e,isWidget:n})&&!r.is_private&&!i[r.plugin_id])}function _(){let e=(0,c.q5)(),r=!!e,n=(0,o.Rs)(l.iJD,{fileKey:e?.key??""},{enabled:r});if(!r)return{loaded:!0,data:void 0};if("loaded"!==n.status)return{loaded:!1};let i=n.data?.file?.team?.workspace;return{loaded:!0,data:{workspaceId:i?.id,workspaceName:i?.name,fileKey:e.key,fileName:e.name}}}},723245:(e,r,n)=>{"use strict";n.d(r,{D6:()=>c,T0:()=>u,TF:()=>g,UL:()=>v,ds:()=>f,eU:()=>p,gV:()=>y,kK:()=>d,sb:()=>T,t$:()=>I,tW:()=>b,tx:()=>m});var i=n(634832),a=n(776250),o=n(966712);n(286098),n(738269);var s=n(477782),l=n(99506);function c(e){return null!=e||(0,o.kc)().ps_benchmark}function d(e){return e?1e3:(0,o.kc)().ps_benchmark?50:20}function u(e,r){return f(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).find(e=>e.resource.resourceId===r)}function p(e,r){switch(r){case l.bk.FILE:return e.favoritedResource?.favoritedFile!=null?{id:e.favoritedResource?.id,resourceType:l.bk.FILE,resource:e.favoritedResource?.favoritedFile}:void 0;case l.bk.PROTOTYPE:return e.favoritedResource?.favoritedPrototype!=null?{id:e.favoritedResource?.id,resourceType:l.bk.PROTOTYPE,resource:e.favoritedResource?.favoritedPrototype}:void 0;case l.bk.FOLDER:return e.favoritedResource?.favoritedProject?{id:e.favoritedResource?.id,resourceType:l.bk.FOLDER,resource:e.favoritedResource?.favoritedProject}:void 0;case l.bk.TEAM:return e.favoritedResource?.favoritedTeam?{id:e.favoritedResource?.id,resourceType:l.bk.TEAM,resource:e.favoritedResource?.favoritedTeam}:void 0;case l.bk.WORKSPACE:return e.favoritedResource?.favoritedWorkspace?{id:e.favoritedResource?.id,resourceType:l.bk.WORKSPACE,resource:e.favoritedResource?.favoritedWorkspace}:void 0;default:return}}function m(e,r){return e.currentUser?.projectSubscriptions?.find(e=>e.projectV2?.id===r)!==void 0}function h(e,r,n,i,o,s){(0,a.sx)("data_drift_favorited_resource_corrected",{favoritedResourceId:e,resourceType:r,resourceTeamId:n,underlyingResourceTeamId:i,resourceOrgId:o,underlyingResourceOrgId:s},{forwardToDatadog:!0})}function _(e,r){return e.has(r.resourceId)?null:(e.add(r.resourceId),r)}function g(e,r,n){if(!(0,o.kc)().ps_benchmark_favorites_data_client_side_fix||!(0,o.kc)().ps_benchmark)return{favoritedFiles:e.currentTeamUser?.favoritedFiles,favoritedProjects:e.currentTeamUser?.favoritedProjects,favoritedPrototypes:e.currentTeamUser?.favoritedPrototypes,favoritedFilesKeySet:new Set,favoritedPrototypesIdSet:new Set,favoritedFoldersIdSet:new Set};let i=new Set((n??[]).map(e=>e.plan_id)),a=new Set,s=new Set,l=new Set;return{favoritedFiles:(e?.favoritedFiles??[]).map(e=>{if(null!=r){if(r===e.file?.teamId)return e.teamId!==e.file?.teamId&&(h(e.resourceId,"file",e.teamId,e.file.teamId,null,null),e.teamId=e.file?.teamId),_(a,e);if(e.teamId===r&&!i.has(e.file?.teamId??""))return _(a,e)}}).filter(e=>null!=e),favoritedProjects:(e?.favoritedProjects??[]).map(e=>{if(null!=r){if(r===e.project?.teamId)return e.teamId!==e.project?.teamId&&(h(e.resourceId,"folder",e.teamId,e.project?.teamId,null,null),e.teamId=e.project?.teamId),_(l,e);if(e.project?.orgId===null&&e.teamId===r&&!i.has(e.project?.teamId??""))return _(l,e)}}).filter(e=>null!=e),favoritedPrototypes:(e?.favoritedPrototypes??[]).map(e=>{if(null!=r){if(r===e.prototype?.file?.teamId)return e.teamId!==e.prototype?.file?.teamId&&(h(e.resourceId,"prototype",e.teamId,e.prototype?.file?.teamId,null,null),e.teamId=e.prototype?.file?.teamId),_(s,e);if(e.prototype?.file?.parentOrgId===null&&e.teamId===r&&!i.has(e.prototype?.file?.teamId??""))return _(s,e)}}).filter(e=>null!=e),favoritedFilesKeySet:a,favoritedPrototypesIdSet:s,favoritedFoldersIdSet:l}}function f(e,r,n,i,a){return E(e?.filter(e=>e.file?.canView)??[],r??[],n?.filter(e=>e.project&&!e.project.deletedAt)??[],i?.filter(e=>e.team&&!e.team.deletedAt)??[],a??[])}let E=(e,r,n,i,a)=>{let o=e.map(e=>({id:e.id,resourceType:l.bk.FILE,resource:e})),s=r.map(e=>({id:e.id,resourceType:l.bk.PROTOTYPE,resource:e}));return[...o,...s,...n.map(e=>({id:e.id,resourceType:l.bk.FOLDER,resource:e})),...i.map(e=>({id:e.id,resourceType:l.bk.TEAM,resource:e})),...a.map(e=>({id:e.id,resourceType:l.bk.WORKSPACE,resource:e}))]};function y(e,r){let n=d(r);return f(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,(0,o.kc)().ps_benchmark||r?e.currentUser.favoritedProjects:[],e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).length>=n}function b(e){return!!e&&e>=1e3}function I(e,r){let n={};e.forEach(e=>{n[e.id]=e});let i=e.find(e=>""===e.name)?.id,a=r?.map(e=>n[e]).filter(e=>e)??[],o=e.filter(e=>!(r&&r.includes(e.id))),s=o.findIndex(e=>""===e.name);return -1!==s&&o.splice(s,1),o.sort((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime()),-1!==s&&i?[n[i],...a,...o]:[...a,...o]}function T(e,r){let n={};e.forEach(e=>{n[e.resource.id]=e});let i=r?.map(e=>n[e]).filter(e=>e)??[],a=e.filter(e=>!(r&&r.includes(e.resource.id)));return a.sort((e,r)=>new Date(e.resource.createdAt).getTime()-new Date(r.resource.createdAt).getTime()),[...i,...a]}function v(e){switch(e){case s.nb.FILE:case s.nb.PINNED_FILE:case s.nb.REPO:return l.bk.FILE;case s.nb.PROTOTYPE:return l.bk.PROTOTYPE;case s.nb.OFFLINE_FILE:return l.bk.FILE;default:(0,i.assertNever)(e)}}},912924:(e,r,n)=>{"use strict";function i(e){let r=[];return e.forEach(e=>{e.content.forEach(e=>{let n=JSON.parse(e);n.nodeId&&r.push(n.nodeId)})}),r}n.d(r,{N:()=>i}),n(587670)},355513:(e,r,n)=>{"use strict";let i;n.d(r,{D4:()=>G,OR:()=>x,Qr:()=>k,Tq:()=>B,Vr:()=>U,Wq:()=>H,hL:()=>F,jm:()=>W,nz:()=>V});var a=n(188507),o=n(776250),s=n(627776),l=n(517333),c=n(737947),d=n(966712),u=n(563706),p=n(939863),m=n(749949),h=n(742580),_=n(980820),g=n(738269),f=n(507877),E=n(293017),y=n(662275),b=n(296559),I=n(445092),T=n(809831),v=n(356390),S=n(239671),w=n(567088),A=n(723127),N=n(347127),C=n(974105),O=n(788811),L=n(857766),R=n(487342),P=n(860178),D=n(707465);function k(){return(0,d.Ay)().release_manifest_git_commit}function M(e,r){if((0,s.ce)()){document.title=r??e;return}if(e!==(i?i+document.title:document.title)){let n=u.Ay.browserType;if((0,d.kc)().fig_icons&&"safari"!==n){let r;let n=(0,R.AE)(e);r=document.getElementById("custom-emoji-favicon"),n?(i=n,r||((r=document.createElement("link")).id="custom-emoji-favicon",r.rel="icon",document.head.appendChild(r)),r.href="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">{text}</text></svg>'.replace("{text}",n)):(r&&r.remove(),i=void 0),n&&(e=(0,R.Nn)(e,n))}document.title=e,l.eD&&r&&l.eD.setTitle(r)}}function F(e,r=null){let n=function(e){switch(e){case S.nT.Whiteboard:return" \u2013 FigJam";case S.nT.Slides:return" \u2013 Figma Slides";default:return" \u2013 Figma"}}(r);M(`${e}${n}`,e)}function x(e,r){let n=(0,D.Iu)(e,r);if(!n){M("Figma",null);return}if("fullscreen"===r.view&&r.tryPluginName){e.openFile?M(e.openFile.name,n):M((0,p.t)("community.try.plugin_name_with_community",{pluginName:r.tryPluginName}),n);return}if("prototype"===r.view){let i="",a=null;if((0,N.f)(r.file.editor_type))a=i=`${r.isPresenterView?(0,p.t)("slides.general.presenter"):(0,p.t)("slides.general.slide_deck")} \xb7 ${n} - ${(0,p.t)("slides.general.slides")}`;else{let r=function(e){let r=e.prototype;for(let e of r.pages)if(e.nodeId===r.currentPageId)return e.name;return""}(e);r&&e.prototype.pages.length>1?(i=`\u25B6 ${n} - ${r}`,a=`${n} - ${r}`):i=`\u25B6 ${n}`}M(i,a);return}if("fullscreen"===r.view&&!e.openFile){let e=(0,O.GT)();e?.name?n=e.name:r?.localFileName&&(n=r.localFileName)}let i=(0,C.yt)(e);if(i&&(0,L.Xm)(i)){M(`\u2325 ${n}`,`${n}`);return}F(n,(0,T.XE)(r))}let U=(0,_.nF)(e=>{c.Ay.listen(r=>{"POP"===r&&function(r){if(r){let n=e.getState(),i=n.selectedView,{jsCommitHash:a,searchSessionId:o,...s}=r;if("view"in s){if(void 0!==a&&a!==k()){c.Ay.reload("Navigating to a state that was pushed by an older version of this application");return}if("fullscreen"===i.view&&!v.Y5.isReady()){c.Ay.reload("User navigated before fullscreen fully initialized");return}if("fullscreen"===s.view&&!s.fileKey){window.history.back();return}if("fullscreen"===i.view&&("fullscreen"!==s.view||i.fileKey!==s.fileKey))e.dispatch(E.VB({oldSelectedView:i,newSelectedView:s}));else{if(e.dispatch(y.Ce()),"communityHub"===s.view&&"searchAndBrowse"===s.subView&&(0,h.OE)(s.data)){let r=(0,m.w)(n);r&&e.dispatch(I.NR({sessionId:r}))}e.dispatch(g.$T({...s,fromPopstate:!0})),x(n,s)}}}}(c.Ay.location.state)})});function B(e,r,n,i){e(f.UN({fileKey:r.key}));let a=n||i,o=n?w.O.ORG:w.O.TEAM;e((0,d.kc)().ps_benchmark&&a?b.c5({planId:a,planType:o}):b.p4({planId:n||A.P})),e(g.$T({view:"fullscreen",fileKey:r.key,editorType:r.editor_type?(0,S.wN)(r.editor_type):S.nT.Design}))}function V(e,r,n,i){(0,o.sx)("Open File in New Tab Click",{fileKey:r,uiSelectedView:JSON.stringify(n)}),i(f.UN({fileKey:r})),c.Ay.redirect(e,"_blank")}function G(e,r,n,i){(0,o.sx)("Open Prototype in New Tab Click",{fileKey:r,pageId:n,uiSelectedView:JSON.stringify(i)}),c.Ay.redirect(e,"_blank")}function H(e,r){r(f.V3({url:e}))}function W(e,r){let n=(0,P.TA)(),i=e||r,o=(0,a.d4)(e=>n?e.authedUsers.byId[n]?.plans:null);return!!o?.find(e=>e.plan_id===i)}},985139:(e,r,n)=>{"use strict";n.d(r,{b4:()=>k,g4:()=>x,n_:()=>F});var i=n(434192),a=n(89865),o=n.n(a),s=n(966712),l=n(130097),c=n(179940),d=n(27087),u=n(881388),p=n(939863),m=n(392592),h=n(980820),_=n(660656),g=n(738269),f=n(662275),E=n(992037),y=n(128751),b=n(988022),I=n(396226),T=n(117192),v=n(838329),S=n(99506),w=n(279453),A=n(216158),N=n(147206),C=n(984968),O=n(300874),L=n(239671),R=n(851363),P=n(378356),D=n(129531);let k=(0,h.nF)(async(e,r)=>{let{fileKeys:n,repoIds:i}=r;if(n.length>0){let r=e.getState(),[i,...a]=await Promise.all([(0,C.R5)(n),...n.map(e=>A.M4.fetchFile(e))]);if(i){let o=r.teams[i],s=new Set(a.map(e=>e.editor_type)),l=s.size>1?null:s.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:o,action:R.ZN.RESTORE_FILES,editorType:l,resource:O.vL.FILE,multipleResources:n.length>1,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO}}))}else e.dispatch(_.R({fileKeys:o()(a,"key"),userInitiated:!0}));return}if(i&&i.length>0){let r=await Promise.all(i.map(e=>A.M4.fetchRepo(e)));e.dispatch((0,E.i)({reposById:o()(r,"id"),userInitiated:!0}))}e.dispatch(y.an())});async function M({selectedFileKeys:e,isPlanSpacesEnabled:r,currentSpaceDraftsFolderId:n,personalDraftsFolderId:i,currentUserId:a,state:o,toDraft:s}){let c=await (0,l.S8)(w.M5e,e.map(e=>({fileKey:e}))),d=[],u=new Set;return c.forEach(({result:{data:e}})=>{let l;let{file:c}=e??{};if(!c)return;let{project:p,editorType:m,key:h}=c;null!=m&&u.add(m);let _=r?n:i;if(c.parentOrgId){let e=a&&o.orgUsersByOrgId[c.parentOrgId]?.[a];l=e?e.drafts_folder_id:_}else if(c.teamId&&r){let e=o.roles.byTeamId[c.teamId],r=a&&e&&o.teamUserByTeamId[c.teamId]?.[a];l=r?r.drafts_folder_id:_}else l=_;let g=(l||p?.id)??"",f=!s&&p&&(0,N.Jf)(p,m??S._Y.DESIGN)?p.id:g;d.push({key:h,folderId:f})}),{copyFiles:d,editorTypes:u}}let F=(0,h.nF)(async(e,r)=>{let n=(0,s.kc)().ps_benchmark,a=e.getState(),o=a.user?.id,l=a.user?.personal_drafts_folder_id,h=a.user?.drafts_folder_id,_=[l];o&&(_.push(...(0,T.x)(a.orgUsersByOrgId,o).map(e=>e.drafts_folder_id)),n&&_.push(...(0,v._)(a.teamUserByTeamId,o).map(e=>e.drafts_folder_id||void 0)));let E=Object.keys(a.tileSelect&&a.tileSelect[P.F.FILES]||{}).concat(Object.keys(a.tileSelect&&a.tileSelect[P.F.PINNED_FILES]||{})),y=Object.keys(a.tileSelect&&a.tileSelect[P.F.REPOS]||{});(await Promise.all(y.map(e=>A.M4.fetchRepo(e)))).forEach(e=>{let r=e.default_file_key;r&&E.push(r)});let{copyFiles:w,editorTypes:N}=await M({selectedFileKeys:E,isPlanSpacesEnabled:n,currentSpaceDraftsFolderId:h,personalDraftsFolderId:l,currentUserId:o,state:a,toDraft:r.toDraft}),k=await (0,C.mx)(w);if(k){let r=a.teams[k],n=N.size>1?null:N.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:r,action:R.ZN.DUPLICATE_FILES,editorType:n,resource:O.vL.FILE,multipleResources:w.length>1,currentPlan:I.F.Plan.STARTER,upsellPlan:I.F.Plan.PRO}}));return}(0,i.parallel)(w.map(({key:r,folderId:n})=>{let i=d.Ay.post(`/api/multiplayer/${r}/copy?${(0,c.lF)({folder_id:n})}`);return i.catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,p.t)("file_browser.file_browser_actions.duplicate_file_error")))}),i})).then(r=>{if(!r.some(e=>"reject"===e.type)){let n=w.filter(e=>!!e.folderId&&_.includes(e.folderId)).length,i=r=>r&&r.editor_type?{text:(0,p.t)("general.open"),action:()=>{e.dispatch(g.$T({view:"fullscreen",fileKey:r.key,editorType:(0,L.wN)(r.editor_type)})),e.dispatch(m.F.dequeue({}))}}:void 0;if(n>0&&("folder"!==a.selectedView.view||a.selectedView.folderId!==h)){let a,o="",s=1===w.length;o=s?(0,p.t)("user_view.file_duplicated_to_your_drafts"):n===w.length?(0,p.t)("user_view.files_duplicated_to_your_drafts",{intArg:n}):(0,p.t)("user_view.some_files_duplicated_to_your_drafts"),a=s?i(r[0].resolve?.data?.meta):{text:(0,p.t)("general.show"),action:()=>{h&&e.dispatch(g.$T({view:"folder",folderId:h})),e.dispatch(m.F.dequeue({}))}},e.dispatch(m.F.enqueue({type:"file_duplicated",message:o,button:a}))}else if("folder"===a.selectedView.view){let n=i(1===w.length?r[0].resolve?.data?.meta:void 0);e.dispatch(m.F.enqueue({type:"file_duplicated",message:1===w.length?(0,p.t)("user_view.file_duplicated"):(0,p.t)("user_view.files_duplicated",{intArg:w.length}),button:n}))}let o=r.map(e=>null!=e.resolve?e.resolve.data.meta:null).filter(e=>null!=e).map(e=>e);(0,b.ak)(w,o,e.getState())}})}),x=(0,h.nF)(e=>{e.dispatch(F({toDraft:!0}))});(0,h.nF)((e,r)=>{let n=e.getState(),i=n.user?.drafts_folder_id;return d.Ay.post(`/api/multiplayer/${r.file.key}/copy?${(0,c.lF)({folder_id:i})}`).then(()=>{e.dispatch(u.s.flash((0,p.t)("user_view.file_duplicated_to_your_drafts")))}).catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,p.t)("file_browser.file_browser_actions.duplicate_file_error")))})})},688083:(e,r,n)=>{"use strict";n.d(r,{Ct:()=>q,LK:()=>K,Nr:()=>et,Q3:()=>Q,SX:()=>en,Xg:()=>Y,iT:()=>J,jl:()=>z,k4:()=>Z,mq:()=>X,tO:()=>$,xT:()=>ee});var i=n(188507),a=n(752795),o=n(853828),s=n(752553),l=n(27087),c=n(330654),d=n(881388),u=n(939863),p=n(392592),m=n(693133),h=n(980820),_=n(944682),g=n(738269),f=n(270056),E=n(662275),y=n(404717),b=n(782656),I=n(936500),T=n(988022),v=n(396226),S=n(875847),w=n(216158),A=n(984968),N=n(206193),C=n(178160),O=n(300874),L=n(696915),R=n(451e3),P=n(945020),D=n(644344),k=n(668860),M=n(637590),F=n(851363),x=n(290750),U=n(845213),B=n(835703),V=n(129531),G=n(915592);let H=(0,h.nF)((e,{folderId:r,folderData:n})=>{(0,i.vA)(()=>{e.getState().folders[r]?e.dispatch(f.yJ({folder:n.folder})):e.dispatch(f.bE(n.folder)),e.dispatch(_.uo({files:n.files,subscribeToRealtime:!1})),e.dispatch(b.nX({repos:n.repos})),e.dispatch(I.uo({roles:n.roles})),e.dispatch(f.Kc({folderId:r,state:"loaded"}))})}),W=w.M4.Query({fetch:async(e,{reduxStore:r})=>{let n=await x.W.getFiles({folderId:e.folderId,shouldShowOnlyTrashedFiles:!!e.shouldShowOnlyTrashedFiles});return r.dispatch(_.uo({files:n.data.meta.files})),r.dispatch(b.nX({repos:n.data.meta.repos})),r.dispatch(I.uo({roles:n.data.meta.roles})),r.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),n.data.meta},schema:e=>e.object({folder:R.lH.nullable(),files:e.array(L.L),repos:e.array(D.z)}),sync:({folderId:e},{mutate:r,reduxStore:n,livegraphClient:i})=>C.O9.subscribe(e,n=>{n.forEach(n=>{if(!n.file||!("post"===n.method||"put"===n.method))return;let i=n.file;i.folder_id===e&&r(e=>{e.files.find(e=>e.key===i.key)||e.files.push(i)})})},{store:n,lgClient:i}),syncObjects:!0,output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.is_trashed_with_project||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)&&!e.file_repo_id),i=e.repos.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.is_trashed_with_project||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)),o=e.repos.filter(e=>!e.trashed_at&&!e.deleted_at).map(r=>e.files.find(e=>e.key===r.default_file_key)).filter(a.isNotNullish),s={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());s[r.id]=n}),{folder:e.folder,files:n,repos:i,previewFiles:[...n,...o],filesByRepoId:s}}});function K(e,r=!0,n=!1){let[i]=(0,w.IT)(W({folderId:e,shouldShowOnlyTrashedFiles:n}),{enabled:r});return i}let j=c.object({folder:R.lH,files:c.array(L.L),repos:c.array(D.z),roles:c.array(k.an)});w.M4.PaginatedQuery({fetch:async(e,{pageParam:r,reduxStore:n})=>{let i;if(r)i=r;else{let{folderId:r,...n}=e,a=new URLSearchParams({...n,page_size:"50"}).toString();i=`/api/folders/${r}/paginated_files?${a}`}let a=await (0,l.GD)(i),o=a.data.meta;return n.dispatch(_.uo({files:o.files})),n.dispatch(b.nX({repos:o.repos})),n.dispatch(I.uo({roles:o.roles})),n.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),{data:a.data.meta,nextPage:a.data.pagination?.next_page,prevPage:a.data.pagination?.prev_page}},joinPages:e=>({files:e.flatMap(e=>e.data.files),repos:e.flatMap(e=>e.data.repos),roles:e.flatMap(e=>e.data.roles),folder:e[e.length-1].data.folder}),sync:({folderId:e},{mutate:r,reduxStore:n,livegraphClient:i})=>C.O9.subscribe(e,n=>{n.forEach(n=>{if(!n.file||!("post"===n.method||"put"===n.method)||n.file.folder_id!==e)return;let i=n.file;r(e=>{e.files.find(e=>e.key===i.key)||e.files.unshift(i)})})},{store:n,lgClient:i}),output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&!e.trashed_at&&!e.file_repo_id),i=e.repos.filter(e=>e.folder_id===r.folderId&&!e.trashed_at),a={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());a[r.id]=n}),{folder:e.folder,files:n,repos:i,filesByRepoId:a}},schema:j,syncObjects:!0});let z=(0,h.nF)(async(e,{folderId:r,loadedFolders:n})=>{if(!n[r]){e.dispatch(f.Kc({folderId:r,state:"loading"}));try{let n=(await x.W.getFiles({folderId:r})).data.meta;e.dispatch(H({folderId:r,folderData:n}))}catch(n){404===n.status||403===n.status?e.dispatch(g.$T({view:"resourceUnavailable",resourceType:M.Ft.PROJECT})):n.status>=400&&n.status<500?e.dispatch(f.Kc({folderId:r,state:"loaded"})):e.dispatch(f.Kc({folderId:r,state:null}))}}}),Y=w.M4.Query({fetch:async e=>(await U.$.getFolders({teamId:e.teamId})).data.meta.folder_rows,schema:e=>e.array(R.lH.extend({touched_at:e.string()})),syncObjects:!0,enabled:e=>!!e.teamId,output:({data:e})=>e.filter(e=>!(e.trashed_at||e.deleted_at))}),$=w.M4.Mutation(e=>x.W.delete({folderId:e.folderId})),q=w.M4.Mutation(({folderId:e},{objects:r,reduxStore:n})=>{let i=x.W.trash({folderId:e}).then(()=>{r.Folder.update(e,e=>{e.trashed_at=Date.now().toString()}),n.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_trashed")}))});n.dispatch((0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.error_when_moving_to_trash")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:new Date}}},i)}),Z=w.M4.Mutation(({folderId:e,team:r},{objects:n,reduxStore:i})=>{let a=x.W.restore({folderId:e}).then(()=>{n.Folder.update(e,e=>{e.trashed_at=null}),i.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_restored"),button:{text:(0,u.t)("file_browser.restore_project.show_in_team_toast",{teamName:r?.name??"Recents"}),action:()=>{r?i.dispatch(g.$T({view:"team",teamId:r.id})):i.dispatch(g.$T({view:"recentFiles"}))}}}))});i.dispatch((0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.error_when_restoring")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:null}}},a)});w.M4.Mutation(e=>x.W.batchDelete({folderIds:e.folderIds}));let X=w.M4.Mutation(({folderId:e,folderName:r},{objects:n,reduxStore:i})=>{let a=(0,S.SS)(r);if(a){i.dispatch(d.s.error(a));return}n.Folder.update(e,e=>{e.name=r,e.path=r}),(0,T.xr)("Folder Renamed",e,null,i.getState(),{folderName:r});let s=l.Ay.put("/api/folders/rename",{folder_id:e,name:r});return i.dispatch((0,d.Q)({promise:s,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{name:r,path:r}}},s),s}),J=(0,h.MM)("FOLDER_UPDATE_FOLDER_ACCESS",(e,r,{optimistId:n})=>{let i=l.Ay.put(`/api/folders/${r.folderId}`,{is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly}).then(()=>{e.dispatch(y.c(n))}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),Q=(0,h.MM)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,r,{optimistId:n})=>{let i=x.W.updateFolderSharingAudienceControls({folderId:r.folder.id,sharingAudienceControl:r.sharingAudienceControl}).then(()=>{e.dispatch(y.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:r.folder.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),ee=(0,h.MM)("FOLDER_UPDATE_TEAM_ACCESS",(e,r,{optimistId:n})=>{let i=x.W.updatedFolderTeamAccess({folderId:r.folder.id,teamAccess:r.teamAccess}).then(()=>{e.dispatch(y.c(n)),(0,T.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:r.folder.team_access,newTeamAccess:r.teamAccess})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),et=(0,h.nF)(async(e,r)=>{let n=r.folder,i=r.team,a=(0,P.Ws)(i);if(n.inviteOnlyAt||n.viewOnlyAt){e.dispatch(E.to({type:B.r,data:{folder:n}}));return}try{await x.W.getCanMove({teamId:i.id,folderId:n.id})}catch(r){r.data?.failure_info?.code==="ERR_FILE_LIMIT"||r.data?.failure_info?.code==="ERR_PROJECT_LIMIT"?e.dispatch(E.to({type:V.DV,data:{team:a,resource:O.vL.FOLDER,action:F.ZN.MOVE_FOLDER,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,editorType:null,upsellSource:N.b.FOLDER_MOVE_MODAL}})):e.dispatch(d.s.error(r.data?.message));return}n.teamId&&a?e.dispatch(E.to({type:G.o,data:{folder:n,destinationTeam:a,onConfirm:()=>{(0,s.Jl)(er)({folder:n,team:a})}}})):(0,s.Jl)(er)({folder:n,team:a})}),er=w.M4.Mutation((e,{query:r,objects:n,reduxStore:i})=>{let{folder:a,team:s}=e;(0,T.xr)("Folder Moved",a.id,null,i.getState(),{destTeamId:s.id});let c=l.Ay.put("/api/folders/move",{folder_id:a.id,team_id:s.id}).then(()=>{i.dispatch(p.F.enqueue({message:(0,u.t)("file_browser.folder_move.project_moved_toast",{folderName:a.path,teamName:s.name})}))});return i.dispatch((0,d.Q)({promise:c,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),o.WB()?.optimisticallyUpdate({Project:{[a.id]:{teamId:s.id}}},c),a.teamId&&(r.mutate(Y({teamId:a.teamId}),e=>{let r=e.findIndex(e=>e.id===a.id);-1!==r&&e.splice(r,1)}),n.Folder.update(a.id,e=>{e.team_id=s.id})),c}),en=(0,h.nF)((e,r)=>{let n=e.getState(),i=r.where,a=r.team.id,o=n.creatingNewFolder&&n.creatingNewFolder.where===i&&n.creatingNewFolder.teamId===a,s=r.team;if(!o){if(s.canEdit)(0,A.rR)(s,{type:A.sK.ADD_PROJECT})?(e.dispatch(g.sf({where:i,teamId:a})),e.dispatch(E.to({type:(0,m.p)(),data:{teamId:s.id,modalShown:n.modalShown,onFolderCreated:r.onFolderCreated}}))):e.dispatch(E.to({type:V.DV,data:{team:s,resource:O.vL.FOLDER,action:F.ZN.CREATE_FOLDER,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO,editorType:null}}));else{let r=s?(0,u.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:s.name}):(0,u.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(d.s.flash(r))}}})},6974:(e,r,n)=>{"use strict";n.d(r,{g:()=>s});var i=n(38580),a=n(586459),o=n(567088);let s=(0,i.eU)(a.r.INIT);(0,i.eU)({folderId:"",planId:"",planName:"",planType:o.O.TEAM})},935308:(e,r,n)=>{"use strict";n.d(r,{nm:()=>h});var i=n(966712),a=n(374626),o=n(586459),s=n(980820),l=n(99403),c=n(296559),d=n(902957),u=n(389643),p=n(516056),m=n(6974);(0,s.nF)(async(e,{loadedPlans:r})=>{if(!r||!(r.length>0))try{let r=await p.k.getPlans();e.dispatch(c.uo({plans:r.data.meta.plans})),e.dispatch(d.uo({teams:r.data.meta.teams})),e.dispatch(l.uo({orgs:r.data.meta.orgs}));let n=r.data.meta.teams,a=(0,i.kc)().ps_benchmark,o=(0,i.kc)().close_starter_team_loophole;a&&o&&await Promise.all(n.map(r=>(0,u.xN)(r.id,e)))}catch(e){}});let h=(e=!1)=>async r=>{try{return await _(r,e)}catch(e){return Promise.reject(e)}};async function _(e,r=!1){if(!(0,i.kc)().ps_benchmark)return Promise.reject();let n=a.zl.get(m.g);if(!r&&n!==o.r.INIT&&n!==o.r.LOADING)return n;try{n===o.r.INIT&&a.zl.set(m.g,o.r.LOADING);let r=await p.k.getPlansForAuthedUsers();return a.zl.set(m.g,r),e(d.uo({teams:r.teams})),e(l.uo({orgs:r.orgs})),r}catch(e){return n===o.r.LOADING&&a.zl.set(m.g,o.r.INIT),Promise.reject(e)}}},964258:(e,r,n)=>{"use strict";n.d(r,{IA:()=>O,KQ:()=>C,UM:()=>P,vr:()=>R,zK:()=>L});var i=n(776250),a=n(966712),o=n(853828),s=n(790724),l=n(27087),c=n(881388),d=n(939863),u=n(392592),p=n(980820),m=n(738269),h=n(507877),_=n(182976),g=n(936500),f=n(902957),E=n(816858),y=n(988022),b=n(99506),I=n(937294),T=n(426197),v=n(935757),S=n(668860),w=n(637590),A=n(344950),N=n(248970);let C=(0,p.nF)((e,r)=>{let{teamName:n,orgAccess:i,workspaceId:o,description:s,defaultPermission:p,sharingAudienceControl:_,orgBrowsable:E,hidden:I,ignoreCurrentPlan:v}=r,N=e.getState().currentUserOrgId,C={team_name:n};!N||v||(C.org_id=N,_||(C.org_access=i)),o&&(C.workspace_id=o),s&&(C.description=s),p&&!_&&(C.default_permission=p),_&&(C.sharing_audience_control=_),E&&(C.org_browsable=E),I&&(C.hidden=I),e.dispatch(f.r1({loading:!0})),l.Ay.post("/api/teams/create",C).then(({data:n})=>{let i="team"in n.meta?n.meta.team:n.meta;(0,y._J)("Team Created",i.id,e.getState(),{sharing_audience_control:_,org_browsable:E,hidden:I}),r.onSuccessNoRedirect&&r.onSuccessNoRedirect(i),function(e,r,n){let i=r.getState().user,o=r.getState().currentUserOrgId;r.dispatch(f.bE({team:e}));let{ignoreCurrentPlan:s}=n;o&&!s&&n.inviteEmails?.length&&n.inviteLevel?r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:n.inviteLevel,source:"new_team_creation_modal"})):n.teamFlowType===w.SC.CREATE&&n.inviteEmails?.length&&r.dispatch((0,T.rq)({emails:n.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:S.e6.EDITOR,source:"team_creation_flow"})),A.G.getTeam({teamId:e.id}).then(({data:o})=>{for(let e of o.meta)r.dispatch(g.bE({role:e}));let l=(0,a.kc)().ps_benchmark;l||r.dispatch(f.r1({loading:!1}));let c=r.getState().currentUserOrgId&&!s;if(n.dontRedirect)l&&r.dispatch(f.r1({loading:!1}));else if(n.onSuccess&&(l&&r.dispatch(f.r1({loading:!1})),n.onSuccess()),c||n.teamFlowType===w.SC.CREATE)l&&r.dispatch(f.r1({loading:!1})),r.dispatch(m.$T({view:"team",teamId:e.id})),r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,d.t)("team_creation.you_have_created_a_new_team")}));else if(l&&i?.id){let n={view:"addCollaborators",teamId:e.id},a={userId:i.id,teamId:e.id,orgId:null};r.dispatch(h._l({workspace:a,view:n}))}else l&&r.dispatch(f.r1({loading:!1})),r.dispatch(m.$T({view:"addCollaborators",teamId:e.id}))})}(i,e,r)}).catch(r=>{let n=(0,d.Jv)(r,r?.response?.message||(0,d.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(c.s.error(n)),e.dispatch(f.r1({loading:!1}))})}),O=(0,p.nF)((e,r)=>{let n=r.team,i=n.id,a=n.name,c=r.name;(0,y._J)("Team Renamed",i,e.getState());let p=l.Ay.put(`/api/teams/${i}`,{name:r.name}).then(({data:n})=>{r.skipVisualBell||e.dispatch(u.F.enqueue({message:(0,d.t)("change_team_name_visual_bell.text",{oldTeamName:a,newTeamName:c}),button:{text:(0,d.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(O({team:n.meta,name:a,skipVisualBell:!0}))}}}))});return o.WB()?.optimisticallyUpdate({Team:{[i]:{name:c}}},p),(0,s.Q)({requestPromise:p,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:f.$w(r)})}),L=(0,p.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Share Settings Updated",n,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:r.team.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl,oldOrgBrowsable:r.team.org_browsable,newOrgBrowsable:r.orgBrowsable,oldHidden:r.team.hidden,newHidden:r.hidden}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{sharing_audience_control:r.sharingAudienceControl,org_browsable:r.orgBrowsable,hidden:r.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:f.aB(r)})});(0,p.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Org Access Changed",n,e.getState(),{oldOrgAccess:r.team.org_access,newOrgAcccess:r.orgAccess}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess}),fallbackError:"An error occurred while changing the org access of this team.",store:e,next:e.dispatch,action:f.bQ(r)})}),(0,p.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Org Team Default Member Permission Changed",n,e.getState(),{oldDefaultPermission:r.team.default_permission,newDefaultPermission:r.defaultPermission}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{default_permission:r.defaultPermission}),fallbackError:(0,d.t)("file_browser.team_settings.an_error_occurred_while_changing_default_permission"),store:e,next:e.dispatch,action:f.n9(r)})});let R=(0,p.nF)((e,r)=>{(0,i.sx)("file-browser-hydrate",{location:"team.onJoin"});let n=(0,I.p9)(r.teamId);(0,v._X)("onJoinTeam").then(i=>{let a=r.teamId;e.dispatch(m.Qv(i.data.meta));let o=e.getState().teams[a].name;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_owner.text",{teamName:o})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_admin.text",{teamName:o})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_flash.text",{teamName:o})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.mw(r))}),P=(0,p.nF)((e,r)=>{(0,i.sx)("file-browser-hydrate",{location:"team.onBatchJoin"});let n=(0,I.n1)(r.teamIds);(0,v._X)("onBatchJoinTeams").then(i=>{e.dispatch(m.Qv(i.data.meta));let a=r.teamIds.length;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_owner.text",{teamCount:a})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_admin.text",{teamCount:a})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.text",{teamCount:a})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.ii(r))});(0,p.nF)(e=>{let r=e.getState().currentUserOrgId;N.c.getTeamRoleRequestsOrgId({orgId:r}).then(r=>{e.dispatch(E.b({teamRoleRequests:r.data.meta}))})})},411916:(e,r,n)=>{"use strict";n.d(r,{HE:()=>_,O_:()=>p,Pn:()=>u,Tt:()=>g,U8:()=>h,vp:()=>d});var i=n(966712),a=n(886653),o=n(776621),s=n(939863),l=n(473624),c=n(428467);function d(e,r,n){if(!e)return null;let a={userId:e.id,orgId:r};return(0,i.kc)().ps_benchmark&&(a.teamId=n||null),a}let u=(0,a.xx)(d);function p(e,r){let n=d(e.user,e.currentUserOrgId,e.currentTeamId);return(0,i.kc)().ps_benchmark?!!n&&n.userId===r.userId&&(!!n.orgId&&n.orgId===r.orgId||!!n.teamId&&n.teamId===r.teamId):!!n&&n.userId===r.userId&&n.orgId===r.orgId}let m=l.p;function h(e,r){let n={};return r.forEach(r=>{n[r]=m(e,r)}),n}function _(e,r,n,a){let l=(0,s.t)("navbar.workspaces.default_workspace_name");if(!r)return l;if(r.orgId){let i=n?.[r.orgId]||e.orgById[r.orgId];return i?.name||(0,s.t)("navbar.workspaces.default_org_workspace_name")}let d=(0,i.kc)().ps_benchmark;if(d&&r.teamId){let n=a?.[r.teamId]||e.teams[r.teamId];return n?.name||(0,s.t)("navbar.workspaces.default_team_workspace_name")}return d&&e.user?.id!=="-1"&&(0,o.Lo)("planSpaces","User with Plan Spaces enabled saw External Teams."),(0,c.userIsAMemberOfAnOrg)(e,r.userId)?(0,s.t)("navbar.profile_switcher.external_teams"):(0,s.t)("navbar.profile_switcher.your_teams")}function g(e,r){return 0!==e.length&&(e.length>1||m(r,e[0]).length>1)}},67085:(e,r,n)=>{"use strict";n.d(r,{Ad:()=>I,Ir:()=>O,XO:()=>S,Xm:()=>A,dE:()=>C,m1:()=>b,nZ:()=>w,nk:()=>E,zE:()=>N}),n(634832);var i=n(138020),a=n(512495),o=n.n(a),s=n(181912),l=n(939863),c=n(944682),d=n(782656),u=n(99506),p=n(623746),m=n(239671);n(723856);var h=n(857766),_=n(27703),g=n(875847),f=n(243987),E=(e=>(e.fileBrowserContextMenu="file_browser_context_menu",e.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",e.fileBrowserTileActionMenu="file_browser_tile_action_menu",e.prototypeHeader="prototype_header",e.fullscreenToolbar="fullscreen_toolbar",e.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",e.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",e.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",e.customTemplatePublishNudge="custom_template_publish_nudge",e.expProTrialsV3CardStackWidget="exp_pro_trials_v3_card_stack_widget",e.editRequestTooltip="edit_request_tooltip",e.editRequestExternal="edit_request_external",e.shareToGoogleClassroomOnboarding="share_to_google_classroom_onboarding",e.googleClassroomIntegration="google_classroom_integration",e))(E||{});function y(e){return{file:{...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,canMove:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1,folderAccessEnabled:!0,scFileExperienceEnabled:!1,isDraftFileLG:!1,isAbandonedDraftFile:!1,mustUpgradeToShareDraft:!1},repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,workspace:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,editorType:(0,m.wN)(e.editor_type)}}function b(e,r){if("loaded"!==e.status)return y(r);let n=e.data.file;if(!n)return y(r);let a=n.fileLinkExpirationConfig||n.sourceFileLinkExpirationConfig,o=n.repo?.defaultFileKey===n.key,s=n.pwdConfig?.updatedAt||null,l=n.pwdConfig?.setByUser?(0,p.Um)(n.pwdConfig.setByUser):null,c={canEdit:n.canEdit,canEditCanvas:n.canEditCanvas,hasEditRole:n.hasEditRole,hasViewRole:n.hasViewRole,canView:n.canView,canViewPrototype:n.canViewPrototype,canViewPrototypeLinks:n.hasViewPrototypeRole,canMove:n.canMove,passwordSetAt:s,passwordSetByUser:l,isOwner:o?!!n.repo?.roleOnObjectForUser?.isOwnerOfResource:!!n.roleOnObjectForUser?.isOwnerOfResource,isPublishedHubFile:!!n.publishedHubFile&&!n.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,p.Nl)(a),folderAccessEnabled:n.folderAccessEnabled&&(0,i.oA)(n.folderAccessEnabled)||!1,scFileExperienceEnabled:n.scFileExperienceEnabled&&(0,i.oA)(n.scFileExperienceEnabled)||!1,isDraftFileLG:n.isDraftFile&&(0,i.oA)(n.isDraftFile)||!1,isAbandonedDraftFile:n.isAbandonedDraftFile||!1,mustUpgradeToShareDraft:(0,i.oA)(n.mustUpgradeToShareDraft)||!1,...(0,p.k9)(n)},d={};n.repo&&n.repo.roles.forEach(e=>{e.userId&&(d[e.userId]=e)});let h={};n.project&&n.project.roles.forEach(e=>{e.userId&&(h[e.userId]=e)});let f={};n.team&&n.team.roles.forEach(e=>{e.userId&&(f[e.userId]=e)});let E={};(o?n.repo.roles:n.roles).forEach(e=>{let r=e.user?(0,p.Um)(e.user):null;if(r){let n=e.user?.orgUser||e.user?.guestOrgUser,i=d[r.id],a=f[r.id],o=h[r.id],s=e.user?.teamUser?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,l=(0,p.aU)(e,r,n||null,s||null);E[r.id]=l.pending?l:{...l,folderLevel:o?.level||null,teamLevel:a?.level||null,repoLevel:i?.level||null}}else e.pending&&(E[`pending-${e.id}`]=(0,p.aU)(e,null,null,null))});let b={};(0,_.zb)(r)&&n.fileSeenStates.forEach(e=>{let r=e.user?(0,p.Um)(e.user):null;if(r){let n=d[r.id],i=f[r.id],a=h[r.id],o=(0,p.WP)(e,r);b[o.user_id]={...o,folderLevel:a?.level||null,teamLevel:i?.level||null,repoLevel:n?.level||null}}});let I={};e.data.currentUser?.allBaseOrgUsers&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(I[e.org.id]={})});let T=n.repo?{...(0,p.YT)(n.repo),canEdit:n.repo.canEdit,mainFileLinkExpirationConfig:(0,p.Nl)(a)}:null;if(v(a)){let e={link_access:a.prevPrivateLinkAccess,proto_link_access:a.prevPrivateProtoLinkAccess,org_browsable:a.prevOrgBrowsable};c={...c,...e},T&&(T={...T,...e})}let S=n.project?.orgDraftsFolderOwnerBaseOrgUser?{id:n.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||u.El.STARTER,user_id:n.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,p.Um)(n.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null,w=n.project;var A=void 0;n.org&&"loaded"===n.org.imgUrl.status&&null!==n.org.imgUrl.data&&(A=n.org.imgUrl.data);let N=n.org&&n.org.k12GoogleOrg&&(0,i.oA)(n.org.k12GoogleOrg);return{file:c,repo:T,rolesByUserId:E,fileSeenStatesByUserId:b,fileRoleRequests:n.fileRoleRequests,folder:w&&{name:w.path,is_view_only:!!w.viewOnlyAt,is_invite_only:!!w.inviteOnlyAt,team_id:w.teamId,team_access:"loaded"===w.teamAccess.status?w.teamAccess.data:null,canRead:w.canRead&&(0,i.oA)(w.canRead)||!1},folderRoles:w&&w.roles||[],isInDraftsFolder:(0,g.VA)(w),orgDraftsOwner:S,org:n.org?{id:n.org.id,name:n.org.name,img_url:A,domain_capture:!!n.org.domainCapture,workshop_enabled:!n.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:n.org.inviteWhitelist?.guestInviteSetting,figjam_disabled_at:n.org.figjamDisabledAt,org_domains:(0,p.vy)(n.org.orgDomains),bigma_enabled:!!n.org.bigmaEnabledAt,k12_google_org:!!N}:null,orgUser:n.org?.currentBaseOrgUser?{id:n.org.currentBaseOrgUser.id,org_id:n.org.id,user_id:e.data.currentUser?.id,permission:n.org.currentBaseOrgUser.permission,license_group_member:n.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:n.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:n.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:n.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:e.data.org.inviteWhitelist?.guestInviteSetting||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:n.team?{id:n.team.id,name:n.team.name,img_url:"loaded"===n.team.imgUrl.status&&n.team.imgUrl.data||void 0,subscription:n.team.subscription,student_team:!!n.team.studentTeamAt,grace_period_end:n.team.gracePeriodEnd?n.team.gracePeriodEnd.toISOString():null,canRead:n.team.canRead,org_access:n.team.orgAccess}:null,workspace:n.team?.workspace??null,orgs:I,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,p.Td)(n.org?{id:n.org.id,bigma_enabled:!!n.org?.bigmaEnabledAt}:null,n.org?.sharedOrgLicenseGroupSetting??e.data.org?.sharedOrgLicenseGroupSetting,n.team?.workspaceSharedSetting),editorType:(0,m.wN)(c.editor_type)}}function I(e,r){let n;let i=null,a=null;return"loaded"===e.status&&"loaded"===r.status?(n="loaded",i=o()(e.data,r.data)):"errors"===e.status||"errors"===r.status?(n="errors",a=o()(e.errors||[],r.errors||[])):n="loading",{status:n,data:i,errors:a}}function T(e){return{dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentUserOrgId:e.currentUserOrgId,orgDomains:e.orgDomains,user:e.user,orgUser:e.orgUser,org:e.org,orgs:e.orgs,hideLinkAccessInfo:O(e.file),team:e.team,inWorkshop:"fullscreen"===e.selectedView.view&&(e.selectedView.workshopModeInfo?.until||new Date)>new Date}}let v=e=>{if(!e)return!1;let{accessReverted:r,expiresAt:n}=e;return!r&&!!n&&(0,s.A)().isAfter(n)};function S(e){let r=e.editorType!==m.nT.Whiteboard&&e.org&&e.org.bigma_enabled?e.file.mainFileLinkExpirationConfig?.id??"optimistic":null;return{fileKey:e.file.key,isBranch:(0,h.Xm)(e.file),containingRepo:e.repo,hasEditRole:(0,_.QZ)(e.file.hasEditRole,e.file,e.isFreeUserOnly,e.isInDraftsFolder),noun:(0,h.Pn)(e.file),onUpdate:(n,i,a)=>{e.dispatch(c.og({file:{...n,key:e.file.key},onError:i,onSuccess:a,linkExpirationConfigId:r,currentUser:e.currentUser}))},permissions:e.file,mainFileLinkExpirationConfig:e.file.mainFileLinkExpirationConfig,passwordSetAt:e.file.passwordSetAt,passwordSetByUser:e.file.passwordSetByUser,isFreeUserOnly:e.isFreeUserOnly,isInDraftsFolder:e.isInDraftsFolder,isOwner:e.file.isOwner,isPublishedHubFile:e.file.isPublishedHubFile,editorType:e.editorType,sharedOrgLicenseGroupSetting:e.sharedOrgLicenseGroupSetting,isUI3:e.isUI3,...T(e)}}function w(e){let r=e.repo;if(!r)throw Error("repoAccessRowProps called on a non-repo");let n=e.org&&e.org.bigma_enabled?e.file.mainFileLinkExpirationConfig?.id??"optimistic":null;return{isBranch:(0,h.Xm)(e.file),containingRepo:r,hasEditRole:r.canEdit,noun:"file",onUpdate:(i,a,o)=>{e.dispatch(d.og({repo:{...i,id:r.id,default_file_key:r.default_file_key},onError:a,onSuccess:o,linkExpirationConfigId:n,currentUser:e.currentUser}))},permissions:{...r,has_file_link_password:e.file.has_file_link_password,has_proto_link_password:e.file.has_proto_link_password},passwordSetAt:e.file.passwordSetAt,passwordSetByUser:e.file.passwordSetByUser,isFreeUserOnly:e.isFreeUserOnly,isInDraftsFolder:e.isInDraftsFolder,isOwner:e.file.isOwner,editorType:e.editorType,mainFileLinkExpirationConfig:e.file.mainFileLinkExpirationConfig,sharedOrgLicenseGroupSetting:e.sharedOrgLicenseGroupSetting,...T(e)}}function A(e,r,n,i,a,o){let s=e.repo,l=e.editorType!==m.nT.Whiteboard&&e.org&&e.org.bigma_enabled?e.file.mainFileLinkExpirationConfig?.id??"optimistic":null,p=(s?s.link_access:e.file.link_access)||u.PQ.INVITE_ONLY;e.org||p!==u.PQ.ORG_EDIT&&p!==u.PQ.ORG_VIEW||(p=u.PQ.INVITE_ONLY);let _={discoverable:(s?s.org_browsable:e.file.org_browsable)||!1,linkAccess:p,protoLinkAccess:s?s.proto_link_access:e.file.proto_link_access,filePasswordEnabled:e.file.has_file_link_password??!1,protoPasswordEnabled:e.file.has_proto_link_password??!1},g={lastPublishedAt:e.file.last_published_at,publishScopeType:e.file.library_publish_scope_type},E=s&&e.file.key===s.default_file_key?(r,n,i)=>{e.dispatch(d.og({repo:{...r,id:s.id,default_file_key:s.default_file_key},onError:n,onSuccess:i,linkExpirationConfigId:l,currentUser:e.currentUser}))}:(r,n,i)=>{e.dispatch(c.og({file:{...r,key:e.file.key},onError:n,onSuccess:i,linkExpirationConfigId:l,currentUser:e.currentUser}))};return{org:e.org||void 0,workspace:e.workspace||void 0,team:e.team||void 0,folder:e.folder||void 0,goBack:r,goToSettings:n,onUpdate:E,permissions:_,isPrototype:a,editorType:e.editorType,bigmaEnabled:!!(e.org&&e.org.bigma_enabled),mainFileLinkExpirationConfig:e.file.mainFileLinkExpirationConfig,user:e.user,sharedOrgLicenseGroupSetting:e.sharedOrgLicenseGroupSetting,hasEditRole:s?s.canEdit:e.file.hasEditRole,dropdownShown:e.dropdownShown,modalShown:e.modalShown,isBranch:(0,h.Xm)(e.file),passwordSetAt:e.file.passwordSetAt,passwordSetByUser:e.file.passwordSetByUser,fileKey:e.file.key,canEdit:e.file.canEdit,viewerExportRestricted:e.file.viewer_export_restricted,canAccessProFeature:(0,f.w5)(e.team),isFreeUserOnly:e.isFreeUserOnly,isDraftFile:e.file.isDraftFileLG,numRoles:i,fileName:e.file.name,showPrototypeUpsell:o,libraryInfo:g}}function N(e,r){return{folderRoles:e.folderRoles,team:e.team,folder:e.folder,fileName:e.file.name,goBack:r}}function C({startingPointNodeId:e,startingPointsData:r}){if(r&&r.length>1&&e){let n=r.find(r=>r.id===e);if(n)return(0,l.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:n.name})}return(0,l.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")}function O(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===u.PQ.INHERIT)}},749401:(e,r,n)=>{"use strict";var i=n(801886);i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR},247368:(e,r,n)=>{"use strict";n.d(r,{Ye:()=>A,Z1:()=>N,i8:()=>C});var i=n(634832),a=n(675678),o=n(587670),s=n(966712),l=n(776621),c=n(202655),d=n(853069),u=n(801886),p=n(747202);let m="CustomImage",h=`type ${m} = {
  // always use the string "0"
  id: string
};`,_={typeName:"string"},g={typeName:"boolean"},f={typeName:"React.ReactNode"},E={typeName:m,referencedTypes:[{type:"IMAGE"}]};function y({component:e,parsedDefs:r}){let n=[],i=[];for(let e of(0,c.ep)(r)){e.typeRepr.referencedTypes&&i.push(...e.typeRepr.referencedTypes);let r=(0,c.GN)(e),a=(0,c.Hd)(e);r&&a&&n.push(`${r}: ${a}`)}return{typeName:(0,c.L_)(e.name),typeDefBody:`{${n.join("; ")}}`,prefixComments:function(e){let r=[];for(let n of(0,c.ep)(e)){let i=n.devFriendlyProp;if("ARRAY"===i.type&&(0,s.kc)().first_draft_ts_arrays){let n=0,a=0;for(let r of e)"ARRAY"===r.devFriendlyProp.type&&r.devFriendlyProp.key===i.key&&(n++,!r.isOptional&&a++);n===a?r.push(`@param ${i.key} - Specify ${n} items`):r.push(`@param ${i.key} - Specify between ${a} and ${n} items`)}}return r}(r),referencedTypes:i}}function b({component:e,rawProp:r}){let n=v(e),i=n.propsTypeRepr.typeName,{omit:a,pick:o}=(0,c.rB)(r);if((0,s.kc)().first_draft_inline_nested_props||n.parsedDefs.length>5&&o&&o.length<=2)return{typeName:y({component:e,parsedDefs:(0,c.ep)(n.parsedDefs).filter(e=>!(a&&a.includes((0,c.aX)(e.rawProp)))&&(!o||!!o.includes((0,c.aX)(e.rawProp))))}).typeDefBody??"{}",referencedTypes:[{type:"COMPONENT_INLINED",componentId:n.componentId}]};if(a){let e=[];for(let r of(0,c.ep)(n.parsedDefs))"key"in r.devFriendlyProp&&a.includes((0,c.aX)(r.rawProp))&&e.push(r.devFriendlyProp.key);let r=e.map(e=>`"${e}"`).join(" | ");i=`Omit<${i}, ${r}>`}if(o){let e=[];for(let r of(0,c.ep)(n.parsedDefs))"key"in r.devFriendlyProp&&o.includes((0,c.aX)(r.rawProp))&&e.push(r.devFriendlyProp.key);let r=e.map(e=>`"${e}"`).join(" | ");i=`Pick<${i}, ${r}>`}return{typeName:i,referencedTypes:[{type:"COMPONENT",componentId:n.componentId}]}}let I={},T={};function v(e){try{if(!I[(e=e.isState?e.parentNode:e).guid]){let r=S(e);I[e.guid]=r,T[r.key]=r}return I[e.guid]}catch(e){throw e}}function S(e){let r=(0,c.WG)(e.name),n=function(e){let r=function(e){let r=e.componentPropertyDefinitions(),n=Object.keys(r);n.reverse();let i=[];for(let e of n){let n=r[e];if("INSTANCE_SWAP"===n.type){let r=(0,p.Ny)(n.defaultValue);if(r&&"SYMBOL"===r.type){if("Slot"===r.name){i.push({rawProp:e,def:{type:"SLOT"}});continue}if(o.Egt.nodeIsSubscribedSymbolOrStateGroup(r.guid)&&!r.isState){i.push({rawProp:e,def:{type:"GROUPED_INSTANCE_SWAP",defaultValue:r.guid,groupName:d.$x}});continue}{let n=v(r),a=(0,d.vR)(n);if(a){i.push({rawProp:e,def:{type:"GROUPED_INSTANCE_SWAP",defaultValue:r.guid,groupName:a}});continue}}}}i.push({rawProp:e,def:n})}let a=(0,c._j)(e);for(let[e,r]of Object.entries((0,c._e)(a,"IMAGE"))){let n={};for(let[e,i]of Object.entries(r.tagsByParentComponentId))n[e]={background:"normal"},"true"===i.transparent&&(n[e].background="transparent"),"true"===i.segment&&(n[e].background="segment"),i.desc&&(n[e].desc=i.desc),i.prompt&&(n[e].prompt=i.prompt);i.push({rawProp:e,def:{type:"IMAGE",guidByParentComponentId:r.guidByParentComponentId,tagsByParentComponentId:n}})}let s=(0,p.g5)(e.guid).filter(e=>!e.isInstanceSublayer&&!!e.isBubbled&&(!e.componentPropertyReferences()?.mainComponent||((0,l.xi)("getComponentInfo","Nested is both exposed as NESTED and as INSTANCE_SWAP",{instanceId:e.guid}),!1)));for(let[e,r]of Object.entries((0,c._e)(s,"NESTED_INSTANCE"))){let n=r.componentIdOrNull;if(!n)continue;let a={};for(let[e,i]of Object.entries(r.tagsByParentComponentId)){a[e]={};let r={};if(i.fixed){let o=(0,p.Ny)(n);if(o){let n=v(o),s=i.fixed?.split(",").map(e=>e.trim())??[];for(let e of n.parsedDefs)if("key"in e.devFriendlyProp&&"VARIANT"===e.def.type){let n=e.devFriendlyProp.key;("true"===i.fixed||s.includes(n))&&(r[n]=!0)}a[e].fixedVariantProperties=r}}}let o={type:"NESTED_INSTANCE",componentId:n,tagsByParentComponentId:a,guidByParentComponentId:r.guidByParentComponentId};i.push({rawProp:e,def:o})}let u={};for(let e of i){if(u[e.rawProp]){console.error("Unexpected repeated rawProp value",{rawProp:e.rawProp});continue}u[e.rawProp]=e}return u}(e);for(let e of(0,c.go)(r))for(let r=0;r<e.length;r++){let n=e[r];n.usagePropOverride=(0,c.fy)({index:r,rawProp:n.rawProp})}let n={},a={},s={},u={},m=new Set;for(let[l,h]of Object.entries(r)){let r=(0,c.aX)(h.usagePropOverride??l);m.has(r)&&(r=(0,c.R0)({usageProp:r,usedUsageProps:m}));let y=h.def,I=function({component:e,rawProp:r,definition:n}){switch(n.type){case"TEXT":return _;case"BOOLEAN":return g;case"SLOT":return f;case"IMAGE":return E;case"VARIANT":return{typeName:(0,c.Vv)({component:e,rawProp:r}),typeDefBody:n.variantOptions?.map(e=>`"${e}"`).join(" | ")??"null"};case"GROUPED_INSTANCE_SWAP":return{typeName:(0,d.VV)(n.groupName),typeDefBody:"{description: string}",prefixComments:["@param description - Specify a 1 sentence description"]};case"INSTANCE_SWAP":{if(n.preferredValues&&0!==n.preferredValues.length&&n.preferredValues.length<10){let i=(0,c.Vv)({component:e,rawProp:r}),a=[],s=[];for(let e of n.preferredValues){let r=function(e){if(T[e])return T[e];let r=o.XJn.getComponentByAssetKey(e)||o.XJn.getStateGroupByAssetKey(e);return r?A(r):null}(e.key);r&&(a.push(r.jsxName),s.push({type:"COMPONENT_JSX",componentId:r.componentId}))}if(0!==a.length)return{typeName:i,typeDefBody:`ReactElement<any, ${a.join(" | ")}>`,referencedTypes:s}}let i=(0,p.Ny)(n.defaultValue);if(i&&"SYMBOL"===i.type)return b({component:i,rawProp:r});break}case"NESTED_INSTANCE":{let e=n.componentId,i=(0,p.Ny)(e);if(i&&("SYMBOL"===i.type||i.isStateGroup))return b({component:i,rawProp:r});break}default:(0,i.assertNever)(n)}return null}({component:e,rawProp:l,definition:y});if(I){m.add(r),s[l]=r;let e=I.typeName;u[e]=u[e]||[],u[e].push(r);let o={def:y,devFriendlyProp:function({usageProp:e,rawProp:r,definition:n}){let a={key:e};switch((0,c.aX)(r)!==e&&(a.originalKey=(0,c.aX)(r)),n.type){case"VARIANT":return{type:"SIMPLE_CHOICE",validOptions:n.variantOptions??[],valueType:"STRING",...a};case"INSTANCE_SWAP":case"NESTED_INSTANCE":case"SLOT":return{type:"SIMPLE",valueType:"OBJECT",...a};case"BOOLEAN":return{type:"SIMPLE",valueType:"BOOLEAN",...a};case"TEXT":return{type:"SIMPLE",valueType:"STRING",...a};case"IMAGE":return{type:"IMAGE",valueType:"OBJECT",...a};case"GROUPED_INSTANCE_SWAP":{let e=(0,p.Ny)(n.defaultValue);if(!e||"SYMBOL"!==e.type)return{type:"SIMPLE",valueType:"UNKNOWN",...a};return{type:"GROUPED_INSTANCE_SWAP",groupName:n.groupName,valueType:"OBJECT",...a}}default:(0,i.assertNever)(n)}}({usageProp:r,rawProp:l,definition:y}),componentId:(0,c.O7)(y),isOptional:(0,c.QJ)(l),rawProp:l,typeRepr:I};a[l]=o,n[r]=o}}for(let e of Object.values(u))for(let[r,i]of Object.entries((0,c.hM)(e)))if((0,c.xb)(i.map(e=>n[e])))for(let e=0;e<i.length;e++){let a=i[e],o=n[a].devFriendlyProp,s={type:"ARRAY",key:r,index:e,nonArrayKey:"key"in o?o.key:"",valueType:o.valueType};"originalKey"in o&&(s.originalKey=o.originalKey),n[a].devFriendlyProp=s}let h=Object.keys(n),y=[],I={};for(let e of h){let r=n[e].devFriendlyProp;if("DERIVED_BOOLEAN"!==r.type)switch(r.type){case"SIMPLE":case"SIMPLE_CHOICE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":I[e]=r;break;case"ARRAY":I[e]=r,I[r.key]={type:"SIMPLE",key:r.key,valueType:r.valueType};break;default:(0,i.assertNever)(r)}}for(let e of h){let r=n[e];if("SIMPLE"===r.devFriendlyProp.type){let n="Visible";if(e.endsWith(n)){let i=e.slice(0,-n.length);i&&I[i]&&(r.devFriendlyProp={type:"DERIVED_BOOLEAN",valueType:"BOOLEAN",devFriendlyProp:I[i]})}}y.push(r)}return y.sort(c.Ho)}(e),a=y({component:e,parsedDefs:n}),s=`type ${r} = React.FC<${a.typeDefBody??"{}"}>`,m=(0,c.yu)(e.guid),I=(0,c.Se)(m,c.vh),S=(0,d.iR)(m),N=I?u.I5.BUILDING_BLOCK:S?u.I5.GROUPED_COMPONENT:u.I5.NONE,C=I?c.vh:S??void 0,O=(0,p.Uk)(e);return{componentId:e.guid,name:e.name,defaultNodeId:"SYMBOL"===e.type?e.guid:(0,p.l8)(e).guid,jsxName:r,componentGroupPath:m,groupName:C,componentType:N,defs:e.componentPropertyDefinitions(),parsedDefs:n,prefixTypes:function(e){let r={},n=(e,n)=>{e in r&&(e=(0,c.R0)({usageProp:e,usedUsageProps:new Set(Object.keys(r))})),r[e]=n};for(let r of(0,c.ep)(e)){let e=r.devFriendlyProp;if("DERIVED_BOOLEAN"===e.type||"ARRAY"===e.type&&0!==e.index)continue;!function(e,r,n){if(r.referencedTypes)for(let a of r.referencedTypes)switch(a.type){case"IMAGE":n(e,h);break;case"COMPONENT_JSX":{let r=(0,p.Ny)(a.componentId);if(r){let i=v(r);for(let[r,a]of Object.entries(i.prefixTypes))n(`${e}${r}`,a);n(e,i.typeStr)}break}case"COMPONENT_INLINED":case"COMPONENT":{let r=(0,p.Ny)(a.componentId);if(r){let i=v(r);for(let[r,a]of Object.entries(i.prefixTypes))n(`${e}${r}`,a);if("COMPONENT"===a.type){let r=w(i.propsTypeRepr);r&&n(e,r)}}break}default:(0,i.assertNever)(a)}}(e.key,r.typeRepr,n);let a=w(r.typeRepr);if(a){n(e.key,a);continue}}return r}(n),prefixComments:a.prefixComments??[],typeStr:s,propsTypeRepr:a,description:e.description,key:o.Egt.getAssetKeyForPublish(e.guid),version:O,typeInfoVersion:u.Od}}function w(e){let r=[];if(e.typeDefBody){if(e.prefixComments?.length){for(let n of(r.push("/**"),e.prefixComments))r.push(` * ${n}`);r.push(" */")}return r.push(`type ${e.typeName} = ${e.typeDefBody};`),r.join("\n")}return null}function A(e){let r=(0,p.cl)(e);return r?r.isState?v(r.parentNode):v(r):null}function N(e){let r=(0,p.cl)(e);return r?r.isState?S(r.parentNode):S(r):null}function C(e){return I={},T={},{info:function(e){let r=(0,c.__)(e);return(0,c.tJ)([...r],{followInstances:!1}).map(e=>{try{return v(e)}catch(r){(0,l.$D)(a.FigmaTeam.AI_GENERATION,r,{extra:{nodeId:e.guid}})}}).filter(Boolean)}(e)}}},202655:(e,r,n)=>{"use strict";n.d(r,{GN:()=>x,Hd:()=>U,Ho:()=>F,Ii:()=>g,L_:()=>w,O7:()=>O,QJ:()=>T,R0:()=>R,Se:()=>m,Vv:()=>v,WG:()=>S,__:()=>N,_e:()=>E,_j:()=>k,aX:()=>p,ep:()=>B,fy:()=>f,go:()=>P,hM:()=>A,i2:()=>d,lS:()=>u,rB:()=>y,tJ:()=>D,vh:()=>c,xb:()=>L,yu:()=>C});var i=n(634832),a=n(707458),o=n(966712),s=n(776621),l=n(747202);let c="Building Blocks",d="Presets",u="\u2726/";function p(e){return function(e){let r=e.match(/^\d+/),n=e;if(r&&r.length>0){let e=r[0];n=n.replace(e,"")+e}return n}(e=(e=(e=I(e=function(e){e.endsWith("?")&&(e=e.substring(0,e.length-1));let r=e.indexOf("{");return -1!==r&&(e=e.substring(0,r)),e}(e=b(e)))).replace(/[^0-9a-z]/gi," ").split(" ").map((e,r)=>0===r?e.charAt(0).toLowerCase()+e.substr(1):(0,l.Sn)(e)).join("")).replace(/[^0-9a-z]/gi,""))}function m(e,r){for(let n of e.split(" / "))if((0,l.n6)(n,r))return!0;return!1}let h=/\[(\w+)(\: ?([^\[\]]+))?\]/,_=RegExp(`(${h.source})*$`),g=new RegExp(/^Image ?(\(.+\))?/.source+_.source);function f({index:e,rawProp:r}){let[n,i]=r.split("#");if(!n||!i)throw Error(`Unexpected rawProp format: ${r}`);let a=p(n);return a.match(/\d+$/)&&(a=a.replace(/\d+$/,"")),[`${a} ${e+1}`,i].join("#")}function E(e,r){let n={},i={},a={};for(let r of e){let e=r.guid,o=(0,l.j_)(e);o&&(i[e]=r,a[e]=o,n[o]=n[o]||[],n[o].push(e))}let o=new Set,c={};for(let e of Object.values(n)){let r=new Set;for(let n of e){let e=i[n];if(!e)continue;let a=p(e.name);r.has(a)&&(a=R({usageProp:a,usedUsageProps:r})),r.add(a),o.add(a),c[n]=a}}let d={};for(let n of e){let e=a[n.guid],i=c[n.guid];if(e&&i){let a=null,o=i;if("NESTED_INSTANCE"===r){if("INSTANCE"!==n.type){(0,s.xi)("getComponentInfoHelpers","Expected node type to be INSTANCE",{nodeType:n.type});continue}if(!(a=(0,l.yu)(n))){(0,s.xi)("getComponentInfoHelpers","Could not find mainComponent for instance",{nodeId:n.guid});continue}o+="/"+a}let c=function(e,r){let n=e.replace(/#/g,"");return[n=I(n),r].join("#")}(n.name,o);d[c]||(d[c]={componentIdOrNull:a,guidByParentComponentId:{},tagsByParentComponentId:{}}),d[c].guidByParentComponentId[e]=n.guid;let u=function(e){let r=b(e),n=_.exec(r)?.[0];return n?Object.fromEntries(n.match(RegExp(h,"g"))?.map(e=>{let r=h.exec(e);return r?[r[1],r[3]||"true"]:[]}).filter(e=>2===e.length)||[]):{}}(n.name);Object.keys(u).length>0&&(d[c].tagsByParentComponentId[e]=u)}}return d}function y(e){let r=e.match(/\{(.+)\}/);if(!r)return{};let n=r[1].split(",");return n[0].startsWith("-")?{omit:n.map(e=>e.replace("-",""))}:{pick:n}}function b(e){let[r]=e.split("#");return r}function I(e){let r=_.exec(e);return r?.[0]?e.replace(r[0],"").trim():e}function T(e){return b(e).endsWith("?")}function v({component:e,rawProp:r}){let n=p(r);return(0,l.Sn)(e.name)+(0,l.Sn)(n)}function S(e){return(0,l.Sn)(e,"Component")}function w(e){return(0,l.Sn)(e)+"Props"}function A(e){let r={};if(!Array.isArray(e)||e.length<2)return r;let n=e.map(p);for(let i=0;i<n.length;i++){let a=n[i].replace(/\d+$/,"");r[a]||(r[a]=[]),-1===r[a].indexOf(e[i])&&r[a].push(e[i])}let i={};for(let e in r){let n=r[e].sort((e,r)=>{let n=e.match(/\d+$/),i=r.match(/\d+$/);return n&&i?parseInt(n[0],10)-parseInt(i[0],10):e.localeCompare(r)}),a=function(e){if(!Array.isArray(e)||e.length<2)return null;let r=e[0].replace(/\d+$/,"");for(let n=0;n<e.length;n++)if(!e[n].startsWith(r)||parseInt(e[n].slice(r.length))!==n+1)return null;return r+"s"}(n);a&&(i[a]=n)}return i}function N({rootNodes:{includeSelection:e,dsKitKey:r,pageChildrenName:n}={}}){let i=(0,l.lI)();if(r?.type==="LOCAL"?i=(0,l.Ny)(r.pageId)??i:r?.type==="LIBRARY"&&(i=a.q.instance.getInternalCanvas()??i),!i||"CANVAS"!==i.type)return[];let o=[];if(e&&o.push(...i.directlySelectedNodes),n)for(let e of i.reversedChildrenNodes)(0,l.n6)(e.name,n)&&o.push(e);else o.push(i);return o}function C(e){let r=(0,l.Ny)(e);if(!r)return"";let n=[],i=r.parentNode;for(;i&&(("CANVAS"===i.type||"SECTION"===i.type)&&n.push(i.name),"CANVAS"!==i.type&&"DOCUMENT"!==i.type);)i=i.parentNode;return n.reverse(),n.join(" / ")}function O(e){return"INSTANCE_SWAP"===e.type&&"string"==typeof e.defaultValue?e.defaultValue:"NESTED_INSTANCE"===e.type?e.componentId:null}function L(e){if(0===e.length)return!0;let r=e[0],n=O(r.def);return e.every(e=>r.def.type===e.def.type&&n===O(e.def))}function R({usageProp:e,usedUsageProps:r}){if(!r.has(e))return e;let n=e.match(/^(.*?)(\d*)$/),i=n?n[1]:e,a=1;return r.forEach(e=>{if(e.startsWith(i)){let r=parseInt(e.slice(i.length),10);!isNaN(r)&&r>a&&(a=r)}}),`${i}${a+1}`}function P(e){let r={};for(let n of Object.keys(e)){let e=p(n);r[e]=r[e]||[],r[e].push(n)}let n=[];for(let i of Object.values(r)){let r=function(e){if(e.length<3)return[];let r=e[0];if(!r||!("guidByParentComponentId"in r.def)||!L(e))return[];let n={};for(let r of e){if(!("guidByParentComponentId"in r.def))return[];for(let e of Object.keys(r.def.guidByParentComponentId))n[e]=n[e]||[],n[e].push(r)}let i=null;for(let[r,a]of Object.entries(n))if(a.length===e.length){i=r;break}if(!i)return[];let a={};for(let r of e){if(!("guidByParentComponentId"in r.def))return[];let e=r.def.guidByParentComponentId[i];if(!e)return[];a[e]=r}let o={};for(let e of Object.keys(a)){let r=(0,l.Ny)(e),n=r?.parentNode;for(;n&&"NONE"!==n.stackMode&&(o[n.guid]=o[n.guid]||[],o[n.guid].push(e),n?.type!=="SYMBOL");)n=n.parentNode}let s=Object.entries(o);for(let[e,r]of(s.sort((e,r)=>r[1].length-e[1].length),s)){if(r.length<3)continue;let n=new Set(r);return(0,l.Au)(e,["INSTANCE"]).filter(e=>n.has(e.guid)).map(e=>a[e.guid])}return[]}(i.map(r=>e[r]));r.length<3||n.push(r)}return n}function D(e,r){return function(e,r){let n=[],i=new Set,a=[...e];for(;0!==a.length;){let e=a.pop();if(!(!e||i.has(e.guid))){if(i.add(e.guid),e.parentNode?.isStateGroup){if(a.push(e.parentNode),!r.followInstances)continue}else if("SYMBOL"===e.type&&(n.push(e.guid),!r.followInstances))continue;if(!e.isStateGroup||(n.push(e.guid),r.followInstances)){if(r.followInstances){if("INSTANCE"===e.type&&e.symbolId){let r=(0,l.Ny)(e.symbolId);r&&a.push(r)}a.push(...(0,l.Au)(e.guid,["INSTANCE","COMPONENT","COMPONENT_SET"]))}else a.push(...(0,l.Au)(e.guid,["COMPONENT","COMPONENT_SET"]))}}}return n.map(e=>(0,l.cl)(e)).filter(Boolean)}(e,r)}function k(e){return(0,l.Au)(e.guid,["FRAME","INSTANCE"]).filter(e=>g.test(e.name)&&!(0,l.oJ)(e))}function M(e){switch(e){case"VARIANT":return 0;case"TEXT":return 1;case"BOOLEAN":return 2;case"INSTANCE_SWAP":return 3;case"GROUPED_INSTANCE_SWAP":return 4;case"IMAGE":return 5;case"NESTED_INSTANCE":return 6;default:return 7;case"SLOT":return 8}}function F(e,r){let n=M(e.def.type),i=M(r.def.type);return n!==i?n-i:"ARRAY"===e.devFriendlyProp.type&&"ARRAY"===r.devFriendlyProp.type?e.devFriendlyProp.index-r.devFriendlyProp.index:0}function x(e,r=!0){let n=e.devFriendlyProp,a=r&&e.isOptional?"?":"";switch(n.type){case"SIMPLE":case"SIMPLE_CHOICE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":return`${n.key}${a}`;case"ARRAY":if((0,o.kc)().first_draft_ts_arrays)return`${n.key}${a}`;return`${n.nonArrayKey}${a}`;case"DERIVED_BOOLEAN":return"";default:(0,i.assertNever)(n)}}function U(e){switch(e.devFriendlyProp.type){case"DERIVED_BOOLEAN":return"";case"SIMPLE":case"SIMPLE_CHOICE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":return e.typeRepr.typeName;case"ARRAY":if((0,o.kc)().first_draft_ts_arrays){if(e.typeRepr.typeName.startsWith("{"))return`(${e.typeRepr.typeName})[]`;return`${e.typeRepr.typeName}[]`}return e.typeRepr.typeName;default:(0,i.assertNever)(e.devFriendlyProp)}}function B(e){let r=[],n=new Set;for(let i of e){let e=x(i,!1);!e||n.has(e)||(r.push(i),n.add(e))}return r}},853069:(e,r,n)=>{"use strict";n.d(r,{$x:()=>l,C:()=>o,VV:()=>c,iR:()=>u,vR:()=>d});var i=n(202655),a=n(747202);let o="Icons",s=[o],l="Unknown";function c(e){var r;return r=(r=e).endsWith("s")?r.slice(0,r.length-1):r,`Custom${(0,a.Sn)(r)}`}function d(e){return u(e.componentGroupPath)}function u(e){for(let r of s)if((0,i.Se)(e,r))return r;return null}},503796:(e,r,n)=>{"use strict";n.d(r,{hP:()=>m,zD:()=>_}),n(411855),n(341092);var i=n(238267),a=n(86625);n(966712);var o=n(939863),s=n(574724),l=n(15859);n(198868);var c=n(118034);n(830335),n(55069);var d=n(479296);n(558409);var u=n(747202);let p=e=>({prompt:e.description,negativePrompt:"blurry, bad",cfgScale:8,seed:Math.floor(1e4*Math.random()),height:e.size.height,width:e.size.width,numImages:1}),m=(0,d.n)(async(e,r,n=!1)=>{let i=(0,u.Lp)({clientLifecycleId:r}),a=(await s.Ay.design.generateImages({...p(e),markUserAction:n},i)).images[0];return`data:image/png;base64,${a}`});async function h({node:e,base64:r,name:n,scaleMode:o,backgroundFill:s,shouldContinueStream:d}){if(!e.isAlive())return;let u=await (0,c.xF)(r,["*"]),p=await (0,l.UD)(u,"image/png",n);if(!e.isAlive()||!d())return;let m=[...e.fills];a.l7.ai("first-draft-set-image-fill",()=>{e.insertImageInFillPaint(p)});let h=e.fills[m.length],_=(0,i.joinBytesIntoHex)(h.image?.hash||[]);return a.l7.ai("first-draft-set-image-fill",()=>{h.imageScaleMode=o,e.fills=function(e,r){let n=e.findIndex(e=>"IMAGE"===e.type);return n>=0?e.map((e,i)=>i===n?r:e).flat():r}(m,s?[s,h]:[h]),e.name=n}),_}async function _({node:e,shouldContinueStream:r=()=>!0}){await h({node:e,base64:"https://static.figma.com/uploads/ea5973fed84d89957eddd325cdb8549719adbc15",shouldContinueStream:r,name:(0,o.t)("ai_image_tools.blocked"),scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}})}async function g(e){let r=document.createElement("canvas"),n=r.getContext("2d");await new Promise((i,a)=>{let o=new Image;o.onload=function(){r.width=o.naturalWidth,r.height=o.naturalHeight,n.drawImage(o,0,0),i()},o.onerror=a,o.src=e});let i=r.width,a=r.height,o=n.getImageData(0,0,i,a),s=0,l=a,c=0,d=i,u=(e,r)=>0===o.data[r*i*4+4*e+3],p=e=>{for(let r=c;r<d;r++)if(!u(r,e))return!1;return!0},m=e=>{for(let r=s;r<l;r++)if(!u(e,r))return!1;return!0};for(;s<l&&p(s);)s++;for(;l-1>s&&p(l-1);)l--;for(;c<d&&m(c);)c++;for(;d-1>c&&m(d-1);)d--;let h=n.getImageData(c,s,d-c,l-s),_=r.ownerDocument.createElement("canvas");return _.width=h.width,_.height=h.height,_.getContext("2d").putImageData(h,0,0),_.toDataURL()}},207204:(e,r,n)=>{"use strict";n(341092);var i=n(675678),a=n(587670),o=n(86625);n(595991);var s=n(707458);n(966712);var l=n(776621),c=n(27087),d=n(44892);n(457630);var u=n(640209),p=n(479296);n(247368);var m=n(853069);n(503796);var h=n(747202);function _(e,r,n){let i;let s=(0,h._F)(e,["FRAME","INSTANCE"]);i="LOCAL"===r.type?{type:a.AZ4.LOCAL,key:a.XJn.getKitKey(r.pageId)||""}:{type:a.AZ4.LIBRARY,key:r.key},o.l7.ai("first-draft-set-native-field",()=>{for(let e of s)e.firstDraftData={generationId:n??"",kit:i}})}(0,p.n)(async function({dsKit:e,instanceNode:r,iconDescription:n,clientLifecycleId:c}){let p;if(!r.symbolId)return;let h=s.q.instance,g=h.get(r.symbolId);if(!g||g.isState)return;let{key:f,version:E}=(await u.Gh.getFirstDraftMatchGroup({kit_key:e.key,is_local:!1,group_name:m.C,description:n})).data.meta;if(!f){(0,l.$D)(i.FigmaTeam.AI_GENERATION,Error("first-draft: Grouped components: Could not find component for grouped component"),{extra:{dsKit:e,iconDescription:n,mainComponentId:g.guid}});return}let y=E?`/component/${f}/canvas?ver=${E}`:`/component/${f}/canvas`;if(!(p=await d.Eo.getCanvas({canvas_url:y})))return;let b=a.NfO.deserializeProductComponentFromBuffer(f,p),I=h.get(b);I&&"SYMBOL"===I.type&&o.l7.ai("first-draft-swap-grouped-component",()=>{r.swapComponent(I),_(r,e,c)})});(0,p.n)(async function(e,r){let n=await c.Ay.post(`/api/first_draft/kit_contents/${e.key}/detach_info`,{keys:r});return n.data?.meta?.should_detach??[]})},284538:(e,r,n)=>{"use strict";n.d(r,{Qy:()=>u,v$:()=>p});var i=n(587670),a=n(86625),o=n(707458),s=n(747202),l=n(356390),c=n(395701),d=n(292404);function u(e,r=!1){if(0===e.length)return;let n=o.q.instance;if(r){let r=function(e){let r=o.q.instance.getCurrentPage()?.childrenNodes.find(r=>"SECTION"===r.type&&r.name===e);if(r)return r;{let r=h(o.q.instance.getCurrentPage());return a.l7.user("create-section",()=>{let n=o.q.instance.createNode("SECTION");return n.name=e,n.relativeTransform={...n.relativeTransform,m02:r.right()+100,m12:r.top()},n})}}(s.C);for(let n of e)!function(e,r){let n=i.XJn.findIcons(e.guid),a=o.q.instance,s=n.map(e=>a.get(e)),l={x:h(r).right()+50,y:50},c={};for(let e of s){if(!e)continue;let n=i.XJn.findSimilarNodes(e.guid,r.guid,!1,!0,!1),o=n[0]?a.get(n[0]):null;o||(o=a.createComponentFromNode(e.clone()),r.appendChild(o),o.relativeTransform={...o.relativeTransform,m02:l.x,m12:l.y},l.y+=o.size.y+20),c[e.guid]=o.guid,m(e,o)}}(n,r)}let l=e[0],c=l.absoluteBoundingBox,d=n.createComponentFromNode(l.clone());n.getCurrentPage()?.appendChild(d),d.x=c.x+c.w+200,d.y=c.y,p(e,d)}function p(e,r){for(let n of e)m(n,r);l.Y5.commit()}function m(e,r){let n=e.parentNode;if(!n||n.isPrimaryInstance||n.isInstanceSublayer)return;let a=n.childrenGuids.findIndex(r=>r===e.guid),s=r.createInstance(),l=o.q.instance.get(s);if(!l)return;l.materializeDescendants();let c=i.XJn.applyOverridesToInstanceToMatchNode(s,e.guid);return n.insertChild(l,a+1),"NONE"===n.stackMode&&(l.x=e.x,l.y=e.y),e.removeSelfAndChildren(),c}function h(e){let r=null;for(let n of e.childrenNodes){let e=new c.r(new d.M(n.x,n.y),new d.M(n.size.x,n.size.y));r=r?r.unionWith(e):e}return r??new c.r}},599280:(e,r,n)=>{"use strict";n.d(r,{Hj:()=>_});var i=n(675678),a=n(587670);n(966712);var o=n(717037),s=n(776621),l=n(999202),c=n(173454),d=n(640209),u=n(776047),p=n(642481);function m(e,r){if(!r)return{publishAssets:[],unpublishAssets:[]};let n=new Set(r.added.concat(r.modified)),i=[],a=r.removed;return e.forEach(e=>{n.has(e.key)&&i.push(e)}),{publishAssets:i,unpublishAssets:a}}function h(e){return e&&e!==c.E8.DELETED&&e!==c.E8.NOT_STAGED}async function _(e,r,n,i){let o=a.XJn.getKitKey(e);if(!o)return;let c=(0,l.LQ)(e);if(0===c.length)return;let u=n.publishType,_=u===p.tf.LOCAL_GENERATION,f=c.reduce((e,r)=>((u!==p.tf.LIBRARY_PUBLISH||h((n.localComponents[r.componentId]||n.localStateGroups[r.componentId])?.status))&&r.version&&(e[r.key]=r.version),e),{}),E=(0,l.vg)(e),y=E.reduce((e,r)=>((u!==p.tf.LIBRARY_PUBLISH||h(n.localComponents[r.componentId]?.status))&&r.version&&(e[r.key]=r.version),e),{}),b=a.XJn.getLocalExamples(e,c),I=b.reduce((e,r)=>(e[r.key]=r.version,e),{}),T=(0,l.pX)(),v={};T&&(u===p.tf.LIBRARY_PUBLISH&&h(n.localVariableSets[T.nodeId]?.status),v[T.key]=T.version);let S=await d.Gh.postFirstDraftPublishStatus({productComponentKeyToVersion:f,groupedComponentKeyToVersion:y,exampleKeyToVersion:I,variableSetKeyToVersion:v,publishType:u,kitKey:o}),{publishAssets:w,unpublishAssets:A}=m(c,S.data.meta.product_component_status),{publishAssets:N,unpublishAssets:C}=m(E,S.data.meta.grouped_component_status),{publishAssets:O,unpublishAssets:L}=m(b,S.data.meta.example_status),R=await g(O),P={};for(let e of O){let n=(0,l.Sd)(r,e);n&&(P[e.key]=n)}let{publishSets:D,unpublishSets:k}=function(e,r){if(!r)return{publishSets:[],unpublishSets:[]};let n=r.removed;return{publishSets:e.filter(e=>!n.includes(e.key)),unpublishSets:n}}(T?[T]:[],S.data.meta.variable_set_status);if(D.length>0&&!i){(0,s.x1)("First draft publish","Skipping kit publish because no theme variables were supplied");return}return{kit:{name:r,key:o,is_local:_},publish_product_components:w.map(e=>({name:e.name,jsx_name:e.jsxName,key:e.key,version:e.version,description:e.description,type_info:{jsx_name:e.jsxName,type_str:e.typeStr,prefix_types:e.prefixTypes,prefix_comments:e.prefixComments,description:e.description,type_info_version:p.Q6}})),unpublish_product_components:A,publish_grouped_components:N.map(e=>({name:e.name,key:e.key,version:e.version,description:e.description,group_name:e.groupName})),unpublish_grouped_components:C,publish_examples:O.map(e=>({key:e.key,version:e.version,example_info:{componentKeys:e.componentKeys,componentJsxNames:e.componentJsxNames,nodeId:e.nodeId,name:e.name,jsxInfo:P[e.key]??null},thumbnail_url:R[e.key]})),unpublish_examples:L,publish_variable_sets:i?D.map(e=>({key:e.key,name:e.name,version:e.version,theme_info:{theme_info_version:p.$5,customizable_variables:i,modes:e.modes}})):[],unpublish_variable_sets:k}}async function g(e){let r={};if(0===e.length)return r;let n={};for(let r of e){let[e,i]=a.Vzr.generateThumbnailForNode(r.nodeId,768,768,1,{});n[r.key]=i}let l=(await u.b.getUploadThumbnailsPresignedPostUrls(Object.keys(n).length)).data.meta.presigned_posts;return l.length<Object.keys(n).length?(0,s.$D)(i.FigmaTeam.AI_GENERATION,Error("Mismatch between number of thumbnails and presigned URLs")):await Promise.allSettled(Object.entries(n).map(async([e,n],a)=>{let{url:c,fields:d}=l[a];try{let a=await (0,o.E)(i.FigmaTeam.AI_GENERATION,"uploadThumbnails",c,d,n,"application/octet-stream");r[e]=a}catch(e){(0,s.$D)(i.FigmaTeam.AI_GENERATION,Error("Unable to upload example thumbnail to S3"))}})),r}},104064:(e,r,n)=>{"use strict";n(86625),n(707458),n(568214),n(711376)},850213:(e,r,n)=>{"use strict";n.d(r,{Cr:()=>o,ZO:()=>a,k_:()=>i}),n(675678),n(587670),n(86625),n(656020),n(595991),n(707458),n(776621),n(572206),n(202655),n(207204),n(747202),n(356390),n(931770),n(763764),n(33604);let i=6,a={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/content-primary",cornerRadius:"\u2726/cornerRadius/small",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"},o={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/text-default",cornerRadius:"\u2726/cornerRadius/medium",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"}},277080:(e,r,n)=>{"use strict";n(346124);var i=(e=>(e.LIGHT="light",e.DARK="dark",e))(i||{}),a=(e=>(e.DEFAULT="default",e.BRAND="brand",e))(a||{}),o=(e=>(e.BG="bg",e.CONTENT="content",e.BORDER="border",e))(o||{}),s=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(s||{})},763764:(e,r,n)=>{"use strict";n(597616),n(568214),n(138392),n(776621),n(277080)},33604:(e,r,n)=>{"use strict";n(86625),n(656020),n(568214),n(708389),n(749401),n(801886),n(104064),n(277080),n(763764);var i=(e=>(e.Mobile="mobile",e.Website="website",e))(i||{})},747202:(e,r,n)=>{"use strict";n.d(r,{Au:()=>h,C:()=>v,Lp:()=>w,Ny:()=>f,Sn:()=>S,Uk:()=>A,_F:()=>N,cl:()=>b,g5:()=>_,j_:()=>y,l8:()=>I,lI:()=>g,n6:()=>T,oJ:()=>function e(r){let n=r.parentNode;return!!n&&("INSTANCE"===n.type||e(n))},yu:()=>E}),n(566418);var i=n(587670),a=n(595991),o=n(707458),s=n(38329),l=n(374626);n(776621);var c=n(825871),d=n(378260),u=n(106757),p=n(335682),m=n(49116);function h(e,r,n,i){if(!e)return[];let a=i??o.q.instance,s=a.get(e);if(!s)return[];let l=s.findAllWithCriteriaGUIDs({types:r,...n}),c=[];for(let e of l){let r=a.get(e);r&&c.push(r)}return c}function _(e){let r=a.z.instance.get(e);return r?h(r.guid,["INSTANCE"]):[]}function g(){return o.q.instance.getCurrentPage()}function f(e){return o.q.instance.get(e)}function E(e){if(!e.symbolId)return null;let r=o.q.instance.get(e.symbolId);return r?r.isState?r.parentGuid:r.guid:null}function y(e){let r=o.q.instance.get(e);for(;r&&"SYMBOL"!==r.type;)r=r.parentNode;return r?.guid??null}function b(e){let r=o.q.instance.get(e);return r?.type==="SYMBOL"||r?.isStateGroup?r:null}function I(e){let r=o.q.instance,n=i.Egt.getAssetKeyForPublish(e.guid),a=(0,m.m3)(s.D.getState())[n];if(a)for(let n of e.reversedChildrenGuids){let e=r.get(n);if(e&&e.componentKey===a.default_state_key)return e}let l=i.glU.getDefaultStateForLocalStateGroup(e.guid);return l&&void 0!==r.get(l)?r.get(l):null}function T(e,r){return(e=e.replace(/[^0-9a-z]/gi,"").toLowerCase())===(r=r.replace(/[^0-9a-z]/gi,"").toLowerCase())}n(227838),n(15270);let v="Icons";function S(e,r){return e=(e=e.replace(/[^0-9a-z]/gi,"")).charAt(0).toUpperCase()+e.substr(1),!r||e.startsWith(r)?e:`${r}${e}`}function w({clientLifecycleId:e}){return{orgId:l.zl.get(d._s)||null,teamId:l.zl.get(p.As)||null,fileKey:l.zl.get(p.ze)||null,userId:l.zl.get(u.kS)||null,clientLifecycleId:e,trackingSessionId:(0,c.f)()}}function A(e){return(e.isStateGroup?e.sharedStateGroupVersion:e.sharedSymbolVersion)??""}function N(e,r,n,i){let a=[];if(r.includes(e.type)){if(n){if(n.sharedPluginData){let r=e.getSharedPluginDataKeys(n.sharedPluginData.namespace),i=n.sharedPluginData.keys||[];(0===i.length&&r.length>0||r.some(e=>i.includes(e)))&&a.push(e)}}else a.push(e)}return a.push(...h(e.guid,r,n,i)),a}},516398:(e,r,n)=>{"use strict";n.d(r,{C_:()=>d,WU:()=>h,cw:()=>m,fB:()=>g,hx:()=>_});var i=n(411855);n(188507);var a=n(652894),o=n(121913);n(38329),n(966712);var s=n(498750),l=n(563706);n(738269),n(22774),n(529906),n(239671),n(233890),n(373119),n(611978);let c=[];function d(e,r){i.useEffect(()=>{if(r)return;let n=e.current;if(n)return function(e,r){let n={element:e};if(!c.length){c.push(n);return}for(let r=0;r<c.length;r++){let i=c[r].element.compareDocumentPosition(e);if(i===Node.DOCUMENT_POSITION_PRECEDING||i===Node.DOCUMENT_POSITION_CONTAINS){if(r>0&&c[r-1].element===e)return;c.splice(r,0,n);return}}c.push(n)}(n),()=>{(function(e){let r=c.findIndex(r=>r.element===e);c.splice(r,1)})(n)}},[e,r])}function u(e){var r;if(e.focus)return e.focus();let n=((r=e.element)?(0,a.Kr)(r,{getShadowRoot:!0})[0]:null)||e.element;return n?.focus(),n}function p(e){for(let r=0;r<c.length;r++)if(c[r].element.contains(document.activeElement)){let n=u("forward"===e?c[(r+1)%c.length]:c[0===r?c.length-1:r-1]);if(n)return n}return u("forward"===e?c[0]:c[c.length-1])}function m(e){p("backward"),(0,o.f)(o.h.FOCUS_CYCLE_PREVIOUS_AREA,{key:e})}function h(e){p("forward"),(0,o.f)(o.h.FOCUS_CYCLE_NEXT_AREA,{key:e})}function _(e){let{e:r,onClickHandler:n,onEscapeHandler:i}=e;n&&r.keyCode===s.Uz.ENTER&&n(r),i&&r.keyCode===s.Uz.ESCAPE&&i(r)}function g(e){return function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&0===(0,s.sN)(e)||r&&"ArrowRight"===e.key}(e)||function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT|s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT)||r&&"ArrowLeft"===e.key}(e)}},875847:(e,r,n)=>{"use strict";n.d(r,{B_:()=>h,CI:()=>f,D:()=>c,Gi:()=>u,N5:()=>E,SS:()=>b,T9:()=>d,VA:()=>m,cU:()=>I,d:()=>p,gj:()=>_,jd:()=>v,oq:()=>y,sp:()=>g,ye:()=>T});var i=n(966712);n(915440),n(391388),n(279453);var a=n(428467),o=n(451e3),s=n(173454),l=n(668860);function c(e,r){return u(e[r])}function d(e){let r=!!e&&""===e.path;return(0,i.kc)().ps_benchmark?r:r&&!e.teamId}function u(e){let r=!!e&&""===e.path;return(0,i.kc)().ps_benchmark?r:r&&!e.team_id}function p(){return`temp-${+new Date}`}function m(e){return(0,i.kc)().ps_benchmark?e?.path==="":e?.path===""&&!e?.teamId}function h(e){return e?.path===""&&!!e?.teamId}function _(e,r,n,i){if(!e)return null;if(i)return r[i.drafts_folder_id]||null;for(let i in r){let a=r[i],o=n[i]?n[i][e]:null;if(!a.teamId&&""===a.path&&null==a.orgId&&o&&o.level===l.e6.OWNER)return a}return null}function g(e){return e&&!e.team_id&&""!==e.path&&!!e.org_id}function f(e){return e?.path===""?(0,s.Tb)():e?.path}function E(e,r){return null!=r&&r in e}function y(e,r){let n=r.folders[e];if(n&&n.org_id)return n.org_id;if(n&&n.team_id){let e=r.teams[n.team_id];if(e&&e.org_id)return e.org_id}}function b(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function I(e,r,n,s){if(!(0,i.kc)().ps_benchmark)return(0,o.EE)(e,r);let l=n&&(0,a.canViewTeam)(n,s);return r?`${location.origin}/files/${r}/project/${e}`:l?`${location.origin}/files/team/${n}/project/${e}`:s.user?.personal_drafts_folder_id===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function T(e){return!!e&&!!e.team_id&&!e.path}function v(e){return!!e&&!!e.teamId&&!e.path}n(671653)},21067:(e,r,n)=>{"use strict";n.d(r,{Zb:()=>g});var i=n(587670),a=n(568214),o=n(297666),s=n(939863),l=n(392592),c=n(279145),d=n(913964),u=n(774191),p=(e=>(e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.RIGHT=4]="RIGHT",e[e.LEFT=8]="LEFT",e[e.UP_RIGHT=5]="UP_RIGHT",e[e.UP_LEFT=9]="UP_LEFT",e[e.DOWN_RIGHT=6]="DOWN_RIGHT",e[e.DOWN_LEFT=10]="DOWN_LEFT",e))(p||{}),m=(e=>(e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e))(m||{}),h=(e=>(e[e.NONE=0]="NONE",e[e.DECREASED=1]="DECREASED",e[e.INCREASED=2]="INCREASED",e))(h||{});class _{constructor(e){this.store=e,this.debounceNodeResizeUpdate=(0,o.s)(e=>{this.announceDomChange(i.x8F.NODE_RESIZED,e);let r=i.AlE.getActiveDocument();i.yGz.resetStoredSelectedNodeBounds(r)},200),this.debounceNodeMovementUpdate=(0,o.s)(e=>{this.announceDomChange(i.x8F.NODE_MOVED,e);let r=i.AlE.getActiveDocument();i.yGz.resetStoredSelectedNodeBounds(r)},200)}announceDomChange(e,r){let n=this.store.getState();if(!n.screenreader.enabled)return;let a=function(e,r,n){let a=r.targetNodeType?f(r.targetNodeType):"";switch(e){case i.x8F.NODE_CREATED:if(r.targetNodeType===i.Z6A.STAMP&&r.stickableHostType)return(0,s.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:f(r.stickableHostType)});return(0,s.t)("fullscreen.accessibility.node_created_announcement",{node_type:a});case i.x8F.NODE_DELETED:return r.multiSelection?(0,s.t)("fullscreen.accessibility.multiple_node_deleted_announcement"):(0,s.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:a});case i.x8F.TEXT_SELECTION:return(0,s.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:a});case i.x8F.TOOL:if(r.targetNodeType===i.Z6A.STAMP)return;return r.targetNodeType!==i.Z6A.NONE?(0,s.t)("fullscreen.accessibility.tool_selected",{nodeType:a,shortcut:(0,c.c1)(n,"toggle-menu")}):(0,s.t)("fullscreen.accessibility.tool_unselected");case i.x8F.TABLE_CELL_TEXT_SELECTION:if(null!=r.tableCellCol&&null!=r.tableCellRow)return(0,s.t)("fullscreen.accessibility.next_table_cell_announcement",{r:r.tableCellRow,c:r.tableCellCol});return(0,s.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:a});case i.x8F.NODE_RESIZED:let o,l,d;let u=r.nodeSizeDelta;if(!u)return;let p=0,m=0,h=0;switch(0!==u.x&&(p|=1,m=u.x>0?2:1),0!==u.y&&(p|=2,h=u.y>0?2:1),p){case 0:return;case 1:o=(0,s.t)("fullscreen.accessibility.node_resize_horizontal"),l=E(m),d=Math.abs(u.x);break;case 2:o=(0,s.t)("fullscreen.accessibility.node_resize_vertical"),l=E(h),d=Math.abs(u.y);break;default:let _=Math.abs(u.x),g=E(m),y=Math.abs(u.y),b=E(h);return(0,s.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:a,resizedComparisonX:g,nodeResizeXDelta:(0,s.t)("fullscreen.accessibility.node_unit",{numUnits:_}),resizedComparisonY:b,nodeResizeYDelta:(0,s.t)("fullscreen.accessibility.node_unit",{numUnits:y})})}return(0,s.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:a,nodeSizeDelta:d,resizeComparison:l,nodeDirection:o});case i.x8F.NODE_MOVED:let I,T,v=0,S=r.nodeMovementDelta;if(!S)return;switch(S.x>0?v|=4:S.x<0&&(v|=8),S.y<0?v|=1:S.y>0&&(v|=2),v){case 0:return;case 1:I=(0,s.t)("fullscreen.accessibility.node_movement_up"),T=Math.abs(S.y);break;case 2:I=(0,s.t)("fullscreen.accessibility.node_movement_down"),T=Math.abs(S.y);break;case 4:I=(0,s.t)("fullscreen.accessibility.node_movement_right"),T=Math.abs(S.x);break;case 8:I=(0,s.t)("fullscreen.accessibility.node_movement_left"),T=Math.abs(S.x);break;default:let w=(4&v)==4?(0,s.t)("fullscreen.accessibility.node_movement_right"):(0,s.t)("fullscreen.accessibility.node_movement_left"),A=Math.abs(S.x),N=(1&v)==1?(0,s.t)("fullscreen.accessibility.node_movement_up"):(0,s.t)("fullscreen.accessibility.node_movement_down"),C=Math.abs(S.y);return(0,s.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:a,nodePositionXDelta:(0,s.t)("fullscreen.accessibility.node_unit",{numUnits:A}),nodeDirectionX:w,nodePositionYDelta:(0,s.t)("fullscreen.accessibility.node_unit",{numUnits:C}),nodeDirectionY:N})}return(0,s.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:a,nodePositionDelta:T,nodeDirection:I});default:return}}(e,r,n.mirror.appModel.keyboardShortcuts),o=function(e){switch(e){case i.x8F.NODE_CREATED:case i.x8F.NODE_DELETED:return"creation-deletion";case i.x8F.NODE_RESIZED:return"resize";case i.x8F.NODE_MOVED:return"movement";case i.x8F.TEXT_SELECTION:case i.x8F.TABLE_CELL_TEXT_SELECTION:return"selection";case i.x8F.TOOL:return"tool";default:return}}(e);a&&o&&this.store.dispatch(l.F.enqueue({type:`accessibility-screen-reader-announcement-${o}`,message:a,role:"status",timeoutOverride:500}))}debounceNodeResizeUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedResizeUpdate(e)}debounceNodeMovementUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedMovementUpdate(e)}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getAPCAContrast(e,r){return(0,a.yi)((0,u.aH)(e),(0,u.aH)(r))}}function g(e){new _(e)}function f(e){let r=i.Z6A[e];return(0,d.r)(r)}function E(e){switch(e){case 1:return(0,s.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,s.t)("fullscreen.accessibility.node_resize_increase");default:return(0,s.t)("fullscreen.accessibility.node_resize_none")}}},951546:(e,r,n)=>{"use strict";n.d(r,{WY:()=>f});var i=n(587670),a=n(802691),o=n.n(a),s=n(38580),l=n(374626),c=n(776621),d=n(356390),u=n(967879),p=n(173454);p.PW.RESPONSIVE_SET,i.PWo.RESPONSIVE_SET;let m={[i.PWo.RESPONSIVE_SET]:{[i.Ocq.LOCAL]:u.X1,[i.Ocq.SUBSCRIBED]:u._t}};function h(e,r){let n=m[e][r],a=(0,s.eU)({}),c=(0,l.FZ)(a,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.assetId]=r,e),{})}}if("removed"in r){let n=new Set(r.removed);return o()(e,e=>e&&!n.has(e.assetId))}return"reset"in r?{}:e}),u=`assetByKeyAtom(${i.PWo[e]}, ${i.Ocq[r]})`;return c.debugLabel=u,c.onMount=a=>{var o;let s=()=>{a({changed:i.P5M.getAllAssets(e,r).map(n).filter(e=>null!==e)})};d.Y5.isReady()?s():d.Y5.onReady().then(s);let l=(o=e=>{a(e)},_[e][r]=o,()=>{_[e][r]=null});return()=>{l(),a({reset:!0})}},c}p.PW.RESPONSIVE_SET,h(i.PWo.RESPONSIVE_SET,i.Ocq.LOCAL),h(i.PWo.RESPONSIVE_SET,i.Ocq.SUBSCRIBED);let _={[i.PWo.RESPONSIVE_SET]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null}};class g{syncAddedOrChangedAssets(e,r,n){if(r===i.Ocq.SUBSCRIBED){let a=m[e]?.[i.Ocq.SUBSCRIBED];if(!a){(0,c.x1)("design-systems",`No parser found for ${e} and ${r}`);return}_[e]?.[i.Ocq.SUBSCRIBED]?.({changed:n.map(a).filter(e=>null!==e)})}else if(r===i.Ocq.LOCAL){let a=m[e]?.[i.Ocq.LOCAL];if(!a){(0,c.x1)("design-systems",`No parser found for ${e} and ${r}`);return}_[e]?.[i.Ocq.LOCAL]?.({changed:n.map(a).filter(e=>null!==e)})}else(0,c.x1)("design-systems",`Invalid subscription status for AssetMirror: ${r}`)}syncRemovedAssets(e,r,n){_[e]?.[r]?.({removed:n})}resetMirrorCache(){for(let e of Object.values(_))for(let r of Object.values(e))r?.({reset:!0})}}function f(){new g}},106757:(e,r,n)=>{"use strict";n.d(r,{UQ:()=>l,kS:()=>s,p9:()=>o});var i=n(38580),a=n(529928);let o=(0,a.bt)(e=>e.user),s=(0,i.eU)(e=>e(o)?.id);(0,i.eU)(e=>e(o)?.created_at),(0,a.bt)(e=>e.userStateLoaded);let l=(0,a.bt)(e=>e.isStarterUser)},752353:(e,r,n)=>{"use strict";n.d(r,{gh:()=>C});var i=n(587670),a=n(707458),o=n(776250),s=n(38329),l=n(966712),c=n(38580),d=n(374626),u=n(776621),p=n(47506),m=n(939863),h=n(392592),_=n(988022),g=n(47161),f=n(978757),E=n(382143),y=n(434507),b=n(198868);let I=(0,c.eU)(new Set),T=(0,c.eU)(new Set),v=(0,c.eU)("");function S(e){let r=e=>{let n=0;for(let i of e)"FRAME"===i.type&&(n+=1),"children"in i&&(n+=r(i.children));return n};return r(e)}function w(e,r=1){let n=JSON.parse(JSON.stringify(e));return n.length<1?n:r<1&&"opacity"in n[0]?n.map(e=>({...e,opacity:e.opacity*r})):n}function A(e,r,n,i=!0,a=1){if(Array.isArray(e[n])&&Array.isArray(r[n])){let o=i?[...w(r[n]),...w(e[n],a)]:[...w(e[n],a),...w(r[n])];r[n]=o}}class N{async autoSegmentNodesByRegion(e,r){let n=(0,b.D)(),i=[],a=[];for(let n of e){let{rootNode:e,newNodes:o}=await this.autoSegmentNodes(n,r);e&&a.push(e),o.forEach(e=>i.push(e))}d.zl.set(I,new Set(i.map(({id:e})=>e))),d.zl.set(T,new Set(a.map(({id:e})=>e))),(0,g.z)(a,i);let o=n.currentPage;return o.selection=o.selection.concat(a),!0}async autoSegmentNodes(e,r){let n;let c=(0,b.D)();try{var d;let u=performance.now(),p=(await Promise.all(e.map(e=>c.getNodeByIdAsync(e)))).filter(e=>e),_=S(p),g=function(e){let r=[...e],n=[];for(;r.length;){let e=r.pop();if(!e)break;n.push(e.id),"children"in e&&e.children.forEach(e=>{r.push(e)})}return n}(p),b=(n=await (0,f.N7)(p,c,r))?S([n]):0;if(d=b-_,(0,s.D.dispatch)(h.F.enqueue({type:"msal-frames-created",message:(0,m.t)("fullscreen.properties_panel.stack_panel.msal_crated_frames_count",{count:d})})),(0,l.kc)().ce_al_track_msal_duration&&(0,o.sx)("autolayout_auto_segment_selection",{duration_ms:performance.now()-u,selectionSizeBeforeMSAL:_,selectionSizeAfterMSAL:b},{forwardToDatadog:!0}),n){!function e(r,n){if(!r||"FRAME"!==r.type)return;for(let i of r.children)e(i,n);let a=i.Qa7.getBackgroundNodeCandidatesByGUID(r.id);if(0===a.backgroundNodes.length)return;let o=n.getNodeById(a.backgroundNodes[0]);if(r.resize(o.width,o.height),o.absoluteBoundingBox&&r.absoluteBoundingBox){let e=o.absoluteBoundingBox.x-r.absoluteBoundingBox.x,n=o.absoluteBoundingBox.y-r.absoluteBoundingBox.y;r.x+=e,r.y+=n}for(let e of a.backgroundNodes){let i=n.getNodeById(e);i&&function(e,r,n=!0,i="transferAndMaybeRemoveBackgroundNode",a=!0){if((0,E.Rm)(`${i}`,`Merging background node (${e.id}) into: ${r}`,3),e.removed)return;let o=1;a&&"opacity"in e&&(o=e.opacity),A(e,r,"fills",n,o),A(e,r,"effects",n,o),A(e,r,"strokes",n,o),"strokes"in e&&e.strokes.length>0&&(r.strokeWeight=e.strokeWeight,r.strokeJoin=e.strokeJoin,r.dashPattern=e.dashPattern,r.strokeAlign=e.strokeAlign,"strokeCap"in e&&!r.strokeCap&&(r.strokeCap=e.strokeCap),"strokeMiterLimit"in e&&(r.strokeMiterLimit=e.strokeMiterLimit),"strokeLeftWeight"in e&&"number"==typeof e.strokeLeftWeight&&0===r.strokeLeftWeight&&(r.strokeLeftWeight=e.strokeLeftWeight),"strokeRightWeight"in e&&"number"==typeof e.strokeRightWeight&&0===r.strokeRightWeight&&(r.strokeRightWeight=e.strokeRightWeight),"strokeTopWeight"in e&&"number"==typeof e.strokeTopWeight&&0===r.strokeTopWeight&&(r.strokeTopWeight=e.strokeTopWeight),"strokeBottomWeight"in e&&"number"==typeof e.strokeBottomWeight&&0===r.strokeBottomWeight&&(r.strokeBottomWeight=e.strokeBottomWeight)),"cornerRadius"in e&&"number"==typeof e.cornerRadius&&0===r.cornerRadius&&(r.cornerRadius=e.cornerRadius),"topLeftRadius"in e&&"number"==typeof e.topLeftRadius&&0===r.topLeftRadius&&(r.topLeftRadius=e.topLeftRadius),"bottomLeftRadius"in e&&"number"==typeof e.bottomLeftRadius&&0===r.bottomLeftRadius&&(r.bottomLeftRadius=e.bottomLeftRadius),"topRightRadius"in e&&"number"==typeof e.topRightRadius&&0===r.topRightRadius&&(r.topRightRadius=e.topRightRadius),"bottomRightRadius"in e&&"number"==typeof e.bottomRightRadius&&0===r.bottomRightRadius&&(r.bottomRightRadius=e.bottomRightRadius),"ELLIPSE"===e.type&&(0,y.n4)(e.width,e.height)&&(r.cornerRadius=r.width),function(e,r){if(!e||!e.boundVariables)return;let n=e.boundVariables;for(let e of["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","minWidth","maxWidth","minHeight","maxHeight","counterAxisSpacing","strokeWeight","strokeTopWeight","strokeRightWeight","strokeBottomWeight","strokeLeftWeight"]){let i=n[e];i&&r.setBoundVariable(e,i.id)}}(e,r),a&&e.remove()}(i,r,!0,"recursivelyMergeBackgroundFillToTLF")}}(n,c);let e=a.q.instance.get(n.id);return e&&!e.isTopLevelFrame()&&(n.name="Frame"),{rootNode:n,newNodes:function e(r,n){let i=[];return n.has(r.id)||i.push(r),"children"in r&&r.children.forEach(r=>{let a=e(r,n);i=i.concat(a)}),i}(n,new Set(g))}}}catch(n){(0,u.x1)("auto-layout","Error running AAL segmentation",{e:n});let r=s.D.dispatch;"GraphResolutionError"===n.name?((0,_.ds)("msal_error_try_again",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(h.F.enqueue({type:"msal-failure-graph-resolution",message:(0,m.t)("fullscreen.visual_bell.try_again_msal")}))):(c.commitUndo(),c.triggerUndo(),(0,_.ds)("msal_error_couldnt_suggest_auto_layout",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(h.F.enqueue({type:"msal-failure-other",message:(0,m.t)("fullscreen.visual_bell.could_not_suggest_auto_layout")})))}return{rootNode:null,newNodes:[]}}async makeResponsive2(e){let r=(0,b.D)();for(let n of e)for(let e of n)await (0,f.cx)(e,r);return r.commitUndo(),!0}shouldRunSimpleStackDetection(e){let r=(0,b.D)();return(0,f.sg)(e,r)}runMakeResponsiveHeuristics(e){let r=(0,b.D)();(0,f.cx)(e,r)}trackShouldShowMSALOnboarding(e){d.zl.set(v,e),(0,p.YQ)({id:"would-have-used-msal-onboarding-event"})}async destroyAllAutoLayout(e){let r=(0,b.D)(),n=await (0,f.vk)(e,r),i=s.D.dispatch,a=n>0?(0,m.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast",{numAutoLayoutsRemoved:n}):(0,m.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast-zero");return i(h.F.enqueue({message:a})),r.commitUndo(),!0}}function C(){new N}},81766:(e,r,n)=>{"use strict";n.d(r,{z4:()=>d});var i=n(587670),a=n(38329),o=n(776621),s=n(788811),l=n(63104);class c{readyToAcceptAutosaveChanges(){return!!s.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!s.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,r,n,a,o,c){let d=(0,s.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let u=d.session();return!u||(await u.enqueueAutosaveCommit({changes:e,commitPolicy:r,fileVersion:n,fileKey:a,newSessionID:i.h3O.currentSessionID(),numberOfUncleanRegisters:o,reason:c}),!0)}createAutosaveManager(e){let r=a.D.getState().user;if(!r){(0,o.Lo)("Autosave","Not creating manager for logged out user");return}(0,s.mu)(e,r.id)}destroyAutosaveManager(){(0,s.t)()}isConnected(){return s.ZG()?.managerState==="connected"}}function d(){new c}},356390:(e,r,n)=>{"use strict";let i,a,o;n.d(r,{$q:()=>m,BI:()=>a,XT:()=>c,Y5:()=>i,_W:()=>u,fT:()=>p,lQ:()=>s,s$:()=>l,uF:()=>d});let s=new Promise(e=>{o=e});function l(e){i=e,window._fullscreen_=i,o()}function c(e){a=e}function d(e){u=e}let u=null;function p(e){}function m(e){}},160402:(e,r,n)=>{"use strict";n.d(r,{Iu:()=>s}),n(587670);let i=new Set;class a{nodeBoundsChanged(){for(let e of i)e()}}let o=null;function s(){return o||(o=new a),o}},478556:(e,r,n)=>{"use strict";n.d(r,{n:()=>a}),n(587670),n(632001),n(824780);var i=n(173292);function a(e){(0,i.o)()}n(456363),n(939863),n(392592),n(772167),n(776726),n(179536)},541524:(e,r,n)=>{"use strict";n.d(r,{C4:()=>g,D2:()=>p,Er:()=>u,FJ:()=>l,H3:()=>d,cB:()=>_,cu:()=>m,fG:()=>E,fb:()=>h,gU:()=>c,l7:()=>y,yH:()=>f});var i=n(296853),a=n(851061),o=n(587670),s=n(96328);let l="<!--(figma)",c="(/figma)-->",d='<span data-buffer="'+l,u=c+'"></span>',p="<!--(figmeta)",m="(/figmeta)-->",h='<span data-metadata="'+p,_=m+'"></span>';function g(e,r,n){let i='<meta charset="utf-8">'+d+(0,a.encode)(r)+u+(0,s.hX)(n);try{e.setData("text/html",i)}catch(e){console.warn("DataTransfer failed in clipboard event")}}function f(e){let r;try{r=e.getData("text/html")}catch(e){return console.warn("DataTransfer failed in clipboard event"),null}return function(e){let r=e.indexOf(l),n=e.indexOf(c);return r>=0&&n>=0&&r<n?(0,a.decode)(e.slice(r+l.length,n)):null}(r)}function E(e,r){let n=i.w.encodeMessage({type:"STYLE",pasteFileKey:null!=e?e:void 0,sessionID:0,ackID:0,nodeChanges:[{guid:{sessionID:0,localID:0},phase:"CREATED",...r}]});return o.glU.encodeClipboardData(n)}function y(e){return i.w.decodeMessage(o.glU.decodeClipboardData(e))}},774191:(e,r,n)=>{"use strict";function i(e){let r=e.r,n=e.g,i=e.b,a=Math.min(Math.min(r,n),i),o=Math.max(Math.max(r,n),i),s=o-a,l=0;o===a?l=0:r===o?l=(n-i)/s:n===o?l=2+(i-r)/s:i===o&&(l=4+(r-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(a+o)/2;return{h:l/=360,s:o===a?0:c<=.5?s/(o+a):s/(2-o-a),l:c,a:e.a}}function a(e){let r=(e.h-Math.floor(e.h))*6,n=e.v*e.s,i=n*(1-Math.abs(r%2-1)),a=e.s<=0?0:r<1?n:r<2?i:r<3?0:r<4?0:r<5?i:n,o=e.s<=0?0:r<1?i:r<2?n:r<3?n:r<4?i:0,s=e.s<=0?0:r<1?0:r<2?0:r<3?i:r<4?n:r<5?n:i,l=e.v-n;return{r:a+l,g:o+l,b:s+l,a:e.a}}function o(e){let r=Math.max(Math.max(e.r,e.g),e.b),n=r-Math.min(Math.min(e.r,e.g),e.b);return{h:(0===n?0:r===e.r?((e.g-e.b)/n+6)%6:r===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6,s:0===r?0:n/r,v:r,a:e.a}}function s(e){return"l"in e?function(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let r=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,n=2*e.l-r,i=[0,0,0];for(let a=0;a<3;a++){let o=e.h+-(1/3*(a-1));o<0&&o++,o>1&&o--,6*o<1?i[a]=n+(r-n)*6*o:2*o<1?i[a]=r:3*o<2?i[a]=n+(r-n)*(2/3-o)*6:i[a]=n}return{r:i[0],g:i[1],b:i[2],a:e.a}}(e):a(e)}function l(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function c(e){return 255&(e>0?255*e+.5:0)}function d(e,r,n){return c(e)|c(r)<<8|c(n)<<16|-16777216}function u(e){return c(e.red)|c(e.green)<<8|c(e.blue)<<16|c(e.alpha)<<24}function p(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function m(e,r){let n=e.alpha,i=r.alpha,a=n*(1-i),o=a+i,s=a/o,l=i/o;return{red:e.red*s+r.red*l,green:e.green*s+r.green*l,blue:e.blue*s+r.blue*l,alpha:o}}function h(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function _(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function g(e,r){let n=[];for(let i=0;i<3;i++)n.push(e[i][0]*r[0]+e[i][1]*r[1]+e[i][2]*r[2]);return n}function f(e){return E({l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a})}function E(e){let r=g([[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],[e.l,e.ax,e.bx]),n=g([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],r.map(e=>e**3)),i=g([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],n).map(function(e){let r=Math.abs(e);return r>.0031308?(e<0?-1:1)*(1.055*Math.pow(r,1/2.4)-.055):12.92*e});return{r:i[0],g:i[1],b:i[2],a:e.a}}n.d(r,{I0:()=>f,Ih:()=>l,QR:()=>d,R0:()=>p,aH:()=>_,au:()=>m,bi:()=>u,kE:()=>a,oB:()=>i,oU:()=>h,oq:()=>E,qN:()=>o,w_:()=>s})},288536:(e,r,n)=>{"use strict";n.d(r,{Ep:()=>y,R6:()=>b,ZH:()=>I,il:()=>A});var i=n(411855),a=n(587670),o=n(374626),s=n(678379),l=n(192437),c=n(356390),d=n(488983),u=n(100197),p=n(601978),m=n(436576),h=n(162620),_=n(794950),g=n(410332),f=n(665723);let E=i.createContext({canvasColorProfile:a.RYP.SRGB,documentColorProfile:a.ywP.LEGACY,documentExportColorProfile:a.RYP.SRGB});function y(){return i.useContext(E).canvasColorProfile}function b(){return i.useContext(E).documentColorProfile}let I=E.Consumer;function T(e){let{children:r,colorManagementStateJs:n}=e,o=(0,u.ut)(n?.documentColorProfile(),a.ywP.LEGACY),s=(0,m.H)(o),{colorProfilePreference:l}=(0,f.jK)(),c=i.useMemo(()=>({documentColorProfile:o,documentExportColorProfile:(0,h.j)(o,l),canvasColorProfile:s}),[l,o,s]);return i.createElement(E.Provider,{value:c},r)}function v(e){return(0,f.jK)(),i.createElement(T,{colorManagementStateJs:a.H4l},e.children)}function S({target:e,viewer:r}){let[n,a]=i.useState(null),o=i.useCallback(()=>{if(n)return!0;let r=(0,p.dX)(e);if(r){let n=null;switch(e){case"fullscreen":case"mobile-viewer":n=(0,s.ap)()?r.getContext("webgl2"):r.getContext("webgl");break;case"prototype":case"mirror":n=(0,s.WQ)()?r.getContext("webgl2"):r.getContext("webgl")}return a(n),!0}return!1},[e,n]);i.useEffect(()=>{if(!o())switch(e){case"fullscreen":case"mobile-viewer":c.Y5.onReady().then(()=>{o()});break;case"prototype":case"mirror":r&&r.on("documentIsLoaded",()=>{o()})}},[o,e,r]);let l=y();return i.useEffect(()=>{n&&_.q.queueSwitchWebglColorSpace(n,l,e)},[l,e,n]),null}function w({viewer:e,target:r}){return i.createElement(l.tH,{boundaryKey:"color-management",fallback:l.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:d.y4},i.createElement(o.An,null,i.createElement(g.C,null,i.createElement(v,null,i.createElement(S,{target:r,viewer:e})))))}function A({viewer:e}){return i.createElement(w,{target:"prototype",viewer:e})}},665723:(e,r,n)=>{"use strict";n.d(r,{YN:()=>y,eu:()=>g,hP:()=>E,it:()=>I,jK:()=>b}),n(411855);var i=n(587670),a=n(167249),o=n(38329),s=n(38580),l=n(374626),c=n(684107),d=n(853828),u=n(27087),p=n(988022),m=n(99506),h=n(585575);let _={colorProfilePreference:m.E9.DEFAULT,id:""},g=(0,a.N)("USER_UPDATE_COLOR_PROFILE"),f=(0,s.eU)(e=>{let r=e((0,c.Zx)({})),n=_.colorProfilePreference;"loading"===r.status&&void 0!==o.D&&o.D?.getState()?.user?.color_profile?n=o.D.getState().user?.color_profile:r.data?.userColorProfilePreference?.colorProfilePreference&&(n=r.data?.userColorProfilePreference?.colorProfilePreference);let i={colorProfilePreference:function(e){switch(e){case m.E9.DEFAULT:return h.M.DEFAULT;case m.E9.SRGB:return h.M.SRGB;case"display-p3":case m.E9.DISPLAY_P3:return h.M.DISPLAY_P3}}(n),id:r.data?.userColorProfilePreference?.id??_.id};return void 0!==o.D&&o.D?.getState()?.user?.color_profile!==i.colorProfilePreference&&o.D.dispatch(g({color_profile:i.colorProfilePreference})),i});function E(e){switch(e){case h.M.DEFAULT:case h.M.SRGB:return i.RYP.SRGB;case h.M.DISPLAY_P3:return i.RYP.DISPLAY_P3}}function y(){return l.zl.get(f)}function b(){return(0,l.md)(f)}function I({colorProfilePreference:e,id:r,eventName:n="user_manual_change",additionalDataToLog:i}){if(e===_.colorProfilePreference)return;!function(e){let r=o.D.getState();(0,p.uE)("color_profile_preference",r,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:r},eventName:n,additionalDataToLog:i});let a=void 0!==r,s=u.Ay.put("/api/user",{color_profile:e});if(a)d.WB()?.optimisticallyUpdate({UserColorProfilePreference:{[r]:{colorProfilePreference:e}}},s);else{let r=o.D.getState().user?.id;if(!r)return;d.WB()?.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:r,createdAt:new Date,updatedAt:new Date}}},s)}}},496201:(e,r,n)=>{"use strict";n.d(r,{YL:()=>s});var i=n(138392),a=n(774191);class o{calculateColorWithRampValue(e,r){let n=(0,i.jA)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}calculateColorWithRelativeAdjustment(e,r){let n=(0,i.Hd)((0,a.aH)(e),r);return n?(0,a.oU)(n):null}getRampValueForColor(e){return(0,i.Wn)((0,a.aH)(e))}}function s(){new o}},968783:(e,r,n)=>{"use strict";n.d(r,{vk:()=>p});var i=n(951158),a=n(980820),o=n(402603),s=n(497306),l=n(279145),c=n(378762);class d{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let u={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function p(e,r,n,i){let a,o;if("CANVAS"===e)""===(a=n).trim()&&(a="Untitled"),o=a=a.replace(/\//g,"_");else{(a=r).endsWith("/")&&(a=a.substr(0,a.length-1));let e=a.lastIndexOf("/");for(let r of(o=-1!==e?a.substr(e+1,a.length):a,i)){let e=r.substr(0,r.lastIndexOf("/"));e.length>0&&(a=e+"/"+a)}}return{name:a,title:o}}function m(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}(0,a.nF)(e=>{let r=e.getState(),n=[],a=[],h=r.mirror,_=h.sceneGraph,g=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||m(e))&&n.push(e)};if((0,i.Im)(h.sceneGraphSelection)){let e=_.get((0,l.Nf)(h.appModel));e&&((0,s.hV)(_,e,g),(0,s.hV)(_,e,e=>{let r=e.parentNode;m(e)&&null!=r&&"CANVAS"===r.type&&a.push({nodeID:e.guid,name:e.name})}))}else(0,c.y2)(_,h.sceneGraphSelection,g),(0,c.YI)(_,h.sceneGraphSelection,e=>{m(e)&&a.push({nodeID:e.guid,name:e.name})});let f="Untitled";r.openFile&&(f=r.openFile.name);let E=[],y=new d,b=new d;for(let e of n){let r=(0,s.DS)(h.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||r.length>0)continue;let n=e.exportSettings;if(null!=n)for(let r of n){if(null==r.imageType)continue;let n=(0,s.DS)(h.sceneGraph,e.guid).map(e=>e.name),{name:i,title:a}=p(e.type,e.name,f,n),o=function(e,r,n,i){let a=`${e}-${r}-${n.imageType}-${n.suffix}`;return`${a}-${i.next(a)}`}(e.guid,i,r,b),{filename:l,isDuplicate:c}=function(e,r,n,i){let a;let o=!1;""===e.trim()&&(e="Untitled"),a=`${e}${r}${n}`;let s=i.next(`${a}`);return s>0&&(a=`${e}${r}-${s}${n}`,o=!0),{filename:a,isDuplicate:o}}(i,r.suffix||"",u[r.imageType],y);E.push({itemID:o,nodeID:e.guid,title:a,filename:l,exportSetting:r,warning:c?"Name duplicated":void 0,warningTooltip:c?`Renamed to ${l}`:void 0})}}e.dispatch(o.j({items:E,frames:a}))})},927871:(e,r,n)=>{"use strict";n.d(r,{pH:()=>d});var i=n(776250),a=n(966712),o=n(27087),s=n(99506),l=n(755515);class c{constructor(e){this.store=e}trackComponentInstanceInsertion(e){let r=this.state.openFile?.key;if(null==r)return;let n=this.state.openFile?.editorType;if(n===s._Y.SLIDES||(0,a.kc)().dsa_restrict_actions_to_design&&(void 0===n||n===s._Y.WHITEBOARD))return;let i=[];for(let r in e){let n={component_key:r,count:e[r]};i.push(n)}try{o.Ay.post(`/api/component/${r}/insertions`,{insertions:i})}catch(e){}}trackComponentInstanceDetachment(e){let r=this.state.openFile,n=r?.key;if(null==r||null==n)return;let l=r.editorType;if(l===s._Y.SLIDES||(0,a.kc)().dsa_restrict_actions_to_design&&(void 0===l||l!==s._Y.DESIGN)){i.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:n,componentKey:e,editorType:l||void 0});return}try{o.Ay.post(`/api/component/${n}/detachment/${e}`)}catch(e){}}trackStyleAction(e,r){if(!(0,a.kc)().dsa_styles_variables_data_collection||!this.isInDesignFile())return;let n=[];for(let[e,i]of Object.entries(r))n.push({key:e,count:i});if(0!==n.length)try{l.PT.recordStylesAction({action:e,fileKey:this.state.openFile?.key,styles:n})}catch(e){}}trackVariableAction(e,r){if(!(0,a.kc)().dsa_styles_variables_data_collection||!this.isInDesignFile())return;let n=[];for(let[e,i]of Object.entries(r))n.push({key:e,count:i});if(0!==n.length)try{l.PT.recordVariablesAction({action:e,fileKey:this.state.openFile?.key,variables:n})}catch(e){}}isInDesignFile(){let e=this.state.openFile,r=e?.key;return null!=e&&null!=r&&e.editorType===s._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function d(e){new c(e)}},559040:(e,r,n)=>{"use strict";n.d(r,{zs:()=>a}),n(30637),n(392592);class i{constructor(e){this.store=e}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onGuardrailViolation(){this.showErrorBellInLocalDev("Edit scope guardrail violated")}}function a(e){new i(e)}},617453:(e,r,n)=>{"use strict";n.d(r,{EU:()=>b,Ku:()=>_,RU:()=>y,UK:()=>h,UX:()=>f,W_:()=>S,dP:()=>g,lK:()=>T,qw:()=>E,sT:()=>I});var i=n(587670),a=n(966712),o=n(939863),s=n(287010),l=n(396697),c=n(100197),d=n(507956),u=n(949632),p=n(567245),m=n(652051);function h(){return i.Ez5.editorPreferences()}function _(){let e=(0,d.ks)(),r=(0,c.J2)(h().colorFormat);return r===i.NVY.CSS&&e||r===i.NVY.UIColor&&!e?i.NVY.RGB:r}function g(){return(0,c.ut)(i.Ez5?.editorPreferences().sidebarSplitPosition,l.R.sidebarSplitPosition)}function f(){return(0,c.ut)(i.Ez5?.editorPreferences().devHandoffInspectSplitPosition,320)}function E(){return(0,c.ut)(i.Ez5?.editorPreferences().propertiesPanelSplitPosition,l.R.propertiesPanelSplitPosition)}function y(){return(0,c.ut)(i.Ez5?.editorPreferences().bigNudgeAmount,s._q)}function b(){return(0,c.ut)(i.Ez5?.editorPreferences().smallNudgeAmount,s.bA)}function I(){return{smallNudgeAmount:b(),bigNudgeAmount:y()}}function T(){return(0,c.ut)(i.Ez5?.editorPreferences().renderRulers,!1)}let v=[{getObservable:()=>h().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,o.t)("visual_bell.pixel_preview_enabled",{scaling:(0,u.d)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,o.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>h().renderGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.render_grid_visible"):(0,o.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>h().snapToPixelGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,o.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>h().showMasks,getMessage:e=>({message:e?(0,o.t)("visual_bell.show_masks_visible"):(0,o.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>(0,a.kc)().figjam_snap_to_dot_grid_reset?h().snapToDotGridStagingReset:h().snapToDotGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_dot_grid_enabled"):(0,o.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>h().snapToGeometry,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_geometry_enabled"):(0,o.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>h().snapToObjects,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_objects_enabled"):(0,o.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>h().showFrameGrids,getMessage:e=>(0,p.jH)()?((0,p.Gk)(),{message:(0,o.t)("visual_bell.show_frame_grids_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),i.Ez5.editorPreferences().showFrameGrids.set(!1)}}}):{message:e?(0,o.t)("visual_bell.show_frame_grids_visible"):(0,o.t)("visual_bell.show_frame_grids_hidden")}}];function S(){(0,m.Mo)(v)}},326069:(e,r,n)=>{"use strict";n.d(r,{XR:()=>c});var i=n(377750),a=n(374626),o=n(531827),s=n(883211);class l{convertEmojiNameToString(e){let r=e.toLocaleLowerCase(),n=i.dN.searchSynchronized(r).filter(e=>e.id===r);return 0===n.length?"":function(e){let r=i.il.getDefaultSkin()||1;return String.fromCodePoint(...(e.skins[r-1]?e.skins[r-1].unified:e.skins[0].unified).split("-").map(e=>parseInt(e,16)))}(n[0])}setEmojiTypeaheadQuery(e){let r=e&&e.length>1?(0,o.oQ)(e):null;a.zl.set(s.ph,r)}clearEmojiTypeaheadQuery(){a.zl.set(s.ph,null)}isShowingEmojiTypeaheadResults(){let e=a.zl.get(s.ph);return!!e?.emojis?.length}setEmojiTypeaheadImageSet(e){a.zl.set(s.KG,e)}setEmojiTypeaheadTargetRect(e,r,n){a.zl.set(s.kh,{x:e,y:r,height:n,width:0})}}function c(){new l}},812821:(e,r,n)=>{"use strict";let i;n.d(r,{CB:()=>i,eY:()=>p});var a=n(587670),o=n(38329),s=n(145519),l=n(460289),c=n(239671),d=n(301922);class u{constructor(){this._wheelActivatedAtMs=-1,this._triggerActiveWheelButtonListeners=[]}startChat(e,r,n){(0,d.q)().then(i=>{i||o.D.dispatch(s.F6({position:{x:e,y:r},source:n}))})}closeWheel(){o.D.dispatch(s.Ho())}handleShortcutPressWithType({viewportX:e,viewportY:r,source:n,openedViaHover:i,wheelType:d}){let u=o.D.getState();if("fullscreen"!==u.selectedView.view||u.selectedView.editorType!==c.nT.Whiteboard||this._wheelActivatedAtMs>0)return;this._wheelActivatedAtMs=window.performance.now();let p=u.multiplayerEmoji;"WHEEL"===p.type?(e=p.viewportX,r=p.viewportY,i=i??p.openedViaHover):i||a.glU.triggerAction("set-tool-default",null),o.D.dispatch(s.sp({wheelType:d&&("STAMP"===d?"STAMP2":"REACTION1"),isReadonly:u.mirror.appModel.isReadOnly,isJoinedToActiveVotingSession:(0,l.gR)(u),viewportX:e,viewportY:r,source:n,openedViaHover:i}))}handleShortcutPress(e,r,n){this.handleShortcutPressWithType({viewportX:e,viewportY:r,source:n})}addTriggerActiveWheelButtonListener(e){this._triggerActiveWheelButtonListeners.push(e)}removeTriggerActiveWheelButtonListener(e){let r=this._triggerActiveWheelButtonListeners.indexOf(e);r>=0&&this._triggerActiveWheelButtonListeners.splice(r,1)}handleShortcutRelease(e,r){if(this._wheelActivatedAtMs<0)return;let n=window.performance.now()-this._wheelActivatedAtMs;if(this._wheelActivatedAtMs=-1,n>300)for(let n of this._triggerActiveWheelButtonListeners)n({x:e,y:r})}updateEmojiWheelPosition(e,r){let n=o.D.getState();"fullscreen"===n.selectedView.view&&n.selectedView.editorType===c.nT.Whiteboard&&o.D.dispatch(s.sm({viewportX:e,viewportY:r}))}}function p(){i=new u}},283942:(e,r,n)=>{"use strict";n.d(r,{W0:()=>u,f7:()=>h,jr:()=>m});var i=n(587670),a=n(498750),o=n(588169),s=n(563706),l=n(946689),c=n(551608);n(801161);var d=n(356390),u=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(u||{}),p=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(p||{});function m(e,r=0,n=1){return!!function(e,r=0,n=1){if(!d.Y5||!d.Y5.isRootElementVisible())return!1;let i=e.keyCode,o=(0,a.Fo)(e);if(i===a.Uz.TAB&&(0,a.sC)(e,a.xH.SHIFT));else if(s.Ay.mac&&e.ctrlKey&&(i===a.Uz.A||i===a.Uz.B||i===a.Uz.D||i===a.Uz.E||i===a.Uz.F||i===a.Uz.H||i===a.Uz.K||i===a.Uz.L||i===a.Uz.N||i===a.Uz.O||i===a.Uz.P||i===a.Uz.T||i===a.Uz.V));else if(i===a.Uz.DELETE||i===a.Uz.BACKSPACE||i===a.Uz.NUMPAD_DELETE||i===a.Uz.SPACE||i===a.Uz.ENTER||i===a.Uz.HOME||i===a.Uz.END||i===a.Uz.PAGE_UP||i===a.Uz.PAGE_DOWN||i===a.Uz.A&&1===n);else if(o&&i===a.Uz.Z&&1===r);else if(o||e.ctrlKey)return!0;return!1}(e,r,n)&&h(e,!0)}function h(e,r=!1){let n;if("keydown"===e.type)n=i.Bx4.KEY_PRESS;else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;n=i.Bx4.KEY_RELEASE}let s=(0,o.v7)(),l={type:n,which:e.which,modifierKeys:(0,a.sN)(e),isRepeat:e.repeat,code:e.code??e.nativeEvent?.code,shouldUseLayoutAndCode:s!==i.aTn.UNKNOWN,layout:s},c=i.glU.handleKeyboardShortcut(l);return c&&e.preventDefault(),c}(0,l.ny)(m),(0,c.n)(m)},718083:(e,r,n)=>{"use strict";n.d(r,{jx:()=>a});class i{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function a(e){new i(e)}},457025:(e,r,n)=>{"use strict";n.d(r,{U2:()=>l,mr:()=>o});var i=n(172601);let a=new i.b("action");function o(e){a.trigger("action",e)}let s=new i.b("action");function l(e,r){s.trigger("action",[e,r])}},544949:(e,r,n)=>{"use strict";n.d(r,{f:()=>_});var i=n(980820),a=n(662275),o=n(974105),s=n(396226),l=n(681655),c=n(984968),d=n(300874),u=n(851363),p=n(752672),m=n(129531),h=n(836479);(0,i.nF)(e=>{if(!l.F)return;let r=e.getState(),n=(0,o.e9)(r),i=n&&n.team_id&&r.teams[n.team_id];!i||(0,c.rR)(i,{type:c.sK.ADD_DESIGN_FILE})||(0,c.rR)(i,{type:c.sK.ADD_FIGJAM_FILE})||(0,c.rR)(i,{type:c.sK.ADD_SLIDES_FILE})?e.dispatch(a.to({type:p.O})):e.dispatch(a.to({type:m.DV,data:{team:i,resource:d.vL.FILE,action:u.ZN.CREATE_FILE,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO,editorType:null}}))});let _=(0,i.nF)(e=>{l.F&&e.dispatch((0,h.u)({multiple:!1,accept:".sketch"}))})},769977:(e,r,n)=>{"use strict";n.d(r,{Aq:()=>w,Ax:()=>l,Ay:()=>O,Bb:()=>I,E_:()=>h,Fx:()=>E,H0:()=>m,IM:()=>N,JT:()=>s,NY:()=>S,QU:()=>v,Re:()=>_,Ub:()=>d,Yc:()=>A,ZG:()=>C,_t:()=>u,bH:()=>y,co:()=>b,iL:()=>T,ju:()=>c,kO:()=>g,pA:()=>p,xe:()=>f});var i=n(707458),a=n(939863),o=n(113237);let s=[],l=8,c=436,d=36,u=524,p=4,m=24,h=24,_=6,g=18,f=12,E="#C4C4C4",y=4,b=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],I={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:436},T=8*I.fontSize/14,v={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};class S{static copySummaryDataToClipboard(e,r){let n=w(e,r);navigator.clipboard.writeText(n)}}function w(e,r){let n="";return n+=`${N(r)}

`,e.forEach(e=>{switch("h2"===e.type&&(n+="\n"),e.type){case"p":case"h1":case"h2":default:n+=e.content+"\n";break;case"li":n+=`\u2022 ${e.content}
`}}),n+=`
${(0,a.t)("whiteboard.ai.summary.summary_footer_disclaimer")}`}function A(e){return e.endsWith("...")?C():e+"."}function N(e){let r=new Date,n=parseInt(e,10);return n?(r.setTime(n),(0,a.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:r})):(0,a.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}function C(){return(0,a.t)("whiteboard.ai_summary.loading_text")}function O(e,r,n){let a=r.length>0,s=n&&n.length>0;if(!a||s)return!1;let l=new i.q().get(e);return!!l&&(!function(e,r,n=!0){e.isAlive()&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(r)),n&&o.x.renderFirstPartyWidget(e.widgetId,e.guid))}(l,function(e){let r=JSON.parse(e),n=[{type:"p",context:"tldr",content:r.summary}];return r.supporting_points.forEach(({header:e,two_to_five_supporting_points:r})=>{n.push({type:"h2",content:e,context:"main_theme"}),r.forEach(e=>{n.push({type:"li",content:e,context:"supporting_point"})})}),n}(r)),!0)}},128803:(e,r,n)=>{"use strict";n.d(r,{HP:()=>g,Nd:()=>S});var i=n(587670),a=n(323762),o=n(38329),s=n(939863),l=n(677664),c=n(988022),d=n(974105),u=n(450225),p=n(476560),m=n(306133),h=n(781779);function _(e,r){let n=d.d1(o.D.getState())?.key??"";(0,c.ds)(e,n,o.D.getState(),{domain:null!=r?(0,u.vO)(r):"",linkRenderType:u.Ci.LINK_PREVIEW,userId:o.D.getState().user?.id})}var g=(e=>(e.OPEN="open",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.CONVERT_TO_TEXT="convert_to_text",e))(g||{});let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,I=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,T=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,v=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function S({figma:e}){let{widget:r}=e,{Frame:n,AutoLayout:c,Text:d,SVG:g}=r;r.register(function(){let S=r.useWidgetId(),[w]=r.useSyncedState("url",null),A=w?decodeURIComponent(w):"null",N=(0,p.l)(e,r,"thumbnailImageHash"),[C]=r.useSyncedState("thumbnailImageWidth",null),[O]=r.useSyncedState("thumbnailImageHeight",null),L=C&&O?C/O:void 0,R=(0,p.l)(e,r,"faviconImageHash"),P=!!N,D=480-(P?112:8)-32-16,[k]=r.useSyncedState("title",null),[M]=r.useSyncedState("description",null),[F]=r.useSyncedState("provider",""),x=!!k,U=!!M,B=x||U,V=!(x||U||P),G=x!==U,[H,W]=r.useSyncedState("orientation",V?"horizontal":"vertical"),K=(0,m.H)(r,"title",{name:"Inter Medium",size:16,lineHeight:22},"vertical"===H?240:D,("vertical"===H?2:1)+(G?1:0)+("Twitter"===F||"X (formerly Twitter)"===F?4:0),!1),j=(0,m.H)(r,"description",{name:"Inter",size:K?13:14,lineHeight:20},"vertical"===H?240:D,("vertical"===H?2:1)+(G?1:0),!1),z=(0,m.H)(r,"url",{name:"Inter",size:16,lineHeight:22},("vertical"===H?240:D)-24,1+(B?0:1),!0),Y=B?(0,a.Js)(A):z,$=()=>{_(u.yc.OPEN_PREVIEW,A),o.D.dispatch((0,l.RK)({rawInput:A}))};r.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===H?y:b},{itemType:"action",propertyName:"horizontal",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===H?I:T},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":$();break;case"convert_to_text":_(u.yc.CONVERT_TO_TEXT,A),i.glU.replaceNodeWithText(S,A);break;case"vertical":_(u.yc.SWITCH_ORIENTATION_VERTICAL,A),W("vertical");break;case"horizontal":_(u.yc.SWITCH_ORIENTATION_HORIZONTAL,A),W("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let q={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},Z=r=>{let i=r?e.widget.h(n,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:r,scaleMode:"fill"},cornerRadius:3}):e.widget.h(g,{src:v});return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:B?0:3,bottom:0}},i)},X=(r,i,a)=>e.widget.h(n,{name:"container-frame",width:r,height:i,fill:a?{type:"image",imageHash:a,scaleMode:"fill"}:h.De,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===H?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:$}),J=r=>{if(r)return e.widget.h(d,{fontSize:16,fontWeight:500,lineHeight:22,...q},r)},Q=(r,n)=>{if(n)return e.widget.h(d,{fontSize:r?13:14,lineHeight:20,fontWeight:400,...q,fill:{...q.fill,color:{r:0,g:0,b:0,a:r?.5:.8}}},n)},ee=(r,n)=>e.widget.h(d,{fontSize:r?13:16,lineHeight:r?20:22,fontWeight:400,textDecoration:"underline",...q,fill:{...q.fill,color:{r:0,g:0,b:0,a:.5}},onClick:$},n);return"vertical"===H?function(...r){return e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:h.Vm,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...r)}(!P&&e.widget.h(n,{width:304,height:.01}),P&&X(304,L?Math.max(Math.min(304/L,608),160):160,N),B&&((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:{left:24,right:24,bottom:0,top:r?16:24}},...n))(P,J(K),Q(x,j)),((r,...n)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:r?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:r?{left:24,right:24,top:8,bottom:24}:20},...n))(B,Z(R),ee(B,Y))):"horizontal"===H?function(r,...n){return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:h.Vm,cornerRadius:12,spacing:r?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...n)}(P,!P&&e.widget.h(n,{width:.01,height:.01}),P&&X(112,112,N),((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:h.Vm,spacing:r?4:8,padding:r?{left:0,right:0,bottom:16,top:16}:20},...n))(P,B&&((...r)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:0},...r))(J(K),Q(x,j)),((...r)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:B?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...r))(Z(R),ee(B,Y)))):void 0})}},884656:(e,r,n)=>{"use strict";n.d(r,{Z:()=>s}),n(587670),n(776250);var i=n(38329);n(966712);var a=n(175515),o=n(578730);let s={fetchFontFile:(e,r,n)=>(0,o.M1)({source:e,id:r,postscriptName:n,fileKey:a.hk()?.openFileKey()||null,teamId:null,orgId:null}),fetchFontFileWithoutPickerInfo(e,r,n){var s;let l=a.hk()?.openFileKey();return l?(0,o.co)(e,r,n,l,!(s=i.D.getState())||!s.openFile||!!s.openFile.parentOrgId):Promise.reject()}}},876840:(e,r,n)=>{"use strict";n.d(r,{qb:()=>o});var i=n(630331);class a{onFrameDistributionTrackedEvent(e){i.jp(e)}}function o(){new a}},856107:(e,r,n)=>{"use strict";n.d(r,{_v:()=>o,kJ:()=>s});var i=n(218881);let a=class e{logFeatureGateExposure(e,r){i.w$.logExposureForFeatureGate(e,r)}getDynamicConfigNumberAsRoundedInt(r,n,a){return Math.round(i.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString))}getExperimentNumberAsRoundedInt(r,n,a){return Math.round(i.w$.getExperimentNumber(r,n,a,e.SourceLoggingString))}getDynamicConfigNumberAsFloat(r,n,a){return i.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString)}getExperimentNumberAsFloat(r,n,a){return i.w$.getExperimentNumber(r,n,a,e.SourceLoggingString)}getDynamicConfigString(r,n,a){return i.w$.getDynamicConfigString(r,n,a,e.SourceLoggingString)}getExperimentString(r,n,a){return i.w$.getExperimentString(r,n,a,e.SourceLoggingString)}getDynamicConfigBoolean(r,n,a){return i.w$.getDynamicConfigBoolean(r,n,a,e.SourceLoggingString)}getExperimentBoolean(r,n,a){return i.w$.getExperimentBoolean(r,n,a,e.SourceLoggingString)}};a.SourceLoggingString="fullscreen";let o=a;function s(){new o}},369870:(e,r,n)=>{"use strict";n.d(r,{MP:()=>s,U1:()=>o,ck:()=>a,pb:()=>l});var i=n(966712);function a(){return i.Ay().frame_context?.type==="integration"}function o(){return a()&&"google-meet"===(0,i.Ay)().integration_host&&!!(0,i.Ay)().is_meet_hardware}function s(){return a()&&"zoom"===(0,i.Ay)().integration_host}class l{static isGoogleClassroomIntegration(){return a()&&"google-classroom"===(0,i.Ay)().integration_host}}},217071:(e,r,n)=>{"use strict";n.d(r,{F:()=>s});var i=n(852438),a=n(47506);let o=new Set;function s(e,r,n){let s=function(e){let r=Object.keys(e);return 0===r.length?new Set:new Set(r)}(r),l=!(0,i.yZ)(s,o);(0,a.YQ)({id:"Selection Changed",properties:{...n,numSelectedTextNodes:n.numSelectedByType&&n.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:l}}),o=s}},327736:(e,r,n)=>{"use strict";n.d(r,{bJ:()=>o});var i=n(779709),a=n(52610);function o(){new s}class s{constructor(){this.developerRelatedLinksManager=new i.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,a.Q)()}}},114716:(e,r,n)=>{"use strict";n.d(r,{g:()=>s});var i=n(411855),a=n(288706),o=n(356390);function s(){let[e,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(o.Y5.isReady()){r(!0);return}let e=!1;return o.Y5.onReady().then(()=>{e||r(!0)}),()=>{e=!0}},[r]),e}(0,a.t_)(()=>o.Y5.isReady()||o.Y5.onReady())},604978:(e,r,n)=>{"use strict";n.d(r,{B0:()=>F,DK:()=>P,Dl:()=>M,EC:()=>R,Nd:()=>D,d$:()=>_,w6:()=>k});var i=n(851061),a=n(587670),o=n(323591),s=n(966712),l=n(563706),c=n(776621),d=n(27087),u=n(355992),p=n(94429),m=n(719867);let h=document.createElement("canvas"),_=4096,g=h.getContext("2d"),f=document.createElement("canvas"),E=function(){try{return f.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();async function y(e,r,n,i){let s=a.RYP.SRGB;if("image/png"===r){let r=(0,p.Ll)(e);if(e=r.withoutColorSpace,r.iccProfileRawData)try{s=(0,u.Y)(r.iccProfileRawData)}catch(e){}}let l=null;if("image/jpeg"===r){try{let r=(0,p.yy)(e);r&&(s=(0,u.Y)(r)??a.RYP.SRGB)}catch(e){}l=o.f.getOrientation(e),C&&(l=null)}let c=!1;"image/gif"===r&&(c=(0,p.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:r}));try{let e=await k({url:d,height:null,width:null});return{...b(e,n,i,l,c),colorProfile:s}}finally{URL.revokeObjectURL(d)}}function b(e,r,n,i,a){let{width:s,height:l,originalWidth:c,originalHeight:d,isRotated:u}=function(e,r,n,i,a){let s=o.f.angleFromOrientation(a),l=o.f.orientationIsFlipped(a),c=e,d=r,u=e,p=r;if(90===s||270===s){let n=r;r=e,e=n,n=p,p=u,u=n}return n>0&&i>0&&(e>n&&(r=Math.round(r*n/e),e=n),r>i&&(e=Math.round(e*i/r),r=i),e=Math.max(1,e),r=Math.max(1,r)),h.width=e,h.height=r,g.translate(e/2,r/2),g.scale(e/u,r/p),l&&g.scale(-1,1),g.rotate(Math.PI/180*s),g.translate(-c/2,-d/2),{originalHeight:p,originalWidth:u,width:e,height:r,isRotated:0!==s}}(e.width,e.height,r,n,i);return g.drawImage(e,0,0),{width:s,height:l,originalWidth:c,originalHeight:d,isMultiFrameGIF:a,isRotated:u,bitmap:null,rgba:new Uint8Array(g.getImageData(0,0,s,l).data.buffer)}}function I(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function T(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!N.works)return 16==(await k({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let r=new Blob([I(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(r)).width}}async function v(){if(!N.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let r=e.getContext("2d"),n=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});r.drawImage(await createImageBitmap(n),0,0);let i=r.getImageData(0,0,16,8);r.clearRect(0,0,e.width,e.height);let a=URL.createObjectURL(n),o=new Image;await new Promise(e=>{o.onload=e,o.src=a}),r.drawImage(await createImageBitmap(o),0,0);let s=r.getImageData(0,0,16,8);if(i.data.length!==s.data.length)return!1;for(var l=0;l<i.data.length;++l)if(i.data[l]!==s.data[l])return!1;return!0}async function S(e,r){if(!e)return!1;try{let i=await createImageBitmap(r),a=i.width,o=i.height,s=!1,l=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let c=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),u=null,p=null;try{if(p=e.createTexture(),e.bindTexture(e.TEXTURE_2D,p),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.bindTexture(e.TEXTURE_2D,null),u=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var n=new Uint8Array(4*a*o);e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,n),255===n[0]&&(s=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,c),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(p),e.deleteFramebuffer(u),e.activeTexture(l),s}catch{return!1}}async function w(e){N=await A(e),C=await T(),l.Ay.webkit&&await v()}async function A(e){let r=new Blob([(0,i.decode)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(r,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(n){return{works:await S(e,r),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}let N={works:!1,allowsOptions:!1},C=!1,O=null,L=null,R={init(e){L=w(e)},reset(){null!==O&&O.forgetCallbacks()},terminateWorker(){null===O||(0,s.kc)().skip_worker_terminate||(O.terminate(),O=null)},encode(e,r,n,o,s,l,c=a.RYP.SRGB,d=!1){let u,p=h,m=g;c===a.RYP.DISPLAY_P3&&f&&E&&(p=f,m=E);let _=e*r*4,y=m.createImageData(e,r);l&&(n=function(e,r){let n=new Uint8Array(r);for(let i=0;i<r;i+=4){let r=e[i+3|0],a=255.999/r;n[i]=e[i]*a,n[i+1|0]=e[i+1|0]*a,n[i+2|0]=e[i+2|0]*a,n[i+3|0]=r}return n}(n,_)),d&&(n=function(e,r){let n=new Uint8Array(r);return e.forEach((r,i)=>{i%4==3?n[i]=255:n[i]=e[i]}),n}(n,_)),new Uint8Array(y.data.buffer).set(n),p.width=e,p.height=r,m.putImageData(y,0,0),u=o?p.toDataURL("image/jpeg",s):p.toDataURL();let b=";base64,";return(0,i.decode)(u.slice(u.indexOf(b)+b.length))},async decodeAsync(e,r,i,a,s){if(await L,!N.works)return await y(e,r,i,a);if(null===O&&(O=new m.o),"image/heic"===r){let i;i=await n.e(160).then(n.t.bind(n,60160,23));let a=await i.default({blob:new Blob([e],{type:r}),toType:"image/png"});r="image/png";let o=Array.isArray(a)?a[0]:a;e=new Uint8Array(await o.arrayBuffer())}let c=null,{bitmap:d,isMultiFrameGIF:u,colorProfile:p}=await O.sendMessage({type:r,array:e,supportsCreateBitmapOptions:N.allowsOptions});if(!d)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),await y(e,r,i,a);let h=!1;"image/jpeg"===r&&(h=c!==o.a.ROTATE_0,null!==c&&c!==o.a.ROTATE_0&&C&&l.Ay.chrome&&0>l.Ay.compareVersions([l.Ay.version.toString(),"86"])&&(s=!1),C&&(c=null));let _=d.width,g=d.height;return s&&(null===c||c===o.a.ROTATE_0)&&(0===i||_<=i)&&(0===a||g<=a)?{width:_,height:g,originalWidth:_,originalHeight:g,isMultiFrameGIF:u,isRotated:h,bitmap:d,colorProfile:p}:{...b(d,i,a,c,u),colorProfile:p}},thumbnailSize(e,r){let n=Math.max(e,r),i=0;for(;n>512;)i++,n=Math.floor((n+1)/2);let a=R.dropMips(e,r,i);return{w:a[0],h:a[1],mipsToDrop:i}},dropMips(e,r,n){if(0===e||0===r)return(0,c.x1)("images","Width and height should not be zero"),[e,r];for(let i=0;i<n;++i)e=Math.floor((e+1)/2),r=Math.floor((r+1)/2);return[e,r]},scaleImageBitmap(e,r,n,i){h.width=r,h.height=n,g.translate(0,0),g.scale(1,1),g.rotate(0),g.drawImage(e,0,0,r,n);let a=h.toDataURL(i),o=a.indexOf(",");return I(a.slice(o+1))},async createCanvasAndDrawImage(e,r,n,i){let a,o;"undefined"!=typeof OffscreenCanvas?a=new OffscreenCanvas(e,r):a=M(e,r);let s=a.getContext("2d");if(!s)throw Error("Failed to get 2D context");return n(s),a instanceof OffscreenCanvas?o=await a.convertToBlob({type:i}):o=await new Promise((e,r)=>a.toBlob(n=>{n?e(n):r(Error("Failed to create blob from canvas"))},i)),{canvas:a,blob:o}},async generateThumbnail(e,r,n){if(e.bitmap){let{canvas:i,blob:a}=await this.createCanvasAndDrawImage(r,n,i=>{i.drawImage(e.bitmap,0,0,r,n)},e.mimeType),o=await a.arrayBuffer(),s=await createImageBitmap(i);return{compressedData:new Uint8Array(o),bitmap:s}}{let i=e.rgba;if(!i)throw Error("Failed to decode image");let a=new ImageData(new Uint8ClampedArray(i),e.width,e.height),{canvas:o}=await this.createCanvasAndDrawImage(e.width,e.height,i=>{i.putImageData(a,0,0),i.drawImage(i.canvas,0,0,e.width,e.height,0,0,r,n)},e.mimeType),s=o.getContext("2d");if(!s)throw Error("Failed to get context");let l=new Uint8Array(s.getImageData(0,0,r,n).data);return{compressedData:this.encode(r,n,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},P=128;async function D(e){return new Uint8Array((await d.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function k(e){return new Promise((r,n)=>{let i=new Image;e.height&&(i.height=e.height),e.width&&(i.width=e.width),i.crossOrigin="";let a=Error();i.onerror=e=>{e.cause=a,n(e)},i.onload=()=>r(i),i.src=e.url})}function M(e,r){let n=document.createElement("canvas");return n.width=e,n.height=r,n}function F(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}},15859:(e,r,n)=>{"use strict";n.d(r,{Jr:()=>N,UD:()=>C,xY:()=>w});var i=n(675678),a=n(37247),o=n(587670),s=n(788922),l=n(776250),c=n(297666),d=n(77909),u=n(966712),p=n(994190),m=n(776621),h=n(27087),_=n(604978),g=n(356390);let f=new Uint8Array([171,75,84,88,32,50,48,187,13,10,26,10]).toString();async function E(e,r,n){let i="figFile"===r.type?`/file/${r.fileKey}/image/batch`:`/community/file/${r.hubFileId}/image/batch`;try{let r=await h.Ay.post(i,{sha1s:e,max_size:n},{retryCount:1/0});if(200!==r.status||r.data.error)throw Error("api error while resolving images");return r.data.meta.s3_urls}catch(r){throw console.warn(`Couldn't download image(s) with hashes ${e}`),r}}class y extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,y.prototype)}}class b extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,b.prototype)}}class I extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,I.prototype)}}var T=(e=>(e[e.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",e[e.LOOKUP=1]="LOOKUP",e[e.UPLOADING=2]="UPLOADING",e[e.READY=3]="READY",e[e.MISSING=4]="MISSING",e[e.FAILED=5]="FAILED",e[e.PRESENT=6]="PRESENT",e))(T||{});let v=class e{constructor(e,r){this.hash=e,this._priority=r,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(r){this._priority!==e.MAX_PRIORITY&&(this._priority=r)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}return e<Date.now()/1e3}downloadFromS3(){if(null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");return h.Ay.crossOriginGetAny(this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new I;if(0!==e.status&&e.status<500){let r=this.s3Path?.includes("resize")?"Can't load image! Make sure Pixie service is running locally":"Image is missing from S3!";(0,m.x1)("image",r,{hash:this.hash,status:e.status}),(0,m.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))}throw e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};v.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class S{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,r)=>r.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let r=this.queue.findIndex(r=>r.priority<e);return r<0?this.queue.length:r}push(...e){for(let r of(this.queue.push(...e),e))this.byHash.set(r.hash,r);this.needsSort=!0}updatePriority(e,r){let n=this.byHash.get(e);return null!=n&&(n.priority=r,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let r=Date.now(),n=1/0;for(let e=0;e<this.queue.length;e++){let i=this.queue[e].retryTime;if(null==i||r>=i){let[r]=this.queue.splice(e,1);return this.byHash.delete(r.hash),{found:!0,image:r}}n=i<n?i:n}return{found:!1,retryDelay:n-r}}find(e){return this.byHash.get(e)??null}erase(e){let r=this.byHash.get(e);if(r){this.byHash.delete(e);let n=this.queue.findIndex(e=>e===r);n>=0&&this.queue.splice(n,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}class w{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.imagesNeedingDirectUpload=new Set,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,u.kc)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new S,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.flushPendingRecordImages=(0,c.s)(async()=>{let e=this.pendingImagesToRecord,r=this.pendingRecordImagesTasks,n=Object.keys(e);this.pendingImagesToRecord={},this.pendingRecordImagesTasks={};let i=await this.getEditingFileKey();n.forEach(async n=>{if(i===n){r[n].resolve();return}if(!n){r[n].reject("Invalid originFileKey");return}let a=1,s=e[n];for(;;){try{let e=await h.Ay.put(`/api/files/${i}`,{image_sha1s:s,image_origin_file_key:n}),{success:a,failed:c}=w.parseFileUpdateResponseForImages(s,e);for(let e of(o.Bko.imagePermissionsCopied(a),c))this.markImageMissing(e);for(let e of(c.length>0&&(0,l.sx)("image_permission_copy_failed",{shas:c.join(",")}),s))delete this.pendingPasteRequests[e];r[n].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,p.Jj)(),(0,l.sx)("image_permission_copy_failed",{shas:s.join(",")}),s))this.markImageMissing(e),delete this.pendingPasteRequests[e];r[n].reject(`4xx error when pasting images ${e}`);return}}let e=1e3*a*Math.random();await new Promise(r=>setTimeout(r,e)),a=Math.min(2*a,64)}})},100)}getEditingFileKey(){return g.Y5.openFileKeyPromise()}recordImages(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...r),!this.pendingRecordImagesTasks[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordImagesTasks[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasks[e].promise;let n=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),n}static parseFileUpdateResponseForImages(e,r){try{if(r?.data?.meta?.missing_shas){let n=new Set(r.data.meta.missing_shas);return{success:e.filter(e=>!n.has(e)),failed:Array.from(n)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(e){let r=await g.Y5.openFilePromise(),n=await E(e,r,this.imageMaxSize),i=e.filter(e=>!(e in n));if(i.length>0){let e=await g.Y5.sourceFileKeyPromise();if(e){let r=await E(i,{type:"figFile",fileKey:e});return{...n,...r}}}return n}queueImageForLookup(e){let r=e.hash;this.verbose&&(0,m.Lo)("image","incoming",{hash:r}),e.state=0,this.incomingImages.set(r,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,m.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,r){let n=new v(e,v.MAX_PRIORITY);n.s3Path=r,this.allImages.set(e,n),this.downloadQueue.push(n),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}setImageDownloadPriority(e,r){if(!e){(0,m.xi)("setImageDownloadPriority","invalid hash");return}let n=this.allImages.get(e);if(null==n){n=new v(e,r),this.allImages.set(e,n),this.queueImageForLookup(n);return}2===n.state&&(0,m.x1)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),n.priority=r,this.downloadQueue.updatePriority(e,r)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let e=this.downloadQueue.pop(this.minPriority);if(null==e)break;if(!e.found){let r=e.retryDelay;!Number.isFinite(r)||r<=0?(0,m.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),r);break}let r=e.image;r.hash&&(this.verbose&&(0,m.Lo)("image","download start",{hash:r.hash,ok:!this.pendingDownloads.has(r.hash)}),this.pendingDownloads.add(r.hash)),r.download(this.imageMaxSize).then(e=>{if(this.cancelDownloads.delete(r.hash))return;this.verbose&&(0,m.Lo)("image","download done",{hash:r.hash,ok:!this.alreadyDownloaded.has(r.hash)}),this.alreadyDownloaded.add(r.hash);let n=null;if(this.imagesNeedingDirectUpload.has(r.hash))o.Bko.imageDownloadedForPaste(r.hash,e),this.imagesNeedingDirectUpload.delete(r.hash);else{let i=e;if((0,u.kc)().use_compressed_textures&&e.slice(0,12).toString()===f){let a=(0,s.LF4)(e);n={width:a.pixelWidth,height:a.pixelHeight},o.Bko.setCompressedTextureMetadata(r.hash,n),i=a.levels[0].levelData}o.Bko.imageDownloaded(r.hash,i)}n||this.pendingDecodes.has(r.hash)||((0,m.xi)("ImageManager","missing pending decode after download",{hash:r.hash}),(0,m.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),r.imageIsReady())},e=>{if(this.pendingDecodes.delete(r.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),!this.cancelDownloads.delete(r.hash)){if(e instanceof y)this.markImageMissing(r.hash);else if(e instanceof b)(0,m.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(r.hash);else if(e instanceof I)this.queueImageForLookup(r);else{if(e instanceof h.Dr&&403===e.status){this.markImageFailed(r.hash);return}let n=5e3*(1<<Math.min(r.retries,4));n+=n*Math.random(),r.retries+=1,(429===e.status||503===e.status)&&(n*=4),r.retryTime=Date.now()+n,this.downloadQueue.push(r)}}}).finally(()=>{this.pendingDownloads.delete(r.hash),this.maybeDownloadMoreImages()})}this.pendingImagesCallback?.(this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,v.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,m.Lo)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.pendingDecodes.add(e)}getSignedUrls(e){let r=new Map;for(let n of e){let e=this.allImages.get(n);e&&e.s3Path&&r.set(n,e.s3Path)}return r}clearImageDecodePending(e,r){this.verbose&&(0,m.Lo)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)}),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),r?this.markImageReady(e):this.markImageFailed(e)}markImagePresent(e){let r=this.allImages.get(e);r&&(r.state=6,o.Bko.imageIsPresent(e))}markImageMissing(e){let r=this.allImages.get(e);r&&(r.state=4,o.Bko.imageIsMissing(e),r.imageIsReady())}markImageFailed(e){let r=this.allImages.get(e);r&&(r.state=5,r.imageIsReady())}markImageReady(e){let r=this.allImages.get(e);r&&(r.state=3,r.imageIsReady())}async lookupImages(){let e=[];for(let r of this.incomingImages.values())0===r.state&&(e.push(r),r.state=1,this.verbose&&(0,m.Lo)("image","lookup",{hash:r.hash}));try{for(;e.length>0;){let r=e.splice(0,this.SINATRA_BATCH_SIZE);for(let e of r){let r=this.pendingPasteRequests[e.hash];if(r)try{await r}catch(r){(0,m.x1)("lookupImages","pastePromise failed",{hash:e.hash})}}let n=await this.resolveImageUrls(r.map(e=>e.hash));for(let e of r){let r=n[e.hash];r?(e.s3Path=r,this.markImagePresent(e.hash),this.downloadQueue.push(e),this.verbose&&(0,m.Lo)("image","enqueued-batch",{hash:e.hash})):(this.markImageMissing(e.hash),this.verbose&&(0,m.Lo)("image","missing",{hash:e.hash})),this.incomingImages.delete(e.hash)}}}finally{for(let r of e)this.incomingImages.delete(r.hash)&&(0,m.xi)("image","incoming fallback delete",{hash:r.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}this.maybeDownloadMoreImages()}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,m.Lo)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let r=this.allImages.get(e);r&&(this.allImages.delete(e),3!==r.state&&r.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,m.Lo)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,d.v)(),this.verbose&&(0,m.Lo)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let r=performance.now()-e;this.verbose?(0,m.Lo)("image","queue empty defer cleared",{start:e,elapsed:r}):r>1e4&&(0,m.xi)("image","queue empty finished after a long time",{start:e,elapsed:r})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,d.v)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,r,n){setTimeout(()=>{if(e===this.imageQueueEmpty){let i=Math.round(.001*(performance.now()-r));(0,m.xi)("image","queue empty is taking a long time",{elapsedSec:i,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,m.Lo)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes});let a=Math.min(2*n,9e5);this.emptyQueueCheck(e,r,a)}},n)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let r of this.progressCallbacks)r(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,m.Lo)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){0===this.incomingImages.size&&this.incomingImagesLookedUp?.resolve()}unresolvedImagesUnder(e,r,n){let i=n??o.AlE.getMutableActiveDocument();return o.Bko.findImagesUnder(i,e,r).map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&3!==e.state&&2!==e.state)}loadAllImagesUnder(e,r,n,i=null,a){return this.loadAllImages(e,r,n,i,!0,a)}waitForImagesUnder(e,r,n,i=null,a){return this.loadAllImages(e,r,n,i,!1,a)}async loadAllImages(e,r,n,i=null,a,o){let s=performance.now();this.verbose&&(0,m.Lo)("image","loadAllImagesUnder",{reason:n,guids:e,start:s}),e.includes("0:0")&&"playground.initialLoad"!==n&&(0,m.x1)("image","loadAllImagesUnder called with full document",{reason:n});let l=0,c=new Promise(n=>{let s=this.unresolvedImagesUnder(e,r,o);if(0===(l=s.length))n({totalImages:l});else{var c;let e=l;for(let r of(c=e,i&&i(c,l),s))a&&this.setImageDownloadPriority(r.hash,v.MAX_PRIORITY),r.readyPromise().finally(()=>{var r;r=--e,i&&i(r,l),0===e&&n({totalImages:l})})}});return await c}async loadImageByHash(e){this.verbose&&(0,m.Lo)("image","loadImageByHash",{hash:e}),this.setImageDownloadPriority(e,v.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,m.xi)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,r,n,i){if(this.pendingUploads.has(i))return;this.pendingUploads.add(i);let a=new v(i,0);a.state=2,this.allImages.set(i,a);let s=`/api/upnode/image?purpose=canvas&sha1=${i}&fileKey=${e}`,l=0;h.Ay.post(s,r,{retryCount:1/0,headers:{...h.Ay.defaults.headers,"Content-Type":n},rawBody:!0,uploadEvents:{loadstart:()=>{a.retries=l,l+=1}}}).then(e=>{if(200!==e.status){(0,m.x1)("image","unexpected status code from image upload",{hash:i,status:e.status},{reportAsSentryError:!0});return}(0,m.Lo)("image","uploaded new image",{hash:i}),this.pendingUploads.delete(i),o.Bko.imageUploadFinished(i,o.d8m.SUCCESS),a.state=3,this.uploadedImagesNeedingUrl.add(i),this.maybeResolveImagesUploaded()},e=>{let r;415===e.status?((0,m.x1)("image","image upload failed, removing invalid image",{hash:i}),r=o.d8m.UNSUPPORTED_MEDIA):r=o.d8m.OTHER_FAILURE,this.pendingUploads.delete(i),o.Bko.imageUploadFinished(i,r),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let r of this.pendingUploads){let n=this.allImages.get(r);n&&n.retries>0&&e.add(r)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){if(0===this.pendingUploads.size){let e=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let r=0;r<e.length;r+=this.SINATRA_BATCH_SIZE){let n=e.slice(r,r+this.SINATRA_BATCH_SIZE),i=await this.resolveImageUrls(n);for(let e of n){let r=i[e];if(r){let n=this.allImages.get(e);if(n)n.s3Path=r;else{let n=new v(e,0);n.s3Path=r,n.state=3,this.allImages.set(e,n)}}}}this.allImagesUploaded?.resolve()}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,d.v)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let r of e){let e=this.allImages.get(r),n=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let r of e)n.add(r);(0,m.Lo)("ImageManager","Blocking image info",{hash:r,state:e?e.state:"NO IMAGE",inIncoming:r in this.incomingImages,inQueue:null!=this.downloadQueue.find(r),inPending:r in this.pendingDownloads,inFinished:r in this.alreadyDownloaded,inPendingRecord:r in n})}let[r,n]=this.pendingUploadStats(),i=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),a=Array.from(this.pendingDownloads).join(","),o=Array.from(this.alreadyDownloaded).join(","),s=this.downloadQueue.debugString(),l=Array.from(r).join(","),c=Array.from(n).join(",");(0,m.Lo)("ImageManager","ImageManager debug info",{incomingImages:i,downloadQueue:s,pendingDownloads:a,alreadyDownloaded:o,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=o.Bko.getImageResourceDebugInfo(),r=new Map;return e.forEach(e=>{r.set(e.hash,{...e,tsState:this.allImages.get(e.hash)?.state})}),this.allImages.forEach((e,n)=>{r.has(n)||r.set(n,{hash:n,tsState:e.state})}),r}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}}let A=new class{constructor(){this.imageManager=new w}copyImagePermissions(e,r){return this.imageManager.recordImages(e,r)}setImageDownloadPriority(e,r){this.imageManager.setImageDownloadPriority(e,r)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,r){this.imageManager.clearImageDecodePending(e,r)}async downloadEmoji(e){return(await h.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"})).data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,r,n,i){this.imageManager.startUploadingImage(e,r,n,i)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,r){this.imageManager.setExternalSource(e,r)}};function N(){return A.imageManager}async function C(e,r,n){if(!o.Bko.imageTypeDecodeSupported(r))throw Error(`Image type ${r} is not supported and cannot be decoded`);let i=await _.EC.decodeAsync(e,r,_.d$,_.d$,(0,u.kc)().image_decode_bitmap_ts_api??!1),a=await crypto.subtle.digest("SHA-1",e),s={width:i.width,height:i.height,compressedData:e,hash:new Uint8Array(a),bitmap:i.bitmap?i.bitmap:void 0,mimeType:r,rgba:i.rgba?i.rgba:new Uint8Array,name:n},l=_.EC.thumbnailSize(i.width,i.height),c=await _.EC.generateThumbnail(s,l.w,l.h),d=await crypto.subtle.digest("SHA-1",c.compressedData);return{fullResolution:s,thumbnail:{width:l.w,height:l.h,compressedData:c.compressedData,hash:new Uint8Array(d),bitmap:c.bitmap,mimeType:r,rgba:c.decompressedData,name:n}}}async function O(e,r){let n=!!w.includeOutsideContents(r);await N().loadAllImagesUnder([n?e.containingCanvas||"-1:-1":e.guid],o.MoD.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,a.c)(O)},855418:(e,r,n)=>{"use strict";n.d(r,{ZI:()=>eD,c3:()=>eP}),n(411855);var i=n(842700),a=n(763293),o=n(774844),s=n(10640),l=n(971015),c=n(138712),d=n(146085),u=n(694568),p=n(359419),m=n(583087),h=n(774525),_=n(973332),g=n(353341),f=n(335125),E=n(143984),y=n(470370),b=n(163011),I=n(210163),T=n(704327),v=n(341987),S=n(631437),w=n(897379),A=n(599741),N=n(921211),C=n(977750),O=n(766503),L=n(416580),R=n(826785),P=n(583602),D=n(593961),k=n(304173),M=n(841368),F=n(737834),x=n(516371),U=n(891326),B=n(975798),V=n(710752),G=n(914756),H=n(205478),W=n(615777);n(587670);var K=n(850892),j=n(923e3),z=n(353598),Y=n(279207),$=n(770184),q=n(348119),Z=n(615780),X=n(931853),J=n(704728),Q=n(661865),ee=n(400232),et=n(805869),er=n(732431),en=n(638157),ei=n(721935),ea=n(809586),eo=n(206186),es=n(963563),el=n(713122),ec=n(342811),ed=n(309620),eu=n(396090),ep=n(805538),em=n(394757),eh=n(297745),e_=n(457272),eg=n(338659),ef=n(81297),eE=n(507721),ey=n(403203),eb=n(527920),eI=n(952545),eT=n(91521),ev=n(593865),eS=n(607055),ew=n(498829),eA=n(577777),eN=n(416799),eC=n(733715),eO=n(964854),eL=n(199409),eR=n(969537);J.A,i.V,et.A,a.V,Q.A,o.c,eS.A,s.i,eS.A,s.i,ei.A,i.V,el.A,l.U,ec.A,c.R,ed.A,d.A,eu.A,u.N,ep.A,p.n,ef.A,m.y,eA.A,i.V,ew.A,h.n,_.p,g.E,eN.A,i.V,eC.A,i.V,eO.A,i.V,eL.A,i.V,z.A,i.V,Y.A,i.V,$.A,i.V,q.A,i.V,Z.A,i.V,X.A,i.V,er.A,i.V,en.A,i.V,ea.A,f.p,ee.A,E.K,eE.A,y.N,j.A,b.m,em.A,I.P,eo.A,T.a,eo.A,T.a,eI.A,v.i,eI.A,S.A,es.A,w.r,ey.A,i.V,eh.A,A.H,N.K,eg.A,A.H,N.K,eT.A,K.V,N.K,ev.A,K.y,N.K,e_.A,C.O,eg.A,C.O,C.O,eR.A,O.F,L.U,R.m,P.m,D.b,k.n,M.J,F._,x.U,U.a,B.E,V.e,G.U,H.V,W.x,eb.A;let eP=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),eD=40},22837:(e,r,n)=>{"use strict";n.d(r,{fG:()=>y});var i=n(346106),a=n(654140),o=n(88334),s=n(633291),l=n(206215),c=n(691501),d=n(652087),u=n(497538),p=n(814489),m=n(148483),h=n(204347),_=n(219066),g=n(172982);let f={ArrangeAsListBehavior:l.b,ConnectorToolBehavior:c.a,TableBehavior:m.H,TemplatePreviewBehavior:_.Z,VideoBehavior:g.s,SectionPresetBehavior:p.V,DevHandoffAnnotationsMouseBehavior:a.l,ResponsiveSetBehavior:d.j,SitesBlockBehavior:u.Y,SlideDeckAddBehavior:o.w,SlideDeckReorderRowBehavior:s.M,BuzzNodeStatusBehavior:i.s};class E{createMouseBehavior(e){if(e in f)return new f[e];throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return h.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return h.Ro.addButtonHoveredRadius}}function y(){new E}},154979:(e,r,n)=>{"use strict";n.d(r,{IL:()=>_,No:()=>h,_p:()=>b,eb:()=>f,pP:()=>g,xC:()=>m});var i=n(623738),a=n(324597),o=n(480952),s=n(261607),l=n(678340),c=n(69961),d=n(631378),u=n(126911);let p="None",m=256,h=512,_=1024,g=2048,f=4096,E={ALT:256,META:512,SHIFT:1024,CONTROL:2048,RIGHTALT:4096};class y{constructor(e){this.getFullscreenMenuItem=e=>{let r=this.store?.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let i=(0,s.b)(r),a=(0,o.V)(r,{isRecovery:!1,fullscreenMemoryWarningLevel:l.Wy.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:i}),c=n(586281).M({isReadOnly:r.mirror.appModel.isReadOnly,extensionMenuProps:i,includeDisabled:!1});return new d.x(r.mirror.appModel,r.selectedView,[...a,...c]).getItem(r.mirror.appModel,e)},this.getCallback=e=>{let r=this.getFullscreenMenuItem(e);return r&&r.callback&&this.store?.dispatch?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,a.Dz)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store||!c.nt.customKeyboardShortcuts.getValue())return[];let e=(0,i.Uc)(),r=[];return Object.entries(e).forEach(([e,{type:n,action:a}])=>{let o;try{o=this.getKeyboardShortcutFromText(e,null)}catch(e){o=null}let s=i.iZ.get(n);if(null===o||void 0===s){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:s,text:e});return}r.push({keyboardShortcut:o,type:s,action:a})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:e,shortcuts:r}),r}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let r=this.getCallback(e);return!!r&&(r(),!0)}getDisplayStringFromKey(e){let r=u.y.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return r?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return r?"\u2325":"Alt";case"SHIFT":return r?"\u21E7":"Shift";case"META":return r?"\u2318":u.y.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,r){let n=p,i=0,a=e.split("+");for(let e of(a.length>0&&""===a[a.length-1]&&(a.pop(),a.length>0&&(a[a.length-1]=a[a.length-1]+"+")),a)){if(""===e)continue;let r=E[e.toUpperCase()];if(e===p||r&&(i&r)>0)return null;if(r&&(7936&r)!=0)i|=r;else{if(n!==p)return null;n=e}}return n===p&&0===i?null:{key:n,modifierMask:i,originalText:e,displayName:r}}getTextFromKeyboardShortcut(e){let r=u.y.isApple(),n=(e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null)??e,i=[];return n.modifierMask&g&&i.push(this.getDisplayStringFromKey("Control")),n.modifierMask&m&&i.push(this.getDisplayStringFromKey("Alt")),n.modifierMask&_&&i.push(this.getDisplayStringFromKey("Shift")),n.modifierMask&h&&i.push(this.getDisplayStringFromKey("Meta")),n.modifierMask&f&&i.push(this.getDisplayStringFromKey("RightAlt")),n.key!==p&&i.push(this.getDisplayStringFromKey(n.key)),r?i.join(""):i.join("+")}}function b(e){new y({store:e})}},692609:(e,r,n)=>{"use strict";n.d(r,{$K:()=>o,F0:()=>g,Fx:()=>p,GN:()=>C,QI:()=>E,Qu:()=>k,RG:()=>L,Te:()=>l,ax:()=>d,cQ:()=>S,ck:()=>A,db:()=>P,hu:()=>b,lR:()=>T,uN:()=>h}),n(411855),n(188507),n(587670),n(966712),n(632430);var i=n(529928);n(416095),n(100197);let{action:a,reducer:o}=(0,i.B5)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:s,reducer:l}=(0,i.B5)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:c,reducer:d}=(0,i.B5)("SYNC_PUBLISHABLE_STYLES",[]),{action:u,reducer:p}=(0,i.B5)("SYNC_PUBLISHABLE_MODULES",[]),{action:m,reducer:h}=(0,i.B5)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:_,reducer:g}=(0,i.B5)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:f,reducer:E}=(0,i.B5)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:y,reducer:b}=(0,i.B5)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:I,reducer:T}=(0,i.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:v,reducer:S}=(0,i.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:w,reducer:A}=(0,i.B5)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:N,reducer:C}=(0,i.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:O,reducer:L}=(0,i.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:R,reducer:P}=(0,i.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:D,reducer:k}=(0,i.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[])},5092:(e,r,n)=>{"use strict";n.d(r,{qZ:()=>m});var i=n(587670),a=n(374626),o=n(939863),s=n(582064),l=n(392592),c=n(112084),d=n(863670),u=n(356390);class p{setMentionsTypeaheadQuery(e){a.zl.set(d.h1,e)}clearMentionsTypeaheadQuery(e,r){if(e){let e=a.zl.get(d.h1),n=a.zl.get(d.LQ)?.index||null,i=a.zl.get(d.wm);(0,c.W)(e,r,n,i)}a.zl.set(d.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=a.zl.get(d.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,r,n){a.zl.set(d.MX,{x:e,y:r,height:n,width:0})}startSearchSession(){let e=(0,s.MZ)();return a.zl.set(d.wm,e),e}endSearchSession(){let e=a.zl.get(d.wm);return a.zl.set(d.wm,""),e}showVisualBellForPastedMentions(e,r){u.Y5.dispatch(l.F.enqueue({message:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:r}),button:{text:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{i.fp8.allowSendNotificationsForPastedMentions(e)}}}))}}function m(){new p}},213190:(e,r,n)=>{"use strict";n.d(r,{LZ:()=>l,qM:()=>s});var i=n(411855),a=n(587670);n(358145);var o=n(7860);function s(){let{isRightPanelCollapsed:e,isLeftPanelCollapsed:r}=i.useContext(o.t);return r||e}let l=new class{isMinimizedInUI3(){var e,r;return!!a.Ez5&&(e=a.Ez5.uiState().leftPanelCollapsedUI3.getCopy(),r=!a.Ez5.uiState().showPropertiesPanel.getCopy(),e||r)}}},843495:(e,r,n)=>{"use strict";n.d(r,{Br:()=>D,D$:()=>b,Dh:()=>y,G9:()=>w,GL:()=>v,Hr:()=>E,NT:()=>P,T8:()=>M,Uc:()=>O,XP:()=>G,aB:()=>R,bw:()=>L,gX:()=>C,hq:()=>N,i:()=>S,iT:()=>A,n_:()=>V,tJ:()=>I,wr:()=>T});var i=n(296853),a=n(634832),o=n(587670),s=n(534611),l=n(776250),c=n(344780),d=n(297666),u=n(517333),p=n(585654),m=n(744939),h=n(38329);n(83909);var _=n(356390),g=n(848661),f=n(279702);let E=s.dI(s.Hr);function y(e){o.Egt.addToSelection(e)}function b(e){o.Egt.removeFromSelection(e)}function I(e,r=!0){o.Egt.replaceSelection(e,r)}function T(){o.Egt.clearSelection()}function v(e,r){o.Egt.selectNodesInRange(e,r)}function S(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.name=r)}function w(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=r)}function A(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=r)}function N(e){o.Egt.expandUpToRoot(e)}function C(e){o.glU?.updateAppModel(e)}function O(e){C({hoveredNode:e})}function L(e){C({devHandoffCodeLanguage:e})}function R(e){C({devHandoffPreferences:e})}function P(e){return o.Ez5?.propertiesPanelState()?.propertiesPanelTab?.set(e)}function D(e){C({activeTextReviewPlugin:e})}let k=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","miterLimitAngle","terminalCap","dashCap","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardTextAlignVertical","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","whiteboardCodeBlockLanguage","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","platformShapeFillType","platformShapeOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","imageOverlayPaint","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","themeId","shadow","blur","htmlWidgetYouTubeVideoURL","htmlWidgetGoogleMapLocation","htmlWidgetGoogleMapZoom","htmlWidgetMailchimpFormURL","htmlWidgetMailchimpInputPlaceholder","htmlWidgetMailchimpSubmitButtonLabel","htmlWidgetMailchimpLayoutIsVertical","link","appear","hover","press","focus","scrollParallax","scrollTransform"];function M(e,r,n,s,l){c.rH.start("update-selection-properties");try{!function(e,r,n,s,l){let c={...e},d=function(e){let r=Object.create(null);for(let n of k)if(n in e){let i=e[n];i!==g.oV&&(r[n]=i),delete e[n]}return r}(c),u=function(e){let r={guid:{sessionID:0,localID:0}};for(let n in e){let i=e[n];i!==g.oV&&(r[n]=i)}return r}(c);if(s=function(e){switch(e){case f.zk.YES:case f.zk.YES_FORCE_TRACKING_AS_EDIT:case f.zk.YES_WITHOUT_TRACKING_AS_EDIT:return f.zk.YES;default:return f.zk.NO}}(s),r?.guid){if(d){let e=d.fontFamily&&d.fontStyle;if((0,a.assertDev)(!e,"UI should never simultaneously update font family and style"),d.fontFamily&&r.fontStyle&&(u.fontName={family:d.fontFamily,style:r.fontStyle,postscript:""}),r.fontFamily&&d.fontStyle&&(u.fontName={family:r.fontFamily,style:d.fontStyle,postscript:""}),d.fontVariations&&(u.fontVariations=d.fontVariations),d.variableConsumptionInfo?.variableConsumptionMap){let e=d.variableConsumptionInfo.variableConsumptionMap;u.variableConsumptionMap=(0,f.w3)(e)}}let e=i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});o.glU?.updateSelectedStyleProperties(e,n,s===f.zk.YES),(0,a.assertDev)(null!=r.styleType,"unknown style type"),F(r.styleType)}else{let e=i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});o.Egt.updateSelectionProperties(d,n,l,s===f.zk.YES,e)}}(e,r,n,s,l)}catch(e){throw e}finally{c.rH.stop("update-selection-properties")}}let F=(0,d.s)(e=>{(0,l.sx)("Style Edited",{styleType:e})},500),x=Object.create(null);var U=(e=>(e[e.SceneGraph=0]="SceneGraph",e[e.AppModel=1]="AppModel",e[e.Selection=2]="Selection",e[e.SelectionProperties=3]="SelectionProperties",e))(U||{});let B=new Set([0,1,2,3]);function V(e=B){e.has(0)&&_.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",H),e.has(2)&&(_.Y5.fromFullscreen.on("selection:addSelectors",K),_.Y5.fromFullscreen.on("selection:removeSelectors",j),_.Y5.fromFullscreen.on("selection:replaceSelectors",z)),e.has(1)&&_.Y5.fromFullscreen.on("updateAppModel",Y),e.has(3)&&_.Y5.fromFullscreen.on("selectionPropertiesUpdate",$)}function G(){let e=x;return x=Object.create(null),e}function H(e){(0,a.assertDev)(!x.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),x.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function W(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function K(e){(0,a.assertDev)(!x.selection?.replace,"addSelectors and replaceSelectors called on the same frame"),x.selection||=Object.create(null),x.selection.add||=Object.create(null),x.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=W(r,e),i=W(r,e+4),a=s.dI({sessionID:n,localID:i});x.selection.add[a]=!0}}function j(e){(0,a.assertDev)(!x.selection?.replace,"removeSelectors and replaceSelectors called on the same frame"),x.selection||=Object.create(null),x.selection.remove||=Object.create(null),x.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=W(r,e),i=W(r,e+4),a=s.dI({sessionID:n,localID:i});x.selection.remove[a]=!0}}function z(e){(0,a.assertDev)(!x.selection?.add,"addSelectors and replaceSelectors called on the same frame"),(0,a.assertDev)(!x.selection?.remove,"removeSelectors and replaceSelectors called on the same frame"),x.selection||=Object.create(null),x.selection.replace||=Object.create(null),x.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=W(r,e),i=W(r,e+4),a=s.dI({sessionID:n,localID:i});x.selection.replace[a]=!0}}function Y({changes:e,shouldIgnoreUserPrefs:r}){if(u.eD){let r;let n={},i={},a="actionEnabled__";for(let r of Object.keys(e))if(r.startsWith(a))n[r.substr(a.length)]=e[r].value;else{let n=(0,p.m)(r);if(void 0!==n){let a=e[r].value;for(let{name:e,propertyValue:r}of n.actions)i[e]=a===r}}e.keyboardShortcuts&&(r=(0,m.K)(e.keyboardShortcuts.value));let o=Object.keys(n).length>0,s=Object.keys(i).length>0,l=void 0!==r;(o||s||l)&&u.eD.updateFullscreenMenuState({actionEnabledState:o?n:void 0,actionCheckedState:s?i:void 0,actionShortcuts:r})}let n=Object.create(null),i=Object.create(null);for(let a in e)n[a]=e[a].value,i[a]=r?.[a];x.appModelChanges={...x.appModelChanges,...n},x.appModelChangesShouldIgnoreUserPrefs={...x.appModelChangesShouldIgnoreUserPrefs,...i}}function $(e){let r=e.buffer&&e.buffer.length>0?i.w.decodeMessage(e.buffer):null;delete e.buffer,(0,a.assertDev)(!x.selectionProperties,"Updating selectionProperties multiple times on a frame"),x.selectionProperties={message:r,derivedProperties:e}}},661060:(e,r,n)=>{"use strict";n.d(r,{DI:()=>u,Ds:()=>g,e8:()=>p,vS:()=>m});var i=n(587670),a=n(38329),o=n(988022);let s=!1,l=!1,c=!1,d=!1;function u(){l=!0,h()}function p(){s=!1,l=!1,c=!1,d=!1}function m(e,r){let n=a.D.getState(),i=n.openFile?.key;i&&!d&&((0,o.ds)("Show Missing Fonts Popover",i,n,{fontListLoaded:e,counts:r,timeNow:performance.now()}),d=!0)}function h(){if(s&&l&&!c){let e=a.D.getState(),r=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),n=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,l=!1;void 0!==n&&void 0!==s&&(l=null!=s[n]),(0,o.ds)("has_missing_font",n,e,{has_google_fonts:r.has(i.jXp.GOOGLE),has_local_fonts:r.has(i.jXp.LOCAL),has_shared_fonts:r.has(i.jXp.SHARED),is_community_duplicated_file:l}),c=!0}}class _{markMissingFontScannerAsComplete(){s=!0,h()}}function g(){new _}},113058:(e,r,n)=>{"use strict";n.d(r,{M:()=>s});var i=n(587670),a=n(595991),o=n(279702);class s{getValue(){let e=new Map;for(let r of a.z.instance.getDirectlySelectedNodes()){let n=this.getValueForNode(r);null!=n&&e.set(r.guid,n)}return e}onChange(e,r,n){let s=!1;for(let i of a.z.instance.getDirectlySelectedNodes()){let a=e.get(i.guid);if(null!=a)try{let e=r(a);this.setValueForNode(i,e,n===o.zk.NO),s=!0}catch(e){}}n!==o.zk.NO&&s&&i.glU.triggerAction("commit",{})}}},493862:(e,r,n)=>{"use strict";n.d(r,{AW:()=>f,Ak:()=>v,Cd:()=>E,Ff:()=>b,IL:()=>N,Ki:()=>S,LD:()=>g,PV:()=>w,W5:()=>y,WA:()=>C,Xk:()=>A,Xl:()=>O});var i=n(587670);n(707458),n(966712);var a=n(374626),o=n(776621),s=n(30637),l=n(356390),c=n(554294),d=n(479296),u=n(730956);let p=null,m=0,h=!1,_=!1;function g(e){switch(e){case i.kul.UNJOINED:return"unjoined";case i.kul.UNJOINED_FROM_ERROR:return"unjoined_from_error";case i.kul.UNJOINED_FROM_VALIDATION_FAILURE:return"unjoined_from_validation_failure";case i.kul.GOT_SCHEMA:return"got_schema";case i.kul.JOINING_INITIAL_LOAD:return"joining_initial_load";case i.kul.JOINING_RECONNECT:return"joining_reconnect";case i.kul.JOINING_RECONNECT_AWAITING_QUERY_REPLY:return"joining_reconnect_awaiting_query_reply";case i.kul.JOINED:return"joined";case i.kul.SHOULD_UPGRADE:return"should_upgrade";case i.kul.UPGRADING:return"upgrading";case i.kul.WAITING_FOR_RELOAD:return"waiting_for_reload";case i.kul.DETACHED:return"detached";default:return"unknown"}}function f(){_||(_=!0,setInterval(()=>l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!1),250),window.addEventListener("online",()=>{navigator.onLine&&l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!0)}),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!0)}))}function E(e){p||(p=function(){try{let e=new Blob(["("+function(){onmessage=e=>setTimeout(()=>self.postMessage(""),e.data)}+")()"],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(e));return(e,n)=>{r.onmessage||(r.onmessage=()=>{r.onmessage=null,e()},r.postMessage(n))}}catch(e){return console.error(e),(e,r)=>{setTimeout(e,r)}}}()),m=e,h||function e(){m&&(h=!0,p(function(){h=!1,m&&i.h3O.flush(),e()},m))}()}function y(e){let r=v(),n=S(r);return i.h3O.startLoadingAllPages(r,e),n.then(()=>{a.zl.set(c.nc,!1)}),n}let b=(0,d.n)(()=>i.h3O.isIncrementalSession()||i.h3O.isValidatingIncremental()),I=1,T=new Map,v=()=>I++;function S(e){return new Promise((r,n)=>{T.set(e,[r,n])})}function w(e){let r=T.get(e);if(r){let[n,i]=r;n(),T.delete(e)}}function A(){T.forEach((e,r)=>{let[n,i]=e;i()}),T.clear()}function N(e,r,n=i.DPQ.CONTAINING_PAGE){(0,s.nl)();let a=v(),o=S(a),l=n===i.DPQ.PLUGIN;return i.h3O.subscribeToContainingPage__DO_NOT_USE_DIRECTLY(e,a,r,l),o}function C(e,r,n=i.DPQ.CONTAINING_PAGE){if(0===e.length)return Promise.resolve();(0,s.nl)();let a=v(),o=S(a),l=n===i.DPQ.PLUGIN;return i.h3O.subscribeToContainingPages__DO_NOT_USE_DIRECTLY(e,a,r,l),o}function O(e){let r=()=>{let n=v();return new Promise(async(r,a)=>{e.delete("0:0"),(0,o.Lo)("Autosave",`Requesting dependencies for ${e.size} nodes while loading incrementally`,void 0,{logToConsole:i.NUh.ALWAYS}),await (0,u.oJ)(i.kul.JOINED),T.set(n,[r,a]),i.h3O.autosaveSubscribeToContainingPages(e,n)}).catch(()=>r())};return r()}},74505:(e,r,n)=>{"use strict";n.d(r,{EE:()=>o,Om:()=>l,lB:()=>s});var i=n(587670);let a={};function o(e,r,n){return a[e]=n,i.glU.addNodePositionSubscription(e,r)}function s(e){delete a[e],i.glU.removeNodePositionSubscription(e)}function l(e,r){let n=a[e];n&&n(r)}},177505:(e,r,n)=>{"use strict";n.d(r,{$P:()=>E,dh:()=>y}),n(411855),n(188507),n(752795);var i=n(587670);n(86625);var a=n(534611),o=n(707458);n(966712);var s=n(392592),l=n(331972);n(662275);var c=n(31913);n(349410),n(83909);var d=n(929715);n(396226),n(356390),n(843495),n(493862);var u=n(457630);n(29680);var p=n(678340);n(335682),n(99506),n(243987);var m=n(301462),h=n(601607),_=n(694517);n(300874),n(851363);var g=n(286723);n(129531);let f=0;async function E(e,r,n,h,E,y,b,I,T,v){let S;if(v&&(0,l._)(h,v,"overview_set_current_page"),e===r)return;let w=performance.now(),A=f+=1;y("action_page_switch_initiated",{pageSwitchId:f,oldPageNodeId:r,newPageNodeId:e,isIncremental:i.h3O.isIncrementalSession(),isAlreadyLoaded:E,currentNodeCount:i.CeL?.getFileNodeCount()},{forwardToDatadog:!0});let N=new Promise(e=>{S=e});i.Ez5.currentPageState().requestedPageChange.set(e),requestAnimationFrame(()=>{(0,d.J)(async()=>{if(await o.q.instance.setCurrentPageFromNodeAsync(e),r!==e){let o=(0,_.vw)(n),l=(0,p.P3)()>=75,d=l?new Set:n.fetchedPageIds||new Set;if(o&&(l&&h((0,c.EB)({fetchedPageIds:d})),h((0,c.SR)({isLoadingPage:!0})),h((0,_.yH)({version:o,currentPageNodeId:e,fetchedPageIds:d,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),T&&b&&I){let r=i.glU.navigateToFirstVisibleOrClosestChangeForPage(e);r===a.AD?h(s.F.dequeue({matchType:"view_changes"})):(i.Egt.setSelectedNodeAndCanvas(r,!0),b((0,u.QZ)({nodeId:r,...g.ob}),g.kh),I(r))}m.F.trackFromFullscreen("action_page_switch",{oldPageNodeId:r,newPageNodeId:e,pageSwitchIdForTracking:A,duration:performance.now()-w,currentNodeCount:i.CeL?.getFileNodeCount()},!0)}i.Ez5.currentPageState().requestedPageChange.set(""),S()})}),await N}function y(e=!0){return(0,h.Fk)(r=>{if(!e)return"0:1";let n=r.getCurrentPage();return n?n.guid:"0:1"})}},618056:(e,r,n)=>{"use strict";n.d(r,{E3:()=>N,Lt:()=>M,N9:()=>L,Ou:()=>w,Tm:()=>P,bn:()=>A,c4:()=>x,iC:()=>F,n_:()=>k,qg:()=>R,rC:()=>E,sb:()=>C,x$:()=>S,y7:()=>O});var i=n(296853),a=n(634832),o=n(752795),s=n(587670),l=n(689136),c=n.n(l),d=n(568214),u=n(38329),p=n(988022),m=n(356390),h=n(774191),_=n(241395),g=n(247908),f=n(848661);let E={r:196/255,g:196/255,b:196/255,a:1},y=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],b=y.map(g.Ug),I=e=>{let r=_.s.identity();return r.translate(.5,.5),e&&(T(e.leftEndCap)||T(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?r.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(r.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?r.rotate(Math.PI/2):e.angle<-135||e.angle>135?r.rotate(Math.PI):e.angle>45&&e.angle<=135&&r.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&r.rotate(Math.PI),e&&e.hasReflection&&r.rotate(Math.PI),r.translate(-.5,-.5),r.toFigMatrix()};function T(e){if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}}let v=null;function S(e){if(!A(e.type))return null;if(0===e.stops.length){let r=u.D.getState();(0,p.ds)("zero_stop_gradient_detected",r.openFile?.key,r),e.stops.push({color:d.FN,position:0})}return e}function w(e){return C(e.type)?e:null}function A(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function N(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}function C(e){return null!=e&&"SOLID"===e}function O(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}function L(e){return!e||(0,f.gl)(e)?null:e.map(O).filter(o.isNotNullish)}function R(e){return Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join("")}let P=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,r,n)=>`${n}-${r}-${e}`,this.initPaint=(e,r,n,i,a,o)=>this.initPaintWithDefaultImagePaint(e,r,n,i,v,o??!1,a),this.getPaintStopsAndStopsVar=(e,r,n,i)=>{let a=i?[{position:0,color:n},{position:1,color:e}]:[{position:0,color:e},{position:1,color:n}],o=a.map(g.Ug);return r&&(o[i?1:0].colorVar=r),{stops:a,stopsVar:o}},this.initPaintWithDefaultImagePaint=(e,r,n,i,a,o,s)=>{let l={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?l.color=r:A(e)?(l.stops=y,l.stopsVar=b,l.transform=I(s)):N(e)&&a&&("VIDEO"===e?this.transferVideoAttributes(a,l):this.transferImageAttributes(a,l)),!n)return l;let c=this.cachePaint(n,i);if(this.transferGeneralAttributes(c,l),"SOLID"===e)c.color?this.transferColorAttributes(c,l):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],l);else if(A(e)){if(c.stops)this.transferGradientAttributes(c,l);else if(c.color){let e=x(c.color,o),r=(s&&T(s.rightEndCap))??!1,{stops:n,stopsVar:i}=this.getPaintStopsAndStopsVar({...c.color,a:1},c.colorVar,e,o?!r:r);l.stops=n,l.stopsVar=i}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,l),l.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,l);return l},this.cachePaint=(e,r)=>(this.cache[r]=this.cache[r]||c()(e),A(e.type)?this.transferGradientAttributes(e,this.cache[r]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[r]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[r]),this.cache[r].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[r]),this.cache[r]),this.transferGeneralAttributes=(e,r)=>{r.opacity=e.opacity,r.blendMode=e.blendMode,r.visible=e.visible},this.transferColorAttributes=(e,r)=>{r.color=e.color},this.transferGradientAttributes=(e,r)=>{r.stops=e.stops,r.stopsVar=e.stopsVar,r.transform=e.transform},this.transferImageAttributes=(e,r)=>{r.image=e.image,r.imageThumbnail=e.imageThumbnail,r.animatedImage=e.animatedImage,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.imageShouldColorManage=e.imageShouldColorManage,r.video=void 0},this.transferVideoAttributes=(e,r)=>{r.imageThumbnail=e.imageThumbnail,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.video=e.video,r.image=void 0},this.clearCache()}},D=!1;function k(){D||(D=!0,m.Y5.onReady().then(()=>{let e=s.glU.requestDefaultImageStyle(),r=i.w.decodeMessage(e);r.nodeChanges&&r.nodeChanges.length>0&&r.nodeChanges[0].fillPaints&&(v=r.nodeChanges[0].fillPaints[0])}))}function M(e,r){let n=O(e);if(!n)return e;if("STRETCH"===n.imageScaleMode){let e=_.s.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*r)),e.translate(-.5,-.5),e.multiply(_.s.fromFigMatrix(n.transform)),{...n,transform:e.toFigMatrix()}}return{...n,rotation:n.rotation+r}}function F(e,r){let n=S(e);if(n){let e=n.stops;return r.index<e.length?e[r.index].color:n.stops[0].color}{let r=w(e);return(0,a.assertDev)(!!r,"paint is neither a gradient nor a solid"),{...r.color,a:r.opacity??1}}}function x(e,r=!1){var n={...e,a:0};if(!r){let r=(0,h.qN)(e),i=r.v>=.5?r.v-.4:r.v+.4;n=(0,h.kE)({...r,v:i})}return n}},630331:(e,r,n)=>{"use strict";n.d(r,{Ad:()=>Y,B8:()=>K,Cd:()=>er,Cr:()=>ec,Dd:()=>W,Dg:()=>z,E7:()=>ea,H0:()=>X,HF:()=>Z,JA:()=>et,LH:()=>ee,P2:()=>en,PY:()=>eu,Ts:()=>eb,Ug:()=>j,V:()=>H,Zp:()=>es,fl:()=>eE,iW:()=>$,jp:()=>em,k6:()=>G,kq:()=>el,o3:()=>ep,p7:()=>Q,se:()=>J,sl:()=>eo,vK:()=>q,w4:()=>ei,wl:()=>ed,ye:()=>O,zw:()=>L}),n(634832);var i=n(752795),a=n(587670),o=n(776250),s=n(344780),l=n(513654),c=n(269584),d=n(966712),u=n(951158),p=n(574705),m=n(84917),h=n(964172),_=n(988022),g=n(356390),f=n(122983),E=n(15859);let y={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},b=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],I=1,T=!1,v=null,S=0,w=null,A=0,N=-1/0,C=0,O=null,L=null,R=null,P=null,D=new c.zF,k=new c.zF,M=new c.zF,F=new c.zF,x=new c.zF,U=new c.xV,B={},V=!1;function G(e,r){I=e,T=(0,i.isNotNullish)(r),O&&O.setMultiplayerPerfInfo({multiplayerUserCount:I,ongoingSpotlight:T})}function H(){v=null,w=null,O?.stopRecordingAndLog("closing-file"),O?.setFileInfo(null,"unknown")}function W(e,r){O&&(O.setFileInfo(e,(0,_.Dc)(r)),O.startRecording(!0),(0,E.Jr)().setPendingImagesCallback(O.pendingImagesChanged)),v=e,w=performance.now(),S++;let n=(0,d.tl)().editing_file;1===S&&n&&(0,o.sx)("Cold Boot Document Load",{fileKey:v,fileVersion:a.i6g.currentFileVersion(),loadedTime:w,fileNodeCount:a.CeL.getFileNodeCount(),fileTeamId:n.team_id,fileParentOrgId:(0,d.tl)().org_id})}function K(e){O?.setFileInfo(v,_.Dc(e))}function j(){O?.stopRecordingAndLog("about-to-rebuild-scene")}function z(){O?.startRecording(!1)}function Y(){O?.recordSingleFrameNamedEvent("tileRenderingActive")}function $(){O?.recordSingleFrameNamedEvent("createTableActive")}function q(){O?.recordSingleFrameNamedEvent("editTableTextActive")}function Z(){O?.recordSingleFrameNamedEvent("reorderTableSpanActive")}function X(){O?.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function J(){O?.onNodeDragStart()}function Q(){O?.onNodeDragEnd()}function ee(e){O?.onTileRendererChanged(e)}function et(){O?.onContextRestored()}function er(e){O?.updateMaxRenderLayerCount(e)}function en(e){O?.updateMaxRenderedTileBytesUsed(e)}function ei(){O?.incrementNumAnimationsFromCpp()}function ea(){O?.incrementNumAnimationsFromTs()}function eo(){D.setIsActive()}function es(){k.setIsActive()}function el(){M.setIsActive()}function ec(){F.setIsActive()}function ed(){x.setIsActive()}function eu(){O?.recordSingleFrameNamedEvent("createStickyActive")}function ep(){O?.recordSingleFrameNamedEvent("differentSectionClicked")}function em(e){O?.recordSingleFrameNamedEvent(l.jY(e))}let eh=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function e_(e){let{fileKey:r,fileNodeCount:n,multiplayerUserCount:i,ongoingSpotlight:a,recentInteractions:o,secondsSinceLoaded:s,version:l,randomID:c}=e,d={fileKey:r,fileNodeCount:n,multiplayerUserCount:i,ongoingSpotlight:a,secondsSinceLoaded:s,version:l,randomID:c,reportCount:A};for(let e=0;e<o.length;e++)d[`recentInteractions.${e}`]=JSON.stringify(o[e]);return(0,p.U)(e.deviceInfo,d),(0,u.Dy)(e.nodeTypeHistogram,d,"nodeTypeHistogram"),d}function eg(e){(0,o.sx)("Slow Editor Interaction",e),N=performance.now(),C=e.duration}function ef(...e){}function eE(){if(!g.Y5?.isReady())return;let e={},r=s.rH.report(),n=0;for(let i of r)!function r(n,i=""){let a=i.length>0?`${i}.${n.name}`:n.name,o=B[a]||n.hitCount,s=n.hitCount-o;s>n.elapsedTimes.length&&(V||(console.warn(`Too many elapsed hits of ${a} since last report`),V=!0),s=n.elapsedTimes.length);let l=0,c=n.elapsedTimes.length;for(let e=c-s;e<c;e++)l+=n.elapsedTimes[e];for(let i of(e[a]=l,B[a]=n.hitCount,n.children))r(i,a)}(i),n+=e[i.name];!function(){var r;if(n/1e3<.2)return;let[i,o]=null===v||null===w?[null,[]]:[{deviceInfo:(0,p.N)(),fileKey:v,fileNodeCount:a.CeL.getFileNodeCount(),multiplayerUserCount:I,ongoingSpotlight:T,nodeTypeHistogram:a.CeL.getNodeTypeHistogram(),recentInteractions:a.CeL.getRecentInteractions(),secondsSinceLoaded:(performance.now()-w)/1e3,version:1,randomID:(0,f.ds)(),reportCount:A},a.CeL.getSlowInteractions()];if(null==i)return;let s={};for(let r in e)-1!==b.indexOf(r)&&(s[r]=e[r]/1e3);let l=o.map(e=>{let r=e.interaction,n={kind:"interaction",type:r.type,subtype:r.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...e_(i)};if(eh.forEach(e=>n["modifier."+e]=null),"MOUSE"===r.type)for(let e of(n.collapsed=r.collapsed,eh))n["modifier."+e]=-1!==r.modifiers.indexOf(e);return(0,u.Dy)(s,n,"timer"),n});for(let r in e){let n=e[r]/1e3,a=y[r];if("number"==typeof a&&n>=a){let e={kind:"timer",type:r,subtype:null,frame:null,collapsed:!1,duration:n,...e_(i)};(0,u.Dy)(s,e,"timer"),eh.forEach(r=>e["modifier."+r]=null),l.push(e)}}if(0===l.length)return;let c=[],d=l,m=60-(performance.now()-N)/1e3;if(0===(d=d.filter(e=>m<=0||e.duration>=2*C)).length&&c.push(`we're in the report cooldown period (${m}s to go) and no reports were long enough to override it (the last report duration was ${C}s)`),m>0&&d.length,null===w)return;let h=60-(performance.now()-w)/1e3;h>0&&c.push(`we're in the document loading cooldown period (${h}s to go)`),c.length>0?1===(r=c).length?r[0]:2===r.length?(r[0],r[1]):(r.slice(0,r.length-1).join(", "),r[2]):((d=d.sort((e,r)=>e.duration-r.duration)).forEach(eg),A++)}(),a.CeL.clearNodeTypeHistogram(),a.CeL.clearSlowInteractions()}function ey(e){let r=0,n=0,i=[];for(let a of e)1===a.path.length&&"frame"===a.path[0]?(n=a.elapsedTime,i.push(a)):a.path.length>1&&"frame"===a.path[0]?(r+=a.elapsedTime,i.push(a)):1===a.path.length&&i.push(a);if(r>0){let e=n-r;i.push({path:["frame","unaccounted-time"],elapsedTime:e})}return i}function eb(){if(!O&&(0,d.kc)().frame_distribution_tracker_edit){let e=e=>{let r=a.AiE.getAndClearHistogramBatchFields(),n=new Map;r.forEach((e,r)=>{n.set(r,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(n))};(O=new l.AH("editor_frame_distributions",ey,2,!0,new h.s,r=>{e(r)},!1,(e,r=!1)=>{let n=a.AiE.getAndClearSlowFrameTrackerFields(),i=new Map;n.forEach((e,r)=>{i.set(r,e>0)}),e[m.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(i));let o=a.yuz.getFullscreenCurrentFrameGpuMetricsJSON();e[m.N.gpuMetricsCurrentFrameKey]=o.toString();let s=a.fZb.getCurrentFrameCpuTimerTreeJSON();if(e[m.N.cpuTimerTreeCurrentFrameKey]=s.toString(),r){let r=a.yuz.getFullscreenPreviousFrameGpuMetricsJSON();e[m.N.gpuMetricsPreviousFrameKey]=r.toString();let n=a.fZb.getPreviousFrameCpuTimerTreeJSON();e[m.N.cpuTimerTreePreviousFrameKey]=n.toString()}let l=a.Ez5.activeRunningAnimations();e[m.N.activeAnimationsKey]=l},e=>{a.AiE.clearSlowFrameTrackerFields(),a.yuz.nextFrame(e),a.fZb?.nextFrame(e)})).addEventTracker("zoomActive",new c.vu),O.addEventTracker("panActive",new c.H0),O.addEventTracker("viewportHasGaps",new c.as(a.pWM.DEFINITELY_COVERED_ONLY)),O.addEventTracker("viewportIncludingOutdatedHasGaps",new c.as(a.pWM.DEFINITELY_COVERED_AND_OUTDATED)),O.addEventTracker("multipleMultiplayerUsersInFile",new c.nc(2,()=>I)),O.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new c.Pn(2,()=>I)),O.addEventTracker("viewportHasBlurryRegions",new c.eO(1)),O.addEventTracker("viewportHasVeryBlurryRegions",new c.eO(.5)),O.addEventTracker("viewportIsBlurry",new c.I7(1)),O.addEventTracker("viewportIsVeryBlurry",new c.I7(.5)),O.addEventTracker("timeSlicedEditRenderingActive",new c.t8),O.addEventTracker("stalenessIsHigh",new c.bF(1e3)),O.addEventTracker("stalenessIsVeryHigh",new c.bF(2e3)),O.addEventTracker("moveCursorActive",new c.vw),L=new c.Ti,O.addEventTracker("cursorChatActive",L),R=new c.W,O.addEventTracker("cursorReactionActive",R),O.trackOtherUserCursorMoved(),P=new c.Fy,O.addEventTracker("devModeAnnotationsVisible",P),O.addEventTracker("independentLayerAnimationActive",D),O.addEventTracker("nonIndependentLayerAnimationActive",k),O.addEventTracker("independentLayerActive",M),O.addEventTracker("independentLayerAdded",F),O.addEventTracker("independentLayerRemoved",x),O.addEventTracker("isTypingTextActive",U)}}},927657:(e,r,n)=>{"use strict";n.d(r,{U:()=>o});var i=n(587670);let a=[];function o(e){for(let r of a)r(e===i.dYj.YES)}},46878:(e,r,n)=>{"use strict";n.d(r,{av:()=>I});var i=n(411855),a=n(318381),o=n(265241),s=n(387644),l=n(615777),c=n(897379),d=n(773959),u=n(821498),p=n(468242),m=n(599741),h=n(533589),_=n(511960),g=n(974502),f=n(473199),E=n(93207),y=n(636540),b=n(583719);function I(e){switch(e){case"CLOSE_OVERLAY":return i.createElement(a.r,null);case"GO_BACK":return i.createElement(o.E,null);case"NAVIGATE_TO":default:return i.createElement(s.N,null);case"OPEN_OVERLAY":return i.createElement(l.x,null);case"OPEN_URL":return i.createElement(c.r,null);case"SCROLL_TO":return i.createElement(d.M,null);case"SWAP_WITH":return i.createElement(u.M,null);case"SWAP_STATE_TO":return i.createElement(p.x,null);case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return i.createElement(m.H,null);case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return i.createElement(h.D,null);case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return i.createElement(_.s,null);case"UPDATE_MEDIA_SKIP_TO":return i.createElement(g.C,null);case"SET_VARIABLE":return i.createElement(f.D,null);case"SET_VARIABLE_MODE":return i.createElement(E.E,null);case"CONDITIONAL":return i.createElement(y.$,null);case"NONE":return i.createElement(b.i,null)}}},497306:(e,r,n)=>{"use strict";n.d(r,{DS:()=>c,GI:()=>p,MT:()=>u,Ql:()=>m,Si:()=>s,UP:()=>h,hD:()=>l,hV:()=>o,oY:()=>d});var i=n(561596),a=n(707458);function o(e,r,n){if("stop"===n(r))return"stop";for(let i of r.childrenGuids)if("stop"===o(e,e.get(i),n))return"stop"}function s(e,r,n){let i=e.get(r)?.parentNode||null;for(;i;){if("CANVAS"===i.type||"DOCUMENT"===i.type)return;if("stop"===n(i))break;i=i.parentNode}}function l(e,r,n){let i=e.get(r);i&&"stop"!==n(i)&&s(e,r,n)}function c(e,r){let n=[];return s(e,r,e=>{n.push(e)}),n}function d(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function u(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function p(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name?.includes("FigJam Stamp Icon")}function m(e,r){let n=null;return s(e,r,e=>{if(!n){if("NONE"!==e.scrollDirection)return n=e,"stop";{let r=e.parentNode;if(r&&r&&"CANVAS"===r.type&&r.visible&&(0,i.F)(e.type)&&e.visible)return n=e,"stop"}}}),n}function h(){let e=a.q.instance,r=[];return o(e,e.getRoot(),e=>{r.push(e.guid)}),r}},279994:(e,r,n)=>{"use strict";n.d(r,{h:()=>a});let i=[];function a(e){for(let r of i)r(e)}},990922:(e,r,n)=>{"use strict";n.d(r,{$4:()=>b,jI:()=>E,up:()=>y});var i=n(776250),a=n(517333),o=n(38329),s=n(218549),l=n(988022),c=n(356390),d=n(150944),u=n(976269),p=n(109381),m=n(376142),h=n(253999),_=n(26277),g=n(264126);let f=new class{constructor(){this._suggestionsCache=new s.q(100),this._textReviewPluginRunner=new _.X,this._currentPromise=null}async setCurrentImplementation(e,r){let n=await (0,p.LJ)(),a=await (0,p.N_)(),s=(0,p.oz)();await e.initialize(r,[...n,...a,...s]),this._current=e;let c=await (0,p.LE)();console.log(`[spell-check] using implementation: ${this._current?.name}. Current language: ${r}. Supported languages: ${c}`);let d=o.D.getState().selectedView,u=(0,l.Dc)(d.editorType);(0,i.sx)("Spell Check Ready",{productType:u,language:r,implementationName:this._current?.name,userIgnoreWordsCount:(n||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,p.x5)(),r=(0,h.up)(e),n=(0,p.Ev)(r);switch(e){case g.QC.DESKTOP:await this.setCurrentImplementation(new u.f,n);break;case g.QC.AGENT:await this.setCurrentImplementation(new d.UV,n);break;case g.QC.HUNSPELL:await this.setCurrentImplementation(new m.mz,n)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(r=>(this._suggestionsCache.set(e,r),r))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return _.X.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){return this._current?.name||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,r){if(e)return!0;try{let e=r.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]);if(!(e.includes("en")||e.includes("ru")))return!1}catch(e){}return!0}(!!a.eD,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function E(e){return await f.ensureImplementationLoaded(),f._suggestionsCache.reset(),f._current.setLanguage(e)}async function y(e){await E((0,p.Ev)(e)),c.Y5&&c.Y5.isReady()&&c.Y5.triggerAction("redo-spell-checking")}let b=f},270271:(e,r,n)=>{"use strict";n.d(r,{no:()=>c});var i=n(675678),a=n(707458),o=n(776621),s=n(769977);class l{getSummaryAsClipboardText(e){let r;let n=new a.q().get(e),l=n?.getWidgetSyncedState()["syncedState:ai-summary-items"],c=n?.getWidgetSyncedState()["syncedState:summarized-at"];try{r=JSON.parse(l)}catch(e){(0,o.$D)(i.FigmaTeam.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,s.Aq)(r,c)}}function c(){new l}},907009:(e,r,n)=>{"use strict";n.d(r,{fT:()=>o});var i=n(587670);class a{isUI3(){return i.Ez5?.uiState().isUI3.getCopy()??!1}showUI3Colors(){return i.Ez5?.uiState().showUI3Colors.getCopy()??!1}}function o(){new a}},424863:(e,r,n)=>{"use strict";n.d(r,{nd:()=>s});var i=n(587670),a=n(47506);let o=null;function s(e,r){o&&o.pasteID===e&&o.fileKey===r?o.offset=o.offset+1:o={pasteID:e,fileKey:r,offset:1},2===o.offset&&i.glU.shouldNudgeComponentCreationForSelection()&&(0,a.YQ)({id:"Upsell Libraries Valid Paste For Nudge"})}},227944:(e,r,n)=>{"use strict";n.d(r,{Zr:()=>o});var i=n(188507);n(794272);var a=n(279145);function o(e){return(0,i.d4)(r=>(0,a.Yh)(r.mirror.appModel,e))}},555074:(e,r,n)=>{"use strict";n.d(r,{kl:()=>l,lJ:()=>c});var i=n(411855),a=n(794272),o=n(356390),s=n(279702);function l(e){return(0,a.R)(r=>r.mirror.selectionProperties[e])}function c(e){return[l(e),i.useCallback((r,n=s.zk.YES)=>{o.Y5.updateSelectionProperties({[e]:r},{shouldCommit:n})},[e])]}},289704:(e,r,n)=>{"use strict";n.d(r,{c:()=>o,k:()=>s});var i=n(711525),a=n(623746);function o(e,r){let n=(e,n)=>{let i=[];return n?.forEach(n=>{n.variables?.forEach(n=>{i.push(a.GA(n,e,r))})}),i};if("team"===e.type&&e.value?.status==="loaded"){let r=e.value.data.file;if(r)return n({type:"team",file:r},r?.variableCollections)}if("community"===e.type&&e.value?.status==="loaded"){let r=(0,i.oA)(e.value.data.communityLibraryByHubFileId);if(r)return n({type:"hubFile",file:{id:r.hubFileId,libraryKey:r.libraryKey}},r?.variableCollections)}return[]}function s(e,r){if("team"===e.type&&e.value?.status==="loaded"){let n=e.value.data.file;if(n&&n.variableCollections)return n.variableCollections.map(e=>(0,a.cE)(e,{type:"team",file:n},r))}if("community"===e.type&&e.value?.status==="loaded"){let n=(0,i.oA)(e.value.data.communityLibraryByHubFileId);if(n&&n.variableCollections)return n.variableCollections.map(e=>(0,a.cE)(e,{type:"hubFile",file:{id:n.hubFileId,libraryKey:n.libraryKey}},r))}return[]}},289124:(e,r,n)=>{"use strict";n.d(r,{_:()=>h});var i=n(587670),a=n(776250),o=n(38329),s=n(737947),l=n(966712),c=n(27087),d=n(939863),u=n(392592),p=n(356390);class m{async pasteVariablesWithLocalizationPopupDEPRECATED(e,r,n){let m=Array.from(e.entries()).map(([e,r])=>`${e}-${r}`).join(","),h=`/api/variables/publish_state?keys=${m}`,_=(await (0,c.GD)(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,a.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=i.CWU.performVariableLocalizationFromPopup(g,r,n);if(p.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}async pasteVariablesWithLocalizationPopup(e,r,n){let m=Array.from(e.entries()).map(([e,r])=>`${e}|${r}`).join(","),h=`/api/variables/publish_state?keysAndLibrary=${m}`,_=(await c.Ay.post(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,a.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=i.CWU.performVariableLocalizationFromPopup(g,r,n);if(p.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}}function h(){new m}},869156:(e,r,n)=>{"use strict";n.d(r,{AZ:()=>w,BQ:()=>G,EP:()=>Q,G6:()=>D,K6:()=>k,Kd:()=>H,L5:()=>ee,M6:()=>et,Pt:()=>L,Rb:()=>O,SG:()=>X,SR:()=>N,bL:()=>K,hg:()=>B,iC:()=>q,jI:()=>Y,kf:()=>j,lC:()=>P,nN:()=>A,nR:()=>R,pN:()=>$,qd:()=>V,rW:()=>S,tZ:()=>x,u:()=>U,u5:()=>z,u8:()=>M,wM:()=>W,wX:()=>F,yp:()=>C});var i=n(411855),a=n(752795),o=n(215122),s=n(587670),l=n(677469),c=n.n(l),d=n(44948),u=n(966712),p=n(374626),m=n(38580),h=n(391388),_=n(588666),g=n(154483),f=n(696673);n(335682);var E=n(58032),y=n(173454),b=n(533573),I=n(875157),T=n(859703),v=n(289704);function S(e){let r=(0,p.md)(T.Gc);return Z(e?r[e]??[]:[])}function w(e){return(0,p.md)((0,T.A6)(e))}function A(){return(0,p.md)(T.qy)}function N(){O(),C(),(0,p.md)(T.xA),L(),R(),(0,p.md)(T.jt)}function C(){return Z((0,p.md)(T.TD))}function O(){return Z((0,p.md)(T.uk))}function L(){return(0,p.md)(T.bO)}function R(){return(0,p.md)(T.LC)}function P(e){return(0,p.md)((0,T.ZG)(e))}function D(e){let r=(0,i.useMemo)(()=>e?(0,T.Eo)(e):(0,m.eU)(null),[e]),n=(0,p.md)(r);if(n)return n;if(!e)return;let a=s.CWU.getSubscribedVariableSetInfo(e);if(a)return(0,y.Rn)(a)}function k(e,r){let n=function(e){let r=e?(0,T.hy)(e):(0,m.eU)(null);return(0,p.md)(r)}(e);return n?.modeValues?.[r]??void 0}function M(e,r){return U(e)?.modeValues?.[r]??void 0}function F(e){let r=(0,d.wm)(()=>e,[e]),n=(0,i.useMemo)(()=>(0,m.eU)(e=>r.map(r=>(0,a.isNotNullish)(r)?e(T.Cg)[r]??null:null)),[r]);return(0,p.md)(n)}function x(e){return U(e)?.name||(e?s.CWU.getVariableNameInStyleSelection(e)??void 0:void 0)}function U(e){let r=(0,i.useMemo)(()=>e?(0,T.Ev)(e):(0,m.eU)(null),[e]),n=(0,p.md)(r);if(n)return n;if(!e)return null;let a=s.CWU.getSubscribedVariableInfo(e);return a?(0,y.ZI)(a):null}function B(e,r){let n=(0,d.wm)(()=>e,[e]),a=(0,i.useMemo)(()=>(0,m.eU)(e=>n.map(n=>{if(!n)return null;let i=e((0,T.Ev)(n));if(i)return i;if(r){let e=s.CWU.getSubscribedVariableInfo(n);if(e)return(0,y.ZI)(e)}return null})),[r,n]);return(0,p.md)(a)}function V(e,r){let n=(0,d.wm)(()=>e,[e]),a=(0,i.useMemo)(()=>(0,m.eU)(e=>{let i={};return n.forEach(n=>{if(!n)return;let a=(0,T.BJ)(n,r??{});if(a){i[n]=e(a);return}i[n]=null}),i}),[n,r]);return(0,p.md)(a)}function G(e,r){let n=(0,i.useMemo)(()=>e?(0,T.BJ)(e,r??{}):(0,m.eU)(null),[e,r]);return(0,p.md)(n)}function H(e){let r=U(e),n=D(r?.variableSetId);return n?"LOCAL"===n.subscriptionStatus?n.keyForPublish:n.key:null}function W(e){let r=(0,i.useMemo)(()=>(0,T.Oj)(e),[e]),n=(0,p.md)(r);return(0,d.k9)(()=>{let e={};for(let r of Object.values(n))if("loaded"===r.status)for(let n of r.data.variableCollection?.variables??[])e[(0,o.ey)(n.key)]=n;return e},[n])}function K(e){let r=(0,E.je)(),n=function(e){let r=(0,i.useMemo)(()=>e?(0,T.Oi)(e):(0,m.eU)(null),[e]);return(0,p.md)(r)}(e);return n&&"loaded"===r.status?r.data.find(e=>e.fileKey===n.file_key):null}function j(e){let r=(0,i.useMemo)(()=>!e||(0,f.wJ)(e)?(0,m.eU)(null):(0,T.cp)(e),[e]),n=(0,f.$Q)(e),a=(0,T.Ri)(n),o=(0,p.md)(r),s=(0,p.md)(a),l=(0,E.je)(),c=!!l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return h.Qw.loaded([]);if(o?.status==="loading"||o?.status==="disabled"||s?.status==="loading")return h.Qw.loading();let e=o&&h.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return h.Qw.loaded((0,v.c)(r,!1))},[c,o,s])}function z(e){let r=(0,i.useMemo)(()=>!e||(0,f.wJ)(e)?(0,m.eU)(null):(0,T.cp)(e),[e]),n=(0,f.$Q)(e),a=(0,T.Ri)(n),o=(0,p.md)(r),s=(0,p.md)(a),l=(0,E.je)(),c=l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return h.Qw.loaded([]);if(o?.status==="loading"||s?.status==="loading")return h.Qw.loading();let e=o&&h.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return h.Qw.loaded((0,v.k)(r,!1))},[c,o,s])}function Y(){let e=(0,E.je)(),r=(0,d.wm)(()=>e.data?.map(e=>e.fileKey)??[],[e.data]),n=(0,i.useMemo)(()=>(0,T.H2)(r),[r]),a=(0,p.md)(n);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(a));return"loaded"!==e.status?e:h.Qw.loaded({items:c()(Object.values(a).map(e=>(0,v.k)({type:"team",value:e},!1)))})},[a])}function $(e){let r=(0,E.je)(),n=(0,d.wm)(()=>r.data?.filter(e=>!f.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),a=(0,d.wm)(()=>r.data?.filter(e=>f.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),o=e?.enabled===!1,s=(0,i.useMemo)(()=>{if(o){let e={};return n.forEach(r=>{e[r]=h.Qw.disabled()}),(0,m.eU)(e)}return(0,T.Yt)(n)},[o,n]),l=(0,p.md)(s),u=(0,i.useMemo)(()=>{if(o){let e={};return a.forEach(r=>{e[r]=h.Qw.disabled()}),(0,m.eU)(e)}return(0,T.hz)(a)},[o,a]),_=(0,p.md)(u);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values({...l,..._}));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):h.Qw.loaded({libraryVariableSets:[...c()(Object.values(l).map(e=>(0,v.k)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,v.k)({type:"community",value:e},!1)))],libraryVariables:[...c()(Object.values(l).map(e=>(0,v.c)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,v.c)({type:"community",value:e},!1)))]})},[l,_])}function q(e,r,n){if(e)return s.w3z.getIdsOfVariablesWithValue(e,r,{type:n.type,value:n.value})}function Z(e){return i.useMemo(()=>e.filter(e=>!(0,b.eF)(e)),[e])}function X(e,r){let n=(0,I.iG)(e),a=function(e){let r=O(),n=$(e);return(0,i.useMemo)(()=>n?.status!=="loaded"?n.transform(()=>[]):h.Qw.loaded([...n.data?.libraryVariables??[],...r??[]]),[r,n])}(r);return(0,i.useMemo)(()=>{if("loaded"!==a.status)return a.transform(()=>[]);let r=a.data?.filter(e=>I.AQ(e,n))??[],i=[];for(let n of e){let e=b.Io[n];e&&a&&(i=i.concat(r.filter(r=>e.includes(r.resolvedType))))}return h.Qw.loaded([...i])},[e,a,n])}let J=(0,g.fv)();function Q(e){let r=e?.subscriptionStatus==="SUBSCRIBED"?J(e):void 0,n=function(e){let r={},n=(0,E.je)();if(n.data){for(let i of e)for(let e of n.data)if(e.fileKey===i){r[i]=e.name;break}}return r}(r?[r]:[]),i=e?.subscriptionStatus==="SUBSCRIBED"?e.library_key:void 0,a=function(e){let r=(0,E.je)();if(0===e.length)return{};let n={};if(r.data)for(let i of r.data){let r=(0,_.$)(i.fileKey);for(let a of e)if(r===a){n[a]=i.name;break}}return n}(i?[i]:[]);return(0,u.kc)().ds_use_lib_keys?i?a[i]:void 0:r?n[r]:void 0}function ee(e){let r=e&&(0,y.GI)(e),n=D(r?e.rootVariableSetId:void 0);return(r?n:e)??null}function et(){return(X(["FONT_STYLE"]).data??[]).length>0}},281889:(e,r,n)=>{"use strict";n.d(r,{RW:()=>E,Vr:()=>l,_n:()=>d,j2:()=>p,uE:()=>g,xQ:()=>I,xb:()=>h});var i=n(109388),a=n(172601),o=n(587670);let s=null;function l(e){return s=e,()=>{s=null}}let c=null;function d(e){return c=e,()=>{c=null}}let u=null;function p(e){return u=e,()=>{u=null}}let m=null;function h(e){return m=e,()=>{m=null}}let _=null;function g(e){return _=e,()=>{_=null}}let f=new a.b("VariableMirrorVariableResolvedValueEmitter");function E(e,r,n){return o.u4j.subscribeToLocalVariableResolvedValue(e,r),f.on(e,n),()=>{o.u4j.unsubscribeFromLocalVariableResolvedValue(e,r),f.removeListener(e,n)}}let y=new a.b("VariableMirrorExplicitModeEmitter");class b{localVariableSetUpdated(e){(0,i.unstable_batchedUpdates)(()=>{s?.({added:[e]})})}localVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{s?.({deleted:e}),u?.({setDeleted:e})})}subscribedVariableSetUpdated(e,r){(0,i.unstable_batchedUpdates)(()=>{c?.({added:[e]}),_?.({setDeleted:e.id}),_?.({added:r})})}subscribedVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{c?.({deleted:e}),_?.({setDeleted:e})})}localVariablesUpdated(e){u?.({added:e})}localVariableOverridesUpdated(e){m?.({added:e})}localVariableOverridesDeleted(e){m?.({deleted:e})}localVariablesDeleted(e){u?.({deleted:e}),e.forEach(e=>{f.trigger(e,{})})}variableResolvedValueUpdated(e,r){f.trigger(e,r)}explicitModeUpdated(e,r){y.trigger(e,r)}resetMirrorCache(){(0,i.unstable_batchedUpdates)(()=>{s?.(null),u?.(null),m?.(null),c?.(null),_?.(null)}),f.removeAllListeners()}}function I(){new b}},794581:(e,r,n)=>{"use strict";n.d(r,{tG:()=>_});var i=n(587670),a=n(297666),o=n(966712),s=n(27087),l=n(303454),c=n(754168),d=n(356390),u=n(15859),p=n(534532);class m{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecord={},this.pendingRecordVideosTasks={},this.allVideos={},this.flushPendingRecordVideos=(0,a.s)(async()=>{let e=this.pendingVideosToRecord,r=this.pendingRecordVideosTasks,n=Object.keys(e);this.pendingVideosToRecord={},this.pendingRecordVideosTasks={};let a=await this.getEditingFileKey();n.forEach(async n=>{if(a===n){r[n].resolve();return}if(!n){r[n].reject("Invalid originFileKey");return}let o=1,l=e[n];for(;;){try{let e=await s.Ay.put(`/api/files/${a}`,{video_sha1s:l,image_origin_file_key:n}),{success:o,failed:c}=u.xY.parseFileUpdateResponseForImages(l,e);for(let e of(i.tHB.markVideoPermissionsCopied(o),c))i.tHB.videoIsMissing(e);for(let e of l)delete this.pendingPasteRequests[e];r[n].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of l)i.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];r[n].resolve();return}}let e=1e3*o*Math.random();await new Promise(r=>setTimeout(r,e)),o=Math.min(2*o,64)}})},100)}async getAllVideoUrls(){if(!(0,o.kc)().cross_env_paste)return;let e=await c.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let r=new Map;for(let n of e)r.set(n,this.allVideos[n]);return r}recordVideos(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecord[e]=this.pendingVideosToRecord[e]||[],this.pendingVideosToRecord[e].push(...r),!this.pendingRecordVideosTasks[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordVideosTasks[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasks[e].promise;let n=this.pendingRecordVideosTasks[e].promise;return this.flushPendingRecordVideos(),n}getEditingFileKey(){return d.Y5.openFileKeyPromise()}}let h=new class{constructor(){this.videoManager=new m,this.thumbnailGenerator=p.t}copyVideoPermissions(e,r){return this.videoManager.recordVideos(e,r)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,r,n){return this.thumbnailGenerator.loadVideo(e,r,n)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,r){let n=await fetch(r),i=new Uint8Array(await n.arrayBuffer()),a=await d.Y5.openFileKeyPromise();(0,l.Cb)([{sha1:e,bytes:i}],a)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}};function _(){return h.videoManager}},815485:(e,r,n)=>{"use strict";n.d(r,{i:()=>a});let i=[];function a(e,r){for(let n of i)n(e,r)}},457630:(e,r,n)=>{"use strict";let i;n.d(r,{$$:()=>b,Cj:()=>U,D6:()=>A,HD:()=>v,PD:()=>w,Pl:()=>P,QZ:()=>F,Qt:()=>y,Yb:()=>I,Z0:()=>f,_X:()=>D,gc:()=>i,kE:()=>E,lc:()=>M,ni:()=>k,qc:()=>T,th:()=>S});var a=n(411855),o=n(109388),s=n(587670),l=n(91408),c=n(886653),d=n(776621),u=n(572206),p=n(651963),m=n(433861),h=n(356390),_=n(617453),g=n(146935);function f(e,r,n=!0){let i={x:e.width/2+(r.x-e.offsetX)*e.zoomScale,y:e.height/2+(r.y-e.offsetY)*e.zoomScale};return n?u.Mi.rounded(i):i}function E(e,r){return Math.round(e/r-.5)}function y(e,r,n,i){return Math.round(i/2+(e-r)*n)}function b(e,r){return u.Mi.rounded({x:(r.x-e.width/2)/e.zoomScale+e.offsetX,y:(r.y-e.height/2)/e.zoomScale+e.offsetY})}function I(e,r,n){let i=f(e,{x:r.x,y:r.y},n);return{x:i.x,y:i.y,width:r.width*e.zoomScale,height:r.height*e.zoomScale}}function T(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,d.x1)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function v(e,r){return{x:e.x+r.x,y:e.y+r.y,width:e.width,height:e.height}}function S(e){return(0,c.xx)((e,r,n,i)=>({x:e,y:r,height:n,width:i}))(e.x,e.y,e.height,e.width)}function w({subscribeToUpdates_expensive:e}){let r=D({subscribeToUpdates_expensive:e}),n=a.useContext(m.QZ).current||r,i=r.offsetX-n.offsetX,o=r.offsetY-n.offsetY,s=r.zoomScale-n.zoomScale;return{...r,deltaOffsetX:i,deltaOffsetY:o,deltaZoomScale:s}}function A(e,r){a.useEffect(()=>{h.Y5?.isReady()&&e.subscribeToUpdates_expensive&&(r(h.Y5.getViewportInfo()),(0,p.H)())},[r,e.subscribeToUpdates_expensive]),a.useEffect(()=>{if(h.Y5&&e.subscribeToUpdates_expensive){let e=e=>{(0,o.flushSync)(()=>{r(e)})};return h.Y5.viewport.on("onSetViewport",e),()=>{h.Y5.viewport.removeListener("onSetViewport",e)}}},[r,e.subscribeToUpdates_expensive])}function N(e){return a.useContext(e),a.useContext(m.HA).current||m.t4}function C(e){return N(e.subscribeToUpdates_expensive?m.k9:m.cY).x}function O(e){return N(e.subscribeToUpdates_expensive?m.lG:m.cY).y}function L(e){return N(e.subscribeToUpdates_expensive?m.Os:m.cY).width}function R(e){return N(e.subscribeToUpdates_expensive?m.zE:m.cY).height}function P(e){return N(e.subscribeToUpdates_expensive?m.zx:m.cY).zoomScale}function D(e){let r=C(e),n=O(e),i=L(e),o=R(e),s=N(e.subscribeToUpdates_expensive?m.j0:m.cY).offsetX,l=N(e.subscribeToUpdates_expensive?m.u7:m.cY).offsetY,c=P(e),d=N(e.subscribeToUpdates_expensive?m.l9:m.Vl).isPanning,u=N(e.subscribeToUpdates_expensive?m.b8:m.Vl).isZooming;return a.useMemo(()=>({x:r,y:n,width:i,height:o,offsetX:s,offsetY:l,zoomScale:c,isPanning:d,isZooming:u}),[r,n,i,o,s,l,c,d,u])}function k(){let e={subscribeToUpdates_expensive:!0},r=C(e),n=O(e),i=L(e),o=R(e);return a.useMemo(()=>({x:r,y:n,width:i,height:o}),[r,n,i,o])}function M(){i=void 0}function F(e){let r=new Promise(e=>{i=e});return s.glU.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),r}let x=(0,l.jz)(g.rulerThickness);function U(){let e={subscribeToUpdates_expensive:!0},r=(0,_.lK)()?x:0,n=C(e)+r,i=O(e)+r,o=L(e)-r,s=R(e)-r;return a.useMemo(()=>({x:n,y:i,width:o,height:s}),[n,i,o,s])}},939745:(e,r,n)=>{"use strict";n.d(r,{bJ:()=>c});var i=n(568214),a=n(374626),o=n(225719),s=n(774191);class l{isCustomPaletteColor(e,r){let n=a.zl.get(o.$R);if(n){let a=(0,s.aH)(e);for(let e of(0,o.Uh)(r))if(n[e].some(e=>(0,i.DA)(a,e)))return!0}return!1}}function c(){new l}},633648:(e,r,n)=>{"use strict";n.d(r,{A9:()=>o});var i=n(161459);class a{constructor(){this.getDefaultPencilStrokeWeight=()=>i.wv,this.getDefaultHighlighterStrokeWeight=()=>i.g5}}function o(){new a}},72274:(e,r,n)=>{"use strict";n.d(r,{Vi:()=>u,uE:()=>d});var i=n(939863),a=n(383006),o=n(609622),s=n(164782),l=n(128803),c=n(248639);let d={[c.k.EMBED_WIDGET]:s.g,[c.k.LINK_PREVIEW_WIDGET]:l.Nd,[c.k.AI_SUMMARY_WIDGET]:o.V,[c.k.HTML_WIDGET]:a.u};function u(e){return!!c.k[e]}c.k.EMBED_WIDGET,s.w.OPEN,s.w.CONVERT_TO_TEXT,c.k.LINK_PREVIEW_WIDGET,l.HP.OPEN,l.HP.VERTICAL,l.HP.HORIZONTAL,l.HP.CONVERT_TO_TEXT,c.k.AI_SUMMARY_WIDGET,c.k.HTML_WIDGET},488983:(e,r,n)=>{"use strict";n.d(r,{Bz:()=>M,F$:()=>F,bY:()=>D,e3:()=>H,g4:()=>B,wl:()=>k,y4:()=>W});var i=n(434192),a=n(675678),o=n(587670),s=n(432536),l=n(776250),c=n(517333),d=n(686759),u=n(737947),p=n(966712),m=n(563706),h=n(776621),_=n(30637),g=n(490768),f=n(129318),E=n(860707),y=n(760640),b=n(474985);function I(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function T(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function v(e,r){await (0,d.k0)(T(r));let n={wasmBinaryFile:I(r),preRun(){n.emscripten_realloc_buffer(1610612736)}};window.Module=n,(0,s.jS)({callMain:(0,s.eS)(),tsApisForCpp:e,registerRefreshCallback:e=>{(0,b.vw)(r,e)}})}async function S(e){try{await y.xK.timeAsync("loadingCode",()=>window.FULLSCREEN_PRELOADS?.js||(0,d.k0)(T(e)))}catch(e){throw Error("Failed to load fullscreen JS code")}return(0,s.N4)({wasmMemory:(0,E.LH)(e),isProduction:!0,executeEmscriptenJS:(0,s.eS)()})}async function w(e,r){let n=y.xK.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiateStreaming",()=>n)}async function A(e,r){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let n=await e.arrayBuffer(),i=y.xK.time("instantiate",async()=>{try{return await WebAssembly.instantiate(n,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiate",()=>i)}let N=!1,C=null;async function O(e){!C||C===e||(0,_.nl)()||k()||("fullscreen-app"===C?(0,h.$D)(a.FigmaTeam.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===C&&(0,h.$D)(a.FigmaTeam.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen")));let r=I(e);y.xK.start("loadingBinaryStart");let[n,i]=await Promise.all([window.FULLSCREEN_PRELOADS?.wasm||fetch(r),S(e)]);delete window.FULLSCREEN_PRELOADS;let{imports:o,receiveInstance:s}=i;if("true"===n.headers.get("x-figma-local-build")&&(N=!0),WebAssembly.instantiateStreaming)try{let r=await w(n,o);return C=e,{receiveInstance:s,wasmResult:r}}catch(e){if(e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,h.$D)(a.FigmaTeam.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,h.xi)("loader","Error loading wasm",{url:r,message:e?.message}),e}let l=await A(n,o);return C=e,{receiveInstance:s,wasmResult:l}}let L=(0,i.mergeAndRetry)(async()=>await O("fullscreen-app")),R=(0,i.mergeAndRetry)(async()=>await O("prototype-lib")),P=async e=>{switch(e){case"fullscreen-app":return await L();case"prototype-lib":return await R()}};function D(e){let r=e||G||C;if(r){let e=I(r).split("/");if(e.length<2)return;let n=e[e.length-2];if("fullscreen-wasm"===n)return{fullscreen_variant:"wasm"};if("prototype-lib"===n)return{prototype_variant:"lib"};if(n.startsWith("fullscreen-wasm-"))return{fullscreen_variant:n.replace("fullscreen-wasm-","")};if(n.startsWith("prototype-lib-"))return{prototype_variant:n.replace("prototype-lib-","")}}return{}}function k(){let e=u.Ay.location.pathname;for(let r of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(r))return!0;return!1}let M=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function F(e="fullscreen-app"){return P(e).then(()=>{})}let x=document.location.pathname;function U(e){return"/preload-editor"===e||"/preload-android-proto"===e}function B(){return U(x)&&(0,m.KR)()&&m.m0||(0,g.Sh)(x)||c.eD&&c.eD.isFileBrowserTab()||c.S8||k()||U(u.Ay.location.pathname)&&!c.eD?"never":!(0,p.kc)().preload_fullscreen_on_load||"complete"===document.readyState||(0,u.Cs)()?"immediately":"eventually"}let V=null,G=null;async function H(e,r="fullscreen-app"){if(G&&G!==r&&!(0,_.nl)()&&("fullscreen-app"===G?(0,h.$D)(a.FigmaTeam.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===G&&(0,h.$D)(a.FigmaTeam.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!I(r)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,f.QL)("asan"))return G=r,v(e,r);try{V&&V!==e&&await u.Ay.reloadAndWaitForever("tsApisForCpp changed",{from:o.uCV[V.CommonApp().appType()],to:o.uCV[e.CommonApp().appType()]}),V=e;let{receiveInstance:n,wasmResult:i}=await P(r);(0,s.jS)({callMain:()=>{y.xK.time("callMain",()=>n(i.instance,i.module))},tsApisForCpp:V,registerRefreshCallback:e=>{(0,b.vw)(r,e)}}),G=r,(0,_.nl)()&&o.msz.setIsRunningInteractionTests();let a=D(r);(0,l.sx)("Fullscreen Loaded",{...a})}catch(e){throw(0,l.sx)("Fullscreen Load Failure",{error:e+""}),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,h.$D)(a.FigmaTeam.UNOWNED,e)),e.reportedToSentry=!0,e}}function W(){if(N)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},560718:(e,r,n)=>{"use strict";n.d(r,{Ni:()=>a});var i=(e=>(e.COMMUNITY="community",e))(i||{}),a=(e=>(e.ALL_DISABLED="all_disabled",e.ENABLED="enabled",e))(a||{}),o=(e=>(e.REPORT="report",e.REPORT_AND_HIDE="report_and_hide",e))(o||{})},477782:(e,r,n)=>{"use strict";n.d(r,{Tf:()=>y,Y6:()=>E,YC:()=>I,fA:()=>g,hi:()=>b,nb:()=>_,yF:()=>f}),n(411855),n(188507);var i=n(634832),a=n(38580),o=n(374626),s=n(711525),l=n(391388),c=n(857766),d=n(99506),u=n(279453),p=n(378356),m=n(27703),h=n(132135),_=(e=>(e.FILE="FILE",e.PROTOTYPE="PROTOTYPE",e.REPO="REPO",e.PINNED_FILE="PINNED_FILE",e.OFFLINE_FILE="OFFLINE_FILE",e))(_||{});function g(e){return{type:"FILE",file:e}}function f(e){let r=(0,c.LH)(e.repo,e.branches,e.selectedBranchKey);return r?r:(e.repo.default_file_key?(0,c.LH)(e.repo,e.branches,e.repo.default_file_key):null)||e.branches[0]}let E=(0,a.eU)(null);class y{static getId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.assertNever)(e)}}static sameObject(e,r){if(e.type!==r.type)return!1;switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key===r.file.key;case"PROTOTYPE":return e.prototype.id===r.prototype.id;case"REPO":return e.repo.id===r.repo.id;case"OFFLINE_FILE":return e.file.fileKey===r.file.fileKey;default:(0,i.assertNever)(e)}}static getName(e){switch(e.type){case"FILE":case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,c.oj)(e.repo);default:(0,i.assertNever)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.accessed_at;case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.assertNever)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.file.shared_at;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":return e.repo.shared_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":return e.file.created_at;case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,r)=>e<r.created_at?e:r.created_at,e.repo.created_at);case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,i.assertNever)(e)}}static getTouchedAt(e){switch(e.type){case"FILE":return e.file.touched_at??e.file.updated_at;case"REPO":return e.branches.reduce((e,r)=>null!==e&&e>r.touched_at?e:r.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.assertNever)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":return e.file.trashed_at;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getTrashedUser(e){switch(e.type){case"FILE":return{id:e.file.trashed_user_id,handle:e.file.trashed_user?.handle};case"PROTOTYPE":case"REPO":case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":return!!e.file.is_favorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;default:(0,i.assertNever)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return d.bk.FILE;case"PROTOTYPE":return d.bk.PROTOTYPE;default:(0,i.assertNever)(e)}}static getFileKey(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"OFFLINE_FILE":return;default:(0,i.assertNever)(e)}}static getUrl(e,r){switch(e.type){case"FILE":return(0,h.to)(e.file);case"PINNED_FILE":return(0,h.jN)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,c.mr)(e.repo,e.branches,r);return n?(0,c.CE)(n,e.repo,"file"):"";case"OFFLINE_FILE":return"";default:(0,i.assertNever)(e)}}static getEditUrl(e,r){switch(e.type){case"FILE":return(0,h.rl)(e.file);case"PINNED_FILE":return(0,h.jN)({...e,allowDefaulting:!0});case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,c.mr)(e.repo,e.branches,r);return n?(0,h.rl)(n):"";case"OFFLINE_FILE":return"";default:(0,i.assertNever)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.assertNever)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":return e.file.is_team_template;case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":return!1;default:(0,i.assertNever)(e)}}static getOrgId(e){switch(e.type){case"FILE":return e.file.parent_org?.id??e.file.parent_org_id;case"PINNED_FILE":return e.file.parentOrgId;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return e.repo.parent_org?.id??e.repo.parent_org_id;case"OFFLINE_FILE":return e.file.orgId;default:(0,i.assertNever)(e)}}static getFavoriteResourceTeamId(e){switch(e.type){case"FILE":return e.file.parent_team?.id??e.file.team_id;case"PINNED_FILE":default:return null;case"PROTOTYPE":return e.prototype.parent_team?.id??e.prototype.fig_file?.team_id;case"REPO":return e.repo.parent_team?.id??e.repo.team_id}}static getSharedBy(e){switch(e.type){case"FILE":return e.file.shared_by_user?.id??e.file.shared_by;case"PROTOTYPE":return e.prototype.shared_by_user?.id??e.prototype.shared_by;case"REPO":return e.repo.shared_by_user?.id??e.repo.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getSharedByName(e){switch(e.type){case"FILE":return e.file.shared_by_user?.name;case"PROTOTYPE":return e.prototype.shared_by_user?.name;case"REPO":return e.repo.shared_by_user?.name;case"PINNED_FILE":return(0,i.assertDev)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,i.assertDev)(!0,"Cannot get shared by name from an offline file"),null;default:(0,i.assertNever)(e)}}static getOwner(e){switch(e.type){case"FILE":return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":(0,i.assertDev)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,i.assertNever)(e)}}static useIsRenaming(e){let r=(0,o.md)(E);return y.isRenaming(e,r)}static isRenaming(e,r){if(!r)return!1;switch(e.type){case"FILE":return"FILE"===r.type&&r.id===e.file.key;case"OFFLINE_FILE":return"FILE"===r.type&&r.id===e.file.fileKey;case"REPO":return"REPO"===r.type&&r.id===e.repo.id;case"PINNED_FILE":case"PROTOTYPE":return!1;default:(0,i.assertNever)(e)}}static getIsPasswordProtected(e){switch(e.type){case"FILE":return(0,m.i4)(e.file);case"REPO":return(0,c.yR)(e.repo);case"PROTOTYPE":return(0,m.Uj)(e.prototype.fig_file)||(0,m.i4)(e.prototype.fig_file);case"PINNED_FILE":return(0,m.i4)({has_file_link_password:e.file.hasFileLinkPassword,link_access:e.file.linkAccess});case"OFFLINE_FILE":return!1;default:(0,i.assertNever)(e)}}static getFolderId(e){switch(e.type){case"FILE":return e.file.folder_id;case"REPO":return e.repo.folder_id;case"PROTOTYPE":return e.prototype.fig_file.folder_id;case"PINNED_FILE":return e.file.folderId;case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getTeamId(e){switch(e.type){case"FILE":return e.file.team_id;case"PINNED_FILE":return e.file.teamId;case"PROTOTYPE":return e.prototype.parent_team?.id??null;case"REPO":return e.repo.team_id;case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getThumbnailUrl(e){switch(e.type){case"FILE":return e.file.thumbnail_url_override??e.file.thumbnail_url;case"REPO":let r=f(e);return r?r.thumbnail_url_override??r.thumbnail_url:null;case"PROTOTYPE":return e.prototype.thumbnail_url;case"PINNED_FILE":return e.file.thumbnailUrlOverride??e.file.thumbnailUrl;case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getIsThumbnailFullWidth(e){switch(e.type){case"FILE":return!!e.file.thumbnail_guid;case"REPO":let r=f(e);return r?r.thumbnail_guid:null;case"PROTOTYPE":return!0;case"PINNED_FILE":return!!e.file.thumbnailGuid;case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}static getEditorType(e){switch(e.type){case"FILE":return e.file.editor_type;case"REPO":return d._Y.DESIGN;case"PROTOTYPE":return null;case"PINNED_FILE":case"OFFLINE_FILE":return e.file.editorType;default:(0,i.assertNever)(e)}}static getClientMeta(e){switch(e.type){case"FILE":return e.file.client_meta;case"REPO":let r=f(e);return r?r.client_meta:null;case"PROTOTYPE":case"OFFLINE_FILE":return null;case"PINNED_FILE":return e.file.clientMeta;default:(0,i.assertNever)(e)}}static getPreviewThumbnailUrls(e){return"FILE"===e.type?e.file.preview_thumbnail_urls:"REPO"===e.type?f(e)?.preview_thumbnail_urls:void 0}static getFileKeyForAutosaveChanges(e){switch(e.type){case"FILE":case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return f(e)?.key;case"OFFLINE_FILE":return null;default:(0,i.assertNever)(e)}}}let b=(0,o.Iz)(e=>(0,a.eU)(r=>"FILE"===e.type||"PINNED_FILE"===e.type?r((0,u.sMs)({key:e.file.key})).transform(e=>!!e.file?.hasPermission):"REPO"===e.type?r((0,u.cfd)({repoId:e.repo.id})).transform(e=>!!s.oA(e.repo)?.canView):"PROTOTYPE"===e.type?r((0,u.eSI)({prototypeId:e.prototype.id})).transform(e=>!!s.oA(e.prototype)?.canRead):"OFFLINE_FILE"===e.type?l.Qw.loaded(!0):void(0,i.assertNever)(e)),y.sameObject),I={FILE:p.F.FILES,PROTOTYPE:p.F.PROTOTYPES,REPO:p.F.REPOS,PINNED_FILE:p.F.PINNED_FILES,OFFLINE_FILE:p.F.OFFLINE_FILES}},813648:(e,r,n)=>{"use strict";n.d(r,{LR:()=>E,_i:()=>b,kg:()=>y,ts:()=>f});var i=n(411855);n(109388);var a=n(188507),o=n(587670),s=n(91408),l=n(297666),c=n(572206),d=n(727749),u=n(902139),p=n(697551),m=n(501972),h=n(231472),_=n(491815),g=n(860168);function f(e,r=552,n=320){let[a,o]=i.useState(),[d,u]=i.useState(),[p,h]=i.useState(!1);return i.useLayoutEffect(()=>{let i=()=>{let i,a;switch(e.kind){case"mountCenter":i=window.innerWidth/2,a=window.innerHeight/2;break;case"buttonTarget":let l=(0,m.Tc)(e.buttonTarget);if(!l)return;let d=l.getBoundingClientRect();i=d.x+d.width/2,a=d.y;break;case"sourceRect":i=e.sourceRect.x+e.sourceRect.width/2,a=e.sourceRect.y}let u=i-n/2,f=a-r-12;window.innerWidth-u<n?(p||h(!0),u=window.innerWidth-n-_.wR):p&&h(!1),f=Math.max((0,s.hG)(g.tui)+_.wR,f),o(new c.Mi(u,f))};setTimeout(i,0);let a=(0,l.s)(i,100);return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[e,r,n,p]),{initialModalPosition:a,modalPosition:d,setModalPosition:u,modalWasClippedByRightSide:p}}function E(){let e=(0,a.wA)();return i.useCallback(()=>{o.glU&&o.glU.triggerAction("set-tool-default",null),e(u.KE())},[e])}function y(e){return e.mirror.appModel.currentTool===o.NLJ.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===h.t.NOT_PINNED}function b(e,r,n,o){let s=(0,a.wA)(),l=(0,a.d4)(e=>(0,p.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return{unsave:i.useCallback(n=>{e&&s((0,d.s1)({id:e,resourceType:r,communityProfile:l||void 0,hideSuccessVisualBell:n,source:d.uR.INSERTS_MODAL,optimisticData:{pluginInstallId:o}}))},[e,s,r,l,o]),save:i.useCallback((i,a)=>{e&&s((0,d.d6)({id:e,resourceType:r,communityProfile:l||void 0,onSuccess:i,hideSuccessVisualBell:a,source:d.uR.INSERTS_MODAL,optimisticData:{resource:n}}))},[e,s,r,l,n])}}},798184:(e,r,n)=>{"use strict";n(188507),n(586459),n(445092),n(967409)},318812:(e,r,n)=>{"use strict";n.d(r,{BK:()=>l,Um:()=>s});var i=n(411855),a=n(188507),o=n(738269);function s(){return(0,a.d4)(e=>e.dropdownShown)}function l(e){let r=(0,a.wA)(),n=s();return(0,i.useMemo)(()=>{let{type:i,...a}=n||{},s=i===e;function l(){r(o.oB())}function c(n={}){r(o.j7({...n,type:e}))}return{...a,showing:s,hide:l,show:c,toggle:function(e={}){s?l():c(e)}}},[r,n,e])}(0,n(529928).bt)(e=>e.dropdownShown)},887811:(e,r,n)=>{"use strict";n.d(r,{vD:()=>i}),n(939863),n(384162),n(555328);let i=(0,n(479296).n)(e=>(function(e){if(!e)return"OTH";let r={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in r)return r[e];let n={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in n?n[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"))},29680:(e,r,n)=>{"use strict";n.d(r,{B9:()=>E,KH:()=>u,aV:()=>_,ax:()=>p,dH:()=>h,eY:()=>d,f4:()=>m,p8:()=>g});var i=n(411855),a=n(188507);n(587670),n(707458);var o=n(951158),s=n(408405);let l=e=>e?.mirror?.sceneGraph,c=()=>(0,a.Pj)();function d(){return(0,a.d4)(l)}let u=()=>(0,a.d4)(e=>e.mirror.sceneGraphSelection);function p(){return!(0,a.d4)(e=>(0,o.Im)(e.mirror.sceneGraphSelection))}function m(e){let r=c(),n=u(),a=(0,i.useRef)();a.current=()=>{e(r.getState())},(0,i.useEffect)(()=>{a.current()},[n])}function h(){return(0,a.d4)(e=>e?.mirror?.appModel?.currentTool)}function _(){return(0,a.d4)(e=>(0,s.T)(e?.progressBarState?.mode))}function g(e){return(0,a.d4)(r=>r.mirror.appModel[e])}let f=(0,i.createContext)(null);function E(){let e=(0,a.d4)(e=>e.mirror.sceneGraph);return(0,i.useContext)(f)||e}},678340:(e,r,n)=>{"use strict";n.d(r,{KV:()=>I,P3:()=>f,Tm:()=>g,Wy:()=>p,Zz:()=>T,eE:()=>b,rq:()=>h,xk:()=>u});var i=n(587670),a=n(38580),o=n(374626),s=n(288706),l=n(860707),c=n(529928),d=n(447402);let u=60;var p=(e=>(e[e.SAFE=0]="SAFE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.OOM=3]="OOM",e))(p||{});let m=(0,a.eU)(null);function h(e){}(0,a.eU)(e=>!!e(m));let _=(0,o.yu)((0,s.um)({mallocLevelBytes:0,heapMemoryLimit:1/0},()=>({mallocLevelBytes:(0,l.Yc)(),heapMemoryLimit:i.hMR.getHeapMemoryLimit()})),({setSelf:e})=>{e();let r=setInterval(e,5e3);return()=>clearInterval(r)}),g=(0,a.eU)(e=>{let{mallocLevelBytes:r,heapMemoryLimit:n}=e(_),i=e(m),a=r/n*100;return i&&(a=i),a=Math.round(100*(a=Math.max(0,a=Math.min(100,a)))+Number.EPSILON)/100},(e,r)=>{r(_)});function f(){return o.zl.set(g),o.zl.get(g)}let E=(0,c.bt)(e=>e.modalShown?.type===d.Lu),y=(0,a.eU)(e=>{let r=e(g);return e(E)?3:r>=75?2:r>=u?1:0},(e,r)=>{r(g)}),b=(0,o.Hj)(y,e=>i.glU.setMemoryWarningLevel(e));function I(e,r){return(0,l.Yc)()/r*e/i.hMR.getHeapMemoryLimit()}function T(){let e=i.Hcu.getSubtreeMemoryUsage(["0:2"]);return(0,l.Yc)()/i.Hcu.getSubtreeMemoryUsage(["0:0"])*e*100/i.hMR.getHeapMemoryLimit()}},479118:(e,r,n)=>{"use strict";n.d(r,{Fy:()=>b,QR:()=>f,VI:()=>y,_Z:()=>g,lH:()=>E});var i=n(411855),a=n(188507),o=n(587670),s=n(707458),l=n(38580),c=n(374626),d=n(428654),u=n(168039),p=n(848661),m=n(100197),h=n(776615),_=n(554294);function g(){return function({selectedView:e,isLoadingVersionHistory:r,theme:n}){let a=e?.view==="prototype",l=a?null:s.q.instance.getCurrentPage(),u=i.useMemo(()=>l?.backgroundColor,[l]),g=!!(0,m.ut)(o.Ez5?.currentPageState().requestedPageChange,""),E=(0,c.md)(_.s6),y=(0,c.md)(_.rp),b=(0,c.md)(f),I=(0,c.md)(_.nc);return i.useMemo(()=>{let e;if(a)return{isLoading:!1};let i=(0,p.E7)(u);return(e=null!==i?d.F.format(i):n&&"dark"===(0,h.i_)(n)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",null!=i?(i.a=.7,e=d.F.format(i)):e="rgba(229, 229, 229, 0.1)",E)?{background:e,isLoading:!1}:{background:e,isLoading:!!r||g||I||y||b,isLoadingMissingFonts:b}},[a,u,n,E,r,g,I,y,b])}({selectedView:(0,a.d4)(e=>e.selectedView),isLoadingVersionHistory:a.d4(e=>e.versionHistory)?.isLoadingPage,theme:(0,u.DP)()})}let f=(0,l.eU)(!1);function E(e){return e.some(e=>e.status!==o.xal.LOADED)}function y(e){return e.every(e=>e.status===o.xal.LOADED)}function b(e,r){for(let n of e)if(n.nodeId===r)return n.status;return null}},669178:(e,r,n)=>{"use strict";n.d(r,{Dq:()=>f,g5:()=>g});var i=n(411855),a=n(188507);n(358145);var o=n(966712),s=n(915440),l=n(395281),c=n(632430),d=n(298527);n(416095);var u=n(279453),p=n(173454),m=n(372291);n(335682);var h=n(694687),_=n(860178);function g(e){let r=(0,a.d4)(e=>e.library),n=(0,m.Lm)(),s=(0,_.TA)(),l=(0,a.d4)(e=>e.recentlyUsed.libraryItems);return(0,i.useMemo)(()=>{let i=[],a=[];for(let c of l[e])if(null!==s?c.last_added_at_by_user_id?.[s]:void 0){if(c.type===p.PW.COMPONENT||c.type===p.PW.STATE_GROUP){let e=c.type===p.PW.COMPONENT?r.published.components[c.team_id]?.[c.file_key]?.[c.node_id]||r.defaultPublished.components[c.team_id]?.[c.file_key]?.[c.node_id]:c.type===p.PW.STATE_GROUP?r.published.stateGroups[c.team_id]?.[c.file_key]?.[c.node_id]||r.defaultPublished.stateGroups[c.team_id]?.[c.file_key]?.[c.node_id]:void 0;e&&i.push(e)}else if(c.type===p.PW.MODULE&&(0,o.kc)().dse_editor_templates_v1&&n.data){let e=function(e,r){return r[e.file_key]?.find(r=>r.node_id===e.node_id)}(c,n.data);e&&a.push(e)}}return{productComponents:i,templates:a}},[l,e,r,n,s])}function f(e){let r=(0,a.wA)(),n=(0,h.dq)(),o=!!e&&!!n,p=(0,d.n1)(),m=(0,s.Rs)(u.X9s,{teamId:e},{enabled:o});(0,i.useEffect)(()=>{if("loaded"===m.status&&o){let e=(m.data?.team?.workspace?.librarySubscriptions||[]).map(c.YD),n=(0,c.g1)(e,{ignoreCommunitySubs:!p});r(l.ve({subscriptions:n}))}},[r,p,m,o])}},737499:(e,r,n)=>{"use strict";n.d(r,{BI:()=>d,F4:()=>u,Jj:()=>s,Jp:()=>c,Kx:()=>p,Rf:()=>a,Yi:()=>g,e8:()=>h,h4:()=>m,kd:()=>o,m0:()=>_,sc:()=>l});var i=n(563706);function a(){return window.FigmaMobile}function o(){return a()}function s(){return window.FigmaMobile}function l(){return s()}function c(){return window.FigmaMobile}function d(){return window.FigmaMobile}function u(){return window.FigmaMobile}function p(){return u()}function m(){return window.FigmaMobile}function h(){return window.FigmaMobile}function _(){return window.FigmaMobile}function g(e){let r=window.FigmaMobile;return"prototype"===e.view?i.Ay.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!r?.shouldOptimizeForIpadApp&&!e.commentsEnabled}},85098:(e,r,n)=>{"use strict";n.d(r,{A8:()=>m,AD:()=>f,D4:()=>g,Q2:()=>p,Wq:()=>_,_i:()=>y,pl:()=>h,uC:()=>b});var i=n(411855),a=n(188507),o=n(752795),s=n(358145),l=n(966712),c=n(506599),d=n(226055),u=n(335682);let p=4,m=8,h=22;function _(e){let r=(0,d.GS)(),n=g(),i=function(e){let{isPropertiesPanelCollapsed:r}=(0,c.iT)(),n=(0,l.kc)().async_spotlight?2:3;return!e||r?n:Math.max(n,Math.min(Math.floor(e/h),m))}(e);return r?i:n}function g(){let[e,r]=i.useState(p);return i.useEffect(()=>{let e=()=>{window.innerWidth<786?r(2):r(p)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function f(e){return"sessionID"in e}let E=e=>{let{user:r,sessionID:n,presenterSessionID:i,lastObservedSessionID:a,fileCreatorID:o,mostActiveSpeakerID:s,observingSessionID:c}=e;return f(r)&&r.sessionID===n?0:f(r)&&i&&r.sessionID===i?1:f(r)&&c&&r.sessionID===c?2:(0,l.kc)().live_feedback_large_meetings&&f(r)&&a&&r.sessionID===a?3:f(r)&&r.userID===o?4:r.userID===s?5:r.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function y(e,r){let n=e;return r&&(n=n.filter(e=>f(e)&&e.deviceName===r)),n=n.filter(e=>!f(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function b(e,r,n,l,c){let d=(0,a.d4)(e=>e.multiplayer.sessionID),p=(0,a.d4)(e=>e.multiplayer.observingSessionID),m=(0,a.d4)(e=>e.multiplayer.presenterSessionID),h=(0,a.d4)(e=>e.multiplayer.deviceNameFilter),_=(0,u.q5)(),[g,b]=i.useState(null),I=(0,s.ZC)(p);I!==p&&(0,o.isNotNullish)(I)&&-1!==I&&I!==g&&b(I);let T=i.useMemo(()=>({sessionID:d,observingSessionID:p,presenterSessionID:m,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:_?.creatorId,deviceNameFilter:h}),[d,p,m,g,c,_?.creatorId,h]),{users:v,overflowUsers:S}=i.useMemo(()=>(function(e,r,n,i,a){let{deviceNameFilter:o}=a,s=[],l=[...e];return l&&0!==l.length?(l.sort((e,r)=>{let n=E({...a,user:e})-E({...a,user:r});if(0!==n)return n;let i=e.name.toLocaleLowerCase(),o=r.name.toLocaleLowerCase();return f(e)&&f(r)&&i===o?e.sessionID-r.sessionID:i>o?1:-1}),(l=y(l,o)).length>=i&&(s=l.slice(i-1),l=l.slice(0,i-1)),{users:l,overflowUsers:s}):r&&!n?{users:[r],overflowUsers:[]}:{users:[],overflowUsers:[]}})(e,r,n,l,T),[e,r,n,l,T]);return{users:v,overflowUsers:S}}},335682:(e,r,n)=>{"use strict";n.d(r,{As:()=>v,Cq:()=>P,Dz:()=>E,Hu:()=>T,MY:()=>y,XJ:()=>A,_G:()=>C,bv:()=>D,q5:()=>L,sS:()=>S,tB:()=>b,tS:()=>R,vu:()=>O,yV:()=>I,ze:()=>w});var i=n(188507),a=n(593779),o=n(794272),s=n(38580),l=n(288706),c=n(374626),d=n(130097),u=n(915440),p=n(391388),m=n(529928);n(99506);var h=n(279453),_=n(693223),g=n(945020),f=n(479296);async function E(e){let r=e.getState().selectedView,n="fullscreen"===r.view&&r.fileKey;return n&&(await (0,d.Ek)(h.ehp,{fileKey:n})).file||null}function y(){let e=(0,i.d4)(e=>e.selectedView),r="fullscreen"===e.view?e.fileKey:void 0,n=(0,u.Rs)(h.ehp,{fileKey:r||""},{enabled:!!r});return p.Qw.useTransform(n,({file:e})=>e)}function b(e){return e.openFile}let I=(0,m.bt)(b),T=(0,s.eU)(e=>{let r=e(I),n=e(_.m);return r?.teamId?n[r.teamId]??null:null}),v=(0,l.mg)(I,e=>e?.teamId??void 0);function S(e){return e.openFile?.key||null}(0,l.mg)(I,e=>e?.team?.workspaceId??void 0);let w=(0,m.bt)(S);function A(e){let r=b(e);return r?(0,a.l)(r.libraryKey):null}let N=(0,m.bt)(A),C=(0,f.D)(()=>(0,c.md)(N));function O(e){return e.openFile?.key&&e.fileByKey[e.openFile.key]||null}function L(){return(0,i.d4)(b)}let R=(0,f.D)(()=>L()?.key||null);function P(e){return D((0,o.R)(e=>({openFile:e.openFile,fileByKey:e.fileByKey})),e)}function D(e,r){let n=O(e);return r?.useSinatraType?n:n?(0,g.UE)(n):null}},694687:(e,r,n)=>{"use strict";n.d(r,{dq:()=>s,h0:()=>l,sZ:()=>o,td:()=>a});var i=n(188507);function a(e,r){if(!e)return;let n=r[e];if(n)return n}function o(){return(0,i.d4)(({currentUserOrgId:e,orgById:r})=>a(e,r))}function s(){return(0,i.d4)(e=>e.currentUserOrgId)}let l=(0,n(529928).bt)(({currentUserOrgId:e})=>e)},594901:(e,r,n)=>{"use strict";n.d(r,{AF:()=>l,FC:()=>s,h:()=>c,sj:()=>d});var i=n(188507);n(915440),n(391388),n(279453);var a=n(147206),o=n(428467);function s(){return(0,i.d4)(o.getPermissionsState,i.bN)}function l(){return(0,i.d4)(e=>(0,a.Pq)({copyExportRestrictedArgs:e.openFile}))}function c(){return(0,i.d4)(e=>!!e.openFile&&(0,a.Pe)(e.openFile))}function d(e){let r=s();return(0,o.isFileFigjamDisabled)(e,r)}},7e3:(e,r,n)=>{"use strict";n.d(r,{TN:()=>l});var i=n(188507),a=n(428467),o=n(746869),s=n(106472);function l(e){let r=!!(0,s.q)({teamId:e,flag:o.uU}),n=(0,i.d4)(r=>r.teams[e]),l=(0,i.d4)(e=>(0,a.getPermissionsStateMemoized)(e));return o.ng.getProTrial(n,r,l)}},161325:(e,r,n)=>{"use strict";n.d(r,{Fl:()=>b,ug:()=>T,wW:()=>E});var i=n(411855),a=n(188507),o=n(794272);n(567837);var s=n(30637),l=n(182976),c=n(337111),d=n(860178),u=n(336599),p=n(516056),m=n(547807);new class{constructor(){this.BatchedSchemaValidator=(0,m.vh)()}getBatched(e){return this.BatchedSchemaValidator.validate(async({xr:r})=>await r.get("/api/users/batched",m.td.toAPIParameters({userIds:e.userIds.join(",")})))}};let h=e=>r=>e&&r.publicUsers.byId[e]||null,_=e=>r=>{let n=r.multiplayer.allUsers.find(r=>r.userID===e);return n?I(n):null},g=e=>r=>{let n=r.user,i=_(e)(r);return n&&n.id===e?n:i||null},f=e=>r=>{let n=g(e)(r),i=h(e)(r);return n||i||null};function E(e){let r=(0,o.R)(g(e)),n=function(e){let r=(0,a.wA)(),n=`PUBLIC_USER_FETCH_${e}`,o=(0,a.d4)(e=>e.loadingState),s=(0,a.d4)(h(e)),p=function(e){let r=!!(0,d.iZ)();return!!e&&!b(e)&&r}(e),m=!!s,_=!m&&(0,u.VP)(o,n),g=!m&&(0,u.aF)(o,n),f=!m&&p&&!_&&!g;return(0,i.useEffect)(()=>{f&&(r(l.Cx({key:n})),y(e).then(e=>{r(c.yJ({user:e})),r(l.yH({key:n}))}).catch(()=>{r(l.of({key:n}))}))},[r,e,f,n]),{user:s,loading:_,hasError:g}}(r?null:e);return r?{user:r,loading:!1,hasError:!1}:n}let y=e=>p.k.getUser({userId:e}).then(e=>e.data.meta).catch(e=>{throw(0,s.Lg)()||console.warn("Failed to get public user"),e}),b=e=>e.startsWith("VISITOR-"),I=e=>({id:e.userID,name:e.name,handle:e.name,img_url:e.imageURL});async function T({state:e,dispatch:r,userId:n}){let i=f(n)(e);if(i)return i;if(b(n))return null;let a=e.user,o=b(n);if(!(!i&&!o&&a))return null;let s=await y(n);return r(c.yJ({user:s})),s}},894571:(e,r,n)=>{"use strict";n.d(r,{t:()=>y});var i=n(411855),a=n(188507),o=n(563706),s=n(153234),l=n(572206),c=n(801161),d=n(356390),u=n(843495),p=n(457630),m=n(145938),h=n(57150),_=n(206431),g=n(515427),f=n(575288),E=n(219001);function y(e,r){let n=(0,a.Pj)(),y=(0,a.wA)(),b=new Image,I=i.useRef(!1),T=i.useRef(void 0),v=i.useRef([]),[S,w,A]=(0,f.J)(null),{state:N,dispatch:C}=i.useContext(E.nS),O=(0,m.L)({onDelayedDragSuccess:n=>{document.addEventListener("pointermove",R,{passive:!1}),T.current=new l.Mi(n.clientX,n.clientY),b.src=r.getDragPreviewSrc(),r.onPointerDownCallback?.();let i=n.currentTarget;i||console.error("Expected dragTarget to be non-null, but it's null. If this is an interaction test, you may need to add a currentTarget argument to the args in t.do()");let a=i.getBoundingClientRect(),o=new l.Mi(n.clientX,n.clientY);A(r=>({...r,draggingResource:e.resource,isDraggingOverCanvas:!1})),b.onload=()=>{let n=b.naturalWidth/2,i=b.naturalHeight/2,{dragOffset:s,pointerPercentageOffset:c,draggingThumbSize:d}=(0,h.T)(r.dragPreviewPointerPosition,new l.Mi(n,i),o,a);A(r=>({...r,dragOffset:s,grabbedPointerPercentageOffset:c,draggingThumbSize:d,draggingThumbMaxDimensions:e.draggingThumbMaxDimensions}))}},onDelayedDragCancelled:()=>{I.current=!1}}),L=s.BV(s.Pt("insertableResource",r.recordingKey||""),"pointerdown",e=>{2===e.button||e.ctrlKey||(e.stopPropagation(),o.Ay.isMeetDevice&&C({type:"start click"}),v.current=(0,_.M)(),document.addEventListener("pointerup",P),o.Ay.isMeetDevice&&document.addEventListener("touchend",P),I.current=!0,O(e))}),R=i.useCallback(s.BV(s.Pt("insertableResource",r.recordingKey||""),"pointermove",r=>{let i=n.getState().mirror.sceneGraphSelection,a=S.current;if(!a)return;r.preventDefault();let o=new l.Mi(r.clientX,r.clientY),s=(0,_.Y)(o,v.current),p=a.draggingResource,m={dragPosition:o,isDraggingOverCanvas:s};I.current&&a.dragPosition&&T.current&&T.current.distanceTo(o)>g.Nq&&(i&&p&&(u.wr(),d.Y5.commit(),y(c.jD())),e.onDragStart?.(),I.current=!1),A(e=>({...e,...m}))},{recordMetadata:e=>{let r=d.Y5.getViewportInfo(),n=new l.Mi(r.x,r.y),i=new l.Mi(e.clientX,e.clientY).subtract(n),a=(0,p.$$)(r,i);return{shiftKey:e.shiftKey,metaKey:e.metaKey,canvasPosition:a}},playbackMetadata:e=>{let r=d.Y5.getViewportInfo(),n=new l.Mi(r.x,r.y),i=(0,p.Z0)(r,e.canvasPosition),a=l.Mi.add(i,n);return{shiftKey:e.shiftKey,metaKey:e.metaKey,clientX:a.x,clientY:a.y}}}),[n,S,A,e.onDragStart]),P=i.useCallback(s.BV(s.Pt("insertableResource",r.recordingKey||""),"pointerup",n=>{let i=S.current;if((e.recomputeCancelRectsOnPointerUp&&i?.dragPosition?(0,_.Y)(i?.dragPosition,(0,_.M)()):i?.isDraggingOverCanvas)&&i?.dragPosition||I.current&&e.clickToInsert){o.Ay.isMeetDevice&&C({type:"end insert"});let a=(0,g.zR)(I.current?void 0:i?.dragPosition);r.insertAction({e:n,dropPosition:a,pointerPercentageOffset:i?.grabbedPointerPercentageOffset,isClick:I.current}).then(()=>e.afterSuccessfulInsert?.(n))}else r.onPointerUpWithoutInsert?.();r.onPointerUpCallback?.(),A(null),o.Ay.isMeetDevice&&document.removeEventListener("touchend",P),document.removeEventListener("pointerup",P),document.removeEventListener("pointermove",R)},{recordMetadata:e=>{let r=d.Y5.getViewportInfo(),n=new l.Mi(r.x,r.y),i=new l.Mi(e.clientX,e.clientY).subtract(n),a=(0,p.$$)(r,i);return{shiftKey:e.shiftKey,metaKey:e.metaKey,canvasPosition:a}},playbackMetadata:e=>{let r=d.Y5.getViewportInfo(),n=new l.Mi(r.x,r.y),i=(0,p.Z0)(r,e.canvasPosition),a=l.Mi.add(i,n);return{shiftKey:e.shiftKey,metaKey:e.metaKey,clientX:a.x,clientY:a.y}}}),[S,e,r,A,R]);return{onInsertableResourcePointerDown:L,dragState:I.current?null:w}}},596256:(e,r,n)=>{"use strict";n.d(r,{I:()=>d});var i=n(411855),a=n(109388),o=n(629019),s=n.n(o),l=n(831236),c=n(936986);function d(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let r=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,l.AE)(e.dragState.draggingResource);return(0,a.createPortal)(void 0!==e.icon?i.createElement("div",{className:s()(c.Az,{[c.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):i.createElement("img",{src:n,alt:e.dragState.draggingResource,className:s()(c._D,{[c.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},57150:(e,r,n)=>{"use strict";n.d(r,{N:()=>a,T:()=>o});var i=n(572206),a=(e=>(e[e.RELATIVE=0]="RELATIVE",e[e.CENTERED=1]="CENTERED",e))(a||{});function o(e,r,n,a){switch(e){case 0:return function(e,r,n){let a,o;let s=e.x,l=e.y;s>l?(a=Math.min(s,n.width),o=l/s*a):(o=Math.min(l,n.height),a=s/l*o);let c=new i.Mi(n.width/2-a/2,n.height/2-o/2),d=r.subtract(n).subtract(c),u=new i.Mi(d.x/a,d.y/o);return{dragOffset:d,pointerPercentageOffset:u,draggingThumbSize:new i.Mi(a,o)}}(r,n,a);case 1:return{dragOffset:r.scale(.5),pointerPercentageOffset:new i.Mi(.5,.5),draggingThumbSize:r}}}},831236:(e,r,n)=>{"use strict";n.d(r,{AE:()=>p,fo:()=>h,mG:()=>m});var i=n(964937),a=n(153234),o=n(939863),s=n(809831),l=n(867795),c=n(161405),d=n(894571),u=n(57150);function p(e){switch(e){case"Table":return"https://static.figma.com/uploads/ac41ded88c50f0359c02ec3927394b7b33e210b6";case"CodeBlock":return"https://static.figma.com/uploads/8a035152916712353b045f442c2c6c5879ef3e17";case"MindMap":return"https://static.figma.com/uploads/1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e";default:return""}}function m(e){switch(e){case"Table":return"Table";case"CodeBlock":return(0,o.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,o.t)("whiteboard.inserts.mind_map_title");default:return""}}function h(e){let r="whiteboard"===(0,s.lg)(),n=(0,c.F5)(),o=async i=>(e.insertAction(i),r&&(0,c.oM)({type:l.p.MORE,id:e.resource,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,d.t)(e,{insertAction:o,dragPreviewPointerPosition:u.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,i.F)(e.icon):()=>p(e.resource),recordingKey:a.Pt(e.triggeredFrom,"tool",e.resource)})}},698993:(e,r,n)=>{"use strict";n.d(r,{S:()=>i}),n(411855),n(188507),n(587670),n(794272),n(256975),n(964881),n(988022),n(497306),n(507956);function i(e){}},499777:(e,r,n)=>{"use strict";n.d(r,{Xo:()=>l}),n(411855);var i=n(188507),a=n(374626),o=n(38580);n(572206),n(293017);let s=(0,n(529928).bt)(e=>e.pickerShown);function l(){return(0,i.d4)(e=>e.pickerShown)}(0,a.Iz)(e=>(0,o.eU)(r=>{let n=r(s);return n?.id===e}))},193212:(e,r,n)=>{"use strict";n.d(r,{U3:()=>s,aq:()=>o});var i=n(411855),a=n(730371);function o(){let e=i.useRef(!1);return i.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),i.useCallback(()=>e.current,[])}function s(e,r,n){let o=function(e,r){let n=i.useRef(null),a=r(e,n.current);return i.useEffect(()=>{a||(n.current=e)}),a?n.current:e}(n,a.deepEquals);i.useEffect(()=>(window.addEventListener(e,r,o),()=>{window.removeEventListener(e,r,o)}),[e,r,o])}},801387:(e,r,n)=>{"use strict";n.d(r,{Au:()=>c,P:()=>d}),n(411855),n(459401);var i=n(915440),a=n(711525),o=n(391388);n(99506);var s=n(279453);n(139961);var l=n(231959);function c(e){let r=(0,i.Rs)(s.TKM,{orgId:e});return o.Qw.useTransform(r,e=>{let r=e?.currentUser?.baseOrgUser?.workspaceUsers,n=r?.find(e=>e.isMainWorkspace);return n?.workspaceId??null})}function d(e,r){let n=(0,i.Rs)(s.bUn,{orgId:e},{enabled:!!e&&!!r});if(null===r)return(0,a.gB)(l.O);if("loaded"===n.status){let e=(n.data?.org?.workspaces??[]).find(e=>e.id===r);return(0,a.gB)(e)}return n}var u=(e=>(e[e.IS_GUEST=1]="IS_GUEST",e[e.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",e[e.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",e[e.LG_LOADING=4]="LG_LOADING",e))(u||{})},820642:(e,r,n)=>{"use strict";n.d(r,{HF:()=>x,M3:()=>A,RD:()=>S,Rj:()=>P,Ve:()=>w,Vz:()=>B,a6:()=>N,al:()=>D,bH:()=>M,cU:()=>k,cp:()=>O,ow:()=>C,pt:()=>v,re:()=>T,t0:()=>F,vK:()=>R,yS:()=>L,zv:()=>U});var i=n(634832),a=n(587670),o=n(133537),s=n(737947),l=n(498750),c=n(96328),d=n(939863),u=n(837324),p=n(466636),m=n(782501),h=n(99506),_=n(23001),g=n(813408),f=n(637590),E=n(501256),y=n(697551),b=n(132135);let I={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},T={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:g.o1.USER,badges:[],description:""},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:h.y4.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",tags:[],thumbnail_is_set:!1,comments_setting:null,publishing_status:h.KB.APPROVED_PUBLIC,badges:[]};var v=(e=>(e.KEY="is-community-duplicate",e.VALUE="1",e))(v||{}),S=(e=>(e.CURRENT_FILE="currentFile",e.NEW_FILE="newFile",e))(S||{});function w(e){switch(e){case"currentFile":default:return(0,d.t)("browse_templates_modal.add_template");case"newFile":return(0,d.t)("browse_templates_modal.use_template")}}function A(e,r){return(0,y.Hc)(e,r,T)}function N(e,r){let n=r||e.current_hub_file_version_id;return(0,y.Hc)(n,e.versions,I)}function C(e,r,n,o){let s;let l=e.figFilePublishedAsHubFile[r],c=A(l,e.hubFiles),g=N(c),f=y.b,b=e.fileByKey[r];!o&&!n&&(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id)&&(s=e.authedActiveCommunityProfile.team_id?{team_id:e.authedActiveCommunityProfile.team_id}:{org_id:e.authedActiveCommunityProfile.org_id});let I=(0,m.gO)(c,b,e,s),T=n?c.viewer_mode:function(e){if(!e)return h.y4.CANVAS;switch(e){case h._Y.DESIGN:return h.y4.CANVAS;case h._Y.WHITEBOARD:return h.y4.WHITEBOARD;case h._Y.SLIDES:return h.y4.SLIDE_TEMPLATE;case h._Y.SITES:case h._Y.COOPER:return h.y4.CANVAS;default:(0,i.assertNever)(e)}}(b.editor_type);!n&&c.viewer_mode===h.y4.PROTOTYPE&&o&&a.X3B?.firstPagePrototypeStatus()===a.bOM.VALID&&(T=h.y4.PROTOTYPE);let v=[];l&&c?.tags?v=c.tags:b?.editor_type==="whiteboard"&&(v=["figjam"]);let S={...(0,E.Rs)(),tokens:v.map(e=>({state:_.d.OK,content:e}))},w={...(0,E.Rs)(),tokens:(c.community_publishers?[...c.community_publishers.accepted,...c.community_publishers.pending||[]]:[]).reduce((r,n)=>{let i=e.authedProfilesById[n.id];return(0,m.Ii)(i,I)?r:r.concat([{state:_.d.OK,content:n}])},[])};return{name:g.name||(b.name===(0,d.t)("fullscreen.fullscreen_view_selector.untitled")?"":b.name),description:g.description||f.description,categoryId:c.category_id,creatorPolicy:g.creator_policy||f.creatorPolicy,tags:S,viewerMode:T,scalingMode:c.scaling_mode,author:I,publishers:w,commentsSetting:c.comments_setting||f.commentsSetting,blockPublishingOnToS:(0,m.xw)(e),price:(0,p.vf)(c.monetized_resource_metadata),isPaid:!!c.monetized_resource_metadata,supportContact:c.support_contact||e.user?.email,carouselMedia:(0,u.N6)(c),coverImageCarouselMediaId:c.cover_image_carousel_media_id}}function O(e,r){return e?r?(0,p.Yp)(r)?r<p.mZ?(0,d.t)("community.seller.paid_resource_minimum_err"):(0,d.t)("community.seller.paid_resource_maximum_err"):(0,p.F8)(r)?(0,d.t)("community.seller.prices_must_follow_format"):void 0:(0,d.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function L(e){let r=(0,y.Yp)(e||null).length;return 0===r?(0,d.t)("community.publishing.name_must_not_be_empty"):r<4?(0,d.t)("community.publishing.name_must_be_4_characters_long"):r>100?(0,d.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function R(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function P(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function D(e,r){return e&&!r?(0,d.t)("community.publishing.support_contact_must_not_be_empty"):!r||(0,o.xf)(r)||(0,c.gU)(r)?void 0:(0,d.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function k(e){if(!e)return(0,d.t)("community.publishing.category_cant_be_empty")}function M(e,r){let n={name:L(e.name),description:R(e.description),creatorPolicy:P(e.creatorPolicy)};e.tags&&(r?n.tags=(0,y.Dp)(e.tags,(0,y.V4)(r,e.categoryId??""),r.flatMap(e=>e.tags)):n.tags=(0,y.Wh)(e.tags)??void 0),e.publisherIds&&(n.publisherIds=(0,y.IZ)(e.publisherIds.length)||void 0),n.carouselMedia=(0,m.vC)(e.carouselMedia),n.categoryId=k(e.categoryId);let i="isPaid"in e&&!!e.isPaid;return n.price=O(i,e.price),n.supportContact=D(i,e.supportContact),Object.keys(n).forEach(e=>!n[e]&&delete n[e]),n}function F(e){return e===f.G4.FULLSCREEN||e===f.G4.FULLSCREEN_WITH_COMMENTS}function x(e){return!!e&&!e.unpublished_at}function U(e){return!!e&&e.publishing_status===h.KB.APPROVED_PUBLIC}function B(e){let r=(0,b.X$)(e);return(0,l.Gc)(e=>{e?.preventDefault(),s.Ay.redirect(r,"_blank")})}},889973:(e,r,n)=>{"use strict";n.d(r,{Z:()=>a});var i=n(126911);function a(e,r=!1){let n=e.deltaY,o=e.ctrlKey&&!r&&(i.y.isChrome()||i.y.isFirefox());return o?n/=-100:0!==n&&(n=n/Math.abs(n)*Math.min(Math.abs(n),10*Math.cbrt(Math.abs(n)))),o?Math.pow(4,n):Math.pow(.995,n)}},940596:(e,r,n)=>{"use strict";n.d(r,{Wh:()=>c,rt:()=>u});var i=n(38329),a=n(374626),o=n(38580),s=n(335682);let l={preserveValue:!1};function c(e,r=l){let n=(0,a.Iz)(e);return(0,o.eU)(e=>{let a=i.D?e(s.ze):"FILE_KEY";return r.preserveValue||n.setShouldRemove((e,r)=>r!==a),e(n(a))},(e,r,...i)=>r(n(e(s.ze)),...i))}let d=[];function u(e){let r=(0,o.eU)(e);return d.push({atomRef:new WeakRef(r),initialValue:e}),r}},272042:(e,r,n)=>{"use strict";n.d(r,{ZN:()=>s,dO:()=>o});var i=n(517333),a=n(245389);async function o(e){try{let e=null;if(i.eD&&(e=await i.eD.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let r=navigator.keyboard;if(!r||!r.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let n=await r.getLayoutMap(),{detectedLayoutsWeb:o,layoutJSON:s}=function(e){let r={};return e.forEach((e,n)=>{r[n]=e}),{layoutJSON:r,detectedLayoutsWeb:a.WH.map(r=>{let n=Object.entries(r.list).map(([r,n])=>null==n?!(r in e):e.get(r)===n).filter(e=>!e).length;return{name:r.name,isValid:0===n}}).filter(e=>e.isValid).map(e=>e.name)}}(n);return{desktopLayout:e,detectedLayouts:o,layoutJSON:s}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function s(e){return(e.desktopLayout?(0,a.pB)(e.desktopLayout):null)||(1===e.detectedLayouts.length&&a.g7[e.detectedLayouts[0]]?a.g7[e.detectedLayouts[0]]:null)}},315329:(e,r,n)=>{"use strict";n.d(r,{n:()=>a}),n(411855),n(188507);var i=n(133537);function a(e,r){return!!(e?.is_ipad_user||(0,i.jm)(r))}n(38329),n(915440),n(563706),n(743282),n(939863),n(572900),n(265746),n(809831),n(99506),n(279453),n(988022),n(193212)},622896:(e,r,n)=>{"use strict";n.d(r,{Bh:()=>_,SS:()=>f,bO:()=>g,oz:()=>E,z5:()=>y});var i=n(411855);n(188507);var a=n(752795);n(695956),n(89865),n(184058),n(966712);var o=n(915440),s=n(711525),l=n(886653);n(395281),n(632430);var c=n(298527),d=n(335682);n(416095);var u=n(279453),p=n(623746);n(756159),n(372291);var m=n(696673);n(869156);let h=i.createContext(null);function _(e){let{subscriptions:r,requestLibraryItems:n,releaseLibraryItems:o}=(0,a.requireNotNullish)(i.useContext(h),"Must call `useLibraryData` from within <LibraryDataProvider>");return i.useEffect(()=>{if(e)return n(e),()=>o(e)},[n,o,e]),e&&r[e]||(0,s.Xm)()}function g(){let{subscriptions:e}=(0,a.requireNotNullish)(i.useContext(h),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function f({fileKey:e}){return _(e),null}function E(e,r){let n=[];for(let i of e.libraryHierarchyPaths)for(let e of i.styles)r?e.style_type===r&&n.push(e):n.push(e);return n}function y(e,r){return E(e.data,r)}i.memo(function({fileKey:e,onChange:r}){let n=e!==(0,d.tS)(),a=(0,m.wJ)(e),s=(0,c.Ck)(),{view:l,args:p,options:h}=a?{view:u.Acj,args:{hubFileId:e},options:{enabled:s()}}:{view:n?u.tIY:u.s5n,args:{fileKey:e},options:void 0},_=(0,o.Rs)(l,p,h);return i.useEffect(()=>{r(e,_)},[r,e,_]),null}),(0,l.cm)(function(e){if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,s.e1)([]);let n=e.libraryHierarchyPaths.map(r=>{let n=r.styles.map(r=>(0,p.KC)(r,{type:"hubFile",file:{id:e.hubFileId,libraryKey:e.libraryKey}}));return{pageName:r.pageName??void 0,containingFrameName:r.containingFrameName??void 0,nameHierarchyPath:r.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:n}});return(0,s.gB)({fileKey:e.hubFileId,name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:n})}let n=r.file;if(!n)return(0,s.e1)([]);let i=n.libraryHierarchyPaths.map(e=>{let r="components"in e?e.components.map(e=>(0,p.Qp)(e,{type:"team",file:n})):[],i="stateGroups"in e?e.stateGroups.map(e=>(0,p.SS)(e,{type:"team",file:n})):[],a=e.styles.map(e=>(0,p.KC)(e,{type:"team",file:n}));return{pageName:e.pageName??void 0,containingFrameName:e.containingFrameName??void 0,nameHierarchyPath:e.nameHierarchyPath??void 0,components:r,stateGroups:i,styles:a}});return(0,s.gB)({fileKey:n.key,name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:n.library?.numStyles??0,libraryHierarchyPaths:i})})},416095:(e,r,n)=>{"use strict";n.d(r,{A0:()=>eg,Av:()=>er,CG:()=>tU,Cj:()=>tk,Dg:()=>ei,E2:()=>tB,Ei:()=>t1,FS:()=>tj,Fl:()=>tK,G$:()=>tL,GA:()=>eD,Gd:()=>el,Gg:()=>e8,Gj:()=>t6,Gp:()=>to,HF:()=>Q,Hb:()=>tR,Ht:()=>tO,IW:()=>ea,J1:()=>eQ,Jc:()=>J,K3:()=>eC,KQ:()=>eW,LB:()=>eY,LC:()=>t_,LH:()=>t5,LI:()=>tM,LT:()=>tW,LX:()=>ex,Lk:()=>eF,MA:()=>tH,MF:()=>et,Mb:()=>eX,NW:()=>tg,NY:()=>tG,QO:()=>tE,QT:()=>eI,Qg:()=>eT,R2:()=>ts,RQ:()=>th,T4:()=>tz,VC:()=>eS,VO:()=>tD,Vd:()=>em,Vk:()=>td,WV:()=>tu,WY:()=>e2,X0:()=>eh,X7:()=>en,Ys:()=>eJ,_B:()=>tf,_Q:()=>tp,aD:()=>X,ad:()=>tV,bd:()=>tw,cU:()=>e4,cd:()=>e9,dG:()=>eA,dx:()=>tF,eD:()=>t7,eS:()=>tn,gA:()=>eU,gi:()=>tC,hH:()=>e1,i_:()=>ez,iw:()=>e6,j7:()=>ed,jk:()=>eR,kD:()=>ep,kG:()=>tT,kX:()=>tX,kw:()=>tv,lG:()=>tI,lg:()=>ee,nV:()=>eu,nn:()=>re,oH:()=>tS,og:()=>ey,ov:()=>tt,pq:()=>te,qB:()=>eL,r9:()=>tN,rC:()=>eH,rt:()=>eE,sv:()=>t4,sy:()=>tc,t$:()=>t9,td:()=>ti,th:()=>tq,ti:()=>e_,uD:()=>t0,uH:()=>tl,uJ:()=>eB,vu:()=>tQ,w$:()=>t2,w8:()=>e$,xl:()=>eo,yW:()=>tY,yh:()=>ec,yt:()=>ew,zE:()=>tm,zm:()=>e3});var i=n(411855),a=n(188507),o=n(459401),s=n(634832),l=n(675678),c=n(215122),d=n(587670),u=n(593779);n(937036);var p=n(758271),m=n.n(p),h=n(776250),_=n(297666),g=n(38329),f=n(794272),E=n(966712),y=n(886653),b=n(364898),I=n(776621),T=n(437304),v=n(96328),S=n(27087),w=n(47506),A=n(939863),N=n(154483),C=n(572900),O=n(265746),L=n(944682),R=n(395281),P=n(452246),D=n(182976),k=n(974105),M=n(44892),F=n(875847),x=n(237929),U=n(666068),B=n(173454),V=n(279145),G=n(333370),H=n(479296),W=n(335682),K=n(694687),j=n(99506),z=n(216158),Y=n(872712),$=n(388094),q=n(58032),Z=n(694517),X=(e=>(e.CURRENT="current",e.ALL="all",e))(X||{});let J=i.createContext(null);function Q(e){return e===B.E8.CURRENT||e===B.E8.CHANGED||e===B.E8.DELETED}function ee(e){return e===B.E8.NEW||e===B.E8.CHANGED||e===B.E8.DELETED}function et(e){switch(e.type){case B.PW.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case B.PW.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case B.PW.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case B.PW.VARIABLE_SET:case B.PW.VARIABLE:case B.PW.MODULE:return{type:e.type,key:e.key,version:e.version};default:(0,s.assert)(!1,`Unknown type ${e?.type}`)}}function er(e){let{key:r}=et(e);return(0,s.assertDev)(void 0!==r,"Asset had no key",{asset:e}),r}function en(e){return e.map(er)}function ei(e){return et(e).version}function ea(e){return!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style}function eo(e,r){return`/file/${e}?node-id=${encodeURIComponent(r)}&main-component=1`}let es=(0,N.fv)();function el(e){return eo(es(e),e.node_id)}function ec(e,r,n){for(let n of Object.values(r))if("loaded"===n.status&&n.data.key===e)return n.data;for(let r of Object.values(n))if(r.key===e)return r;return null}function ed(e,r){let n=Object.create(null);if(!r)return n;let i=r.team_id||B.Yu,a=e[i]&&e[i][r.key]||Object.create(null);for(let e in a)null==a[e].unpublished_at&&(n[e]=a[e]);return n}function eu(e,r){let n=ed(e,r);return Object.keys(n).map(e=>n[e])}function ep(e){let r=[];return em(e,(n,i,a)=>{r.push(e[n][i][a])}),r}function em(e,r){Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(i=>{Object.keys(e[n][i]).forEach(e=>{r(n,i,e)})})})}function eh(e){return Object.keys(e).map(r=>e[r]).filter(e=>!e.deletedFromSceneGraph)}function e_(e,r){let n=[];for(let i in e){let a=e[i];a.style_type!==r||a.deletedFromSceneGraph||n.push(a)}return n}function eg(e,r,n,i){let a=[];for(let o in r)for(let s in r[o])if(eL(e,n,{team_id:o,key:s},i))for(let e in r[o][s]){let n=r[o][s][e];a.push(n)}return a}let ef=new Set;async function eE(e){let r=new Map((e=e.filter(e=>e.canvas_url&&!M.Eo.hasKeyInCache(M.WZ.augmentUrlWithFileVersion(e.canvas_url).url)&&!ef.has(e.key))).map(e=>[e.key,e.canvas_url])),n=e.map(e=>e.key);if(n.forEach(e=>ef.add(e)),0!==n.length)try{let e=await S.Ay.post("/style/canvases",{style_keys:n});for(let[n,i]of Object.entries(e.data.meta.urls))S.Ay.crossOriginGetAny(i,null,{responseType:"arraybuffer"}).then(({data:e})=>{let i=r.get((0,c.n3)(n));if(i){let r=M.WZ.augmentUrlWithFileVersion(i).url;M.Eo.putCanvas(r,e)}ef.delete((0,c.n3)(n))}).catch(()=>{ef.delete((0,c.n3)(n))})}catch(e){n.forEach(e=>ef.delete(e))}}let ey=["TEXT","FILL","EFFECT","GRID"],eb=(e,r)=>{let n=r?1:2;switch(e){case"TEXT":return(0,A.t)("design_systems.styles.text_style",{numStyles:n});case"FILL":return(0,A.t)("design_systems.styles.color_style",{numStyles:n});case"EFFECT":return(0,A.t)("design_systems.styles.effect_style",{numStyles:n});case"GRID":return(0,A.t)("design_systems.styles.grid_style",{numStyles:n});case"EXPORT":return(0,A.t)("design_systems.styles.export_style");case"STROKE":return(0,A.t)("design_systems.styles.stroke_style");default:return(0,h.sx)("Unknown style type",{styleType:e}),(0,A.t)("design_systems.styles.styles",{numStyles:n})}};function eI(e){return eb(e,!1)}function eT(e,r){return r in e?{design:!!e[r]?.design,figjam:!!e[r]?.figjam,slides:!!e[r]?.slides}:{design:null,figjam:null,slides:null}}let ev=e=>null!==e.design&&null!==e.figjam&&null!==e.slides;function eS(e,r){var n;if(!r)return{design:!1,figjam:!1,slides:!1};let i=(n=e.subscriptions.forPresets,(0,E.kc)().dse_preset_libraries?r?{...eT(n,r.key),isPresetSubscription:!0}:{design:!1,figjam:!1,slides:!1}:{design:null,figjam:null,slides:null}),a=eT(e.subscriptions.forCurrentOrg,r.key);return ev(a)?a:i}function ew(e,r){if(!r)return{design:!1,figjam:!1,slides:!1};let n=eS(e,r),i=eT(e.subscriptions.forCurrentWorkspace,r.key);return ev(i)?i:n}function eA(e,r,n){if(!n)return{design:!1,figjam:!1,slides:!1};let i=ew(e,n),a=eT(e.subscriptions.byTeam[r]||{},n.key);return ev(a)?a:i}let eN=(e,r)=>{if(!r)return{design:!1,figjam:!1,slides:!1};let n=eS(e,r),i=eT(e.subscriptions.forCurrentUser,r.key);return ev(i)?i:n};function eC(e,r){let n=eN(e,r);if(ev(n))return n;for(let i in e.subscriptions.byTeam){let a=eA(e,i,r);a.design&&(n.design=!0),a.figjam&&(n.figjam=!0),a.slides&&(n.slides=!0)}return n}let eO=(e,r)=>e.key===r.key||e.source_file_key===r.key||e.key===r.source_file_key;function eL(e,r,n,i){let a;if(!r||!n||eO(r,n))return!1;a=(0,E.kc)().ps_benchmark?r.team_id?i?function(e,r,n){let i=eN(e,n);return ev(i)&&!i.isPresetSubscription?i:eA(e,r,n)}(e,r.team_id,n):eA(e,r.team_id,n):eC(e,n):r.team_id?eA(e,r.team_id,n):eC(e,n);let o=null;switch(r.editor_type){case"design":default:o=a.design;break;case"whiteboard":o=a.figjam;break;case"slides":o=a.slides}let s=e.subscriptions.byFile;return r.key in s&&n.key in s[r.key]?s[r.key][n.key]:ti(e,n.key)?o||null===o:o}function eR(e,r,n,i){return eL(e,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},n,i)}let eP=(0,N.fv)();function eD(e,r,n,i,a){if(n.length)return!0;for(let n of i){let i;let o=a[n];if(!o)continue;i="file_key"in o?eP(o):"loaded"===o.status&&eP(o.data);let s=(0,F.T9)(r.project);if(i&&eL(e,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:i},s))return!0}return!1}let ek=(e,r)=>e.style_type===r.style_type?0:ey.indexOf(e.style_type)<ey.indexOf(r.style_type)?-1:1,eM=(e,r)=>-(0,b.Ez)(e.sort_position||"",r.sort_position||"");function eF(e,r){let n=ek(e,r);return 0===n?eM(e,r):n}function ex(e){e.sort(eM)}function eU(e,r){let n=e=>e&&e.toLowerCase?e.toLowerCase():"",i=e.containing_frame||{},a=r.containing_frame||{};return i.pageId!==a.pageId?n(i.pageName)<n(a.pageName)?-1:1:i.nodeId!==a.nodeId?n(i.name)<n(a.name)?-1:1:n(e.name)<n(r.name)?-1:1}function eB(e){let r=[...e];return ex(r),{stylesByPrefix:r.reduce((e,r)=>{let n=(0,x.In)(r.name);return e[n]=e[n]||[],e[n].push(r),e},Object.create(null)),sortedPrefixes:(0,G.wM)(r)}}let eV=!0;function eG(e,r){if(!e||!r)return!0;for(let n in e){if(!(n in r))return!0;let i=e[n],a=r[n];for(let e in i)if(i[e]!==a[e])return!0;for(let e in a)if(!(e in i))return!0}for(let n in r)if(!(n in e))return!0;return!1}function eH(e,r,n,i,a,o,s,l,c,d){let u=Object.create(null),p=0;for(let m in r.forEach(r=>{let c=r.nodeId,m=i[c];o[c]=eZ(a[c]),u[c]=e(m,n[c],r,s,l,d);let h=u[c];h.status===B.E8.NEW&&h.type===B.PW.COMPONENT&&(p+=1)}),i)if(!(m in u)){let e=a[m];e&&e.url&&(0,M.qv)(e.url);let r=i[m];if(r.type===B.PW.COMPONENT||r.type===B.PW.STATE_GROUP){let e=(r.type,B.PW.COMPONENT,r);e.old_key&&c.add(e.node_id)}}for(let r in n)r in u||(o[r]=eZ(a[r]),u[r]=e(i[r],n[r],null,s,l,d));return{newLocal:u,numNewComponents:p}}function eW(e){let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==Z.V_||!r.mirror?.sceneGraph)return;let n=(0,k.d1)(r),i=n?n.key:"",a=n?.library_key?(0,u.l)(n.library_key):(0,u.l)(""),o=new Set,s={},{newLocal:l,numNewComponents:c}=eH(ez,r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,s,i,a,o,B.PW.COMPONENT),{newLocal:d}=eH(eY,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,s,i,a,o,B.PW.STATE_GROUP),{newLocal:p}=eH(e$,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,s,i,a,o,B.PW.STYLE),{newLocal:m}=eH(eq,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,s,i,a,o,B.PW.MODULE);if(eG(r.library.local.components,l)&&e.dispatch(R.I0({local:l,type:B.PW.COMPONENT})),eG(r.library.local.stateGroups,d)&&e.dispatch(R.I0({local:d,type:B.PW.STATE_GROUP})),eG(r.library.local.styles,p)&&e.dispatch(R.I0({local:p,type:B.PW.STYLE})),eG(r.library.local.modules,m)&&(0,E.kc)().dse_module_publish&&e.dispatch(R.I0({local:m,type:B.PW.MODULE})),function(e,r){if(!e&&!r)return!1;if(!e||!r||Object.keys(e).length!==Object.keys(r).length)return!0;for(let n in e)if(!r[n]||e[n].url!==r[n].url||e[n].content_hash!==r[n].content_hash)return!0;return!1}(r.library.local.thumbnails,s)&&e.dispatch(P.xp({thumbnails:s})),c>0&&eV&&((0,w.YQ)({id:"Parsed first components"}),eV=!1),o.size>0){let n=r.notifications.filter(e=>e.type===O._.MOVE_COMPONENTS_PROMPT);if(n.length>0){let r=n[0].type===O._.MOVE_COMPONENTS_PROMPT&&n[0].movableItemIds;r&&(0,T.Bq)(r,o)&&e.dispatch(C.$.dequeue({type:O._.MOVE_COMPONENTS_PROMPT}))}}}let eK="Generating a local library item that is neither in the library nor in the scene graph. Why.",ej=(e,r,n,i,a,o)=>{var s;if(!n){if(r)return{...r,status:B.E8.DELETED,deletedFromSceneGraph:!0};throw Error(eK)}let l=r&&null==r.unpublished_at,c=!!n.isPublishable,d=B.E8.NOT_STAGED;l&&!c?d=B.E8.DELETED:!l&&c?d=B.E8.NEW:l||c||(d=B.E8.NOT_STAGED);let{description:u,description_rt:p}=(s=n.description,{description:n.descriptionPlain??"",description_rt:s??""});return{node_id:n.nodeId,name:n.name,description:u,description_rt:p,file_key:i,file_key_source:N.Ps.LOCAL_FILE,library_key:a,isPublishable:c,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:d,type:o,thumbnail_url:r&&r.thumbnail_url||void 0}};function ez(e,r,n,i,a){let o={...ej(e,r,n,i,a,B.PW.COMPONENT),type:B.PW.COMPONENT,height:n?.height,width:n?.width,x:n?.x,y:n?.y,componentPropDefError:n?.componentPropDefError,containing_frame:n?.containingFrame||r?.containing_frame||void 0,component_key:r?.component_key||void 0,content_hash:n?.versionHash||r?.content_hash||void 0,userFacingVersion:n?.userFacingVersion??c.F7.INVALID,old_key:n?.oldKey||void 0};if(!r)return o;let s=null==r.unpublished_at,l=!!n?.isPublishable;return s&&l&&(r&&r.content_hash===o.content_hash&&!(0,V.Q_)(r.containing_frame,n?.containingFrame)&&(0,V.pD)(r.name,n?.name)&&(0,V.pD)(r.description,o.description)?o.status=B.E8.CURRENT:o.status=B.E8.CHANGED),o}function eY(e,r,n,i,a){let o=ej(e,r,n,i,a,B.PW.STATE_GROUP);if(!r){if(!n)throw Error(eK);return{...o,type:B.PW.STATE_GROUP,version:n.versionHash,userFacingVersion:n.userFacingVersion,containing_frame:n.containingFrame,width:n.width,height:n.height,stateGroupError:n.stateGroupError,componentPropDefError:n.componentPropDefError,fill_color:n.fill_color,default_state_key:n.default_state_key,old_key:n.oldKey||void 0}}let s={...o,type:B.PW.STATE_GROUP,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||c.Rf.INVALID,containing_frame:n?.containingFrame||r.containing_frame,width:n?.width||r.min_node_width,height:n?.height||r.min_node_height,key:r.key||void 0,stateGroupError:n?.stateGroupError||d.bwI.NONE,componentPropDefError:n?.componentPropDefError||d.uXg.NONE,fill_color:n?.fill_color||r?.fill_color,default_state_key:n?.default_state_key||r?.default_state_key,old_key:n?.oldKey||void 0},l=null==r.unpublished_at,u=!!n?.isPublishable;return l&&u&&(r.version===s.version&&!(0,V.Q_)(r.containing_frame,n?.containingFrame)&&(0,V.pD)(r.name,n?.name)&&(0,V.pD)(r.description,s.description)?s.status=B.E8.CURRENT:s.status=B.E8.CHANGED),s}function e$(e,r,n,i,a){let o=ej(e,r,n,i,a,B.PW.STYLE),s=r&&null==r.unpublished_at,l=!!n?.isPublishable,c=!1;if(s&&l&&(r&&r.content_hash===n?.versionHash&&(0,V.pD)(r.name,n?.name)&&(0,V.pD)(r.description,o.description)?(0,V.pD)(r.sort_position,n?.sortPosition)?o.status=B.E8.CURRENT:(o.status=B.E8.CHANGED,c=!0):o.status=B.E8.CHANGED),n)return{...o,type:B.PW.STYLE,key:n.styleKey,style_type:n.styleType,is_soft_deleted:n.isSoftDeleted,sort_position:n.sortPosition,content_hash:n.versionHash,userFacingVersion:n.userFacingVersion,hasOnlyBeenReordered:c,old_key:n.oldKey||void 0};if(r)return{...o,type:B.PW.STYLE,key:r.key,style_type:r.style_type,is_soft_deleted:!0,sort_position:r.sort_position,content_hash:r.content_hash,userFacingVersion:r.userFacingVersion,hasOnlyBeenReordered:c};throw Error(eK)}function eq(e,r,n,i,a){let o=ej(e,r,n,i,a,B.PW.MODULE);if(!r){if(!n)throw Error(eK);return{...o,type:B.PW.MODULE,moduleSource:n.moduleSource,height:n.height,width:n.width,x:n.x,y:n.y,containing_frame:n.containingFrame,version:n.versionHash,userFacingVersion:n.userFacingVersion,old_key:n.oldKey||void 0}}let s={...o,type:B.PW.MODULE,moduleSource:n?.moduleSource||r.moduleSource,height:n?.height||r.height,width:n?.width||r.width,x:n?.x,y:n?.y,containing_frame:n?.containingFrame||r.containing_frame||void 0,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||c.Pg.INVALID,old_key:n?.oldKey||void 0,key:r.key},l=r&&null==r.unpublished_at,d=!!n?.isPublishable;return l&&d&&(r.version===s.version&&!(0,V.Q_)(r.containing_frame,n?.containingFrame)&&(0,V.pD)(r.name,n?.name)&&(0,V.pD)(r.description,s.description)?s.status=B.E8.CURRENT:s.status=B.E8.CHANGED),s}function eZ(e){return{kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0}}let eX=(e,r)=>`GET_PUBLISHED_COMPONENTS_FOR_${e}_FV${r}`,eJ=new Set;function eQ(e){for(let r of eJ)e(D.yH({key:r}))}let e0=new Set;function e1(e){return e0.has(e)}function e2(e){e0.add(e)}function e3(){e0.clear()}let e6=(e,r)=>`GET_DEFAULT_LIBRARIES_FOR_${e}_FV${r}`;function e8(e,r){let n={};return r.forEach(e=>{if(e.containing_frame?.containingStateGroup?.nodeId){let r=e.containing_frame?.containingStateGroup?.nodeId;n[r]||(n[r]=[]),n[r].push(e.name)}}),e.map(e=>({...e,stateNames:n[e.node_id]}))}let e5=new Set,e7=(0,N.fv)();async function e4(e,r=[],n,i,a,o,s){if(!r.length)return{};let l={};for(let n of r){let r=e.get(n);r&&r.styleKey&&0!==d.glU.getNumUsagesOfStyle(r.styleKey,!0)&&(l[r.styleKey]=n)}let u=Object.keys(l).map(c.n3),p=await z.M4.fetch(Y._x.UnpublishedStylesQuery({styleKeys:u,orgId:a})),h=m()([...p,...Object.values(n).filter(e=>e.key in l)],e=>e.key),_=new Set(h.map(e=>e.key)),g=u.filter(e=>e&&!_.has((0,c.n3)(e))),f=await z.M4.fetch(Y.qE.MissingStyleKeysQuery({styleKeys:g}));delete f[o];let E=[],y={};for(let e of h){let r=e7(e);y[r]||(y[r]=[]),y[r].push(e),i[r]||e5.has(r)||(e5.add(r),E.push(r))}for(let[r,n]of Object.entries(f))for(let i of(y[r]||(y[r]=[]),n)){let n=l[i]&&e.get(l[i]);n&&y[r].push({type:B.PW.STYLE,name:n.name,file_key:r,file_key_source:N.Ps.REST_API,key:i,thumbnail_url:`/style/${i}/thumbnail?ver=${n.styleVersionHash}`,canvas_url:`/style/${i}/thumbnail?ver=${n.styleVersionHash}`,content_hash:n.styleVersionHash||void 0,userFacingVersion:(0,c.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!1,style_type:n.styleType,library_key:n.sourceLibraryKey})}return await e9(E,s),y}async function e9(e,r){if(e.length>0){let i=[];async function n(e){try{let n=await S.Ay.post("/api/files/batch",{file_keys:e});n.data.meta||(0,I.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(L.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,I.$D)(l.FigmaTeam.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let a=e.slice(r,r+200);i.push(n(a))}await Promise.all(i)}}async function te(e,r,n){if(0===r.length)return[];let{styles:i,files:a}=(await S.Ay.post("/api/styles",{style_keys:r,org_id:n})).data.meta;return e(L.uo({files:a,subscribeToRealtime:!0})),i}function tt(e,r=[],n=[],i,a,o,s,l=!1){let u={},p=r.concat(n),m=[];for(let r of p){let n,s,p;let h=e.get(r);if(!h)continue;let _=tY(h)||void 0,g=h.publishID,f=h.isStateGroup;if(f?(h.sharedStateGroupVersion&&(n=h.sharedStateGroupVersion),h.stateGroupKey&&(s=h.stateGroupKey)):(h.sharedSymbolVersion&&(n=h.sharedSymbolVersion),h.componentKey&&(s=h.componentKey)),!g||!_)continue;let E=a[_];if(E){let e=E.team_id||B.Yu;if(p=((f?i.stateGroups[e]||{}:i.components[e]||{})[_]||{})[g],p?.type===B.PW.COMPONENT){let r=p.containing_frame?.containingStateGroup?.nodeId;r&&(p=i.stateGroups[e]?.[_]?.[r],f=!0)}}else e5.has(_)||(e5.add(_),m.push(_));if(p)u[er(p)]=p;else if(f){if(!s||u[s]||!h.reversedChildrenGuids.some(r=>{let n=e.get(r)?.componentKey;return n&&!u[n]}))continue;let i=d.glU.getDefaultStateForLocalStateGroup(r),a=e.get(i),[l,p]=a?[a.size.x,a.size.y]:[0,0];u[s]={type:B.PW.STATE_GROUP,name:h.name,file_key:_,file_key_source:N.Ps.PUBLISH_FILE,library_key:h.sourceLibraryKey,key:s,thumbnail_url:`/state_group/${s}/thumbnail?ver=${n}&fv=${o}`,canvas_url:`/state_group/${s}/canvas?ver=${n}&fv=${o}`,node_id:g||"",isLocal:!1,version:n||c.Rf.INVALID,userFacingVersion:(0,c.Rf)(h.userFacingVersion),containing_frame:{},min_node_width:p,min_node_height:l,default_state_key:""}}else{if(!s||u[s]||h.isState&&!l||null===o)continue;u[s]={type:B.PW.COMPONENT,name:h.name,file_key:_,file_key_source:N.Ps.PUBLISH_FILE,library_key:h.sourceLibraryKey,component_key:s,thumbnail_url:`/component/${s}/thumbnail?ver=${n}&fv=${o}`,canvas_url:`/component/${s}/canvas?ver=${n}&fv=${o}`,node_id:g||"",content_hash:h.sharedSymbolVersion||void 0,userFacingVersion:(0,c.F7)(h.userFacingVersion),isLocal:!1,min_node_height:h.size.x,min_node_width:h.size.y}}}return e9(m,s),Object.values(u)}let tr=(e,r,n,i,a,o,s)=>tt(e,r,n,i,a,o,s,!0).reduce((e,r)=>(r.type===B.PW.COMPONENT?r.component_key&&(e[r.component_key]=r):e[r.key]=r,e),Object.create(null));function tn(e){let r=(0,a.wA)(),{library:n,fileByKey:o,sceneGraph:s,fileVersion:l,subscribedComponents:c,subscribedStateGroups:d,subscribedComponentsOnCurrentPage:u,subscribedStateGroupsOnCurrentPage:p}=(0,f.R)(e=>({library:e.library,fileByKey:e.fileByKey,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,$.C9)(e),subscribedStateGroups:(0,$.jf)(e),subscribedComponentsOnCurrentPage:(0,$.J5)(e),subscribedStateGroupsOnCurrentPage:(0,$.EY)(e)})),[m,h]="current"===e?[u,p]:[c,d];return i.useMemo(()=>tr(s,m,h,n.published,o,l,r),[s,m,h,n.published,o,l,r])}function ti(e,r){let n=e.defaultPublished.fileKeys.includes(r),i=e.defaultShapes.fileKeys.includes(r);return!!n||!!i}let ta=(0,y.xx)(e=>{let r={},n=e.local.styles;for(let e in n){let i=n[e];r[i.key]=i}return r});function to(e,r,n){let i=ta(n)[e];if(i)return{kind:B.AT.LOCAL,value:i};let a=n.used__LIVEGRAPH.styles[e];return a?.status==="loaded"?{kind:B.AT.LIBRARY,value:a.data}:r&&r.length?{kind:B.AT.DANGLING,value:{key:e,node_id:r[0]}}:void 0}function ts(e,r){return to(e,r,(0,a.d4)(e=>e.library))}function tl(e,r){if(!e)return"";if(e.kind!==B.AT.DANGLING)return e.value.name;{let n=r.get(e.value.node_id);return n?n.name:""}}function tc(e,r){let n=(0,a.d4)(e=>e.mirror.sceneGraph);return tl(ts(e,r),n)}let td=(0,y.xx)(e=>{let r={};return Object.keys(e).forEach(n=>{r[n]={},Object.keys(e[n]).forEach(i=>{r[n][i]=tu(e[n][i])})}),r});function tu(e){let r={};for(let n in e){let i=e[n];i.containing_frame?.containingStateGroup&&(r[n]={...i})}return r}function tp(e,r,n){let i=e.team_id,a=e.key,o=i?n[i]:null;if(o){let e=o[a];if(e)return e[r]}return null}function tm(e){let r=e.type===B.PW.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==d.bwI.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===d.uXg.CONFLICTING_NAMES_ERROR||e.componentPropDefError===d.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===d.uXg.UNUSED_DEF_ERROR)||r)}function th(e){return e.variableSetError!==d.HG$.NONE}let t_=()=>{},tg=new Promise(e=>{t_=e}),tf=()=>{},tE=new Promise(e=>{tf=e}),ty=()=>{},tb=new Promise(e=>{ty=e}),tI=e=>({callback:ty,promise:tb,resetPromise:tA,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${e.getState().openFile?.key}`}),tT=()=>{},tv=new Promise(e=>{tT=e}),tS=new Promise(e=>{});function tw(){t_(),tf(),tT(),tg=new Promise(e=>{t_=e}),tE=new Promise(e=>{tf=e}),tv=new Promise(e=>{tT=e}),tA()}function tA(){ty(),tb=new Promise(e=>{ty=e})}function tN(e,r,n){return e.team_id===n?-1:r.team_id===n?1:(e.team_name||"").localeCompare(r.team_name||"")}function tC(e,r,n){return e.sort((e,i)=>{var a;let o=(a=n?.groupByFolders,e.team_id!==i.team_id?tN(e,i,r):a&&e.file.folder_id!==i.file.folder_id?e.folder_name<i.folder_name?-1:1:(e.library_file_name||"").localeCompare(i.library_file_name||""));return n?.isDescending?o:-o})}function tO(e,r,n){let i;let a=e.node_id,o=r[a]||{},l=o.url||null;switch(e.type){case B.PW.COMPONENT:case B.PW.STYLE:i=e.content_hash;break;case B.PW.VARIABLE:case B.PW.VARIABLE_SET:case B.PW.STATE_GROUP:case B.PW.MODULE:case B.PW.RESPONSIVE_SET:i=e.version;break;default:(0,s.assertNever)(e)}return(n||o.content_hash!==i||!(0,M.OM)(l))&&(e.type===B.PW.COMPONENT||e.type===B.PW.STATE_GROUP||e.type===B.PW.MODULE?l=(0,M.r2)(a):e.type===B.PW.STYLE?l=(0,U.fP)(e)?(0,M.jh)():(0,M.aV)(a,e.style_type):(e.type===B.PW.VARIABLE||e.type===B.PW.VARIABLE_SET)&&(l=(0,M.jh)())),l}function tL({numProductComponents:e,numStyles:r,numVariables:n,numVariableCollections:i,numModuleAssets:a}){let s=r>0?(0,A.t)("design_systems.libraries_modal.plural.num_style",{numStyles:r}):null,l=e>0?(0,A.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,c=n>0?(0,A.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:n}):null,d=(0,E.kc)().dse_editor_templates_v1&&a>0?(0,A.t)("design_systems.libraries_modal.plural.num_templates",{numTemplates:a}):null,u=0===n&&i>0?(0,A.t)("design_systems.libraries_modal.plural.variable_collections",{numVariableCollections:i}):null,p=(0,o.removeNullish)([l,s,c,u,d]);return 0===p.length?(0,E.kc)().dse_editor_templates_v1?(0,A.t)("design_systems.libraries_modal.no_publishable_assets"):(0,A.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,v.Yx)(p,"unit")}let tR=e=>e!==B.E8.DELETED&&e!==B.E8.NOT_STAGED,tP=(0,N.fv)();function tD(e,r,n,i,a){let o=r[e];if(!o)return null;let s=ep(n).find(e=>e.type===B.PW.COMPONENT?e.component_key===o:e.key===o),l="another file";if(!s)return l;let c=(0,E.kc)().ds_use_lib_keys?a[s.library_key]:i[tP(s)];return c?c.name:l}function tk(e,r,n){let i=e.reduce((n,i)=>(r[i]?n[i]=r[i]:(0,s.assertDev)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:r}),n),Object.create(null));for(let e of n){let n=e.containing_frame?.containingStateGroup?.nodeId,a=r[e.node_id];if(!n||!a)continue;let o=!!r[n];i[n]||!o?i[e.node_id]=a:i[e.node_id]&&delete i[e.node_id]}return{moveRemappings:i,movableItemsToPublishAsNew:new Set(Object.keys(r).filter(e=>!i[e]))}}function tM(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState}function tF(e){return B.YJ.includes(e.type)}function tU(e){return e.isLocal?d.Egt.getAssetKeyForPublish(e.node_id):er(e)}function tB(e){return e.containing_frame?.containingStateGroup?.nodeId??null}function tV(e){return!!tB(e)}function tG(e,r,n,i){let a;if(!e)return;let o=r.get(e);if(o&&o.containingStateGroupId&&(o=r.get(o.containingStateGroupId)),o){if(tY(o)){let e=o.componentKey??o.stateGroupKey;e&&(a=i?.[e])}else a=n?.[o.guid];return a}}function tH(e,r){function n(e){return e.toLowerCase()}let i=n(e.name),a=n(r.name);return i<a?-1:i>a?1:0}function tW(e){switch(e){case B.jg.THIRTY_DAYS:return(0,A.t)("design_systems.libraries_modal.30_days");case B.jg.SIXTY_DAYS:return(0,A.t)("design_systems.libraries_modal.60_days");case B.jg.NINETY_DAYS:return(0,A.t)("design_systems.libraries_modal.90_days");case B.jg.YEAR:return(0,A.t)("design_systems.libraries_modal.year");default:(0,s.assertNever)(e)}}function tK(e){return!!((0,E.kc)().dse_templates_proto&&e.description?.startsWith("Figma.TemporaryIsTemplate"))}function tj(e){return!!((0,E.kc)().dse_module_publish&&"MODULE"===e.type)}function tz(e,r){return(null!==e.design||null!==e.figjam||null!==e.slides)&&(!!e.design||!!e.figjam||!!e.slides)&&(!!e.design&&!r.designSubscribed||!!e.figjam&&!r.figjamSubscribed||!!e.slides&&!r.slidesSubscribed)}function tY(e){return(0,E.kc)().ds_publish_file_deprecation?e?e.isLooseComponent||e.isState?tq(e.componentKey):e.isStateGroup?tX(e.stateGroupKey):null:null:e?.publishFile??null}let t$=(0,N.fv)();function tq(e,r){return e?(r||(r=t1(g.D.getState().library.published.components)),t$(r[e])??null):null}let tZ=(0,N.fv)();function tX(e,r){return e?(r||(r=t1(g.D.getState().library.published.stateGroups)),tZ(r[e])??null):null}let tJ=(0,N.fv)();function tQ(e,r,n){return n[e]?tJ(n[e])??null:r[e]?tJ(r[e])??null:null}function t0(e){let r={};return em(e,(n,i,a)=>{r[i]=r[i]||{},r[i][a]=e[n][i][a]}),r}function t1(e){let r={};return em(e,(n,i,a)=>{let o=e[n][i][a];r[er(o)]=o}),r}function t2(e){let r=(0,a.wA)(),n=i.useMemo(()=>(0,_.s)(()=>{e&&e.value.node_id&&r(P.rb({styleNodeId:e.value.node_id,styleKind:e.kind}))}),[r,e]);i.useEffect(n)}let t3=(0,N.fv)();function t6(e){return(0,E.kc)().ds_use_lib_keys?`${e.library_key}:${e.node_id}`:`${t3(e)}:${e.node_id}`}let t8=(0,H.D)((e,r)=>e?e.parentOrgId:r);function t5(){return t8((0,W.q5)(),(0,K.dq)())}function t7(e){return t8(e.openFile,e.currentUserOrgId)}function t4(){let e=t5(),r=(0,a.d4)(e=>e.orgById);return(0,K.td)(e,r)}function t9(e){let r=(0,q.je)();return i.useMemo(()=>{if("loaded"===r.status)return r.data?.find(r=>r.fileKey===e)?.id},[e,r.data,r.status])}function re(e){return e===j.pk.ORG||e===j.pk.WORKSPACE}},26328:(e,r,n)=>{"use strict";n.d(r,{Yl:()=>s,eu:()=>o}),n(35645);var i=n(416095);n(173454);var a=n(48515);function o(e){return e.type===a.I.ALL||e.type===a.I.LOCAL||e.type===a.I.FILE}function s(e,...r){let n={};r.forEach(e=>{e.forEach(e=>{n[(0,i.Av)(e)]=e})});let a=[];return e.forEach(e=>{let r=(0,i.Av)(e);r in n?(e.ai_score&&(n[r].ai_score=e.ai_score),e.lexical_score&&(n[r].lexical_score=e.lexical_score)):a.push(e)}),a}},535257:(e,r,n)=>{"use strict";n.d(r,{AG:()=>O,KK:()=>L,UR:()=>I,cC:()=>A,dm:()=>N,hH:()=>w,ik:()=>v});var i=n(35645),a=n.n(i),o=n(776250),s=n(966712),l=n(374626),c=n(588666),d=n(154483),u=n(378905),p=n(857766),m=n(696673),h=n(69961),_=n(99506),g=n(216158),f=n(173454),E=n(508567),y=n(48515),b=n(239737);let I=40,T=(0,d.fv)();async function v(e,r,n,i,l,d,m,g,f){try{let o=i?.editorType===_._Y.WHITEBOARD,y=[],v=l?.view==="fullscreen"&&l?.fileKey||i?.key||"";y=(await E.$W.getComponents({query:e,openFileKey:v,fv:r||0,orgId:n||void 0,excludeAIResults:o,subscribedLibraryFileKeys:g.size<I?JSON.stringify(Array.from(g)):void 0,searchSessionId:f,logEligibility:!v&&await (0,b.Ci)(!0)||void 0,isUi3:h.nt.ui3.getValue()})).data.meta;let S=i?i.key:"",w=i&&((0,p.Kz)(i)?i.sourceFileKey:""),A=y.filter(e=>(0,s.u4)("ds_use_lib_keys",e.library_key in m,T(e) in d)&&!(0,u.TK)(e,w)),N=new Set;for(let e of g)N.add((0,c.$)(e));let[C,O]=a()(A,e=>(0,s.kc)().ds_use_lib_keys?N.has(e.library_key):g.has(T(e))||T(e)===S);return{subscribedSearchResults:C,unsubscribedSearchResults:O}}catch(r){return o.az.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),{subscribedSearchResults:[],unsubscribedSearchResults:[]}}}let S=(0,d.fv)();async function w(e,r,n){if(!n)return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};try{if(!l.zl.get(m.JB))return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};let{results:n}=(await E.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,E.in)([f.PW.COMPONENT,f.PW.STATE_GROUP]).join(",")})).data.meta,[i,o]=a()(n,e=>r.has(S(e)));return{communitySearchResults:i,unsubscribedCommunitySearchResults:o}}catch(r){return o.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),{communitySearchResults:null,unsubscribedCommunitySearchResults:null}}}async function A(e,r,n){if(!n)return[];try{if(!l.zl.get(m.JB))return[];let{results:n}=(await E.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,E.in)([f.PW.COMPONENT,f.PW.STATE_GROUP]).join(","),hubFileIds:[r]})).data.meta;return n}catch(r){return o.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function N(e,r,n){return e===y.I.FILE?Promise.resolve([]):r.search(n).then(e=>e.map(e=>({...e.item,score:e.score})))}function C(e,r){let n=r.split(" ").filter(e=>e.length>2),i=e.name.toLowerCase().substring(e.name.lastIndexOf("/")+1);return n.length>0&&n.every(e=>i.includes(e.toLowerCase()))}function O(e,r,n,i,o){if(0===r.length)return e;if(i===y.I.FILE)return r;let s=r;o&&(s=function(e,r){let n=e.filter(e=>e.lexical_score),[i,o]=a()(n,e=>C(e,r)),s=e.filter(e=>e.ai_score),l=Math.max(...i.map(e=>e.lexical_score)),c=Math.min(...i.map(e=>e.lexical_score)),d=Math.max(...o.map(e=>e.lexical_score)),u=Math.min(...o.map(e=>e.lexical_score)),p=Math.max(...s.map(e=>e.ai_score)),m=Math.min(...s.map(e=>e.ai_score));return e=(e=e.map(e=>{if(e.lexical_score){let n;return n=C(e,r)?l===c?1:.9+.09999999999999998*((e.lexical_score-c)/(l-c)):d===u?.89:.89*(e.lexical_score-u)/(d-u),{...e,score:n}}return e})).map(e=>{if(e.ai_score){let r=p===m?.89:(e.ai_score-m)/(p-m)*.89;return e.lexical_score&&(r=Math.max(r,e.score)),{...e,score:r}}return e})}(s,n));let l=Math.max(...s.map(e=>e.score));return[...e.map(e=>{let r=(1-e.score)*.95*l;return{...e,score:r}}),...s].sort((e,r)=>r.score-e.score)}async function L(e,r,n,i){try{return(await E.$W.getComponentsFromFile({query:e,fileKey:r,openFileKey:n,searchSessionId:i,logEligibility:!n&&await (0,b.Ci)(!0)||void 0,isUi3:h.nt.ui3.getValue()})).data.meta}catch(n){return o.az.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,fileKey:r}),[]}}g.M4.Query({fetch:async({query:e,assetTypes:r})=>{let{results:n}=(await E.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,E.in)(r).join(",")}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return n},enabled:({query:e})=>null!=e&&e.trim().length>0});var R=(e=>(e.OPEN_FILE="OPEN_FILE",e.FILE_VERSION="FILE_VERSION",e.LOADING_STATE="LOADING_STATE",e))(R||{})},207825:(e,r,n)=>{"use strict";n.d(r,{u5:()=>o,vQ:()=>l}),n(634832);var i=n(824780);n(939863),n(186828);var a=n(155367);let o="originTab",s=[a.J7.BILLING];function l(e){let r=(0,i.K)(a.J7,e);if(r)return s.includes(r)?r:void 0}},698812:(e,r,n)=>{"use strict";n.d(r,{EO:()=>a,XY:()=>o}),n(411855);var i=n(188507);n(459401),n(181912),n(881388),n(939863),n(66037),n(679892),n(694687),n(594901),n(227544),n(596607),n(428467);let a=e=>`LICENSE_GROUP_GET_${e}`;function o(e){return(0,i.d4)(r=>{var n;return!!e&&(n=r.orgById[e],!!(n?.bigma_enabled&&n?.license_groups_count))})}},99506:(e,r,n)=>{"use strict";n.d(r,{A$:()=>w,Ag:()=>eS,B0:()=>I,BQ:()=>eo,D8:()=>k,Dh:()=>Z,E9:()=>er,El:()=>A,Fd:()=>U,GP:()=>q,G_:()=>B,Hi:()=>v,Il:()=>ec,KB:()=>j,Lc:()=>ed,Mr:()=>J,OL:()=>ew,P4:()=>M,P5:()=>eg,PQ:()=>a,Pn:()=>ey,Pu:()=>_,Qh:()=>D,Rc:()=>ep,Se:()=>g,Uu:()=>ea,We:()=>y,Xn:()=>eN,Zf:()=>C,_D:()=>b,_Y:()=>x,a0:()=>o,bQ:()=>et,bU:()=>E,bk:()=>G,bp:()=>T,cA:()=>N,dQ:()=>ev,eD:()=>c,h4:()=>eA,h9:()=>em,hM:()=>X,ho:()=>R,iS:()=>K,iU:()=>F,kI:()=>m,kc:()=>es,o6:()=>ef,pk:()=>eI,rP:()=>H,sC:()=>d,tK:()=>eh,tw:()=>ei,ud:()=>l,un:()=>ee,vt:()=>O,wl:()=>eb,xj:()=>Q,xw:()=>eu,xy:()=>h,y4:()=>W,zI:()=>eE,zd:()=>u});var i=n(563838),a=(e=>(e.ORG_VIEW="org_view",e.ORG_EDIT="org_edit",e.WORKSPACE_EDIT="workspace_edit",e.WORKSPACE_VIEW="workspace_view",e.VIEW="view",e.EDIT="edit",e.INHERIT="inherit",e.INVITE_ONLY="invite_only",e))(a||{});let o=(0,i.fc)(a);var s=(e=>(e.RESPONSIVE_SET="responsive_set",e))(s||{}),l=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e))(l||{}),c=(e=>(e.TEAM_ACCESS_VIEW="team_view",e.TEAM_ACCESS_EDIT="team_edit",e.TEAM_ACCESS_DISABLED="team_access_disabled",e))(c||{}),d=(e=>(e.VIEW="view",e.EDIT="edit",e))(d||{});let u=(0,i.fc)(d);var p=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(p||{}),m=(e=>(e.UNVERIFIED="unverified",e.VERIFIED="verified",e.PENDING="pending",e.UNAVAILABLE="unavailable",e))(m||{});let h=(0,i.fc)(m);var _=(e=>(e.ORG_VIEW="org_view",e.VIEW="view",e.INHERIT="inherit",e))(_||{});let g=(0,i.fc)(_);var f=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e))(f||{}),E=(e=>(e.PUBLIC="public",e.PRIVATE="private",e.SECRET="secret",e))(E||{});let y=(0,i.fc)(E);var b=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(b||{});let I=(0,i.fc)(b);var T=(e=>(e.ADMIN="admin",e.MEMBER="member",e))(T||{});let v=(0,i.fc)(T);var S=(e=>(e.SELF_SELECTED="self",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e.SCIM_GROUP="scim_group",e))(S||{});let w=(0,i.fc)(S);var A=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(A||{});let N=(0,i.fc)(A);var C=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(C||{}),O=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e))(O||{}),L=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.ORG="org",e))(L||{});let R=(0,i.fc)(L);var P=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.PROTOTYPE="prototype",e))(P||{}),D=(e=>(e.OK="ok",e.GRACE_PERIOD="grace_period",e.PAST_DUE="past_due",e.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="no_monthly_sub_editor_count_exceeded",e.INCOMPLETE="incomplete",e))(D||{});let k=(0,i.fc)(D);var M=(e=>(e.LOCKED="locked",e.EDITORS_LIMITED="editors_limited",e.PROJECTS_LIMITED="projects_limited",e.FILES_LIMITED="files_limited",e.PROJECTS_LIMITED_LEGACY="projects_limited_legacy",e.FILES_LIMITED_LEGACY="files_limited_legacy",e.WHITEBOARD_FILES_LIMITED="whiteboard_files_limited",e.WHITEBOARD_FILES_LIMITED_BETA="whiteboard_files_limited_beta",e.SLIDE_FILES_LIMITED="slide_files_limited",e.SLIDE_FILES_LIMITED_BETA="slide_files_limited_beta",e))(M||{});let F=(0,i.fc)(M);var x=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e))(x||{});let U=(0,i.fc)(x);var B=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e))(B||{}),V=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.EXTERNAL="external",e))(V||{}),G=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e.FOLDER="folder",e.TEAM="team",e.WORKSPACE="workspace",e))(G||{}),H=(e=>(e.FOLDER="Folder",e.WORKSPACE="Workspace",e))(H||{}),W=(e=>(e.CANVAS="canvas",e.PROTOTYPE="prototype",e.WHITEBOARD="whiteboard",e.LIBRARY="library",e.SLIDE_TEMPLATE="slide_template",e))(W||{}),K=(e=>(e.VERIFIED="verified",e.UNVERIFIED="unverified",e.BLOCKED="blocked",e))(K||{}),j=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(j||{}),z=(e=>(e.MIGRATION_NOT_NEEDED="migration_not_needed",e.MIGRATION_NEEDED="migration_needed",e.MIGRATED="migrated",e))(z||{}),Y=(e=>(e.DESKTOP="desktop",e.IPAD="ipad",e))(Y||{}),$=(e=>(e.ALLOW="ALLOW",e.DISABLE="DISABLE",e))($||{}),q=(e=>(e.PRO_TRIAL="pro_trial",e.DOWNGRADED_ORG_TEAM="downgraded_org_team",e.PROMO_CODE="promo_code",e.ADMIN_OVERRIDE="admin_override",e))(q||{});let Z=(0,i.fc)(q);var X=(e=>(e.UNPINNED="unpinned",e.PINNED="pinned",e))(X||{}),J=(e=>(e.FILE_SEEN="file_seen",e.DESIGN_FILE_SEEN="design_file_seen",e.WHITEBOARD_FILE_SEEN="whiteboard_file_seen",e.FILE_EDIT="file_edit",e.DESIGN_FILE_EDIT="design_file_edit",e.WHITEBOARD_FILE_EDIT="whiteboard_file_edit",e.DEV_MODE_FILE_SEEN="dev_mode_file_seen",e))(J||{});let Q=(0,i.fc)(J);var ee=(e=>(e.CREATOR="creator",e.PUBLISHER="publisher",e))(ee||{}),et=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(et||{}),er=(e=>(e.DEFAULT="default",e.SRGB="srgb",e.DISPLAY_P3="display_p3",e))(er||{}),en=(e=>(e.COST_CENTER="costCenter",e.ORGANIZATION="organization",e.DIVISION="division",e.DEPARTMENT="department",e))(en||{});let ei=(0,i.fc)(en);var ea=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.ORG_INVITE_REDEEM="org_invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.RESOURCE_MOVED_TO_ORG="resource_moved_to_org",e.DRAFTS_SHARE="drafts_share",e.ACCESS_EDIT_LINK="access_edit_link",e.CREATE_TEAM="create_team",e.JOIN_TEAM="join_team",e.JOIN_TEAM_REQUEST="join_team_request",e.ADMIN_UPGRADE="admin_upgrade",e.SCIM="scim",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.RUN_PLUGIN="run_plugin",e.RESOURCE_MOVED_FROM_ORG_DRAFTS="resource_moved_from_org_drafts",e.DEFAULT_PAID_STATUS="default_paid_status",e.FJ_GA_REUPGRADE="fj_ga_reupgrade",e.EDIT_BUTTON="edit_button",e.EDIT_ACTION="edit_action",e.ACTIVE_EDIT_ACTION="active_edit_action",e.ORG_MERGE="org_merge",e.DEV_MODE_PRE_COMMIT_BETA_USE="dev_mode_pre_commit_beta_use",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.SCIM_RECOVERY="scim_recovery",e.ROLE_FALLBACK="role_fallback",e.PAID_STATUS_ON_ORG_CREATION="paid_status_on_org_creation",e.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN="team_added_to_org_through_figma_admin",e))(ea||{});let eo=(0,i.fc)(ea);var es=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(es||{}),el=(e=>(e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.PROJECT="project",e))(el||{}),ec=(e=>(e.ORG="Org",e))(ec||{}),ed=(e=>(e.ORGANIZATION="Organization",e.ENTERPRISE="Enterprise",e))(ed||{}),eu=(e=>(e.INHERIT="INHERIT",e.NONE="NONE",e.OVERRIDE="OVERRIDE",e))(eu||{}),ep=(e=>(e.INHERIT="INHERIT",e.OVERRIDE="OVERRIDE",e))(ep||{}),em=(e=>(e.PUBLISHED_PLUGIN="published-plugin",e.FIRST_PARTY="first-party",e))(em||{}),eh=(e=>(e.PIXEL="PIXEL",e.SCALED="SCALED",e))(eh||{}),e_=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.PROFILE="profile",e.WIDGET="widget",e))(e_||{}),eg=(e=>(e.NONE="NONE",e.ACCEPTED="ACCEPTED",e.STARTED_ONBOARDING="STARTED_ONBOARDING",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e))(eg||{}),ef=(e=>(e.STATUS_CHANGE="status_change",e))(ef||{}),eE=(e=>(e.BUILD="build",e.COMPLETED="completed",e.NONE="none",e))(eE||{}),ey=(e=>(e.FIGMA="figma",e.APPLE="apple",e.GOOGLE="google",e))(ey||{}),eb=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CONFIG24="config24",e.APPLE_ALPHA="apple_alpha",e.GOOGLE_ALPHA="google_alpha",e))(eb||{}),eI=(e=>(e.ORG="Org",e.WORKSPACE="Workspace",e.TEAM="Team",e))(eI||{}),eT=(e=>(e.IP_ALLOWLIST="ip_allowlist",e.NETWORK_ACCESS_RESTRICTION="network_access_restriction",e))(eT||{}),ev=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(ev||{}),eS=(e=>(e.STARTER="starter",e.STUDENT="student",e.PRO="pro",e.ORG="org",e.ENTERPRISE="enterprise",e))(eS||{}),ew=(e=>(e.ORG="organization",e.TEAM="team",e))(ew||{}),eA=(e=>(e.ORG_USER="org_user",e.TEAM_USER="team_user",e))(eA||{}),eN=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(eN||{}),eC=(e=>(e.INCOMPLETE="incomplete",e.ACTIVE="active",e.UNPAID="unpaid",e.SUSPENDED="suspended",e.DEACTIVATED="deactivated",e))(eC||{}),eO=(e=>(e.FIGMA_FIRST_PARTY="figma_first_party",e.FIGMA_PARTNER="figma_partner",e.OFF_PLATFORM="off_platform",e.HAS_FREEMIUM_CODE="has_freemium_code",e))(eO||{})},279453:(e,r,n)=>{"use strict";n.d(r,{$kt:()=>eh,AXx:()=>eQ,Acj:()=>e6,Aqu:()=>tW,BB3:()=>ez,BXv:()=>L,B_E:()=>X,Ce_:()=>t5,CfA:()=>K,CrP:()=>q,D2i:()=>h,DSh:()=>tU,DtB:()=>tF,EW:()=>tQ,EZU:()=>tn,EmG:()=>re,FHz:()=>ed,FqP:()=>th,G0Y:()=>v,G9Z:()=>rn,GIl:()=>p,GgD:()=>eC,GyZ:()=>tj,H1b:()=>rp,H5I:()=>tK,HSg:()=>rr,HdA:()=>_,IiJ:()=>ti,J2w:()=>eb,JJY:()=>tE,JKh:()=>eG,JkW:()=>b,JuA:()=>tp,KLE:()=>V,KiY:()=>tm,L1I:()=>ev,Lew:()=>e2,Lom:()=>tJ,Lqr:()=>tV,M5e:()=>rc,M9I:()=>A,M9q:()=>ru,N63:()=>tR,N8H:()=>R,NI1:()=>tg,NLL:()=>W,NSA:()=>e_,OCJ:()=>eE,OFA:()=>rl,OiG:()=>eo,P0r:()=>Z,P8Q:()=>eK,PG0:()=>eH,QD8:()=>u,QEv:()=>tY,Ra2:()=>tZ,RmP:()=>y,SMQ:()=>eg,Sc8:()=>O,Std:()=>ta,Stx:()=>eD,T0:()=>tL,TKM:()=>et,TNJ:()=>I,Tej:()=>tq,U8U:()=>ro,UpR:()=>el,V15:()=>rt,WKb:()=>t9,WND:()=>ea,X$D:()=>J,X9s:()=>t6,XGw:()=>ep,XKS:()=>tB,XRH:()=>s,XRI:()=>eP,Xw7:()=>tw,Y9I:()=>e4,Yh6:()=>tT,Yrz:()=>N,Z5M:()=>ei,ZBn:()=>tC,ZzU:()=>ey,_iU:()=>F,aNI:()=>eS,aQv:()=>eq,aRw:()=>tl,abL:()=>M,bCq:()=>ri,bUF:()=>tk,bUn:()=>t8,bel:()=>tG,bsh:()=>t0,c2_:()=>Q,cBJ:()=>eR,cQi:()=>eA,cfd:()=>E,cmY:()=>t1,d0w:()=>ew,dA6:()=>eO,dDF:()=>d,dTR:()=>eI,dq_:()=>tf,eHy:()=>j,eSI:()=>eT,efs:()=>eZ,ehp:()=>te,f19:()=>e1,ftA:()=>Y,fy7:()=>e0,gk5:()=>e9,gkf:()=>ef,grH:()=>e7,hbX:()=>tD,hj8:()=>B,hjj:()=>td,hqi:()=>S,i1D:()=>t2,iJD:()=>er,iL6:()=>tP,iY3:()=>eN,ib2:()=>em,jXq:()=>e5,jl4:()=>to,jmg:()=>t4,kJx:()=>k,kQI:()=>T,k_1:()=>tu,kdQ:()=>ee,lrh:()=>tA,m0h:()=>eF,mCn:()=>ej,n8j:()=>ex,nD6:()=>C,nJE:()=>ts,nXJ:()=>D,nn0:()=>eV,o6H:()=>rd,o8f:()=>tX,o9Z:()=>c,o9k:()=>e8,oBY:()=>g,oGE:()=>tb,op7:()=>tS,oro:()=>z,pFu:()=>eB,pKB:()=>U,pMp:()=>H,qBf:()=>en,qNg:()=>eM,qRE:()=>eu,qYc:()=>tv,qZS:()=>ek,qjT:()=>ec,qn8:()=>P,ruy:()=>t7,rwE:()=>tN,s5h:()=>tr,s5n:()=>eY,sBg:()=>t_,sMZ:()=>t$,sMs:()=>m,saW:()=>t3,sdp:()=>f,sn$:()=>eU,tIY:()=>e3,tWm:()=>ra,u3q:()=>tc,u6n:()=>eX,uXs:()=>e$,vE:()=>tI,vgO:()=>es,vsj:()=>G,vtM:()=>rs,w2r:()=>tt,wZi:()=>eW,wj_:()=>$,wtK:()=>w,yFE:()=>tM,yU5:()=>tH,yWs:()=>ty,y_L:()=>tz,yf7:()=>eL,z8m:()=>x,zkh:()=>eJ,zz3:()=>tO});var i=n(730371),a=n(394255);let o=new Set;function s(){return[...o]}function l(e,r,n){let s={_name:e,_argKeys:r,_hash:n,_reset:e=>{l._atomFamily.setShouldRemove(r=>!e||(0,i.deepEquals)(r,e)),l._atomFamily.setShouldRemove(null)},_data:null,_args:null},l=(0,a.he)(s);return o.add(s),Object.assign(l,s)}let c=l("FileCanDiscover",["key"],"96e068ce8e3e91adb6ada99a23086bf39f17fbaf10c44448399f9f80a4c05162"),d=l("FileCanEdit",["key"],"94cee8957063f301090ae45312a44a680028710d425c00134f19942e8ce38132"),u=l("FileCanManage",["key"],"246283961e7960c7be7bd6b654da8751e5b6ddd3c2162ec7ebe71e76dd5ca8f0"),p=l("FileCanUseFigmaAi",["key"],"ea57dc893d02b5bfce6bba6572e5e8e68d19cfdad24d85302ae908d735cb7f2d"),m=l("FileCanView",["key"],"914a954cda6128d4674d9717321742ee20290965e07c1887735178445097b0c9"),h=l("FileDevModeTrialRequestPending",["key"],"a5c61b0921141adc71048c1cda3bfa5a4eac655f267c39ba90883c66c3a71be0"),_=l("FileIsEligibleForDevModeTrial",["key"],"e287b51d6c2ad609915b2a150ae66ae8683f74674ed4578eaa159e6f578295c5"),g=l("FileIsInDevModeTrial",["key"],"9c47d409f80c094280e94dd6ad27a4042b055e81b8ab9dec1e61f5f0fcce4a29"),f=l("RepoCanMove",["id"],"93235f9bcf370a5cda86e6eb7cf3385b6c44639277789817045cbeff655a4c29"),E=l("RepoCanView",["repoId"],"6c27c5d96e6e8e69a9a89db3e1afbf542685b6089c0aeceb04b258b7013f06f4"),y=l("FolderCanCreateDesignFile",["id"],"e8f7503f972e1a56b3c8b525e17dae850c4c4bb85ef8d41526b7d04c1b690bb8"),b=l("FolderCanCreateFigjamFile",["id"],"2b2414f681528cb92ec6370a5837d6fb3f9135acef044da93fcbf89cf8b690f0"),I=l("TeamCanAdmin",["id"],"3e3501a7890c3d45c1d389d7facabebd9097ecb4ebedd019234797b5830ec048"),T=l("TeamCanEdit",["id"],"647fb718fd02308dc586e1890f72734bf8943c769c83c39c1a0580282141d643"),v=l("AccessibleFoldersV2",["orgId"],"b1411cddd0225adc8dd05265049f1aab7b195cae91475726dc23bf5b1d81cbb8"),S=l("ActiveFileUsersForFileView",["fileKey"],"5f1d95341891783b9628176ec323d3e47e0cecc92f5f55840722cecc727b5af6"),w=l("AddWorkspacePinnedFileView",["fileKey"],"e82ecbabd9689c2656b6fd736678b1a470546e77968eb9ffa9bcaabe586519ca"),A=l("AllowlistPluginsSectionView",["orgId"],"80441ad85857fedcebee9dcf2e5f8c6a8c38a6819352b7e9e9c16b42b04dabf1"),N=l("FileOrgExtensionSettingsView",["fileKey"],"8f268a3c9b6d35cca60e3275a2585672dabfccb3f7e1e09b3e0503a40a0f4ea2"),C=l("AppliedColorPaletteForFile",["fileKey"],"d7bb73a2b34fc6a8b262a0d3c6a14139aabe2f321f2198e9a8f64aaad1aaa3c3"),O=l("AutoRunPluginsView",["targetOrgId","targetUserId"],"fc89e7af16595f8972a32021ef9af977866c3f9518243670e308d9c9959a4114"),L=l("BillingTrialForResource",["resourceId","resourceType"],"eae7e0970266b809811d071443b722e7cd0bcea765f60ea9ac150d6c8983076a"),R=l("TeamByIdForPlanView",["teamId"],"7a8a07fd41d48daf4eeb503535ad0544746d94a4c76b6b563952f5b4c10b3b84"),P=l("TeamByIdForPlanUserView",["teamId"],"b86bd6c36b45bd281c30c25ee3837d6d20c517cd8abb8a57d034b6730bb3cb98"),D=l("OrgByIdForPlanUserView",["orgId"],"894ebab363bb4a70e8632798466324020733e3e7e4d3003f9f07b4f5dd580009"),k=l("BlockingPrototypeData",["fileKey"],"38621d62e96faab0a1a844202aafcefd0798d38ff3bb76d1bc5ff12758922c2e"),M=l("BlockingUserState",[],"f156dee134b054963ffc5c9cb4b70eecc8779fbb2f3248d04dbae4c7a95ae28e"),F=l("BranchOpenMergeRequest",["branchFileKey"],"f8edbf534eda2e25b28944111acba2c4a4389bdabbe3317aad41c398fada7496"),x=l("BrowseTemplatesView",["currentOrgId"],"ace64503f7e7ab64486ebbba35dbde191c4a7771ffedaa84bf681954f3708f25"),U=l("CanGoToSourceAsset",["sourceFileKey"],"efd568b2f04ef549c7cc011801d442744741b49bd3ae2b9e9677079b907aef98"),B=l("ChurnFrictionPersonalizedModalView",["teamId"],"93f3a0916c256090428e71e69914e905858fff026f9d829047ac5c664826db9c"),V=l("CommunityHubLikeForProfile",["profileId","hubFileId","pluginId"],"0b2c5247975aa8bfb0f1b20240405ca5c36298ce51f868b46e4272567df5ba7c"),G=l("CommunityLibraryComponentsAndStateGroups",["hubFileId"],"bd355a0e54a874fc4309bdd65d40f635d0622bde117f9c15c31c82f0abf7dd34"),H=l("CommunityLibraryData",["hubFileId"],"b61cb120f5bafb02343be37a5bd4d0e6363f39d371a974d382ec48bb74459eee"),W=l("CommunityLibraryModalAssetsData",["hubFileId"],"f355c85607b0e254a0ab354d2523d255be28ef185d6e6fc7d87f9de3934623ba"),K=l("CommunityLibraryModules",["hubFileId"],"5eeb3be0f0385db1a3bde9d65e72a65d277b319b96e4a9d4c38f5b8812672a78"),j=l("CommunityLibraryVariableCollectionDataWithVariables",["hubFileId"],"c92b093b77c1c69be4ac462966f07c1ad48fc106e02125178d69a027218d3a5e"),z=l("CommunityPayment",["monetizedResourceMetadataId"],"0fc7e090505e4843be46ef517e18e051b23d36baebf2d6a9f90897b1e630fbcb"),Y=l("ComponentAttribution",["key"],"ed1272a51b3a21d2a7c8e394378c34db65cc9d6929f9174c9f9740b218de4b06"),$=l("ComponentUpdatesForTeam",["teamId"],"71fdcbd40c49ef2884e67f3caa34154137ee032e226bae03afe1adae87386834"),q=l("ComponentUpdatesForProject",["projectId"],"009dda3e1f112b2b991cb5215d3e80dd7723b08afcd376b458b2e9657e65b348"),Z=l("ComponentUpdatesForFile",["fileKey"],"1c3ce932d0f63ab2a3df9f01ee932ade154d86e112c8dd042aecfed4bdf1d035"),X=l("StateGroupUpdatesForTeam",["teamId"],"790c5930fa21681ffa40ebb59c20637f9a108ca8b88c90f5b2c2bb22ceb2e5a6"),J=l("StateGroupUpdatesForProject",["projectId"],"4dc7a95cf0ab6279d1ac7f2e748d02b3712a62e349acec0f4a7634ed192191a5"),Q=l("StateGroupUpdatesForFile",["fileKey"],"66c65a076584e72ec6012bd0d14f753d10be212b08bf31e5e32a8cc8fef1153f"),ee=l("ConfiguredUpgradeRequestModalView",["orgId","permission"],"b918baff844f4f080bd845a5d8e55c441619beb41be649e26a321ef3fbb5e335"),et=l("CurrentUserAssignedWorkspaceView",["orgId"],"0c7124b14ed5ccdccfb7155562ef02dcd72fedd6730711bc62fa19726d19780c"),er=l("CurrentWorkspaceView",["fileKey"],"b37ca03df4ca9a6b339690368ea9b85fb1b4fa8d6a7624a425b8d47d45da4f74"),en=l("DeleteWorkspacePinnedFileView",["pinnedFileId"],"400c688509ba6b5ce2cbe75bdd4f838b35f7c0b2b1219f347c559dd5b0439fdc"),ei=l("DevModeOptIn",["orgId"],"61d5df4716cb044bf5ff0c875b69f90e807db6d988bf8202e1cdc9d9113a19bb"),ea=l("DevModeActivity",["fileKey","nodeId"],"dbda44daa61bcff2c66b8956f51a3f2840847d268d0ef0b1020033db82bf68a6"),eo=l("EditButtonView",["fileKey","orgId"],"90127e61e449869ced30ec951990d7922bf558c599d60e58c4f0553ab4b3d6d0"),es=l("EditWorkspacePinnedFileView",["pinnedFileId"],"aa4bf1022172ec9c5677361dad05b565c0bcf8b9ecf8c7cf7e5c2b6611e3b171"),el=l("EduOffboardingData",[],"0158a27ab01fe1c83646bf0b7a2e6fdd43d68a852172299c3bf040300d2bca41"),ec=l("FavoritesByResourceId",["resourceId","resourceType","orgId","teamId"],"ab58a72642cd2b4cd623c445167d74af7764b91c4bcef03033b057f721cbfe3b"),ed=l("FeedPostWithDetails",["publicUuid"],"b09d3da7b2fb8d70c6004142dc4cdc1dacbd464a8997b7b495c149a22d799cfc"),eu=l("FeedPostsByFileKey",["fileKey"],"d7003ad441f2d680278a7d6d2365ac7814b45e746c4f146b59400f7b7cc2ba66"),ep=l("FileAccountTypeRequest",["key"],"793dbbdda27e844e4ba0d1ba1e96e9cca78359ff5ae35fe241cabd7321650357"),em=l("FileBrowserSearchBarData",["currentOrgId"],"38ed175c128f4f8f5bf24a9edee93e58cd7403b18b3def89b85d87194ab2a6f0"),eh=l("FileBrowserSidebarData",["currentOrgId","currentTeamId"],"145fc4b82ba511ecb720dee7e86fb423abe614040fdde91f68aea44d4b31140f"),e_=l("FileByKey",["fileKey"],"d409323a0cff8ec9083e2fc057883cd12377a3b2594d57b17e61af4eff1772f5"),eg=l("FileByKeyForRealtimeShim",["fileKey"],"96682bad4a9d67e23784a0785860156f3466d0d8196235a7f14ebc7d4bd8c274"),ef=l("FileCanvasMentionsByFileKey",["fileKey"],"08dde0f2074d269d13bef69135cfe0c6b7411282250ef00632a71679e548ead9"),eE=l("FileEditRequestExistence",["fileKey"],"55b97a4e6d343306b9e53426dd411854cb998677ff56f3733553024d41bc28cd"),ey=l("FileExpirationView",["figFileKey"],"63f1f8b76ce0bf7092a474a9eb29db91e07f6414d0307424f2134a55e9b5767a"),eb=l("FileFeaturesEnabled",["fileKey"],"3e849cdd44aa88387c5f239dff61de34b50b1a524cbfd9b4c80ab5cd6dfb95fe"),eI=l("FileManagePermission",["fileKey"],"9df1f05c0e7d369d96d266df64c1f1881633b61b5701b17aa07b71c871ea6cea"),eT=l("PrototypeCanView",["prototypeId"],"020a4c68229e4d6434ea0875f966c6516845141d7edd61c5599279491e62ab80"),ev=l("FilePermissionsV2",["fileKey","projectId","teamId","repoId","currentOrgId"],"e680a52a67207c18838b73704f4021bb8bcc35c59b81e3c3ba439f21ebcba1ca"),eS=l("FileShareModalPermissionsV3",["fileKey","projectId","teamId","repoId","currentOrgId"],"a958abb7d692df20b5341fdd58d58fc6bf9856ce76c4265f962c0886affeff08"),ew=l("FileShareModalCurrentUserPermissions",["fileKey"],"2b7c499ad38668ef23e6a577e92e5620a7ab57dd97db9a0e2d970aa2778b5cc5"),eA=l("FileImport",["projectId"],"f6c6af4d4a7fb13f3b1842bcc703369552d5ddaec4fc7d572fd2b61a2bc67189"),eN=l("FileNameViewDropdown",["branchFileKey"],"7fab62a7b61e27abc1bb8d1639d2525320ac7fad8af15d620747bbffc7d5fc13"),eC=l("FileNameViewRepoFiles",["repoId"],"b7027e0a80b4b9349ad978ce7eae759ebe7d490a55595dbf2aeefba2f179ad81"),eO=l("FilePresenterData",["fileKey"],"0508e03c1064490b32dd1ef8d46d6c4fb0666684e8ede6c521a9b93e105b789a"),eL=l("FileSearchResult",["projectId"],"7aec367ec7d989f848385aa24d88615661b904010261788704b616a78ebad9d6"),eR=l("FileTemplateView",["fileKey"],"07af256a60fd0adcd20542e38051ae1f3f25a2182e1aef4328379f740dda7af7"),eP=l("FileTilePermissions",["fileKey"],"e64c345ad4c714e2590e5573f5cdd7fa1db118498df2234b8781c66c251aa819"),eD=l("FileVersions",["fileKey"],"aacbe606bf273c220e724b1ce7ec3fd780bb54542e8145d53ca721272f8e4465"),ek=l("FileWithCommentsAndReactions",["fileKey"],"320b98f9f7600fd901be2b9f44216c16660a2dbb22095278f44399f934e7cd5b"),eM=l("FilesForTeam",["teamId","updatedAtTimestamp"],"da9a9ae890c72ce524994c0377ffe4e663f93463472c6d2aae6d776b41ddc7c6"),eF=l("FilesForProject",["projectId","updatedAtTimestamp"],"f73b349d1d5a7b04dc697bd894c11aaacf5c31bf48c08dbaa537e4ce4f8681f1"),ex=l("FilesForRepo",["repoId"],"a0d73a52ef398d7392a528f3bf8d6ef819b117c435fcb26b18fd1395cd6ba1b2"),eU=l("FolderSearchResult",["teamId"],"1c275c6f099475f4d0b36826c52c718fe51bd3d6c4f0744d4e03ed5c2cd6d9ce"),eB=l("ProjectsForTeam",["teamId"],"de767181d97beed84323939e47ae56b528561dce93a2e23febd43e997a7a8728"),eV=l("FileWithRoleRequests",["fileKey"],"90cffea1776cfa15881b4478aa311df28f8cf5692108cff7e7ebfe86b609445d"),eG=l("FileWorkshopMode",["fileKey"],"8e1a7b5f2c1eee980cebed68b2d38c1bf666c1f4185a414780d92a7d2a8deb50"),eH=l("FileWorkspacePinActionsView",["fileKey","orgId"],"ff1ee6ad5ffa76cdf66fdcf6239d4c3ece0c30e17159a2a939cd3529d1c58e55"),eW=l("FileBrowserRecentFilesView",[],"587b0c8c100ed6282fd98c84052c1f042d0454e7d575103a95417d8668d7a0f7"),eK=l("FolderPermissions",["projectId","currentOrgId"],"195383c8583b7f8d020deb3f7876e39242eb9433fadb498e4749e063a1bde1da"),ej=l("FolderCreation",["teamId"],"0f4ba11fae85787ee96394297534a9b49061b431472b7328164b19fa7687b37e"),ez=l("InstalledPlugins",["orgId"],"9b50f9e18626564c831404d24d65a3671e9b05c2a1b392bd73deaf2a55b0d96a"),eY=l("LibraryData",["fileKey"],"b5bd2072f3847759e5388a49ac1304891d4385f788f1d814b7ee10131e54a4d1"),e$=l("LibraryFileSelect",["projectId"],"2efc1533087a59d375256eb54a80d19b4810c3c1e690bd43de7eb1a50885344e"),eq=l("LibraryModalAssetsData",["fileKey"],"6dcafbee691c2f279094c89595be16a8aa13349e4f761f4c7faca9fd77b5dddf"),eZ=l("LibraryModalVariablesData",["fileKey"],"6d4170b8880b4562700f3d6aae29c32f7eed9e7861912bb2a9461dd50403aa7d"),eX=l("LibraryModuleData",["fileKey"],"a0f8617c90fa671bf6039f878d1a8de91eab67958dd3d4d5ea633d5e04b704de"),eJ=l("LibraryModuleDataByLibraryKey",["libraryKey"],"b07644ac2eb3b1e56bdc12ae3716d2673144ca3791f61373324e4078d4861c0d"),eQ=l("LibraryOrgSubscriptions",["orgId"],"fc756228f3eedfb155c0727a4482e35033e06035b31f5ad34bcc4b973b4e994c"),e0=l("LibraryPresetSubscriptionsV2",["group"],"d494042a6a7e3b1e0d08bb06615a8ec8a7be348f5f764046b705adf22ce47891"),e1=l("LibraryTeamSubscriptions",[],"8c71cd9b1698bd408c22e50a34e06898161ee7e8767a5ea2c0c43bf9e4b41c75"),e2=l("LibraryUserSubscriptions",[],"0b763c1a28a17a498c836161815bc63425a01a24156ede34a3e10ff566cef857"),e3=l("LibraryStyleData",["fileKey"],"aa5f8cb03ca4f11cc7cb5d56438d04dc9d122eb009f99f5ff395fac1562c236e"),e6=l("CommunityLibraryStyleData",["hubFileId"],"894f109c71da8e508c246aa97f5d020a41167b98fb9240d7d2f3f27e28c2adea"),e8=l("LibraryVariableCollectionData",["fileKey"],"02fda9a383cafadc0644afb7dce62be8fe7e5acf24e13063e360060a971324bb"),e5=l("LibraryVariableCollectionDataWithVariables",["fileKey"],"8fc64bc9717bfd220d53b1cc7e4c85b9f1eb0c4538c29d6cf6461a8d183d40bd"),e7=l("MergeStatusRepoFiles",["repoId"],"ba665e0010cb72c441175650656e9dfd4530a6e8e23e66362bf5de93976adc6c"),e4=l("MoveFileCurrentProject",["projectId"],"119018c5f6064fb75365bbb32f9a97357ac2c1705f07c731c1a1ae93f8c2a773"),e9=l("MoveFileDestination",["projectId"],"49be001c53cdd25baabd9177941d7eaab679840b54c596ca48aac4c894907e8d"),te=l("OpenEditorFileData",["fileKey"],"f627ea7893932c2b705ab6d1f8943b629240aef1e9817884c56c54b8282d006d"),tt=l("OrgAdminUserView",["orgId","queryParams","firstPageSize","refetchToken"],"523caad84ccbc924f107f57adc5d3971868db10361f92b97f85a94449cb6c70f"),tr=l("OrgHasWorkspacesView",["orgId"],"04a21fd542b7ee3ef85f0a3c726075db2de4b464fb727c10032948d303c867d7"),tn=l("OrgByIdForRealtimeShim",["orgId"],"45b44af1d000c72e420faa1f55de3950ea8ccd099c4d0aa3657e53aa60dc3a3a"),ti=l("OrgByIdForPlanView",["orgId"],"69778c5b27322161028b0a890f666e2cadafd355d262d881b331e36464968d45"),ta=l("OrgJoinRequestExistence",["orgId"],"b5a651cbe35528ced6f03c9517a92b337f71e1d197f43441754b582162cf41c9"),to=l("OrgTeamView",["orgId","queryParams","extraTeamIds","firstPageSize"],"fda29c13e66a69bc25228533095e8c22c2ae5424103f7337bd88103091bae285"),ts=l("OrgUpgradeRequestView",["orgId"],"c150d9228e809b0fd949c7e748e944cb2ee56cc6ccf1e3cfb014b637afed9aee"),tl=l("IdpUserView",["orgId"],"820f760218c7943e3eb7ebd45f16a3e1767665d33eeae2542c873aae73a4d8dc"),tc=l("PendingUserMentionByCommentView",["fileCommentId"],"98448f91af1f453b5b6734a0b5e8618acc07797291f479b99596c129d9a6edb9"),td=l("PaginatedTemplatesByTeam",["teamId","editorType","firstPageSize"],"7b7c0d9306d0e5827f259e0d9cb137f2f6642a3b5741d42570d3ec55a31ee054"),tu=l("Plugin",["pluginId","orgId"],"e44a7d99e88ba0db4dabb24a2e274ddf81c49685b0924f4c714972d0a3432d00"),tp=l("PluginPreferencesView",["targetOrgId","targetUserId"],"33215b7caec97ed8df56998e236ebcc69f3d74e6117ee1c506775ec26de4ba78"),tm=l("PluginRequests",["orgId"],"454d04a089fae11ffe0a34d1912f610c3e449689c4c5479b4bbb0f34a75926d9"),th=l("PluginSecurityFormResponse",["pluginId"],"ed6f9188040a98a2c1f2bf4010ff7559a4d6e6e0aec6449fd736e89f5256b763"),t_=l("ProRequestUpgradeModalData",["teamId"],"50be44e91a9140285877ee5a5dbd2de4d02855331c1018e3048cac21afecf80f"),tg=l("ProjectNameById",["projectId"],"7ba0086fc2d15381244155d365856935097cdaade7e1814e0783bf18ab53acff"),tf=l("ProjectByIdForRealtimeShim",["projectId"],"f944680b6c28e7b0da4d55dd3f5caf76e9646fd47fc9e456958465c115b79ef5"),tE=l("ProjectFileCount",["projectId"],"732fc307d17f77dcfae14da31f010ca424e0b00693ed9ceeaea49c58737e79f9"),ty=l("ProjectFileNames",["projectId"],"b8cce80b07a3045853267c36c3625160e7fba07036b3e49db6765b8e6b9c02c9"),tb=l("ProjectTilePermissions",["projectId"],"f47430b234889c8e96242377ea3f38c3272e689cbbfbb8554df7ec6c292e4a95"),tI=l("PrototypeTilePermissions",["prototypeId"],"977169b7f1e74b6a39209b07d77356440fe1425c9f181465b6b94ab06d8cd6f3"),tT=l("PublishingModalView",["fileKey"],"26af199a77b18e0b7cce081d274a5cb0a7c39eabbc2b9a95ada762824b088840"),tv=l("RepoByIdForRealtimeShim",["repoId"],"15d9984a198b456e92e383624bd7006828b69980be255c539a4842104b5dd221"),tS=l("RepoFiles",["repoId"],"d9d84f09afe2dc952e07fdc661469d6cdf0cecca0d1caa6abeba5009bea5d3e3"),tw=l("RepoReviewerSuggestions",["repoId"],"94185a7fa65e3202424dc7fae7baa0a30927a7e2bae962b3821466ec9b597443"),tA=l("ViewerRestrictedDraftAccessLog",["fileKey","orgId"],"1d26f1b7a583977c5575507c7b228b2d658a48834f3b332f8000d82f0fcf432f"),tN=l("RepoTilePermissions",["repoId"],"024ba84bca5c1518ce91e3ed134343429b0d045c3f28a3acef91c9c743829d24"),tC=l("ResolvedComments",["fileKey"],"7b5ece4b590e0ceeb80a1dcd7a7bba3427da3ab5e5c56e469d8d213acd73ccab"),tO=l("RoleUpdatesForTeam",["teamId","updatedAtTimestamp"],"8280b091c5c61443870a2bda88f428ffb419bad913a45f80149c2a90efe838b1"),tL=l("RoleUpdatesForUser",["updatedAtTimestamp"],"7ed83f582f35d31698fe06a2dd16a40d77f8a0bbfa8a37c47a91c0f221331fe1"),tR=l("SearchFilterWorkspaceView",["orgId"],"130ec2bbc72113b8e1233d4a0abd1896574662972483dee3600bdf6a98524b62"),tP=l("StateGroupAttribution",["key"],"27b016f8c329237c21ecda9585d660462fcc25fe6cf48287100dd6e5ee80761c"),tD=l("StatsigTeamsOrderView",["currentOrgId"],"75513768b3c4f5dd170727d4cb2c746a34fccc6cbcf648c0cb937c740905618b"),tk=l("StyleAttribution",["key"],"da54a71323b1cd8e0d95c0c38ee76d928d5c44ff6a4c27632a3fd776ed6cdc84"),tM=l("StyleByKey",["key","openFileKey"],"1dd3129151982c3977bc50c2e24ac6941e3353eb498139e0bbfa4b99953fded7"),tF=l("SubscribedLibrariesForFile",["fileKey","teamId","workspaceId","orgId","group"],"dc6e86c2d0c12e7756501f21796fdc89fbadb267aa860125c8850839cbad516b"),tU=l("SubscriptionUpdateSloData",["id"],"6045b83d38bf38732a0efc83edc2666a35d0c8896c9cc8202bbe2a2895613563"),tB=l("TeamByIdForRealtimeShim",["teamId"],"a3018da611db9903541be3e6ad2ea2a6eb845016f1dce96c35414332f7a6bc50"),tV=l("TeamCreationWorkspaceView",["orgId"],"35ba21389e67dd7ab06172a6ffd613dfe76efabdb65771ea81b86f77884bfc51"),tG=l("TeamFileCountsByTeamId",["teamId"],"057bf801d17aa54f27a4c03ef1bcf79081fc24a12011e3a389ee2dd771846808"),tH=l("TeamFileLimitsInfoByProject",["projectId"],"0576e28b1614ed2868b1fe15dc584bfdad6ceac10bcdfd8dd2dd01a28b055f88"),tW=l("TeamFileLimitsInfo",["teamId"],"f845019ad5801fc7c1615e90af00eca250ab4833d41353c27c0083037f80d8b3"),tK=l("TeamOrphanedStatus",["teamId"],"c00352425f1fa323b0123bce3a7bd32c3fd1b4570013079c6a9b71a9f666f3ca"),tj=l("TeamPermissions",["teamId"],"6cd33a908b865399dbc1ec1e76b2ad9cadc87d8834c70293f0c413a83c59cda1"),tz=l("TeamTilePermissions",["teamId"],"c722850f6e18857a80a2aa359f468725d35d86c9a376cc4a86e5545c62d89f0f"),tY=l("UserColorProfilePreferenceView",[],"216d0bed6c38dd4b9d6b5287c2398707f4b0513ada63f2fb0e62d6dc7d7c31a4"),t$=l("UserFlagByName",["name"],"cd42816fa66bc64de2dd9d1061495a885f71420bf68f6d0ade675cb082524f9d"),tq=l("UserForRcs",[],"ff9d6426f634aaad009c5aa67f5244bb05df6a1ac0efc21ed891c1303ae2d270"),tZ=l("UserForRealtimeShim",[],"1a89e221cbca80c745f0828cbb184f8f63a3f04fb4030ac391663a6b047e2724"),tX=l("OrgUsersForRealtimeShim",[],"94ff2f2c624d8a54178c2bc0fad30e818a6ceea62866999c7ee230e8e26634da"),tJ=l("VariableByKey",["key"],"8bd99442bbb060816a07552ef72f1083bf856f0f3c008294de3ac1e2eedca44c"),tQ=l("VariableCollectionAttribution",["key"],"5d401ee0e4d543c4ba8f4d9a0ec146a71f37b81887aa5282a93f88062466e2a8"),t0=l("VariableCollectionByKey",["key"],"ea1a5482c779db4eaef8deb615d40f004bf82c7745aa4c30332329a90bf1e43a"),t1=l("VariablesByVariableCollectionKey",["variableCollectionKey"],"2a1f09a749cddae31a160e113787426bc3877651bb7435da4d786953c1627f43"),t2=l("WorkspaceModalPluginRequests",["orgId"],"58f1c2b1c207cc030538bd134a593b0dd005064421d73d4b233e4ca6b39fe66e"),t3=l("WorkspaceSelectorView",["orgId"],"e79cd448237eab7578fc7eb0b24e581e70040587b2cfc7e70f2667c05124f10c"),t6=l("WorkspaceSubscribedLibrariesForTeam",["teamId"],"ed9dd271fe6e8012750d6f454edb506a18b052cc600e124df4413d8f1e8c831e"),t8=l("WorkspacesDirectoryView",["orgId"],"cd9fe5c3e928fade6a126e4c371bdd7970d269c6420e8ac6dc1a0bb98f7e0758"),t5=l("ApprovedLibrariesView",["workspaceId"],"c01ef8751391811d63ed49aab8a70c66a78532de852d58c820986536abecdb7c"),t7=l("ApprovedLibrariesForOrgView",["orgId"],"86c216fb79dcfc9f41ec49ce29444c1c9cb39655e009cb588a8c68afba43aadb"),t4=l("DeviceTryFileView",["fileKey"],"57262db6a4c99d03c727ef6e8a734ac28b5bc6fb68fcf7f7134381d122629cdc"),t9=l("ReposForTeam",["teamId","updatedAtTimestamp"],"f203f31bfc1a8cc456dcf68faf64e47ec3ac388ff7188b861e23d4d71e42d0e6"),re=l("ReposForProject",["folderId","updatedAtTimestamp"],"8633cc9357adf7d07c900c8ec5b781985460d010c9bb626be838c52e6ad1818e"),rt=l("ReposForFile",["fileKey"],"cd5aaa0045ebbb83512090df5cdc1797efcc0da19648e16a95e550cbdce95e7d"),rr=l("PluginUpdatesForOrg",["orgId","updatedAtTimestamp"],"97f51ca7f7de806b407bc5e59cde7b601858fc18c8e3f11ff0e789d8db0cb5a8"),rn=l("WhitelistedPluginsForOrg",["orgId"],"8b12c1fda1b3d9919eddd625f78dd71b6e535c117bc48a086fcec9d089c4d4e4"),ri=l("WalkthroughMediaByFileKey",["fileKey"],"b0ff9031e4e5c2f7b005a99136a4083cd162342034f0be9b43da592a0fcd334f"),ra=l("DestinationProjectsForTeam",["teamId"],"78b3eeeed3fa90c5f869a542a83430a1bced4aa5c849c6a3cc69cf221889d550"),ro=l("PresetsDisabledView",["teamId","orgId"],"a09600f75f3368aec7e4d72abeac29662d75ca5211ca553f2bf747572cae228d"),rs=l("OrgUserDraftFolder",["orgId"],"c3abaf4a916fc700e5019ce8f048e4bb26b0d816ae3edfac7d8e501c34557823"),rl=l("ProjectCanCreateFile",["id"],"48cd9a0f3cae70b4519dfee12e3c4e6373f7d49c326691784d9f0307a5c99a0b"),rc=l("FileOperationsView",["fileKey"],"1804b2cde41f2c769e960f2bf7b9ff908ad05dfd6c9d28c90e4181fd2523064c"),rd=l("ProjectNameForFile",["fileKey"],"57e4beaa1055ad81abd1721b24069467dc8cf818c6f7c2da569f151a64e7911a"),ru=l("OrgUserIsMfaRestrictedView",["orgId"],"bd1a0fca7c28399d0692dd739bdd7fff80d1927fb822aca348b70ded96aaae04"),rp=l("TeamRoles",["teamId"],"9819fcc572ef708f6253a07f96e440fe5a186b71766f2524192c51720aad06d7")},623746:(e,r,n)=>{"use strict";n.d(r,{Bp:()=>Y,GA:()=>H,J4:()=>K,KC:()=>V,Nl:()=>q,Ns:()=>T,Qp:()=>U,SS:()=>B,TP:()=>w,Td:()=>$,U5:()=>D,Um:()=>O,V1:()=>I,WP:()=>P,WW:()=>S,YN:()=>J,YT:()=>R,ZW:()=>k,Zt:()=>X,aU:()=>L,cE:()=>W,ge:()=>N,k9:()=>C,uW:()=>j,vy:()=>Z,yT:()=>A});var i=n(634832),a=n(215122),o=n(587670),s=n(534611),l=n(593779),c=n(597616),d=n(88273),u=n(966712),p=n(711525),m=n(96328),h=n(154483),_=n(864319),g=n(99506),f=n(173454),E=n(279702),y=n(66037),b=n(666068);function I(e,r){if(null===e)return null;let n={};for(let r in e)n[(0,m._5)(r)]=e[r];return Object.assign(n,r||{})}function T(e,r){let n={};return(e.link_access&&(n.linkAccess=e.link_access),"proto_link_access"in e&&(n.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(n.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(n.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(n.orgAudience=e.org_audience),"org_browsable"in e&&(n.orgBrowsable=e.org_browsable),"viewer_export_restricted"in e&&(n.viewerExportRestrictedAt=e.viewer_export_restricted?new Date:null),e.name&&(n._name=e.name),n&&r)?{File:{[r]:n}}:null}let v=e=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r.name=e.name),r&&e.id)?{Repo:{[e.id]:r}}:null};function S(e){if(!e.id)return null;let r=v(e);return r?(e.default_file_key&&Object.assign(r,T(e,e.default_file_key)),r):null}function w(e,r,n){let i=void 0!==e.default_file_key?e.default_file_key:e.key;return i&&"optimistic"===r&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${i}`]:{figFileKey:i,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:g.PQ.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:n?.id||null,setByUser:n}}}:null}function A(e,r,n){let i=e.link_access===g.PQ.VIEW||e.link_access===g.PQ.EDIT||e.proto_link_access===g.Pu.VIEW;return r&&"optimistic"!==r&&(!i||"expires_at"in e)?{FigFileLinkExpirationConfig:{[r]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:n?.id||null,setByUser:n}}}:null}function N(e){return{key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url}}function C(e){return{checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,m.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,m.sy)(e.name||"")}`,touched_at:"",client_meta:e.clientMeta||"",created_at:e.createdAt.toString(),creator_id:e.creator.id,deleted_at:e.deletedAt?e.deletedAt.toString():null,description:e.description||"",editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_template:!!e.trackTags?.isTemplate,key:e.key,license:e.license,link_access:e.linkAccess,name:e.name||"",org_audience:!!e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,source_file_key:e.sourceFileKey,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user:e.trashedUser,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),viewer_export_restricted:e.viewerExportRestricted,is_try_file:e.isTryFile,library_key:e.libraryKey,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType}}function O(e){return{id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0}}function L(e,r,n,i){let a={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:n?{design_paid_status:n.accountType,whiteboard_paid_status:n.whiteboardPaidStatus||g.El.STARTER,user_id:n.userId,permission:n.permission}:void 0,team_user:i?{design_paid_status:i.designPaidStatus,whiteboard_paid_status:i.whiteboardPaidStatus,user_id:i.userId,team_id:i.teamId}:void 0};return e.pending?{...a,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...a,pending:!1,user_id:r.id,user:r}}function R(e){return{id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}}function P(e,r){return{id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:r}}function D(e){let r={};return e.forEach(e=>r[e.id]=e),r}function k(e){switch(e){case g.vt.FILE:return"FileRole";case g.vt.FILE_REPO:return"RepoRole";case g.vt.FOLDER:return"ProjectRole";case g.vt.TEAM:return"TeamRole"}}function M(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0}}function F(e){return{subscriptionStatus:"LIBRARY",type:f.PW.MODULE,node_id:e.nodeId,key:(0,a.mW)(e.key),version:(0,a.Pg)(e.version),userFacingVersion:a.Pg.INVALID,canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:M(e.containingFrame),thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:z(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height)}}function x(e,r){return{description:e.description??void 0,description_rt:e.description_rt??void 0,library_key:(0,l.l)(r.file.libraryKey),id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:h.Ps.LIVEGRAPH_DATA_HUB_FILE,team_id:null}:{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,team_id:r.file.teamId}}}function U(e,r){return{...x(e,r),type:f.PW.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,a.ii)(e.componentKey),containing_frame:M(e.containingFrame),content_hash:(0,a.F7)(e.contentHash),userFacingVersion:a.F7.INVALID,min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`}}function B(e,r){return{...x(e,r),type:f.PW.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:M(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,a.q)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,a.Rf)(e.version),userFacingVersion:a.Rf.INVALID,thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`,fill_color:e.fillColor??void 0}}function V(e,r){return{...x(e,r),type:f.PW.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:e.checkpoint?.key,content_hash:(0,a.IA)(e.contentHash),userFacingVersion:a.IA.INVALID,key:(0,a.n3)(e.key),meta:e.meta?(0,b.iX)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function G(e,r){return`/variable_set/${e}/canvas?ver=${r}`}function H(e,r,n){let l="",u="";return n?(l=c.wL(s.sH(e.nodeId)??s.Hr),u=d.wL(s.sH(e.variableCollection.nodeId)??s.Hr)):(l=c.Hc((0,a.ey)(e.key),(0,a.nK)(e.version)),u=d.Hc((0,a.yG)(e.variableCollection.key),(0,a.Vt)(e.variableCollection.version))),{...x({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:f.PW.VARIABLE,node_id:l,variableSetId:u,variableCollectionKey:(0,a.yG)(e.variableCollection.key),resolvedType:function(e){switch(e){case"BOOLEAN":return o.rXF.BOOLEAN;case"COLOR":return o.rXF.COLOR;case"FLOAT":return o.rXF.FLOAT;case"MAP":return o.rXF.MAP;case"STRING":return o.rXF.STRING;case"SYMBOL_ID":return o.rXF.SYMBOL_ID;case"TEXT_DATA":return o.rXF.TEXT_DATA;default:(0,i.assertNotReached)(`Unhandled livegraph type: ${e}`)}}(e.variableType),version:(0,a.nK)(e.version),userFacingVersion:a.nK.INVALID,sortPosition:e.sortPosition,key:(0,a.ey)(e.key),scopes:(0,E.gK)(e.scopes),canvas_url:G(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function W(e,r,n){let i="";return i=n?d.wL(s.sH(e.nodeId)??s.Hr):d.Hc((0,a.yG)(e.key),(0,a.Vt)(e.version)),{...x({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:f.PW.VARIABLE_SET,node_id:i,version:(0,a.Vt)(e.version),userFacingVersion:a.Vt.INVALID,canvas_url:G(e.key,e.checkpoint.key),key:(0,a.yG)(e.key),checkpoint_id:e.checkpoint?.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let r=[];for(let n of e)r.push({id:n.id,name:n.name});return r}(e.modes),isExtendable:("loaded"===e.isExtendable.status&&e.isExtendable.data)??!1}}function K(e,r){return{...{description:e.description??void 0,description_rt:e.description_rt??void 0,id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:h.Ps.LIVEGRAPH_DATA_HUB_FILE,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.currentHubFileVersion?.name||"",publisher_name:r.file.communityPublishers?.[0]?.profile.name||"",isHubFile:!0}:"teamTemplate"===r.type?{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.template?.name||"",publisher_name:r.file.template?.publishedByUserNullable?.name||"",isHubFile:!1}:{file_key:r.file.key,file_key_source:h.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.name,isHubFile:!1,publisher_name:""}},...F(e)}}function j(e,r){return{...x({...e,description_rt:null,thumbnailUrl:null},r),...F(e)}}let z=e=>{switch(e){case"EDITOR_TEMPLATE":return o.QjO.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return o.QjO.SLIDES_TEMPLATE;case"SITES_TEMPLATE":return o.QjO.SITES_TEMPLATE;case"LITE_TEMPLATE":return o.QjO.LITE_TEMPLATE;default:(0,i.assertNotReached)(`Unhandled livegraph module source: ${e}`)}};function Y(e){return{id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,description:e.description}}function $(e,r,n){return(r||n)&&e?{autogen_password_controls:r?.autogenPasswordControls||!1,external_collaboration_controls:r?.externalCollaborationControls||!1,public_link_controls_setting:n?.publicLinkControlsSetting??r?.publicLinkControlsSetting,public_link_controls_max_expiration:n?.publicLinkControlsMaxExpiration??r?.publicLinkControlsMaxExpiration}:null}function q(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?O(e.setByUser):null}:null}function Z(e){let r={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{r.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null,verification_method:null,verified_at:null})}),r}function X(e,r){return r?{type:"hubFile",file:r}:e?{type:"team",file:e}:void 0}function J(e,r){if(!e)return{recent_files:[],recent_repos:[],org_drafts_owners:[]};let n=[],i=new Map,a=[],o=new Map;for(let s of e){let e=s.file;if(e&&!e.trashedAt&&!e.deletedAt&&((0,u.kc)().sites||"sites"!==e.editorType)){let l=e.trackTags?.isTemplate,c={accessed_at:s.actionAt.toISOString(),branch_checkpoint_id:e.branchCheckpointId,client_meta:e.clientMeta,created_at:e.createdAt.toISOString(),creator_id:e.creatorId,deleted_at:null,description:e.description,edit_url:e.editUrl,editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_access_enabled:e.folderAccessEnabled,folder_id:e.folderId,handoff_url:e.handoffUrl,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_favorited:e.isFavorited,is_new_user_playground_library:e.newUserPlaygroundLibrary||void 0,is_team_template:e.isTeamTemplate,is_template:l||void 0,is_try_file:e.isTryFile,key:e.key,last_published_at:e.lastPublishedAt||null,license:e.license,link_access:e.linkAccess,name:e._name||"Untitled",org_audience:e.orgAudience??void 0,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,prototype_url:e.prototypeUrl,scheme:e.scheme,source_checkpoint_id:e.sourceCheckpointId,source_file_key:e.sourceFileKey,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey||void 0,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,preview_thumbnail_urls:(0,p.oA)(e.previewThumbnailUrls),touched_at:e.touchedAt,track_tags:e.trackTagsRaw?JSON.parse(e.trackTagsRaw):null,trashed_at:null,trashed_user_id:e.trashedUserId,updated_at:e.updatedAt?.toISOString(),url:e.url,viewer_export_restricted:e.viewerExportRestricted,can_edit:e.canEdit};if(e.fileRepoId&&e.repo){let r=i.get(e.fileRepoId);r?r.files.push(c):(r={repo:{created_at:e.repo.createdAt.toISOString(),default_file_key:e.repo.defaultFileKey,deleted_at:e.repo.deletedAt?.toISOString()||null,folder_id:e.repo.folderId,has_active_branches:e.repo.hasActiveBranches,has_file_link_password:e.repo.hasFileLinkPassword,has_proto_link_password:e.repo.hasProtoLinkPassword,id:e.repo.id,is_favorited:e.repo.isFavorited,link_access:e.repo.linkAccess,name:e.repo.name,org_audience:e.repo.orgAudience,org_browsable:e.repo.orgBrowsable,parent_org_id:e.repo.parentOrgId,proto_link_access:e.repo.protoLinkAccess,team_id:e.repo.teamId,trashed_at:e.repo.trashedAt?.toISOString()||null,updated_at:e.repo.updatedAt.toISOString()},files:[c],timestamp:s.actionAt.toISOString()},i.set(e.fileRepoId,r),a.push(r))}else n.push(c);let d=e.orgDraftsFolderOwnerBaseOrgUser;if(d&&!d.disabledAt&&!o.has(d.id)){let e={account_type:d.accountType,account_type_changed_at:d.accountTypeChangedAt?.toISOString()||void 0,agreed_to_community_tos_at:d.agreedToCommunityTosAt?.toISOString()||null,created_at:d.createdAt.toISOString(),description:d.description,design_paid_status:d.designPaidStatus,dev_mode_paid_status:d.devModePaidStatus,drafts_folder_id:d.draftsFolderId??"",has_shown_figjam_admin_launch_onboarding:d.hasShownFigjamAdminLaunchOnboarding,has_shown_figjam_admin_onboarding:d.hasShownFigjamAdminOnboarding,id:d.id,is_email_validated:!!d.user.emailValidatedAt,license_admin:(d.licenseGroupAdmins?.length??0)>0,license_group_admins:[],license_group_member:void 0,org_id:d.orgId,permission:d.permission,show_figjam_user_onboarding:d.showFigjamUserOnboarding,type:y.Wd.ORG_USER,updated_at:d.updatedAt?.toISOString()||"",user:{email:d.user.email||void 0,handle:d.user.handle,id:d.user.id,img_url:d.user.imgUrl},user_id:d.userId,user_state_changed_at:d.userStateChangedAt?.toISOString()||void 0,whiteboard_paid_status:d.whiteboardPaidStatus,workspace_users:[],...r?{active_seat_type:(0,_.TA)(d?.activeSeatTypeUpgrade?.billableProduct)}:void 0},n=d.licenseGroupMember;for(let r of(n&&(e.license_group_member={actor_user_id:n.actorUserId,assigned_at:n.assignedAt?.toISOString()??"",created_at:n.createdAt.toISOString(),id:n.id,license_group_id:n.licenseGroupId,org_user_id:n.orgUserId,update_reason:n.updateReason??g.kc.SELF_SELECTED_DONT_KNOW,updated_at:n.updatedAt.toISOString()}),d.licenseGroupAdmins??[]))e.license_group_admins.push({created_at:r.createdAt.toISOString(),id:r.id,license_group_id:r.licenseGroupId,org_user_id:r.orgUserId,updated_at:r.updatedAt.toISOString()});for(let r of d.workspaceUsers??[])e.workspace_users.push({actor_user_id:r.actorUserId,assigned_at:r.assignedAt,created_at:r.createdAt,id:r.id,is_main_workspace:r.isMainWorkspace,org_user_id:r.orgUserId,permission:r.permission,update_reason:r.updateReason,updated_at:r.updatedAt,uuid:r.uuid,workspace_id:r.workspaceId});o.set(d.id,e)}}}return{recent_files:n,recent_repos:a,org_drafts_owners:Array.from(o.values())}}},4564:(e,r,n)=>{"use strict";n.d(r,{M:()=>c});var i=n(517333),a=n(441088),o=n(744472),s=n(442944);let l=null;function c(){return l||(i.eD&&(l=new o.k),(0,a.T)()&&(l=new s.y)),l}},820113:(e,r,n)=>{"use strict";n.d(r,{B9:()=>g,LN:()=>h,_Z:()=>f,vr:()=>m,wU:()=>_}),n(411855);var i=n(966712),a=n(776621),o=n(99506),s=n(479296),l=n(582410),c=n(720647);let d=["jpy","usd","gbp","cad","eur"],u=(0,s.D)(()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let r=navigator.language;if(r)return r}return"en-US"}),p={jpy:{annualFigma:1800,monthlyFigma:2250,orgFigma:6750,orgDevMode:3750,orgFigjam:750,enterprise:11250,enterpriseDevMode:5250,enterpriseFigjam:750,annualFigjam:450,monthlyFigjam:750},usd:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},eur:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},gbp:{annualFigma:1100,monthlyFigma:1400,orgFigma:4e3,orgDevMode:2200,orgFigjam:500,enterprise:7e3,enterpriseDevMode:3200,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},cad:{annualFigma:1600,monthlyFigma:2e3,orgFigma:6e3,orgDevMode:3500,orgFigjam:700,enterprise:1e4,enterpriseDevMode:5e3,enterpriseFigjam:700,annualFigjam:400,monthlyFigjam:700}};class m{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,a.us)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=u()}formatMoney(e,r){let n={currency:this.currency,style:"currency"};this.hasCents&&r?.showCents||(n.maximumFractionDigits=0,n.minimumFractionDigits=0),this.hasCents&&(e*=.01);let i=e.toLocaleString(this.locale,n);return(i.startsWith("CA$")||i.startsWith("US$"))&&(i=i.slice(2)),r?.showFullFormat?`${i} ${this.fullFormat[this.currency]}`:i}getPrices(){return p[this.currency]}getPricesForOrgPlan(e){let r,n,i;let a=this.getPrices();if(e===o.Ag.ORG)r=a.orgFigma,n=a.orgFigjam,i=a.orgDevMode;else if(e===o.Ag.ENTERPRISE)r=a.enterprise,n=a.enterpriseFigjam,i=a.enterpriseDevMode;else throw Error(`Unknown billing plan: ${e}.`);return{[c.G_.DESIGN]:r,[c.G_.FIGJAM]:n,[c.G_.DEV_MODE]:i}}getPricesWithOverride(e,r){let n={},i=this.getPricesForOrgPlan(r);return l.H5.forEach(r=>{let a=i[r];e?.license_type_configuration&&e.license_type_configuration[r]?.is_free_period&&(a=0),n[r]=a}),n}}function h(){let e=(0,i.Ay)().user_currency_from_ip;return f()?e:"usd"}function _(){return new m(h())}function g(){let e=new Set;return e.add("usd"),e.add(h()),Array.from(e)}function f(){let e=(0,i.Ay)().user_currency_from_ip;if(!e||!d.includes(e)||"usd"===e)return!1;let r=(0,i.Ay)().user_data;return!!r&&!!r.id}},401352:(e,r,n)=>{"use strict";n.d(r,{Lb:()=>a});var i=n(286640);function a(e){let r=(0,i.DN)();r.get("CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY")||r.set("CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",e)}},833629:(e,r,n)=>{"use strict";n.d(r,{D8:()=>o,Lh:()=>s,_q:()=>c,jO:()=>l}),n(776250),n(132135);var i=n(479296);n(335682),n(860178);var a=n(309798);(0,i.D)((e,r,n)=>null!=e&&null!=r&&function(e,r){return!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&r.includes(e.track_tags.figma_basics_experiment)}(r,n)&&e===r.creator_id);var o=(e=>(e.PROPERTIES_PANEL_TITLE="properties-panel-title",e.SCRUBBABLE_CONTROL="scrubbable-control",e.PAINT_PANEL_ROW="paint-panel-row",e.TEXT_PANEL="text-panel",e))(o||{});function s(e,r){return e+"-"+r.toLowerCase().replace(" ","-")}function l(){let e=(0,a.f)("editor_onboarded"),r=(0,a.f)("figma_basics_tooltips_onboarding");return c({editor_onboarded:e,figma_basics_tooltips_onboarding:r,no_figma_basics_tooltips_onboarding:(0,a.f)("no_figma_basics_tooltips_onboarding"),cursor_bot_v2__basics_onboarded:(0,a.f)("cursor_bot_v2__basics_onboarded"),cursor_bot_v2__no_basics_onboarded:(0,a.f)("cursor_bot_v2__no_basics_onboarded")})}function c(e){return!!(e.editor_onboarded||e.figma_basics_tooltips_onboarding||e.no_figma_basics_tooltips_onboarding||e.cursor_bot_v2__basics_onboarded||e.cursor_bot_v2__no_basics_onboarded)}},296796:(e,r,n)=>{"use strict";n.d(r,{OA:()=>p,rT:()=>u}),n(634832),n(181912);var i=n(179940);n(939863);var a=n(438120),o=n(383986),s=n(916525),l=n(720647);let c=(e,r,n)=>{switch(e){case"product":return s.SL[r];case"role":return s.qY[r];case"accountType":return s.U9[r];case"lastEdit":return s.rk[r];case"billingGroup":let i=decodeURIComponent(r),a=Object.keys(n).find(e=>n[e]?.name===i);if("unassigned"===r||"Unassigned"===r)return o.s;if(a)return a;return null;case"newEditor":return"true"===r;default:return null}},d=(e,r,n)=>{switch(e){case"productFilter":return s.Eg[r];case"roleFilter":return s.jN[r];case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":case"idpGroupFilter":return r;case"licenseGroupFilter":return encodeURIComponent((0,a.CC)(r,n));default:return null}};function u(e,r){if(!e)return null;let n=(0,i.qg)(e);return function(e){let r=e?.[s.e5.productFilter],n=e?.[s.e5.roleFilter],i=r===l.Te.DEV_MODE?s.B9:s.ZL;return!n||i.includes(n)?e:{...e,roleFilter:null}}(Object.keys(n).reduce((e,i)=>{if(!(i in s.Oo))return e;{let a=s.GX[i],o=n[i],l=c(i,o,r);return{...e,...l&&{[a]:l}}}},s.J0))}function p(e,r){return Object.keys(e).reduce((n,i)=>{let a=s.cC[i],o=e[i];return{...n,...o&&{[a]:d(i,o,r)}}},{})}},227544:(e,r,n)=>{"use strict";n.d(r,{CA:()=>l}),n(634832),n(900956),n(181912),n(133537),n(939863),n(99506);var i=n(720647);n(820113);var a=n(243987);i.G_.DESIGN,a.d4,i.G_.FIGJAM,a.q8,i.G_.DEV_MODE,a.t9;var o=(e=>(e.OVERDUE="overdue",e.UNPAID="unpaid",e.REVIEW="review",e.LOCKED="locked",e.DEFAULT="default",e))(o||{}),s=(e=>(e.BILLING_STATUS="billing_status",e.TAX_ID_STATUS="tax_id_status",e.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",e))(s||{});function l(e){return null!==e&&null===e.value}},438120:(e,r,n)=>{"use strict";n.d(r,{CC:()=>o}),n(634832);var i=n(939863);n(709217),n(99506),n(643067);var a=n(383986);function o(e,r){return e===a.s?(0,i.t)("license_group.unassigned"):r[e]?.name??""}n(916525)},937294:(e,r,n)=>{"use strict";n.d(r,{YP:()=>c,gO:()=>l,n1:()=>u,p9:()=>d});var i=n(99506),a=n(428467),o=n(668860),s=n(410436),l=(e=>(e[e.CLICK_LEAVE=0]="CLICK_LEAVE",e[e.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",e[e.CLICK_JOIN=2]="CLICK_JOIN",e[e.CLICK_REQUEST=3]="CLICK_REQUEST",e[e.BYPASS_REQUEST=4]="BYPASS_REQUEST",e[e.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",e))(l||{});function c(e,r,n,l){let c=(0,a.hasViewerRoleAccessOnTeam)(e.id,n),d=function(e,r){if(!e.org_id)return!1;let n=r.orgTeams?.teams.find(r=>r.id===e.id);if(n)return!!n.orphaned;let i=r.roles.byTeamId[e.id];return!i||Object.values(i).every(e=>e.level<o.e6.ADMIN&&!e.pending)}(e,n);if(c)return 0;if(r&&r.status===s.c.PENDING)return 1;if(e.org_access===i.bU.PRIVATE&&d&&(0,a.canAdminOrg)(l,n)||e.org_access===i.bU.SECRET&&d&&(0,a.canAdminOrg)(l,n))return 4;if((0,a.canManageNonSecretOrgTeam)(e,n,n.user?.id))return 5;if(e.org_access===i.bU.PUBLIC)return 2;if(e.org_access===i.bU.PRIVATE)return 3;return null}let d=e=>`JOINING_ORG_TEAM_${e}`,u=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`},724838:(e,r,n)=>{"use strict";n.d(r,{Hw:()=>s});var i=n(133537);n(966712),n(931828),n(243987),n(428467),n(596607);var a=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE_TEAM=1]="SINGLE_TEAM",e[e.MULTIPLE_TEAMS=2]="MULTIPLE_TEAMS",e))(a||{}),o=(e=>(e[e.NEVER=0]="NEVER",e[e.ONCE=1]="ONCE",e[e.TWICE=2]="TWICE",e[e.PERMANENTLY=3]="PERMANENTLY",e))(o||{});function s(e){return!!e&&!(0,i.qe)(e.email)}},596607:(e,r,n)=>{"use strict";n.d(r,{LM:()=>c,WT:()=>p,Xy:()=>u,x9:()=>d,xw:()=>l,zR:()=>m});var i=n(459401);n(634832),n(38329),n(498480),n(939863),n(720647);var a=n(99506);n(498606);var o=n(117192),s=n(529928);function l(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId[e.currentUserOrgId]?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null}(0,s.bt)(l);let c=(0,s.bt)(function(e){let r=l(e);return r?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id}),d=o.x;function u(e){let r=Object.values(e).filter(e=>e.permission===a._D.ADMIN);return(0,i.sortAlphabeticallyByProperty)(r,"created_at"),r}function p(e,r){let n=e.admin_users_metadata.map(e=>r[e.id]).filter(e=>!!e);return(0,i.sortAlphabeticallyByProperty)(n,"created_at"),n}function m(e){return u(e).slice(0,3)}},643067:(e,r,n)=>{"use strict";n.d(r,{G7:()=>m,H_:()=>a,Oe:()=>_,Ts:()=>o,eE:()=>s,kA:()=>h,mg:()=>u,nX:()=>p,wA:()=>c,yK:()=>l}),n(411855),n(188507),n(634832),n(181912);var i=n(133537);function a(e,r){let n=e.map(e=>e.domain.toLowerCase()),a=(0,i.zN)(r);return 0!==n.length&&!!a&&n.indexOf(a)>-1}function o(e){return e?.id!==void 0}function s(e,r){let n=o(r)?r.email:r;return!!n&&(0,i.xf)(n)&&e.domains.length>0&&!a(e.domains,n)}function l(e){return!!e.currentUserOrgId&&!!e.orgById[e.currentUserOrgId]?.template_picker_disabled}function c(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}n(966712),n(96328),n(881388),n(939863),n(99506),n(428467),n(23001),n(802026),n(679892),n(720647),n(698812),n(147206);let d=new RegExp(/[https?:?\/\/]?[a-z.]*figma[.\da-z:]*\/files\/(\d+)/);function u(e){return d.test(e)}function p(e){let r=e.match(d);return r?r[1]:null}function m(e){return h(e)}function h(e){return!!e?.bigma_enabled}function _(e){return h(e)}},243987:(e,r,n)=>{"use strict";n.d(r,{BR:()=>K,Ht:()=>f,Jm:()=>_,Ky:()=>W,LF:()=>y,PS:()=>P,PX:()=>T,Rq:()=>H,Rx:()=>U,S$:()=>k,SD:()=>B,UE:()=>V,WQ:()=>C,WW:()=>b,Wf:()=>E,XX:()=>R,ZZ:()=>D,cW:()=>v,d4:()=>S,dX:()=>x,fD:()=>G,h:()=>I,n0:()=>O,oc:()=>M,q8:()=>w,t9:()=>A,w5:()=>L,zZ:()=>g});var i=n(181912),a=n(133537);n(966712);var o=n(650322),s=n(881388),l=n(939863),c=n(875847),d=n(99506),u=n(428467),p=n(802026),m=n(622139),h=n(36816),_=(e=>(e.FREE="free",e.PRO="pro",e.ORG="org",e.ENT="ent",e.EDU="edu",e))(_||{});let g="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",f=2,E=1,y={[d._Y.DESIGN]:3,[d._Y.WHITEBOARD]:1,[d._Y.SLIDES]:3,[d._Y.SITES]:3,[d._Y.COOPER]:3},b=3,I=0,T=0,v=5,S=4500,w=500,A=2500;function N(e){return e>new Date}function C(e){let r=e&&!e.org_id&&e.grace_period_end&&i.A.utc(e.grace_period_end);return!!r&&r.valueOf()>Date.now()}function O(e){return!!e&&null!=e.subscription&&e.subscription!==d.Qh.INCOMPLETE}function L(e){return!!e&&(O(e)||e.student_team||!!e.grace_period_end&&N(new Date(e.grace_period_end)))}function R(e){if(!e)return!1;let{subscription:r,studentTeamAt:n,gracePeriodEnd:i}=e;return!!r&&r!==d.Qh.INCOMPLETE||!!n||i&&N(i)}function P(e){return Object.values(e.teams).filter(r=>(0,u.canEditTeam)(r.id,e)&&(!L(r)||r.student_team))}function D(e,r,n){var i,a,o;return i=e.team_id?r.teams[e.team_id]:null,a=r.user,o=r.userEduGracePeriods,(!!e.team_id||"org_edit"!==e.sharing_audience_control)&&!!(!e.team_id&&!(0,c.Gi)(e)||e.team_id&&(!n&&F(i,a,o)||!L(i)&&(e.is_invite_only||e.is_view_only)))}function k(e,r,n){return!(e.teamId||(0,c.VA)(e))||!!e.teamId&&(!!x(r,n)||(e.inviteOnlyAt||e.viewOnlyAt)&&!R(r))}function M(e,r){return F(r.teams[e],r.user,r.userEduGracePeriods)}function F(e,r,n){return!!e&&!!r&&(e.student_team?!((0,o.cn)(r)||(0,o.SH)(n,e.id).isInValidGracePeriod):e.restrictions_list?.includes(d.P4.LOCKED))}function x(e,r){return!!e&&!!r&&(e.studentTeamAt?!((0,o.cn)(r)||e.eduGracePeriod?.isValid):e.restrictionsList?.includes(d.P4.LOCKED))}function U(e){return Object.values(e.teams).some(r=>M(r.id,e)&&(0,u.canEditTeam)(r.id,e))}function B(e,r){let n=r.orgById[e];return n&&n.standing===p.ZG.SUSPENDED}function V(e,r){if(e.data&&e.data.message){let n=(0,l.Jv)(e);n&&r(s.s.error(n))}else{let n=(0,l.Jv)(e,(0,l.YD)("error.unknown_contact_support"));r(s.s.error(n))}}function G(e,r){return e===m.tY.MONTHLY?0:r}function H(e,r){return e===m.tY.MONTHLY?r:0}function W(e,r,n){let i="whiteboard"===n?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,a.nD)(e.email)&&(e[i]===h.Zf.FULL&&!r.downgrade[n].includes(e.id)||r.upgrade[n].includes(e.id))).length}function K(e,r){let n=!1,i=null!==e?Object.values(e).reduce((e,i)=>{if(!i.user)return e;let a={id:i.user.id,design_paid_status:i.design_paid_status,whiteboard_paid_status:i.whiteboard_paid_status,email:i.user.email||"",handle:i.user.handle||"",img_url:i.user.img_url||""};return i.user?.id===r?.id?(n=!0,e.unshift(a)):e.push(a),e},[]):[];return!n&&r&&i.unshift({id:r.id,design_paid_status:h.Zf.STARTER,whiteboard_paid_status:h.Zf.STARTER,email:r.email,handle:r.handle,img_url:r.img_url}),i}},147206:(e,r,n)=>{"use strict";n.d(r,{Ay:()=>T,C1:()=>O,D8:()=>P,DN:()=>R,F1:()=>E,GP:()=>b,Hv:()=>k,Jd:()=>S,Jf:()=>L,M4:()=>C,Pe:()=>I,Pq:()=>y,R$:()=>v,Vi:()=>N,XG:()=>A,qR:()=>w});var i=n(634832),a=n(966712),o=n(939863),s=n(824189),l=n(256975),c=n(369870),d=n(99506),u=n(279453),p=n(216158);n(606137);var m=n(668860),h=n(36816);n(851363);var _=n(507956),g=n(872429),f=n(857766);function E(){return(0,c.MP)()&&!(0,a.kc)().integ_zoom_allow_extensions?{canRun:!1,message:(0,o.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function y({copyExportRestrictedArgs:e}){return!(e&&I(e))}function b(e){return(0,_.$A)(e.selectedView)?(0,l.tn)(e)&&y({copyExportRestrictedArgs:e.openFile}):(!(0,c.MP)()||!!(0,a.kc)().integ_zoom_allow_extensions)&&!e.mirror.appModel.isReadOnly}function I(e){return!e.canEdit&&e.viewerExportRestricted}let T=n(368178).A;function v(e,r){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==r)}function S(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===d.El.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===d.El.RESTRICTED}function w(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===h.Zf.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===h.Zf.RESTRICTED}function A(e,r){return null===r||("whiteboard"===r?e&&e.whiteboardPaidStatus===h.Zf.RESTRICTED:"slides"!==r&&e&&e.designPaidStatus===h.Zf.RESTRICTED)}function N(e,r){return!A(e?.currentTeamUser,r)&&(e?.subscription!==null||e?.studentTeamAt!==null||e?.gracePeriodEnd&&e.gracePeriodEnd>new Date)}function C(e){return e&&!!e.orgId}function O(e,r){switch(e){case m.e6.OWNER:return r?(0,o.t)("permissions.level_name.branch_owner"):(0,o.t)("permissions.level_name.owner");case m.e6.ADMIN:return(0,o.t)("permissions.level_name.admin");case m.e6.EDITOR:return(0,o.t)("permissions.level_name.can_edit");case m.e6.VIEWER:return(0,o.t)("permissions.level_name.can_view");case m.e6.VIEW_PROTOTYPES:return(0,o.t)("permissions.level_name.can_view_prototypes");default:return(0,o.t)("permissions.level_name.none")}}function L(e,r){switch(r){case d._Y.DESIGN:return e.canCreateDesignFile;case d._Y.WHITEBOARD:return e.canCreateFigjamFile;case d._Y.SLIDES:return e.canCreateSlidesFile;case d._Y.SITES:return e.canCreateDesignFile&&!!(0,g.oz)();case d._Y.COOPER:return e.canCreateDesignFile&&(0,s.q)();default:(0,i.assertNever)(r)}}function R({role:e,file:r,folder:n=null,isInDraftsFolder:i=!1}){if(e.level!==m.e6.VIEWER&&e.level!==m.e6.VIEW_PROTOTYPES)return null;let a=(0,f.Pn)(r);switch(e.level){case m.e6.VIEWER:{if(r.link_access===d.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:a});if(r.link_access===d.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==d._D.GUEST)return(0,o.t)("permissions.can_still_edit_org_member_with_link",{noun:a});if(e.pending)break;let s=!!n&&!n.is_invite_only&&!n.is_view_only;return D(!!e.teamLevel&&!i&&e.teamLevel>m.e6.VIEWER&&(!n||s),!!e.folderLevel&&e.folderLevel>m.e6.VIEWER,!!e.repoLevel&&e.repoLevel>m.e6.VIEWER)}case m.e6.VIEW_PROTOTYPES:{if(r.link_access===d.PQ.EDIT)return(0,o.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:a});if(r.link_access===d.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==d._D.GUEST)return(0,o.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:a});if(e.pending)break;let i=n&&!n.is_invite_only&&!n.is_view_only;if(e.teamLevel&&e.teamLevel>m.e6.VIEWER&&(!n||i))return(0,o.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:a});if(e.folderLevel&&e.folderLevel>m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:a});if(e.repoLevel&&e.repoLevel>m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:a});if(r.link_access===d.PQ.VIEW)return(0,o.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:a});if(r.link_access===d.PQ.ORG_VIEW&&e.org_user&&e.org_user.permission!==d._D.GUEST)return(0,o.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:a});if(e.teamLevel&&e.teamLevel>=m.e6.VIEWER&&(!n||i))return(0,o.t)("permissions.can_still_see_permission_team_file_is_on",{noun:a});if(e.folderLevel&&e.folderLevel>=m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_permission_project_file_is_on",{noun:a});if(e.repoLevel&&e.repoLevel>=m.e6.VIEWER)return(0,o.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:a})}}return null}function P({file:e,seenState:r,folder:n=null}){let i=(0,f.Pn)(e);if(e.link_access===d.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:i});let a=!!n&&!n.is_invite_only&&!n.is_view_only;return D(!!r.teamLevel&&r.teamLevel>m.e6.VIEWER&&(!n||a),!!r.folderLevel&&r.folderLevel>m.e6.VIEWER,!!r.repoLevel&&r.repoLevel>m.e6.VIEWER)}function D(e,r,n){return e?(0,o.t)("permissions.can_still_edit_team_permissions"):r?(0,o.t)("permissions.can_still_edit_folder_permissions"):n?(0,o.t)("permissions.can_still_edit_edit_permissions"):null}async function k(e,r){let n=await p.M4.fetch((0,u.OFA)({id:e}));return!!n.project&&L(n.project,r)}},428467:(e,r,n)=>{"use strict";n.d(r,{canAdminOrg:()=>$,canAdminTeam:()=>U,canEditFolder:()=>k,canEditFolderRole:()=>K,canEditTeam:()=>x,canEditTeamRole:()=>W,canGuestOrg:()=>z,canManageNonSecretOrgTeam:()=>X,canMemberOrg:()=>Y,canOwnFolder:()=>M,canOwnTeam:()=>B,canUploadAndEditVideo:()=>en,canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED:()=>ei,canViewFolder_DEPRECATED:()=>D,canViewTeam:()=>F,getExplicitRoleForUserAndFile:()=>C,getPermissionsState:()=>b,getPermissionsStateMemoized:()=>I,getReadOnlyOverrideMessageForFolder:()=>er,getResourceTeamId:()=>T,getRolesForResource:()=>O,hasAdminRoleAccessOnTeam:()=>H,hasEditorRoleAccessOnTeam:()=>G,hasViewerRoleAccessOnTeam:()=>V,isFigJamDisabledForFolder:()=>et,isFigJamDisabledForOrg:()=>ee,isFileFigjamDisabled:()=>Q,isOrgUserExternallyRestrictedFromState:()=>J,isResourceOwner:()=>v,userIsAMemberOfAnOrg:()=>Z});var i=n(786928),a=n(38329),o=n(966712),s=n(886653),l=n(650322),c=n(939863),d=n(875847),u=n(99506),p=n(596607),m=n(243987),h=n(140047),_=n(66037),g=n(668860);n(36816);var f=n(147206);function E(e,r,n,i,a,o,s,l,c,d,u,p,m,h,_,g){return{currentUserOrgId:e,user:r,fileByKey:n,repos:i,folders:a,teams:o,roles:s,orgById:l,orgDraftsOwners:c,orgUsersByOrgId:d,teamUserByTeamId:u,userEduGracePeriods:p,licenseGroups:m,orgTeams:h,openFile:_,currentTeamId:g}}let y=(0,s.xx)(E);function b(e){return E(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgDraftsOwners,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function I(e){return y(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgDraftsOwners,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function T(e,r){switch(e.resource_type){case u.vt.FILE:let n=r.fileByKey[e.resource_id_or_key];return n&&n.team_id;case u.vt.FILE_REPO:let i=r.repos[e.resource_id_or_key],a=r.folders[i?.folder_id];return a?.team_id??null;case u.vt.FOLDER:let o=r.folders[e.resource_id_or_key];return o?.team_id??null;case u.vt.TEAM:return e.resource_id_or_key}}function v(e,r,n,i){let a=function(e,r){switch(r){case u.vt.FILE:return e.byFileKey;case u.vt.FILE_REPO:return e.byRepoId;case u.vt.FOLDER:return e.byFolderId;case u.vt.TEAM:return e.byTeamId}}(i,n)[r];return!!a&&e in a&&a[e].level===g.e6.OWNER}function S(e,r){for(let n of e)if(n.level>=r)return!0;return!1}function w(e,r){let n=r.user?.id,i=r.roles;return e in i.byTeamId&&n&&n in i.byTeamId[e]?[i.byTeamId[e][n]]:[]}function A(e,r){let n=r.user&&r.user.id,i=[],a=r.roles;e in a.byFolderId&&n&&n in a.byFolderId[e]&&i.push(a.byFolderId[e][n]);let o=r.folders[e];return o&&o.team_id&&!o.is_invite_only&&(i=i.concat(w(o.team_id,r))),i}function N(e,r){let n=r.user&&r.user.id,i=r.roles,a=[];e in i.byRepoId&&n&&n in i.byRepoId[e]&&a.push(i.byRepoId[e][n]);let o=r.repos[e];return o&&(a=[...a,...A(o.folder_id,r)]),a}function C(e,r){let n=r.user&&r.user.id,i=r.roles;return e in i.byFileKey&&n&&n in i.byFileKey[e]?i.byFileKey[e][n]:null}function O(e,r,n){switch(e){case u.vt.FILE:return function(e,r){let n=[],i=C(e,r);null!==i&&n.push(i);let a=r.fileByKey[e];return a&&a.folder_id&&(n=n.concat(A(a.folder_id,r))),a&&a.file_repo_id&&(n=[...n,...N(a.file_repo_id,r)]),n}(r,n);case u.vt.FILE_REPO:return N(r,n);case u.vt.FOLDER:return A(r,n);case u.vt.TEAM:return w(r,n)}}function L(e,r,n){let i=(0,h._)(e,n);if(!i)return!1;let a=n.user?.id,s=i.org_id,l=(0,o.kc)().sc_open_team_deprecation,c=i.sharing_audience_control;if(s){let o=!l&&r<=g.e6.EDITOR&&Y(s,n)&&i.org_access===u.bU.PUBLIC&&i.default_permission===u.sC.EDIT,d=S(w(e,n),r),p=r<=g.e6.ADMIN&&(d||X(i,n,a)),m=!l&&r<=g.e6.VIEWER&&Y(s,n)&&i.org_access===u.bU.PUBLIC,h=Y(s,n)&&(r<=g.e6.VIEWER&&c===u.PQ.ORG_VIEW||r<=g.e6.EDITOR&&c===u.PQ.ORG_EDIT);return(p||m||d||o||h)&&z(s,n)}return R(e,r,n)}function R(e,r,n){return S(w(e,n),r)&&!function(e,r,n){if(n.user&&!(0,l.cn)(n.user))return!1;let i=(0,h._)(e,n);if(!i)return!1;let a=!!n.user&&(0,l.GU)(n.userEduGracePeriods,(0,l.cn)(n.user),i.id,i.student_team).showAccessRestricted;return r>g.e6.VIEWER&&a}(e,r,n)}function P(e,r,n){let i;let a=n.user&&n.user.id,s=n.folders[e];if(!a||!s)return!1;let l=(0,d.oq)(s.id,n);if(l&&!z(l,n))return!1;let c=s.team_id&&n.teams[s.team_id],p=(0,o.kc)().sc_open_team_deprecation,m=s.sharing_audience_control;if(!p&&l&&Y(l,n)&&r<=g.e6.VIEWER&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only||!p&&l&&Y(l,n)&&r<=g.e6.EDITOR&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only&&!s.is_view_only&&c.default_permission===u.sC.EDIT||l&&Y(l,n)&&(r<=g.e6.EDITOR&&m===u.PQ.ORG_EDIT||r<=g.e6.VIEWER&&m===u.PQ.ORG_VIEW))return!0;let h=A(e,n);return(h.forEach(e=>{e.resource_type===u.vt.FOLDER&&(i=e)}),!s.team_id||s.is_invite_only||s.is_view_only&&r>=g.e6.EDITOR)?!!i&&i.level>=r:S(h,r)}function D(e,r){return P(e,g.e6.VIEWER,r)}function k(e,r){return P(e,g.e6.EDITOR,r)}function M(e,r){return P(e,g.e6.OWNER,r)}function F(e,r){return L(e,g.e6.VIEWER,r)}function x(e,r){return L(e,g.e6.EDITOR,r)}function U(e,r){return L(e,g.e6.ADMIN,r)}function B(e,r){return L(e,g.e6.OWNER,r)}function V(e,r){return R(e,g.e6.VIEWER,r)}function G(e,r){return R(e,g.e6.EDITOR,r)}function H(e,r){return R(e,g.e6.ADMIN,r)}function W(e,r){return e.level!==g.e6.OWNER&&(e.level===g.e6.ADMIN?U(e.resource_id_or_key,r):x(e.resource_id_or_key,r))}function K(e,r){return e.level!==g.e6.OWNER&&e.level!==g.e6.ADMIN&&k(e.resource_id_or_key,r)}function j(e,r,n){return n?e.orgUsersByOrgId[r]?.[n]??(0,i.J)(e,"org_user",r):null}function z(e,r){let n=r.user;if(!e||!n)return!1;let a=r.orgById[e]??(0,i.J)(r,"org",e);return q(j(r,e,n.id),a,_.jh.GUEST)}function Y(e,r,n){if(!e)return!1;n=n||r.user?.id;let a=r.orgById[e]??(0,i.J)(r,"org",e);return q(j(r,e,n),a,_.jh.MEMBER)}function $(e,r,n){if(!e)return!1;let a=r.orgById[e]??(0,i.J)(r,"org",e);return n=n||r.user?.id,q(j(r,e,n),a,_.jh.ADMIN)}function q(e,r,n){return!!r&&!!e&&(0,f.Ay)(e.permission)>=n}function Z(e,r){return(0,p.x9)(e.orgUsersByOrgId,r).some(n=>Y(n.org_id,e,r))}function X(e,r,n){return e.org_access!==u.bU.SECRET&&function(e,r,n){if(!(n=n||r.user?.id)||!e||!r.currentUserOrgId)return!1;let a=r.currentUserOrgId&&r.user&&r.orgUsersByOrgId[r.currentUserOrgId]?r.orgUsersByOrgId[r.currentUserOrgId][n]:null;null===a&&(a=(0,i.J)(r,"org_user",r.currentUserOrgId));let o=(0,h._)(e,r);if(!o||!a||r.currentUserOrgId!==o.org_id)return!1;if(H(e,r))return!0;let s=$(r.currentUserOrgId,r,n);return o.org_access!==u.bU.SECRET&&(s||!!(o.workspace_id&&function(e,r,n){n=n||r.user?.id;let i=r.currentUserOrgId;return!!(e&&n&&i&&r.orgUsersByOrgId?.[i]?.[n].workspace_users?.find(r=>r.permission===u.bp.ADMIN&&r.workspace_id===e))}(o.workspace_id,r,n)))}(e.id,r,n)}function J(e){return(0,f.R$)(e.user,e.currentUserOrgId)}function Q(e,r){return"whiteboard"===e.editorType&&!!e.parentOrgId&&!!r.orgById[e.parentOrgId]?.figjam_disabled_at}function ee(e,r){return!!e&&!!r.orgById[e]?.figjam_disabled_at}function et(e,r){return ee((0,d.oq)(e.id,r)||null,r)}function er(e,r){if(e.level!==g.e6.VIEWER&&e.level!==g.e6.VIEW_PROTOTYPES)return null;let n=r.folders[e.resource_id_or_key];if(!n)return null;let i=e.user_id&&n.team_id&&r.roles.byTeamId[n.team_id]&&r.roles.byTeamId[n.team_id][e.user_id],a=!n.is_invite_only&&!n.is_view_only;return i&&i.level>g.e6.VIEWER&&a?(0,c.t)("permissions.can_still_edit_team_project_is_in"):null}function en(e,r){return!!e&&!!e.canEdit&&(e.team?(0,m.w5)(e.teamId?r.teams[e.teamId]:void 0):!!e.parentOrgId)}function ei(){if(void 0===a.D)return!1;let e=a.D.getState(),r=b(e);return en(e.openFile,r)}},556261:(e,r,n)=>{"use strict";n.d(r,{rO:()=>b,wy:()=>E,yN:()=>y});var i=n(411855),a=n(188507),o=n(634832),s=n(730371),l=n(752795),c=n(776250),d=n(374626),u=n(742808),p=n(218881),m=n(694687),h=n(596607),_=n(984968),g=n(88407);function f(e,r,n){if(!n){window.__jestConfig__?.rolloutFlags&&(n="cutover");let i=(0,p.gP)(e);(n=i?.get(r||"group_default",void 0))||(n="passthrough")}return n}function E(e){let r=f("tou_current_plan_user_migrator_config",e.migrationGroup,e.phase),n=i.useRef(!1),p="shadowread"===r||"cutover"===r,m=(0,a.d4)(e=>{let r=e.user?.id;return r?e.teamUserByTeamId?.[_.ZT(e)]?.[r]??null:null}),E=(0,a.d4)(e=>(0,h.xw)(e)),y=(0,d.md)((0,g.gq)(p));(0,u.I)(p&&(0,l.isNotNullish)(y),r=>{c.az.trackDefinedEvent("plans.current_plan_user_lg_load_timing",{model:"planUser",type:y?.key.type??"",duration:r,component:e.component,attribute:e.attribute})});let b=e.legacy(m??null,E??null);if("passthrough"===r)return b;let I=e.migrated(y);switch(("shadowread"===r||"cutover"===r)&&!n.current&&((0,l.isNotNullish)(m)||(0,l.isNotNullish)(E))&&(0,l.isNotNullish)(y)&&!(0,s.deepEquals)(b,I)&&(c.az.trackDefinedEvent("plans.current_plan_user_view_shadow_error",{type:y?.key.type??"",component:e.component,attribute:e.attribute,phase:r,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(b),migratedValue:JSON.stringify(I)}),n.current=!0),r){case"shadowread":return b;case"cutover":return I;default:(0,o.assertNever)(r)}}function y(e){let r=f("tou_current_user_plan_migrator_config",e.migrationGroup,e.phase),n=i.useRef(!1),a="shadowread"===r||"cutover"===r,p=(0,_.ol)(),h=(0,m.sZ)(),E=(0,d.md)((0,g.rQ)(a)),y=(0,d.md)((0,g.Oh)(a));(0,u.I)(a&&(0,l.isNotNullish)(E),r=>{c.az.trackDefinedEvent("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:E?.key.type??"",duration:r,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup})}),(0,u.I)(a&&(0,l.isNotNullish)(y),r=>{c.az.trackDefinedEvent("plans.current_plan_lg_load_timing",{model:"plan",type:y?.key.type??"",duration:r,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup})});let b=e.legacy(p??null,h??null);if("passthrough"===r)return b;let I=e.migrated(E,y);switch(("shadowread"===r||"cutover"===r)&&!n.current&&((0,l.isNotNullish)(p)||(0,l.isNotNullish)(h))&&(0,l.isNotNullish)(E)&&!(0,s.deepEquals)(b,I)&&(c.az.trackDefinedEvent("plans.current_plan_view_shadow_error",{type:E?.key.type??"",component:e.component,attribute:e.attribute,phase:r,legacyValue:JSON.stringify(b),migratedValue:JSON.stringify(I),migrationGroup:e.migrationGroup}),n.current=!0),r){case"shadowread":return b;case"cutover":return I;default:(0,o.assertNever)(r)}}function b(){let e=function(){let e=(0,d.md)((0,g.rQ)(!0));return(0,u.I)((0,l.isNotNullish)(e),r=>{c.az.trackDefinedEvent("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:e?.key.type??"",duration:r,component:"",attribute:""})}),e}();return e?e.key.type:null}},344339:(e,r,n)=>{"use strict";n.d(r,{LC:()=>s,i5:()=>o,s$:()=>a});var i=n(330654);n(99506);var a=(e=>(e.DISABLE_FIGJAM="disable_figjam",e.DISABLE_WORKSHOP="disable_workshop",e.VOICE="voice",e.DISABLE_AI_FEATURES="disable_ai_features",e))(a||{}),o=(e=>(e.ELIGIBLE="eligible",e.UPSELL="upsell",e.INELIGIBLE="ineligible",e))(o||{}),s=(e=>(e.ENABLED="enabled",e.DISABLED="disabled",e))(s||{});let l=i.object({supports:i.nativeEnum(o),enabled:i.nativeEnum(s)});i.object({disable_figjam:l,voice:l,disable_workshop:l,disable_ai_features:l})},846724:(e,r,n)=>{"use strict";n.d(r,{HT:()=>p,T4:()=>l});var i=n(634832),a=n(720647),o=n(99506),s=n(344339);function l(e,r){if(e){if(r===a.G_.DESIGN)return e.designPaidStatus;if(r===a.G_.FIGJAM)return e.whiteboardPaidStatus;(0,i.assertNever)(r,"Unknown license type")}}let c={[s.s$.VOICE]:{environments:{gov:s.i5.INELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.ELIGIBLE,[o.Ag.STUDENT]:s.i5.ELIGIBLE,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_WORKSHOP]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.UPSELL,[o.Ag.STUDENT]:s.i5.UPSELL,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_FIGJAM]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.UPSELL,[o.Ag.STUDENT]:s.i5.UPSELL,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_AI_FEATURES]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.ELIGIBLE,[o.Ag.STUDENT]:s.i5.ELIGIBLE,[o.Ag.STARTER]:s.i5.ELIGIBLE}}};function d(e,r,n=window.INITIAL_OPTIONS.cluster_name){return"gov"===n&&c[r].environments.gov?c[r].environments.gov:e&&c[r]?.tiers[e.tier]?c[r].tiers[e.tier]:s.i5.INELIGIBLE}function u(e,r,n=window.INITIAL_OPTIONS.cluster_name){if(d(e,r,n)===s.i5.INELIGIBLE||!e)return s.LC.DISABLED;let a=d(e,r,n);switch(r){case s.s$.VOICE:if(a===s.i5.ELIGIBLE)return e.voiceEnabled?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;case s.s$.DISABLE_FIGJAM:if(a===s.i5.ELIGIBLE)return e.figjamDisabledAt?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;case s.s$.DISABLE_WORKSHOP:if(a===s.i5.ELIGIBLE)return e.workshopEnabled?s.LC.DISABLED:s.LC.ENABLED;return s.LC.DISABLED;case s.s$.DISABLE_AI_FEATURES:if(a===s.i5.ELIGIBLE)return e.aiFeaturesEnabled?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;default:(0,i.assertNever)(r,"Unknown plan feature")}}function p(e){return{...e,voice:{supports:d(e,s.s$.VOICE),enabled:u(e,s.s$.VOICE)},disable_figjam:{supports:d(e,s.s$.DISABLE_FIGJAM),enabled:u(e,s.s$.DISABLE_FIGJAM)},disable_workshop:{supports:d(e,s.s$.DISABLE_WORKSHOP),enabled:u(e,s.s$.DISABLE_WORKSHOP)},disable_ai_features:{supports:d(e,s.s$.DISABLE_AI_FEATURES),enabled:u(e,s.s$.DISABLE_AI_FEATURES)}}}},960628:(e,r,n)=>{"use strict";let i;n.d(r,{$y:()=>$,BT:()=>j,B_:()=>eh,G1:()=>ee,H4:()=>e_,IM:()=>X,It:()=>ev,KB:()=>P,LL:()=>A,ME:()=>ec,Mw:()=>G,OD:()=>ei,Q4:()=>F,Ql:()=>U,Qx:()=>J,Rp:()=>M,Sf:()=>L,Sx:()=>q,Ty:()=>D,VM:()=>x,W5:()=>k,Xx:()=>C,b_:()=>H,cI:()=>O,d1:()=>i,dG:()=>eT,f$:()=>en,fS:()=>eI,fd:()=>K,hY:()=>em,i1:()=>Y,iP:()=>W,jG:()=>eb,jS:()=>B,n4:()=>el,o5:()=>er,oZ:()=>Q,po:()=>R,q$:()=>z,qC:()=>ew,sd:()=>Z,wk:()=>N,xi:()=>w});var a=n(675678),o=n(587670),s=n(937036),l=n(707458),c=n(297666),d=n(776621),u=n(910620);let p=[],m=[],h=[],_=[],g=[],f=[],E=[],y=[],b=[],I=[],T=[],v=null,S=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let r of this.eventByGuid.values())if("NONE"!==r.nodeType)for(let n of r.events)e.push(this.injectTypeIntoEvent(r,n));for(let r of g)r(e);let r=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let n of e.events)r.push(n);for(let e of f)e(r);let n=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)n.push({...r,nodeType:e.nodeType});for(let e of E)e(n);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let r=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!r)return;"NONE"===r.nodeType&&(r.nodeType=this.publicNodeTypeFromEvent(e));let n=r.events.find(r=>r.type===e.type&&r.origin===e.origin);if(n)for(let r of e.properties)n.properties.add(r);else{let n=l.q.instance.get(e.id);n&&(e.type===o.iIc.STYLE_PROPERTY_CHANGE||e.type===o.iIc.STYLE_CREATE||e.type===o.iIc.STYLE_DELETE?n.styleKey&&r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,s.nM)({key:n.styleKey,version:n.styleVersionHash})}):r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:l.q.instance.developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,r);let i=l.q.instance.get(e.id);if(i){if(i.styleKey){let n=r.events.filter(e=>e.type===o.iIc.STYLE_DELETE||e.type===o.iIc.STYLE_CREATE||e.type===o.iIc.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}else{let n=r.events.filter(e=>e.type===o.iIc.CREATE||e.type===o.iIc.PROPERTY_CHANGE||e.type===o.iIc.DELETE).map(e=>{let r="";return e.type===o.iIc.CREATE||e.type===o.iIc.PROPERTY_CHANGE?r=i.containingCanvas||"":e.type===o.iIc.DELETE&&(r=e.oldContainingCanvas?.toString()||""),""===r&&(0,d.$D)(a.FigmaTeam.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}}}publicNodeTypeFromEvent(e){let r=l.q.instance.get(e.id);return r&&r?.type!=="NONE"?(0,u.w)(r):"NONE"}injectTypeIntoEvent(e,r){return r.type===o.iIc.CREATE||r.type===o.iIc.DELETE||r.type===o.iIc.PROPERTY_CHANGE?{...r,nodeType:e.nodeType}:r}};function w(){i={selectionChange(e){for(let r of p)e?r.boxSelection():r.normal()},drop(e){for(let r of _)if(!1===r(e))return!1;return!0},boxSelectionEnded(){for(let e of p)e.boxSelection.flush()},currentPageChange(){for(let e of m)e()},timerChange(e){for(let r of h)r(e)},documentChange(e){S.onEventFired(e)},codegenPreferencesChange(e){for(let r of y)r(e)},stackInvariantsEnforced(e){eS?.(e)},pluginPageLoaded(e){for(let r of b)r(e)},pluginAccessibleNodeIds(){let e=new Set;for(let r of I)r().forEach(r=>e.add(r));return Array.from(e)},pluginAccessiblePages(){let e=new Set;for(let r of T)r().forEach(r=>e.add(r));return Array.from(e)}}}function A(e){p.push({normal:e,boxSelection:(0,c.s)(e,500)})}function N(e){p=p.filter(r=>r.normal!==e||(r.boxSelection.cancel(),!1))}function C(e){m.push(e)}function O(e){m=m.filter(r=>r!==e)}function L(e){h.push(e)}function R(e){h=h.filter(r=>r!==e)}function P(e){_.push(e)}function D(e){_=_.filter(r=>r!==e)}function k(e){b.push(e)}function M(e){b=b.filter(r=>r!==e)}function F(e){I.push(e)}function x(e){I=I.filter(r=>r!==e)}function U(e){T.push(e)}function B(e){T=T.filter(r=>r!==e)}function V(){g.length||f.length||E.length?o.NfO.setIsDocumentChangeCallbackRegistered(!0):o.NfO.setIsDocumentChangeCallbackRegistered(!1)}function G(e){g.push(e),V()}function H(e){g=g.filter(r=>r!==e),V()}function W(e){f.push(e),V()}function K(e){f=f.filter(r=>r!==e),V()}function j(e){E.push(e),V()}function z(e){E=E.filter(r=>r!==e),V()}function Y(e){y.push(e)}function $(e){y=y.filter(r=>r!==e)}let{set:q,remove:Z,has:X,run:J}=eA(),{set:Q,remove:ee,has:et,run:er,reset:en}=eA(),{set:ei,remove:ea,has:eo,run:es,reset:el}=eA(),{set:ec,remove:ed,has:eu,run:ep,reset:em}=eA(),{set:eh,remove:e_,has:eg,run:ef,reset:eE,runOrTimeout:ey}=eA();function eb(e){v=e}function eI(){return!!v}function eT(){v=null}async function ev(){return!v||await v()}let eS=null;function ew(e){return eS=e,()=>eS=null}function eA(){let e;let r=new Promise(r=>{e=r}),n=null,i=()=>{r=new Promise(r=>{e=r}),n=null};return{set:r=>{n=r,e(r)},remove:e=>{e===n&&i()},has:()=>!!n,run:async(...e)=>{let n=await r;return await n(...e)},runOrTimeout:async(e,...n)=>{let i=new Promise(r=>{setTimeout(()=>{r()},e)}),a=await Promise.race([r,i]);return void 0===a?{didRun:!1}:{didRun:!0,returnValue:await a(...n)}},reset:i}}},215822:(e,r,n)=>{"use strict";n.d(r,{$H:()=>eX,$u:()=>tp,AG:()=>tr,Ar:()=>eT,Bw:()=>e1,CA:()=>el,CB:()=>eA,DM:()=>tu,EK:()=>ee,EY:()=>eM,GX:()=>X,Gc:()=>eQ,JT:()=>e0,K$:()=>J,L1:()=>ej,L8:()=>e2,LW:()=>tl,M5:()=>e7,MB:()=>eh,MH:()=>eJ,Mi:()=>e3,Ms:()=>eu,NW:()=>tt,Oe:()=>e_,Pe:()=>tm,Pl:()=>er,Q4:()=>ek,Qt:()=>eL,Qx:()=>eS,Rd:()=>eO,Rt:()=>eP,Ru:()=>te,SW:()=>eq,T:()=>Q,Th:()=>td,Tk:()=>eN,Tz:()=>eo,UH:()=>e4,VQ:()=>th,W4:()=>ti,WC:()=>e8,Wg:()=>ea,YG:()=>ta,YQ:()=>t_,ZB:()=>eZ,ZT:()=>eF,_H:()=>e5,_V:()=>ts,_w:()=>eR,c2:()=>$,fR:()=>e6,i8:()=>e$,iz:()=>ei,ky:()=>eD,lT:()=>eE,mI:()=>ez,mm:()=>ep,mx:()=>tc,my:()=>eC,nW:()=>eV,nf:()=>eY,oD:()=>eB,ou:()=>eH,pk:()=>e9,qH:()=>ec,t3:()=>em,tH:()=>eK,u0:()=>eW,uF:()=>ev,vj:()=>eU,wf:()=>ex,xC:()=>tn}),n(661743);var i=n(188507),a=n(459401),o=n(675678),s=n(157663),l=n(133537),c=n(38329),d=n(966712),u=n(563706),p=n(563042),m=n(776621),h=n(96328),_=n(30637),g=n(27087),f=n(939863),E=n(392592),y=n(837324),b=n(466636),I=n(762194),T=n(545941),v=n(290796),S=n(782501),w=n(356390);n(848661);var A=n(560718),N=n(99506),C=n(147206),O=n(285334),L=n(23001),R=n(239671),P=n(813408),D=n(28588),k=n(178787),M=n(376485),F=n(591463),x=n(13517),U=n(722416),B=n(375827),V=n(501256),G=n(507956),H=n(697551),W=n(258237),K=n(604978),j=n(441088),z=n(410225),Y=n(4564);async function $(e,{ignoreMissingEditorType:r,resourceType:n,isPublishing:i}){let a=await em(e,{resourceType:n});if(r&&a.error?.text===en)return a.manifest;if(a.error)throw Error((0,M.am)(a.error));return a.manifest}function q({parameters:e,parameterOnly:r},n){if(e&&function(e,r){if(!e.length)throw Error(`Expected "${r}.parameters" to have non-empty parameter list.`);let n=new Set;e.forEach(e=>{if(n.has(e.key))throw Error(`Expected "${r}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);n.add(e.key)});let i=!1;for(let{key:r,optional:n}of e){if(i&&!n)throw Error(`Optional parameters must be listed last in the parameter list. ${r} not marked as optional.`);n&&(i=!0)}}(e,n),r&&!e)throw Error(`Expected parameters to be defined for "${n}" marked as parameterOnly.`)}let Z={[R.nT.Design]:M.FW.FIGMA,[R.nT.DevHandoff]:M.FW.DEV,[R.nT.Whiteboard]:M.FW.FIGJAM,[R.nT.Slides]:M.FW.FIGMA,[R.nT.Sites]:M.FW.SITES,[R.nT.Cooper]:M.FW.FIGMA};function X(e){return Z[e]}function J(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view?Z[e.selectedView.editorType]:void 0)}function Q(){let e=c.D.getState().selectedView;if("fullscreen"===e.view)return Z[e.editorType]}function ee(e,r){return Array.isArray(r)?r.includes(e):e===M.FW.FIGMA}class et extends Error{constructor(e,r){super(e),this.message=e,this.manifest=r}}function er(){return en}let en='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function ei(e){return e?e.includes(M.FW.FIGMA)&&e.includes(M.FW.FIGJAM)?M.HK.UNIVERSAL:e.includes(M.FW.FIGJAM)?M.HK.FIGJAM:e.includes(M.FW.FIGMA)&&tm(e)?M.HK.FIGMA_AND_INSPECT:tm(e)?M.HK.INSPECT:M.HK.FIGMA:M.HK.FIGMA}function ea(e,r){switch(e){case M.HK.FIGJAM:return R.nT.Whiteboard;case M.HK.FIGMA:return R.nT.Design;case M.HK.FIGMA_AND_INSPECT:case M.HK.INSPECT:return R.nT.DevHandoff;case M.HK.UNIVERSAL:return r??(0,R.wN)((0,I.r)())}}function eo(e){return e===N._Y.WHITEBOARD?R.nT.Whiteboard:R.nT.Design}function es(e,r){let n=new Set(M.UX);return e.filter(e=>!n.has(e)||r?.has(e))}function el(e){return M.Kd.some(r=>e.includes(r))}class ec{constructor(e,r){this.permissions=e,this.trustedPluginOrigin=r}static none(){return new ec([],void 0)}static forTest(e){return new ec(e||M.XS,void 0)}static forConsoleGlobal(){let e=[...M.pR];return(0,d.kc)().first_draft_debug&&e.push("firstdraft"),new ec(e,void 0)}static forFirstPartyPlugin(){return new ec(M.XS,void 0)}static forLocalPlugin(e){let r=e.manifest.permissions||[];if((0,m.Lo)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:r}),(0,d.kc)().plugins_internal_apis)return new ec(r,"*");let n=es(r);return n.length<r.length&&(0,m.$D)(o.FigmaTeam.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new ec(n,void 0)}static forInstalledPlugin(e){let r=e.manifest.permissions||[];if((0,m.Lo)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:r}),(0,O.eZ)(e.plugin_id))return new ec(es(r,(0,O.xp)(e.plugin_id)),(0,O.HB)(e.plugin_id));let n=es(r);return n.length<r.length&&(0,m.$D)(o.FigmaTeam.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new ec(n,void 0)}}function ed(e){try{return new URLPattern(e)}catch(e){return null}}function eu(e,r){let n=[],i=0;for(let[a,o]of r)n.push(e.substring(i,a)),i=o;return n.push(e.substring(i,e.length)),n.join("")}function ep(e,r,n){var i,a,o;let s,l,c,d,u;let p="widget"===n.resourceType||!!r.cachedContainsWidget;if("error"in r)l={type:M.ho.LOAD,text:r.error};else try{c=JSON.parse(r.manifest)}catch(e){l={type:M.ho.PARSE,text:e.message}}if("unknown"===n.resourceType){if(c)p=c.containsWidget;else if("manifest"in r)try{p=!!/containsWidget/.test(r.manifest)}catch{}}if(c){try{(0,U.MG)(c.editorType,F.ib,"manifest.editorType"),d=c.editorType}catch{}try{(0,U.MG)(c.capabilities,F.hb,"manifest.capabilities"),u=c.capabilities}catch{}}let m=(0,Y.M)();if("manifest"in r&&m?.updateCachedContainsWidget({id:e,cachedContainsWidget:p}),!l)try{s=function(e,r){try{(0,U.MG)(e,"widget"===r.resourceType?F.Vf:F._O,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let r="but got additional property",n=e.lastIndexOf(r);if(-1!==n){let i=e.substring(n+r.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${i}`}return e}(e.message));throw e}if("plugin"===r.resourceType){if(e.relaunchButtons){let r=new Set;e.relaunchButtons.forEach(n=>{if(r.has(n.command))throw new et(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${n.command}"`,e);r.add(n.command)})}!function(e){if(q(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(r){for(let n of r)(0,M.Av)(n)?q(n,n.name):(0,M.xg)(n)&&e(n.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new et(en,e);if(e.editorType.some(e=>!M.Ye.includes(e))||e.editorType.length<1||e.editorType.length>M.Ye.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let r=e.permissions.find(e=>!M.XS.includes(e));if(void 0!==r)throw new et(`Invalid permission specified: ${r}`,e)}}(e),!function(e){if(e.capabilities)for(let r of e.capabilities){if(M.Dk.includes(r)||function(e,r){throw new et(`Invalid capability specified: ${r}`,e)}(e,r),"panel"===r||"inspect"===r||"codegen"===r||"linkpreview"===r||"vscode"===r){if(!tm(e.editorType))throw new et(`Capability "${r}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new et(`Capability "${r}" is not supported for widgets`,e)}if((0,j.T)()&&!e.capabilities.includes("vscode"))throw new et('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){if(!e.capabilities?.includes("codegen")){if(e.codegenLanguages)throw new et("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new et("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new et("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let r=e.codegenLanguages?.map(e=>e.value)??[],n=[],i=new Set;for(let a=0;a<e.codegenPreferences.length;a++){let o=e.codegenPreferences[a];for(let n of o.includedLanguages??[])if(!r.includes(n))throw new et(`Unknown language "${n}" in codegenPreferences[${a}].includedLanguages`,e);if((0,M.MP)(o)&&n.push(o),(0,M.Wt)(o)){if(i.has(o.propertyName))throw new et('codegenPreferences "action" itemType settings must have unique propertyName values',e);i.add(o.propertyName)}if((0,M.ZV)(o)){let r=0;if(o.options)for(let e of o.options)e.isDefault&&(r+=1);if(1!==r)throw new et('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(n.length>1)throw new et('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===r.resourceType&&e.containsWidget&&"1.0.0"!==e.widgetApi)throw new et("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let r=(0,x.pI)(e.networkAccess);if(!r.isValid)throw new et(r.validationErr,e)}if(e.relatedLinkDomains){if(!tm(e.editorType))throw new et("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.relatedLinkDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new et(`Invalid domain '${r}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ed(r))throw new et(`Invalid domain '${r}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!tm(e.editorType))throw new et("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.devResourceDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new et(`Invalid domain '${r}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);if(!ed(r))throw new et(`Invalid domain '${r}' in 'devResourceDomains'.`,e)}}return e}(c,{resourceType:p?"widget":"plugin"})}catch(e){l={type:M.ho.VALIDATE,text:e.message},e.manifest&&(s=e.manifest)}let h=p?(i=d,{...ef,editorType:i||void 0}):(a=d,o=u,{...eg,editorType:a||void 0,capabilities:o||void 0});return{plugin_id:s&&s.id||"",name:function(e,r){if(e)return e.name;if(r.lastKnownName)return r.lastKnownName;if(!r.path)return"Error";{let e=r.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:r.path}}(s,r),manifest:s??h,localFileId:e,localFilePath:r.path,error:l}}async function em(e,r){let n=(0,Y.M)();try{if(!n)throw Error("desktopApp not available");let i=await n.getLocalFileExtensionManifest(e);return ep(e,i,r)}catch(n){return{plugin_id:"",name:"Error",manifest:"widget"===r.resourceType?ef:eg,localFileId:e,localFilePath:"",error:{type:M.ho.LOAD,text:n.message}}}}async function eh(e){let r;let n=(0,Y.M)();try{if(!n)throw Error("desktopApp not available");r=await n.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(r.buildErrCode)throw Error("Build error: "+r.stderr+"\nPath was: "+r.path);let i=r.source;return r.html&&(i=function(e,r){let n=e=>JSON.stringify(e).split(/(<!--|-->|\bimport)/g).map((e,r)=>1&r?e.slice(0,2)+'"+"'+e.slice(2):e).join("");if("string"==typeof r)return`const __html__ = ${n(r)};${e}`;let i=Object.entries(r).map(([e,r])=>`[${n(e)}]:${n(r)}`).join(",");return`const __uiFiles__ = {${i}};${e}`}(i,r.html)),i}function e_(e){return e.error?.text===en?e.name:`${e.error?`\u26A0  `:""}${e.name}`}let eg={id:"",name:"",api:"",main:""},ef={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},eE={id:"",plugin_id:"",manifest:{...eg},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1,playground_fig_file_key:null},ey={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:P.o1.USER,badges:[],description:""},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,tags:[],community_publishers:{accepted:[],pending:[]},comments_setting:A.Ni.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},eb={...ey,is_widget:!0},eI={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",tags:(0,V.Rs)(),iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:A.Ni.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:v.J.Actions.NOOP};function eT(e){if(!e||!e.versions)return null;let r=e.current_plugin_version_id;return r&&e.versions[r]||null}function ev(e){let r=eT(e);return null===r?eE:r}function eS(e,r){if((0,z.ZY)(r))return(0,z.Qx)(r);let n=e[r]??{};for(let e in n)return n[e].current_plugin_version_id}let ew=e=>e?.containsWidget?eb:ey;function eA(e,r,n,i){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}if(i){if(e&&e[i])return e[i];if(r&&r[i])return r[i]}return ew(n?.manifest)}function eN(e,r,n){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}return null}function eC(e,r){return(0,H.Hc)(e,r,ey)}function eO(e,r){return(0,H.Hc)(e,r,eb)}function eL(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i];a.roles.org&&a.roles.org.id===r&&(n[a.id]=a)}),n}function eR(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i];ee(r,ev(a).manifest.editorType)&&(n[a.id]=a)}),n}function eP(e){return!!e?.roles?.org}function eD(e,r,n=!0){let i={};return Object.keys(e).forEach(a=>{let o=e[a],s=n?W.jY:W.Ro;((0,S.Dd)(o,r)||s(o,r))&&(i[a]=e[a])}),i}function ek(e){return(0,a.sortByCreatedAt)(Object.keys(e).map(r=>ev(e[r]))).map(r=>e[r.plugin_id])}function eM(e,r){let n=e.roles,i=!r.is_public&&(0,T.AC)(e);return!!n.is_public!=!!r.is_public||n.org?.id!==r.org?.id||i}function eF(e){if(!e)throw Error("Code string cannot be empty");let r=(0,h.YH)(e).length;if(r>H.yO)throw Error(`plugin code exceeds max size of ${Math.floor(H.yO/1e6)}MB`);return r}function ex(e){return(0,S.Wl)(e,"Icon image")}async function eU(e,r){return ex(e),await eG(e,{width:K.DK,height:K.DK},r,(0,f.t)("community.publishing.error_icon_image_dimensions"))}function eB(e){return(0,S.Wl)(e,"Artwork image",[...D.xp,"image/svg+xml"])}function eV(e){let r=e?.[0];if(!r)throw Error((0,f.t)("community.publishing.error_file_not_found"));return r}async function eG(e,r,n,i){let{width:a,height:o}=r,s=URL.createObjectURL(e),l=await (0,S.l8)(s);try{if(!function(e,r,n){let{width:i,height:a}=r;return e.width===i&&e.height===a||n&&e.width%i==0&&e.height%a==0&&e.width/i==e.height/a}(l,r,n))throw Error(i);if(l.width===a&&l.height===o)return e;let s=await new Promise((e,r)=>{let n=document.createElement("canvas");try{n.width=a,n.height=o,n.getContext("2d").drawImage(l,0,0,a,o),n.toBlob(n=>n?e(n):r(Error("Failed to resize image")))}catch(e){r(e)}finally{n.remove()}});return new File([s],e.name,{type:s.type})}finally{URL.revokeObjectURL(s),l.remove()}}async function eH(e){let r=(await g.Ay.post(`/api/${(0,H.n)(e)}`)).data.meta;if(!r.id)throw Error("cannot generate plugin ID");return r}function eW(e,r,n){return e.roles.org??(r&&n?{id:r.id,name:r.name,img_url:r.img_url}:null)}function eK(e,r){return r===M.Lu.ORG?e?{org:e}:(s.k.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function ej(e){return e.name===eI.name&&e.newVersionReleaseNotes===eI.newVersionReleaseNotes&&e.supportContact===eI.supportContact&&e.description===eI.description&&e.iconSrc===eI.iconSrc&&e.coverImageSrc===eI.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}function ez(e,r,n,i,a){let o;let s=void 0!==r?e.localPlugins[r]:void 0,l=s&&s.manifest,c=eA(e.publishedPlugins,e.publishedWidgets,s,n),d=ev(c),u={...(0,V.Rs)(),tokens:(c.tags||[]).map(e=>({content:e,state:L.d.OK}))},p=l?.permissions?.includes("payments");try{o=(0,S.En)(c,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:m,pending:h}=c.community_publishers,_={...(0,V.Rs)(),tokens:(c.community_publishers?[...m.map(e=>({...e,isPending:!1})),...h?.map(e=>({...e,isPending:!0}))||[]]:[]).reduce((r,n)=>(0,S.Ii)(e.authedProfilesById[n.id],o)?r:r.concat([{state:L.d.OK,content:n}]),[])};return{name:d.name||l&&l.name||eI.name,currentVersionReleaseNotes:d.release_notes||eI.newVersionReleaseNotes,newVersionReleaseNotes:eI.newVersionReleaseNotes,tags:u,supportContact:c.support_contact||e.user?.email||eI.supportContact,description:d.description||eI.description,tagline:d.tagline||eI.tagline,creatorPolicy:d.creator_policy??eI.creatorPolicy,iconSrc:d.redirect_icon_url||eI.iconSrc,widgetSnapshotImageSrc:i||d.redirect_snapshot_url||eI.widgetSnapshotImageSrc,widgetSnapshotImageBlob:a||eI.widgetSnapshotImageBlob,coverImageSrc:d.redirect_cover_image_url||eI.coverImageSrc,iconImageError:eI.iconImageError,coverImageError:eI.coverImageError,widgetSnapshotImageError:eI.widgetSnapshotImageError,twoFactorAuthDisabledError:eI.twoFactorAuthDisabledError,emailNotVerifiedError:eI.emailNotVerifiedError,accountDetailsChangedError:eI.accountDetailsChangedError,freemiumRequiredForMigrating:eI.freemiumRequiredForMigrating,author:o,publishers:_,creators:m.map(e=>({...e,isPending:!1})).concat((h??[]).map(e=>({...e,isPending:!0}))).filter(r=>!(0,S.Ii)(e.authedProfilesById[r.id],o)&&r.entity_type===P.o1.USER),commentsSetting:c.comments_setting||eI.commentsSetting,categoryId:c.category_id||eI.categoryId,blockPublishingOnToS:(0,S.xw)(e),playgroundFigFile:d.playground_fig_file,playgroundFilePublishType:v.J.Actions.NOOP,isPaid:!!c.monetized_resource_metadata||p,price:(0,b.vf)(c.monetized_resource_metadata),isSubscription:c.monetized_resource_metadata?.is_subscription,hasPaymentsApi:p,annualDiscount:c.monetized_resource_metadata?.annual_discount_percentage,isAnnualDiscountActive:!!c.monetized_resource_metadata?.annual_discount_active_at,carouselMedia:(0,y.N6)(c)}}function eY(e){return!!ev(e).id&&!e.unpublished_at}function e$(e){if(!e)return{};let r={};return e.forEach(e=>{eY(e)&&(r[e.id]=e)}),r}function eq(e,r,n,i){let a={};return(e.email_validated_at||(a.emailNotVerifiedError=(0,f.t)("community.publishing.please_verify_your_email_address_to_publish")),i||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(r.code!==P.aP.FAILURE||r.error!==(0,f.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!i&&(e.plugin_publishing_blocked_at||e.community_blocked_at||r.code===P.aP.FAILURE&&r.error===(0,f.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?a.accountDetailsChangedError=(0,f.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):r.code===P.aP.FAILURE&&r.error&&(a.other=r.error):a.twoFactorAuthDisabledError=n?(0,f.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,f.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),a}function eZ(e,r,n,i){if(!e)return{};let a={};0===(0,H.Yp)(e.name).length&&(a.name=(0,f.t)("community.publishing.name_must_not_be_empty")),0===(0,H.Yp)(e.tagline).length&&(a.tagline=(0,f.t)("community.publishing.add_a_tagline")),(0,p.ZB)(e.description)&&(a.description=(0,f.t)("community.publishing.add_a_description"));let o=(0,H.Yp)(e.supportContact);if(0===o.length?a.supportContact=(0,f.t)("community.publishing.support_contact_must_not_be_empty"):(0,l.xf)(o)||(0,h.gU)(o)||(a.supportContact=(0,f.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,H.Yp)(e.iconSrc).length&&(a.iconImageError=(0,f.t)("community.publishing.icon_cant_be_empty")),a.carouselMedia=(0,S.vC)(e.carouselMedia),e.categoryId||(a.categoryId=(0,f.t)("community.publishing.category_cant_be_empty")),void 0===e.price||r.permissions?.includes("payments")||i?.third_party_m10n_status!==k.PN.FLAGGED||(a.freemiumRequiredForMigrating=(0,f.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&r.editorType?.length===1){let i=r.editorType[0],o=e.playgroundFigFile.editor_type;if(i===M.FW.FIGMA&&"design"!==o||i===M.FW.FIGJAM&&"whiteboard"!==o){let e=i===M.FW.FIGMA?(0,f.t)("community.publishing.playground_file.figma"):(0,f.t)("community.publishing.playground_file.figjam");a.playgroundFigFile=n?(0,f.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,f.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}n&&0===(0,H.Yp)(e.widgetSnapshotImageSrc).length&&(a.widgetSnapshotImageError=(0,f.t)("community.publishing.snapshot_must_not_be_empty"));let s=function(e,r){if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,f.t)("community.publishing.price_is_required_for_paid_resources");if((0,b.Yp)(e.price))return e.price<b.mZ?(0,f.t)("community.seller.paid_resource_minimum_err"):(0,f.t)("community.seller.paid_resource_maximum_err");if((0,b.F8)(e.price))return(0,f.t)("community.seller.prices_must_follow_format");if(!r||(0,T.AC)(r))return null;let n=r?.monetized_resource_metadata?.price;return e.isSubscription&&n&&(0,b.Mj)(n/100,e.price)?(0,f.t)("community.seller.price_increase_limit"):!r?.monetized_resource_metadata?.can_increase_price&&n&&(0,b.WD)(n/100,e.price)?(0,f.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,i);s&&(a.price=s);let c=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,f.t)("community.seller.discount_must_follow_format"):null;return c&&(a.annualDiscount=c),a}function eX(e,r,n){if(!e)return{};let i={},a=(0,H.Yp)(e.name).length;if(a<4?i.name=(0,f.t)("community.publishing.name_must_be_4_characters_long"):a>100&&(i.name=(0,f.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,H.Yp)(e.description).length>1e4&&(i.description=(0,f.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,H.Yp)(e.newVersionReleaseNotes).length>1e4&&(i.newVersionReleaseNotes=(0,f.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,H.Yp)(e.creatorPolicy).length>1e4&&(i.creatorPolicy=(0,f.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")),r)i.tags=(0,H.Dp)(e.tags.tokens.map(e=>e.content),r.find(r=>r.id===e.categoryId)?.tags||[],r.flatMap(e=>e.tags??[]));else{let r=e.tags.tokens.map(e=>e.content);e.tags.inputValue&&(r=r.concat([e.tags.inputValue]));let n=(0,H.Wh)(r);n&&(i.tags=n)}let o=(0,H.Lg)(e.tagline);return o&&(i.tagline=o),(0,H.Yp)(e.supportContact).length>100&&(i.supportContact=(0,f.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(i.iconImageError=e.iconImageError),e.coverImageError&&(i.coverImageError=e.coverImageError),i}function eJ(e){return(0,M.k0)(e.plugin)}function eQ(e){let r;let{localPlugins:n,publishedCanvasWidgetVersions:i,publishedWidgets:a}=c.D.getState(),s=!e.widgetVersionId,l=e.widgetId;if(l){if(s){let e=Object.values(n).filter(e=>e.plugin_id===l);e.length>1&&e6((0,f.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=i[l]?.[e.widgetVersionId]||a[l]&&ev(a[l])))return;r.id===e.widgetVersionId||(0,_.nl)()||(0,_.Lg)()||(0,m.$D)(o.FigmaTeam.UNOWNED,Error(`plugin versionId=${r?.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function e0(e){let r=e.canRunPluginState?e.canRunPluginState:c.D.getState();if(!(0,C.GP)(r))return{canRun:!1,message:"Cannot run plugin because canRunPlugins returned false"};if(!e1(r,e.plugin))return{canRun:!1,message:"Cannot run plugin within org"};let{plugin:n,editorType:i}=e;if((0,M.ZQ)(n))return(0,M.k0)(n)?{canRun:!1,message:"Cannot run local widget"}:{canRun:!0};if(i){if(!ee(Z[i],n.manifest.editorType))return{canRun:!1,message:"Cannot run plugin with invalid editor type"};if(i===R.nT.DevHandoff&&!e7(n))return{canRun:!1,message:"Cannot run non-devmode plugin in dev mode"}}return{canRun:!0}}function e1(e,r){if(!e.currentUserOrgId)return!0;let n=e.orgById[e.currentUserOrgId];if(!n||(0,M.ZQ)(r)||(0,M.bH)(r))return!0;if(!n.public_plugins_allowed)return!1;let i=(0,M.k0)(r);return(i?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!(i?e.whitelistedWidgets:e.whitelistedPlugins)[r.plugin_id]}function e2(e){return e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"}}function e3(e,r){return r?r.localFileId:e.id}function e6(e){(0,B.pN)({shouldShowVisualBell:!0});let r=(0,Y.M)();w.Y5.dispatch(E.F.enqueue({type:"plugins-runtime-error",message:e,button:r?{text:"Show/Hide console",action:()=>{r.toggleDevTools("bottom")}}:void 0,error:!0}))}function e8(){w.Y5.dispatch(E.F.dequeue({matchType:"plugins-runtime-error"}))}function e5(e,r){return e.plugin_id===r?.plugin_id&&e?.id===r?.id}function e7(e,r){return!!(!(0,j.T)()||e.manifest.capabilities?.includes("vscode")||r?.allowNonVsCodePluginsInVsCode)&&tm(e.manifest.editorType)&&!(0,M.k0)(e)}function e4(e){return e7(e)&&tp(e.manifest.capabilities)}function e9(e){return e7(e)&&e.manifest?.capabilities?.includes("codegen")}function te(e){return e.manifest?.capabilities?.includes("textreview")}function tt(e,r,n){if(!e)return r;switch(e){case R.nT.Whiteboard:case R.nT.Design:return Object.fromEntries(Object.entries(r).filter(([r,n])=>ee(Z[e],n.manifest.editorType)));case R.nT.DevHandoff:return Object.fromEntries(Object.entries(r).filter(([e,r])=>e7(r,n)));default:return{}}}function tr(e,r){if(!e)return r;switch(e){case R.nT.Whiteboard:case R.nT.Design:return r.filter(r=>ee(Z[e],r.manifest.editorType));case R.nT.DevHandoff:return r.filter(e=>e7(e));default:return[]}}function tn(e,r){if(!e)return r;switch(e){case R.nT.Whiteboard:case R.nT.Design:return Object.fromEntries(Object.entries(r).filter(([r,n])=>ee(Z[e],ev(n).manifest.editorType)));case R.nT.DevHandoff:return Object.fromEntries(Object.entries(r).filter(([e,r])=>e7(ev(r))));default:return{}}}function ti(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let r=c.D.getState().selectedView;return(0,G.$A)(r)}function ta(e){return e?.manifest.editorType?.length===1&&tm(e.manifest.editorType)}function to(e){let r=function(e){let r=["vscode"];return e.filter(e=>!r.includes(e))}(e.manifest.capabilities??[]);return 1===r.length&&"codegen"===r[0]}function ts(e){return ta(e)&&to(e)}function tl(e){return tm(e.manifest.editorType)&&to(e)}function tc(e){let r=c.D.getState().selectedView;return(0,G.$A)(r)&&tl(e)}function td(e,r,n){let i=c.D.getState().selectedView,a=r?.plugins_whitelist_enforced,o=a&&n&&!!n[e.plugin_id]||!a;return(0,G.$A)(i)&&!ts(e)&&o}function tu({idToSearch:e,localExtensionsByFileId:r,publishedExtensions:n}){let i=r&&r[e];if(i)return i;let a=n?.[e];return a?eT(a):null}function tp(e){return!!(e?.includes("inspect")||e?.includes("panel"))}function tm(e){return!!(e?.includes(M.FW.DEV)||e?.includes(M.FW.INSPECT))}function th(e){let r=Q(),n=e&&e?.plugin&&ts(e?.plugin);return e&&r&&ee(r,e.plugin.manifest.editorType)&&("dev"!==r||e7(e.plugin))&&!n}function t_(){return(0,j.T)()?"plugins-menu-open-directory-vscode":u.Ay.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},384792:(e,r,n)=>{"use strict";n.d(r,{C3:()=>a,SH:()=>o}),n(215822);let i=null;function a(e){i=e}function o(){return i}},772192:(e,r,n)=>{"use strict";n.d(r,{R:()=>o}),n(181912);var i=n(941381),a=n(336599);let o=new class{loadPluginsPublishedByUser(e){let r=e.getState().loadingState,n=i.uF.loadingKeyForPayload();(0,a.Sc)(r,n)&&e.dispatch(i.uF())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=i.LP.loadingKeyForPayload(n);(0,a.Sc)(r,o)&&await e.dispatch(i.LP(n))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=i.a8.loadingKeyForPayload(n);(0,a.Sc)(r,o)&&e.dispatch(i.a8(n))}}},285334:(e,r,n)=>{"use strict";n.d(r,{HB:()=>M,Ph:()=>m,T0:()=>I,Up:()=>x,eZ:()=>k,sA:()=>U,xp:()=>F,yb:()=>B});var i=n(966712),a=n(30637),o=n(376485);let s="1039957324840667051",l="1042072203439057981",c="1017757619521383731",d="1037692671113105119",u="1030479012894344777",p="1100947233945489758",m="1274481464484630971",h="1220512233196109878",_="1220802563996996107",g="1221187540287746170",f="1029476790898052743",E="1270487405418367065",y="1028089855820989707",b="1100944790471783866",I="1268676638869538880",T="1217135789855512677",v="1217657098906612843",S={[s]:o.Kd,[l]:o.Kd,[c]:o.Kd,[d]:o.Kd,"1096460041736534298":["analytics"],[h]:["analytics","openexternal"],[_]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[u]:o.Kd,[p]:o.Kd,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[m]:["cortex","analytics"],[g]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"],"1377781599688680355":["cortex","analytics","filekey","firstdraft"],"1340067847030742527":["cortex","analytics","filekey","firstdraft"]},w={[s]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://recordwidget.vimeocdn.com",[u]:"https://www.figma.com",[p]:"https://www.figma.com"},A={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[T]:["analytics","openexternal"],[v]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[f]:o.Kd,[E]:o.Kd,[y]:o.Kd,[b]:o.Kd,"1256428543638612749":["cortex"],[I]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1338915561589337295":["cortex","analytics","filekey","firstdraft"],"1342184095219254574":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":o.Kd,"1105998344712102365":o.Kd,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},N={[T]:"https://static.figma.com/uploads/83e16c32f7fbe88022ff9fcff130cdd6c6423861"},C={[h]:"https://static.figma.com/uploads/83e16c32f7fbe88022ff9fcff130cdd6c6423861"},O={[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com",[b]:"https://staging.figma.com"},L=new Set([T,v]),R=new Set([h,_,g,"1220851659530313303"]),P={},D={};function k(e){return"prod"===(0,i.tl)().cluster_name?e in w||e in S:"staging"===(0,i.tl)().cluster_name?e in O||e in A:(0,a.nl)()||(0,a.Lg)()?e in P:!!(0,i.IX)()}function M(e){return"prod"===(0,i.tl)().cluster_name?e in w?w[e]:void 0:"staging"===(0,i.tl)().cluster_name?e in O?O[e]:void 0:(0,a.nl)()||(0,a.Lg)()?e in P?P[e]:void 0:(0,i.IX)()?"*":void 0}function F(e){if(!k(e))throw Error("Untrusted pluginID");return"prod"===(0,i.tl)().cluster_name?new Set(S[e]??[]):"staging"===(0,i.tl)().cluster_name?new Set(A[e]??[]):(0,a.nl)()||(0,a.Lg)()?new Set(D[e]??[]):(0,i.IX)()?new Set(o.UX):new Set}function x(){return"prod"===(0,i.tl)().cluster_name?R:"staging"===(0,i.tl)().cluster_name?L:((0,a.nl)()||(0,a.Lg)()||(0,i.IX)(),new Set)}function U(e){return"prod"===(0,i.tl)().cluster_name?C[e]:"staging"===(0,i.tl)().cluster_name?N[e]:void 0}function B(e){return"prod"===(0,i.tl)().cluster_name?"1286792998372727741"===e:"staging"===(0,i.tl)().cluster_name?"1286790870036328880"===e:!!((0,a.nl)()||(0,a.Lg)())||!!(0,i.IX)()}},746869:(e,r,n)=>{"use strict";n.d(r,{ng:()=>i,uU:()=>g});var i,a=n(459401),o=n(181912),s=n(966712),l=n(140908),c=n(99506),d=n(243987),u=n(428467),p=n(986060),m=n(707465);let h="pro_trials_v3",_=c.GP.PRO_TRIAL,g="exp_pro_trials_v3_start_trial";(e=>{e.uxEnabled=()=>!!(0,s.kc)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().pro_trials_v3_expiry,e.isUserInVariant=l.wN,e.getTrackingProperties=function(e){return e?{productArea:h,text:e}:{productArea:h}},e.getProTrial=function(e,i,a){if(!e)return null;let o=n(e);if(!o)return null;let s=new Date(e.grace_period_end),l=r(s),c=e.id;return{status:o,isOwner:i,userCanEditTeam:(0,u.canEditTeam)(c,a),trialExpiresAt:s,daysLeft:l,teamId:c}},e.getUpgradableProTrials=function(r,n){let i=Object.values(n.teams),s=(0,a.removeNullish)(i.map(i=>e.getProTrial(i,!!r[i.id]?.[g],n))),l=s.filter(e=>e.status===p.a.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt));let c=s.filter(e=>e.status===p.a.IN_TRIAL&&e.userCanEditTeam);return c.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt)),{ongoingTrials:c,expiredTrials:l}},e.getEligibleProTrialTeams=function(r,n,i,a){let o=(0,d.Rx)(i),s=Object.values(i.teams).filter(s=>e.canStartProTrial(r,n,o,s,i,a));return s.sort((e,r)=>r.editors-e.editors),s},e.canStartProTrial=function(r,n,i,a,s,l){return!(!r||!e.entryEnabled()||(0,d.w5)(a)||a.stripe_customer_id||!n||i||!(0,u.canEditTeam)(a.id,s)||30>(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)||(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)>90||e.getProTrialStatus(a)||Object.keys(l).some(e=>!!l[e][g]))&&!!e.isUserInVariant(r.id)};let r=e=>Math.max(Math.ceil((0,o.A)(e).diff((0,o.A)(),"days",!0)),0);function n(r){return(0,e.uxEnabled)()&&r.grace_period_end&&r.grace_period_type&&_===r.grace_period_type?new Date(r.grace_period_end)<new Date?p.a.TRIAL_EXPIRED:p.a.IN_TRIAL:null}function i(e){return!!e&&e.status===p.a.IN_TRIAL&&e.userCanEditTeam}e.getProTrialStatus=n,e.isEligibleTrialEntryView=function(e){return"folder"===e.view||"team"===e.view||(0,m.K)(e)},e.canSeeProTrialUx=i,e.canSeeProTrialUxInFile=function(e,r){return i(e)&&r?.editorType&&r?.canEdit},e.canSeeProTrialExpiryUx=function(r){if(!(0,e.expiryEnabled)()||!r||r.status!==p.a.TRIAL_EXPIRED)return!1;let n=(0,o.A)().utc().diff((0,o.A)(r.trialExpiresAt).utc(),"days",!0);return!(n<0)&&n<7},e.canSeeExpiredProTrialBanner=function(r,n,i){if(!n)return!1;let a=!!r[n.id]?.[g],o=e.getProTrial(n,a,i);return e.canSeeProTrialExpiryUx(o)}})(i||(i={}))},94500:(e,r,n)=>{"use strict";n.d(r,{Bx:()=>v,Cs:()=>P,Hs:()=>I,Jr:()=>O,KJ:()=>L,M9:()=>y,RL:()=>b,Rv:()=>E,UG:()=>C,Zh:()=>M,_P:()=>k,_Q:()=>g,e:()=>S,eA:()=>A,fz:()=>T,mf:()=>D,qb:()=>f,ql:()=>N,t0:()=>R,yE:()=>w});var i=n(634832),a=n(675678),o=n(587670),s=n(757028),l=n(498750),c=n(563706),d=n(776621),u=n(980820),p=n(738269);n(992271);var m=n(988022);n(356390),n(848661);var h=n(99506),_=n(707465);function g(e){switch(e){case"NONE":return o.bq3.NONE;case"PRESET":return o.bq3.PRESET;case"CUSTOM":return o.bq3.CUSTOM;case"PRESENTATION":return o.bq3.PRESENTATION;default:(0,i.assertNever)(e)}}function f(e){return e===o.bq3.PRESET||e===o.bq3.CUSTOM?"scale-down":e===o.bq3.PRESENTATION?"contain":"min-zoom"}function E(e){return"fixed"}function y(e){let r=g(e.initialDevice?.type??"NONE"),n=e.scalingInfo;return c.rr?{viewportScalingMode:"fit-width",contentScalingMode:n?.contentScalingMode??"fixed"}:{viewportScalingMode:n?.viewportScalingMode??f(r),contentScalingMode:n?.contentScalingMode??E(r)}}function b(e,r){return!r?.disableDefaultKeyboardNav&&([l.Uz.LEFT_ARROW,l.Uz.PAGE_UP].includes(e.keyCode)||e.shiftKey&&e.keyCode===l.Uz.N)}function I(e,r){return!(r?.disableDefaultKeyboardNav||r?.inlinePreview&&e.keyCode===l.Uz.SPACE&&e.shiftKey)&&[l.Uz.RIGHT_ARROW,l.Uz.SPACE,l.Uz.ENTER,l.Uz.N,l.Uz.PAGE_DOWN].includes(e.keyCode)}function T(e,r){return!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.R&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey}let v=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.F&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview,S=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.Z&&!e.metaKey&&!e.ctrlKey&&!r.inlinePreview&&r?.file?.editor_type!==h._Y.SLIDES,w=(e,r)=>e.keyCode===l.Uz.SPACE&&e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!r?.inlinePreview,A=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.C&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview;function N(e){return!1}let C=.2,O=(0,u.nF)((e,r)=>{if(r.userInitiated){let n={scalingMode:r.viewportScalingMode,contentScalingMode:r.contentScalingMode,source:r.source};e.dispatch(k({name:"Prototype Scale Changed",params:n}))}let n=e.getState().selectedView;if("prototype"===n.view){let i=(0,s.Ay)(n,e=>{void 0===e.scalingInfo&&(e.scalingInfo={}),r.hasOwnProperty("viewportScalingMode")&&(e.scalingInfo.viewportScalingMode=r.viewportScalingMode),r.hasOwnProperty("contentScalingMode")&&(e.scalingInfo.contentScalingMode=r.contentScalingMode)});e.dispatch(p.$T(i))}}),L=(0,u.nF)((e,{showHotspots:r})=>{let n=e.getState().selectedView;if(n&&"prototype"===n.view){let i={...n,showHotspots:r};e.dispatch(p.$T(i))}}),R=(0,u.nF)((e,{showDeviceFrame:r})=>{let n=e.getState().selectedView;(0,i.assertNotNullish)(n,"selectedView must be defined to show device frame"),(0,i.assert)("prototype"===n.view,"must be in the view to show device frame");let a={...n,showDeviceFrame:r};e.dispatch(p.$T(a))}),P=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,i.assertNotNullish)(n,"selectedView must be defined to set initial device frame"),(0,i.assert)("prototype"===n.view,"must be in the view to set initial device frame");let a={...n,initialDevice:r,overrideDevice:void 0};e.dispatch(p.$T(a))}),D=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,i.assertNotNullish)(n,"selectedView must be defined to set override device frame"),(0,i.assert)("prototype"===n.view,"must be in the view to set override device frame");let a={...n,overrideDevice:r};e.dispatch(p.$T(a))}),k=(0,u.nF)((e,r)=>{let n=e.getState(),i=r.params||{},a=(0,_.U2)(n.selectedView);m.ds(r.name,a,n,i)}),M=(()=>{let e=(0,u.nF)((e,r)=>{let n=e.getState(),i=r.params||{},o=(0,_.U2)(n.selectedView);if(!o){(0,d.$D)(a.FigmaTeam.PROTOTYPING,Error("No file key for prototype event"));return}m.GS(r.name,o,n,i)});return({name:r,params:n})=>e({name:r,params:n})})()},830524:(e,r,n)=>{"use strict";n.d(r,{C$:()=>s,Cp:()=>d}),n(411855),n(188507);var i=n(587670),a=n(286640);n(293017),n(809831),n(106757),n(788256);var o=n(479296);function s(e){let r=[e];for(;0!==r.length;){let e=r.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;r.push(...e.childrenNodes)}}return!1}n(696673),n(335682),n(833629);let l="last-used-left-panel-tab",c="ASSETS_TAB";function d(e){a.x4&&a.x4.setItem(l,e===i.xae.ASSETS?c:"LAYERS_TAB")}(0,o.D)(()=>{if(a.x4){let e=a.x4.getItem(l);if(e)return e===c?i.xae.ASSETS:i.xae.LAYERS}return null})},316081:(e,r,n)=>{"use strict";n.d(r,{H4:()=>u,Ud:()=>d,XY:()=>m,cZ:()=>h});var i=n(411855),a=n(188507),o=n(634832),s=n(629019),l=n.n(s),c=n(233890);let d=Symbol("NotVisibleRunAnyway");class u{constructor(e){this._callback=e,this._previousValue=null}render({isVisible:e,className:r,displayAs:n,valueArgs:a=[]}){let o=!0===e||e===d?this._previousValue=this._callback(...a):this._previousValue,s=!0===e;return o instanceof Array?o.map((e,a)=>e&&i.createElement(p,{key:e.key??a,isVisible:s,className:r,displayAs:n},e)):o&&i.createElement(p,{key:o.key??void 0,isVisible:s,className:r,displayAs:n},o)}}class p extends i.Component{constructor(){super(...arguments),this.ref=e=>{this.el=e}}componentDidUpdate(e){this.el&&(!e.isVisible&&this.props.isVisible&&c.F2.focusSubtreeIfNecessary(this.el),e.isVisible&&!this.props.isVisible&&c.F2.blurSubtreeIfNecessary(this.el))}getClassNameForDisplayAs(){let{displayAs:e}=this.props;switch(e){case"block":return"";case"contents":return"displayContents";default:(0,o.assertNever)(e)}}render(){let{isVisible:e}=this.props,r=l()(this.props.className?this.props.className:"cachedSubtree",this.getClassNameForDisplayAs());return i.createElement("div",{ref:this.ref,className:r,style:{display:e?"":"none"}},this.props.children)}}p.defaultProps={displayAs:"contents"},p.displayName="CachedSubtreeComponent";let m=(0,a.Ng)(void 0,e=>({dispatch:e}));function h(e,r){"function"==typeof e?e(r):e&&(e.current=r)}},331626:(e,r,n)=>{"use strict";n.d(r,{JG:()=>h,Jl:()=>_,SO:()=>m,U_:()=>p,X2:()=>E,gJ:()=>g,ul:()=>f});var i=n(634832),a=n(286640),o=n(809831),s=n(99506),l=n(555328),c=n(239671),d=n(809073),u=n(215822);function p(){let e=(0,o.my)();return e===c.nT.Whiteboard?d.$A.FigJam:e===c.nT.Design?d.$A.Design:e===c.nT.DevHandoff?d.$A.Handoff:e===c.nT.Slides?d.$A.Slides:null}let m="recent-face-stamps-figjam",h="recent-whiteboard-tools-figjam";function _(e,r){if(e===d.$A.FigJam)switch(r){case l.bD.PLUGIN:return"recent-plugins-figjam";case l.bD.WIDGET:return"recent-widgets-figjam";case l.bD.HUB_FILE:return"recent-templates-figjam";case d.dB.FACE_STAMP:return m;case d.dB.WHITEBOARD_TOOL:return h;default:return null}if(e===d.$A.Design)switch(r){case l.bD.PLUGIN:return"recent-plugins-figma-design";case l.bD.WIDGET:return"recent-widgets-figma-design";default:return null}return e===d.$A.Handoff?r===l.bD.PLUGIN?"recent-plugins-handoff":null:e===d.$A.Slides&&r===l.bD.HUB_FILE?"recent-templates-piper":null}function g(e,r){if(!a.x4)return[];let n=[],i=_(e,r),o=i&&a.x4.getItem(i);try{n=o&&JSON.parse(o)||[]}catch(e){}return n.map(e=>({...e,type:e.type||d.vt.CommunityResource}))}function f(e){let r=(0,u.uF)(e),n=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:s.un.CREATOR}));return r.community_publishers=n,r}function E(e){switch(e.type){case d.vt.CommunityResource:return e.id;case d.vt.TeamTemplate:return e.key;default:(0,i.assertNever)(e)}}},496470:(e,r,n)=>{"use strict";n.d(r,{Aw:()=>C,XV:()=>S,v9:()=>N}),n(459401);var i=n(587670);n(86625);var a=n(89865),o=n.n(a),s=n(776250),l=n(374626),c=n(632430),d=n(44892),u=n(416095),p=n(237929),m=n(173454),h=n(809073),_=n(279145);n(510879);var g=n(811529);n(731262);var f=n(378905),E=n(696673),y=n(875847),b=n(335682),I=n(794488),T=n(113916);let v=e=>null==e||e.type===m.PW.STATE_GROUP?null:e?.containing_frame?.containingStateGroup?.nodeId||null;function S(e,r,n,i){if(!e)return{selectedItem:null,relatedItems:[]};let a=null,s={},c=(0,T.QL)(e,i);if(c){let{publishID:e,fileKey:i}=c;if((0,E.wJ)(i))return function(e,r){let n=l.zl.get(b.yV),i=l.zl.get(I.z),a=(0,y.T9)(n?.project),{hubFileIdToSubscribedItems:s}=(0,g.o6)(r,n,i,a),{publishID:c,fileKey:d}=e,u=s[d]??[];if(0===u.length)return{selectedItem:null,relatedItems:[]};let p=o()(u,e=>e.node_id),m=w(p[c],p),h=A(m,u);return{selectedItem:m,relatedItems:h}}(c,n);let p=r[i];if(p){let r=(0,u.j7)(n.published.components,p),i=(0,u.j7)(n.published.stateGroups,p);s={...(0,d.Jl)(r),...i},a=w(r[e]??i[e],s)}}else{s=(0,d.Qx)(n);let r=v(a=n.local.components[e]??n.local.stateGroups[e]);r&&(a=s[r])}let p=A(a,Object.values(s??{}));return{selectedItem:a,relatedItems:p}}function w(e,r){let n=v(e);return n?r[n]:e}function A(e,r){if(!e||!e.containing_frame?.nodeId&&1===(0,p.ke)(e.name).length)return[];let n=(0,p.In)(e.name);return r.filter(r=>(0,_.nJ)(r.containing_frame,e?.containing_frame)&&(0,p.In)(r.name)===n)}function N(e,r,n,a,o,l,d,u){if(e){if((0,f.TK)(e,n)){if(e.type===m.PW.COMPONENT){let r=e.node_id;i.glU.replaceSymbolBackingInstances({[r]:a},l)}else{let r=i.glU.getSimilarStates(a,e.node_id,"");i.glU.replaceSymbolBackingInstances(r,l)}(0,s.sx)("Instance Swapped To Local Component",{source:o,...d,queryId:u})}else r(c.uO({item:e,instanceGUIDs:a,sourceForTracking:o,storeInRecentsKey:h.$A.Design,usedSwapInstanceKeyboardShortcut:l,queryId:u??void 0}))}}function C(e){i.glU.replaceSymbolBackingInstances(e,!1)}},426197:(e,r,n)=>{"use strict";n.d(r,{$S:()=>A,Ef:()=>S,kF:()=>w,rq:()=>T});var i=n(776250),a=n(853828),o=n(27087),s=n(881388),l=n(939863),c=n(392592),d=n(980820),u=n(824520),p=n(662275),m=n(936500),h=n(988022),_=n(623746),g=n(643067),f=n(428467),E=n(668860),y=n(542059),b=n(265521),I=n(206193);let T=(0,d.nF)((e,{emails:r,resourceType:n,resourceIdOrKey:l,level:c,emailsToExclude:d,onSuccess:E,optimisticUpdates:b,onFailure:T,nodeId:v,source:w,initialView:A,orgName:N})=>{let C=e.getState().contacts,O={},L=[],R=r.filter(e=>!(d&&d.has(e)));for(let r of R){let i=C.usersByEmail[r],a={id:`temp-role-${r}`,created_at:Date.now(),user_id:null,user:{...i,email:r},resource_type:n,resource_id_or_key:l,level:c,pending:!0,updated_at:`${new Date}`};O[r]=a,L=[...L,a],e.dispatch(m.bE({role:a}))}b?.(L);let P=e.getState();if(P.currentUserOrgId){let e=P.autocomplete.inputValue,a=!!e&&!(0,g.H_)(P.orgDomains.domains,e),o=r.filter(r=>r!==e&&!(0,g.H_)(P.orgDomains.domains,r)),s={resourceType:n,resourceIdOrKey:l,level:c,orgId:P.currentUserOrgId,numInvited:r.length,numValidated:P.autocomplete.tokens.length,numUnvalidated:e?1:0,numValidatedGuests:o.length,numUnvalidatedGuests:a?1:0,initialView:A};"file"===n?(0,h.ds)("Invited Emails",l,P,s):(0,i.sx)("Invited Emails",{...s,source:w})}let D=o.Ay.post("/api/invites",{emails:r,resource_type:n,resource_id_or_key:l,level:c,node_id:v,initial_view:A}).then(({data:r})=>{for(let i of(e.dispatch(u.cL()),r.meta.invites))(0,h.z_)("Role Invite Sent",i,{level:i.level,resourceType:n,roleUserEmail:i.user?.email},{forwardToDatadog:!0}),e.dispatch(m.bE({role:i}));let i=!1,a=r.meta.invites_with_status;a&&(i=S(a,n,l,e.dispatch,O,N)),E?.(r.meta,i)},({response:i})=>{e.dispatch(u.cL());try{i=JSON.parse(i)}catch(e){console.error("Failed to parse invite response:",e),i={error:!0,reason:"json"}}if(i.error&&!i.message&&(i.message=`An error occurred while sending ${1===r.length?"this invite":"these invites"}.`),"NEEDS_PAYMENT"===i.reason){let r=null,a=e.getState(),o=(0,f.getRolesForResource)(n,l,a);if(o&&(r=(0,f.getResourceTeamId)(o[0],a)),null===r)e.dispatch(s.s.error(i.message));else{let n=r&&{...a.teams[r],canEdit:(0,f.hasEditorRoleAccessOnTeam)(r,a),canAdmin:(0,f.hasAdminRoleAccessOnTeam)(r,a)};e.dispatch(p.to({type:y.oE,data:{team:n,editorType:null,upsellSource:I.b.ADD_EDITOR}}))}}else e.dispatch(s.s.error(i.message));for(let r of R)e.dispatch(m.yH({role:O[r]}));T?.()}),k=(0,_.ZW)(n);k&&(0,a.WB)().optimisticallyCreate({[k]:(0,_.U5)(R.map(e=>({id:`temp-role-${e}`,createdAt:new Date,updatedAt:new Date,userId:null,pending:!0,resourceType:n,resourceId:l,level:c,pendingEmail:e,user:null})))},D)}),v=(e,r,n)=>{if(n)for(let i of e)r(m.yH({role:n[i.email]}))};function S(e,r,n,i,a,o){let c=e.reduce((e,r)=>(r.type&&(e[r.type]=e[r.type]||[],e[r.type].push(r)),e),Object.create(null)),d=Object.keys(c).length>0;return c.no_self_invite?.length>0&&i(s.s.error((0,l.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))),c.user_requires_approval?.length>0&&o&&(i(p.to({type:b.i8,data:{emails:c.user_requires_approval.map(e=>e.email),resourceType:r,resourceIdOrKey:n,popStack:!0,orgName:o}})),v(c.user_requires_approval,i,a)),c.org_guests_banned?.length>0&&o&&(i(p.to({type:b.aX,data:{emails:c.org_guests_banned.map(e=>e.email),resourceType:r,resourceIdOrKey:n,popStack:!0,orgName:o}})),v(c.org_guests_banned,i,a)),c.org_whitelist?.length>0&&o&&(i(p.to({type:b.vr,data:{emails:c.org_whitelist.map(e=>e.email),resourceType:r,resourceIdOrKey:n,popStack:!0,orgName:o}})),v(c.org_whitelist,i,a)),c.deprovisioned?.length>0&&o&&(i(p.to({type:b.Q$,data:{emails:c.deprovisioned.map(e=>e.email),resourceType:r,resourceIdOrKey:n,popStack:!0,orgName:o}})),v(c.deprovisioned,i,a)),c.org_restricted_invite?.length>0&&o&&(i(p.to({type:b.Pg,data:{emails:c.org_restricted_invite.map(e=>e.email),resourceType:r,resourceIdOrKey:n,popStack:!0,orgName:o}})),v(c.org_restricted_invite,i,a)),d}let w=(0,d.nF)((e,{invites:r,over_editor_limit:n,inviteLevel:i,file:a,folderName:o,seenPendingUserCommentVisualBell:s,isFigmaDesign:d,inOrg:u,userId:m})=>{let h=a&&o?`Moved '${a.name}' to ${o}`:void 0;if(i>=E.e6.EDITOR&&n){let n=e.getState(),i=(0,f.getResourceTeamId)(r[0],n),a=i&&{...n.teams[i],canEdit:(0,f.hasEditorRoleAccessOnTeam)(i,n),canAdmin:(0,f.hasAdminRoleAccessOnTeam)(i,n)};e.dispatch(p.to({type:y.oE,data:{team:a,invitesSent:r.length,editorType:null,upsellSource:I.b.ADD_EDITOR}})),h&&e.dispatch(c.F.enqueue({type:"file-moved",message:h}))}else i>=E.e6.EDITOR&&o&&a?h&&e.dispatch(c.F.enqueue({type:"file-moved",message:((e,r,n,i)=>{if(0===e.length)return i;let a=e.map(e=>e.user.email).filter(e=>void 0!==e);if(0===a.length)return i;let o=`been invited to edit '${r}' in ${n}`;return a.length>1?`${a[0]} and `+(a.length>2?`${a.length-1} others have `:"1 other has ")+o:`${a[0]} has ${o}`})(r,a.name,o,h)})):e.dispatch(c.F.enqueue({type:"invite-sent",message:(0,l.t)("file_permissions_modal.invite_sent_prefix")+(0,l.t)("file_permissions_modal.invite_sent",{num_invites:r.length})}))}),A=(0,d.nF)((e,{role:r})=>{let n=o.Ay.post("/api/invites/resend",{email:r.user.email,resource_type:r.resource_type,resource_id_or_key:r.resource_id_or_key}).then(()=>{e.dispatch(s.s.flash("Invite email sent again!"))});e.dispatch((0,s.Q)({promise:n,fallbackError:"Failed to resend invite emails."}))})},939562:(e,r,n)=>{"use strict";n.d(r,{wm:()=>a}),n(188507);var i=n(707458);let a=(0,n(38580).eU)(i.q.instance)},707465:(e,r,n)=>{"use strict";n.d(r,{$Z:()=>S,IE:()=>B,Iu:()=>U,K:()=>W,Np:()=>A,Tk:()=>x,U2:()=>H,YP:()=>M,bW:()=>D,s5:()=>G,vU:()=>F,xS:()=>w,yn:()=>k,zg:()=>V}),n(634832);var i=n(358204),a=n(966712),o=n(179940),s=n(687396),l=n(101231),c=n(31551),d=n(553492),u=n(687729),p=n(239671),m=n(567088),h=n(935938),_=n(124780),g=n(338880),f=n(507956),E=n(290806),y=n(799507),b=n(846456),I=n(150448),T=n(879408),v=n(935757);let S=new u.k([new s.$T,new T.f,new f.YY,new b.a,new l.m,new _.B,new c.G,new d._,new y.N,new E.u,new I.P,new g.i]);function w(e,r){return new URL(A(e,r),document.baseURI).href}function A(e,r){return S.selectedViewToPath(r,e)}let N=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(s.nw),C=RegExp(`^/files/([0-9]+)/(?:${N.join("|")})(.*)$`),O=RegExp("^/files/([0-9]+)/?$"),L=RegExp(`^/files/team/([0-9]+)/(?:${N.join("|")})(.*)$`),R=(e,r,n)=>{let i=e.split("/");return!i[1]||"files"!==i[1]||(0,a.kc)().ps_benchmark&&6===i.length&&"files"===i[1]&&"team"===i[2]&&"restore"===i[5]||(e.match(C)?i.splice(2,1):e.match(L)?i.splice(2,2):(i.length>=3&&r&&i[2]===r&&i.splice(2,1),i.length>=3&&n&&i[3]===n&&i.splice(2,2))),i},P=(e,r)=>{let n=e.split("/");return n[1]&&"files"===n[1]&&(e.match(C)?n.splice(2,1):n.length>=3&&r&&n[2]===r&&n.splice(2,1)),n};function D(e){let r=e.match(C);if(r)return r[1];let n=e.match(O);return n?n[1]:null}function k(e){let r=e.match(L);return r?r[1]:null}function M(e){let r=P(e,(0,v.pk)());return""===r[r.length-1]&&r.splice(r.length-1,1),r}function F(e,r,n,i){let s=[],l=(0,a.kc)().dev_mode_suggested_upgrades&&n&&!!(0,o.qg)(n).devModeSuggestions,c=n&&!!(0,o.qg)(n).dashDeepLink;return(0,a.kc)().ps_benchmark?s=R(r,e.currentUserOrgId,e.currentTeamId):l||c?(s=R(r,e.currentUserOrgId,e.currentTeamId),r.match(L)&&(s[3]=P(r,e.currentUserOrgId)[3])):s=P(r,e.currentUserOrgId),""===s[s.length-1]&&s.splice(s.length-1,1),S.pathToSelectedView(e,s,n,i)||{view:"recentFiles"}}function x(e,r,n,i,a){if(r===i&&n===a)return e;let o=r===m.O.ORG?n:`team/${n}`,s=i===m.O.ORG?a:`team/${a}`;return e.replace(o,s)}function U(e,r){return S.selectedViewName(r,e)}function B(e){let r=e.modalShown;for(;r;){if("ACCOUNT_SETTINGS_MODAL"===r.type)return!0;r=r.prevModal}return!1}function V(e){return"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&e.editorType===p.nT.Whiteboard&&new Date<e.workshopModeInfo.until||!1}function G(e){return"fullscreen"===e.view&&e.nodeId||null}function H(e){switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return e.file?.key||null;case"prototype":return null==e.file&&i.ZQ({data:{selectedView:e}}),e.file.key;default:return null}}function W(e){return"recentFiles"===e.view||"recentsAndSharing"===e.view&&e.tab===h.G.RECENTLY_VIEWED}},416822:(e,r,n)=>{"use strict";n.d(r,{j:()=>s,q:()=>l});var i=n(188507),a=n(966712),o=n(628705);function s(e){let{currentUserOrgId:r}=e;return r?`/${r}`:(0,a.kc)().ps_benchmark?(0,o.i)(e):""}function l(){return(0,i.d4)(s)}},793485:(e,r,n)=>{"use strict";n.d(r,{Z:()=>f});var i=n(730371),a=n(587670),o=n(118615),s=n(38580),l=n(374626),c=n(456363),d=n(293017),u=n(626783),p=n(259927),m=n(416095),h=n(484892),_=n(179243);let g=(0,s.eU)({});class f{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,r,n,i,a,o,s,l,c,u){this.dispatch(d.Gm({color:e,width:r,height:n,rgba:i,grid:a,cursorPosition:o,assetId:s,variableSetModeId:l,resolvedVariableColor:c,dropperData:u}))}hideEyedropper(){this.dispatch(d.Gm(null))}getColorFromNativeEyeDropper(){return window.EyeDropper?new EyeDropper().open().then(({sRGBHex:e})=>e):Promise.reject()}updateSelectionImages(e){let r=l.zl.get(g),n=Object.keys(e).length!==Object.keys(r).length;if(!n){for(let i in r)if(!e[i]){n=!0;break}}n&&l.zl.set(g,e)}updateSelectionPaintsWithFillEncodedPaints(e,r,n,a,o,s){let l=(0,h.S)(e,r,n,a,o),c=this.store.getState().mirror.selectionPaints;(!(0,i.deepEquals)(c.paints,l)||c.emptyDueToLimitExceeded||s)&&(this.store.dispatch(u.QA(l)),s&&this.store.dispatch(u.Xp(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,r){var n=[];for(let r of e){let e=(0,h.K)(r);e?n.push(e):console.error(`Failed to decode: ${r}`)}n=n.map((e,n)=>(e.variableScopes=new Set(r?r[n]:[]),e));let a=this.store.getState().mirror.selectionPaints;(!(0,i.deepEquals)(a.paintsDirectlyOnSingleNode,n)||a.emptyDueToLimitExceeded)&&this.store.dispatch(u.n0(n))}updatePaintStyles(e,r,n){let a=this.store.getState().library,o=this.store.getState().mirror.sceneGraph,s=r.map(e=>{let r=(0,m.Gp)(e.key,e.guids,a);return r?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,m.uH)(r,o),variableScopes:new Set(e.variableScopes)}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes)}});s.sort((e,r)=>e.count>r.count?-1:e.count===r.count&&e.styleName<r.styleName?-1:1),(!(0,i.deepEquals)(e,s)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(n(s))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,u.Lh)}updateSelectionTextAndEffectStyles(e){c.gq.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,u.uQ)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(u.Mc())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){c.gq.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let r=this.store.getState().currentSelectionPaintInPicker;if(null==r.originalPaint)return!1;let n=(0,h.K)(e);return null==n?(console.error(`Failed to apply paint: ${e}`),!1):(a.Osy.updatePaint((0,o.GP)(r.originalPaint),e,!0,null),this.store.dispatch(u.oI({...r,updatedPaintFromDropper:n.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,o.GP)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;if(e.isShown&&e.resolvedType===a.rXF.COLOR&&"variable-picker-alias"===e.type)return{varId:e.variableID,modeId:e.modeID};let r=this.store.getState().pickerShown?.id,n=r?.startsWith(p.Yr),i=l.zl.get(_.E_);return n&&i?i:{}}isPrototypingModalOpen(){return this.store.getState().pickerShown?.id===p.o$}}},435011:(e,r,n)=>{"use strict";n.d(r,{hK:()=>s});var i=n(302245),a=n(609822),o=n(352898);let s=e=>e.selectedView;(0,i.Mz)(s,e=>"workspace"===e.view&&e.subView===o.V0.DIRECTORY?e.workspaceId:void 0);let l=(0,i.Mz)(s,e=>"team"===e.view?e.teamId:void 0),c=(0,i.Mz)(s,e=>"folder"===e.view?e.folderId:void 0),d=(0,i.Mz)(s,e=>e.currentTeamId,(e,r)=>"allProjects"===e.view?r:void 0),u=(0,i.Mz)(l,d,e=>e.teams,(e,r,n)=>e&&n[e]||r&&n[r]),p=(0,i.Mz)(c,e=>e.folders,(e,r)=>e&&r[e]),m=(0,i.Mz)(p,a.D,(e,r)=>e&&e.id!==r?e:void 0);(0,i.Mz)(u,m,(e,r)=>e||r)},284321:(e,r,n)=>{"use strict";n.d(r,{AC:()=>tn,Dc:()=>e$,F9:()=>z,FZ:()=>ed,GS:()=>eI,Io:()=>D,JI:()=>eJ,Kb:()=>tt,LD:()=>ey,Ln:()=>P,MH:()=>ee,MW:()=>eM,Mh:()=>M,Pd:()=>F,Pg:()=>V,Wz:()=>ea,bd:()=>eL,bh:()=>ei,cM:()=>q,dM:()=>et,dU:()=>eb,e_:()=>R,fA:()=>eY,h3:()=>ec,ju:()=>eF,oB:()=>eX,pR:()=>tr,tK:()=>er,x6:()=>el});var i=n(459401),a=n(587670),o=n(593779),s=n(636149),l=n.n(s),c=n(89865),d=n.n(c),u=n(595977),p=n.n(u),m=n(35645),h=n.n(m),_=n(802691),g=n.n(_),f=n(302245),E=n(966712),y=n(951158),b=n(97395),I=n(154483),T=n(875847),v=n(335682),S=n(416095),w=n(243987),A=n(49116),N=n(173454),C=n(279145),O=n(234945),L=n(693223);let R=e=>e.library,P=e=>e.library.libraryRemapping,D=e=>e.library.libraryPublishingMode,k=e=>e.openFile?.publishedHubFile,M=e=>e.library.openHubFilePublished__LIVEGRAPH.components,F=e=>e.library.openHubFilePublished__LIVEGRAPH.stateGroups,x=e=>e.library.openHubFilePublished__LIVEGRAPH.styles,U=e=>e.library.openHubFilePublished__LIVEGRAPH.variables,B=e=>e.library.openHubFilePublished__LIVEGRAPH.variableSets,V=(0,f.Mz)([M,x,U,B,F],(e,r,n,i,a)=>!(0,y.Im)(e)||!(0,y.Im)(r)||!(0,y.Im)(n)||!(0,y.Im)(i)||!(0,y.Im)(a)),G=(0,f.Mz)([v.sS,A.V2],(e,r)=>e&&r[e]||{}),H=(0,f.Mz)([v.sS,A.Wg],(e,r)=>e&&r[e]||{}),W=e=>e.library.local.thumbnails,K=e=>e.library.openFilePublished__LIVEGRAPH.styles,j=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,z=(0,f.Mz)([G,K,j],(e,r,n)=>!(0,y.Im)(r)||!(0,y.Im)(e)||!(0,y.Im)(n)),Y=(0,f.Mz)([e=>e.library.local.styles,v.sS,D,e=>e.library.publishableStyles,x,k,W],(e,r,n,i,a,s,l)=>{if(n===N.o.HUBFILE&&s){let n=(0,o.l)(s.libraryKey),{newLocal:c}=(0,S.rC)(S.w8,i,a,e,l,{},r||"",n,new Set,N.PW.STYLE);return c}return e}),$=(0,f.Mz)([K,x,D],(e,r,n)=>n===N.o.HUBFILE?r:e),q=(0,f.Mz)([Y,$],(e,r)=>{if(!(0,E.kc)().ds_remove_redux_library_status)return e;let n={};for(let i of Object.values(e)){let e=ev(i,r[i.node_id],ew);n[i.node_id]={...i,status:e}}return n}),Z=(0,f.Mz)([e=>e.library.local.components,v.sS,D,M,k,e=>e.library.publishableSymbols,W],(e,r,n,i,a,s,l)=>{if(n===N.o.HUBFILE&&a){let n=(0,o.l)(a.libraryKey),{newLocal:c}=(0,S.rC)(S.i_,s,i,e,l,{},r||"",n,new Set,N.PW.COMPONENT);return c}return e}),X=(0,f.Mz)([G,M,D],(e,r,n)=>n===N.o.HUBFILE?r:e),J=(0,f.Mz)([function(e){return e.library.local.stateGroups},v.sS,D,F,k,e=>e.library.publishableStateGroups,W],(e,r,n,i,a,s,l)=>{if(n===N.o.HUBFILE&&a){let n=(0,o.l)(a.libraryKey),{newLocal:c}=(0,S.rC)(S.LB,s,i,e,l,{},r||"",n,new Set,N.PW.STATE_GROUP);return c}return e}),Q=(0,f.Mz)([H,F,D],(e,r,n)=>n===N.o.HUBFILE?r:e),ee=(0,f.Mz)([Z,X,J,Q],(e,r,n,i)=>{if(!(0,E.kc)().ds_remove_redux_library_status)return e;let a={},o=(e,r)=>{if(r?.content_hash!==e.content_hash||!(0,C.pD)(r.name,e?.name)||!(0,C.pD)(r.description,e.description)||(0,C.Q_)(r.containing_frame,e?.containing_frame))return!0;let a=(0,S.E2)(e),o=a&&n[a]||null,s=(0,S.E2)(r),l=s&&i[s]||null;return o?!l||eA(o,l):null!=l};for(let n of Object.values(e)){let e=ev(n,r[n.node_id],o);a[n.node_id]={...n,status:e}}return a}),et=(0,f.Mz)([J,Q],(e,r)=>{if(!(0,E.kc)().ds_remove_redux_library_status)return e;let n={};for(let i of Object.values(e)){let e=ev(i,r[i.node_id],eA);n[i.node_id]={...i,status:e}}return n}),er=(0,b.P8)([e=>{let r={};return Object.entries(e.library.localVariablesById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},e=>e.library.openFilePublished__LIVEGRAPH.variables,v.tB,D,k,U],(e,r,n,i,a,s)=>{let l={},c=i===N.o.HUBFILE&&a?s:r,d=n?.key??"",u=i===N.o.HUBFILE&&a?(0,o.l)(a.libraryKey):(0,o.l)(n?.libraryKey??"");for(let[r,n]of Object.entries(c))e.hasOwnProperty(r)||(l[r]={...n,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},keyForPublish:n.key,status:N.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:d,file_key_source:I.Ps.LOCAL_FILE,library_key:u,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=c[r.node_id],n=ev(r,e,eN);l[r.node_id]={...r,status:n,file_key:d,file_key_source:I.Ps.LOCAL_FILE,library_key:u,key:e?.key,hasOnlyBeenReordered:r&&e&&r.version===e.version&&r.sortPosition!==e.sortPosition}}return l}),en=(0,f.Mz)([er],e=>l()(Object.values(e),e=>e.variableSetId)),ei=(0,b.P8)([e=>{let r={};return Object.entries(e.library.localVariableSetsById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},j,en,v.tB,D,k,B],(e,r,n,i,s,l,c)=>{let d=s===N.o.HUBFILE&&l?c:r,u=i?.key??"",p=s===N.o.HUBFILE&&l?(0,o.l)(l.libraryKey):(0,o.l)(i?.libraryKey??""),m={};for(let[r,n]of Object.entries(d))e.hasOwnProperty(r)||(m[r]={...n,subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:n.key,status:N.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:u,file_key_source:I.Ps.LOCAL_FILE,library_key:p,variableSetError:a.HG$.NONE});for(let r of Object.values(e)){let e=d[r.node_id],i=function(e,r,n){let i=ev(e,r,eC);if(i!==N.E8.CURRENT)return i;for(let e of n)if(e.status!==N.E8.CURRENT&&e.status!==N.E8.NOT_STAGED)return N.E8.CHANGED;return N.E8.CURRENT}(r,e,n[r.node_id]??[]);m[r.node_id]={...r,status:i,file_key:u,file_key_source:I.Ps.LOCAL_FILE,library_key:p,key:e?.key}}return m}),ea=(0,f.Mz)([ee],e=>{let r={};for(let n of Object.values(e)){let e=(0,S.E2)(n);null!=e&&(r[e]=r[e]??[],r[e].push(n))}return r}),eo=(0,f.Mz)([ee],e=>g()(e,e=>!(0,S.ad)(e)));function es(e,r){return!!r&&!(r.version===e.version&&(0,C.pD)(r.name,e?.name)&&(0,C.pD)(r.description,e.description))}(0,b.P8)([q],e=>Object.values(e).map(e=>e.key)),(0,b.P8)([q],e=>d()(Object.values(e),"key"));let el=(0,f.Mz)([e=>e.library.local.modules,e=>e.library.openFilePublished__LIVEGRAPH.modules,e=>e.library.openHubFilePublished__LIVEGRAPH.modules,k,D],(e,r,n,i,a)=>{if(!(0,E.kc)().dse_module_publish)return{};let o={};if(a===N.o.HUBFILE&&i)for(let[r,i]of Object.entries(n))Object.keys(e).includes(r)||(o[r]={...i,status:N.E8.DELETED,deletedFromSceneGraph:!0});for(let n of Object.values(e)){let e=ev(n,r[n.node_id],es);o[n.node_id]={...n,status:e}}return o}),ec=(0,f.Mz)([el],e=>(0,E.kc)().dse_editor_templates_v1?Object.fromEntries(Object.entries(e).filter(([,e])=>e.moduleSource===a.QjO.EDITOR_TEMPLATE)):{}),ed=(0,f.Mz)([eo,et],(e,r)=>({...e,...r}));(0,f.Mz)([ed],e=>Object.values(e).filter(e=>(0,S.HF)(e.status)));let eu=(0,f.Mz)([ed],e=>p()(e,e=>(0,S.CG)(e))),ep=(0,f.Mz)([ed],e=>Object.values(e).some(e=>(0,S.HF)(e.status))),em=(0,f.Mz)([el],e=>Object.values(e).some(e=>(0,S.HF)(e.status)));(0,f.Mz)([ep,em],(e,r)=>e||r);let eh=(0,f.Mz)([ed,O.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),e_=(0,f.Mz)([el,O.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eg=(0,f.Mz)([q,ed,ei,el],(e,r,n,i)=>Object.keys(e).length>0||Object.keys(r).length>0||Object.keys(n).length>0||Object.keys(i).length>0),ef=(e,r)=>null!=e.status&&(!!(0,S.lg)(e.status)||!!(0,S.Hb)(e.status)&&(r?r.has(e.node_id):!!e.old_key)),eE=(e,r)=>ef(e,r)&&(0,S.HF)(e.status),ey=(0,f.Mz)([e=>e.userStateLoaded,e=>e.openFile,z,eg],(e,r,n,i)=>!e||!r?.canEdit||!n&&!i),eb=(0,f.Mz)([ee,et,q,(e,r)=>r],eT),eI=(0,f.Mz)([ee,et,q],(e,r,n)=>eT(e,r,n,void 0));function eT(e,r,n,i){let a={...e,...r,...n},o=new Set(i?Object.keys(i).filter(e=>"FORCED_COPY"!==i[e].publishType):Object.values(a).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(o).map(r=>e[r]&&(0,S.E2)(e[r])).filter(e=>!!e).forEach(e=>{o.add(e)}),o}let ev=(e,r,n)=>{let i=r&&null==r.unpublished_at,a="isSoftDeleted"in e&&e.isSoftDeleted,o=!!e.isPublishable&&!a;return i&&!o?N.E8.DELETED:!i&&o?N.E8.NEW:i||o?n(e,r)?N.E8.CHANGED:N.E8.CURRENT:N.E8.NOT_STAGED},eS=(e,r)=>!(r&&r.content_hash===e?.content_hash&&(0,C.pD)(r.name,e.name)&&(0,C.pD)(r.description,e.description)),ew=(e,r)=>eS(e,r)||!(0,C.pD)(r.sort_position,e.sort_position),eA=(e,r)=>!(r&&r.version===e.version&&!(0,C.Q_)(r.containing_frame,e?.containing_frame)&&(0,C.pD)(r.name,e?.name)&&(0,C.pD)(r.description,e.description)),eN=(e,r)=>!e||!r||r.version!==e.version||r.sortPosition!==e.sortPosition,eC=(e,r)=>!(r&&r.version===e?.version);(0,b.P8)([q,K],(e,r)=>{let n=new Set;for(let i of Object.values(e)){let e=r[i.node_id],a=e&&null==e.unpublished_at,o=!!i.isPublishable;a&&o&&!eS(i,e)&&!(0,C.pD)(e.sort_position,i.sort_position)&&n.add(i.node_id)}return n});let eO=(e,r,n,a)=>{let[o,s]=h()(r,r=>ef(r,e)),[l,c]=h()(o,n),[d,u]=h()(s,e=>(0,S.HF)(e.status));return{modified:{erroneous:(0,i.sortBy)(l,...a),wellFormed:(0,i.sortBy)(c,...a)},unmodified:{published:(0,i.sortBy)(d,...a),unpublished:(0,i.sortBy)(u,...a)}}};function eL(e,r){return null==r?eP(e):eR(e,r)}let eR=(0,f.Mz)([q,ee,et,ed,ei,er,el,eb,(e,r)=>r],eD),eP=(0,f.Mz)([q,ee,et,ed,ei,er,el,eI],(e,r,n,i,a,o,s,l)=>eD(e,r,n,i,a,o,s,l,void 0));function eD(e,r,n,i,a,o,s,l,c){let d=(e,r)=>{if(!c)return 0;let n=c[e.node_id],i=c[r.node_id];return n&&i?"FORCED_COPY"===n.publishType&&"FORCED_COPY"!==i.publishType?1:"FORCED_COPY"!==n.publishType&&"FORCED_COPY"===i.publishType?-1:0:0},u=[...new Set(Object.values(o).filter(e=>!e.isPublishable).map(e=>e.variableSetId))].map(e=>a[e]).filter(e=>!!e);return{styles:eO(l,Object.values(e),()=>!1,[S.Lk,d]),components:eO(l,Object.values(r),S.zE,[S.gA,d]),stateGroups:eO(l,Object.values(n),S.zE,[S.gA,d]),productComponents:eO(l,Object.values(i),S.zE,[S.gA,d]),variableSets:eO(l,(0,E.kc)().ds_variables_extended_sets?Object.values(a):Object.values(a).filter(e=>!(0,N.GI)(e)),S.RQ,[S.MA]),variableSetsWithHiddenVariables:eO(l,u,()=>!1,[S.MA]),variables:eO(l,Object.values(o),()=>!1,[S.MA]),modules:eO(l,(0,E.kc)().dse_module_publish?Object.values(s):[],()=>!1,[S.gA])}}let ek=(0,b.P8)([en],e=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,eO(new Set,r,()=>!1,[S.MA])]))),eM=()=>(0,b.P8)([ek,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.modified.wellFormed:[]}),eF=()=>(0,b.P8)([ek,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),ex=(0,f.Mz)([eL],e=>e.styles.modified.wellFormed),eU=(0,f.Mz)([q],e=>Object.values(e).filter(e=>eE(e))),eB=(0,f.Mz)([eL],e=>e.components.modified.wellFormed),eV=(0,f.Mz)([eL],e=>e.stateGroups.modified.wellFormed),eG=(0,f.Mz)([eL],e=>e.productComponents.modified.wellFormed),eH=(0,f.Mz)([eG],e=>e.filter(e=>(0,S.HF)(e.status))),eW=(0,f.Mz)([eL],e=>e.variableSets.modified.wellFormed),eK=(0,f.Mz)([eW],e=>e.filter(e=>(0,S.HF)(e.status))),ej=(0,f.Mz)([eL],e=>(0,E.kc)().dse_module_publish?e.modules.modified.wellFormed:[]),ez=(0,f.Mz)([ej],e=>e.filter(e=>(0,S.HF)(e.status))),eY=(0,f.Mz)([v.tB,L.P],(e,r)=>!!((0,E.kc)().cmty_lib_admin_publish&&e?.publishedHubFile)||!((0,E.kc)().ps_benchmark&&(0,T.jd)(e?.project))&&!!(e&&(0,w.w5)(e.teamId?r[e.teamId]:null))),e$=ex,eq=(0,f.Mz)([e$],e=>e.length>0),eZ=(0,f.Mz)([eU],e=>e.length>0),eX=(0,f.Mz)([eB,eY],(e,r)=>r?e:[]),eJ=(0,f.Mz)([eV,eY],(e,r)=>r?e:[]),eQ=(0,f.Mz)([eG,eY],(e,r)=>r?e:[]),e0=(0,f.Mz)([eQ],e=>e.length>0),e1=(0,f.Mz)([eH,eY],(e,r)=>r?e:[]),e2=(0,f.Mz)([e1],e=>e.length>0),e3=(0,f.Mz)([eW],e=>e),e6=(0,f.Mz)([e3],e=>e.length>0),e8=(0,f.Mz)([eK],e=>e),e5=(0,f.Mz)([e8],e=>e.length>0),e7=(0,f.Mz)([ej,eY],(e,r)=>r?e:[]),e4=(0,f.Mz)([e7],e=>e.length>0),e9=(0,f.Mz)([ez],e=>e.length>0),te=(0,f.Mz)([e$,eQ,e3,e7],(e,r,n,i)=>[...e,...r,...n,...i]),tt=(0,f.Mz)([te],e=>e.map(e=>e.node_id)),tr=(0,f.Mz)([eq,e0,e6,e4],(e,r,n,i)=>e||r||n||i);(0,f.Mz)([eZ,e2,e5,e9],(e,r,n,i)=>e||r||n||i),(0,f.Mz)([eh,eQ],(e,r)=>r.some(r=>e[r.node_id])),(0,f.Mz)([e_,e7],(e,r)=>r.some(r=>e[r.node_id])),(0,f.Mz)([eu,A.c5],(e,r)=>({...r,...e}));let tn=(0,f.Mz)([e7],e=>e.map(e=>e.node_id))},57392:(e,r,n)=>{"use strict";n.d(r,{Bw:()=>Y,S9:()=>X,WE:()=>ea,WJ:()=>et,Yy:()=>z,bA:()=>Q,cb:()=>en,ij:()=>V,j_:()=>q,jk:()=>Z,lm:()=>U,mO:()=>$,nm:()=>eo,pk:()=>er,t_:()=>ei,wy:()=>es});var i=n(215122),a=n(587670),o=n(534611),s=n(695956),l=n.n(s),c=n(302245),d=n(966712),u=n(374626),p=n(38580),m=n(288706),h=n(97395),_=n(776621),g=n(154483),f=n(974105),E=n(857766),y=n(848661),b=n(529928),I=n(416095),T=n(173454),v=n(950919),S=n(49116),w=n(234945),A=n(388094),N=n(207584);function C(e,r,n,a,o){let s=Object.create(null);for(let{key:r,version:i}of e)if(r){if(r in n){let e=r;r=n[r],i=o?.[e]===i?i:"FAKE_VERSION_FOR_MOVED_ITEM"}s[r]=s[r]||new Set,s[r].add(i)}for(let e of r)if(e in a){let r=a[e];s[r]=s[r]||new Set,s[r].add((0,i.Xf)("FAKE_VERSION_FOR_MOVED_ITEM"))}return s}let O=(0,c.Mz)([A._Q,w.O1,v.aR,v.BE,e=>{let{styles:r,destinationStyleKeyToLegacySourceStyle:n}=e.library.used__LIVEGRAPH;return Object.values(r).reduce((e,r)=>{if("loaded"!==r.status||!n[r.data.key])return e;let{key:i,version:a}=n[r.data.key];return e[i]=a,e},Object.create(null))}],C),L=(0,c.Mz)([A.m0,w.T_,v.aR,v.BE],C),R=(0,c.Mz)([A.v3],e=>C(e,[],{},{})),P=(0,c.Mz)([A.Du],e=>Object.values(e).reduce((e,r)=>(e.has(r.key)||e.set(r.key,new Set),r.pageIds.forEach(n=>e.get(r.key)?.add(n)),e),new Map));function D(e,r,n){if(0===e.size)return!1;if(1===e.size){let i=Array.from(e)[0],a=n(r);return a?.toLowerCase()!==i.toLowerCase()}return!0}let k=(0,g.fv)();function M({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:a,getUpdateAsset:o}){let s=[];for(let l of Object.keys(r)){let c=e[(0,i.sg)(l)];!(!c||n&&(0,E.dp)(n,k(c)))&&D(r[(0,i.sg)(l)],c,a)&&s.push(o(c))}return s}let F=(0,c.Mz)([N.wi,O,f.d1,v.uB,v.tp,v.J8,A.tY,w.tX],(e,r,n,i,a,o,s,l)=>{let c=!1,d=[],u=!1;return{styleUpdatesForAllPages:M({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in i&&(r.oldSubscribedKeysToUpdate=Array.from(i[e.key]),!o[e.key]))for(let e of(c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(u=!0);if(e.key in a){for(let n of(r.localIdsToUpdate=Array.from(a[e.key]),o[e.key]||(c=!0),r.localIdsToUpdate))if(l.has(n)){u=!0;break}}return(s.has(e.key)||r.oldSubscribedKeysToUpdate.some(e=>s.has(e))||r.localIdsToUpdate.some(e=>l.has(e)))&&d.push(r),r}}),styleUpdatesForCurrentPage:d,includesMoveUpdatesOnAnyPage:c,includesMoveUpdatesOnCurrentPage:u}}),x=(0,h.P8)([S.Ls,L],(e,r)=>{let n=Object.keys(r),i=Object.keys(e);return l()(n,i)}),U=(0,c.Mz)([x,S.m3,A.S_,w.dK],(e,r,n,i)=>{let a=new Map;if((0,d.kc)().ds_reset_deleted_state_default)for(let o of e){let e=n[o];if(!e)continue;let s=i.get(e.nodeId),l=s?.parentNode;if(s&&l&&s.isState&&l?.stateGroupKey){let e=r[l.stateGroupKey];e&&a.set(o,e)}}return a}),B=(0,g.fv)(),V=(0,c.Mz)([S.Ls,S.Wg,L,f.d1,v.uB,v.tp,A.ty,w.BA],(e,r,n,i,a,o,s,l)=>{let c=!1,d=!1,u=M({publishedAssetsByKey:e,usedVersionsByAssetKey:n,editingFile:i,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},n=e.component_key;if(n in a)for(let e of(r.oldSubscribedKeysToUpdate=Array.from(a[n]),c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(d=!0);if(n in o){for(let e of(r.localIdsToUpdate=Array.from(o[n]),c=!0,r.localIdsToUpdate))if(l.has(e)){d=!0;break}}return r}}),p=[],m=[],h=[],_=[],g=new Set;for(let e of u){let n=e.containing_frame?.containingStateGroup?.nodeId;if(n){let i=r[B(e)]?.[n];if(i){let r=h.find(e=>e.key===i.key);if(null==r&&(r={...i,newStateKeyToOutdatedItems:{}},h.push(r)),e.component_key){let n=e.component_key;r.newStateKeyToOutdatedItems[n]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!g.has(i.key)&&(_.push(r),g.add(i.key))}}}else p.push(e),(e.component_key&&s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&m.push(e)}return{componentUpdatesForAllPages:p,stateGroupUpdatesForAllPages:h,includesMoveUpdatesOnAnyPage:c,componentUpdatesForCurrentPage:m,stateGroupUpdatesForCurrentPage:_,includesMoveUpdatesOnCurrentPage:d}}),G=(0,g.fv)(),H=(0,c.Mz)([S.a3,S.gJ,R,f.d1,P,e=>e.mirror.appModel.currentPage],(e,r,n,o,s,l)=>{let c={},d=new Set,u=a.glU?.getInternalCanvasNodeId();for(let a of Object.keys(n)){let p=e[(0,i.ey)(a)];if(!p||o&&(0,E.dp)(o,G(p)))continue;let m=r[(0,i.yG)(p.variableCollectionKey)];if(!m)continue;let h=c[(0,i.yG)(p.variableCollectionKey)]||{...m,libraryVariableIdsForUpdate:[]};if((0,T.GI)(h)){(0,_.x1)("variables","Encountered variable bound to variable set extension");continue}let g=n[p.key];if(g&&D(g,p,e=>e.version)&&h.libraryVariableIdsForUpdate.push(p.node_id),h.libraryVariableIdsForUpdate.length>0&&(c[(0,i.yG)(m.key)]=h,s.has(m.key))){let e=s.get(m.key);(e?.has(l)||u&&e?.has(u))&&d.add(m.key)}}let p=Object.values(c),m=p.filter(e=>d.has(e.key));return{variableSetUpdatesForAllPages:p,variableSetUpdatesForCurrentPage:m}}),W=(0,b.bt)(V),K=(0,b.bt)(F),j=(0,b.bt)(H),z=(0,u.Iz)(e=>(0,p.eU)(r=>{let{componentUpdatesForAllPages:n,componentUpdatesForCurrentPage:i}=r(W);return e===I.aD.ALL?n:i})),Y=(0,u.Iz)(e=>(0,p.eU)(r=>{let{stateGroupUpdatesForAllPages:n,stateGroupUpdatesForCurrentPage:i}=r(W);return e===I.aD.ALL?n:i})),$=(0,u.Iz)(e=>(0,p.eU)(r=>{let{styleUpdatesForAllPages:n,styleUpdatesForCurrentPage:i}=r(K);return e===I.aD.ALL?n:i})),q=(0,m.mg)(K,e=>e.styleUpdatesForAllPages),Z=(0,u.Iz)(e=>(0,p.eU)(r=>{let{variableSetUpdatesForAllPages:n,variableSetUpdatesForCurrentPage:i}=r(j);return e===I.aD.ALL?n:i})),X=(0,p.eU)(e=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,includesMoveUpdatesOnAnyPage:i}=e(W),{styleUpdatesForAllPages:a,includesMoveUpdatesOnAnyPage:o}=e(K),{variableSetUpdatesForAllPages:s}=e(j);return{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:a,variableSetUpdatesForAllPages:s,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:i}}),J=(0,p.eU)(e=>{let{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,includesMoveUpdatesOnCurrentPage:i}=e(W),{styleUpdatesForCurrentPage:a,includesMoveUpdatesOnCurrentPage:o}=e(K),{variableSetUpdatesForCurrentPage:s}=e(j);return{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,styleUpdatesForCurrentPage:a,variableSetUpdatesForCurrentPage:s,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:i}}),Q=(0,u.Iz)(e=>(0,p.eU)(r=>{let{componentUpdatesForAllPages:n,stateGroupUpdatesForAllPages:i,styleUpdatesForAllPages:a,variableSetUpdatesForAllPages:o}=r(X),{componentUpdatesForCurrentPage:s,stateGroupUpdatesForCurrentPage:l,styleUpdatesForCurrentPage:c,variableSetUpdatesForCurrentPage:d}=r(J);return e===I.aD.ALL?{scopedComponentUpdates:n,scopedStateGroupUpdates:i,scopedStyleUpdates:a,scopedVariableSetUpdates:o}:{scopedComponentUpdates:s,scopedStateGroupUpdates:l,scopedStyleUpdates:c,scopedVariableSetUpdates:d}})),ee=(0,m.mg)(X,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:i,includesMoveStyleUpdatesOnAnyPage:a,includesMoveComponentUpdatesOnAnyPage:o})=>{let s=e.length+r.length+n.length+i.length;return{updateCount:s,hasUpdates:s>0,includesMoveStyleUpdatesOnAnyPage:a,includesMoveComponentUpdatesOnAnyPage:o}}),et=(0,m.mg)(J,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:i,includesMoveStyleUpdatesOnCurrentPage:a,includesMoveComponentUpdatesOnCurrentPage:o})=>{let s=e.length+r.length+n.length+i.length;return{updateCount:s,hasUpdates:s>0,includesMoveStyleUpdatesOnCurrentPage:a,includesMoveComponentUpdatesOnCurrentPage:o}});(0,m.mg)(ee,({hasUpdates:e})=>e),(0,m.mg)(et,({hasUpdates:e})=>e);let er=(0,u.Iz)(e=>(0,p.eU)(r=>r(e===I.aD.ALL?ee:et).hasUpdates)),en=(0,m.mg)(ee,({updateCount:e})=>e);(0,m.mg)(et,({updateCount:e})=>e);let ei=(0,u.p6)([X],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:i})=>({componentUpdateKeys:(0,I.X7)(e),stateGroupUpdateKeys:(0,I.X7)(r),styleUpdateKeys:(0,I.X7)(n),variableSetKeys:(0,I.X7)(i)})),ea=(0,b.bt)(e=>e.library.libraryUpdatesBannerDismissed);function eo(e,r){let n=(0,w.dK)(e).get((0,o.dI)(y.E7(r)?.guid)??o.AD);if(!n)return null;let i=n.guid,a=n.styleKey,s=n.styleVersionHash;return a&&s?{GUID:i,key:a,version:s,isLocalStyle:n.isLocalStyle}:null}let es=(0,p.eU)(!1)},950919:(e,r,n)=>{"use strict";n.d(r,{BE:()=>u,J8:()=>_,Q$:()=>g,aR:()=>d,tp:()=>h,uB:()=>m});var i=n(215122),a=n(302245),o=n(97395),s=n(529928),l=n(207584);let c=e=>e.library.movedLibraryItems,d=(0,a.Mz)([(0,o.Vh)(c,e=>e.subscribed),l.og],(e,r)=>({...e,...r})),u=(0,a.Mz)([c,l.KM],(e,r)=>({...e.local,...r}));function p(e){let r=Object.create(null);for(let n in e){let a=e[(0,i.sg)(n)];r[a]=r[a]||new Set,r[a].add((0,i.sg)(n))}return r}let m=(0,a.Mz)([d],p),h=(0,a.Mz)([u],p),_=e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle,g=(0,s.bt)(_)},234945:(e,r,n)=>{"use strict";n.d(r,{$4:()=>h,$J:()=>d,$u:()=>_,AF:()=>u,BA:()=>v,F4:()=>E,O1:()=>y,T_:()=>T,Xt:()=>s,dK:()=>l,dT:()=>g,f5:()=>S,qd:()=>c,rT:()=>f,t:()=>m,tX:()=>b,tn:()=>I});var i=n(302245),a=n(97395),o=n(529928);let s=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,c=(0,a.Zm)(e=>Object.keys(s(e)));function d(e){let r=Object.keys(s(e));return 1===r.length?r[0]:null}let u=(0,i.Mz)([l,d],(e,r)=>r?e.get(r):null),p=()=>(e,r)=>l(e).get(r);function m(){let e=p();return(0,a.Zm)((r,n)=>{let i=e(r,n);return null==i?null:{key:i.styleKey,version:i.styleVersionHash}})}function h(){let e=m();return(0,a.Zm)((r,n)=>new Map(n.map(n=>[n,e(r,n)])))}function _(e){return e.mirror.selectionProperties.numSelected||0}let g=(0,a.P8)([c,l],f);function f(e,r){let n=[];return e.forEach(e=>{let i=r.get(e);(i?.type==="INSTANCE"||i?.isInstanceSublayer)&&n.push(e)}),n}let E=(0,i.Mz)([l,c],(e,r)=>{let n=[];return r.forEach(r=>{let i=e.get(r);i&&n.push(i)}),n});(0,a.Zm)(e=>e.library.publishableStyles.map(e=>e.nodeId));let y=(0,a.Zm)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),b=(0,a.Zm)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),I=(0,o.bt)(y),T=(0,a.Zm)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),v=(0,a.Zm)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage));function S(e,r){let n=l(e);return!n.get(r)?.visible}},388094:(e,r,n)=>{"use strict";n.d(r,{C9:()=>A,Co:()=>T,Du:()=>_,EY:()=>O,J5:()=>N,LL:()=>k,MH:()=>R,OQ:()=>P,S_:()=>g,_Q:()=>y,jf:()=>C,kc:()=>L,m0:()=>p,sm:()=>x,tY:()=>F,ty:()=>D,v3:()=>h});var i=n(89865),a=n.n(i),o=n(184058),s=n.n(o),l=n(302245),c=n(97395),d=n(529928);function u(e){return(0,c.Vh)(e=>e.library,e)}let p=u(e=>e.subscribedSymbolsFromLoadedPages),m=u(e=>e.subscribedSymbolsOnCurrentPage),h=(0,c.P8)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),_=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,g=(0,l.Mz)([p],e=>a()(e,e=>e.key)),f=u(e=>e.subscribedStateGroupsFromLoadedPages),E=u(e=>e.subscribedStateGroupsOnCurrentPage),y=u(e=>e.directlySubscribedStylesFromLoadedPages),b=u(e=>e.directlySubscribedStylesOnCurrentPage),I=u(e=>e.indirectlySubscribedStylesFromLoadedPages),T=(0,l.Mz)([I],e=>e.length>0),v=(0,l.Mz)([y,I],(e,r)=>[...e,...r]);function S(e){return e.map(e=>e.nodeId)}function w(e){return s()(e.map(e=>e.key))}let A=(0,l.Mz)([p],S),N=(0,l.Mz)([m],S),C=(0,l.Mz)([f],S),O=(0,l.Mz)([E],S),L=(0,l.Mz)([y],S);(0,l.Mz)([b],S);let R=(0,l.Mz)([v],S),P=(0,l.Mz)([p],w),D=(0,l.Mz)([m],e=>new Set(e.map(e=>e.key))),k=(0,l.Mz)([f],w),M=(0,l.Mz)([y],w),F=(0,l.Mz)([b],e=>new Set(e.map(e=>e.key))),x=(0,d.bt)(M);(0,l.Mz)([v],w)},207584:(e,r,n)=>{"use strict";n.d(r,{KM:()=>l,n1:()=>c,og:()=>s,wi:()=>d});var i=n(215122),a=n(302245),o=n(529928);let s=e=>e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey,l=e=>e.library.used__LIVEGRAPH.localNodeIdToDestinationKey,c=(0,o.bt)(e=>e.library.used__LIVEGRAPH.sourceAssetKeyToFileName),d=(0,a.Mz)([e=>e.library.used__LIVEGRAPH.styles],function(e){let r={};for(let[n,a]of Object.entries(e))"loaded"===a.status&&(r[(0,i.n3)(n)]=a.data);return r})},837502:(e,r,n)=>{"use strict";n.d(r,{Bg:()=>o,Cy:()=>l,Q3:()=>s}),n(939863);var i=n(139961);function a(e){switch(e){case null:case void 0:return i.w_.ALLOWED;default:return e}}function o(e){return a(e?.public_link_controls_setting)===i.w_.BANNED}function s(e){return[i.w_.EXPIRATION_REQUIRED,i.w_.EXP_AND_PWD_REQUIRED].includes(a(e?.public_link_controls_setting))}function l(e){return[i.w_.PASSWORD_REQUIRED,i.w_.EXP_AND_PWD_REQUIRED].includes(a(e?.public_link_controls_setting))}n(594901),n(643067),n(428467)},452353:(e,r,n)=>{"use strict";n.d(r,{Ey:()=>_,To:()=>g,zY:()=>h}),n(740222);var i=n(776250),a=n(686759),o=n(966712),s=n(178466),l=n(698349),c=n(479296);let d=(0,o.tl)().stripe_api_public;var u=(e=>(e.CARD="card",e.SEPA="sepa_debit",e.IDEAL="ideal",e.SOFORT="sofort",e))(u||{});let p=null;function m(){return new Promise((e,r)=>{p?e(p):d?(0,a.k0)("https://js.stripe.com/v3/",{cors:!1}).then(()=>{e(p=Stripe(d,{locale:(0,s.Gq)().getPrimaryLocale(!1)}))}).catch(r):r("No Stripe api key")})}let h=(0,c.D)(e=>new Promise((r,n)=>{m().then(n=>{r(n.elements().create("card",e))}).catch(n)})),_=(0,c.D)((e,r)=>new Promise((n,i)=>{m().then(a=>{a.createToken(e,r).then(e=>{n(e)}).catch(i)}).catch(i)})),g=(0,c.D)(async(e,r,n)=>{let a=await m(),{data:{meta:{client_secret:o}}}=await l.m.getSetupIntentSecret({subtotal_estimate:r,currency:n}),s=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,c=s(),d=!1,u=setInterval(()=>{c!==s()&&((0,i.sx)("Stripe Authentication Modal"),clearInterval(u),d=!0)},1e3),p=await a.confirmCardSetup(o,{payment_method:{card:{token:e}}});if(clearInterval(u),p.error)throw(0,i.sx)("Payment Confirmation Error",{error_message:p.error.message}),p.error;return(0,i.sx)("Payment Confirmation Success"),p.setupIntent.is3DS=d,p.setupIntent})},58032:(e,r,n)=>{"use strict";n.d(r,{Ly:()=>y,Qh:()=>h,Sp:()=>w,fi:()=>E,gM:()=>b,je:()=>g,l6:()=>f});var i=n(411855);n(188507);var a=n(459401),o=n(752795),s=n(593779),l=n(758271),c=n.n(l),d=n(44948),u=n(966712);n(915440);var p=n(711525),m=n(30637);n(963067),n(298527),n(335682),n(279453),n(984968),n(999881),n(243987);var h=(e=>(e.COMMUNITY="community",e.ORGANIZATION="organization",e.WORKSPACE="workspace",e.TEAM="team",e.FILE="file",e.USER="user",e))(h||{});let _=i.createContext(null);function g(){let{subscription:e,ensureSubscription:r}=(0,o.requireNotNullish)(i.useContext(_),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");i.useEffect(()=>{r()},[r]);let n=i.useMemo(()=>(0,p.gB)([]),[]);return(0,m.nl)()?n:e}function f(){let e=g();return(0,d.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.fileKey)),r},[e.data])}function E(){let{untransformedSubscription:e,ensureSubscription:r}=(0,o.requireNotNullish)(i.useContext(_),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");return i.useEffect(()=>{r()},[r]),e}function y(){let{untransformedSubscription:e}=(0,o.requireNotNullish)(i.useContext(_),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let r={},{file:n}=e.data;return n?.libraryOrgSubscriptions.length&&(r.org=n.libraryOrgSubscriptions.reduce((e,r)=>{let n=r.library?.file?.key;return n&&e.add(n),e},new Set)),n?.libraryTeamSubscriptions.length&&(r.team=n.libraryTeamSubscriptions.reduce((e,r)=>{let n=r.library?.file?.key;return n&&e.add(n),e},new Set)),n?.libraryFileSubscriptions.length&&(r.file=n.libraryFileSubscriptions.reduce((e,r)=>{let n=r.library?.file?.key;return n&&e.add(n),e},new Set)),n?.libraryUserSubscriptions.length&&(r.user=n.libraryUserSubscriptions.reduce((e,r)=>{let n=r.library?.file?.key;return n&&e.add(n),e},new Set)),r}function b(e,r,n,i,s){if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let l=e.data.file;if(null==l)return(0,p.gB)([]);let d=e.data.libraryPresetSubscriptionsV2,m=(0,u.kc)().dse_preset_libraries&&n,h=(0,p.oA)(d)??[],_=l.libraryOrgSubscriptions,g=l.team?.workspace?.librarySubscriptions,f=l.libraryTeamSubscriptions,E=l.libraryUserSubscriptions,y=l.libraryFileSubscriptions,b=[..._.filter(e=>m||!(0,p.oA)(e.communityLibrary)).filter(e=>r?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>I(e,"organization")),...y.filter(e=>m||!(0,p.oA)(e.communityLibrary)).map(e=>I(e,"file"))];if((0,u.kc)().dse_preset_libraries&&!i&&!s&&n){let e=h.filter(e=>r?!((0,u.kc)().ps_benchmark&&(l?.parentOrgId&&null!=e.libraryOrgSubscriptionOverride||l?.teamId&&null!=e.libraryTeamSubscriptionOverride))&&null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryOrgSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride||e.libraryFileSubscriptionOverride)).map(e=>T(e,"community"));b.push(...e)}if(r){let e=E.filter(e=>m||!(0,p.oA)(e.communityLibrary)).filter(e=>(0,p.oA)(e.communityLibrary)?null==e.libraryFileSubscriptionOverride:null==e.libraryFileSubscriptionOverride&&e.library?.file?.parentOrgId===i).map(e=>I(e,"user")),r=(function(e){let r=(0,u.kc)().ps_benchmark,n=e?.teamId;return r&&n?e?.currentUser?.orgAwareTeamRoles?.filter(e=>e.team?.id===n).map(e=>e.team?.libraryTeamSubscriptions).filter(o.isNotNullish):e?.currentUser?.orgAwareTeamRoles?.map(e=>e.team?.libraryTeamSubscriptions).filter(o.isNotNullish)})(l)?.map(e=>e.filter(e=>m||!p.oA(e.communityLibrary)).filter(S).map(e=>I(e,"team")))??[];b.push(...e),b.push(...(0,a.flatten)(r))}else{let e=f.filter(e=>m||!(0,p.oA)(e.communityLibrary)).filter(v).map(e=>I(e,"team")),r=(g||[]).filter(e=>m||!(0,p.oA)(e.communityLibrary)).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>I(e,"workspace"));b.push(...e),b.push(...r)}let w=c()(b.filter(o.isNotNullish),e=>e.fileKey);return(0,a.sortAlphabeticallyByProperty)(w,"name"),(0,p.gB)(w)}function I(e,r){let n=e.communityLibrary&&(0,p.oA)(e.communityLibrary);return n?T({communityLibrary:n,id:e.id},r):e.library&&e.library&&e.library.file?{fileKey:e.library.file.key,libraryKey:(0,s.l)(e.library.file.libraryKey),id:e.id,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,numModuleAssets:e.library.numModuleAssets??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:r,thumbnailUrl:e.library.file.thumbnailUrl,thumbnailUrlOverride:e.library.file.thumbnailUrlOverride,thumbnailGuid:e.library.file.thumbnailGuid}:null}function T(e,r){return e?.communityLibrary?{fileKey:e.communityLibrary.hubFileId,libraryKey:(0,s.l)(e.communityLibrary.hubFile.libraryKey),id:e.id,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,numModuleAssets:e.communityLibrary.numModuleAssets??0,parentOrgId:null,subscriptionType:r,thumbnailUrl:e.communityLibrary.hubFile.thumbnailUrl,thumbnailUrlOverride:null,thumbnailGuid:null}:null}function v(e){return null==e.libraryFileSubscriptionOverride}function S(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function w(e,r){switch(r){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},937890:(e,r,n)=>{"use strict";n.d(r,{OL:()=>s,_M:()=>l,jx:()=>o,wZ:()=>a});var i=n(27087);function a(e,r){return i.Ay.put("/api/team_join_link",{team_id:e,level:r}).then(({data:e})=>e.meta).catch(e=>{throw e})}function o(e){return`${window.location.origin}/team_invite/redeem/${e.token}`}n(129318),n(147206);let s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,l=e=>`RESETTING_TEAM_JOIN_LINK_${e}`},984968:(e,r,n)=>{"use strict";n.d(r,{BU:()=>C,Cl:()=>x,Ct:()=>z,Dj:()=>N,Eq:()=>U,HE:()=>F,Me:()=>W,PS:()=>P,R5:()=>T,UQ:()=>D,ZT:()=>V,_L:()=>K,aW:()=>L,cD:()=>G,jv:()=>Y,mx:()=>v,n$:()=>j,ol:()=>H,rR:()=>R,sK:()=>O});var i=n(188507);n(459401),n(634832);var a=n(675678),o=n(138020),s=n(966712),l=n(130097),c=n(886653),d=n(776621),u=n(218881);n(939863);var p=n(99506),m=n(279453),h=n(243987);n(428467);var _=n(626322);n(945020);var g=n(668860);n(840912),n(668526);var f=n(479296),E=n(875847),y=n(529928),b=n(216158),I=n(147206);async function T(e){let r=[],n={};return await Promise.all(e.map(async e=>{let i=await b.M4.fetchFile(e);if(!i?.trashed_at||!i?.team_id)return;r.push(i);let a=(await (0,l.Ek)(m.Aqu,{teamId:i.team_id})).team;a?.id&&(n[a.id]=a)})),await w(r,n)}async function v(e){let r=[],n={};return await Promise.all(e.map(async e=>{let i={...await b.M4.fetchFile(e.key),folder_id:e.folderId};if(i&&r.push(i),!e.folderId)return;let a=await (0,l.Ek)(m.yU5,{projectId:e.folderId}),s=a.project?.team;s?.id&&(n[s.id]={...s,teamFileCounts:{designFileCount:s.teamFileCounts?.designFileCount??0,whiteboardFileCount:s.teamFileCounts?.whiteboardFileCount??0,slideFileCount:(0,o.oA)(s.teamFileCounts?.slideFileCount)??"0"}})})),await w(r,n)}async function S(){return(await (0,u.hW)("slides_starter_team_limits_exp")).get("is_slide_restriction_on",!1)}let w=(0,f.D)(async(e,r)=>{let n={},i={},a={},s={};for(let r of e){if(!r.folder_id)continue;let e=s[r.folder_id]??await b.M4.fetchFolder(r.folder_id);s[r.folder_id]=e;let o=r?.editor_type==="design",l=r?.editor_type==="whiteboard",c=r?.editor_type==="slides",d=(0,E.ye)(e)?0:1;r.team_id&&o&&(n[r.team_id]=(n[r.team_id]||0)+d),r.team_id&&l&&(i[r.team_id]=(i[r.team_id]||0)+d),r.team_id&&c&&(a[r.team_id]=(a[r.team_id]||0)+d)}let l=Object.keys(n).find(e=>{let i=r[e];return i&&!L(i,{type:2,nDesignFilesToAdd:n[e],nCurrentDesignFiles:i.teamFileCounts?.designFileCount||0})});return l||(l=Object.keys(i).find(e=>{let n=r[e];return n&&!L(n,{type:5,nWhiteboardFilesToAdd:i[e],nCurrentWhiteboardFiles:n.teamFileCounts?.whiteboardFileCount||0})}))||!await S()?l:l=Object.keys(a).find(e=>{let n=r[e];return n&&!L(n,{type:7,nSlideFilesToAdd:a[e],nCurrentSlideFiles:parseInt((0,o.oA)(n.teamFileCounts?.slideFileCount)??"0",10)})})});function A(e,r){return!!e.edit_roles&&("whiteboard"===r&&e.edit_roles.whiteboard_files.length>0||"design"===r&&e.edit_roles.design_files.length>0)}function N(e){let r=e.team_role?.level,n=e.team_role?.pending||!1;return r&&r>=g.e6.EDITOR&&!n||!!e.edit_roles&&e.edit_roles.folders.length>0||!(0,I.qR)(e.team_user,p._Y.DESIGN)&&A(e,p._Y.DESIGN)||!(0,I.qR)(e.team_user,p._Y.WHITEBOARD)&&A(e,p._Y.WHITEBOARD)}function C(e){return!!(e.team_role||(e?.edit_roles?.design_files?.length||0)>0||(e?.edit_roles?.whiteboard_files?.length||0)>0||(e?.edit_roles?.folders?.length||0)>0||(e?.view_roles?.file_count||0)>0||(e?.view_roles?.folder_count||0)>0)}var O=(e=>(e[e.ADD_DESIGN_FILE=0]="ADD_DESIGN_FILE",e[e.ADD_PROJECT=1]="ADD_PROJECT",e[e.ADD_N_DESIGN_FILES=2]="ADD_N_DESIGN_FILES",e[e.ADD_EDITOR=3]="ADD_EDITOR",e[e.ADD_FIGJAM_FILE=4]="ADD_FIGJAM_FILE",e[e.ADD_N_FIGJAM_FILES=5]="ADD_N_FIGJAM_FILES",e[e.ADD_SLIDES_FILE=6]="ADD_SLIDES_FILE",e[e.ADD_N_SLIDES_FILES=7]="ADD_N_SLIDES_FILES",e))(O||{});function L(e,r){if(!e||e.restrictionsList?.includes(p.P4.LOCKED))return!1;if((0,h.XX)(e))return!0;switch(r.type){case 0:if(e.restrictionsList?.includes(p.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentDesignFiles&&r.nCurrentDesignFiles>=h.WW)return!1;return!e.restrictionsList?.includes(p.P4.FILES_LIMITED);case 1:return!e.restrictionsList?.includes(p.P4.PROJECTS_LIMITED)&&!e.restrictionsList?.includes(p.P4.PROJECTS_LIMITED_LEGACY);case 2:if(e.restrictionsList?.includes(p.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts||0===r.nDesignFilesToAdd)return!0;if(r.nCurrentDesignFiles+r.nDesignFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(p.P4.FILES_LIMITED);case 3:if(e.restrictionsList?.includes(p.P4.EDITORS_LIMITED))return!1;return!0;case 4:if(e.restrictionsList?.includes(p.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentWhiteboardFiles&&r.nCurrentWhiteboardFiles>=h.WW)return!1;return!e.restrictionsList?.includes(p.P4.WHITEBOARD_FILES_LIMITED);case 5:if(e.restrictionsList?.includes(p.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nWhiteboardFilesToAdd)return!0;if(r.nCurrentWhiteboardFiles+r.nWhiteboardFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(p.P4.WHITEBOARD_FILES_LIMITED);case 6:if(e.restrictionsList?.includes(p.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentSlideFiles&&r.nCurrentSlideFiles>=h.WW)return!1;return!e.restrictionsList.includes(p.P4.SLIDE_FILES_LIMITED);case 7:if(e.restrictionsList?.includes(p.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nSlideFilesToAdd)return!0;if(r.nCurrentSlideFiles+r.nSlideFilesToAdd>h.WW)return!1;return!e.restrictionsList.includes(p.P4.SLIDE_FILES_LIMITED)}}function R(e,r){return L({subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null},r)}function P(e){return!!e.student_team||!!e&&!!e.subscription&&[p.Qh.OK,p.Qh.GRACE_PERIOD].includes(e.subscription)}function D(e){let r=e.user?.id,n=e.openFile?.key;if(!r||!n)return null;let i=e.fileByKey?.[n]?.team_id;return i?e.teamUserByTeamId?.[i]?.[r]:null}let k=new RegExp(/[https?:?\/\/]?[a-z.]*figma[.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),M=new RegExp(/[https?:?\/\/]?[a-z.]*figma[.\da-z:]*\/files\/team\/(\d+)/);function F(e){return k.test(e)}function x(e){return M.test(e)}function U(e){let r=new URL(e).pathname.match("team/([A-z0-9]*)");return r?r[1]:null}let B=["recentFiles","recentsAndSharing","draftsToMove","communityHub","search"];function V(e){try{if(e.openFile)return e.openFile.teamId||"";if("teamId"in e.selectedView)return e.selectedView.teamId||"";if("folder"===e.selectedView.view){let r=e.selectedView.folderId;if(!e.folders[r])return(0,s.Ay)().page_load_team_id||"";return e.folders[r]?.team_id||""}if((B.includes(e.selectedView.view)||"deletedFiles"===e.selectedView.view||"trashedFolders"===e.selectedView.view||"desktopNewTab"===e.selectedView.view)&&!e.currentUserOrgId)return e.currentTeamId||""}catch(e){(0,d.$D)(a.FigmaTeam.GROWTH_PLATFORM,Error(`Error getting team ID from Redux state: ${e.message}`))}return""}function G(){return(0,i.d4)(e=>V(e))||""}function H(){return(0,i.d4)(e=>""===V(e)||null==e.teams?null:e.teams[V(e)])||null}let W=(0,y.bt)(e=>e.teams[V(e)]||null);function K(e,r,n){return e?Object.keys((0,_.t)(r.byTeamId,e.id)).filter(e=>n[e]):[]}function j(e,r){return(function(e,r){let n=[],i={};for(let r of e)r&&(i[r.id]=r,n.push(r.id));return e.sort((e,n)=>{let i=r.indexOf(e.id),a=r.indexOf(n.id);return -1===i&&-1===a?e.createdAt<n.createdAt?1:-1:i-a}),e})(e,r).map(e=>e.id)}function z(e,r,n){let i=0,a={};for(let o of(r.forEach(e=>a[e.id]=e),Object.keys(n))){let r=a[o],s=n[o][e];if(r&&s){if(r.pro_team||r.org_access||r.student_team)return!1;s.level===g.e6.OWNER&&i++}}return i>1}function Y(e){return!!e&&!!e.match(/^[0-9]+$/)}(0,c.xx)(function(e,r,n){return e?K(e,r,n).map(e=>n[e]):[]})},776726:(e,r,n)=>{"use strict";n.d(r,{H1:()=>h,X0:()=>p,XJ:()=>d,z:()=>c});var i=n(587670),a=n(776250),o=n(38329),s=n(988022),l=n(463592);let c={includeMatches:!0,shouldSort:!1,findAllMatches:!1,ignoreLocation:!0};function d(e){return e.replace(/[\u201D\u201C\"\u2019\u2018]/g,"'")}function u(e){return e.textContent&&(e.textContent=d(e.textContent)),e}function p(e,r,n){let a=[];for(let o of e.indices){let s=o[0],l=o[1]+1,c=e.value;n.matchCase&&c.substring(s,l)!==r||n.wholeWords&&(s>0&&m(c[s-1])||l<e.value.length&&m(c[l]))||a.push({start:s,end:l,matchType:i.Ifi.TEXT_MATCH})}return a}function m(e){return/[\p{L}\p{N}\p{Pc}\p{M}]/u.test(e)}let h=new class{constructor(){this.searchLibrary=new l.CN({keys:["textContent","name","type"],exactMatch:!0,...c})}initializeIndex(){let e=performance.now(),r=i.YEY.getSearchableNodes(!0).map(u),n=o.D.getState();this.searchLibrary.set(r),(0,s.ds)("canvas_search_index_create",n.openFile?.key,n,{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}destroyIndex(){this.searchLibrary.set([])}addNode(e){this.searchLibrary.add(e)}removeNode(e){this.searchLibrary.remove("guid",e)}async search(e,r={}){let n;this.updateIndex();let a=performance.now(),o=`'"${d(e)}"`,s=[{textContent:o}];if(r.searchLayerNames&&s.push({name:o}),r.layerTypes){let e=[];r.layerTypes.forEach(r=>{e.push({type:r})}),n={$and:[{$or:s},{$or:e}]}}else n={$or:s};let l=await this.searchLibrary.search(n),c={},u=0,m=0;for(let n of l){let a=[];for(let o of n.matches){let s=p(o,e,r);if("textContent"!==o.key&&s.length){let e=s[0];e.matchType=n.item.type===i.Z6A.CANVAS?i.Ifi.PAGE_MATCH:i.Ifi.LAYER_MATCH,a=[e,...a]}else a.push(...s)}if(a.length){u+=a.length,m++;let e=n.item.pageGuid,r={guid:n.item.guid,textMatches:a};c[e]?c[e].push(r):c[e]=[r]}}return{resultsByPage:c,metrics:{queryLength:e.length,numMatchingNodes:m,numMatches:u,queryTimeMs:Math.round(performance.now()-a)}}}logIndex(){this.updateIndex(),this.searchLibrary.logIndex()}updateIndex(){let e=performance.now(),r=i.YEY.getSearchableNodes(!1).map(u);if(r.length>2e3){this.initializeIndex();return}let n=[],o=[];for(let e of r)n.push(e.guid),(e.name||e.textContent)&&o.push(e);r.length&&this.searchLibrary.updateEntries("guid",n,o),r.length>0&&(0,a.sx)("canvas_search_index_update",{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}}},494668:(e,r,n)=>{"use strict";n.d(r,{$I:()=>c,YA:()=>d});var i=n(411855),a=n(497189),o=n(11190),s=n(939863),l=n(94823);function c(e){return({light:(0,s.t)("fullscreen_actions.theme.light"),dark:(0,s.t)("fullscreen_actions.theme.dark"),system:(0,s.t)("fullscreen_actions.theme.system_theme")})[e]}function d(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"light",userInitiated:!0}))},searchSynonyms:["theme"],iconType:i.createElement(a.Z)},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"dark",userInitiated:!0}))},searchSynonyms:["theme"],iconType:i.createElement(o.a)},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"system",userInitiated:!0}))}}]}},783967:(e,r,n)=>{"use strict";function i(){return!!window.INITIAL_OPTIONS?.user_data}n.d(r,{w:()=>i}),n(96328)},694517:(e,r,n)=>{"use strict";n.d(r,{Eg:()=>ec,HF:()=>J,Ht:()=>V,Nb:()=>eu,Ul:()=>et,V_:()=>B,_b:()=>el,_h:()=>eo,_t:()=>j,cn:()=>K,hZ:()=>ee,kT:()=>W,tP:()=>G,un:()=>er,vF:()=>em,vw:()=>Z,w_:()=>z,yH:()=>ep});var i=n(675678),a=n(587670),o=n(534611),s=n(776250),l=n(181912),c=n(38329),d=n(966712),u=n(38580),p=n(374626),m=n(218549),h=n(183297),_=n(776621),g=n(743282),f=n(27087),E=n(881388),y=n(265746),b=n(696808),I=n(392592),T=n(980820),v=n(738269),S=n(293017),w=n(31913),A=n(843495),N=n(239671),C=n(610267),O=n(779086),L=n(754168),R=n(597642),P=n(479296),D=n(857766),k=n(356390),M=n(493862),F=n(467232),x=n(216158),U=n(707465);let B="current_version",V=new m.q(40),G=(0,u.eU)("");var H=(e=>(e[e.Default=0]="Default",e[e.Recording=1]="Recording",e))(H||{});let W=x.M4.Query({fetch:async e=>{let r=e.fileKey;if(!r)return null;let n=performance.now(),i=await R.W.getPaginatedVersions({...e,fileKey:r,versionIds:e.versionIds?.join(",")}),a=performance.now()-n;return(0,s.sx)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:a}),i.data.meta?.versions||[]},key:"fileVersionsPaginated"});function K(e,r,n){return`${e}-${r}-${n.id}`}function j(e,r){let n=c.D.getState(),i=n.openFile?.key,a=[r,n.mirror.sceneGraph.getInternalCanvas()?.guid].filter(e=>!!e);if(!i||!r)return null;let o=K(i,r,e);if(V.has(o))return V.get(o);let s=new Promise((r,i)=>{Y(`${e.canvas_url}&nodes_to_extract=${a.join(",")}&fv=${(0,C.N)(n.fileVersion)}`,e=>{r({canvas:e,key:o})},i).onerror=i});return V.set(o,s),s}function z(e){let r=c.D.getState(),n=r.openFile?.key,i=r.mirror.appModel.currentPage;if(!n||!i)return null;let a=K(n,i,e);V.delete(a)}let Y=(0,P.n)((e,r,n)=>{let i=null,a=new XMLHttpRequest;a.open("GET",e);let o=d.Ay().user_data?.id;return o&&a.setRequestHeader("X-Figma-User-ID",o),a.onload=()=>{200===a.status&&(i=new Uint8Array(a.response))},a.onloadend=()=>{null!=i?r(i):n?.("Failed to fetch bytes")},a.responseType="arraybuffer",a.send(),a}),$=async(e,r,n,i)=>{let a=new URLSearchParams;a.set("diff_version",(0,D.C2)().toString()),a.set("from_file_version_id",r),a.set("migration_version",`${n}`),i&&i.length>0&&a.set("nodes_to_diff",i.join(","));let{data:{meta:{checkpoint_diff:o}}}=await f.Ay.post(`/api/file_diff/v2/checkpoint_diff/${e}?${a.toString()}`);return o},q=async e=>{let r=new Date().getTime(),{data:n}=await f.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),i=new Date().getTime();return(0,s.sx)("versioning_performance_metrics",{name:"download_diff",durationMs:i-r},{forwardToDatadog:!0}),n};function Z(e){for(let r of e.versions)if(r.id===e.activeId)return r;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}async function X(e,r,n){let i=await $(r.getState().openFile.key,e,r.getState().fileVersion,n);if(!i.signed_url)return"Error viewing what's changed between file versions.";let o=!!r.getState().openFile?.canEdit,l=new Date().getTime(),[c]=await Promise.all([q(i.signed_url),(0,M.W5)(a._em.DEBUG_TOOL)]),d=new Date().getTime();return((0,s.sx)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:d-l,isEditor:o},{forwardToDatadog:!0}),a.glU.loadHistoryChangesState(c))?"":"Error loading HistoryChangesState into memory."}function J(e,r){if(e)return r.versions.find(r=>r.id===e)}async function Q(e,r){let n=Date.now(),i=J(e,r.getState().versionHistory);if(!i)return{elapsedTime:Date.now()-n,numPagesWithChanges:0};let o=await X(i.id,r),s=Date.now()-n;if(o)throw(0,_.x1)("version diffing","error checking for visible changes",{error:o}),Error("Error checking for visible changes");return{elapsedTime:s,numPagesWithChanges:a.glU.getPagesWithChanges().length}}let ee=(0,T.nF)(async(e,r)=>{let n,i;let o=e.getState(),s=()=>{e.dispatch(v.$T({...o.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(S.Y6({mode:a.Oin.OFF})),s()},u=o.user;if(!(0,d.kc)().version_diffing||!(0,d.kc)().xr_debounce_threshold||!u||"fullscreen"!==o.selectedView.view||o.selectedView.editorType===N.nT.Whiteboard||o.mirror.appModel.topLevelMode===a.lyf.HISTORY||o.mirror.appModel.activeCanvasEditModeType===a.m1T.COMPARE_CHANGES)return c();let{openFileKey:p}=r;try{let e=await L.S.getLastInteraction({openFileKey:p});n=e.data.meta.last_view_at,i=e.data.meta.last_edit_at}catch{c()}let m=(0,l.A)(n),h=(0,l.A)(i),_=m>h?m:h;if(!_.isValid()||_<(0,l.A)().subtract(7,"days"))return c();let g=R.W.getPaginatedVersions({fileKey:p,createdAtOrBefore:_.toISOString()}),f=R.W.getPaginatedVersions({fileKey:p}),[E,y]=await Promise.all([g,f]),b=E.data.meta.versions,I=y.data.meta.versions;if(!(b.length>0&&I.length>0))return c();let T=b[0],w=I[0];if(!((0,l.A)(w.created_at)>(0,l.A)(T.created_at))||w.user_id===u.id||w.participating_users_array?.includes(u.handle))return c();e.dispatch(el()),e.dispatch(em({fromVersionId:T.id}))}),et=(0,T.nF)(async(e,r)=>{let n=e.getState(),i=n.user;if(!(0,d.kc)().version_diffing||!i||"fullscreen"!==n.selectedView.view||n.selectedView.editorType===N.nT.Whiteboard||n.mirror.appModel.topLevelMode===a.lyf.HISTORY||n.mirror.appModel.activeCanvasEditModeType===a.m1T.COMPARE_CHANGES)return;let{openFileKey:o}=r,c=(0,l.A)(r.versionHistory.lastEdited),u=(0,l.A)(r.versionHistory.lastViewed),p=u>c?u:c;if(!p.isValid()||p<(0,l.A)().subtract(7,"days"))return;let m=Date.now(),h=R.W.getPaginatedVersions({fileKey:o,pageSize:1,createdAtOrBefore:p.toISOString()}),_=R.W.getPaginatedVersions({fileKey:o,pageSize:1}),[f,E]=await Promise.all([h,_]),y=f.data.meta.versions,b=E.data.meta.versions;if(y.length>0&&b.length>0){let r=y[0],n=b[0];if((0,l.A)(n.created_at)>(0,l.A)(r.created_at)&&n.user_id!==i.id&&!n.participating_users_array?.includes(i.handle)){let i={fileKey:o,eventId:(0,g.g)(),lastEdited:c.toISOString(),lastViewed:u.toISOString(),lastSeenVersion:r.id,lastSeenCreatedAt:r.created_at,latestVersion:n.id,latestCreatedAt:n.created_at};(0,s.sx)("Version Diffing Changed Since Last View",{...i,durationMs:Date.now()-m},{forwardToDatadog:!0}),e.dispatch(ea({lastSeenVersionId:r.id,trackingProps:i}))}}});function er(){let e=c.D,r=e.getState().versionHistory,n=Z(r),i=r.fetchedPageIds||new Set,a=e.getState().mirror.appModel.currentPage;return n&&n.id!==B?ei(n,e,i,a,o.Xy):Promise.reject("Version history inactive")}let en=null;function ei(e,r,n,i,s,l){return new Promise((c,d)=>{let u=e.canvas_url;u||d("Couldn't get canvas URL for version.");let m=s===o.Xy,h=!m&&n.size>0,_=s??i,g=r.getState().mirror.appModel.currentPage;"LOAD_NEW_VERSION"===l&&g&&!s&&(_=g);let f=!r.getState().mirror.appModel.pagesList.every(e=>n.has(e.nodeId))&&!n.has(_);if(!f)return r.dispatch(w.SR({isLoadingPage:!1})),c();u+=`&nodes_to_extract=${_}&fv=${(0,C.N)(r.getState().fileVersion)}`;let E=r.getState().selectedView;F.C.markVersionHistoryLoadStart(E.fileKey,E.nodeId,l);let y=Y(u,e=>{if(y===en){var o;en=null;let s=r.getState().selectedView.editorType;if((o=r.getState().mirror.appModel.topLevelMode)===a.lyf.HISTORY||o===a.lyf.DEV_HANDOFF){let o;if(h)a.glU.applyFileToCurrentScene(e);else if(p.zl.set(G,""),!a.glU.loadFigFileForPreview(e))return d("Error loading this version into memory.");F.C.markVersionHistoryLoadEnd();let l=r.getState().selectedView.fileKey;o=s===N.nT.Whiteboard?"figjam":s===N.nT.Design||s===N.nT.Slides?(0,N.CO)(s):"unknown";let u=r.getState().selectedView.devModeFocusId?"focus_view":"version_history";F.C.report(l,o,u),f&&(m?r.getState().mirror.appModel.pagesList.forEach(e=>n.add(e.nodeId)):n.add(_),r.dispatch(w.EB({fetchedPageIds:n})),r.dispatch(w.SR({isLoadingPage:!1})),c()),E.nodeId&&E.nodeId!==i&&A.tJ([E.nodeId]),E.devModeFocusId&&a.w3z.focusOnNode(E.devModeFocusId,!1),r.dispatch(S.Y6({mode:a.Oin.OFF}))}}});en=y})}let ea=(0,T.nF)(async(e,r)=>{let n,i;let{lastSeenVersionId:a,trackingProps:o}=r;try{let r=await Q(a,e);n=r.elapsedTime,i=r.numPagesWithChanges}catch(e){return}if(0===i){(0,s.sx)("Version Diffing Notification Skipped",{...r.trackingProps,pagesWithChanges:0,durationMs:n},{forwardToDatadog:!0});return}(0,s.sx)("Version Diffing Notification Shown",{...r.trackingProps,pagesWithChanges:i,durationMs:n},{forwardToDatadog:!0}),e.dispatch(b.Q.enqueueFront({notification:{type:y._.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,s.sx)("Version Diffing Notification Opened",o),e.dispatch(el()),e.dispatch(em({fromVersionId:a}))},dismissCallback:()=>{(0,s.sx)("Version Diffing Notification Dismissed",o)}}}))}),eo=(0,T.nF)((e,{direction:r})=>{let n=e.getState(),i=(0,U.U2)(n.selectedView);i&&!n.versionHistory.loading&&(e.dispatch(w.ne({loading:!0})),(0,h.En)(`/api/versions/${i}`,30,n.versionHistory,r).then(n=>{i===(0,U.U2)(e.getState().selectedView)&&e.dispatch(w.BC({history:n,direction:r}))}))}),es=(0,T.nF)(e=>{e.dispatch(w.p0()),e.dispatch(eo({direction:h.mL}))}),el=(0,T.nF)((e,r)=>{r?.type===1?k.Y5.triggerAction("enter-history-mode-for-recording"):k.Y5.triggerAction("enter-history-mode"),k.Y5.triggerAction("deselect-all"),e.dispatch(es()),a.Ez5?.uiState().showPropertiesPanel.set(!0),(0,s.sx)("Toggle Version History",{source:r?.source||null})}),ec=(0,T.nF)(e=>{e.dispatch(ed()),e.dispatch(I.F.dequeue({matchType:"versions"})),a.glU.exitVersionHistoryMode(e.getState().openFile?.canEdit??!1)}),ed=(0,T.nF)(e=>{e.dispatch(eu({id:B})),e.dispatch(em({fromVersionId:void 0})),a.Egt.clearSelection(),e.dispatch(I.F.dequeue({matchType:"comparing"})),e.dispatch(I.F.dequeue({matchType:"view_changes"})),e.dispatch(S.Y6({mode:a.Oin.OFF}))}),eu=(0,T.nF)(async(e,r)=>{if(r.id===B){p.zl.set(G,""),a.glU.loadFigFileForPreview(new Uint8Array);let n=e.getState();e.dispatch(v.$T({...n.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(w.Fm({id:r.id}));return}e.dispatch(w.Fm({id:r.id}));let n=e.getState(),o=r.versions?r.versions.find(e=>e.id===r.id):Z(n.versionHistory);if(!o)return;e.dispatch(v.$T({...n.selectedView,compareVersionId:void 0}));let s=e.getState().mirror.appModel.currentPage,l=r.eventType,c=!!e.getState().selectedView.devModeFocusId;await ei(o,e,new Set,s,r.nodeId,l).catch(r=>{if(c){let e=`[${l}] Failed load version for preview in focus view: ${r}`;(0,_.$D)(i.FigmaTeam.DEVELOPER_TOOLS,Error(`[LOAD_VERSION_FOR_PREVIEW] ${e}`))}e.dispatch(E.s.error(r))})}),ep=(0,T.nF)((e,r)=>{let n=r.version,a=r.currentPageNodeId,o=r.fetchedPageIds,s=r.eventType;ei(n,e,o,a,void 0,s).then(()=>e.dispatch(w.ke({version:r.version}))).catch(r=>{let n=`[${s}] Failed load fig file for preview: ${r}`;(0,_.$D)(i.FigmaTeam.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${n}`)),e.dispatch(E.s.error(r))})}),em=(0,T.nF)(async(e,r)=>{if(!(0,d.kc)().version_diffing){e.dispatch(w.TO(r));return}let n=r.fromVersionId;if(!n)return;let i=J(n,e.getState().versionHistory);if(!i)return;let o=new Date().getTime(),l=await X(i.id,e);if(l){e.dispatch(E.s.error(l));return}let c=new Date().getTime(),u=e.getState().selectedView.editorType,p=O.lE[O.lE.COMPARE_CHANGES];if((0,s.sx)("versioning_performance_metrics",{name:"load_diff",durationMs:c-o,fromCheckpointKey:i.checkpoint_key,nodesToDiff:"all",editorType:u,source:p},{forwardToDatadog:!0}),i.canvas_url){let e=a.glU.getChangesToCompareFromHistoryChangesState();if(e.size>0){let r=Array.from(e).join(",");Y(`${i.canvas_url}&nodes_to_extract=${r}`,e=>{a.glU.loadPartialHistoryScene(e)})}}let m=a.glU.startComparingChanges()?"":"Error starting history compare";if(m){e.dispatch(E.s.error(m));return}let h=e.getState();e.dispatch(v.$T({...h.selectedView,compareVersionId:n,compareLatest:void 0})),(0,s.sx)("Version History Compare Start",{fromVersionId:n}),e.dispatch(w.TO(r))})},433861:(e,r,n)=>{"use strict";n.d(r,{Bj:()=>R,HA:()=>C,Os:()=>y,Pe:()=>p,QZ:()=>O,Vl:()=>N,aF:()=>L,b8:()=>w,cY:()=>A,f5:()=>h,j0:()=>I,k9:()=>f,kw:()=>g,l9:()=>S,lG:()=>E,t4:()=>_,u7:()=>T,zE:()=>b,zx:()=>v});var i=n(411855),a=n(730371),o=n(77909),s=n(860601),l=n(30637),c=n(572206),d=n(993285);let u=window.matchMedia("(prefers-reduced-motion: reduce)"),p={navigationDurationMs:200,animationTimingFunction:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,isGetViewportAtomic:!1},m=class e{constructor(e,r={}){this.getCommentDestinationForCanvasPosition=(e,r,n)=>this.viewport.getCommentDestinationForCanvasPosition(e,r,n),this.setCanvasSpaceCenter=(e,r,n)=>{this.viewport.setCanvasSpaceCenter(e,r,n)},this.setCurrentPageIdAsync=async e=>{await this.viewport.setCurrentPageIdAsync(e)},this.pageIdForNodeId=e=>this.viewport.pageIdForNodeId(e),this.getValidCommentsRect=()=>this.viewport.getValidCommentsRect(),this.viewport=e,this.config={...p,...r}}navigateTo(r,n,i={}){clearTimeout(this.delayTimeout),this.delayTimeout=void 0;let a=this.getViewportInfo();if(n||(n=a.zoomScale),u.matches||(0,l.nl)()||0===i.duration)return this.updateViewport(a,r,n),u.matches&&i.metricsCallback?.({prefersReducedMotion:!0}),Promise.resolve({cancelled:!1});let d=performance.now(),p=null,m=[],h=i.duration??this.config.navigationDurationMs;if(i.ignoreVisibleTargets){let n=c.Mi.subtract(r,{x:a.offsetX,y:a.offsetY});n=c.Mi.scale(1/a.zoomScale,n),n=c.Mi.abs(n);let o=Math.max(a.height,a.width)/2,s=e.DEFAULT_NAVIGATE_BUFFER*(1/a.zoomScale);if(c.Mi.max(n)<o-s)return i.metricsCallback?.({prefersReducedMotion:!1}),Promise.resolve({cancelled:!1})}let _=(0,o.v)(),g=!1,f=function(e){let r=document.getElementById("fullscreen-root");if(!r)return s.lQ;let n=()=>{r.addEventListener("mouseup",e),e()};return r.addEventListener("mousedown",n),()=>{r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",e)}}(()=>{g=!0}),E=e=>{if(i.metricsCallback){let r=0,n=0;m.length&&(n=Math.round(m.reduce((e,n,i)=>((0===i&&e>17||n>17)&&r++,e+n))/m.length)),i.metricsCallback({numberOfSlowFrames:r,avgFrameDuration:n,animationCancelled:e,totalFrames:m.length,prefersReducedMotion:!1})}f(),_.resolve({cancelled:e})},y=n-a.zoomScale,b=c.Mi.scale(a.zoomScale,{x:a.offsetX,y:a.offsetY}),I=c.Mi.scale(n,r),T=c.Mi.subtract(I,b),v=this.getViewportInfo(),S=()=>{var e;let o=this.getViewportInfo();if(this.config.isGetViewportAtomic&&((e=v).offsetX!==o.offsetX||e.offsetY!==o.offsetY||e.zoomScale!==o.zoomScale)||g||i.signal?.aborted){E(!0);return}let s=performance.now(),l=s-d;null!=p&&m.push(Math.round(s-p)),p=s;let u=Math.min(l/h,1),_=this.config.animationTimingFunction(u);if(_>=1){E(!1),this.updateViewport(o,r,n);return}let f=a.zoomScale+y*_,I=c.Mi.add(b,c.Mi.scale(_,T)),w=c.Mi.scale(1/f,I);this.updateViewport(o,w,f),requestAnimationFrame(S),v=this.getViewportInfo()};return i.delay?this.delayTimeout=setTimeout(()=>{d=performance.now(),S()},i.delay):S(),_.promise}getViewportInfo(){return this.viewport.getViewportInfo()}getRawViewportInfo(){return this.viewport.getRawViewportInfo()}getCommentsWrapperOffset(e){return this.viewport.getCommentsWrapperOffset(e)}setZoomScale(e,r){this.viewport.setZoomScale(e,r)}setHovering(e){this.viewport.setHovering(e)}updateViewport(e,r,n){this.setZoomScale(e.zoomScale,n),this.setCanvasSpaceCenter(r,e,n)}};m.DEFAULT_NAVIGATE_BUFFER=60;let h=m,_={x:0,y:0,width:1,height:1,offsetX:0,offsetY:0,zoomScale:1,isPanning:!1,isZooming:!1},g=i.createContext(new h({getViewportInfo:()=>_,getRawViewportInfo:()=>_,getCommentsWrapperOffset:e=>({x:0,y:0}),setCanvasSpaceCenter:e=>{},setZoomScale:(e,r)=>{},setHovering:e=>{},setCurrentPageIdAsync:e=>Promise.resolve(),pageIdForNodeId:e=>"1:0",getCommentDestinationForCanvasPosition:(e,r,n)=>null,getValidCommentsRect:()=>null})),f=i.createContext(_.x),E=i.createContext(_.y),y=i.createContext(_.width),b=i.createContext(_.height),I=i.createContext(_.offsetX),T=i.createContext(_.offsetY),v=i.createContext(_.zoomScale),S=i.createContext(_.isPanning),w=i.createContext(_.isZooming),A=i.createContext(0),N=i.createContext(!1),C=i.createContext({current:_}),O=i.createContext({current:_});function L({latestViewport:e,children:r}){let n=i.useRef(e),a=i.useRef(e);return a.current=n.current,n.current=e,i.createElement(O.Provider,{value:a},i.createElement(C.Provider,{value:n},i.createElement(f.Provider,{value:e.x},i.createElement(E.Provider,{value:e.y},i.createElement(y.Provider,{value:e.width},i.createElement(b.Provider,{value:e.height},i.createElement(I.Provider,{value:e.offsetX},i.createElement(T.Provider,{value:e.offsetY},i.createElement(v.Provider,{value:e.zoomScale},i.createElement(S.Provider,{value:e.isPanning},i.createElement(w.Provider,{value:e.isZooming},r)))))))))))}function R(e){let{getViewport:r}=e,[n,o]=i.useState(r()||_),s=i.useCallback(()=>{o(e=>{let n=r()||_;return(0,a.deepEquals)(e,n)?e:n})},[r,o]);return(0,d.N)(s),i.createElement(L,{latestViewport:n},e.children)}},902938:(e,r,n)=>{"use strict";n.d(r,{AM:()=>s,qr:()=>l});var i=n(411855),a=n(188507);n(587670),n(931828);var o=n(327017);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"};function l(){let[e,r]=i.useState(null),n=(0,a.d4)(e=>e.voice.showWidget);return i.useEffect(()=>{n&&!e&&r(o.h.getInstance())},[n,e]),e}},866564:(e,r,n)=>{"use strict";n.d(r,{_2:()=>a,w$:()=>o}),n(411855),n(188507);var i=n(776250);n(439729),n(939863),n(571232);let a="audio-paywall-key",o=(()=>{let e=!0,r=!1;return n=>{r||setTimeout(()=>{n>0&&e?(e=!1,(0,i.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(r=!0,(0,i.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})()},327017:(e,r,n)=>{"use strict";n.d(r,{h:()=>v,q:()=>y});var i=n(675678),a=n(776250),o=n(517333),s=n(966712),l=n(563706),c=n(36381),d=n(776621),u=n(988022),p=n(805286),m=n(301807),h=n(748207),_=n(618807),g=n(338400),f=n(636751);let E=e=>e>.1,y=.05,b=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),I=0,T=class e{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,_._)({}),this.activeSpeakerIdStore=(0,_._)(null),this.recentlySpokeIdStore=(0,_._)(null),this.setMicrophone=async e=>{try{this.unpublishedLocalAudioTrack?.setDevice(e.deviceId),await this.localAudioTrack?.setDevice(e.deviceId),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{try{this.client?.remoteUsers.forEach(r=>r.audioTrack?.setPlaybackDevice(e.deviceId)),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>this.AgoraRTC?.getPlaybackDevices(e),this.currentMicrophone=async()=>this.microphone||(await this.getMicrophones())?.[0],this.currentPlaybackDevice=async()=>this.playbackDevice||(await this.getPlaybackDevices())?.[0],this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);n&&e.push(n)}return e.push(this.userId),e},this.startPollingMicState=()=>{o.eD&&(this.microphonePermissionDenied&&o.eD.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{this.client&&(o.eD?.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),o.eD?.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>this.client?.localTracks.some(e=>e.getTrackId()===this.localAudioTrack?.getTrackId()),this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{if(!this.client||!this.userId)return;let e={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);if(!n)continue;let i=r.audioTrack?.getVolumeLevel()||0,a=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(a||0)+i,e[n]={isMuted:!r.audioTrack,volumeLevel:i}}let r=this.localAudioTrack?.getVolumeLevel()||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+r,e[this.userId]={isMuted:this.isMuted,volumeLevel:r},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(e),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&this.callEventCallback?.(f.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED)},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>y).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{p.R9.sendVoiceMetadata(""),this.stopPollingVolumeData(),o.eD?.setIsInVoiceCall(!1),o.eD?.setUsingMicrophone(!1),this.localAudioTrack?.setEnabled(!1),this.unpublishedLocalAudioTrack?.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{this.microphone?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{this.playbackDevice?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&l.Ay.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new m.b,this.audioCaptionStream=new h.T,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,s.kc)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,s.kc)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),b[I++%b.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((r,n)=>{let i=document.createElement("script");i.src="https://static.figma.com/uploads/0706b46bdc09a419282285b791ea1dd3c019ecd6",i.setAttribute("nonce",(0,s.tl)().csp_nonce),i.onload=()=>{let n=window.AgoraRTC;this.instance=new e(n),r()},i.onerror=()=>{n(Error("Provider audio script load error"))},document.body.appendChild(i)})}static getInstance(){return this.instance}static leave(){this.instance?.leave()}async join({appId:r,callId:n,token:i,callUserId:s,userId:c,encryptionKey:d,userEncryptionKey:p,setParticipantIdsCallback:m,callEventCallback:h,store:_,fileKey:g}){if(await this.setMicrophonePermissions(),!this.getSystemCompatibility())throw Error("System incompatible");this.setParticipantIdsCallback=m,this.userId=c,this.userEncryptionKey=p,this.callEventCallback=h;try{let e="vp8";l.Ay.safari&&+l.Ay.version>=13&&(e="h264"),await this.client?.leave(),this.client=this.AgoraRTC.createClient({mode:"live",codec:e}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=c,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",d),this.attachClientListeners(n,i,c,d,h),await this.client.join(r,n,i,s),o.eD?.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(o){(0,a.sx)("Voice Call - Error",{callId:n,token:i,userId:c,encryptionKey:d,message:`${o.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let r=Error(`Error joining call: ${o.message}`);throw await e.leave(),r}finally{(0,u.ds)("voice_user_joined",g,_.getState(),{callId:n,userId:c,encryptionKey:d,captions_enabled:this.captionsToggleEnabled}),(this.client?.connectionState!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){return this.client?.uid}async renewToken(e){await this.client?.renewToken(e),this.handlingTokenExpiration=!1,(0,a.sx)("Voice Call - Token Renewed",{token:e,userId:this.client?.uid&&this.decryptedUserMap[this.client?.uid]})}async leave(){await this.client?.leave(),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){await this.localAudioTrack?.setEnabled(!1),this.audioCaptionQueues.removeTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){await this.localAudioTrack?.setEnabled(!0),(0,g.WO)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){(0,g.WO)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(this.client?.remoteUsers.forEach(async e=>{let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,e.audioTrack?.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&E(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,r,n,i,s){this.client?.removeAllListeners(),this.client?.on("user-published",async(e,r)=>{if(await this.client?.subscribe(e,r),"audio"===r){let r=e.audioTrack||null;if(r?.play(),this.playbackDevice&&r?.setPlaybackDevice(this.playbackDevice.deviceId),g.WO()&&r&&this.streamingAudioForCaptions){let n=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(n,r.getMediaStreamTrack())}}}),this.client?.on("user-unpublished",async(e,r)=>{if(!o.eD||"audio"!==r)return;let n=await this.getDecryptedUserId(e.uid);if(!n)return;let i=new Set;for(let r of this.client?.remoteUsers||[]){let a=await this.getDecryptedUserId(r.uid),o=e.audioTrack?.getMediaStreamTrack().id;a===n&&o&&i.add(o)}this.audioCaptionQueues.removeUnpublishedTrack(n,i)});let l=!0;this.client?.on("network-quality",function(o){l&&(o.downlinkNetworkQuality>=4||o.uplinkNetworkQuality>=4)?(a.sx("Voice Call - Bad Call Quality",{callId:e,token:r,userId:n,encryptionKey:i,message:`Bad call quality detected. downlink = ${o.downlinkNetworkQuality}, uplink = ${o.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),l=!1):l=!0}),this.client?.on("user-joined",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_JOINED,r)}),this.client?.on("user-left",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_LEFT,r)}),this.client?.on("connection-state-change",async r=>{let n;switch(r){case"CONNECTED":if(p.R9.sendVoiceMetadata(e),this.setParticipantIdsCallback?.(await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=f.$E.CONNECTED_WITH_MIC_DISABLED;break}n=f.$E.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=f.$E.DISCONNECTED;break;case"CONNECTING":n=f.$E.CONNECTING;break;case"DISCONNECTING":n=f.$E.DISCONNECTING;break;case"RECONNECTING":n=f.$E.RECONNECTING}void 0!==n&&s(n)}),this.client?.on("exception",o=>{let l;switch(o.code){case 2001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&s(l),o.code>=3e3?(console.error(o),a.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:i,message:o.msg,code:o.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):a.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:i,message:o.msg,code:o.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),this.client?.on("token-privilege-will-expire",()=>{if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!this.client?.remoteUsers.length){s(f.$E.CALL_INACTIVE),a.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:i,callInactive:!0});return}s(f.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),a.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:i})}}),this.client?.on("token-privilege-did-expire",()=>{s(f.$E.TOKEN_EXPIRED),a.sx("Voice Call - Token Did Expire",{callId:e,token:r,userId:n,encryptionKey:i})})}async getDecryptedUserId(e){try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,c.We)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,d.$D)(i.FigmaTeam.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),this.callEventCallback?.(f.$E.ERROR)}}async setMicrophonePermissions(){if(o.eD){this._microphonePermissionDenied=!await o.eD.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}};T.instance=null;let v=T},338400:(e,r,n)=>{"use strict";n.d(r,{HJ:()=>y,Lk:()=>m,Mw:()=>f,WO:()=>g,YL:()=>_,gW:()=>h,nN:()=>E});var i=n(411855),a=n(188507),o=n(517333),s=n(358145),l=n(563706);n(178466);var c=n(891093),d=n(984968),u=n(636751);let p=()=>!((0,l.wg)()||(0,l.o4)());function m(){let e=(0,a.d4)(e=>e.openFile),r=(0,a.d4)(e=>e.orgById),n=(0,a.d4)(e=>e.teams),o=e?.key,l=(0,a.d4)(e=>o&&!!e.voice.activeCall[o]),[c,d]=i.useState(!1),u=(0,s.ZC)(c);return i.useEffect(()=>{let i=p()&&4===_({openFile:e,teams:n,orgById:r});!0===u&&!i&&l||d(i)},[e,r,n,u,l]),c}var h=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",e[e.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",e[e.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",e[e.ELIGIBLE=4]="ELIGIBLE",e))(h||{});function _(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let r=e.openFile;if(!r||!r.parentOrgId&&!r.teamId)return 0;if(r.parentOrgId){let n=e.orgById[r.parentOrgId];return n?n.voice_enabled?4:1:0}if(r.teamId){let n=e.teams[r.teamId];return n?(0,d.PS)(n)?4:3:0}return 2}function g(){return!!o.eD}function f(e){return e>=u.MK.STARTED&&e<u.MK.DONE}function E(e){return e<u.MK.NOT_STARTED}function y(e,r){o.eD?.setCaptionsEnabled(r),e(c.t7(r))}},325538:(e,r,n)=>{"use strict";n.d(r,{Em:()=>o,TI:()=>s,Wl:()=>a});var i=n(411855);function a(e,r){let[n,a]=(0,i.useState)(null),[o,s]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(r&&!o){let n=function(r){a(r[e]||null)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)?n:null}function o(e,r,n){let i=r=>{n(r[e]||null)};return r&&r.volumeLevelsStore.subscribe(i),{unsubscribe:()=>r?.volumeLevelsStore.unsubscribe(i)}}function s(e,r){let[n,a]=(0,i.useState)(),[o,s]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(r&&!o){let n=function(r){a(r[e]?.isMuted)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)return n}},349719:(e,r,n)=>{"use strict";n.d(r,{$g:()=>S,Au:()=>_,BG:()=>p,Bt:()=>c,GD:()=>I,LF:()=>T,Qn:()=>b,_L:()=>h,bf:()=>i,fL:()=>d,hQ:()=>E,le:()=>y,mX:()=>g,oF:()=>u,pY:()=>m,rx:()=>v,sZ:()=>f,u_:()=>l,wS:()=>w,w_:()=>A});var i,a=n(776621),o=n(743282);function s(e){window.parent.postMessage(e,"*")}function l(){s({type:"FIGMA_READY"})}function c(e){s({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function d(e){s({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function u(e){s({type:"TEXT",data:{text:e}})}function p(e,r){s({type:"LAYERS",data:{rootNodeId:e,layers:r}})}function m(e){s({type:"ASSET",data:{asset:e}})}function h(e){s({type:"RELATED_LINK_CREATED",data:{link:e}})}function _(e){s({type:"RELATED_LINK_REMOVED",data:{link:e}})}function g(e){s({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function f(e){s({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function E(e){s({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function y(e){s({type:"GENERATED_CODE",data:{sections:e}})}let b=(0,n(479296).n)(e=>{s({type:"OPEN_IN_BROWSER",data:{href:e}})});function I(e){s({type:"FILE_NAME",data:{name:e}})}function T(e,r,n){s({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:r,thumbnailSize:n}})}function v(){s({type:"PAGE_LOADED"})}function S(){s({type:"IDLE_LOGOUT"})}(e=>{e.sendGetLocalFileExtensionManifest=function(e){return w.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,r){return w.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:r}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return w.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return w.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return w.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return A.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return A.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return A.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return s({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return s({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return w.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return w.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return s({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return w.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return w.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(i||(i={}));let w=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let r=(0,o.g)(),n={...e,requestId:r};return new Promise((e,i)=>{this.pendingMessagesById[r]={...n,resolve:e,reject:i},s(n)})}resolveMessage(e){let r=this.pendingMessagesById[e.requestId];if(!r){(0,a.x1)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(r.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},A=new class{constructor(){this.callbacksById={}}registerCallback(e,r){let n=(0,o.g)();return this.callbacksById[n]=r,s({...e,callbackId:n}),()=>this.cancelCallback(n)}resolveMessage(e){let r=this.callbacksById[e.callbackId];if(!r){(0,a.x1)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}r(e.callbackData)}async cancelCallback(e){await w.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},421234:(e,r,n)=>{"use strict";function i(e){let r={},n=0,i=0;return e.forEach(e=>{if(e.workspace_id){let n=r[e.workspace_id]??0;n++,r[e.workspace_id]=n}else e.team_id?n++:i++}),{libraryCountByWorkspaceId:r,unassignedLibrariesCount:n,draftLibrariesCount:i}}n.d(r,{wM:()=>i}),n(411855),n(966159),n(733556),n(711525),n(939863),n(679892),n(99506)},657193:(e,r,n)=>{"use strict";n.d(r,{Ay:()=>L,yP:()=>C});var i=n(737947),a=n(966712),o=n(687396),s=n(837324),l=n(410424),c=n(941381),d=n(944682),u=n(738269),p=n(270056),m=n(293017),h=n(782656),_=n(445092),g=n(988022),f=n(857766),E=n(355513),y=n(630331),b=n(243987),I=n(707465),T=n(783967),v=n(935757),S=n(239671),w=n(668526),A=n(402465),N=n(396248);let C=(e,r)=>I.$Z.selectedViewHasMissingResources(e,r),O=0,L=e=>r=>function(n){var L,R;let P=e.getState().selectedView;r(n);let D=e.getState();if(u.Qv.matches(n)){let r=D.selectedView;if(r===A.o0&&(r=(0,a.Ay)().selected_view||(0,I.vU)(D,i.Ay.location.pathname,i.Ay.location.search,i.Ay.location.hash)),"fullscreen"===r.view&&r.fileKey){let{fileKey:i}=r,a=e.getState().fileByKey[i];a&&!n.payload.fromRealtime&&(0,S.oD)(r.editorType)!==a.editor_type&&(r.editorType=(0,S.wN)(a.editor_type??"design"))}if(C(D,r)&&(r={view:"resourceUnavailable",resourceType:(L=r,new o.$T().selectedViewMissingResourceType(D,L))}),"teamUpgrade"===r.view&&r.teamId){let e=D.teams[r.teamId];e&&e.pro_team&&!(0,b.WQ)(e)&&(r={view:"team",teamId:r.teamId,teamViewTab:w.A.SETTINGS})}r!==A.o0?e.dispatch(u.$T(r)):D.user?.drafts_folder_id?e.dispatch(u.$T({view:"folder",folderId:D.user.drafts_folder_id})):e.dispatch(u.$T({view:"recentFiles"}))}else if(m.OB.matches(n)){let e={view:"fullscreen",fileKey:n.payload.file.key,editorType:n.payload.fullscreenEditorType},r=(0,I.Np)(D,e);i.Ay.replace(r,{...e,jsCommitHash:(0,E.Qr)()})}else if(u.$T.matches(n)){if("prototype"!==P.view&&"prototype"===n.payload.view&&(0,N.q)()){let e=(0,I.Np)(D,n.payload);i.Ay.redirect(e)}"fullscreen"===n.payload.view&&("fullscreen"!==P.view||n.payload.editorType!==P.editorType)&&y.B8(n.payload.editorType);let{selectedView:r}=e.getState();if(!("inlinePreview"in r&&r.inlinePreview)&&!n.payload.fromPopstate){let r=(0,I.Np)(D,n.payload);i.Ay.location.pathname+i.Ay.location.search!==r?(("fullscreen"!==n.payload.view||n.payload.fileKey!==a.Ay().editing_file?.key)&&!v.YH&&(0,T.w)()&&(0,v._X)("fileBrowserHistory middleware selectView").then(r=>{e.dispatch(u.Qv(r.data.meta))}),!n.payload.forceReplaceState&&i.Ay.location.state&&(R=n.payload,null==P||null==R?P!==R:I.$Z.requireHistoryChange(P,R))?i.Ay.push(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}):i.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()})):null==i.Ay.location.state&&i.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}),e.getState()?.user?.appData?.loggedOut&&"fullscreen"!==n.payload.view&&i.Ay.reload("User Logged out")}if("searchAndBrowse"===n.payload.subView){let e=n.payload.data;e&&!e.category&&(0,E.hL)((0,s.vC)(e))}else(0,E.OR)(D,n.payload)}else if(l.Af.matches(n)&&"hubFile"===D.selectedView.subView)(0,E.OR)(D,{hubFileId:n.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(c.l5.matches(n)){let r=e.getState().selectedView,a=n.payload.publishedPlugins,o=r&&"communityHub"===r.view&&"plugin"===r.subView&&r.publishedPluginId;if(o&&a&&a.some(e=>e.id===o)){if(i.Ay){let e=(0,I.Np)(D,r);i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}(0,E.OR)(D,r)}}else if(p.yJ.matches(n)){let r=e.getState().selectedView;"folder"===r.view&&r.folderId===n.payload.folder.id&&(0,E.OR)(D,r)}else if(p.bE.matches(n)){let r=e.getState().selectedView;if("folder"===r.view&&r.folderId===n.payload.id){(0,E.OR)(D,r);let e=(0,I.Np)(D,r);i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(h.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view){let e=r.fileKey&&D.fileByKey[r.fileKey];if(e){let a=(0,f.L8)(e,D.repos);if(a&&a.id===n.payload.repo.id){(0,E.OR)(D,r);let e=(0,I.Np)(D,r);i.Ay&&i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}}}else if(d.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view&&n.payload.file.key===r.fileKey||"prototype"===r.view&&n.payload.file.key===r.file.key){(0,E.OR)(D,r);let e=(0,I.Np)(D,r);i.Ay&&i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(_.Rz.matches(n)){let r=e.getState().selectedView;r?.view==="search"&&(i.Ay.replace((0,I.Np)(D,r),{...r,jsCommitHash:(0,E.Qr)()}),(0,E.OR)(D,r))}else u.Oe.matches(n)?(0,g.uE)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:n.payload.clickedResourceType,resourceIdOrKey:n.payload.resourceIdOrKey}):0===O&&(O=setTimeout(function(){O=0,null===e.getState().selectedView&&e.dispatch(u.$T({view:"recentFiles"}))},0));return n}},288300:(e,r,n)=>{"use strict";n.d(r,{MM:()=>s,Rt:()=>o,Vq:()=>l});var i=n(330654),a=n(867795),o=(e=>(e.ALL="All",e.STICKERS_AND_COMPONENTS="Stickers",e.TEMPLATES="Templates",e.TEAM_TEMPLATES="TeamTemplates",e.WIDGETS="Widgets",e.PLUGINS="Plugins",e.MORE="More",e.ORG_FACE_STAMPS="OrgFaceStamps",e.COLOR_PALETTES="ColorPalettes",e))(o||{});let s=i.enum(["universal-insert-figjam-all","universal-insert-figjam-all-use-case","universal-insert-figjam-templates","universal-insert-figjam-stickers","universal-insert-figjam-stickers-compact-view","universal-insert-figjam-widgets","universal-insert-figjam-plugins","universal-insert-figjam-more","universal-insert-figjam-collage","universal-insert-figjam-all-whiteboard-tools"]);function l(e){switch(e){case a.p.ALL:return"universal-insert-figjam-all";case a.p.TEMPLATES:return"universal-insert-figjam-templates";case a.p.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case a.p.WIDGETS:return"universal-insert-figjam-widgets";case a.p.PLUGINS:return"universal-insert-figjam-plugins";case a.p.MORE:return"universal-insert-figjam-more";case a.p.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},179536:(e,r,n)=>{"use strict";n.d(r,{_V:()=>o,b4:()=>a,kM:()=>i});var i=(e=>(e[e.Text=0]="Text",e[e.FrameOrGroup=1]="FrameOrGroup",e[e.Component=2]="Component",e[e.Instance=3]="Instance",e[e.Image=4]="Image",e[e.Shape=5]="Shape",e[e.Other=6]="Other",e[e.MatchCase=7]="MatchCase",e[e.WholeWords=8]="WholeWords",e))(i||{});let a=[0,1,2,3,4,5,6],o=[7,8]},694241:(e,r,n)=>{"use strict";n.d(r,{Yv:()=>a,fJ:()=>i});let i="f195f195-f195-f195-f195-f195f195f195";var a=(e=>(e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM",e))(a||{})},555328:(e,r,n)=>{"use strict";n.d(r,{I0:()=>y,KS:()=>m,PM:()=>T,Qv:()=>_,U:()=>b,Ug:()=>p,aL:()=>c,bD:()=>s,cS:()=>g,dj:()=>A,hE:()=>l,m3:()=>I,po:()=>w,vt:()=>u,xQ:()=>E,zF:()=>v});var i=n(330654),a=n(440535),o=n(178787),s=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.COMMENT="comment",e))(s||{}),l=(e=>(e.SUBSCRIPTION="subscription",e.ONE_TIME="one_time",e))(l||{}),c=(e=>(e.DETAIL="detail",e.INSERTS="inserts",e.QUICK_ACTIONS="quick_actions",e.PLUGIN_ROW="plugin_row",e.REDESIGNED_PLUGIN_ROW="redesigned_plugin_row",e.SEARCH="search",e))(c||{}),d=(e=>(e[e.NO_USER=0]="NO_USER",e[e.NO_PROFILE=1]="NO_PROFILE",e))(d||{}),u=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e))(u||{}),p=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.PROFILE="profile",e))(p||{});let m=a.iG.extend({author:i.ignore(),parent_id:i.string().nullable(),reply_count:i.number(),last_replied_at:i.string().nullable(),resource_version_id:i.string(),message_meta:i.array(i.ignore()),rating_value:i.number().optional()});i.object({plugin:i.ignore().nullish(),plugin_install:i.ignore().nullish(),whitelisted_plugin:i.ignore().nullish(),hub_file:i.ignore().nullish(),profile:i.ignore().nullish(),community_comment:i.ignore().nullish(),widget:i.ignore().nullish(),community_resource_payment:i.ignore().nullish()});var h=(e=>(e[e.SHOW_404=0]="SHOW_404",e[e.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",e))(h||{}),_=(e=>(e.ALL="ALL",e.ME="ME",e.RATINGS_REVIEWS="RATINGS_REVIEWS",e.COMMENTS="COMMENTS",e))(_||{}),g=(e=>(e.COMMUNITY_LANDING="community_landing",e.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",e.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.CURATED_PAGE="curated_page",e.NA="na",e.CONFIG_VOTE="config_vote",e.COMMUNITY_WIDGETS_PAGE="community_widgets_page",e.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",e.FIGMA_INSERTS_NUX="figma_inserts_nux",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",e.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",e.CATEGORY_PAGE="category_page",e.PIPER_TEMPLATE_MODAL="piper_template_modal",e.SLIDES_FEATURED_CREATORS="slides_featured_creators",e))(g||{}),f=(e=>(e.PM="PM",e.DES="DES",e.ENG="ENG",e.MKT="MKT",e.UR="UR",e.OTH="OTH",e.ALL="ALL",e.STARTER="STARTER",e))(f||{});function E(e){return"is_widget"in e&&e.is_widget}function y(e){return"current_plugin_version_id"in e&&!e.is_widget}function b(e){return"client_meta"in e}function I(e){return!!e?.monetized_resource_metadata}function T(e){return!!e?.monetized_resource_metadata?.has_freemium_code}function v(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===o.PN.FLAGGED}var S=(e=>(e.POST_COMPOSER="POST_COMPOSER",e.NAVBAR="NAVBAR",e.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",e.IFRAME="IFRAME",e))(S||{}),w=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(w||{}),A=(e=>(e.PASTE="paste",e.DROP="drop",e.FILE_INPUT="file_input",e))(A||{}),N=(e=>(e[e.TRY_IT_OUT=0]="TRY_IT_OUT",e[e.OPEN=1]="OPEN",e))(N||{});i.object({id:i.string().nullish(),hubFileId:i.string().nullish(),pluginId:i.string().nullish(),widgetId:i.string().nullish(),oneStars:i.number(),twoStars:i.number(),threeStars:i.number(),fourStars:i.number(),fiveStars:i.number(),totalRatings:i.number(),avgRating:i.number().nullish(),createdAt:i.date().nullish(),updatedAt:i.date().nullish()})},454351:(e,r,n)=>{"use strict";n.d(r,{A:()=>i,b:()=>a});var i=(e=>(e.FILE="file",e.REPO="repo",e.FILE_IMPORT="file_import",e))(i||{}),a=(e=>(e[e.FOLDER_ROW=0]="FOLDER_ROW",e[e.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",e))(a||{})},945020:(e,r,n)=>{"use strict";n.d(r,{M8:()=>c,UE:()=>p,Ws:()=>u,ai:()=>l,av:()=>h,f6:()=>s,kF:()=>d,lF:()=>m,zy:()=>_});var i=n(711525),a=n(330654),o=n(376485),s=(e=>(e.FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",e.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",e.FILE_BROWSER_SIDEBAR_FOLDER="file_browser_sidebar_folder",e.FILE_BROWSER_THUMBNAILS_RECENTS="file_browser_thumbnails_recents",e.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",e.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",e.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",e.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",e.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",e.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",e.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",e.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",e.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",e.FILE_BROWSER_FEED="file_browser_feed",e.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",e.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",e.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",e.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",e.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",e.FILE_BROWSER_NUX="file_browser_nux",e.FILE_BROWSER_ONBOARDING="file_browser_onboarding",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",e.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",e.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",e.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",e.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",e.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",e.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",e.FIGJAM_EDITOR_FILE_CREATE_BUTTON="figjam_editor_file_create_button",e.OFFLINE_NOTIFICATION="offline_notification",e.COMMUNITY_COLLECTIONS_PAGE="community_collections_page",e.FIGJAM_MAKE_SOMETHING_POPUP="figjam_make_something_popup",e.CONFIG_24_FEATURE_ANNOUNCEMENT_CAROUSEL="config_24_feature_announcement_carousel",e.DESIGN_TO_SLIDES_ENTRYPOINT="design_to_slides_entrypoint",e.BOARD_TO_DECK_FILE_MENU="figjam-file-editor-menu",e.BOARD_TO_DECK_SHARE_MODAL="figjam-share-modal",e.BOARD_TO_DECK_SELECTION="figjam-selection-inline-menu",e.BOARD_TO_DECK_PAGES_CONTEXT_MENU="figjam-page-context-menu",e))(s||{}),l=(e=>(e.NEW_TAB="new_tab",e.SAME_TAB="same_tab",e))(l||{});let c="multiplayer_user_state_change";var d=(e=>(e[e.NONE=0]="NONE",e[e.FOR_OPEN=1]="FOR_OPEN",e[e.FOR_MENU=2]="FOR_MENU",e))(d||{});function u(e){return e?{id:e.id,name:e.name,org_id:e.orgId,img_url:e.imgUrl??void 0,subscription:e.subscription,restrictions_list:e.restrictionsList,student_team_at:e.studentTeamAt?e.studentTeamAt.toString():null,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toString():null,deleted_at:e.deletedAt?e.deletedAt.toString():null,created_at:e.createdAt.toString(),student_team:!!e.studentTeamAt}:null}function p(e,r){let n={key:e.key,isAbandonedDraftFile:{status:i.tT.Loaded,data:!1},teamId:e.team_id,folderId:e.folder_id,clientMeta:e.client_meta,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,sourceFileKey:e.source_file_key,linkAccess:e.link_access,hasFileLinkPassword:e.has_file_link_password,hasProtoLinkPassword:e.has_proto_link_password,updatedAt:new Date(e.updated_at||e.created_at),trashedAt:e.trashed_at?new Date(e.trashed_at):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,creatorId:e.creator_id,createdAt:new Date(e.created_at),name:e.name,_name:e.name,editorType:e.editor_type||"design",orgBrowsable:e.org_browsable||null,thumbnailGuid:e.thumbnail_guid||null,sourceCheckpointId:e.source_checkpoint_id||null,license:e.license,isTeamTemplate:!!e.is_team_template,figFileLinks:[],isFavorited:!!e?.is_favorited,isTryFile:e.is_try_file,votingSessions:null,template:null,canPublishTemplate:!1,viewerExportRestricted:!!e.viewer_export_restricted,publishedHubFile:null,ownerRole:null,trackTags:{isTemplate:e.is_template||null},libraryKey:e.library_key??""};if(!r)return n;let{team:a,folder:o,repo:s,sourceFile:l,can_delete:c,can_edit:d,can_edit_canvas:u,can_access_dev_mode_entry_point:p,can_access_full_dev_mode:m,can_manage:h,can_view:_,showEditButton:g,hasEduGracePeriod:f,org:E,orgUser:y,teamUser:b}=r;return{...n,team:function(e,r=!1){return e?{id:e.id,name:e.name,orgId:e.org_id,subscription:e.subscription,imgUrl:e.img_url||null,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team_at?new Date(e.student_team_at):e.student_team?new Date:null,trialPeriodEnd:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,createdAt:new Date(e.created_at),eduGracePeriod:{id:"",isValid:r},licenseGroupId:e.license_group_id,licenseGroup:e.license_group,workspaceId:e.workspace_id,orgAccess:e.org_access,studentTeamState:e.student_team_state}:null}(a,f),project:o?function(e,r=!0,n=!0){return{id:e.id,orgId:e.org_id||null,teamId:e.team_id,path:e.path,inviteOnlyAt:e.is_invite_only?new Date:null,viewOnlyAt:e.is_view_only?new Date:null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,subscription:e.is_subscribed?{}:null,description:e.description,canEdit:r,canRename:n,canCreateDesignFile:e.canCreateDesignFile,canCreateFigjamFile:e.canCreateFigjamFile,canCreateSlidesFile:e.canCreateSlidesFile}}(o):null,repo:s?{id:s.id,name:s.name,folderId:s.folder_id,teamId:s.team_id,defaultFileKey:s.default_file_key,canEdit:!0}:null,sourceFile:l?{key:l.key,name:l.name,fileRepoId:l.file_repo_id,canManage:l.can_manage,canView:l.can_view}:null,showEditButton:g,canDelete:c,canEdit:d,canEditCanvas:u,canAccessDevModeEntryPoint:p,canAccessFullDevMode:m,canManage:h,canView:_,org:E?{figjamDisabledAt:E.figjam_disabled_at,inviteWhitelist:{guestInviteSetting:E.invite_whitelist_guest_invite_setting},name:E.name,isSlidesDisabled:(0,i.Wk)(!!E.is_slides_disabled)}:null,currentPartialOrgUser:y?{draftsFolderId:y.drafts_folder_id,designPaidStatus:y.design_paid_status,whiteboardPaidStatus:y.whiteboard_paid_status,accountType:y.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null,devModeAccountTypeRequest:null}:null,currentTeamUser:b?{whiteboardPaidStatus:b.whiteboard_paid_status,designPaidStatus:b.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null}:null}}a.object({displayName:a.string(),runPluginArgs:o.Ps.optional()});var m=(e=>(e[e.BAR=0]="BAR",e[e.SPINNER=1]="SPINNER",e))(m||{});class h{constructor(e,r,n){this.tabCloseText=e,this.unsaved=r,this.error=n,this.hasUnsavedChanges=!1,this.hasUnsavedChanges=r.hasAutosaveChanges||r.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var _=(e=>(e[e.CUT=0]="CUT",e[e.COPY=1]="COPY",e[e.PASTE=2]="PASTE",e))(_||{})},813408:(e,r,n)=>{"use strict";n.d(r,{I7:()=>g,aP:()=>l,k2:()=>s,kM:()=>f,o1:()=>d,xK:()=>h});var i=n(330654),a=n(882225),o=n(583894),s=(e=>(e.RESOURCE_PAGE="resource_page",e.EDITOR="editor",e.UNIVERSAL_POSTING="universal_posting",e.ADMIN="admin",e))(s||{}),l=(e=>(e[e.EDIT=0]="EDIT",e[e.PREVIEW=1]="PREVIEW",e[e.UPLOADING=2]="UPLOADING",e[e.SUCCESS=3]="SUCCESS",e[e.FAILURE=4]="FAILURE",e))(l||{});let c=i.object({"500_500":i.string().optional(),"120_120":i.string().optional()});var d=(e=>(e.USER="user",e.TEAM="team",e.ORG="org",e))(d||{});let u=i.object({email:i.string().optional(),user_id:i.string(),is_primary_user:i.boolean(),can_sell_on_community:i.boolean().optional()}),p=a.n.and(i.object({id:i.string(),name:i.string(),profile_handle:i.string(),img_url:i.string().optional(),img_urls:c,current_user_is_following:i.boolean(),current_user_is_followed:i.boolean(),is_restricted_by_current_user:i.boolean(),entity_type:i.nativeEnum(d),primary_user_id:i.string().nullable(),location:i.string().nullable(),follower_count:i.number(),following_count:i.number(),isPending:i.boolean().optional(),associated_users:i.array(u).optional(),has_published:i.boolean().optional(),description:i.string().nullable()})),m=i.object({accepted:i.array(p),pending:i.array(p).optional()}),h=i.object({creator:o.aw,publisher:p,community_publishers:m}),_=o.aw.pick({id:!0,email:!0}),g=i.object({accepted:i.array(o.aw),pending:i.array(_).optional()});var f=(e=>(e.OWNER="owner",e.PUBLISHER="publisher",e.NONE="none",e))(f||{})},279702:(e,r,n)=>{"use strict";n.d(r,{Ae:()=>m,Gf:()=>l,PW:()=>u,gK:()=>h,w3:()=>_,zk:()=>d});var i=n(634832),a=n(566418),o=n(587670),s=n(534611);let l={isInitialized:!1,hasMissingFonts:!1,activeUserAction:o.QOV.DEFAULT,currentTool:o.NLJ.SELECT,currentStampToolName:null,activeCanvasEditModeType:o.m1T.DESIGN_LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:o.lyf.LAYOUT,urlNodeId:"-1:-1",hideMultiplayerCursors:!1,showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:o.vRS.NONE,index:-1},currentSelectedProperty:{type:o.rrT.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:o.kul.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:o.nzw.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11,measurementId:"",initMeasurementText:"",isCentered:!1,invertTextPosition:!1},votingSessionInfo:{sessionId:"",votingStage:o.W8Y.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:o.aTl.ATTACHED_FILE_TIP,lastBranchingStagingAction:o.YIO.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var c=(e=>(e[e.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",e[e.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",e))(c||{}),d=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",e[e.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",e[e.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",e))(d||{}),u=(e=>(e[e.NOT_ASSET=0]="NOT_ASSET",e[e.ASSET_ICON=1]="ASSET_ICON",e[e.ASSET_IMAGE=2]="ASSET_IMAGE",e[e.ASSET_GIF=4]="ASSET_GIF",e[e.ASSET_VIDEO=8]="ASSET_VIDEO",e[e.ASSET_COMPONENT=16]="ASSET_COMPONENT",e))(u||{});function p(e){switch(e){case o.rXF.BOOLEAN:return"BOOLEAN";case o.rXF.COLOR:return"COLOR";case o.rXF.FLOAT:return"FLOAT";case o.rXF.STRING:return"STRING";case o.rXF.SYMBOL_ID:return"SYMBOL_ID";case o.rXF.MAP:return"MAP";case o.rXF.FONT_STYLE:return"FONT_STYLE";case o.rXF.TEXT_DATA:return"TEXT_DATA";default:(0,i.assertNever)(e)}}function m(e){return e.map(e=>o.j0r[e])}function h(e){return e?e.map(e=>o.j0r[e]):[o.j0r.ALL_SCOPES]}function _(e){let r={entries:[]};return Object.keys(e).forEach(n=>{let i=e[n];if(i){if(i.isMixed)return;{let e=function(e){function r(e){if(e.type!==o.Z_n.ALIAS)return null;let r=a.sD.fromString(e.value);return r?a.sD.toKiwi(r):null}switch(e.type){case o.Z_n.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case o.Z_n.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case o.Z_n.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case o.Z_n.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case o.Z_n.ALIAS:{let n=r(e);if(!n)return null;return{dataType:"ALIAS",resolvedDataType:p(e.resolvedType),value:{alias:n}}}case o.Z_n.NODE_FIELD_ALIAS:{let r=[];for(let n of e.value.stablePathToNode){let e=(0,s.sH)(n);if(!e)return null;r.push(e)}let n=e.value.nodeField,i=e.value.indexOrKey;if(!r||!n||!i)return null;if("COMPONENT_PROP_ASSIGNMENTS"===n)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:p(e.resolvedType),value:{nodeFieldAliasValue:{stablePathToNode:{guids:r},nodeField:n,indexOrKey:i}}};return null}case o.Z_n.FONT_STYLE:{let n=e.value.asFloat&&r(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:r(e.value.asFloat)}:e.value.asString&&r(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:r(e.value.asString)}:null;if(!n)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[n.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:n.resolvedDataType,value:{alias:n.variableId}}}}}}case o.Z_n.MAP:case o.Z_n.EXPRESSION:case o.Z_n.SYMBOL_ID:case o.Z_n.TEXT_DATA:return null}}(i);e&&r.entries?.push({variableData:e,variableField:n})}}else r.entries.push({variableField:n})}),r}},172981:(e,r,n)=>{"use strict";n.d(r,{O:()=>s});var i=n(634832),a=n(939863),o=n(155367);function s(e,r){switch(e){case o.J7.ACTIVITY:return(0,a.t)("org_admin_tab.activity");case o.J7.DASHBOARD:return(0,a.t)("org_admin_tab.dashboard");case o.J7.WORKSPACES:return(0,a.t)("org_admin_tab.workspaces");case o.J7.TEAMS:return(0,a.t)("org_admin_tab.teams");case o.J7.MEMBERS:return(0,a.t)("org_admin_tab.members");case o.J7.BILLING:return(0,a.t)("org_admin_tab.billing");case o.J7.RESOURCES:switch(r){case o._d.LIBRARIES:return(0,a.t)("resources_tab.libraries");case o._d.SHARED_FONTS:return(0,a.t)("resources_tab.fonts");case o._d.APPROVED_PLUGINS:return(0,a.t)("resources_tab.approved_plugins");case o._d.APPROVED_WIDGETS:return(0,a.t)("resources_tab.approved_widgets");default:return(0,a.t)("org_admin_tab.resources")}case o.J7.SETTINGS:return(0,a.t)("org_admin_tab.settings");case o.J7.CONTENT:switch(r){case o.SN.WORKSPACES:return(0,a.t)("org_admin_tab.workspaces");case o.SN.TEAMS:return(0,a.t)("org_admin_tab.teams");case o.SN.ABANDONED_DRAFTS:return(0,a.t)("org_admin_tab.abandoned_drafts");default:return(0,a.t)("org_admin_tab.content")}default:(0,i.assertNever)(e)}}},155367:(e,r,n)=>{"use strict";n.d(r,{J7:()=>i,SN:()=>a,_d:()=>o});var i=(e=>(e.DASHBOARD="",e.WORKSPACES="workspaces",e.TEAMS="teams",e.MEMBERS="members",e.CONTENT="content",e.ACTIVITY="activity",e.BILLING="billing",e.RESOURCES="resources",e.SETTINGS="settings",e))(i||{}),a=(e=>(e.WORKSPACES="workspaces",e.TEAMS="teams",e.ABANDONED_DRAFTS="abandoned-drafts",e))(a||{}),o=(e=>(e.LIBRARIES="",e.SHARED_FONTS="fonts",e.APPROVED_PLUGINS="plugins",e.APPROVED_WIDGETS="widgets",e))(o||{})},916525:(e,r,n)=>{"use strict";n.d(r,{B9:()=>T,Eg:()=>f,GX:()=>m,J0:()=>p,LU:()=>l,Od:()=>s,Oo:()=>u,SL:()=>g,U9:()=>y,ZL:()=>I,cC:()=>h,dy:()=>o,e5:()=>d,jN:()=>w,oU:()=>c,qY:()=>S,rk:()=>A});var i=n(720647),a=n(99506),o=(e=>(e.ASC="asc",e.DESC="desc",e))(o||{}),s=(e=>(e.NAME="name",e.LAST_ACTIVE="last_active",e.LAST_DESIGN_ACTIVE="last_design_active",e.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",e.LAST_EDIT="last_edit",e.LAST_DESIGN_EDIT="last_design_edit",e.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",e.DESIGN_ROLE="design_role",e.DESIGN_UPGRADE_DATE="design_upgrade_date",e.WHITEBOARD_ROLE="whiteboard_role",e.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",e.LICENSE_GROUP="license_group",e.WORKSPACE="workspace",e.SCIM_DATA="scim_data",e.DESIGN_UPGRADE_REASON="design_upgrade_reason",e.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",e.BILLABLE_PRODUCT_SEAT="seat",e.SEARCH_SCORE="score",e.DEV_MODE_ROLE="dev_mode_role",e.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",e))(s||{});let l=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date"],c={columnName:"name",isReversed:!1};var d=(e=>(e.productFilter="productFilter",e.licenseGroupFilter="licenseGroupFilter",e.workspaceFilter="workspaceFilter",e.idpGroupFilter="idpGroupFilter",e.permissionFilter="permissionFilter",e.roleFilter="roleFilter",e.lastEditFilter="lastEditFilter",e.newEditorFilter="newEditorFilter",e))(d||{}),u=(e=>(e.product="product",e.workspace="workspace",e.billingGroup="billingGroup",e.idpGroup="idpGroup",e.accountType="accountType",e.role="role",e.lastEdit="lastEdit",e.newEditor="newEditor",e))(u||{});let p={productFilter:null,licenseGroupFilter:null,workspaceFilter:null,idpGroupFilter:null,permissionFilter:null,roleFilter:null,lastEditFilter:null,newEditorFilter:!1},m={product:"productFilter",role:"roleFilter",billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",idpGroup:"idpGroupFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter"},h={productFilter:"product",licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",idpGroupFilter:"idpGroup",permissionFilter:"accountType",roleFilter:"role",lastEditFilter:"lastEdit",newEditorFilter:"newEditor"},_={FIGMA:"figma",FIGJAM:"figjam",DEV_MODE:"dev_mode"},g={[_.FIGMA]:i.Te.DESIGN,[_.FIGJAM]:i.Te.WHITEBOARD,[_.DEV_MODE]:i.Te.DEV_MODE},f={[i.Te.DESIGN]:_.FIGMA,[i.Te.WHITEBOARD]:_.FIGJAM,[i.Te.DEV_MODE]:_.DEV_MODE},E={IDP:"provisional",UNVERIFIED:"unverified"},y={[a._D.ADMIN]:a._D.ADMIN,[a._D.GUEST]:a._D.GUEST,[a._D.MEMBER]:a._D.MEMBER,[E.IDP]:E.IDP,[E.UNVERIFIED]:E.UNVERIFIED};var b=(e=>(e.VIEWER="starter",e.FULL="full",e.VIEWER_RESTRICTED="restricted",e.DEV_MODE_ONLY="dev_mode_only",e))(b||{});let I=["starter","full","restricted"],T=["full","dev_mode_only","restricted"],v={EDITOR:"editor",VIEWER:"viewer",VIEWER_RESTRICTED:"viewer-restricted",DEV_MODE_ONLY:"dev-mode-only"},S={[v.EDITOR]:"full",[v.VIEWER]:"starter",[v.VIEWER_RESTRICTED]:"restricted",[v.DEV_MODE_ONLY]:"dev_mode_only"},w={full:v.EDITOR,starter:v.VIEWER,restricted:v.VIEWER_RESTRICTED,dev_mode_only:v.DEV_MODE_ONLY},A={"3mo":"3mo","6mo":"6mo","1yr":"1yr"}},833030:(e,r,n)=>{"use strict";n.d(r,{Kq:()=>i,ig:()=>a}),n(99506);var i=(e=>(e.NAME="name",e.OWNER="owner_name",e.PROJECTS="projects",e.MEMBERS="member_count",e.WORKSPACE="workspace_name",e.ORG_ACCESS="org_access",e))(i||{}),a=(e=>(e.JOINED="JOINED",e.NOT_JOINED="NOT_JOINED",e))(a||{})},66037:(e,r,n)=>{"use strict";n.d(r,{Ru:()=>b,WU:()=>I,Wd:()=>y,jh:()=>E,x0:()=>v});var i=n(634832),a=n(330654),o=n(304769),s=n(720647),l=n(99506),c=n(500615),d=n(394046),u=n(447618),p=n(583894),m=n(269340),h=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.SCIM_GROUP="scim_group",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(h||{});let _=a.nativeEnum(h),g=a.object({id:a.string(),license_group_id:a.string().nullable(),org_user_id:a.string(),assigned_at:a.string(),created_at:a.string(),actor_user_id:a.string().nullable(),update_reason:_,updated_at:a.string(),idp_group:d.m.nullable().optional(),idp_group_uuid:a.string().nullish()}),f=a.object({id:a.string(),license_group_id:a.string().nullable(),org_user_id:a.string(),created_at:a.string(),updated_at:a.string()});l.El.FULL,l.El.STARTER,l.El.RESTRICTED;var E=(e=>(e[e.GUEST=0]="GUEST",e[e.MEMBER=2]="MEMBER",e[e.ADMIN=3]="ADMIN",e))(E||{}),y=(e=>(e.ORG_USER="org_user",e.IDP_USER="idp_user",e.ORG_INVITE="org_invite",e))(y||{});let b=a.object({design_paid_status:l.cA,whiteboard_paid_status:l.cA,dev_mode_paid_status:l.cA,id:a.string(),org_id:a.string(),user_id:a.string(),user:p.aw,permission:l.B0,description:a.string().nullish(),drafts_folder_id:a.string(),created_at:a.string(),updated_at:a.string(),disabled_at:a.string().nullish(),account_type:a.string().optional(),account_type_changed_at:a.string().optional(),last_edit:a.string().nullish(),last_seen:a.string().nullish(),last_design_edit:a.union([a.string(),c.t]).nullish(),last_whiteboard_edit:a.union([a.string(),c.t]).nullish(),last_design_seen:a.union([a.string(),c.t]).nullish(),last_whiteboard_seen:a.union([a.string(),c.t]).nullish(),last_dev_mode_seen:a.union([a.string(),c.t]).nullish(),scim_account_type:a.string().nullish(),scim_whiteboard_paid_status:a.string().nullish(),scim_dev_mode_paid_status:a.string().nullish(),scim_is_admin:a.boolean().nullish(),user_state_changed_at:a.string().optional(),design_upgrade_reason:u.P.nullish(),whiteboard_upgrade_reason:u.P.nullish(),dev_mode_upgrade_reason:u.P.nullish(),scim_metadata:a.record(a.string().nullish()).nullish(),agreed_to_community_tos_at:a.string().nullish(),license_group_member:g.nullish(),license_group_admins:a.array(f).optional(),license_admin:a.boolean().optional(),is_email_validated:a.boolean().optional().nullable(),show_figjam_user_onboarding:a.boolean().nullable(),has_shown_figjam_admin_onboarding:a.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:a.boolean().nullable(),ecc_upgrading_locked:a.boolean().nullish(),type:a.literal("org_user").default("org_user"),workspace_users:a.array(m.C).optional(),is_dev_mode_beta_user:a.boolean().optional(),active_seat_type:o.cD.nullish()}),I=b;function T(e,r){switch(r){case s.G_.DESIGN:return e.design_paid_status;case s.G_.FIGJAM:return e.whiteboard_paid_status;case s.G_.DEV_MODE:return e.dev_mode_paid_status;default:(0,i.assertNever)(r)}}function v(e,r){switch(r){case s.G_.DESIGN:case s.G_.FIGJAM:return T(e,r);case s.G_.DEV_MODE:return T(e,s.G_.DESIGN)===l.El.FULL?l.El.FULL:T(e,r);default:(0,i.assertNever)(r)}}s.G_.FIGJAM,s.G_.DESIGN,s.G_.DEV_MODE},802026:(e,r,n)=>{"use strict";n.d(r,{CT:()=>T,Gv:()=>g,X1:()=>b,ZG:()=>m});var i=n(330654),a=n(99506),o=n(253609),s=n(798614),l=n(343279),c=n(222233),d=n(139961),u=(e=>(e.ANY="any",e.GOOGLE="google",e.SAML="saml",e))(u||{});let p=i.union([i.literal("AUTO"),i.literal("GOOD"),i.literal("DELINQUENT"),i.literal("SUSPENDED"),i.literal("DEACTIVATED")]),m={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var h=(e=>(e.MANUAL="manual",e.DISABLED="disabled",e.QUARTERLY="quarterly",e.CHARGE_IMMEDIATELY="quarterly_auto_charge",e))(h||{});let _=i.nativeEnum(h);var g=(e=>(e.REQUIRE_APPROVAL="require_approval",e.BANNED="banned",e))(g||{});let f=i.nativeEnum(g);var E=(e=>(e.US="US",e.EU="EU",e))(E||{});let y=i.nativeEnum(E);i.object({name:i.string(),img_url:i.string().optional(),id:i.string()});var b=(e=>(e.Initial="Initial",e.ChoosePlan="ChoosePlan",e.AddCollaborators="AddCollaborators",e.PseudoCreateTeam="PseudoCreateTeam",e.CreateTeam="CreateTeam",e.TeamSelect="TeamSelect",e.SeatSelect="SeatSelect",e.Details="Details",e.Payment="Payment",e.Review="Review",e.Confirmation="Confirmation",e))(b||{}),I=(e=>(e.DEPROVISION="deprovision",e))(I||{}),T=(e=>(e.GUESTS="guests",e))(T||{});l.bV.extend({id:i.string(),name:i.string(),legal_name:i.string().optional(),domain_capture:i.boolean(),created_at:i.string().optional(),updated_at:i.string().optional(),deleted_at:i.string().optional(),img_url:i.string().optional(),handle:i.string().optional(),figjam_disabled_at:i.date().nullable(),realtime_token:i.string().optional(),standing:p,stripe_customer_id:i.string().optional(),invite_whitelist_enforced:i.boolean(),invite_whitelist_enforced_guests:i.boolean(),invite_whitelist_guest_invite_setting:f.nullable(),invite_whitelist_member_allowlist_enabled:i.boolean().nullable(),ip_ranges:i.array(i.string()),past_due_at:i.string().nullable(),plugins_whitelist_enforced:i.boolean(),widgets_whitelist_enforced:i.boolean(),plugin_requests_allowed:i.boolean(),widget_requests_allowed:i.boolean(),public_plugins_allowed:i.boolean(),voice_enabled:i.boolean().optional(),billing:_.nullable(),google_sso_only:i.boolean(),saml_sso_only:i.boolean(),locked_quantity_full_members:i.number().nullable(),locked_quantity_figjam_members:i.number().nullable(),featured_scim_metadata:a.tw.nullable(),community_profile_id:i.string().optional(),community_profile_handle:i.string().optional(),template_picker_disabled:i.boolean().optional(),experiment_seed:i.string().optional(),experiment_eligible:i.boolean().optional(),bigma_enabled:i.boolean().optional(),bigma_enabled_at:i.number().optional(),security_add_on_enabled_at:i.number().optional(),mfa_required:i.string().optional(),discovery_enabled:i.boolean().optional(),workshop_enabled:i.boolean().optional(),cursor_chat_disabled:i.boolean().optional(),design_default_paid_status:a.cA.optional(),whiteboard_default_paid_status:a.cA.optional(),k12_google_org:i.boolean(),shared_org_license_group_settings:d.Vh.nullable(),vat_gst_id:i.string().optional().nullable(),tax_id_verification_status:a.xy.optional(),are_custom_templates_allowed:i.boolean(),should_auto_renew:i.boolean(),has_automatic_upcoming_invoice:i.boolean(),target_locality:y.optional(),org_domains:c.N.optional().nullable(),workspaces_count:i.number().optional(),cmty_publish_as_user_enabled:i.boolean().optional(),license_groups_count:i.number().optional(),workspaces_nux_active_at:i.string().optional(),ai_features_disabled:i.boolean().optional(),ai_features_disabled_at:i.string().optional(),ai_data_sharing_enabled:i.boolean().optional(),is_dev_mode_opt_in_accepted:i.boolean().optional(),has_invalid_upgrades:i.boolean().optional(),figma_provided_libraries_disabled:i.boolean().optional(),billing_api:o.z,stripe_memo:i.string().optional(),self_serve:i.boolean().optional(),invoice_currency:i.nativeEnum(s.S).optional(),is_slides_disabled:i.boolean().optional(),activity_logs_max_query_duration_in_days:i.number().optional(),tier:i.nativeEnum(a.Ag),billing_tier:i.nativeEnum(a.Ag)})},622139:(e,r,n)=>{"use strict";n.d(r,{$V:()=>d,CO:()=>s,EB:()=>c,R$:()=>o,UW:()=>l,tY:()=>i,tn:()=>a});var i=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ANNUAL=1]="ANNUAL",e[e.MONTHLY=2]="MONTHLY",e[e.STUDENT=3]="STUDENT",e))(i||{});let a={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var o=(e=>(e.MONTHLY="monthly",e.ANNUAL="annual",e))(o||{});let s="US",l="JP",c=e=>({line1:"",line2:"",country:e||s,city:"",region:"",postal_code:""});function d(e){return""===e.line1&&""===e.line2&&""===e.city&&""===e.region&&""===e.postal_code}var u=(e=>(e.PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",e.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",e.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",e.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",e))(u||{})},376485:(e,r,n)=>{"use strict";n.d(r,{Ag:()=>b,Au:()=>ec,Av:()=>el,C:()=>er,Dk:()=>O,FW:()=>j,Gb:()=>em,HK:()=>E,Kd:()=>T,LR:()=>J,Lu:()=>ep,Lz:()=>en,MP:()=>k,Ps:()=>ef,UX:()=>v,Wt:()=>P,XS:()=>C,Ye:()=>z,ZQ:()=>Z,ZV:()=>F,am:()=>eu,bH:()=>X,f5:()=>ea,ho:()=>y,k0:()=>Q,n_:()=>eh,ow:()=>ee,pL:()=>Y,pR:()=>w,sM:()=>ei,u8:()=>f,xg:()=>ed});var i,a=n(330654),o=n(107877),s=n(560718),l=n(99506),c=n(813408),d=n(288300),u=n(882225),p=n(979215),m=n(483327),h=n(401730),_=n(178787),g=n(629521),f=(e=>(e[e.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",e[e.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",e[e.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",e[e.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",e[e.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",e))(f||{}),E=(e=>(e.FIGMA="design",e.FIGJAM="whiteboard",e.UNIVERSAL="design_and_whiteboard",e.INSPECT="inspect",e.FIGMA_AND_INSPECT="design_and_inspect",e))(E||{}),y=(e=>(e.LOAD="LOAD",e.PARSE="PARSE",e.VALIDATE="VALIDATE",e))(y||{}),b=(e=>(e.Plugin="plugin",e.Widget="widget",e))(b||{});let I=a.object({type:a.nativeEnum(y),text:a.string()}),T=["camera","microphone","displaycapture"],v=["openexternal","analytics","cortex","debug","firstdraft","filekey","hidecursors",...T],S=a.object({command:a.string(),name:a.string(),multipleSelection:a.boolean().optional()}),w=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],A=a.object({name:a.string(),key:a.string(),description:a.string().optional(),optional:a.boolean().optional(),allowFreeform:a.boolean().optional()}),N=a.array(A),C=[...w,...v];[...C];let O=["textreview","panel","inspect","codegen","linkpreview","vscode"],L=a.object({label:a.string(),value:a.string(),isDefault:a.boolean().optional()}),R=a.object({itemType:a.literal("action"),propertyName:a.string(),includedLanguages:a.array(a.string()).optional(),label:a.string().optional()});function P(e){return R.safeParse(e).success}let D=a.object({itemType:a.literal("unit"),scaledUnit:a.string(),defaultScaleFactor:a.number().optional(),default:a.boolean().optional(),includedLanguages:a.array(a.string()).optional()});function k(e){return D.safeParse(e).success}let M=a.object({itemType:a.literal("select"),propertyName:a.string(),label:a.string().optional(),options:a.array(L),includedLanguages:a.array(a.string()).optional()});function F(e){return M.safeParse(e).success}let x=a.union([R,D,M]),U=a.array(x),B=a.object({label:a.string(),value:a.string()}),V=a.object({command:a.string(),name:a.string(),parameters:N.optional(),parameterOnly:a.boolean().optional()}),G=a.object({separator:a.literal(!0)}),H=a.object({name:a.string()}).extend({menu:a.lazy(()=>a.array(a.union([V,G,H])))}),W=a.object({allowedDomains:a.array(a.string()),reasoning:a.string().optional(),devAllowedDomains:a.array(a.string()).optional()}),K=a.union([H,V,G]);var j=(e=>(e.FIGMA="figma",e.FIGJAM="figjam",e.INSPECT="inspect",e.DEV="dev",e.SITES="sites",e.SLIDES="slides",e))(j||{});let z=Object.values(j),Y=a.object({id:a.string().optional(),name:a.string(),api:a.string(),main:a.string(),ui:a.union([a.string(),a.record(a.string(),a.string())]).optional(),build:a.string().optional(),enableProposedApi:a.boolean().optional(),enablePrivatePluginApi:a.boolean().optional(),menu:K.array().optional(),networkAccess:W.optional(),relaunchButtons:S.array().optional(),relatedLinkDomains:a.array(a.string()).optional(),devResourceDomains:a.array(a.string()).optional(),parameters:N.optional(),parameterOnly:a.boolean().optional(),editorType:a.filteredArray(a.nativeEnum(j)).optional(),containsWidget:a.boolean().optional(),widgetApi:a.string().optional(),permissions:a.filteredArray(a.union([a.enum(w),a.enum(v)])).optional(),enableReadOnly:a.boolean().optional(),capabilities:a.filteredArray(a.enum(O)).optional(),codegenLanguages:a.array(B).optional(),codegenPreferences:U.optional(),documentAccess:a.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=a.object({id:a.string(),name:a.string().nullable(),version:a.string().nullable(),releaseNotes:a.string().nullable(),description:a.string().nullable(),tagline:a.string().nullable(),creatorPolicy:a.string().nullable(),manifest:a.string().nullable(),createdAt:a.date(),iconPath:a.string().nullable(),coverImagePath:a.string().nullable(),codePath:a.string().nullable(),plugin:a.object({currentPluginVersionId:a.string().nullable()})}),e.PluginInstallSchema=a.object({id:a.string(),pluginId:a.string(),pinnedStatus:a.nativeEnum(l.hM),createdAt:a.date(),plugin:a.object({id:a.string(),currentPluginVersionId:a.string().nullable(),publishingStatus:a.nativeEnum(l.KB).nullable(),isWidget:a.boolean().nullable(),viewableInEditor:a.boolean(),orgId:a.string().nullable(),approvedAt:a.date().nullable(),approvalStatus:a.number().nullable(),communityPublishers:a.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=a.object({id:a.string(),installedPlugins:a.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=a.object({id:a.string(),name:a.string()}),e.OrgInfoSchema=a.object({id:a.string(),name:a.string()}),e.CommunityProfileSchema=a.object({id:a.string(),profileHandle:a.string(),user:a.object({id:a.string(),name:a.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=a.object({role:a.nativeEnum(l.un),isPending:a.boolean(),profile:e.CommunityProfileSchema})})(i||(i={}));let $=a.object({id:a.string(),plugin_id:a.string(),name:a.string(),version:a.string(),current_plugin_version_id:a.string().optional(),release_notes:a.string(),description:a.string(),tagline:a.string(),creator_policy:a.string(),is_private:a.boolean(),manifest:Y,created_at:a.string(),org_id:a.string().optional(),redirect_icon_url:a.string(),redirect_cover_image_url:a.string(),redirect_code_url:a.string(),redirect_snapshot_url:a.string().nullish(),community_publishers:a.array(i.CommunityPublisherSchema).optional(),installed_by:a.union([a.literal("user"),a.literal("org")]).nullish(),playground_fig_file_key:a.string().nullish(),playground_fig_file:a.ignore().optional(),playground_file_version_id:a.string().nullish()}),q=a.object({plugin_id:a.string(),name:a.string(),manifest:Y,localFileId:a.number(),localFilePath:a.string(),error:I.optional(),cachedContainsWidget:a.boolean().optional(),lastKnownPluginId:a.string().optional(),testCode:a.string().optional()});function Z(e){return void 0!==e.localFileId}function X(e){return!Z(e)&&!!e.is_private}function J(e){return!Z(e)&&!X(e)}function Q(e){return!!e.manifest?.containsWidget}function ee(e,r,n){return!!(!n||!e||X(e)||Z(e))||!!n.public_plugins_allowed&&((Q(e)?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!r[e?.plugin_id])}let et=a.object({org:a.object({id:a.string(),name:a.string()}).optional(),is_public:a.boolean().optional()}),er=a.object({id:a.string(),versions:a.record($),current_plugin_version_id:a.string().nullable(),is_widget:a.coerce.boolean()}),en=er.merge(a.object({install_count:a.number(),view_count:a.number(),like_count:a.number(),comment_count:a.number(),category_id:a.string().nullable(),roles:et,org_id:a.string().nullable(),realtime_token:a.string(),created_at:a.string(),redirect_thumbnail_url:a.string().nullable(),thumbnail_url:a.string().nullable(),tags:a.array(a.string()).optional(),current_user_has_run:a.boolean().optional(),current_user_first_ran_at:a.string().optional(),unique_run_count:a.number(),editor_type:a.nativeEnum(E),unpublished_at:a.string().nullable(),support_contact:a.string().nullable(),comments_setting:a.nativeEnum(s.Ni).nullable(),related_content:(0,o.M6)(a.lazy(()=>en)),hide_related_content_by_others:a.boolean().optional(),publishing_status:a.nativeEnum(l.KB).nullable(),score:a.number().nullable(),install_status:a.nativeEnum(f).optional(),profile_install_status:a.nativeEnum(f).optional(),commenting_is_restricted:a.boolean(),monetization_status:a.nativeEnum(_.UC).optional(),community_resource_payment:h.fe.optional(),third_party_m10n_status:a.nativeEnum(_.PN).optional(),creator_policy:a.string(),plugin_publishers:c.I7.optional(),carousel_media_urls:a.optional(g.fE),carousel_videos:a.optional(g.Fy)})).and(c.xK).and(u.n).and(m.Y).and(p.q),ei=en.and(a.object({is_widget:a.literal(!0)}));function ea(e){return e.third_party_m10n_status===_.PN.MIGRATING}let eo=a.object({name:a.string(),data:a.unknown().optional(),icon:a.union([a.string(),a.instanceof(Uint8Array)]).optional(),iconUrl:a.string().optional()}),es=a.record(eo);function el(e){return"command"in e&&"name"in e}function ec(e){return"separator"in e&&e.separator}function ed(e){return"name"in e&&"menu"in e}function eu({type:e,text:r}){switch(e){case"LOAD":return"Manifest load error: "+r;case"PARSE":return"Manifest not valid JSON: "+r;case"VALIDATE":return"Manifest error: "+r}}Symbol("relaunchMixedDescription");var ep=(e=>(e.ORG="ORG",e.PUBLIC="PUBLIC",e))(ep||{});function em(e,r){return r?`GET_PLUGIN_ALLOW_LIST_${e}_${r}`:`GET_PLUGIN_ALLOW_LIST_${e}`}function eh(e,r){return r?`GET_WIDGET_ALLOW_LIST_${e}_${r}`:`GET_WIDGET_ALLOW_LIST_${e}`}let e_=a.enum(["default","textreview","inspect","codegen","linkpreview","auth"]),eg=a.union([a.enum(["contextmenu","filemenu","runlast","osmenu","relaunch","quick-actions","universal-insert","parameter-entry","paste_from_url","textreview","handoff-relaunch","handoff-panel","codegen","related-link-click","related-link-preview","related-link-auth","pinned","try-plugin-params","auto-run"]),d.MM]),ef=a.object({plugin:a.union([$,q]),command:a.string(),queryMode:a.boolean(),runMode:e_,triggeredFrom:eg,openFileKey:a.string(),ignoreForRunLastPlugin:a.boolean().optional(),deferRunEvent:a.boolean().optional(),parameterValues:es.optional(),isWidget:a.boolean(),widgetAction:a.string().nullable().optional(),forcePluginVersionId:a.string().nullable().optional()})},265361:(e,r,n)=>{"use strict";n.d(r,{E:()=>s});var i=n(634832),a=n(939863),o=n(720647);function s(e){switch(e){case o.G_.DESIGN:return(0,a.t)("general.figma_design");case o.Te.WHITEBOARD:case o.G_.FIGJAM:return(0,a.t)("general.figjam");case o.G_.DEV_MODE:return(0,a.t)("general.dev_mode");default:(0,i.assertNever)(e)}}},935938:(e,r,n)=>{"use strict";n.d(r,{G:()=>o});var i=n(966712),a=n(671653),o=(e=>(e.RECENTLY_VIEWED="recently-viewed",e.SHARED_FILES="shared-with-you",e.SHARED_PROJECTS="shared-projects",e))(o||{});a.C0.NAME,a.C0.CREATED_AT,a.C0.ACCESSED_AT,(0,i.kc)().sunflower_swy_sort_options&&(a.C0.NAME,a.C0.CREATED_AT),a.C0.SHARED_AT,(0,i.kc)().sunflower_swy_sort_options&&(a.C0.NAME,a.C0.CREATED_AT),a.C0.SHARED_AT},629521:(e,r,n)=>{"use strict";n.d(r,{Fy:()=>m,fE:()=>d});var i=n(330654),a=n(487386),o=(e=>(e[e.CURATED_IMAGE=0]="CURATED_IMAGE",e[e.THUMBNAIL=1]="THUMBNAIL",e[e.EMBED=2]="EMBED",e))(o||{});let s=i.record(i.string().refine(e=>Object.keys(a.B.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),i.string().url()),l=i.object({url:i.string().url(),sha1:i.string()}),c=l.extend({id:i.string(),resized_thumbnail_urls:i.optional(s),created_at:i.date()}),d=i.record(i.number(),c);l.extend({buffer:i.instanceof(Uint8Array)});let u=i.object({url:i.string().url(),sha1:i.string(),thumbnail_url:i.string().url(),thumbnail_sha1:i.string()}),p=u.extend({id:i.string(),video_file_uuid:i.string().uuid()}),m=i.record(i.number(),p);u.extend({buffer:i.instanceof(Uint8Array),thumbnail_buffer:i.instanceof(Uint8Array)})},397065:(e,r,n)=>{"use strict";n.d(r,{N:()=>i});var i=(e=>(e[e.URGENT_ALERT=9999]="URGENT_ALERT",e[e.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",e[e.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",e[e.DEFAULT_MODAL=10]="DEFAULT_MODAL",e[e.SECONDARY_MODAL=5]="SECONDARY_MODAL",e[e.SURVEY=1]="SURVEY",e))(i||{})},967409:(e,r,n)=>{"use strict";n.d(r,{$L:()=>u,Du:()=>M,Ej:()=>U,Hn:()=>F,KB:()=>h,L0:()=>P,Lk:()=>A,Lr:()=>y,MU:()=>W,Mm:()=>G,Mp:()=>V,OZ:()=>B,Or:()=>H,Rr:()=>m,Rx:()=>b,Rz:()=>K,WY:()=>o,W_:()=>R,Wr:()=>g,XW:()=>v,Xr:()=>_,Zr:()=>E,_M:()=>L,a7:()=>O,dC:()=>s,dt:()=>S,f9:()=>p,fS:()=>I,gw:()=>w,hf:()=>x,j9:()=>T,jD:()=>d,mp:()=>N,q6:()=>k,qm:()=>C,qy:()=>l,tC:()=>D,uH:()=>a,uR:()=>c});var i=n(939863),a=(e=>(e.FILES="files",e.PROJECTS="projects",e.TEAMS="teams",e.USERS="users",e.HUB_FILES="hub_files",e.PUBLIC_PLUGINS="public_plugins",e.PRIVATE_PLUGINS="private_plugins",e.PUBLIC_PROFILES="public_profiles",e.PUBLIC_WIDGETS="public_widgets",e.PRIVATE_WIDGETS="private_widgets",e))(a||{}),o=(e=>(e.RESOURCE="resource",e.CREATOR="creator",e.SPACE="space",e))(o||{}),s=(e=>(e.USERS="users",e.PROJECTS="projects",e.TEAMS="teams",e.ORGS="orgs",e))(s||{}),l=(e=>(e.FOLDER="folders",e.TEAM="teams",e.ORG="orgs",e))(l||{}),c=(e=>(e.DROPDOWN="dropdown",e.AUTOCOMPLETE="autocomplete",e))(c||{}),d=(e=>(e.PILL="pill",e.CLEAR_ALL="clear_all",e.ALL_TYPES="all_types",e.SELECTION="selection",e))(d||{}),u=(e=>(e.ALL_FILES="FILES",e.DESIGN_FILES="DESIGN_FILES",e.FIGJAM_FILES="FIGJAM_FILES",e.SLIDES="SLIDES",e.USERS="USERS",e.PROJECTS="PROJECTS",e.TEAMS="TEAMS",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e.SITES="SITES",e))(u||{}),p=(e=>(e.NAME="name",e.FUZZY_NAME="fuzzy-name",e.NAME_WORD_DELIMITER_V2="name-word-delimiter-v2",e.DEEP_SEARCH_TEXT="deep-search-text",e.PAGE_NAME="page-name",e.FRAME_NAME="frame-name",e.FRAGMENT_RETRIEVAL="fragment-retrieval",e))(p||{}),m=(e=>(e.ONE_TYPE="one_type",e.ALL_TYPES_BLOCKING="all_types_blocking",e.ALL_TYPES_STREAMING="all_types_streaming",e))(m||{});function h(e){switch(e){case"files":return(0,i.t)("search.preview_section.files_capitalized");case"projects":return(0,i.t)("search.preview_section.projects_capitalized");case"users":return(0,i.t)("search.preview_section.people_capitalized");case"teams":return(0,i.t)("search.preview_section.teams_capitalized");case"private_plugins":return(0,i.t)("search.preview_section.plugins_capitalized");case"hub_files":return(0,i.t)("search.preview_section.community_capitalized");default:return""}}function _(e){if(!e)return null;switch(e.value){case"FILES":case"DESIGN_FILES":case"FIGJAM_FILES":case"SLIDES":case"SITES":return"files";case"USERS":return"users";case"PROJECTS":return"projects";case"TEAMS":return"teams";case"PLUGINS":return"private_plugins";case"WIDGETS":return"private_widgets";default:return null}}function g(e){switch(e){case"files":return"FILES";case"users":return"USERS";case"projects":return"PROJECTS";case"teams":return"TEAMS";case"private_plugins":return"PLUGINS";case"private_widgets":return"WIDGETS";default:return null}}var f=(e=>(e.DESIGN="design",e.FIGJAM="whiteboard",e.SLIDES="slides",e.SITES="sites",e))(f||{});function E(e){if(e)switch(e.value){case"DESIGN_FILES":return"design";case"FIGJAM_FILES":return"whiteboard";case"SLIDES":return"slides";case"SITES":return"sites";default:return}}function y(e){if(!e)return null;let r={};for(let[n,i]of Object.entries(e))i&&("creatorIds"===n?r["creator_ids[]"]=i:"folderIds"===n&&i.length>0?r["folder_ids[]"]=i:"teamIds"===n&&i.length>0?r["team_ids[]"]=i:"orgIds"===n&&i.length>0?r["org_ids[]"]=i:r[n]=i);return r}var b=(e=>(e.ORG="internal",e.ORG_GUEST="internal_guest",e.PERSONAL="personal",e.COMMUNITY="community",e))(b||{});let I={internal:{modelTypes:["files","projects","users","teams","private_plugins","private_widgets"],correspondingModelTypes:{hub_files:"files",public_profiles:"users",public_plugins:"private_plugins",public_widgets:"private_widgets"},defaultModelType:"files"},internal_guest:{modelTypes:["files","projects","users","teams"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},personal:{modelTypes:["files","projects","users"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},community:{modelTypes:["hub_files","public_plugins","public_profiles","public_widgets"],correspondingModelTypes:{files:"hub_files",users:"public_profiles",private_plugins:"public_plugins",private_widgets:"public_widgets"},defaultModelType:"hub_files"}};var T=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e.RELEVANCY="relevancy",e.NAME="name",e.AUTHOR_NAME="author_name",e.INSTALL_COUNT="install_count",e.MEMBER_COUNT="member_count",e.UPDATED_AT="updated_at",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.EMAIL="email",e))(T||{}),v=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e.RUN_COUNT="run_count",e))(v||{}),S=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e))(S||{}),w=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e))(w||{}),A=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.OWNER="owner",e))(A||{}),N=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.CREATED_AT="created_at",e))(N||{}),C=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.FILES_LAST_TOUCHED_AT="files_last_touched_at",e.CREATED_AT="created_at",e.MEMBER_COUNT="member_count",e))(C||{}),O=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.EMAIL="email",e))(O||{}),L=(e=>(e.RELEVANCY="relevancy",e))(L||{}),R=(e=>(e.RELEVANCY="relevancy",e))(R||{}),P=(e=>(e.PREVIEW="preview",e.FULL_PAGE="full_page",e.OUTSIDE_FILE_BROWSER="outside_file_browser",e))(P||{}),D=(e=>(e.OPEN="open",e.CLOSE="close",e))(D||{});function k(e){switch(e){case"files":return(0,i.t)("search.search_model_type_header.files");case"projects":return(0,i.t)("search.search_model_type_header.projects");case"teams":return(0,i.t)("search.search_model_type_header.teams");case"users":return(0,i.t)("search.search_model_type_header.people");case"hub_files":return(0,i.t)("search.search_model_type_header.hub_files");case"public_plugins":return(0,i.t)("search.search_model_type_header.public_plugins");case"private_plugins":return(0,i.t)("search.search_model_type_header.private_plugins");case"public_profiles":return(0,i.t)("search.search_model_type_header.creators");case"public_widgets":return(0,i.t)("search.search_model_type_header.public_widgets");case"private_widgets":return(0,i.t)("search.search_model_type_header.private_widgets")}}function M(e){switch(e){case"teams":return(0,i.t)("file_browser.team");case"hub_files":return(0,i.t)("activity_log.resource.file");case"public_plugins":case"private_plugins":return(0,i.t)("community.plugins.plugin");case"public_profiles":return(0,i.t)("search.preview_section.creator");case"public_widgets":case"private_widgets":return(0,i.t)("community.plugins.widget");case"users":case"files":case"projects":return(0,i.t)("permissions.level_name.none")}}function F(e){if(1===(e=Array.from(new Set(e))).length)return e[0];{let r=e.pop();return e.join(", ")+" and "+r}}function x(e){switch(e){case"files":return(0,i.t)("search.search_model_type.empty_state_files");case"projects":return(0,i.t)("search.search_model_type.empty_state_projects");case"teams":return(0,i.t)("search.search_model_type.empty_state_teams");case"users":return(0,i.t)("search.search_model_type.empty_state_people");case"hub_files":return(0,i.t)("search.search_model_type.empty_state_hub_files");case"public_plugins":return(0,i.t)("search.search_model_type.empty_state_public_plugins");case"private_plugins":return(0,i.t)("search.search_model_type.empty_state_private_plugins");case"public_profiles":return(0,i.t)("search.search_model_type.empty_state_creators");case"public_widgets":return(0,i.t)("search.search_model_type.empty_state_public_widgets");case"private_widgets":return(0,i.t)("search.search_model_type.empty_state_private_widgets");default:return""}}let U=["files","projects","users","teams"],B=["files","projects","users","hub_files"],V=["public_plugins","private_plugins","public_widgets","private_widgets","public_profiles"],G=["public_plugins","private_plugins","public_widgets","private_widgets","teams","public_profiles"],H=4,W=10,K=30},637590:(e,r,n)=>{"use strict";n.d(r,{A5:()=>a,Ft:()=>m,G4:()=>d,QB:()=>y,SC:()=>h,Sc:()=>_,U6:()=>u,bN:()=>p,bb:()=>o,ck:()=>f,jX:()=>g,kV:()=>s,ou:()=>l});var i=n(622139),a=(e=>(e[e.INVITE=0]="INVITE",e[e.PUBLISH_COMMUNITY=1]="PUBLISH_COMMUNITY",e[e.PUBLISH_TEMPLATE=2]="PUBLISH_TEMPLATE",e[e.POST_TO_FEED=3]="POST_TO_FEED",e[e.COLLABORATORS=4]="COLLABORATORS",e[e.EMBED_CODE=5]="EMBED_CODE",e[e.SHARE_DEV_MODE=6]="SHARE_DEV_MODE",e[e.SHARE_SETTINGS=7]="SHARE_SETTINGS",e[e.FOLDER_MEMBERS=8]="FOLDER_MEMBERS",e[e.SHARE_GOOGLE_DEVICE_DISCLAIMER=9]="SHARE_GOOGLE_DEVICE_DISCLAIMER",e[e.SHARE_TO_GOOGLE_CLASSROOM=10]="SHARE_TO_GOOGLE_CLASSROOM",e))(a||{}),o=(e=>(e.ACCOUNT="account",e.PLUGINS="plugins",e.COMMUNITY="community",e.NOTIFICATIONS="notifications",e))(o||{});function s(e){return"search"===e.view}let l={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var c=(e=>(e.IN_VIEW="in_view",e.DIRECT="direct",e))(c||{}),d=(e=>(e[e.DEFAULT=0]="DEFAULT",e.FULLSCREEN="fullscreen",e.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",e))(d||{}),u=(e=>(e.ONBOARDING="onboarding",e))(u||{});function p(e){return"org"===e.view}var m=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TEAM=1]="TEAM",e[e.WORKSPACE=2]="WORKSPACE",e[e.LICENSE_GROUP=3]="LICENSE_GROUP",e))(m||{}),h=(e=>(e.UPGRADE_EXISTING_TEAM="upgrade_existing_team",e.CREATE_AND_UPGRADE="create_and_upgrade",e.CREATE="create",e))(h||{}),_=(e=>(e[e.UNDETERMINED=0]="UNDETERMINED",e[e.STARTER=1]="STARTER",e[e.TEAM=2]="TEAM",e[e.ORG=3]="ORG",e))(_||{});function g(e){return"upgrade_existing_team"===e}function f(e,r){return"create"===e&&(r===i.tn.CREATE_TEAM||r===i.tn.ADD_COLLABORATORS)||r===i.tn.PLAN_COMPARISON}let E=["recentFiles","deletedFiles","teamCreation","folder","addAnnualPlan","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","billingGroupDashboard","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","sharedWithYou","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects","limitedTeamSharedProjects","orgDomainManagement","abandonedDraftFiles"];function y(e){return E.includes(e.view)}},139961:(e,r,n)=>{"use strict";n.d(r,{Sm:()=>s,Vh:()=>u,w_:()=>c});var i=n(330654),a=(e=>(e.TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",e.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",e))(a||{});let o=i.nativeEnum(a);var s=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e.DISABLED="disabled",e))(s||{});let l=i.nativeEnum(s);var c=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(c||{});let d=i.nativeEnum(c),u=i.object({team_creation_controls:o.optional().nullable(),external_collaboration_controls:i.boolean(),ip_account_restriction:i.boolean().optional(),ip_allowlist:i.boolean().optional(),idle_timeout_duration_in_secs:i.number().optional().nullable(),autogen_password_controls:i.boolean(),public_link_controls_setting:d.optional().nullable(),public_link_controls_max_expiration:i.number().optional().nullable(),configured_upgrade_request_setting:l.optional().nullable(),configured_upgrade_request_message:i.string().optional().nullable()})},840912:(e,r,n)=>{"use strict";var i=(e=>(e.NAME="Name",e.ACTIVE_AT="Last active",e.PERMISSIONS="Team permissions",e.DESIGN_PAID_STATUS="Design role",e.FIGJAM_PAID_STATUS="FigJam role",e))(i||{})},410436:(e,r,n)=>{"use strict";n.d(r,{c:()=>i});let i={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},36816:(e,r,n)=>{"use strict";n.d(r,{Zf:()=>s,j4:()=>l,wF:()=>c});var i=n(330654),a=n(304769),o=n(583894),s=(e=>(e.FULL="full",e.RESTRICTED="restricted",e.STARTER="starter",e))(s||{}),l=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e))(l||{});let c=i.normalize("TeamUser",i.object({id:i.primaryKey(),team_id:i.string(),user_id:i.string(),design_paid_status:i.nativeEnum(s),whiteboard_paid_status:i.nativeEnum(s),drafts_folder_id:i.string().nullable().optional(),created_at:i.string(),updated_at:i.string(),user:o.aw.optional(),show_figjam_user_onboarding:i.boolean().nullable(),active_seat_type:a.cD.nullish()}))},851363:(e,r,n)=>{"use strict";n.d(r,{Fb:()=>u,ZN:()=>g,bL:()=>_,kE:()=>h,kU:()=>p,pE:()=>f,qg:()=>c});var i=n(966712),a=n(330654),o=n(99506),s=n(343279),l=n(383986);let c=118;var d=(e=>(e.REQUIRES_SOURCE_ACTION="requires_source_action",e))(d||{}),u=(e=>(e.ORG_BROWSABLE="org_browsable",e.HIDDEN="hidden",e))(u||{}),p=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(p||{});let m=a.nativeEnum(p),h=a.normalize("Team",s.bV.extend({created_at:a.string(),id:a.primaryKey(),img_url:a.string().optional(),org_id:a.string().nullable(),name:a.string(),description:a.string(),projects:a.number(),editors:a.number(),realtime_token:a.string().optional(),restrictions_list:a.array(o.iU).nullable(),subscription:o.D8.nullable(),subscription_raw:o.D8.nullable(),org_access:o.We.nullable(),stripe_customer_id:a.string().nullable(),student_team_at:a.string().nullable(),student_team_state:m,student_autoverifying_team_at:a.string().nullable(),student_team:a.boolean(),pro_team:a.boolean(),org_team:a.boolean(),starter_team:a.boolean(),grace_period_end:a.string().nullable(),grace_period_type:o.Dh.nullable(),last_upgraded_at:a.string().nullable(),updated_at:a.string().nullable().optional(),deleted_at:a.string().nullable(),community_profile_id:a.string().optional(),community_profile_handle:a.string().optional(),experiment_seed:a.union([a.number(),a.string()]).nullable(),license_group_id:a.string().nullable(),license_group:l.W.nullable(),workspace_id:a.string().nullable(),default_permission:o.zd.optional().nullable(),is_favorited:a.boolean().optional(),vat_gst_id:a.string().optional(),tax_id_verification_status:o.xy.optional(),cmty_publish_as_user_enabled:a.boolean().optional(),ai_features_disabled:a.boolean().optional(),figma_provided_libraries_disabled:a.boolean().optional(),legal_name:a.string().nullable(),design_default_paid_status:o.cA.optional(),whiteboard_default_paid_status:o.cA.optional(),sharing_audience_control:o.a0.optional(),org_browsable:a.boolean().optional(),hidden:a.boolean().optional()}));function _(e,r){let n=(0,i.kc)().ps_benchmark;return r?`${location.origin}/files/${r}/team/${e}`:`${location.origin}/files/team/${e}${n?"/all-projects":""}`}var g=(e=>(e.MOVE_FILES="move_files",e.DUPLICATE_FILES="duplicate_files",e.RESTORE_FILES="restore_files",e.MOVE_FOLDER="move_folder",e.IMPORT_FILES="import_files",e.CREATE_FILE="create_file",e.CREATE_FOLDER="create_folder",e.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",e.CREATE_PAGE="create_page",e.DUPLICATE_PAGE="duplicate_page",e.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",e.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",e.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",e))(g||{}),f=(e=>(e.PUBLISH_COMPONENTS="publish_components",e.USE_AUDIO="use_audio",e.VIEW_ONLY_PROJECT="view_only_project",e.INVITE_ONLY_PROJECT="invite_only_project",e))(f||{})},326044:(e,r,n)=>{"use strict";n.d(r,{S:()=>i});var i=(e=>(e.REMOTE_WORK="remoteWork",e.ONBOARDING="onboarding",e.TEMPLATES_PICKER="templatesPicker",e))(i||{})},671653:(e,r,n)=>{"use strict";n.d(r,{C0:()=>i,XU:()=>l,cT:()=>c,rJ:()=>o,rR:()=>d,t2:()=>s,ue:()=>a});var i=(e=>(e[e.NAME=0]="NAME",e[e.CREATED_AT=1]="CREATED_AT",e[e.TOUCHED_AT=2]="TOUCHED_AT",e[e.TRASHED_AT=3]="TRASHED_AT",e[e.OWNER=4]="OWNER",e[e.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",e[e.PROJECT_NAME=6]="PROJECT_NAME",e[e.ACCESSED_AT=7]="ACCESSED_AT",e[e.SHARED_AT=8]="SHARED_AT",e))(i||{}),a=(e=>(e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e))(a||{}),o=(e=>(e[e.ANY=0]="ANY",e[e.SELF=1]="SELF",e[e.OTHER=2]="OTHER",e))(o||{}),s=(e=>(e[e.ANY=0]="ANY",e[e.DESIGN=1]="DESIGN",e[e.FIGJAM=2]="FIGJAM",e[e.PROTOTYPE=3]="PROTOTYPE",e[e.SLIDES=4]="SLIDES",e[e.SITES=5]="SITES",e))(s||{}),l=(e=>(e[e.LIST=0]="LIST",e[e.GRID=1]="GRID",e))(l||{}),c=(e=>(e.ALL="",e.SHARED="shared",e.ORG_DELETED_DRAFTS="deleted_user_drafts",e))(c||{}),d=(e=>(e[e.TIME=0]="TIME",e[e.ALPHABETICAL=1]="ALPHABETICAL",e[e.OTHER=2]="OTHER",e))(d||{})},583894:(e,r,n)=>{"use strict";n.d(r,{D6:()=>o,P5:()=>a,aw:()=>c,pl:()=>d,z4:()=>l});var i=n(330654),a=(e=>(e.NONE="none",e.ACCEPTED="accepted",e.STARTED_ONBOARDING="started_onboarding",e.DISABLED="disabled",e.ENABLED="enabled",e))(a||{}),o=(e=>(e.FILE="file",e.EXTENSION="extension",e))(o||{}),s=(e=>(e.NUM_CUSTOMERS="num_customers",e.PAYOUTS="payouts",e.GROSS="gross",e.LAST_UPDATED="last_updated_at",e.ALL_TIME_TOTAL_EARNED="all_time_total_earned",e.NUM_PURCHASES="num_purchases",e))(s||{});function l(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}let c=i.object({id:i.string(),name:i.string().optional(),handle:i.string(),img_url:i.string(),email:i.string().optional(),description:i.string().nullish(),org_id:i.string().optional()});var d=(e=>(e.EDITOR_ON_MAIN="Editor on main",e.EDITOR_ON_TEAM="Editor on team",e))(d||{})},59530:(e,r,n)=>{"use strict";n.d(r,{V5:()=>i});let i=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"])},636751:(e,r,n)=>{"use strict";n.d(r,{$E:()=>i,MK:()=>s,bU:()=>a});var i=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CONNECTING=3]="CONNECTING",e[e.DISCONNECTING=4]="DISCONNECTING",e[e.RECONNECTING=5]="RECONNECTING",e[e.ERROR=6]="ERROR",e[e.CALL_INACTIVE=7]="CALL_INACTIVE",e[e.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",e[e.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",e[e.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",e[e.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",e[e.USER_JOINED=12]="USER_JOINED",e[e.USER_LEFT=13]="USER_LEFT",e[e.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",e[e.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",e[e.UNMUTE=16]="UNMUTE",e[e.MUTE=17]="MUTE",e[e.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",e[e.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",e[e.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",e[e.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",e))(i||{}),a=(e=>(e[e.NONE=0]="NONE",e[e.HEADPHONES=1]="HEADPHONES",e[e.FULL=2]="FULL",e))(a||{}),o=(e=>(e.ERROR="error",e.WARNING="warning",e.MESSAGE="message",e.SUCCESS="success",e.PENDING="pending",e))(o||{}),s=(e=>(e[e.DONE=100]="DONE",e[e.STARTED=1]="STARTED",e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DISK_ERROR=-1]="DISK_ERROR",e[e.NETWORK_ERROR=-2]="NETWORK_ERROR",e))(s||{})},493536:(e,r,n)=>{},352898:(e,r,n)=>{"use strict";n.d(r,{Fi:()=>o,V0:()=>i,dN:()=>a,m2:()=>s,rj:()=>l});var i=(e=>(e.ADMIN="admin",e.DIRECTORY="directory",e))(i||{}),a=(e=>(e.TEAMS="teams",e))(a||{});let o=["teams"];var s=(e=>(e.TEAMS="teams",e.MEMBERS="members",e.LIBRARIES="libraries",e.SETTINGS="settings",e))(s||{});let l=["teams","members","libraries"]},18993:(e,r,n)=>{"use strict";n.d(r,{aY:()=>O,bE:()=>C});var i=n(411855),a=n(188507),o=n(634832),s=n(646240),l=n(915440),c=n(662275),d=n(756085);n(335682);var u=n(694687),p=n(860178),m=n(99506),h=n(279453),_=n(215822);n(829632);var g=n(554294),f=n(802257),E=n(507956),y=n(762638),b=n(939863),I=n(175290),T=n(553015),v=n(809840),S=n(237870),w=n(585878),A=(e=>(e.STOP_AUTO_RUN_FROM_USER="stop-auto-run-from-user",e.STOP_AUTO_RUN_FROM_ORG="stop-auto-run-from-org",e.CONFIRM_REPLACE="confirm-replace",e.ENABLE_AUTO_RUN="enable-auto-run",e))(A||{});let N=(0,S.Ju)(function({commonShowModalArgs:e,newPluginName:r,autoRunModalType:n}){let s,l;let d=()=>{f.s.updateUserAutoRunPluginId(e.pluginID,m.xw.NONE),h(c.Lo())},p=()=>h(c.Lo()),h=(0,a.wA)(),_=(0,u.sZ)()||null,g={currentAutoRunPluginName:i.createElement(v.E,{fontWeight:"bold"},e.currentAutoRunPluginName)},E={orgName:i.createElement(v.E,null,_?.name||""),orgPluginName:i.createElement(v.E,{fontWeight:"bold"},e.orgPluginName)},S={orgPluginName:i.createElement(v.E,{fontWeight:"bold"},e.orgPluginName),newPluginName:i.createElement(v.E,{fontWeight:"bold"},r),orgName:i.createElement(v.E,null,_?.name||"")};switch(n){case"stop-auto-run-from-user":s=i.createElement(i.Fragment,null,i.createElement(v.E,{color:"default",fontWeight:"medium"},(0,b.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_desc",g)),i.createElement("div",{className:y.cx.mt16.$},i.createElement(I.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},i.createElement(T.$,{variant:"secondary",onClick:p},(0,b.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(T.$,{variant:"primary",onClick:()=>{d(),h((0,c.to)({type:N,data:{commonShowModalArgs:e,autoRunModalType:"enable-auto-run"}}))}},(0,b.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;case"enable-auto-run":s=i.createElement(i.Fragment,null,i.createElement(v.E,{color:"default",fontWeight:"medium"},(0,b.tx)("dev_handoff.autorun_confirm_modal.enable_auto_run_desc",E)),i.createElement("div",{className:y.cx.mt16.$},i.createElement(I.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},i.createElement(T.$,{variant:"secondary",onClick:p},(0,b.t)("dev_handoff.autorun_confirm_modal.dont_enable")),i.createElement(T.$,{variant:"primary",onClick:()=>{f.s.updateUserAutoRunPluginId(e.pluginID,m.xw.INHERIT),h(c.Lo())}},(0,b.t)("dev_handoff.autorun_confirm_modal.enable_auto_run")))));break;case"confirm-replace":s=i.createElement(i.Fragment,null,i.createElement(v.E,{color:"default",fontWeight:"medium"},(0,b.tx)("dev_handoff.autorun_confirm_modal.confirm_replace",S)),i.createElement("div",{className:y.cx.mt16.$},i.createElement(I.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},i.createElement(T.$,{variant:"secondary",onClick:p},(0,b.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(T.$,{variant:"primary",onClick:()=>{f.s.updateUserAutoRunPluginId(e.pluginID,m.xw.OVERRIDE),h(c.Lo())}},(0,b.t)("dev_handoff.autorun_confirm_modal.replace")))));break;case"stop-auto-run-from-org":s=i.createElement(i.Fragment,null,i.createElement(v.E,{color:"default",fontWeight:"medium"},(0,b.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_from_org",E)),i.createElement("div",{className:y.cx.mt16.$},i.createElement(I.Y,{direction:"horizontal",horizontalAlignItems:"end",height:"hug-contents"},i.createElement(T.$,{variant:"secondary",onClick:p},(0,b.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(T.$,{variant:"primary",onClick:d},(0,b.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;default:(0,o.assertNever)(n)}switch(n){case"stop-auto-run-from-user":case"stop-auto-run-from-org":l=(0,b.t)("dev_handoff.autorun_confirm_modal.title_stop_auto_run");break;case"confirm-replace":l=(0,b.t)("dev_handoff.autorun_confirm_modal.title_replace_auto_run");break;case"enable-auto-run":l=(0,b.t)("dev_handoff.autorun_confirm_modal.title_enable_auto_run",{pluginName:e.orgPluginName});break;default:(0,o.assertNever)(n)}return i.createElement(w.XV,{title:l,onClose:()=>h(c.Lo()),maxWidth:360},i.createElement("div",{className:y.cx.p16.$,"data-testid":"autorun-confirm-modal"},s))},"AutoRunConfirmModal");function C(e){let r=e?.plugin_id??"",n=e?.name??"",l=function(){let e=L(),r=R(),n=u.sZ()?.id,i=p.iZ()?.id;if(!(e.loaded&&r.loaded))return{loaded:!1,plugin:null};let a=null;switch(e.autoRunPrefs?.autoRunPluginBehavior){case m.xw.NONE:a=null;break;case m.xw.OVERRIDE:a=e.autoRunPrefs.autoRunPlugin;break;case m.xw.INHERIT:default:a=r.autoRunPrefs?.autoRunPlugin??null}let o=a?(0,d.mf)(a,n??"",i??"",null)??null:null;return{loaded:!0,plugin:O(o)?o:null}}(),h=R(),_=(0,E.ks)(),y=_&&l.plugin?.plugin_id===r,b=(0,s.Xr)(g.Lx),I=L(),T=(0,a.wA)();return{isPluginSetToAutoRun:y,callback:i.useCallback(()=>{if(!_||(b(!0),!l.loaded||!h.loaded))return;let e=I.autoRunPrefs?.autoRunPluginBehavior,i={pluginID:r,orgPluginName:h.autoRunPrefs?.autoRunPlugin.currentPluginVersion?.name||"",currentAutoRunPluginName:l.plugin?.name||""};switch(e){case void 0:case m.xw.NONE:f.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;case m.xw.OVERRIDE:r!==l.plugin?.plugin_id?f.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE):h.autoRunPrefs?T((0,c.to)({type:N,data:{commonShowModalArgs:i,autoRunModalType:A.STOP_AUTO_RUN_FROM_USER}})):f.s.updateUserAutoRunPluginId(r,m.xw.NONE);break;case m.xw.INHERIT:h.autoRunPrefs?r!==h.autoRunPrefs.autoRunPluginId?T((0,c.to)({type:N,data:{commonShowModalArgs:i,newPluginName:n,autoRunModalType:A.CONFIRM_REPLACE}})):T((0,c.to)({type:N,data:{commonShowModalArgs:i,autoRunModalType:A.STOP_AUTO_RUN_FROM_ORG}})):f.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;default:(0,o.assertNever)(e)}},[_,b,l.loaded,l.plugin?.name,l.plugin?.plugin_id,h.loaded,h.autoRunPrefs,I.autoRunPrefs?.autoRunPluginBehavior,r,T,n])}}function O(e){return e&&(0,_.UH)(e)}function L(){let e=(0,p.iZ)();return P((0,l.Rs)(h.Sc8,{targetOrgId:null,targetUserId:e?.id??""},{enabled:!!e?.id}))}function R(e){let r=(0,u.sZ)(),n=!!(r&&r.bigma_enabled),i=(0,l.Rs)(h.Sc8,{targetOrgId:r?.id??"",targetUserId:null},{enabled:n});return n?P(i,e):{loaded:!0,autoRunPrefs:null}}function P(e,r){if("loaded"!==e.status)return{loaded:!1,autoRunPrefs:null};let n=e.data.pluginPreferences,i=!!(r||n?.autoRunEnabled);return n&&n.autoRunPluginId&&n.autoRunPlugin&&i?{loaded:!0,autoRunPrefs:{autoRunPluginId:n.autoRunPluginId,autoRunPluginBehavior:n.autoRunBehavior,autoRunPlugin:n.autoRunPlugin}}:{loaded:!0,autoRunPrefs:null}}},771513:(e,r,n)=>{"use strict";n.d(r,{Z0:()=>a});var i=n(954301);function a(e){return e.map(e=>({name:e.title,lines:e.code.split("\n").map(e=>({code:e,indent:Math.floor(function(e){let r=0;for(let n of e)if(o[n])r+=o[n];else break;return r}(e)/2)})),language:(0,i.u)(e.language)}))}let o={" ":1,"	":2}},656399:(e,r,n)=>{"use strict";n.d(r,{Q:()=>d});var i=n(411855),a=n(730371);n(268537),n(46481),n(939863);var o=n(308977),s=n(92597);n(318812);var l=n(99506);n(498606);var c=n(400466);function d(){let{setCodegenSettings:e,localCodegenSettings:r}=(0,c.VR)(),n=(0,o.v4)(),d=(0,s.gc)(),u=i.useMemo(()=>r?.behavior===l.Rc.OVERRIDE&&(0,a.deepEqualsIgnoringUndefined)(r?.language,n)&&(0,a.deepEqualsIgnoringUndefined)(r?.preferences,d),[n,d,r]);return{updateDefaultCodegenSettings:i.useCallback(()=>{e({behavior:u?l.Rc.INHERIT:l.Rc.OVERRIDE,language:n,preferences:d})},[n,d,u,e]),isSetToDefault:u}}n(720488),n(227795)},176626:(e,r,n)=>{"use strict";n.d(r,{Ew:()=>i.E,IN:()=>c.IN,L_:()=>o.L,VY:()=>s.V,Wh:()=>c.Wh,Yx:()=>l.Y,_x:()=>a._x,gH:()=>c.gH,mN:()=>a.mN});var i=n(8481),a=n(559497);n(804926);var o=n(678003),s=n(18795),l=n(122296),c=n(396635)},118658:(e,r,n)=>{"use strict";var i=n(411855),a=n(909688),o=n(201119),s=n(124951),l=n(109388),c=n(188507),d=n(939683),u=n(44948),p=n(820286),m=n(374626),h=n(268537),_=n(192437),g=n(762638),f=n(939863),E=n(785315),y=n(256975),b=n(738269),I=n(986270),T=n(902139),v=n(802915),S=n(798099),w=n(780700);n(756085);var A=n(318812),N=n(555328),C=n(498606),O=n(554294);n(400466);var L=n(978527),R=n(507956),P=n(206074),D=n(720488),k=n(7959),M=n(76158),F=n(76154),x=n(710614),U=n(362679);function B(){let e=z(),r=!!e,[n,a]=i.useState({x:0,y:0});return i.useEffect(()=>{if(r){let e=e=>{a({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}},[r]),e?l.createPortal(i.createElement(L.V,{plugin:e,className:g.cx.h16.w16.bRadius2.$,style:{position:"fixed",left:n.x-8,top:n.y-8,pointerEvents:"none",zIndex:1e5}}),document.body):null}function V(e){let{pinnedPlugins:r,unpinPlugin:n,movePin:a,runPlugin:o}=e,s=(0,m.md)(O.be),[l,d]=i.useState(!1),p=z(),h=(0,c.wA)(),{shownPlugins:_,overflowPlugins:f}=r.length>3?{shownPlugins:r.slice(0,2),overflowPlugins:r.slice(2)}:{shownPlugins:r,overflowPlugins:[]},E=s?.plugin_id??null,y=f.findIndex(e=>e.plugin_id===E);if(-1!==y){let e=f[y];p||f.splice(y,1),_.push(e)}let b=_[_.length-1]?.plugin_id,T=(0,u.k9)(()=>new Set(r.map(e=>e.plugin_id)),[r]);return i.useEffect(()=>{h(I.Vg({resourceType:N.bD.PLUGIN,resourceIds:Array.from(T)}))},[T,h]),i.createElement("div",{className:g.cx.flex.flexRow.flexGrow1.itemsEnd.$,"data-testid":"pinned-plugins"},i.createElement("div",{className:g.cx.hFull.wFull.flex.flexRow.justifyEnd.alignCenter.$},i.createElement(K,{target:{type:"begin"},variant:"vertical"}),_.map(e=>{let r=e.plugin_id===E&&!!p&&-1!==y;return i.createElement("div",{key:e.plugin_id,style:{visibility:r?"hidden":"visible",display:"contents"}},i.createElement(G,{plugin:e,unpinPlugin:n,movePin:a,runPlugin:o,setIsDropdownShown:d}),i.createElement(K,{target:{type:"after",id:e.plugin_id},variant:"vertical",disabled:r}))}),f.length>0&&i.createElement(H,{isDropdownShown:!!p||l,setIsDropdownShown:d,plugins:f,unpinPlugin:n,lastShownPluginID:b,movePin:a,runPlugin:o})))}function G({plugin:e,unpinPlugin:r,movePin:n,runPlugin:o,setIsDropdownShown:s}){let l=(0,w.Gt)(e.plugin_id,"pinned"),u=(0,m.md)(O.be),p=u?.plugin_id??null,[h,_]=(0,m.fp)(E.H),f=(0,d.U)(),I=i.useRef(null),S=(0,y._I)(),N=(0,R.ks)()&&!S,D=(0,c.wA)(),k=(0,A.Um)(),U=(0,v.p)(e.plugin_id,l),B=U.length>0,V=(0,F.yG)(e.plugin_id,"pinned")&&B,G=i.useCallback(r=>{if(B){V?D(b.oB()):D((0,F.dr)({pluginId:e.plugin_id,tileType:"pinned"}));return}l()},[B,l,V,D,e.plugin_id]),[{isDragging:H},K]=(0,a.i)(()=>({type:"pinned-plugin",collect:e=>({isDragging:!!e.isDragging()}),item:e,canDrag:()=>p!==e.plugin_id&&!N,end:(r,i)=>{let a=i.getDropResult();i.didDrop()&&a&&n(e.plugin_id,a)}}),[N,n,p,e.plugin_id]),j=k?.type===Y&&k.data.pluginId===e.plugin_id,z=i.useCallback(r=>{r.stopPropagation(),r.preventDefault(),j?D(b.oB()):D(b.j7({type:Y,data:{targetRect:r.currentTarget.getBoundingClientRect(),pluginId:e.plugin_id}}))},[D,j,e.plugin_id]),$=I.current?.getBoundingClientRect();return i.createElement("div",{className:g.cx.relative.$,ref:I},i.createElement("button",{className:u?.plugin_id===e.plugin_id?x.TU:x.y_,"data-tooltip-type":j||H?void 0:C.Ib.TEXT,"data-tooltip":j||H?void 0:e.name,onClick:r=>{N?(_(E._.PLUGIN),D(T.IN({fdPreviewResource:{id:e.plugin_id,type:M.s.PLUGIN}}))):B?G(r):o&&(_(E._.PLUGIN),p!==e.plugin_id&&(l(),f("Dev Handoff Ran Pinned Plugin",{pluginId:e.plugin_id})),s(!1))},onContextMenu:z},i.createElement(L.V,{plugin:e,draggable:!1,className:g.cx.h16.w16.bRadius2.$,ref:K,style:{opacity:H?.5:1}})),j&&i.createElement(W,{plugin:e,unpinPlugin:r}),V&&$&&i.createElement(P.j,{showPoint:!1,items:U,onSelectItem:r=>{r.callback&&(r.callback("",null,D),s(!1),f("Dev Handoff Ran Pinned Plugin Submenu",{pluginId:e.plugin_id}))},parentRect:$,dispatch:D,lean:"left"}))}function H({plugins:e,unpinPlugin:r,lastShownPluginID:n,isDropdownShown:a,setIsDropdownShown:o,movePin:s,runPlugin:l}){let c=i.useRef(null);return i.useEffect(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[o]),i.createElement(i.Fragment,null,i.createElement("div",{className:x.zA,ref:c},i.createElement(k.YW,{svg:U.A,onClick:()=>o(!a),onMouseDown:S.dG,recordingKey:"overflow_pins",selected:!1,tooltipForScreenReadersOnly:!0,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,f.t)("dev_handoff.inspect_panel.more_plugins")}),a&&i.createElement("div",{className:x.Wm},i.createElement(K,{target:{type:"after",id:n},variant:"horizontal"}),e.map(e=>i.createElement(i.Fragment,{key:e.plugin_id},i.createElement(G,{plugin:e,unpinPlugin:r,movePin:s,runPlugin:l,setIsDropdownShown:o}),i.createElement(K,{target:{type:"after",id:e.plugin_id},variant:"horizontal"}))))))}function W({plugin:e,unpinPlugin:r}){let n=(0,A.Um)();return i.createElement(D.Cf,{targetRect:n?.data.targetRect,lean:"left",minWidth:64,maxWidth:120,disableDropdownScrollContainer:!0,propagateCloseClick:!0},i.createElement(h.c$,{onClick:()=>r(e.plugin_id)},(0,f.tx)("dev_handoff.inspect_panel.unpin")))}function K({target:e,variant:r,disabled:n=!1}){let[{isOver:a},s]=(0,o.H)(()=>({accept:"pinned-plugin",drop:()=>e,collect:e=>({isOver:!!e.isOver()}),canDrop:()=>!n}),[e,n]),l={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"begin"===e.type?1:0,..."vertical"===r?"begin"===e.type?{position:"relative",justifyContent:"end",minWidth:16,height:32,marginRight:-8}:{width:16,height:32,top:0,left:-8}:{width:32,height:16,top:-8,left:0}};return i.createElement("div",{style:{position:"relative",flexGrow:"begin"===e.type?1:0,width:0,height:0,display:"flex",overflow:"visible",zIndex:1}},i.createElement("div",{style:l,ref:s},a&&i.createElement(j,{variant:r,target:e})))}function j({variant:e,target:r}){return i.createElement("div",{style:{background:"var(--color-icon-brand)",..."horizontal"===e?{height:2,width:32}:{height:32,width:2},..."begin"===r.type?{marginRight:6}:{}}})}function z(){let e=(0,s.u)(),[r,n]=i.useState(null);return i.useEffect(()=>e.getMonitor().subscribeToStateChange(()=>{n(e.getMonitor().getItem())}),[e,n]),r}i.memo(function(e){return!function(){let[e,r]=i.useState(!1);return i.useEffect(()=>{let e=requestAnimationFrame(()=>{r(!0)});return()=>cancelAnimationFrame(e)},[]),e}()?null:i.createElement(_.tH,{boundaryKey:"PinnedPlugins",fallback:i.createElement(i.Fragment,null)},i.createElement(p.hh,null,i.createElement(V,{...e}),i.createElement(B,null)))});let Y="PINNED_PLUGIN_DROPDOWN"},400466:(e,r,n)=>{"use strict";n.d(r,{VR:()=>x});var i=n(411855),a=n(188507),o=n(752795),s=n(939683);n(404843);var l=n(915440),c=n(27087);n(986291);var d=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.PUBLISHED_AT="published_at",e.ALL_TIME="all_time",e.FEATURED="featured",e))(d||{}),u=(e=>(e.ALL="all",e.THIRD_PARTY_FLAGGED="third_party_flagged",e.THIRD_PARTY_MIGRATING="third_party_migrating",e.UNCATEGORIZED="uncategorized",e))(u||{}),p=(e=>(e.HUB_FILES="HUB_FILES",e.PLUGINS="PLUGINS",e.PLUGIN_REVIEW="PLUGIN_REVIEW",e.WIDGET_REVIEW="WIDGET_REVIEW",e.PLUGIN_SECURITY_FORM_REVIEW="PLUGIN_SECURITY_FORM_REVIEW",e.HUB_FILE_REVIEW="HUB_FILE_REVIEW",e.COMMUNITY_MODERATION="COMMUNITY_MODERATION",e.VISUAL_COMPLIANCE="VISUAL_COMPLIANCE",e.COMMUNITY_CATEGORIES_2="COMMUNITY_CATEGORIES_2",e.COMMUNITY_SHELVES="COMMUNITY_SHELVES",e.COMMENTS="COMMENTS",e.COMMUNITY_SHELVES_2="COMMUNITY_SHELVES_2",e.URL_REDIRECTS="URL_REDIRECTS",e.BADGES="BADGES",e.BULK_PUBLISH="BULK_PUBLISH",e))(p||{}),m=(e=>(e.REPORTED="REPORTED_COMMENTS",e.ALL="ALL_COMMENTS",e.ALL_RATINGS="ALL_RATINGS",e.REPORTED_RATINGS="REPORTED_RATINGS",e))(m||{}),h=(e=>(e.COMMUNITY_LANDING="community_landing",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.EXPERIMENTAL="experimental",e))(h||{}),_=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(_||{}),g=(e=>(e.INACTIVE="inactive",e.SCHEDULED="scheduled",e.FEATURED="featured",e.ARCHIVED="archived",e))(g||{}),f=(e=>(e.SPAM="SPAM",e.HAM="HAM",e))(f||{}),E=(e=>(e.COMMENT="comment",e.HUB_FILE="hub_file",e.PROFILE="profile",e))(E||{}),y=n(256975),b=n(519685);n(370934),n(92597);var I=n(931828),T=n(756085),v=n(742250);n(843495),n(335682);var S=n(694687),w=n(860178),A=n(99506),N=n(279453);n(215822),n(285334);var C=n(507956),O=n(634832),L=n(587670),R=n(757028),P=n(966712);let D={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:A.tK.PIXEL,scaleFactor:null},behavior:A.Rc.INHERIT};class k{constructor(e,r,n){if(this.workingPreferences=e,this.parentPreferences=r,this.parentEnabledPreferences=n,!r||!n)return;let{codegenEnabled:i,pinnedPluginsEnabled:a}={...n},o={...r};i||(o.codegenSettings=null),!a&&(0,P.kc)().dev_mode_org_pinned_plugins_ent&&(o.pins=[],o.removedInheritedPins=[]),this.parentPreferences=o}orgPinsNotInUserPins(){let e=[];for(let r of this.parentPreferences?.pins??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||e.push(r);return e}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],r=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!r.has(e.pluginId)&&(!e.inherited||M(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){return this.parentPreferences&&this.workingPreferences.codegenSettings?.behavior!==A.Rc.OVERRIDE?this.parentPreferences?.codegenSettings??null:this.workingPreferences.codegenSettings}update(e){return new k((0,R.Ay)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var r;let n=(r=this.workingPreferences,r?.pins.findIndex(r=>r.pluginId===e&&r.inherited));return null!=n&&-1!==n?this.update(r=>{r.pins[n].inherited=!1,r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)}):M(this.workingPreferences,e)?this:this.update(r=>{r.pins.push({pluginId:e,inherited:!1}),r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)})}unpinPlugin(e){return this.update(r=>{r.pins=r.pins.filter(r=>r.pluginId!==e),M(this.parentPreferences,e)&&r.removedInheritedPins.push(e)})}movePin(e,r){return"after"===r.type&&e===r.id||"begin"===r.type&&this.pinnedPluginIDs[0]===e?this:this.update(n=>{let i=M(this.workingPreferences,e),a=M(this.parentPreferences,e),o=!!(!i&&a);switch(n.pins=n.pins.filter(r=>r.pluginId!==e),r.type){case"begin":n.pins.unshift({pluginId:e,inherited:o});break;case"after":{let i=n.pins.findIndex(e=>e.pluginId===r.id);if(-1!==i)n.pins.splice(i+1,0,{pluginId:e,inherited:o});else{let i=this.orgPinsNotInUserPins(),a=i.findIndex(e=>e.pluginId===r.id);if(-1===a)throw Error("Invalid pin to move after");n.pins.push(...i.slice(0,a+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:o})}}}})}get localCodegenSettings(){if(!this.codegenSettings)return null;let e=this.codegenSettings?.language,r=this.lgLanguageToLocalLanguage(e);if(!r)return null;let n=this.codegenSettings.preferences,i=this.lgUnitToLocalUnit(n.unit);return{language:r,preferences:{scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:i},behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(r=>{let n=this.localLanguageTypeToLgLanguageType(e.type);if(!n)throw Error("Invalid language type");let i={...e,type:n,pluginLanguage:e.pluginLanguage??null};r.codegenSettings={language:i,preferences:this.codegenSettings?.preferences||D.preferences,behavior:this.codegenSettings?.behavior||D.behavior}})}setCodegenSettingUnit(e){return this.update(r=>{if(!this.codegenSettings)return;let n=this.localUnitToLgUnit(e);if(!n)throw Error("Invalid unit");let i=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:n}:{scaleFactor:null,unit:n,customSettings:null};r.codegenSettings={language:this.codegenSettings.language,preferences:i,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,r){return this.update(n=>{if(!this.codegenSettings)return;let i=this.localLanguageTypeToLgLanguageType(e.type);if(!i)throw Error("Invalid language type");let a={...e,type:i,pluginLanguage:e.pluginLanguage??null},o={scaleFactor:this.codegenSettings.preferences?.scaleFactor??null,unit:this.codegenSettings.preferences?.unit??null,customSettings:{...this.codegenSettings.preferences?.customSettings,...r.customSettings}};n.codegenSettings={language:a,preferences:o,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(r=>{if(!e){r.codegenSettings=null;return}let{behavior:n,language:i,preferences:a}=e,o=this.localLanguageTypeToLgLanguageType(i.type);if(!o)throw Error("Invalid language type");let s={...i,type:o,pluginLanguage:i.pluginLanguage??null},l={unit:this.localUnitToLgUnit(a.unit),customSettings:a.customSettings??null,scaleFactor:a.scaleFactor??null};r.codegenSettings={behavior:n,language:s,preferences:l}})}localUnitToLgUnit(e){switch(e){case L.tKW.PIXEL:return A.tK.PIXEL;case L.tKW.SCALED:return A.tK.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case A.tK.PIXEL:return L.tKW.PIXEL;case A.tK.SCALED:return L.tKW.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return A.h9.FIRST_PARTY;case"published-plugin":return A.h9.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let r;switch(e.type){case A.h9.FIRST_PARTY:r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case A.h9.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,O.assertNever)(e.type)}return r}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function M(e,r){return e?.pins.some(e=>e.pluginId===r)}let F={pins:[],removedInheritedPins:[],codegenSettings:null};function x(){let{loaded:e,preferences:r}=function(){let e=(0,w.TA)(),{loaded:r,preferences:n}=B((0,l.Rs)(N.JuA,{targetOrgId:null,targetUserId:e}));return{loaded:r,preferences:n}}(),{loaded:n,preferences:c,codegenEnabled:d,pinnedPluginsEnabled:u}=function(){let e=(0,S.sZ)();return B((0,l.Rs)(N.JuA,{targetOrgId:e?.id??null,targetUserId:null}))}(),p=(0,a.wA)(),m=(0,s.U)(),h=(0,C.ks)(),g=(0,y._I)(),f=h&&!g;(0,i.useEffect)(()=>{r&&A(null)},[r]);let E=(0,i.useMemo)(()=>new k(r??F,c??null,{codegenEnabled:d,pinnedPluginsEnabled:u}),[r,c,d,u]),[v,A]=(0,i.useState)(null),O=(0,i.useMemo)(()=>{let e=new Map;for(let n of[...r?.pins??[],...c?.pins??[]])n.plugin&&e.set(n.pluginId,n.plugin);return e},[c?.pins,r?.pins]),L=(0,i.useMemo)(()=>v?.pinnedPluginIDs??E.pinnedPluginIDs,[E,v]),R=(0,a.d4)(e=>e.currentUserOrgId),P=(0,w.TA)(),D=(0,T.YN)(),M=(0,i.useMemo)(()=>L.map(e=>{let r=O.get(e);if(!r||!r.publishingStatus||r.publishingStatus!==_.APPROVED_PUBLIC&&r.publishingStatus!==_.ORG_PRIVATE)return null;let n=(0,T.mf)(r,R,P,null);return n&&(f||D(n))?n:null}).filter(o.isNotNullish),[L,O,R,P,f,D]),x=e=>{A(e),U(e.serialize()).catch(()=>{A(null)})};return{pinnedPlugins:M,unpinPlugin(e){x(E.unpinPlugin(e)),m("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){p(I.b({[b.xb]:!0})),x(E.pinPlugin(e)),m("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,r){x(E.movePin(e,r)),m("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:E.localCodegenSettings,setCodegenSettings(e){x(E.setCodegenSetting(e))},setCodegenSettingsLanguage(e){x(E.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){x(E.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,r){x(E.setCodegenSettingCustomSettings(e,r))},loaded:e&&n}}async function U(e){await c.Ay.post("/api/plugin_preferences/user",{preferences:e})}function B(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let r=e.data.pluginPreferences,{codegenEnabled:n,pinnedPluginsEnabled:i}=r||{};return{loaded:!0,preferences:r?.preferences,codegenEnabled:n??!1,pinnedPluginsEnabled:i??!1}}v.qZ.CSS,A.h9.FIRST_PARTY,A.tK.PIXEL,A.Rc.INHERIT},118034:(e,r,n)=>{"use strict";n.d(r,{qg:()=>d,vX:()=>g,xF:()=>p});var i=n(730371),a=n(776621),o=n(1469),s=n(479296),l=n(13517),c=n(743794);async function d(e,r,n){let o={fonts:{},images:{}},s=new Map,l=null,d=e();for(let u=0;u<20&&(function(e,r){let n=e=>{if(!e)return;let{children:i,fillSrc:a,textStyle:o}=e.renderMetaData;if(o&&(m(r,o.style),o.ranges.forEach(e=>m(r,e.style))),a&&!r.images.hasOwnProperty(a)&&(r.images[a]={hasLoaded:!1}),i)for(let e of(0,c.MI)(i))n(e)};n(e)}(d.rootNode,o),(Object.values(o.fonts).some(({hasLoaded:e})=>!e)||Object.values(o.images).some(({hasLoaded:e})=>!e))&&await h(o,s,r,n),l=d,d=e(),!(0,i.deepEquals)(l?.syncedState,d.syncedState));u++)19===u&&(0,a.x1)("resources","Loading reconciliation resources reached max iterations");return{imgInfoMap:s,vRoot:d}}async function u(e,r,n){try{let i=await p(e,n),a=r.createImage(i).hash,{width:o,height:s}=(await Promise.all([g(i)]))[0];return{hash:a,width:o,height:s}}catch(e){r.logWarning("Unable to load image. See the warning below for more info."),r.logWarning(e)}return null}let p=(0,s.n)(async(e,r)=>{if(function(e){try{let r=new URL(e);return"http:"===r.protocol||"https:"===r.protocol}catch(e){return!1}}(e)){if(!(0,l.pT)(e,r))throw Error(`Image URL ${e} does not satisfy the allowedDomains specified in the manifest.json`);e=(0,o.p)(e)}let n=await fetch(e);if(!n.ok)throw Error(`Unable to fetch image. Response status: ${n.status}`);return new Uint8Array(await n.arrayBuffer())});function m(e,r){let{fontName:n}=r;if(!n)return;let i=`${n.family} ${n.style}`;e.fonts.hasOwnProperty(i)||(e.fonts[i]={fontName:n,hasLoaded:!1})}async function h(e,r,n,i){let a=async e=>{let a=await u(e,n,i);a&&r.set(e,a)},o=Object.values(e.fonts).filter(({hasLoaded:e})=>!e).map(async e=>{await n.loadFontAsync(e.fontName),e.hasLoaded=!0}),s=Object.entries(e.images).filter(([,{hasLoaded:e}])=>!e).map(async([e,r])=>{await a(e),r.hasLoaded=!0});await Promise.all([...o,...s])}let _=e=>{let r="";return[].slice.call(new Uint8Array(e)).forEach(e=>r+=String.fromCharCode(e)),window.btoa(r)};function g(e){return new Promise(r=>{let n=new Image;n.onload=()=>{r({width:n.width,height:n.height})};let i=_(e);n.src="data:image;base64,"+i})}},501256:(e,r,n)=>{"use strict";n.d(r,{F5:()=>o,Rs:()=>l,Z:()=>s,nx:()=>c});var i=n(824520),a=n(23001);function o(e,r){let n=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);return e.tokens.some(e=>e.state===a.d.ERROR)&&(n=!1),e.inputValue&&e.inputValue.length&&r(e.inputValue).state===a.d.ERROR&&(n=!1),n}function s(e){let r=[];for(let n of e.tokens){let e="string"==typeof n.content?n.content:n.content.email;r.push(e.toLowerCase())}return e.inputValue&&r.push(e.inputValue.toLowerCase()),r}function l(){return{inputValue:"",tokens:[],errorMessage:""}}function c(e=l(),r){return i.cL.matches(r)?l():i.hZ.matches(r)?{...r.payload}:i.Ox.matches(r)?{...e,tokens:e.tokens.concat(r.payload),inputValue:""}:i.pf.matches(r)?{...e,inputValue:r.payload}:i.g.matches(r)?{...e,errorMessage:r.payload}:e}},279145:(e,r,n)=>{"use strict";n.d(r,{Nf:()=>v,Q_:()=>h,Rn:()=>b,TY:()=>f,Yh:()=>I,c1:()=>T,fj:()=>_,jv:()=>E,nJ:()=>m,pD:()=>p,pi:()=>g});var i=n(587670),a=n(966712),o=n(588169),s=n(563706),l=n(738269),c=n(293017),d=n(69961),u=n(279702);function p(e,r){return!e&&!r||e===r}function m(e,r){return!e&&!r||!!e&&!!r&&e.nodeId==r.nodeId}function h(e,r){let n=e?e.nodeId:void 0,i=e?e.name:void 0,a=e?e.backgroundColor:void 0,o=e?e.pageId:void 0,s=r?r.nodeId:void 0,l=r?r.name:void 0,c=r?r.backgroundColor:void 0,d=r?r.pageId:void 0;return(n!==s||i!==l||a!==c||!!o||!d)&&!function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name","backgroundColor","pageName","pageId","containingStateGroup"])switch(n){case"nodeId":case"name":case"backgroundColor":case"pageName":case"pageId":if(!p(e[n],r[n]))return!1;break;case"containingStateGroup":if(!function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name"])if(!p(e[n],r[n]))return!1;return!0}(e[n],r[n]))return!1}return!0}(e,r)}function _(e={...u.Gf},r){return l.Ts.matches(r)?u.Gf:(c.p5.matches(r)&&r.payload.appModelChanges&&-1===(e={...e,...r.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:i.vRS.COLOR}),e)}let g="fullscreen-menu-dropdown";function f(e){return e?.type===g}let E="quick-actions-dropdown",y=Object.create(null);function b(e){let r=y[e];return r||(r=y[e]=`actionEnabled__${e}`),r}function I(e,r){return!!e[b(r)]}function T(e,r){let n="\u{1F310}";switch(r){case"set-tool-bend":return s.Ay.mac?"\u2318":"Ctrl";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":case"set-tool-sites-link":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return s.Ay.mac?"\u23252":"Alt+2";case"toggle-inline-preview":return"\u21E7Space";case"toggle-inline-html-preview":return"\u2325\u21E7Space";case"toggle-sidebar":if(d.nt.ui3.getValue())switch((0,o.v7)()){case i.aTn.US_QWERTY:case i.aTn.UNKNOWN:case i.aTn.DVORAK:return s.Ay.mac?"\u21E7\\":"Shift+\\"}break;case"set-tool-sites-responsive-set":return"W";case"deselect-all":return"\u238B";case"multi-edit-text":return"Enter";case"page-next":if((0,a.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2193";break;case"page-previous":if((0,a.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2191"}if(e[r]){let n=e[r];if(n&&n.length>=1)return n[0].text}return""}function v(e){return e&&e.currentPage?e.currentPage:"0:1"}},378762:(e,r,n)=>{"use strict";n.d(r,{K3:()=>p,YI:()=>u,bp:()=>c,sp:()=>m,y2:()=>d});var i=n(634832),a=n(738269),o=n(293017),s=n(418914),l=n(497306);function c(e=Object.create(null),r){if(a.Ts.matches(r)||s.a.matches(r))return Object.create(null);if(o.p5.matches(r)&&r.payload.selection){let{add:n,remove:a,replace:o}=r.payload.selection;if((0,i.assertDev)(!((n||a)&&o),"We expect either an add or remove OR a replace."),o)return o;let s=Object.assign(Object.create(null),e,n);for(let e in a)delete s[e];return s}return e}function d(e,r,n){for(let i in r){let r=e.get(i);r&&(0,l.hV)(e,r,n)}}function u(e,r,n){for(let i in r){let r=e.get(i);r&&n(r)}}function p(e,r){return!!e[r]}function m(e,r,n){return!!function(e,r,n){if(r[n])return e.get(n)||null;let i=null;return(0,l.Si)(e,n,e=>{if(!i&&r[e.guid]&&(i=e),i)return"stop"}),i}(e,r,n)}},272917:(e,r,n)=>{"use strict";n.d(r,{A:()=>s});var i=n(980820),a=n(875458),o=n(576144);function s(e={},r){if(a.D.matches(r)){let n={...e};for(let i of r.payload)n[i.file_key]={...e[i.file_key],...i};return n}return e}(0,i.nF)(async(e,{fileKey:r})=>{let n=e.getState(),i=n.currentUserOrgId,s=n.currentTeamId;if(r in n.recentCustomTemplates||!i&&!s)return;let l=await o.q.getRecents({fileKeys:r,...i?{orgId:i}:s?{teamId:s}:{}});l&&l.data.meta.templates.length>0&&e.dispatch(a.D([l.data.meta.templates[0]]))})},750486:(e,r,n)=>{"use strict";n.d(r,{pw:()=>u,q5:()=>d,y2:()=>p});var i=n(286640),a=n(738269),o=n(712303);let s={[o.P.VIEW_MODE]:"view-bar-view-mode-option",[o.P.SORT_MODE]:"view-bar-sort-options"};function l(e){let r=i.x4&&i.x4.getItem(e)||"{}";try{return JSON.parse(r)}catch(e){return{}}}function c(e,r){if(i.x4)try{let n=JSON.stringify(r);i.x4.setItem(e,n)}catch(e){}return r}function d(e={},r){if(a.Qv.matches(r))return l(s[o.P.VIEW_MODE]);if(a.uV.matches(r)){let n={...e,[r.payload.viewId]:r.payload.viewMode};return c(s[o.P.VIEW_MODE],n)}return e}function u(e={},r){if(a.Qv.matches(r))return l(s[o.P.SORT_MODE]);if(a.ZR.matches(r)){let n={...e,[r.payload.viewId]:r.payload.sortMode};return c(s[o.P.SORT_MODE],n)}return e}function p(e,r,n){return r[e]??n}},564517:(e,r,n)=>{"use strict";n.d(r,{S:()=>o});var i=n(547807),a=n(27087);let o=new class{constructor(){this.AssetTransferSchemaValidator=(0,i.vh)(),this.OrgTeamTransfersSchemaValidator=(0,i.vh)(),this.TeamTransferSchemaValidator=(0,i.vh)(),this.FolderTransferSchemaValidator=(0,i.vh)()}getAssetTransfer(e){return this.AssetTransferSchemaValidator.validate(async({xr:r})=>await r.get(`/api/asset_transfer/${e.selectedAssetTransferRequest}`))}getOrgTeamTransfers(e){return this.OrgTeamTransfersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/asset_transfer/org_team_transfers/${e.orgId}`))}getTeamTransfer(e){return this.TeamTransferSchemaValidator.validate(async({xr:r})=>await r.get(`/api/asset_transfer/team_transfer/${e.teamId}`))}getFolderTransfer(e){return this.FolderTransferSchemaValidator.validate(async({xr:r})=>await r.get(`/api/asset_transfer/folder_transfer/${e.folderId}`))}deleteAssetTransferRequest(e){return a.Ay.del(`/api/asset_transfer/${e.id}`)}approveAssetTransferRequest(e){return a.Ay.put(`/api/asset_transfer/${e.id}/approve`,{remove_collaborators:e.removeCollaborators})}}},166748:(e,r,n)=>{"use strict";var i=n(547807),a=n(27087),o=n(594469);new class{constructor(){this.ColorPaletteSchemaValidator=(0,i.YV)("ColorPaletteSchemaValidator",o.kfm.sinatra(),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.post("/api/color_palettes",i.td.toAPIParameters(e)))}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.put(`/api/color_palettes/${e.uuid}`,i.td.toAPIParameters(e)))}async deleteColorPalette(e){await a.Ay.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,r){return a.Ay.post(`/api/files/${e}/color_palette`,i.td.toAPIParameters({colorPaletteUuid:r}))}async setTeamDefaultPalette(e,r){await a.Ay.post(`/api/teams/${e}/default_color_palette`,i.td.toAPIParameters({colorPaletteUuid:r}))}async clearTeamDefaultPalette(e){await a.Ay.del(`/api/teams/${e}/default_color_palette`)}}},767518:(e,r,n)=>{"use strict";n.d(r,{U:()=>o});var i=n(547807),a=(e=>(e.VIEW_OR_PENDING="view_or_pending",e.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",e))(a||{});let o=new class{constructor(){this.ContactsSchemaValidator=(0,i.vh)(),this.AtMentionsSchemaValidator=(0,i.vh)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",i.td.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",i.td.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,i.vh)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",i.td.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",i.td.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,i.vh)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",i.td.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",i.td.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,i.vh)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",i.td.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",i.td.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,i.vh)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",i.td.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",i.td.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:r})=>await r.get("/api/contacts",i.td.toAPIParameters(e)))}}},988771:(e,r,n)=>{"use strict";n.d(r,{Y:()=>o});var i=n(547807),a=n(27087);let o=new class{constructor(){this.GenerateImageTokenSchemaValidator=(0,i.vh)()}getGenerateImageToken(e){return this.GenerateImageTokenSchemaValidator.validate(async({xr:r})=>await r.get(`/api/feed_posts/generate_image_token/${e.fileKey}`,i.td.toAPIParameters({org_id:e.orgId,token_version:e.tokenVersion})))}markFeedViewed(e){a.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){a.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}}},877627:(e,r,n)=>{"use strict";n.d(r,{If:()=>s});var i=n(547807),a=n(330654);let o=a.object({save_location:a.string(),folder_name:a.string().optional(),org_id:a.string().optional()}),s=(0,i.YV)("ClaimTryFileSchemaValidator",o,null,!0);new class{claimTryFile(e){return s.validate(async({xr:r})=>await r.put(`/api/file/claim/${e.fileKey}`))}}},520425:(e,r,n)=>{"use strict";n.d(r,{L:()=>o});var i=n(547807),a=n(27087);let o=new class{constructor(){this.CommentsSchemaValidator=(0,i.vh)(),this.CanvasMentionsFileNeedsInviteValidator=(0,i.vh)(),this.FileCanRequestEditValidator=(0,i.vh)(),this.NewDraftFileLocation=(0,i.vh)()}getComments(e){return this.CommentsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/file/${e.fileKey}/comments/${e.commentThreadId}`))}getCanvasMentionsFileNeedsInvite(e){return this.CanvasMentionsFileNeedsInviteValidator.validate(({xr:r})=>r.get(`/api/file/${e.fileKey}/canvas_mentions/needs_invite?mentioned_user_id=${e.mentionedUserId}`))}getFileCanRequestEdit(e){return this.FileCanRequestEditValidator.validate(({xr:r})=>r.get(`/api/files/${e.fileKey}/can_request_edit`))}acceptFileRoleRequest(e){return a.Ay.post(`/api/files/role_request/${e.roleRequestId}/accept`,{source:e.source})}denyFileRoleRequest(e){return a.Ay.post(`/api/files/role_request/${e.roleRequestId}/deny`,{source:e.source})}createStarterTeamFileRole(e){return a.Ay.put("/api/files/create_starter_team_file_role",{key:e.key})}updateFolderAccessEnabled(e){return a.Ay.put(`/api/files/${e.fileKey}`,{folder_access_enabled:e.folderAccessEnabled})}postRecentActivity(e){return a.Ay.post(`/api/files/${e.fileKey}/recent_activity`,{activity_type:e.activityType})}getNewFileLocation(e){return this.NewDraftFileLocation.validate(async({xr:r})=>await r.get("/api/new_file_location",i.td.toAPIParameters({editorType:e.editorType})))}}},640209:(e,r,n)=>{"use strict";n.d(r,{Gh:()=>c});var i=n(547807),a=n(330654),o=n(642481);let s=a.object({userPromptRaw:a.string(),jsx:a.string(),theme:a.record(a.any()).optional(),trace:a.any().optional(),userPrompt:a.string().optional(),userPromptFull:a.string().optional(),systemPrompt:a.string().optional()}),l=a.object({eval_results:a.array(s)});a.union([a.object({status:a.literal("pending")}),a.object({status:a.literal("failed")}),l.extend({status:a.literal("success")})]);let c=new class{constructor(){this.FirstDraftPublishStatusSchemaValidator=(0,i.vh)(),this.FirstDraftAllKitsSchemaValidator=(0,i.vh)(),this.FirstDraftMatchGroupSchemaValidator=(0,i.vh)(),this.FirstDraftMatchPresetModesSchemaValidator=(0,i.vh)(),this.FirstDraftPublishLocalKitSchemaValidator=(0,i.vh)(),this.FirstDraftGenerateThemeV5SchemaValidator=(0,i.vh)(),this.FirstDraftAllEvalSetsSchemaValidator=(0,i.vh)(),this.FirstDraftRunEvalsSchemaValidator=(0,i.vh)(),this.FirstDraftEvalStatusSchemaValidator=(0,i.vh)(),this.FirstDraftGetRetrievedExamplesSchemaValidator=(0,i.vh)()}postFirstDraftPublishStatus({productComponentKeyToVersion:e,groupedComponentKeyToVersion:r,exampleKeyToVersion:n,variableSetKeyToVersion:i,publishType:a,kitKey:s}){return this.FirstDraftPublishStatusSchemaValidator.validate(async({xr:l})=>await l.post("/api/first_draft/kit_status",{product_components:e,grouped_components:r,examples:n,variable_sets:i,is_local:a===o.tf.LOCAL_GENERATION,kit_key:s,type_info_version:o.Q6,theme_info_version:o.$5}))}getFirstDraftAllKits(){return this.FirstDraftAllKitsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_kits"))}getFirstDraftMatchGroup(e){return this.FirstDraftMatchGroupSchemaValidator.validate(async({xr:r})=>await r.get("/api/first_draft/match_group",i.td.toAPIParameters(e)))}postFirstDraftMatchPresetModes(e){return this.FirstDraftMatchPresetModesSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/match_preset_modes",{kit_key:e.kit_key,is_local:e.is_local,user_prompt:e.user_prompt}))}postFirstDraftPublishLocalKit({fileKey:e,publishMetadata:r}){return this.FirstDraftPublishLocalKitSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/publish_local_kit/${e}`,{publish_metadata:r}))}postFirstDraftGenerateThemeV5({userPrompt:e,isLocal:r,kitKey:n}){return this.FirstDraftGenerateThemeV5SchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/generate_theme",{user_prompt:e,is_local:r,kit_key:n}))}getFirstDraftAllEvalSets(){return this.FirstDraftAllEvalSetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_eval_sets"))}postFirstDraftRunEvals({model:e="gpt-4-turbo-2024-04-09",selectedEval:r,isLocal:n,kitKey:i,evalPrompts:a}){let o={is_local:n,kit_key:i};return e&&(o.model=e),a?o.eval_prompts=a:o.eval_set_id=r,this.FirstDraftRunEvalsSchemaValidator.validate(async({xr:e})=>await e.post("/api/first_draft/run_evals",o))}getFirstDraftsEvalStatus({s3Key:e}){return this.FirstDraftEvalStatusSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/eval_status",{s3_key:e}))}getFirstDraftRetrievedExamples({kitKey:e,isLocal:r,prompt:n}){return this.FirstDraftGetRetrievedExamplesSchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/get_retrieved_examples",{kit_key:e,is_local:r,prompt:n}))}}},379791:(e,r,n)=>{"use strict";n.d(r,{G:()=>l});var i=n(547807),a=n(330654),o=n(66037),s=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(s||{});let l=new class{constructor(){this.GuestResourcesSchemaValidator=(0,i.vh)(),this.OrgUserSchemaValidator=(0,i.YV)("OrgUserSchemaValidator",o.WU,null,!1),this.UpdateOrgUsersSchemaValidator=(0,i.YV)("UpdateOrgUsersSchemaValidator",a.array(o.WU),null,!1),this.CreateStarterTeamSchemaValidator=(0,i.vh)(),this.FetchDevModeNudgesExpEntryValidator=(0,i.vh)()}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/org_user/${e.orgUserId}/guest_resources`))}updateOrgUser(e){let{id:r,changes:n}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${r}`,i.td.toAPIParameters(n)))}updateOrgUsers(e){let{orgId:r,...n}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.orgId}/org_users`,i.td.toAPIParameters(n)))}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:r,flags:n}=e;return i._5.validate(({xr:e})=>e.post(`/api/org_users/${r}/flags`,{flags:n}))}declineDevModeSuggestedUpgrades(e){return i._5.validate(async({xr:r})=>await r.del(`/api/orgs/${e.org_id}/org_users/dev_mode_suggested_upgrades`,e))}requestOrgAccountTypeRequest(e){return i._5.validate(async({xr:r})=>await r.post(`/api/orgs/${e.org_id}/org_users/request_upgrade`,e))}getMemberCSVExport(e){return i._5.validate(({xr:r})=>r.post(`/api/orgs/${e.orgId}/export_members`))}logDevModeNudgesExperimentEntry(e){return this.FetchDevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.put(`/api/orgs/${e.org_id}/log_dev_mode_nudges_exp_entry`,e))}fetchDevModeNudgesExperimentEntry(e){return this.FetchDevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/fetch_dev_mode_nudges_exp_entry`))}}},679892:(e,r,n)=>{"use strict";n.d(r,{Eh:()=>y});var i,a=n(547807),o=n(27087),s=n(330654),l=n(942506),c=n(963810),d=n(566971),u=n(66037),p=n(36816),m=n(851363);(e=>{e.isOrgInvite=function(e){return e.type===u.Wd.ORG_INVITE},e.isOrgUser=function(e){return e.type===u.Wd.ORG_USER},e.isIdpUser=function(e){return e.type===u.Wd.IDP_USER}})(i||(i={}));let h=u.Ru.pick({id:!0,user:!0,type:!0}),_=s.discriminatedUnion("type",[u.WU,l.S,d.n]),g=s.object({users:s.array(s.union([_,h])).optional(),cursor:s.ignore(),designEditorCutoff:s.ignore().optional(),whiteboardEditorCutoff:s.ignore().optional(),devModeEditorCutoff:s.ignore().optional(),totalUserCount:s.number()}),f=m.kE.pick({id:!0,name:!0,img_url:!0}),E=p.wF.pick({id:!0,team_id:!0,user:!0,active_seat_type:!0}),y=new class{constructor(){this.IdpUsersSchemaValidator=(0,a.vh)(),this.LicenseGroupsSchemaValidator=(0,a.vh)(),this.BillingDataSchemaValidator=(0,a.YV)("BillingDataSchemaValidator",c.p.nullable(),null),this.TeamsSchemaValidator=(0,a.vh)(),this.TeamSchemaValidator=(0,a.vh)(),this.EligibleUpgradesFigjamSchemaValidator=(0,a.vh)(),this.OrgNameSchemaValidator=(0,a.vh)(),this.DomainsSchemaValidator=(0,a.vh)(),this.AdminsSchemaValidator=(0,a.YV)("AdminsSchemaValidator",e=>e.array(u.WU),null,!1),this.OrgUsersPaginatedSchemaValidator=(0,a.YV)("OrgUsersPaginatedSchemaValidator",g,null,!1),this.OrgUsersPaginatedSchemaValidatorPassthrough=(0,a.vh)(),this.UserSchemaValidator=(0,a.YV)("UserSchemaValidator",u.WU,null,!1),this.OauthConnectionsSchemaValidator=(0,a.vh)(),this.ShowVatGstSchemaValidator=(0,a.vh)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,a.vh)(),this.WorkspaceTeamsCountsSchemaValidator=(0,a.vh)(),this.OrgUsersCountSchemaValidator=(0,a.vh)(),this.OrgUsersFilterCountsSchemaValidator=(0,a.vh)(),this.OrgTeamsFilterCountsSchemaValidator=(0,a.vh)(),this.OrgAdminsSchemaValidator=(0,a.vh)(),this.OrgTeamsCountSchemaValidator=(0,a.vh)(),this.SetDomainCaptureSchemaValidator=(0,a.vh)(),this.EligibleUpgradesSchemaValidator=(0,a.YV)("EligibleUpgradesSchemaValidator",e=>e.object({eligible_teams:e.array(f),eligible_team_users:e.array(E)}),null,!1)}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/idp_users`))}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/license_groups`))}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.get(`/api/orgs/${e.orgId}/billing_data`);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}changeShippingAddress(e){return o.Ay.put(`/api/orgs/${e.orgId}`,{shipping_address:e.shippingAddress})}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:r})=>{let{orgId:n,...i}=e;return await r.get(`/api/orgs/${e.orgId}/teams`,a.td.toAPIParameters(i))})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`))}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrades_figjam"))}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_name`))}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/domains`))}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/admins`,a.td.toAPIParameters({include_license_admins:e.includeLicenseAdmins})))}getOrgUsersPaginatedV2(e){let{orgId:r,after:n,minimalFields:i,pageSize:o,sort:s,filter:l,...c}=e;return this.OrgUsersPaginatedSchemaValidatorPassthrough.validate(async({xr:e})=>await e.get(`/api/v2/orgs/${r}/org_users`,a.td.toAPIParameters({...c,...l||{},...s||{},minimalFields:i||void 0,pageSize:o||void 0,after:n?JSON.stringify(n):void 0})))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/user/${e.userId}`))}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/oauth_connections`))}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/show_vat_gst`))}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/license_groups/members/counts`))}getWorkspaceTeamsCounts(e){return this.WorkspaceTeamsCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/workspaces/teams/counts`))}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/count`))}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,a.td.toAPIParameters({searchQuery:e.searchQuery,product:e.product,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,role:e.role})))}getOrgTeamsFilterCounts(e){let{orgId:r,searchQuery:n,orgAccess:i,teamsWithoutOwners:a,teamsMemberOf:o,workspaceId:s,sortBy:l,sortOrder:c}=e;return this.OrgTeamsFilterCountsSchemaValidator.validate(async({xr:e})=>{let d={search_query:n,org_access:i||void 0,teams_without_owners:a?String(a):void 0,teams_member_of:void 0!==o?JSON.stringify(o):void 0,workspace_id:s||void 0,sort_by:l,order_by:c};return await e.get(`/api/orgs/${r}/team_counts`,d)})}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_admins`))}apiAutogenControls(e){let{orgId:r,autogen_password_controls:n}=e;return o.Ay.put(`/api/orgs/${r}`,{autogen_password_controls:n})}delWorkspaces(e){return o.Ay.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return o.Ay.post(`/api/orgs/${e.orgId}/validate_trial`)}selfAssignWorkspace(e){return o.Ay.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return o.Ay.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}putToggleSlidesDisabled(e){return o.Ay.put(`/api/orgs/${e.orgId}/toggle_slides_disabled`,{slides_disabled:e.slidesDisabled})}updateAiDataSharing(e){return o.Ay.put(`/api/orgs/${e.orgId}/ai_data_sharing`,{enabled:e.enabled})}getOrgTeamsCount(e){return this.OrgTeamsCountSchemaValidator.validate(({xr:r})=>r.get(`/api/orgs/${e.orgId}/teams_count`))}setDomainCapture(e){return this.SetDomainCaptureSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.org_id}/domain_capture`,{enable:!0}))}getEligibleUpgrades(){return this.EligibleUpgradesSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrade_data"))}}},802257:(e,r,n)=>{"use strict";n.d(r,{s:()=>o});var i=n(547807),a=n(27087);let o=new class{updateOrgPreferences(e,r){let{preferences:n,...i}=r,o={preferences:n};return e.bigma_enabled?(o.auto_run_plugin_id=i.auto_run_plugin_id,o.auto_run_enabled=i.auto_run_enabled,o.codegen_enabled=i.codegen_enabled,o.pinned_plugins_enabled=i.pinned_plugins_enabled):!1===i.pinned_plugins_enabled&&(o.pinned_plugins_enabled=!1),a.Ay.post(`/api/plugin_preferences/org/${e.id}`,o)}updateUserAutoRunPluginId(e,r){return a.Ay.put("/api/plugin_preferences/user",i.td.toAPIParameters({autoRunBehavior:r,autoRunPluginId:e}))}}},744410:(e,r,n)=>{"use strict";n.d(r,{E3:()=>E,is:()=>T});var i=n(547807),a=n(27087),o=n(330654),s=n(881388),l=n(980820),c=n(99506),d=n(376485),u=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(u||{});let p=o.sinatra(o.object({prompt:o.string(),inputType:o.literal("single_select"),options:o.array(o.lazy(()=>g))})),m=o.sinatra(o.object({prompt:o.string(),inputType:o.literal("multi_select"),options:o.array(o.lazy(()=>g))})),h=o.sinatra(o.object({prompt:o.string().nullish(),inputType:o.literal("text"),value:o.string().nullish(),placeholder:o.string()})),_=o.sinatra.discriminatedUnion("inputType",[p,m,h]),g=o.sinatra(o.object({label:o.string(),subQuestions:o.array(_).nullish(),isSelected:o.boolean().optional()})),f=o.sinatra(o.object({version:o.string(),questions:o.array(_)})),E=o.array(_),y={updatedAt:o.coerce.date(),pluginId:o.string(),status:o.nativeEnum(c.bQ),responses:E,formVersion:o.union([o.string(),o.number()])},b=o.sinatra(o.object(y)),I={...y,plugin:d.C};o.sinatra(o.object(I)),o.sinatra(o.object({...I,id:o.string(),createdAt:o.coerce.date(),publisherEmail:o.string().nullable()}));let T=new class{constructor(){this.SecurityFormValidator=(0,i.q$)("SecurityFormValidator",f),this.SubmitSecurityFormResponseValidator=(0,i.q$)("SubmitSecurityFormResponseValidator",o.union([o.boolean(),b])),this.DeleteSecurityFormResponseValidator=(0,i.YV)("DeleteSecurityFormResponseValidator",o.undefined(),null,!0),this.getBlankSecurityForm=async e=>{let{data:r}=await this.SecurityFormValidator.validate(async({xr:r})=>e?await r.get("/api/plugin_security_form",{version:e}):await r.get("/api/plugin_security_form")),{meta:n}=r;return{questions:n.questions,version:n.version}},this.submitSecurityFormResponse=async(e,r,n)=>{let i="plugin"===r?`/api/plugins/${e}/plugin_security_form_response`:`/api/widgets/${e}/plugin_security_form_response`;await this.SubmitSecurityFormResponseValidator.validate(async({xr:e})=>await e.post(i,this.recursivelyChangeCamelCaseToSnakeCase({response:n.questions,version:n.version})))},this.recursivelyChangeCamelCaseToSnakeCase=e=>Array.isArray(e)?e.map(this.recursivelyChangeCamelCaseToSnakeCase):"object"==typeof e&&null!==e?Object.entries(e).reduce((e,[r,n])=>{let i=r.replace(/([A-Z])/g,"_$1").toLowerCase();return{...e,[i]:this.recursivelyChangeCamelCaseToSnakeCase(n)}},{}):e,this.deleteSecurityFormResponse=async(e,r,n)=>{let i="plugin"===r?`/api/plugins/${e}/plugin_security_form_response`:`/api/widgets/${e}/plugin_security_form_response`;await this.DeleteSecurityFormResponseValidator.validate(async({xr:e})=>await e.del(i,{version:n}))},this.approveReviewPluginSecurityForms=(0,l.nF)((e,r)=>{let{securityFormId:n,pluginId:i,formVersion:o,removeFromPendingForms:l}=r;a.Ay.put("/api/admin/plugin_security_form_response/status",{plugin_id:i,form_version:o,status:c.bQ.APPROVED}).then(()=>{l(n),e.dispatch(s.s.flash("Approved security form."))}).catch(r=>{e.dispatch(s.s.error("Unable to approve security form."))})}),this.rejectReviewPluginSecurityForms=(0,l.nF)((e,r)=>{let{securityFormId:n,pluginId:i,formVersion:o,removeFromPendingForms:l}=r;a.Ay.put("/api/admin/plugin_security_form_response/status",{plugin_id:i,form_version:o,status:c.bQ.REJECTED}).then(()=>{l(n),e.dispatch(s.s.flash("Rejected security form."))}).catch(r=>{e.dispatch(s.s.error("Unable to reject security form."))})})}}},403442:(e,r,n)=>{"use strict";n.d(r,{H:()=>s});var i=n(547807),a=n(36816),o=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(o||{});let s=new class{constructor(){this.UpdateTeamUsersSchemaValidator=(0,i.YV)("UpdateTeamUsersSchemaValidator",a.wF.array(),null),this.DevModeNudgesExpEntryValidator=(0,i.vh)()}updateTeamUsers(e){return this.UpdateTeamUsersSchemaValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/team_user_batch`,e))}declineDevModeSuggestedUpgrades(e){return i._5.validate(async({xr:r})=>await r.del(`/api/teams/${e.team_id}/team_users/dev_mode_suggested_upgrades`,e))}dismissDevModeSuggestedUpgrades(e){return i._5.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/dismiss_dev_mode_suggested_upgrades`))}logDevModeNudgesExperimentEntry(e){return this.DevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/log_dev_mode_nudges_exp_entry`,e))}fetchDevModeNudgesExperimentEntry(e){return this.DevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.get(`/api/teams/${e.teamId}/fetch_dev_mode_nudges_exp_entry`))}}},516056:(e,r,n)=>{"use strict";n.d(r,{k:()=>o});var i=n(547807),a=n(779977);let o=new class{constructor(){this.UnverifiedSchemaValidator=(0,i.vh)(),this.BackupCodesSchemaValidator=(0,i.vh)(),this.StateSchemaValidator=(0,i.vh)(),this.UserTeamsSchemaValidator=(0,i.vh)(),this.TeamsSchemaValidator=(0,i.vh)(),this.UserSchemaValidator=(0,i.vh)(),this.EmailFeaturesSchemaValidator=(0,i.vh)(),this.UserAuthedSchemaValidator=(0,i.vh)(),this.ScimProvisionedStatusSchemaValidator=(0,i.vh)(),this.DevTokenSchemaValidator=(0,i.vh)(),this.PlansSchemaValidator=(0,i.vh)(),this.PlansForAuthedUsersSchemaValidator=(0,i.vh)()}getUnverified(){return this.UnverifiedSchemaValidator.validate(async({xr:e})=>await e.get("/api/user/unverified"))}getBackupCodes(e){return this.BackupCodesSchemaValidator.validate(async({xr:r})=>await r.get("/api/user/backup_codes",{password_verify_token:e.passwordVerifyToken}))}getState(e,r){let n={};return r&&r>0&&(n={retryCount:r}),(0,a.r)(),this.StateSchemaValidator.validate(async({xr:r})=>await r.get("/api/user/state",i.td.toAPIParameters({redact:"org_billing_data",...e}),n))}getUserTeams(e){return this.UserTeamsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/user/${e.userId}/teams`))}getTeams(e){let{userId:r,...n}=e;return this.TeamsSchemaValidator.validate(async({xr:e})=>await e.get(`/api/user/${r}/teams`,i.td.toAPIParameters(n)))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/user/${e.userId}`))}putUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.put("/api/user",e.user))}setOnboardingSignal(e){return i._5.validate(async({xr:r})=>await r.put("/api/user",e))}getEmailFeatures(){return this.EmailFeaturesSchemaValidator.validate(async({xr:e})=>await e.get("/api/user/email_features"))}getAuthedUser(){return(0,a.r)(),this.UserAuthedSchemaValidator.validate(async({xr:e})=>await e.get("/api/user"))}getScimProvisionedStatus(e){return this.ScimProvisionedStatusSchemaValidator.validate(async({xr:r})=>await r.get(`/api/user/${e.userId}/scim_provisioned_status`))}createDevToken(e){return this.DevTokenSchemaValidator.validate(({xr:r})=>r.post("/api/user/dev_tokens",e))}getPlans(){return this.PlansSchemaValidator.validate(({xr:e})=>e.get("/api/user/plans"))}async getPlansForAuthedUsers(){try{let{data:{meta:{plans_by_user_id:e,orgs:r,teams:n}}}=await this.PlansForAuthedUsersSchemaValidator.validate(({xr:e})=>e.get("/api/authed_users/plans"));return{plansByUserId:e,teams:n,orgs:r}}catch(e){return Promise.reject(e)}}migrateAllPersonalDrafts(e){return i._5.validate(({xr:r})=>r.post(`/api/user/migrate_personal_drafts/${e}`))}deleteAllPersonalDrafts(){return i._5.validate(({xr:e})=>e.post("/api/user/delete_all_personal_drafts"))}}},369351:(e,r,n)=>{"use strict";n.d(r,{sr:()=>s});var i=n(517333),a=n(547807),o=n(27087);let s=new class{constructor(){this.CommunitySchemaValidator=(0,a.vh)(),this.UserNotificationsSchemaValidator=(0,a.vh)(),this.UpdatedNotificationSchemaValidator=(0,a.vh)(),this.CommunityServerDrivenSchemaValidator=(0,a.vh)(),this.ServerDrivenSchemaValidator=(0,a.vh)(),this.ServerDrivenPlanSchemaValidator=(0,a.vh)()}getCommunity(e){return this.CommunitySchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/community",{currentView:e?.currentView}))}getUserNotifications(e){return this.UserNotificationsSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications",a.td.toAPIParameters(e,["currentView"])))}updateNotification(e){return this.UpdatedNotificationSchemaValidator.validate(({xr:r})=>r.put("/api/user_notifications",a.td.toAPIParameters({id:e.notification_id,currentView:e.currentView,medium:i.S8?"desktop_bell":"web",appVersion:"1",clientType:"web",["resolve"===e.notification_action?"resolvedAt":"rejectedAt"]:"true"},["currentView"])))}getCommunityServerDriven(e){return this.CommunityServerDrivenSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/community/server_driven",a.td.toAPIParameters({currentView:e.currentView,clientType:"web",appVersion:"1"},["currentView"])))}getServerDriven(e){return this.ServerDrivenSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/server_driven",a.td.toAPIParameters(e,["currentView"])))}getServerDrivenPlan(e){return this.ServerDrivenPlanSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/server_driven/plan",a.td.toAPIParameters({...e,appVersion:"1",clientType:"web"},["currentView"])))}recordNotificationClicked(e){return o.Ay.post("/api/user_notification/clicked",{id:e.id,currentView:e.currentView,medium:e.medium})}enrollUserInStatusChange(e){return o.Ay.post(`/api/user_notifications/status_change_signup/${e.fileKey}`)}updateStatusChangePreferences(e){return o.Ay.post(`/api/user_notifications/status_change_optin/${e.fileKey}`,{opt_in:e.optIn})}}},726732:(e,r,n)=>{"use strict";n.d(r,{N:()=>l,Y:()=>c});var i=n(966712),a=n(374626),o=n(977230);let s="showFigmentDebugger";function l(e,r){try{if(!(0,i.kc)().internal_only_debug_tools||!(0,i.kc)().figment_debugger||null==e)return;a.zl.set(o.a4,{requestJsons:e,networkState:r})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function c(){var e;let r=function(){try{if(null==localStorage)return!1;let e=localStorage.getItem(s);return"true"===e}catch(e){return!1}}();e=!r,localStorage.setItem(s,e?"true":"false"),a.zl.set(o.eE,!r)}},819338:(e,r,n)=>{"use strict";var i=n(411855);n(358145),n(611978),i.createContext(null)},558867:(e,r,n)=>{"use strict";n.d(r,{az:()=>ey,pw:()=>X,Ro:()=>el,w7:()=>ed,CH:()=>eu,fZ:()=>Q,rE:()=>eb,z6:()=>ec,Sw:()=>K,Pq:()=>W});var i=n(411855),a=n(629019),o=n.n(a),s=n(864089),l=n(498480),c=n(574176),d=n(939863),u=n(809840),p=n(498606),m=n(80332);let h="avatar--avatar--fFibd",_="avatar--dim--UbqLc",g="avatar--avatarWithHandle--Z3934",f="avatar--avatarWithOutwardBorder--3JJ57",E="avatar--avatarWithInwardBorder--L469R",y="avatar--clickableAvatarWithHandle--d90vX";var b=n(161143),I=n(606692),T=n(103941),v=n(380410),S=n(774283),w=n(316216),A=n(241577),N=n(311790),C=n(426431),O=n(91025),L=n(855072),R=n(175827),P=n(670658),D=n(440877),k=n(241932),M=n(420959),F=n(592526),x=n(522313),U=n(562014),B=n(266042);let V=[b.A,I.A,T.A,v.A,S.A,w.A,A.A,N.A,C.A,O.A,L.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A],G=["avatar--workspaceAvatarBlue--XbbpI","avatar--workspaceAvatarPurple--FOGSP","avatar--workspaceAvatarGreen--PWm5o","avatar--workspaceAvatarTeal--4j3FH"],H=[];for(let e=0;e<V.length*G.length;e+=1){let r=e%V.length,n=V[r],i=(e+Math.floor(e/V.length))%G.length,a=G[i];H.push({svgSrc:n,className:a})}function W(e){return e.startsWith("https://www.gravatar.com/avatar/")}function K(e){return e&&!W(e)?e:void 0}let j={CIRCLE:`${h} avatar--circle--ag36Q`,SQUARE:`${h} avatar--square--p4eL1`,ROUNDED_SQUARE:`${h} avatar--roundedSquare--cq522`};function z(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class Y{constructor(e,r){this.lower=e,this.upper=r}contains(e){return e>=this.lower&&e<this.upper}}let $=new Y(65,91),q=new Y(97,123),Z=new Y(48,58);class X extends i.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,m.Xx)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},r=this.props.enabled||!0,{size:n,fontSize:a}=this.props;n&&(e.width=`${n}px`,e.height=`${n}px`,e.lineHeight=`${n}px`,e.fontSize=`${a??n/2}px`);let s=j[this.props.shape||"CIRCLE"];return i.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:o()(s,this.props.className||"",{[_]:!r,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),"aria-hidden":"true"},this.props.children)}}class J extends i.Component{render(){return i.createElement(X,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function Q(e){let r={};if(e.size&&e.svgSizeRatio){let n=e.size*e.svgSizeRatio;r.width=`${n}px`,r.height=`${n}px`}if(!e.removeCustomFill){let n=(0,m.Xx)(e.color);r.fill=n}return i.createElement(X,{...e},i.createElement("div",{style:r},i.createElement(c.B,{svg:e.svg,autosize:!0})))}class ee extends i.Component{render(){let{size:e}=this.props,r=e?`${e}px`:void 0,n=j[this.props.shape||"CIRCLE"];return i.createElement(c.B,{className:`${n} ${this.props.className||""} ${(this.props.enabled,"")}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:r,height:r,dataTestId:"svg-avatar"})}}class et extends i.Component{constructor(e){super(e),this.state={loadError:!1}}render(){let e={},r=this.props.style||{};if(this.props.size){let n=this.state.loadError?z(this.props.size)?.fallbackSize:z(this.props.size)?.imgSize,i=`${n}px`;e.width=i,e.height=i,r.width=i,r.height=i}let n=this.props.enabled||!0,a=j[this.props.shape||"CIRCLE"],l=this.state.loadError||!this.props.imgUrl?this.props.children:i.createElement(s.oW,{"data-testid":"image-avatar",className:`${n?"":_}`,style:e,src:this.props.imgUrl,onError:()=>this.setState({loadError:!0}),alt:""});return i.createElement("div",{className:o()(a,this.props.className,{[_]:!n,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),style:r},l)}}let er=[$,q,Z],en={colors:m.us,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:U.A},ei=["fallback_text","handle","name","email"],ea=(e,r=en)=>class extends i.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=em((this.props.initializableEntityProperties?this.props.initializableEntityProperties:ei).map(e=>this.props.entity[e]));return e&&"string"==typeof e?r.getInitial(e):null},this.computeFallbackColor=()=>(0,m.$L)(this.props.entity.id,r.colors)}render(){let n=this.props.fallbackInitial||this.computeFallbackInitial(),a=this.computeFallbackColor()||null,o=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return i.createElement(e,{imgUrl:o,fallbackInitial:n,fallbackColor:this.props.defaultFallbackAvatarSvg&&!n?null:a,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:r.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||r.defaultFallbackAvatarSvg})}};class eo extends i.Component{renderFallback(){let{size:e,fontSize:r,fallbackSvg:n,avatarSvg:a,svgSizeRatio:o}=this.props,s=z(e)?.fallbackSize;if(a)return i.createElement(Q,{size:s,fontSize:r,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,svg:a,svgSizeRatio:o,opacity:this.props.opacity});if(n)return i.createElement(ee,{size:z(e)?.fallbackSize,src:n,shape:this.props.shape});if(this.props.hideFallbackInitial)return i.createElement(X,{size:z(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let l=this.props.fallbackInitial;return l?i.createElement(J,{size:z(e)?.fallbackSize,fontSize:r,className:this.props.className,initial:l,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle}):this.props.defaultFallbackAvatarSvg?i.createElement(ee,{className:this.props.className,size:z(e)?.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape}):i.createElement(X,{size:z(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||W(this.props.imgUrl)?this.renderFallback():i.createElement(et,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle},this.renderFallback())}}eo.displayName="Avatar";let es=ea(eo,{...en,getInitial:e=>{let r=e.charCodeAt(0);return er.some(e=>e.contains(r))?e[0]:null}}),el=es;function ec({entity:e,size:r=40,shape:n="SQUARE"}){if(e.imgUrl)return i.createElement(es,{shape:n,entity:e,size:r});let a=(0,m.sC)(e?.id,H);return i.createElement(ee,{src:a.svgSrc,size:r,shape:n,className:a.className})}let ed=ea(eo,{...en,defaultFallbackAvatarSvg:B.A,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function eu(e){return i.createElement(ed,{shape:"SQUARE",...e})}class ep extends i.Component{render(){let e=this.props.size||0,r=Math.round(e/4)+1,n=Math.round(r/5);return i.createElement("span",{className:"avatar--avatarBellWrapper--sd6MY",style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&i.createElement("div",{className:"avatar--bell--Lk6s9",style:e?{width:`${r}px`,height:`${r}px`,top:`-${n}px`,right:`-${n}px`}:void 0}),this.props.children)}}ep.displayName="AvatarBellWrapper";let em=(e=[],r="?")=>e.find(e=>e)||r,eh=(e,r)=>class extends i.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let n=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`;return i.createElement("div",{className:`${g} ${this.props.onClick?y:""} ${this.props.enabled?"avatar--disabledDimAvatarWithHandle--5l6cM":""} ${this.props.className||""}`,onClick:this.props.onClick?this.onClick:void 0,"data-tooltip-proxy-element-id":n},i.createElement("div",{id:n,"data-tooltip-type":p.Ib.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&i.createElement(e,{...this.props,className:void 0})),i.createElement(r,{...this.props}),this.props.children)}};var e_=(e=>(e.DEFAULT="default",e.HEADING_MEDIUM="heading_medium",e))(e_||{});let eg={default:void 0,heading_medium:"avatar--labelHeadingMedium--IeX2-"};class ef extends i.Component{render(){let{labelSize:e="default"}=this.props,r=eg[e],n=this.props.showTruncatedTextTooltip?i.createElement(u.E,{truncate:!0},this.props.text):i.createElement("span",{className:"avatar--handle--wlTXK"},this.props.text),a=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return i.createElement("div",{className:o()("avatar--info--vDGTn",r),title:a},i.createElement("div",{className:o()("avatar--handleRow--0K2-H",g,r,{[y]:this.props.onLabelClick}),onClick:this.props.onLabelClick},this.props.text.length>0&&n,this.props.showIsMe&&i.createElement("span",{className:o()("avatar--isMe--LeNkH",r)},(0,d.tx)("avatar.tooltip.you")),this.props.badge&&i.createElement(l.Ex,{...this.props.badge}),this.props.isScimUser&&i.createElement(l.Ex,{color:l.zE.DEFAULT,text:(0,d.t)("members_table.org_user_name_cell.scim_badge")})),this.props.email&&i.createElement("div",{className:this.props.onEmailClick?"avatar--emailHover--ekuTn":"",onClick:this.props.onEmailClick},i.createElement("div",{className:"avatar--email--G3FcZ"},this.props.email)))}}let eE=e=>class extends i.Component{render(){let r=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&r.push(this.props.entity.email);let n=em(r,this.props.defaultText),a=`${n}${this.props.includeUserEmailAddress?`
${this.props.entity.email}`:""}`,{onEmailClick:o,onLabelClick:s,...l}=this.props;return i.createElement(e,{text:n,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?a:null,onEmailClick:o,onLabelClick:s,...l})}},ey=eh(es,eE(ef)),eb=eh(eu,eE(ef))},266431:(e,r,n)=>{"use strict";n.d(r,{Id:()=>h});var i=n(411855),a=n(135876),o=n(574176),s=n(939863),l=n(742809),c=n(731078),d=n(558867),u=n(814323),p=n(813620);let m=(e,r={})=>function(n){let d=null==n.size?120:n.size,m=()=>{n.dispatch((0,l.X)({entity:n.entity,entityType:n.entityType,shape:r.editorShape?r.editorShape:void 0}))},h={width:`${d}px`,minWidth:`${d}px`,height:`${d}px`,minHeight:`${d}px`},_=n.avatarEditorState&&n.avatarEditorState.status===c.hv.UPLOADING&&n.entity===n.avatarEditorState.entity,g=r.className?r.className:u.n1,f=i.createElement(a.x,{isLoading:_,className:`${u.Lq} ${g}`},()=>i.createElement(e,{size:d,...n})),E=i.createElement("div",{className:`${g} ${n.overlayClass||""}`},i.createElement(o.B,{className:`${u.Lw} ${u.Kk} ${g} ${n.overlayClass||""}`,svg:n.icon||p.A}));return r.withButton?i.createElement("div",{className:`${u.iE} ${u.n1}`,style:h},f,E,i.createElement("div",{className:u.hc,onClick:m},(0,s.tx)("avatar_editor.edit"))):i.createElement("div",{className:`${u.iQ} ${g}`,onClick:m,style:h},f,E)};m(d.Ro);let h=m(d.Ro,{withButton:!0});m(d.CH,{editorShape:"SQUARE",className:u.Ew}),m(d.z6,{editorShape:"SQUARE",className:u.Ew})},407844:(e,r,n)=>{"use strict";n.d(r,{_:()=>o}),n(411855),n(634832);var i=n(587670);n(629019),n(560945),n(179479),n(799569),n(946689),n(574176),n(939863);var a=n(100197);function o(){return(0,a.ut)(i.Ez5?.uiState().editorBannerHeight,0)}n(239671),n(164795),n(478398)},164795:(e,r,n)=>{"use strict";var i=(e=>(e[e.TestThemeBanner=0]="TestThemeBanner",e[e.TestWarningBanner=1]="TestWarningBanner",e[e.TestOOMBanner=2]="TestOOMBanner",e[e.TestInfoBanner=3]="TestInfoBanner",e[e.StarterTeamOverFreeLimitAndLocked=4]="StarterTeamOverFreeLimitAndLocked",e[e.EduGracePeriodAccessRestricted=5]="EduGracePeriodAccessRestricted",e[e.EduGracePeriodShowReminder=6]="EduGracePeriodShowReminder",e[e.OrphanedOrgDraftsFile=7]="OrphanedOrgDraftsFile",e[e.PersonalProjectDeprecatedFile=8]="PersonalProjectDeprecatedFile",e[e.ProTeamPastDue=9]="ProTeamPastDue",e[e.ProTeamChargeFailed=10]="ProTeamChargeFailed",e[e.ProTeamNoMonthlySubEditorCountExceeded=11]="ProTeamNoMonthlySubEditorCountExceeded",e[e.ProTrialsExpiryBanner=12]="ProTrialsExpiryBanner",e[e.MultiplayerSessionUpgrade=13]="MultiplayerSessionUpgrade",e[e.AdminI18nLocalWarnBanner=14]="AdminI18nLocalWarnBanner",e[e.FigJamTryDraftsBanner=15]="FigJamTryDraftsBanner",e[e.FigJamTryClaimBanner=16]="FigJamTryClaimBanner",e[e.CommunityResourceCTANuxBanner=17]="CommunityResourceCTANuxBanner",e[e.communityM10nApprovalBanner=18]="communityM10nApprovalBanner",e[e.communityM10nFinishSetupBanner=19]="communityM10nFinishSetupBanner",e[e.communityM10nAdtlInfoNeededBanner=20]="communityM10nAdtlInfoNeededBanner",e[e.communityResourceInReviewBanner=21]="communityResourceInReviewBanner",e[e.CommunityResourceCreatorBanner=22]="CommunityResourceCreatorBanner",e[e.ExternalContentControlBanner=23]="ExternalContentControlBanner",e[e.MemoryWarningBanner=24]="MemoryWarningBanner",e[e.MemoryErrorBanner=25]="MemoryErrorBanner",e[e.MemorySafeBanner=26]="MemorySafeBanner",e[e.AdminUserDisposableDomainWarningBanner=27]="AdminUserDisposableDomainWarningBanner",e[e.FileIsTeamTemplate=28]="FileIsTeamTemplate",e[e.FreemiumPreviewBanner=29]="FreemiumPreviewBanner",e[e.FileCreationFailureBanner=30]="FileCreationFailureBanner",e[e.DevModePaywallBanner=31]="DevModePaywallBanner",e[e.DevModeInTrialBanner=32]="DevModeInTrialBanner",e[e.devModeStarterTrialBanner=33]="devModeStarterTrialBanner",e[e.DesktopDownloadBanner=34]="DesktopDownloadBanner",e[e.BrowserDeprecationBanner=35]="BrowserDeprecationBanner",e[e.FragmentTextSearchQualityBanner=36]="FragmentTextSearchQualityBanner",e[e.Gen1DesignViewerBanner=37]="Gen1DesignViewerBanner",e[e.DesktopDeprecationBanner=38]="DesktopDeprecationBanner",e[e.UI3LoggedOutCta=39]="UI3LoggedOutCta",e))(i||{}),a=(e=>(e.INFO="info",e.WARN="warn",e.SUCCESS="success",e.ERROR="error",e.WARN_SOFT="warn_soft",e.CONFIDENTIALITY="confidentiality",e))(a||{}),o=(e=>(e.STRUCTURED="structured",e.CUSTOM="custom",e))(o||{})},877655:(e,r,n)=>{"use strict";n.d(r,{bX:()=>T});var i=n(411855),a=n(188507),o=n(776250),s=n(860601),l=n(27087),c=n(799569),d=n(946689),u=n(773058),p=n(762638),m=n(939863),h=n(466636),_=n(709595),g=n(662275),f=n(178787),E=n(237870),y=n(91271),b=n(488578),I=n(321112);let T=(0,E.Ju)(function(e){let{name:r,user:n,monetizedResource:s}=e,[c,d]=i.useState(!1),[_,E]=i.useState(null),[I,T]=i.useState(""),w=(0,a.wA)(),A=()=>{w((0,g.to)({type:v,data:{user:n}}))},N=()=>{w((0,g.to)({type:S,data:{user:n}}))};return i.createElement(b.Rw,{size:"small",content:i.createElement("div",{className:p.cx.flexColumn.colorText.$},(0,m.tx)("community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",{resourceName:i.createElement("span",{className:p.cx.fontBold.$},r)}),i.createElement("div",{className:p.cx.my16.$},i.createElement(u.z,{value:_,onChange:e=>{E(e)}},Object.values(f.bG).map(e=>i.createElement(u.Z,{className:p.cx.font11.selectNone.$,key:e,value:e},(0,h.vi)(e)))),_===f.bG.OTHER?i.createElement("div",{className:p.cx.mt8.$},i.createElement(y.v,{value:I,onChange:e=>T(e.target.value),placeholder:(0,m.t)("community.buyer.refund_reason.add_additional_details"),maxLength:f.JV})):null)),onConfirm:()=>{d(!0),(0,o.sx)("Request Refund Modal Confirm",{refundReason:_,refundOtherReasonText:I,monetizedResourceMetadataId:s.id}),l.Ay.post(`/api/community/buyer/${s.id}/refund`,{refund_reason:_,refund_other_reason_text:I}).then(()=>{d(!1),w(g.Ce()),A()}).catch(e=>{d(!1),w(g.Ce()),N()})},hideOnConfirm:!1,isLoading:c,confirmationTitle:(0,m.tx)("community.buyer.need_a_refund"),disableConfirm:!_,confirmText:(0,m.tx)("general.confirm"),cancelText:(0,m.tx)("general.close"),autoFocusCta:!1,popStack:!0})},"CommunityRequestRefundModal"),v=(0,E.Ju)(function(e){let{user:r}=e,n=(0,a.wA)();return i.createElement(b.Nb,{size:"small",hide:s.lQ,title:(0,m.t)("community.buyer.refund_requested")},i.createElement(c.s_,{dispatch:n}),(0,m.tx)("community.buyer.keep_an_eye_out",{here:i.createElement(d.CY,{onClick:()=>{(0,_.c9)(r),n(g.Ce())},trusted:!0},(0,m.tx)("community.buyer.here"))}),i.createElement("div",{className:I.v0},i.createElement(d.tM,{onClick:()=>n(g.Ce())},(0,m.tx)("general.close"))))},"CommunityRefundRequestedSuccessModal"),S=(0,E.Ju)(function(e){let{user:r}=e;return i.createElement(b.Rw,{size:"small",confirmationTitle:(0,m.tx)("community.buyer.unable_to_process_refund"),content:i.createElement("span",{className:p.cx.colorText.$},(0,m.tx)("community.buyer.error_requesting_refund_please_contact_support")),confirmText:(0,m.tx)("community.buyer.get_support"),onConfirm:()=>(0,_.oW)(r),cancelText:(0,m.tx)("general.close"),autoFocusCta:!1})},"CommunityErrorRequestingRefundModal")},814138:(e,r,n)=>{"use strict";n.d(r,{A:()=>W});var i=n(411855),a=n(188507),o=n(634832),s=n(730371),l=n(629019),c=n.n(l),d=n(776250),u=n(946689),p=n(449124),m=n(827586),h=n(762638),_=n(939863),g=n(175290),f=n(553015),E=n(809840),y=n(612776),b=n(662275),I=n(226055),T=n(99506),v=n(216158),S=n(450515),w=n(744410),A=n(34762),N=n(113094),C=n(721732),O=n(814367),L=n(539438),R=n(207776),P=n(132208);function D({text:e}){return i.createElement(E.E,{"data-testid":"extension-security-form-error",color:"danger"},e)}function k(e){let{canShowErrors:r}=(0,C.I)();return r&&(0,S.G6)(e)}function M(e){let{onChange:r,question:n}=e,{prompt:a,value:o,placeholder:s}=n,l=k(n);return i.createElement("div",{className:h.cx.flex.flexColumn.gap8.$},a&&i.createElement("div",null,function(e){let r=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!r||!r.index)return e;let[n,a,o]=r;return i.createElement("span",{"data-testid":"parsed-text-content"},e.slice(0,r.index),i.createElement("a",{href:o,target:"_blank",className:h.cx.colorTextBrand.cursorPointer.$},a),e.slice(r.index+n.length))}(a)),i.createElement(u.ks,{className:h.cx.wFull.$,value:o??"",onChange:r,placeholder:s}),l&&i.createElement(D,{text:(0,_.t)("community.publishing.data_security.incomplete_text")}))}function F(e){let{question:r,dispatch:n,path:a}=e,{prompt:o,options:s}=r,l=k(r);return i.createElement("div",{className:h.cx.flex.flexColumn.gap16.$},i.createElement(E.E,{fontWeight:"semi-bold"},o),i.createElement(i.Fragment,null,s.map((e,r)=>{let o=`path-${a.join("-")}-option-input-${r}`;return i.createElement("div",{className:h.cx.flex.flexColumn.$,key:`option-${r}`},i.createElement("div",{className:h.cx.flex.gap8.$},i.createElement("input",{type:"radio",id:o,checked:e.isSelected??!1,onChange:()=>{n({type:"UPDATE_SINGLE_SELECT_QUESTION",questionIndex:a[0],optionIndex:r})},className:h.cx.cursorPointer.$}),i.createElement("label",{htmlFor:o,className:h.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&i.createElement("div",{className:h.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>i.createElement(U,{key:`sub-question-${o}`,question:e,dispatch:n,path:a.concat(r,o)}))))})),l&&i.createElement(D,{text:(0,_.t)("community.publishing.data_security.incomplete_single_select")}))}function x(e){let{dispatch:r,path:n,question:a}=e,{prompt:o,options:s}=a,l=k(a);return i.createElement("div",{className:h.cx.flex.flexColumn.gap16.$},i.createElement(E.E,{fontWeight:"semi-bold"},o),i.createElement(i.Fragment,null,s.map((e,a)=>{let o=`path-${n.join("-")}-option-input-${a}`;return i.createElement("div",{className:h.cx.flex.flexColumn.$,key:`option-${a}`},i.createElement("div",{className:h.cx.flex.gap8.$},i.createElement("input",{type:"checkbox",checked:e.isSelected??!1,onChange:()=>{r({type:"UPDATE_MULTI_SELECT_QUESTION",questionIndex:n[0],optionIndex:a})},id:o,className:h.cx.cursorPointer.$}),i.createElement("label",{htmlFor:o,className:h.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&i.createElement("div",{className:h.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>i.createElement(U,{key:`sub-question-${o}`,question:e,dispatch:r,path:n.concat(a,o)}))))})),l&&i.createElement(D,{text:(0,_.t)("community.publishing.data_security.incomplete_multi_select")}))}function U(e){let{question:r,dispatch:n,path:a}=e;switch(r.inputType){case"single_select":return i.createElement(F,{question:r,dispatch:n,path:a});case"multi_select":return i.createElement(x,{question:r,dispatch:n,path:a});case"text":return i.createElement(M,{question:r,onChange:e=>{1===a.length?n({type:"UPDATE_TEXT_QUESTION",questionIndex:a[0],value:e.currentTarget.value}):3===a.length&&n({type:"UPDATE_TEXT_SUBQUESTION",path:[a[0],a[1],a[2]],value:e.currentTarget.value})},path:a});default:return null}}function B(e){let{extensionType:r,securityForm:n,dispatch:a}=e,o="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_description"):(0,_.tx)("community.publishing.security_form.widget_description"),s="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_sharing_description"):(0,_.tx)("community.publishing.security_form.widget_sharing_description");return i.createElement("div",{className:h.cx.p16.flex.flexColumn.$,"data-testid":"extension-security-form"},i.createElement("div",{className:h.cx.pb16.$},i.createElement(E.E,{fontSize:14,fontWeight:"medium"},(0,_.tx)("community.publishing.security_form.header"))),i.createElement("div",{className:h.cx.pb16.$},o),i.createElement("div",{className:h.cx.pb16.$},s,i.createElement("a",{href:"plugin"===r?"https://help.figma.com/hc/articles/360042293394":"https://help.figma.com/hc/articles/4410337103639",target:"_blank",className:h.cx.colorTextBrand.cursorPointer.$},(0,_.tx)("community.publishing.security_form.learn_more"))),i.createElement("div",{className:h.cx.flex.flexColumn.gap32.$},n.questions.map((e,r)=>i.createElement(U,{key:`question-${r}`,question:e,dispatch:a,path:[r]}))))}function V({onDiscard:e,onDone:r,securityFormFromDB:n,localSecurityFormResponse:o,onOptOut:l,currentFormStatus:u,extensionId:p}){let m=i.useMemo(()=>!(0,s.deepEquals)(o,n),[o,n]),{canShowErrors:E,numberOfErrors:T,optedOutOfSecurityForm:v,extensionType:w}=(0,C.I)(),A=(0,S.qu)(n),O=(0,a.wA)(),R=(0,I.GS)(),P=(0,y.zI)({isUI3:R});return i.createElement("div",{className:c()(h.cx.flex.gap8.p16.justifyBetween.alignCenter.absolute.bottom0.left0.right0.bSolid.bt1.colorBorder.colorBg.$,{[L._]:P})},!A&&i.createElement("button",{className:h.cx.bgTransparent.noWrap.if(v,h.cx.colorTextSecondary,h.cx.colorTextBrand.cursorPointer).$,onClick:()=>{O((0,b.to)({type:N.i,data:{onConfirm:l,status:u,extensionType:w},showModalsBeneath:!0})),(0,d.sx)("Data Security Plugin Form",{action:"Remove security details",extensionType:w,extensionId:p})},disabled:v},(0,_.tx)("community.publishing.security_form.opt_out_button")),i.createElement(g.Y,{width:"fill-parent",horizontalAlignItems:"end"},i.createElement(f.$,{variant:"secondary",onClick:()=>{e(),(0,d.sx)("Data Security Plugin Form",{action:"Discard changes",extensionType:w,extensionId:p})},disabled:!m},(0,_.tx)("community.publishing.security_form.discard_changes")),i.createElement(f.$,{variant:"primary",onClick:r,disabled:E&&T>0},(0,_.tx)("general.done"))))}function G({currentFormStatus:e}){let r,n,a;if(!e)return null;switch(e){case T.bQ.APPROVED:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.approved.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.approved.description")))),n=R.A,a="success";break;case T.bQ.PENDING:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.pending.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.pending.description")))),n=P.A,a="brand";break;case T.bQ.REJECTED:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.rejected.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description"))),i.createElement("div",null),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description.check_email")))),n=P.A,a="brand";break;default:(0,o.assertNever)(e)}return i.createElement(p.z,{iconSrc:n,variant:a,orientation:"vertical"},r)}function H({localSecurityFormResponse:e,securityFormFromDB:r,setSecurityFormResponse:n,extensionType:a,onDone:o,currentFormStatus:s,existingSecurityFormResponse:l,extensionId:c}){let d={questions:r.questions,version:r.version},[u,p]=(0,i.useReducer)(O.V,e??d),{setCanShowErrors:h,setOptedOutOfSecurityForm:_,optedOutOfSecurityForm:g}=(0,C.I)();return i.useEffect(()=>{n(u),(0,S.qu)(u)||_(!1)},[n,u,_]),i.createElement(i.Fragment,null,i.createElement(m.P,{className:L.j,maxHeight:800},i.createElement(G,{currentFormStatus:s}),i.createElement(B,{securityForm:u,dispatch:p,extensionType:a})),i.createElement(V,{onOptOut:()=>{p({type:"RESET_FORM"}),_(!0)},onDiscard:()=>{p({type:"DISCARD_CHANGES",originalState:d}),h(!1)},onDone:()=>{if((0,S.wT)(e,l)&&!g){h(!0);return}o()},securityFormFromDB:r,localSecurityFormResponse:e,currentFormStatus:s,extensionId:c}))}function W(e){let{version:r,setSecurityFormResponse:n,extensionType:a,localSecurityFormResponse:o,existingSecurityFormResponse:s,onDone:l,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionId:u}=e,[p]=(0,v.IT)(K(r),{enabled:!s}),m=(0,I.GS)(),_=(0,y.zI)({isUI3:m}),g=(s?{version:String(s.formVersion),questions:s.responses}:null)??("loaded"===p.status?p.data:null);return g?i.createElement(C.B,{localSecurityFormResponse:o,existingSecurityFormResponse:s,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionType:a},i.createElement(H,{localSecurityFormResponse:o,securityFormFromDB:g,setSecurityFormResponse:n,extensionType:a,onDone:l,currentFormStatus:s?.status??null,existingSecurityFormResponse:s,extensionId:u})):_?i.createElement("div",{className:h.cx.p8.$},i.createElement(A.R,null)):null}let K=v.M4.Query({fetch:async e=>await w.is.getBlankSecurityForm(e)})},761939:(e,r,n)=>{"use strict";n.d(r,{IW:()=>R,fV:()=>O,fp:()=>L});var i=n(411855),a=n(188507),o=n(540193),s=n(498750),l=n(915440),c=n(391388),d=n(659838),u=n(493323),p=n(32863),m=n(574176),h=n(939863),_=n(837324),g=n(445092),f=n(782501),E=n(477782),y=n(594901),b=n(279453),I=n(967409),T=n(508567),v=n(707612),S=n(227565),w=n(639685),A=n(630834),N=(e=>(e.FILES="FILES",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e))(N||{});function C(e){return i.createElement("div",{className:S.bx},i.createElement("div",{className:S.Uz},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_title")),i.createElement("div",{className:S.SL},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function O(e){var r,n,s,l;let d=(0,a.d4)(e=>e.currentUserOrgId),u=(n=(0,o.ql)(d||null),s=i.useMemo(()=>{let e=n.data||[];return c.Qw.loaded(e.filter(e=>e.parent_org_id===d))},[n,d]),l=e.editorTypes,r=i.useMemo(()=>{if(!l||0===l.length)return s;let e=s.data||[];return c.Qw.loaded(e.filter(e=>null!=e.editor_type&&l.includes(e.editor_type)))},[s,l]),i.useMemo(()=>"loaded"!==r.status?[]:r.data.map(e=>({type:E.nb.FILE,file:e})),[r]));return 0===u.length?i.createElement(C,{tab:"FILES"}):i.createElement("div",{className:S.Vg,onClick:e.deselectActiveFile,role:"presentation"},u.map(r=>{if(r.type!==E.nb.FILE)return null;let n=r.file;if(e.filterFn&&!e.filterFn(n))return null;let a=n.hub_file&&(0,_.r7)(n.hub_file);return i.createElement(P,{key:n.key,file:n,disabled:a,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function L({activeSearchQuery:e,activeFileKey:r,setActiveFile:n,deselectActiveFile:o,searchResults:s,editorTypes:c}){let d=(0,y.FC)(),p=(0,a.d4)(e=>e.authedProfilesById),m=(0,a.d4)(e=>e.figFileDuplicatedFromHubFile),g=i.useMemo(()=>(s||[]).map(({model:{key:e}})=>({key:e})),[s]),E=(0,l.p)(b.dDF,g),I=i.useMemo(()=>E.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[E]);if(!s)return i.createElement("div",{className:S.g4},i.createElement(u.kt,{size:"small"}));let T=s.filter((e,r)=>e.model.editor_type&&(void 0===c||c?.includes(e.model.editor_type))&&(0,f.n1)(e.model,I[r].unwrapOr(!1),{...d,authedProfilesById:p,figFileDuplicatedFromHubFile:m},null));return 0===T.length?i.createElement("div",{className:S.bx},i.createElement("div",{className:S.Uz},(0,h.tx)("community.universal_posting_modal.recent_editable_files_search.no_files_matching",{searchQuery:i.createElement("span",{className:S.ZF},e)}))):i.createElement("div",{className:S.Vg,onClick:o,role:"presentation"},T.map(e=>{let a=e.model,o=a.hub_file&&(0,_.r7)(a.hub_file);return i.createElement(P,{key:a.key,file:a,disabled:o,setActiveFile:n,activeFileKey:r})}))}function R(e){let{query:r,setQuery:n,setSearchResults:o,hasCloseButton:l=!0}=e,c=(0,a.wA)(),u=i.useCallback(()=>{r&&(c(g.Dy({entryPoint:"community:universal_posting"})),o(null),T.$W.getFigFiles({query:r,desc:!0,sort:I.Lk.RELEVANCY,orgId:void 0,isGlobal:!0}).then(({data:{meta:e}})=>{o(e.results)}))},[r,c,o]),_=i.useCallback(()=>{n("")},[n]),f=i.useCallback(e=>(e.keyCode===s.Uz.ENTER&&u(),!0),[u]),E=i.useCallback(e=>{n(e)},[n]);i.useEffect(()=>{let e=setTimeout(u,300);return()=>clearTimeout(e)},[r,u]);let y=i.useRef(null),{searchInputRef:b,onMouseDown:v,onMouseUp:N,onBlur:C,onClearSearchClick:O,onSearchKeyDown:L,onSearchChange:R}=(0,p.ne)({...e,focusOnMount:!1,clearSearch:_,onChange:E,onSubmit:u,isKeyDownHandled:f},y);return i.createElement("div",{className:S.Tm},i.createElement(m.B,{className:S.qc,svg:w.A}),i.createElement(d.L,{ref:b,placeholder:e.placeholderText??(0,h.t)("community.universal_posting_modal.search_bar.placeholder"),className:S.Rt,value:r,onMouseDown:v,onMouseUp:N,onBlur:C,onChange:R,onKeyDown:L,spellCheck:!1}),!!r&&l&&i.createElement(m.B,{className:S.i3,svg:A.default,onClick:O}))}function P(e){let{file:r,disabled:n,setActiveFile:a,activeFileKey:o}=e;return i.createElement(v.GQ,{onClick:e=>{e.stopPropagation(),n||a(r)},file:r,subtitle:i.createElement(v.lJ,{file:r}),activeFileUsers:[],currentUser:null,isSelected:!n&&o===r.key,disabled:n,tooltipText:n?(0,h.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},580999:(e,r,n)=>{"use strict";n.d(r,{Qi:()=>g,U6:()=>f});var i=n(411855),a=n(188507),o=n(737947),s=n(498750),l=n(417659),c=n(738269),d=n(707465),u=n(558867),p=n(481587);let m={underline:p.ah,noUnderline:p.HU};class h extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)||this.props.openInNewTab){o.Ay.redirect(this.props.hrefPath||"","_blank");return}let r=_(this.props);this.props.dispatch(c.$T(r))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},r=i.createElement(i.Fragment,null,this.props.showAvatar&&i.createElement("div",{className:this.props.avatarClassName||p.Du},i.createElement(u.Ro,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&i.createElement("span",{className:this.props.childrenClassName||p.fh},this.props.publisher.name));return i.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?i.createElement("span",{className:this.props.childrenClassName||p.oY},r):i.createElement("a",{href:new l.xn({profileHandle:this.props.publisher.profile_handle}).href,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},r))}}let _=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),g=(0,a.Ng)((e,r)=>{let n=_(r);return{hrefPath:(0,d.Np)(e,n),authorLinkStyle:"communityHub"===e.selectedView.view&&"landing"===e.selectedView.subView?m.noUnderline:m.underline}})(h);function f(e){let r=(0,a.wA)(),n={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},u=(0,a.d4)(e=>(0,d.Np)(e,n));return i.createElement("a",{href:new l.xn({profileHandle:e.profile.profile_handle}).href,className:p.M2,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)){o.Ay.redirect(u||"","_blank");return}r(c.$T(n))}},e.children)}(0,a.Ng)((e,r)=>({hrefView:_(r),hrefPath:(0,d.Np)(e,_(r)),authorLinkStyle:m.underline}))(h)},517127:(e,r,n)=>{"use strict";n.d(r,{T:()=>I});var i=n(411855),a=n(188507),o=n(776250),s=n(320063),l=n(966712),c=n(860601),d=n(799569),u=n(946689),p=n(939863),m=n(662275),h=n(931828),_=n(335682),g=n(860178),f=n(237870),E=n(488578),y=n(673051),b=n(379784);let I=(0,f.Ju)(function({onAgree:e}){let r=(0,a.wA)(),n=(0,g.iZ)(),f=(0,_.q5)();!function(){let e=(0,g.iZ)(),r=(0,_.q5)();(0,s.h)(()=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_displayed",{userId:e?.id??void 0,fileTeamId:r?.teamId??void 0,fileParentOrgId:r?.parentOrgId??void 0,fileKey:r?.key,asyncModal:!1})})}();let I=i.useCallback(e=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_clicked",{actionType:e,userId:n?.id??void 0,fileTeamId:f?.teamId??void 0,fileParentOrgId:f?.parentOrgId??void 0,fileKey:f?.key,asyncModal:!1})},[f,n]);return i.createElement(E.Nb,{hide:c.lQ,disableClickOutsideToHide:!0,className:b.kL},i.createElement("div",{className:b.wx},(0,l.kc)().dse_preset_libraries?(0,p.tx)("community.eula.license_agreement_v2"):(0,p.tx)("community.eula.license_agreement"),i.createElement(d.s_,{onClose:()=>I("x"),dispatch:r,customStyle:{right:"4px",top:"4px"}})),i.createElement("div",{className:b.IP},i.createElement("div",{className:b.rf},(0,l.kc)().dse_preset_libraries&&i.createElement("div",{className:b.r3},(0,p.tx)("community.eula.license_agreement_preamble")),i.createElement(y.N,null))),i.createElement("div",{className:b.qr},i.createElement(u.tM,{onClick:()=>{I("decline"),r(m.Lo())},className:b.lO},(0,p.tx)("community.eula.disagree")),i.createElement(u.vd,{onClick:()=>{e(),I("accept"),r(h.b({apple_eula_accepted:!0}))},className:b.lO},(0,p.tx)("community.eula.agree"))))},"APPLE_EULA_MODAL_TYPE",f.ZU.YES)},195907:(e,r,n)=>{"use strict";n.d(r,{Pn:()=>u});var i=n(411855),a=n(297666),o=n(428322),s=n(939863),l=n(63666),c=n(15839),d=n(972045);let u="seen_community_comments_compose";function p({dismissModal:e}){let r=i.useRef(null),n=i.useCallback((0,a.s)(()=>{r.current&&(r.current.style.opacity="0")},0,!0),[r]),c=i.useCallback((0,a.s)(()=>{r.current&&(r.current.style.opacity="1")},450),[r]);i.useEffect(()=>(window.addEventListener("scroll",n,!1),window.addEventListener("scroll",c,!1),()=>{window.removeEventListener("scroll",n,!1),window.removeEventListener("scroll",c,!1)}),[n,c]);let u=i.useCallback(e=>{let n=r.current;n&&(e.isIntersecting?n.style.visibility="visible":n.style.visibility="hidden")},[r]);return i.createElement(l.NJ,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:r,className:d.pO},i.createElement(o.a,{onIntersectionChange:u}),i.createElement("div",{className:d.Hj},(0,s.tx)("community.onboarding.see_more_of_what_you_love")),(0,s.tx)("community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"))}e=>i.createElement(p,{...e}),c.q3.SELF_CONTAINED},933464:(e,r,n)=>{"use strict";var i,a,o,s=n(411855),l=n(109388),c=n(188507),d=n(629019),u=n.n(d);n(776250);var p=n(563706),m=n(563042),h=n(799569),_=n(268537),g=n(946689),f=n(395771),E=n(574176),y=n(348425),b=n(505113),I=n(939863),T=n(251288),v=n(545941),S=n(71425),w=n(738269),A=n(662275);n(902139);var N=n(672517),C=n(756085),O=n(318812),L=n(4564),R=n(215822);n(555328);var P=n(498606),D=n(978527),k=n(720488),M=n(7959),F=n(33876),x=n(103567),U=n(632788),B=n(488578);n(647922);var V=n(350913),G=n(788541),H=n(17076),W=n(769533),K=n(362679),j=n(13556),z=n(665150),Y=n(961803),$=n(331536),q=n(12747),Z=n(237494),X=n(215877),J=n(551034),Q=n(132623),ee=n(247866),et=n(583288);let er=class e extends s.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,shouldShowErrorModal:!1},this.isWidget=!!this.props.plugin.manifest?.containsWidget,this.onPublish=()=>{this.props.onPublishClick&&this.props.onPublishClick(this.props.plugin.localFileId)},this.onDelete=()=>{this.props.dispatch(S.qR(this.props.plugin.localFileId))},this.onClick=()=>{this.props.onTileClick?this.props.onTileClick():this.onRevealLocally()},this.onRevealLocally=()=>{(0,L.M)().openExtensionDirectory(this.props.plugin.localFileId)},this.showError=()=>{this.setState({shouldShowErrorModal:!0})},this.hideError=()=>{this.setState({shouldShowErrorModal:!1})},this.tileDropdownType=this.isWidget?e.DEVELOPMENT_PLUGIN_DROPDOWN:e.DEVELOPMENT_WIDGET_DROPDOWN,this.onContextMenu=e=>{this.props.dispatch(w.j7({type:this.tileDropdownType,data:{type:"context",localFileId:this.props.plugin.localFileId,clientX:e.clientX,clientY:e.clientY}}))},this.shouldShowContextMenu=()=>this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"context"===this.props.dropdownShown.data.type,this.shouldShowPointingDropdown=()=>null!=this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"pointing"===this.props.dropdownShown.data.type,this.onDotsClick=()=>{this.props.dispatch(w.j7({type:this.tileDropdownType,data:{type:"pointing",localFileId:this.props.plugin.localFileId}}))},this.dotsIconRef=e=>{this.dotsIconEl=l.findDOMNode(e)},this.onMouseEnter=()=>{this.setState({isMouseOver:!0})},this.onMouseLeave=()=>{this.setState({isMouseOver:!1})}}render(){let e=s.createElement(s.Fragment,null,s.createElement(_.c$,{onClick:this.onPublish},(0,I.tx)("community.plugins.publish_new_version")),s.createElement(_.c$,{onClick:this.onRevealLocally},function(e){switch(e){case"plugins-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_plugin");case"widgets-menu-dev-create-new":return(0,I.t)("fullscreen.plugins_menu.new_widget");case"widgets-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_widget_from_manifest");case"plugins-menu-dev-import-from-manifest":return(0,I.t)("fullscreen.plugins_menu.import_plugin_from_manifest");case"plugins-menu-open-directory-mac":return(0,I.t)("fullscreen.plugins_menu.open_directory_mac");case"plugins-menu-open-directory-win":return(0,I.t)("fullscreen.plugins_menu.open_directory_win");case"plugins-menu-open-directory-vscode":return(0,I.t)("fullscreen.plugins_menu.open_directory_vscode");default:return""}}((0,R.YQ)())),s.createElement(_.wv,null),s.createElement(_.c$,{onClick:this.onDelete},(0,I.tx)("community.permissions_modal_publish_tab.footer.remove"))),{name:r,error:n}=this.props.plugin,i=this.isWidget?(0,I.t)("community.plugins.widget"):(0,I.t)("community.plugins.plugin");return s.createElement("div",{className:H.bp},s.createElement("div",{className:n?H.rS:H.el,onClick:n?this.showError:this.onClick,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n?s.createElement("div",{className:H.yd},s.createElement(y.t,{svg:ee.A})):this.isWidget?s.createElement("div",{className:H.im},this.props.isPublished?s.createElement("img",{className:H.K0,src:`/community/icon?resource_type=widget&resource_id=${this.props.plugin.plugin_id}`,alt:""}):s.createElement(y.t,{svg:Y.A})):s.createElement("div",{className:H.im},s.createElement(y.t,{svg:X.A,fallbackSvg:J.A})),s.createElement("div",{className:H.In},s.createElement("div",{className:n?H.iH:H.YG},r,this.props.isPublished?s.createElement(y.t,{svg:z.A}):null),n&&this.state.isMouseOver?s.createElement(b.o,{className:H.cV,text:"Error: "+n.text}):s.createElement(f.R,{className:H.cV,text:this.props.plugin.localFilePath.replace("/manifest.json","")})),n&&s.createElement(E.B,{className:H.rs,svg:p.Ay.mac?$.A:q.A})),s.createElement(M.YW,{svg:K.A,fallbackSvg:j.A,className:u()(H.q6,this.shouldShowPointingDropdown()?H.Yh:""),onClick:this.onDotsClick,ref:this.dotsIconRef,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options"),selected:this.shouldShowPointingDropdown()}),this.shouldShowContextMenu()&&s.createElement(_.ms,{className:H.Gm,style:{left:this.props.dropdownShown.data.clientX,top:this.props.dropdownShown.data.clientY}},e),this.shouldShowPointingDropdown()&&s.createElement(k.Cf,{className:H.Gm,minWidth:122,targetRect:this.dotsIconEl.getBoundingClientRect(),propagateCloseClick:!0},e),this.state.shouldShowErrorModal&&s.createElement(B.aF,{size:"small",title:(0,I.t)("community.plugins.plugin_or_widget_issue",{resourceType:i})},s.createElement(h.s_,{...this.props}),s.createElement("div",{className:H.hM},this.props.plugin.error?this.props.plugin.error.text:n?.text),s.createElement("div",{className:H.H1},s.createElement(g.$$,{onClick:this.hideError},(0,I.tx)("general.done")))))}};function en(e){return s.createElement("div",{className:e.containerClassName||H.x$,onContextMenu:e.onOptionsClick,onClick:e.onClick||(e=>e.preventDefault())},s.createElement(G.li.IconAndBadgeContainer,{className:H.yq},s.createElement("div",{className:H.zr},e.pluginIcon),e.showEditorTypeIcon&&s.createElement(G.li.BadgeContainer,null,s.createElement(G.dn,{editorType:e.editorType,is16x16:!0}))),s.createElement("div",{className:H.Kz},s.createElement("div",{className:H.P8},s.createElement("div",{className:H.iZ},e.title),e.titleSuffix),s.createElement("div",{className:p.rr?H.uN:H.UB},"string"==typeof e.subTitle?(0,m.$J)(e.subTitle):e.subTitle)),s.createElement("div",{className:H.Hq},s.createElement(M.YW,{ref:e.optionsIconRef,svg:K.A,fallbackSvg:j.A,className:H.UI,onClick:e.onOptionsClick,selected:e.isSelected,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.options"),disabled:e.disabled})))}er.DEVELOPMENT_PLUGIN_DROPDOWN="DEVELOPMENT_PLUGIN_DROPDOWN",er.DEVELOPMENT_WIDGET_DROPDOWN="DEVELOPMENT_WIDGET_DROPDOWN",(i||(i={})).Tile=function(e){let r=(0,O.Um)(),n=r?.type===U.lD&&r.data.localFileId===e.plugin.localFileId,i=(0,c.wA)(),a=s.useRef(null);return s.createElement(s.Fragment,null,s.createElement(en,{pluginIcon:s.createElement("div",{className:H.TM},e.plugin.error?s.createElement(E.B,{className:H.QW,svg:et.A}):s.createElement(y.t,{className:H.ft,svg:W.A})),editorType:e.plugin.manifest.editorType||[],showEditorTypeIcon:e.showEditorTypeIcon,onOptionsClick:r=>{if(r.stopPropagation(),n){i(w.oB());return}let o=a.current;i(w.j7({type:U.lD,data:{localFileId:e.plugin.localFileId,targetRect:o.getBoundingClientRect()}}))},optionsIconRef:a,isSelected:n,title:e.plugin.name,subTitle:s.createElement(F.A,{localResource:e.plugin,publishedResource:void 0}),disabled:!1,containerClassName:e.containerClassName,onClick:e.onClick}),n&&s.createElement(U.T9,{localResource:e.plugin}))},(e=>{function r(e){if((0,v.AC)(e))return s.createElement(T.L,{height:"16"});if((0,R.Rt)(e)){let r=e.roles.org?.name;return s.createElement(E.B,{svg:Z.A,className:H.kQ,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":r?(0,I.t)("community.plugins.private_for_plugin_org_name",{orgName:r}):(0,I.t)("community.plugins.private_for_plugin_org")})}if(e.roles.is_public)return s.createElement(E.B,{className:H.Ac,svg:Q.A,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,I.t)("community.plugins.published_to_community")})}e.Tile=function(e){let n=(0,O.Um)(),i=n?.type===U.lD&&n.data.pluginId===e.plugin.id&&n.data.targetRect,a=(0,c.wA)(),o=s.useRef(null),l=(0,R.uF)(e.plugin),d=(0,C.WK)(e.plugin.id),u=s.useCallback(()=>r(e.plugin),[e.plugin])();return s.createElement(s.Fragment,null,s.createElement(en,{containerClassName:e.containerClassName,onClick:e.onClick,pluginIcon:s.createElement(D.V,{plugin:l}),editorType:l.manifest.editorType||[],showEditorTypeIcon:!0,onOptionsClick:()=>{if(i){a(w.oB());return}let r=o.current;a(w.j7({type:U.lD,data:{pluginId:e.plugin.id,targetRect:r.getBoundingClientRect()}}))},optionsIconRef:o,disabled:!!e.plugin.unpublished_at,isSelected:i,title:l.name,titleSuffix:u,subTitle:s.createElement(F.A,{localResource:d,publishedResource:e.plugin})}),i&&s.createElement(U.T9,{publishedResource:e.plugin,viewResource:()=>{a(w.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.plugin.id})),a(A.Ce())}}))},e.PluginManagementTitleBadge=r})(a||(a={})),(o||(o={})).Tile=function(e){let r=(0,R.uF)(e.plugin);return s.createElement("div",{className:e.containerClassName??H.x$},s.createElement(G.li.IconAndBadgeContainer,{className:H.yq},s.createElement("div",{className:H.zr},s.createElement(D.V,{plugin:r})),s.createElement(G.li.BadgeContainer,null,s.createElement(G.dn,{editorType:r.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:H.Kz},s.createElement(x.PE,{resource:e.plugin})))},(0,N.tf)(function({plugin:e,className:r,onClick:n}){let i=(0,R.uF)(e),a=(0,c.wA)();return s.createElement("a",{className:r||H.m6,"data-plugin-id":e.id,key:e.id,onClick:r=>{r.metaKey||(r.preventDefault(),n?.(),a(w.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.id})))},href:(0,V.ho)(e.id)},s.createElement(G.li.IconAndBadgeContainer,{className:H.yk},s.createElement("div",{className:H.A9},s.createElement(D.V,{plugin:i})),s.createElement(G.li.BadgeContainer,null,s.createElement(G.dn,{editorType:i.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:H.XV},s.createElement("div",{className:H.vc},i.name),s.createElement("div",{className:H.ar},(0,v.G8)(i,m.$J))))})},884289:(e,r,n)=>{"use strict";n.d(r,{WW:()=>B});var i=n(411855),a=n(188507),o=n(776250),s=n(320063),l=n(860601),c=n(67833),d=n(574176),u=n(762638),p=n(939863),m=n(749949),h=n(837324),_=n(162895),g=n(738269),f=n(662275),E=n(318812),y=n(694687),b=n(193212),I=n(99506),T=n(215822),v=n(239671),S=n(376485),w=n(596578),A=n(206074),N=n(720488),C=n(928754),O=n(788541),L=n(44469),R=n(558011),P=n(501191);function D(e,r,n,i){(0,o.sx)("extension_opened_from_community",{extension_id:e,file_type:r,editor_type:n,searchSessionId:i})}function k(e){return e===v.nT.Whiteboard?c.y1.WHITEBOARD:c.y1.DESIGN}function M(e){return i.createElement("button",{type:"button",className:L.t,onClick:e.onClick,"data-testid":e.dataTestId},i.createElement("div",{className:L.Z3},i.createElement("div",{className:u.cx.w32.flex.justifyCenter.$},e.icon),i.createElement("div",{className:L.CA},e.text)),e.rightIcon)}function F(e){let r=e.fileName?e.fileName:e.playgroundFile?(0,p.t)("community.using.playground_file"):e.fileIconType===c.y1.WHITEBOARD?(0,p.t)("community.using.figjam_board"):(0,p.t)("community.using.figma_file");return i.createElement(M,{onClick:e.onClick,"data-testid":e.dataTestId,icon:i.createElement("div",{className:L.dD},i.createElement(O.Zt,{fileIconType:e.fileIconType})),text:r})}function x(e){let r=(0,a.wA)(),{files:n,resource:o,editorTypes:s}=e,l=(0,m.J)(),d=e=>{if(!e.org_id)return;let n=(0,h.qD)(o),i={extension:{pluginId:n.plugin_id,iconUrl:n.redirect_icon_url,name:n.name},isWidget:o.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};r((0,f.to)({type:C.S,data:i}))},u=e=>{D(o.id,"existing_file",(0,v.wN)(e.editor_type),l),r(_.aI({resource:o,fullscreenEditorType:e.editor_type===I._Y.DESIGN&&(0,T.Pe)(s)?v.nT.DevHandoff:(0,T.Tz)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return n?.length===0?null:i.createElement(i.Fragment,null,i.createElement("div",{className:L.Dh},(0,p.tx)("community.detail_view.recent_files")),i.createElement("div",{className:L.Dr},n?n.map(e=>i.createElement(F,{key:e.key,fileIconType:e.editor_type===I._Y.DESIGN&&e.last_published_at?c.y1.PUBLISHED:e.editor_type===I._Y.DESIGN?c.y1.DESIGN:c.y1.WHITEBOARD,fileName:e.name,onClick:()=>{r(g.oB()),e.can_run?u(e):e.requests_allowed&&d(e)}})):i.createElement("div",{className:L.d1},[...Array(6)].map((e,r)=>i.createElement("div",{key:r,className:L.iM})))))}function U({hasSecondaryDropdown:e,text:r,primaryFullscreenEditorType:n,resource:o}){let s=(0,a.wA)(),l=(0,T.uF)(o),c=(0,m.J)();return i.createElement(M,{onClick:()=>{if(!e){let e=!!(l.playground_fig_file||n===v.nT.DevHandoff);D(o.id,e?"playground":"new_file",n,c),s(g.oB()),s(_.aI({resource:o,fullscreenEditorType:n,isPlaygroundFile:e}))}},icon:i.createElement(d.B,{svg:P.A,className:L.K1}),text:r,rightIcon:e?i.createElement(d.B,{svg:R.A,className:L.Yr}):void 0})}function B(e,r,n){let c=(0,a.wA)(),d=(0,E.Um)(),u=d?.type===V&&d.data.resourceId===e.id&&d.data.viewContext===n,h=i.memo(function({primaryFullscreenEditorType:n}){let a;let h=(0,y.sZ)(),f=(0,m.J)(),[E,I]=i.useState();(0,s.h)(()=>{!async function(){let r=await w.C.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,o.sx)("recent_files_for_plugins_loaded",{response_count:r.data.meta.length,extension_id:e.id,searchSessionId:f}),I(r.data.meta.filter(e=>e.can_run||e.requests_allowed).slice(0,6))}()});let C=(0,T.uF)(e),O=C.manifest.editorType?.sort()??[],R=!!C.playground_fig_file||n===v.nT.DevHandoff,P=O.includes(S.FW.FIGMA)&&O.includes(S.FW.FIGJAM);P&&(n!==v.nT.Design&&n!==v.nT.DevHandoff||h?.figjam_disabled_at?n===v.nT.Whiteboard&&(a=v.nT.Design):a=v.nT.Whiteboard);let M=(()=>{let r=[{displayText:(0,p.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>i.createElement(F,{fileIconType:k(n),onClick:()=>{D(e.id,"new_file",n,f),c(g.oB()),c(_.aI({resource:e,fullscreenEditorType:n}))}})}];return P&&a&&r.push({displayText:(0,p.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>i.createElement(F,{fileIconType:k(a),onClick:()=>{D(e.id,"new_file",a,f),c(g.oB()),c(_.aI({resource:e,fullscreenEditorType:a}))}})}),r})(),B={displayText:(0,p.t)("community.using.new_file"),className:L.pz,preventDismissOnSelected:!0,render:()=>i.createElement(U,{hasSecondaryDropdown:M.length>1,text:(0,p.t)("community.using.new_file"),primaryFullscreenEditorType:n,resource:e}),children:M.length>1?M:void 0},V={displayText:(0,p.t)("community.using.playground_file"),className:L.pz,preventDismissOnSelected:!0,render:()=>i.createElement(U,{hasSecondaryDropdown:!1,text:(0,p.t)("community.using.playground_file"),primaryFullscreenEditorType:n,resource:e})};(0,b.U3)("resize",()=>{u&&c(g.oB())});let G=(()=>{let r=[];if(void 0===E||E.length>0)r.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>i.createElement(x,{files:E,resource:e,editorTypes:O})});else if(!R&&P)return M;return R?r.push(V):r.push(B),r})();return i.createElement(A.j,{showPoint:!1,lean:r,className:L.qN,subMenuClassName:L._3,type:N.it.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:280,minWidth:280,autoHeight:!0,onSelectItem:l.lQ,hidePointWhenContentOffScreen:!0,items:G,parentRect:d?.data.targetRect,dispatch:c})});return{dropdownIsShown:u,toggleSwitchEditorDropdown:(r,i)=>{let a=r.current?.getBoundingClientRect();a&&((void 0!==i?i:!u)?c(g.j7({type:V,data:{resourceId:e.id,viewContext:n,targetRect:a}})):c(g.oB()))},PluginTrySwitchEditorDropdown:h}}let V="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},749449:(e,r,n)=>{"use strict";n.d(r,{KM:()=>m,YJ:()=>f,fJ:()=>g,x5:()=>h});var i=n(411855),a=n(629019),o=n.n(a),s=n(762638),l=n(939863),c=n(612776),d=n(226055),u=n(78129),p=n(526069),m=(e=>(e.PUBLISH="publish",e.PERMISSIONS="permissions",e.DATA_SECURITY="data_security",e))(m||{});let h=["publish","data_security","permissions"],_=[{tab:h[0],title:()=>(0,l.t)("community.publishing.publish_tab"),isVisible:()=>!0},{tab:h[1],title:()=>(0,l.t)("community.publishing.data_security_tab"),isVisible:()=>!0},{tab:h[2],title:()=>(0,l.t)("community.publishing.permissions_tab"),dataOnboardingKey:u.k,isVisible:()=>!0}];function g(e){let r=(0,d.GS)(),n=(0,c.zI)({isUI3:r});return i.createElement("div",{className:e.tab===e.selectedTab?o()(p.xR,{[p.E3]:n}):o()(p.Mf,{[p.E3]:n}),key:e.tab,role:"tab",onClick:()=>e.onClick(e.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,"data-onboarding-key":e.dataOnboardingKey},e.title())}function f(e){return i.createElement("div",{className:s.cx.flex.itemsCenter.$,role:"tablist"},_.map(r=>e.allowedTabs.includes(r.tab)&&r.isVisible()?i.createElement(g,{key:r.tab,selectedTab:e.selectedTab,onClick:e.onClick,tab:r.tab,title:r.title,dataOnboardingKey:r.dataOnboardingKey}):null))}},350913:(e,r,n)=>{"use strict";n.d(r,{X$:()=>o,YW:()=>l,ab:()=>c,ho:()=>s,ox:()=>d});var i=n(837324),a=n(97128);function o(e,r){return(0,i.UI)({path:a.Uo.FILE,id:e,name:r})}function s(e,r){return(0,i.UI)({path:a.Uo.PLUGIN,id:e,name:r})}function l(e,r){return(0,i.UI)({path:a.Uo.WIDGET,id:e,name:r})}function c(e,r){return new URL(s(e,r),location.href).href}function d(e,r){return new URL(l(e,r),location.href).href}},180881:(e,r,n)=>{"use strict";n.d(r,{H:()=>p});var i=n(411855),a=n(188507),o=n(939863),s=n(545941),l=n(941381),c=n(555328),d=n(237870),u=n(488578);let p=(0,d.Ju)(function({plugin:e}){let r,n,d,p;let m=(0,a.wA)(),h=e.is_widget?(0,o.t)("community.plugins.widget"):(0,o.t)("community.plugins.plugin"),_=()=>{m(l.et({resource:e}))};return(0,s.AC)(e)?(n=(0,o.t)("community.plugins.withdraw_from_review"),r=e.roles.org?(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission_your_resource_type_will_still_be_available_to_members_of_org_name",{resourceType:h,orgName:e.roles.org.name}):(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission",{resourceType:h}),d=(0,o.t)("community.plugins.withdraw"),p=()=>{e.roles.org?m(l.zn({pluginId:e.id,role:e.roles})):_()}):((0,c.m3)(e)?(n=(0,o.t)("community.plugins.delist_your_resource_type",{resourceType:h}),r=(0,o.t)("community.resource.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"),d=(0,o.t)("community.resource.delist")):(n=(0,o.t)("community.plugins.unpublish_resource_type",{resourceType:h}),r=(0,o.t)("community.plugins.this_action_will_cause_your_resource_type_to_disappear_current_users_will_lose_access_to_your_resource_type_immediately_you_cannot_undo_this_action_however_if_you_publish_your_resource_type_again_later_it_will_keep_its_url",{resourceType:h}),d=(0,o.t)("community.resource.unpublish")),p=_),i.createElement(u.Rw,{confirmationTitle:n,content:r,onConfirm:p,confirmText:d,size:"small",destructive:!0,disableClickOutsideToHide:!0,popStack:!0})},"UnpublishPluginModal",d.ZU.YES)},273226:(e,r,n)=>{"use strict";n.d(r,{B_:()=>G,Fv:()=>Y,Pp:()=>F,Ql:()=>V,Rq:()=>ee,T1:()=>et,X9:()=>H,Yi:()=>q,ZH:()=>Z,_P:()=>z,aO:()=>J,dl:()=>U,eM:()=>B,f3:()=>X,fx:()=>en,k4:()=>$,lg:()=>er,qe:()=>P,ui:()=>j,wd:()=>K,wh:()=>O,xP:()=>W,xb:()=>x,zn:()=>M});var i=n(411855),a=n(527395),o=n(937456),s=n(710752),l=n(77437),c=n(31524),d=n(459593),u=n(439492),p=n(785273),m=n(313177),h=n(470230),_=n(460307),g=n(201706),f=n(587670),E=n(776250),y=n(966712),b=n(852438),I=n(939863),T=n(378905),v=n(848661),S=n(705129),w=n(968109),A=n(283293),N=n(144919),C=n(626241);let O=304;var L=(e=>(e[e.DEFINITION=0]="DEFINITION",e[e.ASSIGNMENT=1]="ASSIGNMENT",e))(L||{}),R=(e=>(e[e.REGULAR=0]="REGULAR",e[e.WIDE=1]="WIDE",e[e.UNBOUNDED=2]="UNBOUNDED",e[e.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",e))(R||{});function P(e){switch(e){case f.J0O.BOOL:return N.A;case f.J0O.NUMBER:return C.A;case f.J0O.TEXT:return A.A;case f.J0O.INSTANCE_SWAP:return w.A}}let D={[f.J0O.BOOL]:{SIZE_24_SMALL:a.$,SIZE_16:o.X},[f.J0O.TEXT]:{SIZE_24_SMALL:s.e,SIZE_16:l.I},[f.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:c.y,SIZE_16:d.m},[f.J0O.NUMBER]:{SIZE_24_SMALL:a.$,SIZE_16:o.X}},k={[f.J0O.BOOL]:{SIZE_24_SMALL:a.$,SIZE_16:o.X},[f.J0O.TEXT]:{SIZE_24_SMALL:u.p,SIZE_16:p.T},[f.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:m.V,SIZE_16:d.m},[f.J0O.NUMBER]:{SIZE_24_SMALL:h.O,SIZE_16:_.c}};function M(e,r=!1){let n=((0,y.kc)().ds_variable_props_unified_ui?k:D)[e][r?"SIZE_16":"SIZE_24_SMALL"];return i.createElement(n,null)}function F(e,r,n,i){e&&(0,E.sx)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:r,prop_type:f.J0O[n],source:i})}function x(e){switch(e){case f.J0O.BOOL:return(0,I.t)("design_systems.component_properties.boolean");case f.J0O.TEXT:return(0,I.t)("design_systems.component_properties.text");case f.J0O.INSTANCE_SWAP:return(0,I.t)("design_systems.component_properties.instance_swap");case f.J0O.VARIANT:return(0,I.t)("design_systems.component_properties.variant");case f.J0O.NUMBER:return(0,I.t)("design_systems.component_properties.number")}}function U(e,r){if((0,v.gl)(r))return v.oV;if((0,y.kc)().ds_variable_props_binding&&r&&"object"==typeof r&&"type"in r&&(r.type===f.Z_n.ALIAS||r.type===f.Z_n.NODE_FIELD_ALIAS))return r;switch(e){case f.J0O.BOOL:return"true"===r;case f.J0O.TEXT:case f.J0O.INSTANCE_SWAP:case f.J0O.NUMBER:return r;default:throw Error(`Unexpected component prop type: ${e}`)}}function B(e){switch(e){case g.R.VISIBLE:return{defaultType:f.J0O.BOOL,types:[f.J0O.BOOL]};case g.R.TEXT:return{defaultType:f.J0O.TEXT,types:[f.J0O.TEXT,f.J0O.NUMBER]};case g.R.OVERRIDDEN_SYMBOL_ID:return{defaultType:f.J0O.INSTANCE_SWAP,types:[f.J0O.INSTANCE_SWAP]}}}function V(e){switch(e){case f.J0O.BOOL:return!0;case f.J0O.TEXT:return"";case f.J0O.INSTANCE_SWAP:return null;case f.J0O.VARIANT:return(0,I.t)("design_systems.states_panel.default_property_value");case f.J0O.NUMBER:return"0"}}function G(e,r){switch(e){case f.J0O.INSTANCE_SWAP:return!!r;case f.J0O.TEXT||f.J0O.VARIANT:return!!r?.length;case f.J0O.NUMBER:return ee(r);default:return!0}}let H={format:e=>e?(0,I.t)("design_systems.component_properties.boolean_true"):(0,I.t)("design_systems.component_properties.boolean_false"),isEqual:(e,r)=>e===r};function W(e,r){if(!r.length)return null;let n=e(r[0]);return n&&r.every(r=>e(r)===n)?n:null}function K(e,r){if(!e.length)return null;let{backingSymbolGUID:n,backingStateGroupGUID:i}=(0,S.nD)(new Set(e),r);return i&&(0,v.hS)(i)?r.get(i):n&&(0,v.hS)(n)?r.get(n):v.oV}function j(e,r,n){return(0,T.TK)(e,n)?f.glU.getDefaultStateForLocalStateGroup(r):f.glU.getDefaultStateForSubscribedStateGroup(r,e.default_state_key)}function z(e){if(e)try{return new URL(e).hostname}catch(e){}}var Y=(e=>(e.PILL="pill",e.ICON="icon",e))(Y||{});function $(e,r){let n;if(e.length){for(let i of e){let e=r.get(i);if(!e||"INSTANCE"!==e.type)continue;let a=e.symbolId;if(a){if(void 0===n)n=a;else if(a!==n)return}}return n}}function q(e,r){let n;if(e.length){for(let i of e){let e=r.get(i);if(!e||"INSTANCE"!==e.type)continue;let a=e.symbolId;if(!a)continue;let o=r.get(a);if(!o)continue;if(o.isLooseComponent)return;let s=o.containingStateGroupId;if(s){if(void 0===n)n=s;else if(s!==n)return}}return n}}function Z(e,r){if(!e.length)return new Set;let n=new Set(r[e[0]]?.hiddenProps);return e.reduce((e,n)=>r[n]?.hiddenProps?(0,b.iR)(e,new Set(r[n].hiddenProps)):e,n)}function X(e,r){return e?r[e]?.componentPropDefError??f.uXg.NONE:f.uXg.NONE}function J(e,r){let n=r[e]?.defs;return n?Object.values(n).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}let Q=/^[+-]?(\d+(\.\d*)?|\.\d+)$/;function ee(e){if(!Q.test(e))return!1;let r=parseFloat(e);return!isNaN(r)&&isFinite(r)&&""!==e.trim()}function et(e){return ee(e)?Number(parseFloat(e).toFixed(2)):(console.warn("Failed converting string to float:",e),0)}function er(e){return isNaN(e)?(console.warn("Failed converting number to string:",e),"0"):e.toFixed(2).replace(/\.?0+$/,"")}function en(e){if(e?.length===1)switch(e[0]){case"TEXT_DATA":return g.R.TEXT;case"VISIBLE":return g.R.VISIBLE;default:return}}},510879:(e,r,n)=>{"use strict";n.d(r,{s:()=>a});var i=n(848661);function a(e,r,n){if(!e)return{};let a={};for(let o of r){let r=e[o]?.stateVariantProps?.propertyValues;if(r)for(let e of n)e in a&&a[e]!==r[e]?a[e]=a[e]&&r[e]?i.oV:"":a[e]=r[e]||""}return a}},386976:(e,r,n)=>{"use strict";n.d(r,{J0:()=>f,Kn:()=>v,_A:()=>I,bq:()=>w,dl:()=>A,fN:()=>g,i0:()=>S,wS:()=>C});var i=n(411855),a=n(188507);n(201706),n(587670);var o=n(44948),s=n(980820),l=n(632430),c=n(416095),d=n(284321);n(950919);var u=n(49116);n(173454);var p=n(498606),m=n(517418),h=n(479296),_=n(107244);let g=e=>["preferredValuesInstancePicker",...e],f=e=>({"data-tooltip-type":p.Ib.TEXT,"data-tooltip-show-left":!0,...(0,m.pf)(e)}),E=()=>{},y=new Promise(e=>{E=e});function b(){E(),y=new Promise(e=>{E=e})}let I=e=>`GET_MISSING_PREFERRED_PRODUCT_COMPONENTS_FOR_${e}`,T=(e,r)=>({callback:E,promise:y,resetPromise:b,loadingKey:I(e.getState().openFile?.key),callbackForComponent:r});(0,s.nF)((e,{stateGroupKeys:r,componentKeys:n,callback:i})=>{l.M8(n,r,e,T(e,i))});var v=(e=>(e.ADD="ADD",e.REMOVE="REMOVE",e))(v||{});function S(e,r){let n=(0,a.d4)(d.FZ),o=(0,a.d4)(u.c5),[s,l]=(0,i.useState)(()=>{let i=[];if("string"==typeof e){let a=(0,c.NY)(e,r,n,o);a&&i.push(a)}return i});return[s,l]}function w(e){return(0,i.useCallback)((r,n)=>{e(e=>{let i=[...e];return r.forEach(e=>{let r=(0,c.CG)(e),a=i.findIndex(e=>r===(0,c.CG)(e));a>-1&&"ADD"!==n?i.splice(a,1):-1===a&&"REMOVE"!==n&&i.push(e)}),i})},[e])}function A(e){return(0,i.useCallback)(r=>{e([...r])},[e])}let N=(0,h.n)(e=>(!!e.component_key||!!e.key)&&!e.unpublished_at);function C(e){let r=(0,a.d4)(_.Lg),n=(0,a.d4)(d.FZ),s=(0,i.useMemo)(()=>!!r&&N(n[r]??{}),[r,n]);return(0,o.k9)(()=>s?new Set(e.filter(e=>!N(e)).map(e=>e.node_id)):new Set,[s,e])}},567488:(e,r,n)=>{"use strict";n.d(r,{Yc:()=>S,yQ:()=>w});var i=n(411855),a=n(188507),o=n(313177),s=n(201706),l=n(794272),c=n(153234),d=n(46481),u=n(939863),p=n(738269),m=n(662275),h=n(318812),_=n(498606),g=n(227795),f=n(121003),E=n(273226),y=n(896632),b=n(107244),I=n(224690),T=n(646476);let v=e=>e.stopPropagation();function S(e,r){let n=i.useMemo(I.On,[]),a=i.useMemo(b.Ms,[]),{containingProductComponent:o,defReferencedBySelection:c,nodesHaveInstanceSublayer:d,selectionHasProductComponent:u}=(0,l.R)(i=>{let o=(0,b.Lg)(i),s=o?i.mirror.sceneGraph.get(o):null,l=a(i,r);return{containingProductComponent:s,defReferencedBySelection:n(i,e),nodesHaveInstanceSublayer:l,selectionHasProductComponent:(0,b.Ln)(i)}});return!i.useMemo(()=>!!o?.guid&&!d&&(!u||e!==s.R.VISIBLE),[o,d,u,e])||!!c}function w({nodeField:e,defaultValue:r,guids:n}){let s=i.useRef(null),w=S(e,n),A=function(e){let r=(0,l.R)(e=>e.modalShown),n=i.useMemo(()=>(0,E.eM)(e).defaultType,[e]),a=f.sD.concat("-",e),o=(0,h.Um)(),s=!!o&&o.type===a&&o.data.nodeField===e,c=!!r&&r.type===y.n.type&&r.data?.propType===n;return s||c}(e),N=function(e,r,n,o){let s=(0,a.wA)(),c=i.useMemo(()=>(0,E.eM)(e).defaultType,[e]),d=i.useMemo(I.p1,[]),{containingProductComponent:u,hasExistingDefs:h}=(0,l.R)(r=>{let n=(0,b.Lg)(r);return{containingProductComponent:n?r.mirror.sceneGraph.get(n):null,hasExistingDefs:!!d(r,n,e).length}});return i.useCallback(()=>{r.current&&(h?s(p.j7({type:f.sD.concat("-",e),data:{nodeField:e,targetRect:r.current.getBoundingClientRect()}})):((0,E.Pp)(u,!0,c,E.Fv.ICON),s(m.to({type:y.n,data:{prePopulatedDefaultValue:n,propType:c,refField:e}}))))},[r,h,void 0,s,e,u,c,n])}(e,s,r),C=function(e){let r=i.useMemo(I.p1,[]),{hasExistingDefs:n}=(0,l.R)(n=>{let i=(0,b.Lg)(n);return{hasExistingDefs:!!r(n,i,e).length}}),a=i.useMemo(()=>(0,E.eM)(e).defaultType,[e]);return n?(0,u.t)("design_systems.component_properties.apply_component_property",{propType:(0,E.xb)(a).toLocaleLowerCase()}):(0,u.t)("design_systems.component_properties.create_component_property_of_type",{propType:(0,E.xb)(a).toLocaleLowerCase()})}(e);return w?null:i.createElement(i.Fragment,null,i.createElement("div",{ref:s},i.createElement(g.YW,{recordingKey:c.Pt("applyPropRefButton",e),selected:A,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":C,onMouseDown:v,onClick:N},i.createElement(d.U,{svg:T.A},i.createElement(o.V,null)))),i.createElement(f.Xn,{source:E.Fv.ICON,nodeField:e,defaultValue:r}))}},215440:(e,r,n)=>{"use strict";n.d(r,{Ae:()=>p});var i=n(461816),a=n.n(i),o=n(302245),s=n(966712),l=n(97395),c=n(234945),d=n(107244);(0,l.P8)([d.C1,d.tO,d.S8,d.Rk,d.TJ],(e,r,n,i,a)=>a?void 0:e&&n&&e[n]?e[n].primaryInstances:(0,s.kc)().dse_editor_templates_v1&&r&&i&&r[i]?r[i].primaryInstances:void 0);let u=(0,l.P8)([c.dK,d.C1,d.tO,d.S8,d.Rk,d.TJ,d.QW],(e,r,n,i,o,l,c)=>{if(l)return;let d=[],u=new Set;if(r&&i&&r[i]){let n=e.get(i);if(!n)return;if(!n.isStateGroup||0===c.length)return a()(r[i].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of c)for(let n of r[e]?.primaryInstances?.filter(e=>e.isBubbled)||[]){if(n.connectedGUIDs&&!u.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)u.add(e);d.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!u.has(e.connectedGUIDs[0])){for(let r of e.connectedGUIDs)u.add(r);d.push(e.connectedGUIDs)}}return d}if((0,s.kc)().dse_editor_templates_v1&&n&&o&&n[o])return a()(n[o].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)])}),p=(0,l.P8)([d.C1,c.AF],(e,r)=>{if(!r||!r.isAlive()||"INSTANCE"!==r.type)return[];let n=r.guid;return e&&n&&e[n]?e[n].bubbledNestedInstanceGUIDs?.map(e=>[e])??[]:[]});(0,o.Mz)([u,p],(e,r)=>e||r||[])},25888:(e,r,n)=>{"use strict";n.d(r,{UT:()=>u,z4:()=>p});var i=n(302245),a=n(848661),o=n(234945),s=n(224690),l=n(958317);let c=(0,i.Mz)([s.W0],e=>e.length>0),d=(0,i.Mz)([l.x1],e=>e.length>0);(0,i.Mz)([c,d],(e,r)=>e||r);let u=(0,i.Mz)([o.F4],e=>{if(!e.length)return null;let r=new Set(e.map(e=>e.textContent)),[n]=r;return 1===r.size?n:a.oV});function p(){return(0,i.Mz)([(0,l.Cu)(),(0,s.Ee)()],(e,r)=>[...e,...r])}(0,i.Mz)([l.x1,s.W0],(e,r)=>[...e,...r])},107244:(e,r,n)=>{"use strict";n.d(r,{C1:()=>c,Lg:()=>g,Ln:()=>P,Ms:()=>L,PY:()=>R,QW:()=>h,Rk:()=>p,S8:()=>f,TJ:()=>O,UR:()=>S,VC:()=>_,d:()=>C,nM:()=>k,tK:()=>b,tO:()=>d,tc:()=>w,y7:()=>u});var i=n(302245);n(663668);var a=n(469297);n(848661);var o=n(416095),s=n(234945),l=n(273226);let c=e=>e.mirror.selectionProperties.componentProps,d=e=>e.mirror.selectionProperties.moduleProps,u=(0,i.Mz)([s.dK,s.qd],D),p=(0,i.Mz)([s.dK,s.qd],function(e,r){return(0,l.xP)(r=>e.get(r)?.containingModuleId,r)??void 0}),m=(0,i.Mz)([s.dK,s.qd],k),h=(0,i.Mz)([s.dK,s.qd],(e,r)=>{let n=new Set;for(let i of r){let r=e.get(i)?.containingSymbolId;r&&n.add(r)}return Array.from(n)}),_=()=>(0,i.Mz)([s.dK,(e,r)=>r],(e,r)=>k(e,r)??D(e,r)),g=(()=>{let e=_();return r=>e(r,(0,s.qd)(r))})(),f=(0,i.Mz)([u,m],(e,r)=>e??r),E=()=>(0,i.Mz)([(e,r)=>r,s.dK],(e,r)=>{let n=(0,a.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.LI)(n)});for(let i of e){let e=r.get(i),a=e?.containingStateGroupId??e?.containingSymbolId;if(a&&a!==n)return}return n??void 0}),y=()=>(0,i.Mz)([(e,r)=>r,s.dK],(e,r)=>(0,a.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.FS)(n)})??void 0);(()=>{let e=E();return r=>e(r,(0,s.qd)(r))})();let b=()=>(0,i.Mz)([_(),E()],(e,r)=>e??r),I=()=>(0,i.Mz)([y()],e=>e),T=(()=>{let e=b();return r=>e(r,(0,s.qd)(r))})();(0,i.Mz)([T,s.dK],(e,r)=>e?r.get(e):null);let v=(()=>{let e=I();return r=>e(r,(0,s.qd)(r))})();(0,i.Mz)([v,s.dK],(e,r)=>e?r.get(e):null);let S=(0,i.Mz)([c,s.qd],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstance,r)??void 0}),w=()=>(0,i.Mz)([c,(e,r)=>r],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstanceBackingSymbol,r)??void 0}),A=(0,i.Mz)([c,s.qd],(e,r)=>{if(e)return F(e,r)}),N=(0,i.Mz)([c,s.qd,s.dK],(e,r,n)=>{if(e)return M(e,r,n)}),C=()=>(0,i.Mz)([c,(e,r)=>r,s.dK],(e,r,n)=>{if(!e)return;let i=[];for(let e of r){let r=n.get(e);if(!r||r.isLooseComponent||r.isState||r.isStateGroup)return;r.symbolId&&i.push(e)}return M(e,i,n)??F(e,i)}),O=(0,i.Mz)([N,A],(e,r)=>r??e),L=()=>(0,i.Mz)([s.dK,(e,r)=>r],(e,r)=>r.some(r=>e.get(r)?.isInstanceSublayer??!1)),R=(()=>{let e=L();return r=>e(r,(0,s.qd)(r))})(),P=(0,i.Mz)([s.F4],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function D(e,r){return(0,l.xP)(r=>e.get(r)?.containingSymbolId,r)??void 0}function k(e,r){return(0,l.xP)(r=>e.get(r)?.containingStateGroupId,r)??void 0}function M(e,r,n){return(0,l.xP)(r=>{let i=e[r]?.backingSymbol;if(i)return n.get(i)?.containingStateGroupId},r)??void 0}function F(e,r){return(0,l.xP)(r=>e[r]?.backingSymbol??e[r]?.containingInstanceBackingSymbol,r)??void 0}},224690:(e,r,n)=>{"use strict";n.d(r,{Ee:()=>N,On:()=>v,Tn:()=>S,W0:()=>y,en:()=>T,p1:()=>I,pN:()=>b,vS:()=>A});var i=n(587670),a=n(302245),o=n(97395),s=n(96328),l=n(939863),c=n(848661),d=n(112162),u=n(234945),p=n(273226),m=n(731262),h=n(107244);let _=(0,o.P8)([h.C1,(e,r)=>r],(e,r)=>e&&r&&e[r]?.defs||{}),g=(0,o.P8)([h.C1,h.Lg],(e,r)=>e&&r?e[r]?.defs??{}:{}),f=(0,o.P8)([g],e=>Object.values(e).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1).map(e=>e.name)),E=()=>(0,o.P8)([h.C1,(0,h.tK)(),(0,h.d)()],(e,r,n)=>{let i=n??r;return e&&i?Object.values(e[i]?.defs||{}).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}),y=(()=>{let e=E();return r=>e(r,(0,u.qd)(r))})(),b=(0,a.Mz)([h.C1,u.qd,(e,r)=>r],(e,r,n)=>{if(e)return(0,p.xP)(r=>{let i=e[r]?.refs?.[n];if(i?.isLinked===!1)return i.fallbackName},r)??void 0});function I(){return(0,o.P8)([_,(e,r,n)=>n],(e,r)=>{let n=(0,p.eM)(r).types,i=Object.values(e).filter(({type:e})=>n.includes(e));return(0,s.DV)(i,e=>e.name.toLocaleLowerCase()),i})}let T=()=>(0,a.Mz)([h.C1,(0,h.VC)(),(0,h.tc)(),(e,r,n)=>r,(e,r,n)=>n],(e,r,n,i,a)=>{if(!e)return null;if(r){let n=(0,p.xP)(r=>{let n=e[r]?.refs?.[a];if(n?.isLinked)return n.explicitDefID},i);if(n)return e[r]?.defs?.[n]||null}if(n){let r=[];for(let n of i){let i=e[n]?.correspondingSymbolSublayer;if(!i)return null;r.push(i)}let o=(0,p.xP)(r=>{let n=e[r]?.refs?.[a];if(n?.isLinked)return n.explicitDefID},r);if(o)return e[n]?.defs?.[o]||null}return null});function v(){let e=T();return(r,n)=>e(r,(0,u.qd)(r),n)}let S=()=>(0,a.Mz)([h.C1,(e,r,n)=>r,(e,r,n)=>n],(e,r,n)=>{if(!e)return!1;let i=[];for(let n of r){i.push(n);let r=e[n]?.correspondingSymbolSublayer;r&&i.push(r)}return i.some(r=>e[r]?.refs?.[n]!==void 0)}),w=()=>(0,o.P8)([h.C1,u.dK,(e,r)=>r],(e,r,n)=>{if(!e||0===n.length)return{};let i=(0,p.k4)(n,r),a=(0,p.Yi)(n,r)??i;if(!a)return{};let o=Object.keys(e[a]?.defs??{});if(0===o.length)return{};let s={};for(let i of o){let a=null;for(let o of n){let n=r.get(o);if(n?.type!=="INSTANCE")continue;let s=e[n.guid]?.assignments;if(!s)continue;let l=s[i];if(null!=l){if(l.isMixed){a={isMixed:!0};break}if(null===a)a={isMixed:!1,value:l.value};else if(a.value!==l.value){a={isMixed:!0};break}}}a&&(s[i]=a)}return s}),A=(0,a.Mz)([(e,r)=>r,(e,r,n)=>n,f,u.AF],(e,r,n,a)=>{if(e===i.J0O.BOOL&&r){let e=a?.name?(0,l.t)("design_systems.component_properties.boolean_property_default_name",{selectedNodeName:a.name}):(0,l.t)("design_systems.component_properties.boolean_property_default_name_fallback",{numSelected:a?1:2});return(0,d.g)(e,n)}if(e===i.J0O.NUMBER&&r){let e=(0,l.t)("design_systems.component_properties.number_property_default_name");return(0,d.g)(e,n)}{let r=e===i.J0O.INSTANCE_SWAP?(0,l.t)("design_systems.component_properties.instance_swap_property_default_name"):(0,p.xb)(e);return(0,d.g)(r,n)}});function N(){return(0,o.P8)([u.dK,E(),w(),h.C1,(e,r)=>r],(e,r,n,a,o)=>{if(!a)return[];let s=(0,p.ZH)(o,a);return r.filter(e=>!s.has(e.explicitDefID)).map(r=>{let a=r.defaultValue;if(null!=n[r.explicitDefID]){let e=n[r.explicitDefID];a=e?e.isMixed?c.oV:null==e.value?m.xJ:e.value:m.xJ}if(r.type===i.J0O.INSTANCE_SWAP&&a!==m.xJ&&a!==c.oV){let r=(0,p.wd)([a],e);a=r&&(0,c.hS)(r)?r.name:m.xJ}return{name:r.name,value:a,type:r.type}})})}},958317:(e,r,n)=>{"use strict";n.d(r,{Cu:()=>g,YH:()=>y,x1:()=>E});var i=n(201706),a=n(587670),o=n(302245),s=n(97395),l=n(939863),c=n(848661),d=n(112162),u=n(234945),p=n(273226),m=n(510879),h=n(731262),_=n(107244);function g(){return(0,s.P8)([h.uL,_.C1,u.dK,(e,r)=>r],(e,r,n,i)=>{if(!r||0===i.length)return[];let o=(0,p.Yi)(i,n)??(0,_.nM)(n,i);if(!o||i.includes(o))return[];let s=r[o]?.stateGroupVariantProps;if(!s)return[];let d=(0,m.s)(r,i,s.propertySortOrder);return(s.propertySortOrder||[]).map(e=>{let r=!function(e){if(2===e.length){let r=e.map(e=>e.toLowerCase());for(let e of h.NE){let n=r.indexOf(e[0]),i=r.indexOf(e[1]);if(-1!==n&&-1!==i)return!0}}return!1}(s.propertyValues[e])?a.J0O.VARIANT:a.J0O.BOOL,n=d[e]||h.xJ;return(0,c.gl)(n)?{name:e,value:(0,l.t)("inspect_panel.property.mixed"),type:r}:{name:e,value:n,type:r}})})}let f=()=>(0,s.P8)([_.C1,(0,_.tK)(),(0,_.d)()],(e,r,n)=>{if(!e)return[];let o=n??r;return o?function(e,r){let n=r[e]?.stateGroupVariantProps;if(!n)return[];let o=(0,p.aO)(e,r),s=(0,p.f3)(e,r);return n.propertySortOrder.map(e=>{let r=s===a.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&o.some(r=>r.name===e),l=n.propertyValues[e];return{name:e,values:l,type:a.J0O.VARIANT,kind:i.u.VARIANT,error:r?a.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:a.uXg.NONE}})}(o,e):[]}),E=(()=>{let e=f();return r=>e(r,(0,u.qd)(r))})(),y=(0,o.Mz)([E],e=>{let r=e.map(e=>e.name),n=(0,l.t)("design_systems.component_properties.variant_property_default_name");return(0,d.g)(n,r)})},218973:(e,r,n)=>{"use strict";n.d(r,{$j:()=>A,Ht:()=>S,Jl:()=>k,M4:()=>D,Pd:()=>P,Se:()=>C,fl:()=>T,gq:()=>w,ig:()=>N,j5:()=>I,qd:()=>O,vD:()=>v,w2:()=>R});var i=n(411855),a=n(243742),o=n(629019),s=n.n(o),l=n(939863),c=n(287010),d=n(973149),u=n(798099),p=n(848661),m=n(279702),h=n(498606),_=n(952675),g=n(205135),f=n(216899),E=n(221034),y=n(381011);let b={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:c.bA,bigNudgeAmount:c._q};function I(e){let{onValueChange:r}=e,n=(0,i.useCallback)(e=>r?.(e,m.zk.YES),[r]),a=e.isTokenizable?f.$:g.p_;return i.createElement(E.b,{...b,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===p.oV&&!e.mixedMathHandler},e.childrenAtEnd?null:e.children,i.createElement(a,{onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,recordingKey:e.recordingKey,className:e.inputClassName,dataTestId:e.dataTestId,noLeftBorder:e.noLeftBorder,squareRightBorder:e.squareRightBorder,formatter:e.formatter,property:e.value??null,onMouseDown:u.dG,onChange:n,allowEmpty:e.allowEmpty,mixedMathHandler:e.mixedMathHandler,mixedMathCallback:e.mixedMathCallback,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClick,onMixedMathNudge:e.onMixedMathNudge,disabled:e.disabled??null===e.value,softDisabled:e.softDisabled,placeholder:e.placeholder,autoFocus:e.autoFocus,noBorderOnFocus:!0,forwardedRef:e.forwardedRef}),e.childrenAtEnd?e.children:null)}function T({onMouseEnter:e,onMouseLeave:r,onMouseEnterNonPropagating:n,...a}){let o={...b,...a,noBorderOnFocus:a.noBorderOnFocus||a.disableSelectFocus};return i.createElement("div",{className:a.className},i.createElement(_.a3,{id:a.id,inputClassName:a.inputClassName,dropdownClassName:a.dropdownClassName,dropdownWidth:a.dropdownWidth,willShowDropdown:a.willShowDropdown,formatter:a.formatter,property:a.value,onChange:(e,r=m.zk.YES)=>{a.onValueChange?.(e,r)},onKeyDown:a.onKeyDown,onKeyUp:a.onKeyUp,onInputFocus:a.onFocus,onInputBlur:a.onBlur,onMouseEnter:e,onMouseEnterNonPropagating:n,onMouseLeave:r,mixedMathHandler:a.mixedMathHandler,dispatch:a.dispatch,disabled:a.disabled,dropdownShown:a.dropdownShown,autoFocus:a.autoFocus,recordingKey:a.recordingKey,scrubbableControlProps:o,icon:a.icon,forwardedRef:a.forwardedRef,isTokenizable:a.isTokenizable,dataTestId:a.dataTestId,allowEmpty:a.allowEmpty,unNamespacedInputRecordingKey:a.unNamespacedInputRecordingKey,placeholder:a.placeholder,omitValueFromDropdown:a.omitValueFromDropdown,noPlaceholderLine:a.noPlaceholderLine,onboardingKey:a.onboardingKey,disableSelectFocus:a.disableSelectFocus,openBelowTarget:a.openBelowTarget,chevronClassName:a.chevronClassName,dropdownAlignment:a.dropdownAlignment,enablePreview:a.enablePreview,optionsWithDisabledPreviews:a.optionsWithDisabledPreviews},a.children))}function v(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,formatter:s}=e,l=(0,i.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}),[r,n,a,o]);return i.createElement(T,{...e,formatter:s??l})}function S(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}=e,s=(0,i.useMemo)(()=>new d.X9({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}),[r,n,a,o]);return i.createElement(I,{...e,formatter:s})}function w(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,onEvaluateExpressionError:s}=e,l=(0,i.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,onEvaluateExpressionError:s}),[r,n,a,o,s]);return i.createElement(I,{...e,formatter:l})}function A({min:e=0,max:r,floatingPointFormat:n,onEvaluateExpressionError:a,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,i.useMemo)(()=>new d.Lk({min:Math.max(e,0),max:r,smallNudgeAmount:s,bigNudgeAmount:l,floatingPointFormat:n,onEvaluateExpressionError:a}),[e,r,s,l,n,a]);return i.createElement(I,{...o,formatter:c})}function N({min:e=0,max:r,...n}){let{smallNudgeAmount:a,bigNudgeAmount:o}=n,s=(0,i.useRef)(!1),l=(0,i.useMemo)(()=>new d.NB({min:Math.max(e,0),max:r,smallNudgeAmount:a,bigNudgeAmount:o}),[e,r,a,o]),c=(0,p.gl)(n.value)&&n.mixedMathHandler,u=n.disabled||n.scrubbingDisabled||"number"!=typeof n.value&&!Array.isArray(n.value)&&!c,h=n.isTokenizable?f.$:g.p_;return i.createElement(E.b,{...b,...n,formatter:l,scrubbingDisabled:u,onScrubBegin:e=>{s.current=!0,n.onScrubBegin?.(e)},onScrubEnd:e=>{s.current=!1,n.onScrubEnd?.(e)},className:n.className},n.children,i.createElement(h,{forwardedRef:n.forwardedRef,disabled:n.disabled,className:n.inputClassName,formatter:l,property:n.value??null,source:s.current?"scrub":"document",onChange:e=>n.onValueChange(e,m.zk.YES),mixedMathHandler:n.mixedMathHandler,onMixedMathNudge:n.onMixedMathNudge,onBlur:n.onBlur,onFocus:n.onFocus,onNudge:n.onNudge,onKeyDown:n.onKeyDown,onClick:n.onClick,onPaste:n.onPaste,recordingKey:n.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:n.shouldClearOnFocus,placeholder:n.placeholder,dataTestId:n.dataTestId}))}function C({min:e,max:r,allowEmpty:n,...a}){let{smallNudgeAmount:o,bigNudgeAmount:s}=a,l=(0,i.useRef)(!1),c=(0,i.useMemo)(()=>new d.PZ({min:e,max:r,smallNudgeAmount:o,bigNudgeAmount:s,allowEmpty:n}),[e,r,o,s,n]),u=(0,p.gl)(a.value)&&a.mixedMathHandler,h=a.disabled||a.scrubbingDisabled||"number"!=typeof a.value&&!u,_=a.isTokenizable?f.$:g.p_;return i.createElement(E.b,{...b,...a,formatter:c,scrubbingDisabled:h,onScrubBegin:e=>{l.current=!0,a.onScrubBegin?.(e)},onScrubEnd:e=>{l.current=!1,a.onScrubEnd?.(e)},className:a.className},a.children,i.createElement(_,{forwardedRef:a.forwardedRef,disabled:a.disabled,className:a.inputClassName,formatter:c,property:a.value??null,source:l.current?"scrub":"document",allowEmpty:n,onChange:e=>a.onValueChange(e,m.zk.YES),mixedMathHandler:a.mixedMathHandler,onMixedMathNudge:a.onMixedMathNudge,onBlur:a.onBlur,onFocus:a.onFocus,onNudge:a.onNudge,onKeyDown:a.onKeyDown,onPaste:a.onPaste,recordingKey:a.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:a.shouldClearOnFocus,placeholder:a.placeholder,dataTestId:a.dataTestId}))}function O({max:e=3600,displayFractions:r=!1,...n}){let a=(0,i.useMemo)(()=>new d.f0(e,r),[e,r]);return i.createElement(I,{...n,formatter:a})}let L={...b,scrubMultiplier:4,wheelMultiplier:2};function R({min:e=0,max:r=1,decimals:n,hidePercentSign:a,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,i.useMemo)(()=>new d.LN({min:e,max:r,smallNudgeAmount:s,bigNudgeAmount:l,decimals:n,hidePercentSign:a}),[e,r,s,l,n,a]);return i.createElement(I,{...L,...o,formatter:c,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function P(e){let r="ui3"===(0,a.DP)().version,{inputClassName:n,...o}=e,c=e.ui3RightJustifyPercentSign??!0;return r?i.createElement(R,{...o,inputClassName:s()(n,{[y.Ww]:c}),"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,l.t)("fullscreen.scrubbable.opacity"),hidePercentSign:c,childrenAtEnd:c},c?i.createElement("span",{className:y.QK},(0,l.tx)("fullscreen.scrubbable.percent")):e.children):i.createElement(R,{...e,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,l.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function D(e){let r=(0,i.useMemo)(()=>new d.cu({min:7.16,max:180}),[]);return i.createElement(I,{...e,formatter:r,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function k(e){let{min:r,smallNudgeAmount:n=c.bA,bigNudgeAmount:a=c._q,formatter:o}=e,s=(0,i.useRef)(!1),l=(0,i.useMemo)(()=>o??new d.h7({min:r,smallPixelNudgeAmount:n,bigPixelNudgeAmount:a}),[r,n,a,o]),u=e.isTokenizable?f.$:g.p_;return i.createElement(E.b,{...b,"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,className:e.className,value:e.value,onValueChange:e.onValueChange,smallNudgeAmount:n,bigNudgeAmount:a,scrubMultiplier:e.scrubMultiplier,disabled:e.disabled,scrubbingDisabled:e.disabled,dispatch:e.dispatch,formatter:l,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1},noBorderOnHover:e.noBorderOnHover},e.children,i.createElement(u,{disabled:e.disabled,className:e.inputClassName,formatter:l,property:e.value,source:s.current?"scrub":"document",onChange:r=>e.onValueChange(r,m.zk.YES),recordingKey:e.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:e.shouldClearOnFocus,placeholder:e.placeholder}))}},760066:(e,r,n)=>{"use strict";n.d(r,{sA:()=>w,sJ:()=>S});var i=n(411855),a=n(464137),o=n(629019),s=n.n(o),l=n(255942),c=n(153234),d=n(522739),u=n(574176),p=n(939863),m=n(13379),h=n(869156),_=n(318812),g=n(498606),f=n(893606),E=n(282263),y=n(683859),b=n(550624),I=n(461313),T=n(5068);let v=i.forwardRef(function({children:e,disabled:r,icon:n,inputClassName:a,isActive:o,nonTextChild:l,noBorder:u,onMouseDownCapture:p,onContextMenuCapture:m,onFocus:h,onBlur:_,recordingKey:g},f){return i.createElement(d.D8,{forwardedRef:f,recordingKey:c.Pt(g,"comboInputControl","container"),className:s()(a,{[I.mc]:!0,[I.vu]:o,[I.KH]:!u,[I.r9]:r,[I.fE]:l}),onMouseDownCapture:p,onContextMenuCapture:m,onFocus:h,onBlur:_},i.createElement("div",{className:I.I6},e),!r&&n)}),S=i.forwardRef(function({inputClassName:e,inputRef:r,currentFieldValue:n,recordingKey:o,disabled:d,children:m,hideIcon:h=!1,nonTextChild:E,isActive:S,onPickerOpen:w,disableEntryPoint:A=!1,noBorder:N,hasBindingContextMenu:C,onClickDetachButton:O,onFocus:L,onBlur:R},P){let D=i.useId(),k=(0,i.useContext)(y.p),M=k?.boundVariableId,F=(0,i.useRef)(null),x=(0,f.R)(),{showing:U,show:B,data:V,hide:G}=(0,_.BK)(b.v+D),H=i.useCallback(()=>{w?w():k?.showBindingUI(F.current,{currentFieldValue:n}),G()},[n,G,w,k]),W=i.useCallback(()=>{k?.onVariableSelected?.(void 0),G(),O?.()},[G,k,O]),K=c.rf(c.Pt(o,"detachIcon"),"click",W),j=c.rf(o,"mousedown",e=>{if(e&&!A&&e.shiftKey){H(),e.preventDefault(),e.stopPropagation();return}}),z=c.rf(o,"contextmenu",e=>{e&&!A&&C&&r?.current&&(B({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())});return i.createElement(i.Fragment,null,i.createElement(v,{recordingKey:o,inputClassName:e,disabled:d,isActive:null!=S?S:!!k?.isShowingBindingUI,ref:(0,l.A)(P,F),onMouseDownCapture:j,onContextMenuCapture:z,nonTextChild:E,noBorder:N,icon:h||A?null:M?i.createElement("div",{className:I.AM,role:"button",tabIndex:0,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,p.t)("variables.binding_ui.detach_variable_tooltip"),"aria-label":(0,p.t)("variables.binding_ui.detach_variable_tooltip"),onClick:K},i.createElement(a.o,{className:I.HQ})):i.createElement(u.B,{recordingKey:c.Pt(o,"comboBoxButton"),className:s()(I.Kk),role:"button",ariaLabel:(0,p.t)("fullscreen.properties_panel.apply_variable"),"data-tooltip-type":x?g.Ib.TEXT:void 0,"data-tooltip":x?(0,p.t)("fullscreen.properties_panel.apply_variable"):void 0,svg:T.default,onClick:H,dataTestId:c.Pt("variable-control-icon",o??""),tabIndex:-1}),onFocus:L,onBlur:R},m),C&&r&&U&&"number"==typeof V?.position?.top&&"number"==typeof V?.position?.left&&i.createElement(b.G,{inputRef:r,isBound:!!k?.boundVariableId,left:V.position.left,onClose:G,onOpenVariablePicker:H,onUnbindVariable:K,recordingKey:c.Pt(o,"contextMenu"),top:V.position.top}))});function w({fields:e,currentFieldValue:r,resolvedType:n,editingStyleGuid:a,inputClassName:o,inputRef:s,disabled:l,recordingKey:c,disableEntryPoint:d,hideIcon:u,noBorder:p,children:m,hasBindingContextMenu:_,onClickDetachButton:g,onBlur:f,onFocus:y}){let b=(0,h.SG)(e).data??[];return i.createElement(E._X,{fields:e,resolvedType:n,editingStyleGuid:a},i.createElement(S,{recordingKey:c,inputClassName:o,inputRef:s,disabled:l,currentFieldValue:r,disableEntryPoint:!!d||0===b.length,hideIcon:u,noBorder:p,hasBindingContextMenu:_,onClickDetachButton:g,onBlur:f,onFocus:y},m))}i.forwardRef(function({currentFieldValue:e,disabled:r,isActive:n,recordingKey:a,children:o,onPickerOpen:d,dataTestId:u,openOnRightClick:p,inputClassName:h},_){let g=(0,i.useContext)(y.p),f=(0,i.useRef)(null),E=i.useCallback(()=>{d?d():g?.showBindingUI(f.current,{currentFieldValue:e})},[e,d,g]),b=c.rf(a,"mousedown",e=>{if(e&&!r){if(p){if((0,m.i)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){E(),e.preventDefault(),e.stopPropagation();return}}else if(1&e.buttons){E(),e.preventDefault(),e.stopPropagation();return}}}),T=c.rf(a,"contextmenu",e=>{e&&!r&&(E(),e.preventDefault(),e.stopPropagation())});return i.createElement("div",{ref:(0,l.A)(_,f),className:s()(h,{[I.jX]:!0,[I.NH]:n&&!h}),onMouseDownCapture:b,onContextMenu:T,"data-testid":u},o)})},433546:(e,r,n)=>{"use strict";n.d(r,{wH:()=>l}),n(411855),n(188507);var i=n(517333),a=n(931828);function o(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function s(e,r){return e.getState().userFlags[r]}function l(e){if(!i.eD)return;let r=i.eD?.getLegacyColorSpacePreference();!function(e,r,n){let{isDefault:i,isManaged:s,isSrgb:l,isUnmanaged:c}=r,d={};i&&"default"!==n&&(d.color_management_desktop_app_setting_default=!1),c&&"unmanaged"!==n&&(d.color_management_desktop_app_setting_unmanaged=!1),s&&"managed"!==n&&(d.color_management_desktop_app_setting_managed=!1),l&&"srgb"!==n&&(d.color_management_desktop_app_setting_srgb=!1);let u=i&&"default"===n||c&&"unmanaged"===n||s&&"managed"===n||l&&"srgb"===n;void 0===n||u||(d[o(n)]=!0),Object.keys(d).length>0&&e(a.b(d))}(e.dispatch,{isDefault:!!s(e,o("default")),isUnmanaged:!!s(e,o("unmanaged")),isManaged:!!s(e,o("managed")),isSrgb:!!s(e,o("srgb"))},r)}n(309798)},91564:(e,r,n)=>{"use strict";n.d(r,{$z:()=>h,IX:()=>m});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o);n(946689);var l=n(207306);n(762638),n(939863);var c=n(67294),d=n(27703),u=n(694687),p=n(463480),m=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(m||{});function h({size:e=1,useCurrentFileAsThumbnail:r=!1}){let n=(0,u.sZ)(),o=(0,a.d4)(e=>e.user),m=(0,a.d4)(e=>e.openFile),h=m?.key,_=(0,d.ud)(),g={modalGraphic:p.Xs,orgAvatar:p.DH,userAvatar:p._5,exampleFileThumbnail:p.eO,thumbnailContainer:p.jI,avatar:p.hq,thumbnailInnerContainer:p.ac},f={modalGraphic:p.tb,orgAvatar:p.NQ,userAvatar:p.cY,exampleFileThumbnail:p.Id,thumbnailContainer:p.pR,avatar:p.F0,thumbnailInnerContainer:p.rr},E={2:{modalGraphic:p.oK,orgAvatar:p.wz,userAvatar:p.D0,exampleFileThumbnail:p.xe,thumbnailContainer:p.Yc,avatar:p.KM,thumbnailInnerContainer:p.rr},1:f,0:g}[e],y=i.createElement("img",{src:"https://static.figma.com/uploads/b13789723ab5e9138ab263193f7d82aff4c47674",alt:"",className:p.fP});if(void 0!==h&&r){let e=_[h]?.thumbnail_url;e&&(y=i.createElement("img",{src:e,alt:"",className:p.fP}))}return i.createElement("div",{className:E.modalGraphic},i.createElement("img",{src:"https://static.figma.com/uploads/f290b00b2b225be3eb5056cb4473d87953764837",alt:"",className:E.exampleFileThumbnail}),o&&i.createElement(l.n,{className:s()(E.avatar,E.orgAvatar),userId:o.id,orgId:n?.id,size:2===e?16:1===e?24:32}),o&&i.createElement("div",{className:s()(E.avatar,E.userAvatar)},i.createElement(c.H8,{user:o,size:2===e?c.Pf.SMALL16:1===e?c.Pf.MEDIUM:c.Pf.LARGE})),i.createElement("div",{className:E.thumbnailContainer},i.createElement("div",{className:E.thumbnailInnerContainer},y)))}},161074:(e,r,n)=>{"use strict";n(587670)},776008:(e,r,n)=>{"use strict";n.d(r,{E:()=>a});var i=n(314866);function a(e,r=[]){return null==e.data||r.includes(e.data)||!i.s_.includes(e.data)?"other":e.data}},844647:(e,r,n)=>{"use strict";n(411855),n(188507),n(320063);var i=n(38580);n(931828),n(456104),n(594524),n(502665),n(683694),n(723239);var a=n(582947);n(205548),n(875847),n(335682),n(99506),n(833629),n(397065),n(143678),n(916108),n(218997),n(660280),n(15839),n(463546),(0,i.eU)(!1),(0,a.r1)("dismissed_move_drafts_nudge")},288527:(e,r,n)=>{"use strict";n.d(r,{s:()=>i}),n(411855),n(188507),n(931828),n(251960),n(456104),n(683694),n(723239),n(582947),n(205548),n(875847),n(335682),n(99506),n(279453),n(833629),n(397065),n(143678),n(218997),n(844647),n(660280),n(15839),n(463546);let i="Node Count Reached for Draft"},888699:(e,r,n)=>{"use strict";n.d(r,{l5:()=>s});var i=n(38580),a=n(794321),o=(e=>(e.NOT_STARTED="NOT_STARTED",e.MODAL_SHOWING="MODAL_SHOWING",e.USE_CASE_STEPS="USE_CASE_STEPS",e.COMPLETED="COMPLETED",e))(o||{});(0,i.eU)("NOT_STARTED");let s=(0,i.eU)(a.fD.NONE);(0,i.eU)(!1)},992303:(e,r,n)=>{"use strict";n.d(r,{zM:()=>a}),n(411855),n(188507);var i=n(939863);n(278733),n(809840),n(332034),n(693897),n(809831),n(226055),n(251960),n(456104),n(335682),n(239671),n(397065),n(340514),n(384775),n(157147),n(746806),n(601538),n(463546),n(178911);let a="open-playground-file-onboarding-event";(0,i.tx)("rcs.playground_file.switch_devmode_to_design_title")},384303:(e,r,n)=>{"use strict";n.d(r,{oE:()=>o,zK:()=>a}),n(411855),n(939863),n(251960),n(456104);var i=n(582947);n(397065),n(218997),n(15839),n(463546);let a="plugin-publish-invite-publishers-onboarding-event",o="plugin-publish-invite-publishers-click-event";(0,i.r1)("seen_plugin_publish_invite_publishers_onboarding")},799943:(e,r,n)=>{"use strict";n(411855),n(320063),n(939863),n(226055),n(456104),n(696673),n(335682),n(309798),n(833629),n(397065),n(402609),n(340514),n(756159),n(746806),n(463546),n(455263)},455263:(e,r,n)=>{"use strict";n(835691),n(309798);var i=n(268223),a=n(463546);let o=(0,i.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,i.nr)("curator_content_shown","ui3_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===a.S$7.id})]},{id:"ui3_onboarding_was_shown_in_current_session",terminal:!0}]});(0,i.rn)("track_ui3_onboarding_shown",o)},147723:(e,r,n)=>{"use strict";n.d(r,{Ih:()=>i}),n(931828);let i="seen_ready_for_dev_callout"},179283:(e,r,n)=>{"use strict";n.d(r,{Fw:()=>i}),n(966712),n(877723),n(321961),n(809831),n(226055),n(239671),n(239737),n(132572),n(74487);let i="has_onboarded_ui3"},440377:(e,r,n)=>{"use strict";n.d(r,{b7:()=>o}),n(411855),n(517333),n(966712);var i=n(286640),a=n(330654);function o(e){let r=i.x4;r&&r.setItem("desktop-new-tab-plan-space",JSON.stringify({...e,timestamp:Date.now()}))}a.object({userId:a.string(),orgId:a.string().nullish(),teamId:a.string().nullish(),timestamp:a.number()})},507956:(e,r,n)=>{"use strict";n.d(r,{$A:()=>b,LS:()=>T,YY:()=>v,ks:()=>I});var i=n(188507),a=n(39798),o=n(587670),s=n(534611),l=n(707458),c=n(737947),d=n(966712),u=n(179940),p=n(96328),m=n(939863),h=n(393812),_=n(233560),g=n(857766),f=n(321487),E=n(241437),y=n(239671);function b(e){return e?.view==="fullscreen"&&e?.editorType===y.nT.DevHandoff}function I(){return(0,i.d4)(e=>b(e.selectedView))}function T(){return(0,i.d4)(e=>b(e.selectedView)&&(0,h.Mx)(e)&&(e.mirror.appModel.currentTool===o.NLJ.SELECT||e.mirror.appModel.currentTool===o.NLJ.ANNOTATE||e.mirror.appModel.currentTool===o.NLJ.MEASURE))}class v{pathToSelectedView(e,r,n,i){let a=n?(0,u.v6)(n):{},o=r[1];if(("design"===o||"file"===o)&&("1"===a["ready-for-dev"]||("dev"===a.mode||"dev"===a.m)&&"auto"!==a.m)){let n="branch"===r[3]&&r[4]?r[4]:r[2],o=e?.fileByKey[n];if(null==o){let{editing_file:e}=(0,d.Ay)();e&&e.key===n&&(o=e)}let s={view:"fullscreen",editorType:e?.user?y.nT.DevHandoff:y.nT.Design,fileKey:n};(i=i?i.slice(1):"")&&("commentPreferences"===i?s.showCommentPreferencesPicker=!0:s.commentThreadId=i),a["node-id"]&&(s.nodeId=a["node-id"]),a["node-type"]&&(s.nodeType=a["node-type"]),a["version-id"]&&(s.versionId=a["version-id"]),a["cc-version-id"]&&(a["node-id"]||a["cc-node-id"])&&(s.compareChangesVersionId=a["cc-version-id"]),a["cc-filter-status"]&&a["cc-version-id"]&&(a["node-id"]||a["cc-node-id"])&&(s.filterStatusVersions="1"===a["cc-filter-status"]),a["cc-node-id"]&&a["cc-version-id"]&&(s.compareChangesNodeId=a["cc-node-id"]),a["try-plugin-id"]&&(s.tryPluginId=a["try-plugin-id"]),a["try-plugin-version-id"]&&(s.tryPluginVersionId=a["try-plugin-version-id"]),a["try-plugin-name"]&&(s.tryPluginName=a["try-plugin-name"]),"1"===a["is-playground-file"]&&(s.isPlaygroundFile=!0),a["dev-mode-features-modal"]&&(s.devModeSupermodalTab=a["dev-mode-features-modal"]);let l=(0,_.b)(e);return l&&"1"===a["ready-for-dev"]&&(s.showOverview=!0),b(s)&&("dev"===a.mode||"dev"===a.m)&&(s.mode="dev",l&&a["focus-id"]&&!s.showOverview&&(s.devModeFocusId=a["focus-id"],a["node-id"]||(s.nodeId=a["focus-id"]))),s}return null}requireHistoryChange(e,r){return!1}selectedViewToPath(e,r){if(b(e)||"fullscreen"===e.view&&!0===e.showOverview){let n;if(e.fileKey===E.Zt)return`/test/interactions${c.Ay.location.search}`;let i=this.selectedViewName(e,r),o=i?(0,p.sy)(i):"",m={},h=e.fileKey,_=e.fileKey&&r.fileByKey[e.fileKey],y="design";if(_){let e=(0,g.L8)(_,r.repos);n=(0,g.gN)(_,e,y)}else n=`/${y}/${h}`,o?n+=`/${o}`:n+="/Untitled";if(e.nodeId&&s.fn(s.sH(e.nodeId))&&(m["node-id"]=(0,f.E)(e.nodeId)),(0,d.kc)().node_type_in_url&&e.nodeId&&s.fn(s.sH(e.nodeId)))try{let r=l.q.instance.get(e.nodeId)?.type;m["node-type"]=r?.toLowerCase()}catch(e){if(!(e instanceof a.wL))throw e}return e.versionId&&(m["version-id"]=e.versionId),e.compareChangesVersionId&&(m["cc-version-id"]=e.compareChangesVersionId),e.filterStatusVersions&&(m["cc-filter-status"]=1),e.compareChangesNodeId&&(m["cc-node-id"]=(0,f.E)(e.compareChangesNodeId)),e.devModeFocusId&&(m["focus-id"]=(0,f.E)(e.devModeFocusId)),e.showOverview&&(m["ready-for-dev"]="1"),m.m="dev",Object.keys(m).length>0&&(n+=`?${(0,u.lF)(m)}`),e.commentThreadId&&(n+=`#${e.commentThreadId}`),n}return null}selectedViewName(e,r){if(b(e)){let n=null;if(e.fileKey){let i=r.fileByKey[e.fileKey];if(i){let e=(0,g.L8)(i,r.repos);n=e?(0,g.At)(i,e):i.name}}return n??(0,m.t)("dev_handoff.dev_handoff_view_selector.untitled")}return null}selectedViewHasMissingResources(e,r){return!!b(r)&&!!r.fileKey&&!(r.fileKey in e.fileByKey)}}},520607:(e,r,n)=>{"use strict";n(411855),n(188507),n(634832),n(629019),n(358145),n(799569),n(946689),n(762638),n(939863),n(278733),n(553015),n(896474),n(662275),n(101505),n(672517),n(226055);var i=n(237870);n(147829),n(488578),n(462487),(0,i.Ju)(()=>null,"FeatureAnnouncement");function a(e){return React.createElement("div",{className:cx.absolute.left0.pl8.$,hidden:e.hidden},React.createElement(Button,{variant:"text",onClick:e.onBack},React.createElement("div",{className:cx.font13.lh24.flex.itemsCenter.pr12.$},React.createElement(Icon,{icon:"chevron-left-32"}),tx("general.back"))))}function o(e){return React.createElement("div",{className:cx.absolute.right0.pr8.$,hidden:e.hidden},React.createElement(Button,{variant:"text",onClick:e.onNext},React.createElement("div",{className:cx.font13.lh24.flex.itemsCenter.pl12.$},tx("general.next"),React.createElement(Icon,{icon:"chevron-right-32"}))))}function s(e){return React.createElement("div",{className:cx.absolute.right0.pr8.$,hidden:e.hidden},React.createElement(Button,{variant:"text",onClick:e.onDone},React.createElement("div",{className:cx.font13.lh24.flex.itemsCenter.$},tx("general.done"))))}function l(e){let r=r=>r+1===e.stepNum;return React.createElement("div",{className:cx.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,n)=>React.createElement("div",{className:cx.w8.h8.bRadius8.b1.colorBorder.if(r(n),cx.colorBgInverse,cx.colorBg).$,key:n})))}},281249:(e,r,n)=>{"use strict";n(411855),n(188507),n(629019),n(818),n(726864),n(457630),n(507956),n(354235),n(538411),n(844052)},40963:(e,r,n)=>{"use strict";n.d(r,{bU:()=>o,wh:()=>i}),n(966712);let i=new Set(["name","characters","symbolDescription","description","url"]),a=RegExp(`^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$|^\\w\u2022+\\w( \\(\\d+ characters\\))?$`);function o(e,r){if(""===e)return"";if("show"===r)return e;let n='"'===e[0]&&'"'===e[e.length-1],i=n?e.substring(1,e.length-1):e;if(a.test(i.toLowerCase()))return e;let o=n?'"':"";return o+i[0]+i.substring(1,i.length-1).replace(/\S/g,"\u2022")+i[i.length-1]+o}},603478:(e,r,n)=>{"use strict";n.d(r,{p:()=>s});var i=n(411855),a=n(966712),o=n(949012);i.memo(function(){return(0,a.kc)().internal_only_debug_tools?i.createElement(c,null):null});let s=i.memo(function(){return(0,a.kc)().internal_only_debug_tools?i.createElement(d,null):null}),l={loading:()=>null,error:function(){return i.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},c=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(496),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),d=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(496),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"})},515823:(e,r,n)=>{"use strict";n.d(r,{_:()=>l});var i=n(966712),a=n(38580),o=n(694687),s=n(279453);let l=(0,a.eU)(e=>{let r=(0,i.kc)().mfa_for_guests,n=e(o.h0);if(!r||!n)return!1;let a=e((0,s.M9q)({orgId:n}));if("loaded"!==a.status)return!1;let l=a.data.currentUser.baseOrgUser?.isMfaRestricted;return l?.status==="loaded"&&!0===l.data})},392340:(e,r,n)=>{"use strict";n.d(r,{Q:()=>c});var i=n(411855);n(188507);var a=n(776250),o=n(966712),s=n(915440),l=n(279453);function c(e,r){let n=i.useMemo(()=>({stuckMs:1e4,onEvent:(r,n,i)=>{var s,l;return s=e.currentOrgId,l=e.currentTeamId,void((0,o.kc)().file_browser_sidebar_lg_logging&&(0,a.sx)("File Browser Sidebar LG",{lgEvent:r,traceId:i.traceId,hasBeenOffline:i.wasOffline,hasBeenBackgrounded:i.wasBackgrounded,timeElapsedMs:i.timeElapsedMs,orgId:s,teamId:l,errors:JSON.stringify(n.errors)}))}}),[e.currentOrgId,e.currentTeamId]);return(0,s.oS)(l.$kt,e,{...r,subscriptionLogger:n})}},78584:(e,r,n)=>{"use strict";n.d(r,{AN:()=>o}),n(411855),n(188507),n(587670),n(511617),n(697170),n(737947),n(560945),n(563706),n(761870),n(145356),n(195847),n(946689),n(574176),n(939863);var i=n(672517);n(151166),n(198371),n(892677),n(857766),n(122983),n(737499),n(611978),n(860178);var a=n(421757);n(224857),n(966712),n(915440),n(660656),n(738269),n(335682),n(279453),n(216158),n(428467),n(239671),n(713190),n(634694),n(51009),n(787337),n(893606),n(601538),n(181912),n(662275),n(977466),n(624538),n(809831),n(407844),n(164795),n(248480),(0,i.tf)(a.$n),n(321112);let o=120},624538:(e,r,n)=>{"use strict";n(411855),n(188507),n(634832),n(697170),n(737947),n(733556),n(966712),n(586459),n(761870),n(145356),n(195847),n(140908),n(942830),n(447532)},448211:(e,r,n)=>{"use strict";n.d(r,{EO:()=>u,ZG:()=>p,iT:()=>s,l0:()=>d,xR:()=>l});var i=n(778883),a=n(939863),o=n(241395);function s(e){return"SECTION"===e}function l(e){if(0===Math.round(e.angle))return e;let r=(0,i.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-r[0][2],y:e.y-r[1][2]}}n(457630),n(357864);let c={x:0,y:0,width:1e3,height:1e3,angle:0};function d(e,r){let n=0!==Math.round(e.angle)?{transform:`rotate(${(360-e.angle).toString()}deg)`}:{},i=c;return"canvas"!==r&&(i=r),{position:"absolute",left:100*e.x/i.width+"%",top:100*e.y/i.height+"%",width:100*e.width/i.width+"%",height:100*e.height/i.height+"%",...n}}function u(e,r,n={x:1e3,y:1e3},i=o.s.identity().toFigMatrix()){let a=e.x/n.x,s=e.y/n.y,l=o.s.fromFigMatrix(i);if(!l.invert())return{position:"absolute",height:"1px",width:"1px"};l.multiply(o.s.fromFigMatrix(r));let c=l.offset(),d=l.toDegrees();return{position:"absolute",top:`${c.y/n.y*100}%`,left:`${c.x/n.x*100}%`,height:`${100*s}%`,width:`${100*a}%`,transform:`rotate(${d}deg)`,transformOrigin:"top left"}}function p(e){switch(e){case"DIAMOND":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,a.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},913964:(e,r,n)=>{"use strict";n.d(r,{r:()=>a}),n(587670);var i=n(939863);function a(e){switch(e){case"SECTION":return(0,i.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,i.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,i.t)("fullscreen.accessibility_dom.node_name_shape");case"CONNECTOR":return(0,i.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,i.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,i.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,i.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,i.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,i.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,i.t)("fullscreen.accessibility_dom.node_name_widget");case"INSTANCE":return(0,i.t)("fullscreen.accessibility_dom.node_name_instance");case"STAMP":return(0,i.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":return(0,i.t)("fullscreen.accessibility_dom.node_name_canvas");default:return(0,i.t)("fullscreen.accessibility_dom.node_name_fallback")}}},681816:(e,r,n)=>{"use strict";n.d(r,{B5:()=>O});var i=n(411855),a=n(188507),o=n(730371),s=n(346124),l=n(587670),c=n(629019),d=n.n(c),u=n(966712),p=n(646240),m=n(563706),h=n(939863),_=n(738269),g=n(259927),f=n(356390),E=n(843495),y=n(457630),b=n(237395),I=n(425187),T=n(745968),v=n(448211),S=n(839653),w=n(951034),A=n(794535),N=n(610171),C=n(420711);let O={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},L={jumpOnAbort:!0};function R(e){let r=(0,s.clamp)(e.headerLevel,2,6);return e.header?i.createElement(i.Fragment,null,i.createElement("div",{role:"heading","aria-level":r,id:e.header.headerId},e.header.label),e.children):i.createElement(i.Fragment,null,e.children)}function P({accessibilityScope:e,nodeId:r,...n}){let a=(0,b.A)(r,e);if(!a)return null;let{childIds:o,...s}=a;return i.createElement(D,{...n,...s,nodeId:r,childIds:o,accessibilityScope:e})}let D=i.memo(({childIds:e,...r})=>{let{accessibilityScope:n,isDebugMode:a,navigate:o,nodeId:s,headingLevel:l,suppressIds:c,type:d,absoluteTransform:u,dimensions:p,transformProperties:m}=r,h=(0,v.iT)(d)?l+1:l,_=e.length;return i.createElement(k,{...r,size:_},e.map((e,r)=>i.createElement(P,{key:e,nodeId:e,accessibilityScope:n,isDebugMode:a,navigate:o,headingLevel:h,setSize:_,setPosition:r+1,suppressIds:c,parent:{dimensions:p,transformProperties:m,absoluteTransform:u,guid:s}})))},function({directTextContent:e,innerTextContent:r,tableCells:n,transformProperties:i,childIds:s,stampFrequencies:l,accessibleLabel:c,absoluteTransform:d,dimensions:u,parent:p,...m},{directTextContent:h,innerTextContent:_,tableCells:g,transformProperties:f,childIds:E,stampFrequencies:y,accessibleLabel:b,absoluteTransform:I,dimensions:T,parent:v,...S}){return(0,a.bN)(m,S)&&(0,a.bN)(u,T)&&(0,a.bN)(d,I)&&(0,a.bN)(i,f)&&(0,a.bN)(l,y)&&(0,a.bN)(c,b)&&(0,a.bN)(s,E)&&(0,a.bN)(p?.absoluteTransform,v?.absoluteTransform)&&(0,a.bN)(p?.dimensions,v?.dimensions)&&(0,a.bN)(p?.transformProperties,v?.transformProperties)&&(0,o.deepEquals)(e,h)&&(0,o.deepEquals)(r,_)&&(0,o.deepEquals)(n,g)});function k({children:e,setSize:r=1,setPosition:n=1,headingLevel:o=2,author:s,transformProperties:c,directTextContent:b,innerTextContent:w,tableCells:N,headerLabel:P,guid:D,isDebugMode:k,navigate:F,ariaRole:x,name:U,shapeType:B,size:V,type:G,nodeId:H,suppressIds:W,stampFrequencies:K,accessibleLabel:j,contentsHidden:z,dimensions:Y,absoluteTransform:$,parent:q}){let Z;let X=(0,a.Pj)(),J=X.getState().comments.showResolved,Q=(0,a.d4)(e=>e.mirror.appModel.showComments),ee=X.getState().mirror.sceneGraph,et=(0,v.iT)(G)?o+1:o,er=(0,S.E)({type:G,shapeType:B,ariaRole:x,name:U,setData:{size:r,i:n,headerLevel:o},numChildren:V,stampFrequencies:K,accessibleLabel:j,contentsHidden:z}),en=!q;if((0,u.kc)().a11y_dom_css_positioning)Z=en?(0,v.EO)(Y,$):(0,v.EO)(Y,$,q.dimensions,q.absoluteTransform);else{let e=en?"canvas":q.transformProperties;Z=(0,v.l0)(c,e)}let ei=(0,A.rp)(b,A.d2.SEMANTIC),ea=(0,A.rp)(w,A.d2.SEMANTIC),eo=(0,A.Dm)(ee,H,N),es=P?{label:P,headerId:`sectionHeaderFor-${D}`}:null,el=(0,a.d4)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==l.m1T.TEXT&&1===r.length?r[0]:"")===D}),{groupCommentNodeId:ec,groupCommentTransformProperties:ed,groupSize:eu}=function(e,r){let n,i,a;let o=r.get(e)?.parentGuid,s=o?r.get(o):void 0;for(;s?.resizeToFit;){n=s.guid??e;let i=s.parentGuid;s=i?r.get(i):void 0}if(n){let r=l.glU.getSortedChildGuids(n);r.length>0&&r[r.length-1]===e?(a=r.length,i=(0,v.xR)(l.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:i,groupSize:a}}(D,ee);(function(e,r,n,a,o,s,l,c,d){let u=(0,p.Xr)(I.f);i.useEffect(()=>{e&&u({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:d,ariaLabel:(0,S.E)({type:r,shapeType:n,name:a,accessibleLabel:o,setData:{size:s,i:l,headerLevel:c}})}})},[o,c,l,e,a,d,n,s,r,u])})(el,G,B,U,j,r,n,o,H),i.useLayoutEffect(()=>{if(W)return;let e=document.getElementById(D);e&&(el&&!l.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[D,el,W]);let[ep,em]=(0,T.l)(k?[q,s,c,b,w,P,D,el,x,U,B,G,H,W]:[]);return i.createElement(i.Fragment,null,i.createElement("div",{id:W?void 0:D,ref:em,role:x,className:d()(C.rH,k&&ep),style:Z,"aria-label":er,tabIndex:-1,contentEditable:m.Ay.windows&&el?"true":void 0,onContextMenu:e=>{X.dispatch(_.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||el||(E.wr(),E.Dh([D]),f.Y5.commit(),F((0,y.QZ)({nodeId:D,...O}),L))},"data-guid":W?D:void 0,"data-fullscreen-intercept-dangerously-include-tab":!0},i.createElement(R,{header:es,headerLevel:et},ea.length>0?ea:null,ei.length>0?ei:null,null!=s&&(0,h.tx)("fullscreen.accessibility.author",{authorName:s}),eo.length>0?eo:null,e),Q?i.createElement(M,{guid:D,navigate:F,isDebugMode:k,parentTransformProperties:c,showResolved:J,intermediateTransformProperties:void 0,parentAbsoluteTransform:$,parentDimensions:Y}):null),Q&&ec?i.createElement(M,{guid:ec,navigate:F,isDebugMode:k,parentTransformProperties:"canvas",intermediateTransformProperties:ed??c,showResolved:J,groupSize:eu,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function M({guid:e,isDebugMode:r,navigate:n,isTopLevel:a,groupSize:o,parentTransformProperties:s,intermediateTransformProperties:l,showResolved:c,parentAbsoluteTransform:d,parentDimensions:u}){let p=(0,N.x)(e,c),m=i.createElement(w.X,{threads:p,navigate:n,isDebugMode:r,parentTransformProperties:s,intermediateTransformProperties:l,parentAbsoluteTransform:d,parentDimensions:u});if(!p||0===p.length)return null;if(a)return i.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},i.createElement("h2",{id:"canvas-comments-heading"},(0,h.tx)("fullscreen.accessibility_dom.unattached_comments")),m);if(!o)return m;{let e=(0,h.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:o});return i.createElement("div",{role:"group","aria-label":e},m)}}},274071:(e,r,n)=>{"use strict";function i(){(function(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null==e)return null;for(let r of e){let e="application"===r.getAttribute("role")||"application"===r.role;if(r.hasAttribute("readonly")&&e)return r}return null})()?.focus()}n.d(r,{$z:()=>i}),n(411855),n(188507),n(752795),n(587670),n(794272),n(96328),n(939863),n(392592),n(529906),n(21067),n(356390),n(239671),n(861802),n(913964)},405206:(e,r,n)=>{"use strict";n.d(r,{a1:()=>h});var i=n(411855),a=n(902008),o=n(629019),s=n.n(o),l=n(268537),c=n(638889),d=n(46481);n(762638);var u=n(724258),p=n(813421);function m(e){return i.createElement("div",{className:u.zc},e.children)}function h(e){return i.createElement(l.c$,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:s()(u.NV,{[u.Kt]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover,tooltip:e.tooltip},!e.hideCheck&&i.createElement("div",{className:u.l8},e.isChecked&&i.createElement(d.U,{svg:p.A},i.createElement(a.l,null))),e.children&&i.createElement(m,null,e.children),i.createElement("div",{className:u.Qq},e.text),null!=e.shortcut&&i.createElement(c.S,{shortcut:e.shortcut,className:u.LE}))}},81804:(e,r,n)=>{"use strict";n.d(r,{rA:()=>o});var i=n(587670),a=n(179536);let o={[i.D1Y.TEXT]:0,[i.D1Y.FRAME_OR_GROUP]:0,[i.D1Y.COMPONENT]:0,[i.D1Y.INSTANCE]:0,[i.D1Y.IMAGE]:0,[i.D1Y.SHAPE]:0,[i.D1Y.OTHER]:0};[...a.b4,...a._V];var s=(e=>(e[e.PREV=-1]="PREV",e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e))(s||{})},7860:(e,r,n)=>{"use strict";n.d(r,{t:()=>a});var i=n(411855);n(587670),n(358145),n(818),n(506599),n(187882);let a=(0,i.createContext)({isLeftPanelCollapsed:!1,isRightPanelCollapsed:!1})},708212:(e,r,n)=>{"use strict";n.d(r,{q:()=>L});var i=n(411855),a=n(188507),o=n(568214),s=n(966712),l=n(572206),c=n(799569),d=n(271779),u=n(939863),p=n(392592),m=n(553015),h=n(738269),_=n(662275),g=n(801161),f=n(259927),E=n(463304),y=n(498606),b=n(237870),I=n(342761),T=n(697373),v=n(228131),S=n(488578),w=n(421689),A=n(667241),N=n(790104);let C={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10,crossOrigin:"use-credentials"};var O=(e=>(e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT",e))(O||{});let L=(0,b.Ju)(function(e){let r=(0,a.wA)(),[n,b]=i.useState(e.selectedIdx),O=i.useRef(null),[L,R]=i.useState(null),P=i.useRef(null),{onUpdateAltText:D}=e,[k,M]=i.useState(e.attachments),F=(0,T.UR)(v.b.ATTACHMENT_MODAL_BACKGROUND_COLOR),x=F?(0,o.H0)(F):void 0,U=e=>{if(O.current){let r=O.current?.children[e].firstChild;r?.blur()}},B=e=>{U(n),b(e),R(null)},V=e=>{B((n+e+k.length)%k.length)},G=e=>{let r=n===(-1===e?0:k.length-1);return i.createElement(m.$,{onClick:()=>V(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:r})},H=e=>{if("ArrowLeft"===e.key)0!==n&&V(-1);else if("ArrowRight"===e.key){if(n===k.length-1)return;V(1)}},W=()=>(r(_.Lo()),!0);(0,E.O1)(W,E.KD.FULL_SCREEN_MODAL);let K=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(h.j7({type:f.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))},j=i.useRef(null),z=i.useCallback(()=>{if(P.current&&!L){let e=P.current.getBoundingClientRect(),n=new l.Mi(e.left+e.width/2,e.top);r(g.jD()),R(n)}else R(null)},[r,L]),Y=i.useCallback(e=>{if(j.current){let i=j.current.value.trim();(i||e)&&D(i,n).then(e=>{e&&(200!==e.status?r(p.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")})):M(e=>(e[n]={...e[n],altText:i},e)))}).catch(e=>{r(p.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")}))})}R(null)},[r,D,n]);return i.createElement(i.Fragment,null,i.createElement(d.i,{displayAs:d.C.Block},i.createElement(S.aF,{className:N.zw,size:"any",onKeyDown:e=>{H(e)}},i.createElement("div",{className:N.qG},i.createElement("div",{className:N.N1},i.createElement("div",{className:N.qd},k[n].metadata.file_name??(0,u.t)("comments.attachment_default_name",{fileExtension:k[n].mediaType.split("/")[1]})),i.createElement(c.Jn,{className:N.yu,recordingKey:"commentMediaDetailModal",onClick:W,innerText:(0,u.t)("comments.close"),"aria-label":(0,u.t)("comments.close")})),i.createElement("div",{className:N.xs},i.createElement(w.DH,{imageSrc:k[n].imageUrl,onContextMenu:e=>{K(e,k[n])},pageBackgroundColor:x??void 0,...C}),!!(0,s.kc)().comments_media_alt_text&&(e.canEdit||k[n].altText)&&i.createElement("button",{className:k.length>1?N.dE:N.R5,"data-tooltip-type":y.Ib.TEXT,"data-tooltip":L?void 0:(0,u.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>L?Y(k[n].altText):z(),ref:P},(0,u.t)("comments.alt_text"))),k.length>1&&i.createElement("div",{className:N.Qc},G(-1),i.createElement("div",{ref:O,className:N.iT},k.map((e,r)=>i.createElement("div",{key:e.thumbnailUrl,className:N.ub},i.createElement(A.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,u.t)("comments.attachment_thumbnail_alt_text_default"),isSelected:r===n,onClick:e=>{B(r)},onRightClick:r=>K(r,e)})))),G(1)))),L&&i.createElement(I.A,{text:k[n].altText??"",location:L,onEnter:()=>Y(k[n].altText),onEscape:()=>(R(null),!0),inputRef:j,canEdit:e.canEdit})))},"AttachmentDetailModal",b.ZU.NO)},667241:(e,r,n)=>{"use strict";n.d(r,{M:()=>p});var i=n(411855),a=n(493323),o=n(939863),s=n(277810),l=n(963380);let c=e=>e.height<256&&e.width<256,d=e=>e.height/e.width>2||e.width/e.height>2,u=e=>e.width>e.height?{width:256,height:128}:{width:128,height:256};function p(e){let[r,n]=i.useState(e.thumbnailUrl);i.useEffect(()=>{r.startsWith("blob")||n(e.thumbnailUrl)},[r,e.thumbnailUrl]);let p=e.dimensions??void 0,m=p&&(c(p)?p:d(p)?u(p):(0,s.$K)(p.width,p.height,256));return i.createElement("button",{className:e.isSelected?l.ig:l.vi,onClick:()=>{e.onClick(e.thumbnailUrl)},style:m&&{width:`${m.width}px`,height:`${m.height}px`},onContextMenu:r=>{e.onRightClick&&e.onRightClick(r)}},i.createElement("img",{src:r,crossOrigin:"use-credentials",alt:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),className:l.q_}),i.createElement("div",{className:e.overlayText||e.isUploading?l.Xu:l.VO},e.isUploading&&i.createElement(a.kt,null),e.overlayText))}},30990:(e,r,n)=>{"use strict";n.d(r,{a:()=>_});var i=n(411855),a=n(188507),o=n(939863),s=n(738269),l=n(662275),c=n(259927),d=n(328775),u=n(708212),p=n(667241),m=n(757207),h=n(963380);function _(e){let r=(0,a.wA)(),{attachments:n}=e,_=i=>{r((0,l.to)({type:u.q,data:{attachments:n,selectedIdx:n.map(e=>e.thumbnailUrl).indexOf(i),onUpdateAltText:g,canEdit:e.canEdit},showModalsBeneath:!0}))},g=(r,i)=>{let a=n[i];return d.l.put(e.fileKey,a.id,r)},f=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(s.j7({type:c.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))};return i.createElement("div",{className:m.KK},n.slice(0,3).map((e,r)=>i.createElement("div",{key:e.id,className:h.Kn},i.createElement(p.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),overlayText:n.length>3&&2===r?`+${n.length-3}`:void 0,onClick:_,onRightClick:r=>f(r,e),dimensions:0===r&&1===n.length?e.metadata.dimensions:void 0}))))}},984871:(e,r,n)=>{"use strict";n.d(r,{Z5:()=>c,i$:()=>o,uw:()=>l});var i=n(411855),a=n(966712);let o={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function l(e){if(!(0,a.kc)().internal_only_debug_tools)return;let r="function"==typeof e?e({...o}):e;o={...o,...r},requestAnimationFrame(()=>{s.forEach(e=>e(o))})}function c(){let[e,r]=i.useState(o);return i.useEffect(()=>{let e=e=>{r(e)};return s.add(e),()=>{s.delete(e)}},[r]),e}},517911:(e,r,n)=>{"use strict";n.d(r,{Ao:()=>s,Ko:()=>c,LX:()=>o,c4:()=>d,xN:()=>l});var i=n(841563),a=n.n(i),o=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(o||{});function s(e,r){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${r}`}function l(e,r){if(e.isSinglePin&&r.isSinglePin){var n,i;return n=e.pins[0],i=r.pins[0],n.x!==i.x||n.y!==i.y||!a()(n.avatars,i.avatars)||!a()(n.previewMessageMeta,i.previewMessageMeta)||n.isUnread!==i.isUnread||n.numUnreadReplies!==i.numUnreadReplies||n.isResolved!==i.isResolved||!a()(n.selectionBoxAnchor,i.selectionBoxAnchor)||!a()(n.otherBoundingBoxes,i.otherBoundingBoxes)||!a()(n.isPinnedToFile,i.isPinnedToFile)}return e.pins.length!==r.pins.length||e.isUnread!==r.isUnread||e.isPinnedToFile!==r.isPinnedToFile}let c={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1};function d(e){let r=new Map,n=[];return e.forEach(e=>{if(r.has(e.user.id)){let i=r.get(e.user.id);n[i].num_unread_comments+=e.isUnread?1:0,n[i].num_comments+=1}else n.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),r.set(e.user.id,n.length-1)}),n}},593392:(e,r,n)=>{"use strict";n.d(r,{p:()=>l});var i=n(411855),a=n(572206),o=n(457630),s=n(193772);function l(e){let r=(0,o.Cj)(),n=a.Mi.scale(-1,r);return i.createElement("div",{className:s.M,style:{top:r.y,left:r.x,height:r.height,width:r.width}},i.createElement("div",{className:s.W,style:{top:n.y,left:n.x}},e.children))}},400333:(e,r,n)=>{"use strict";n.d(r,{HH:()=>C,xT:()=>T});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(934480),d=n(733334),u=n(946689),p=n(46221),m=n(939863),h=n(677664),_=n(611978),g=n(860178),f=n(416822),E=n(498606),y=n(536327),b=n(527429),I=n(190521);function T(e){let r=RegExp("^\\w+:"),n=e.match(r);return""===e||n&&["http:","https:","mailto:","tel:"].includes(n[0].toLowerCase())?e:"https://"+e}let v=i.memo(e=>{let{text:r,hyperlink:n}=e,o=i.useMemo(()=>(0,c.x6)(r),[r]),s=(0,_.z3)(),l=(0,a.wA)();return i.createElement(u.N_,{onClick:()=>{l((0,h.RK)({rawInput:T(n)}))},className:I.e_,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":E.MW.HYPERLINK_POPUP,"data-tooltip-show-above":!0,"data-tooltip-unconstrain-width":!0,"data-tooltip-editor-type":s,"data-tooltip-url-string":n,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,trusted:!1},o)}),S=i.memo(e=>{let{userId:r,imgUrl:n,handle:a,href:o}=e;return i.createElement(u.N_,{href:o,target:"_blank",className:I.lE,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":n,"data-tooltip-user-handle":a,"data-tooltip-unconstrain-width":!0,"data-mention-user-id":r,trusted:!0},a)}),w=i.memo(function(e){let r=g.iZ()?.community_profile_id,{handle:n,commentId:a,profileId:o,profileName:s,profileImgUrl:c}=e,p=(0,d.F)(n),m=(0,d.F)(s);return i.createElement(u.N_,{href:`/${p}`,target:"_blank",className:I.lE,"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":c,"data-tooltip-user-handle":m,"data-tooltip-unconstrain-width":!0,onClick:()=>{(0,l.sx)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:a})},trusted:!0},p)}),A=i.memo(e=>{let{text:r,tokenStyles:n}=e,a=i.useMemo(()=>(0,c.x6)(r),[r]),o=n?.map(e=>"b"===e?I.hp:"i"===e?I.u5:"s"===e?I.Vc:"lightbold"===e?I.XH:void 0)||[];return i.createElement(p.M,null,i.createElement("span",{className:s()(o)},a))}),N=i.memo(e=>{let{text:r,userId:n,profileId:a,user:o,orgPath:s,profiles:l,commentId:c,tokenStyles:u,hyperlink:p}=e,m=(0,d.F)(r);if(n)return i.createElement(S,{href:`/files${s}/user/${n}`,userId:n,handle:(0,d.F)(o?.handle)||void 0,imgUrl:o?.img_url});if(a&&m){let e="@"+m,r=l?.[a];return r?i.createElement(w,{handle:e,commentId:c,profileId:r.id,profileName:r.name,profileImgUrl:r.img_url}):i.createElement("span",null,e)}if(null===a&&m){let e="@"+m;return i.createElement("span",null,e)}let h=p&&T(p);return h&&m&&(0,b.$)(h)?i.createElement(v,{text:m,hyperlink:h}):m?i.createElement(A,{text:m,tokenStyles:u}):null}),C=i.memo(e=>{let r=(0,f.q)(),n=(0,a.d4)(r=>e.mentionedProfiles||r.communityHub?.comments?.mentionedProfiles),o=(e,r,n,a,s)=>e.map((e,l)=>{let c="";if(e.styles?.includes("ul")?c=I.ty:e.styles?.includes("ol")&&(c=I.A9),e.children?.length){let d=e.children.map((e,d)=>i.createElement("li",{key:`li-${r}-${l}-${d}`,className:c},o(e.children,`${r}-${l}-${d}`,n,a,s)));if(e.styles?.includes("ul"))return i.createElement("ul",{key:`ul-${r}-${l}`},d);if(e.styles?.includes("ol"))return i.createElement("ol",{key:`ol-${r}-${l}`},d)}return i.createElement(N,{key:`${r}-${l}`,orgPath:n,profiles:a||null,commentId:s,text:(0,d.F)(e.t)||void 0,hyperlink:e.link,user:e.user_annotated,userId:e.user_id,profileId:e.profile_id,tokenStyles:e.styles||null})}),{messageMeta:s,showEditedIndicator:l,commentId:c}=e,u=e.className||I.zD;return i.createElement("div",{className:I.$t+" "+u,"data-testid":"comment-message",dir:"auto"},o(s,c,r,n,c),l&&i.createElement("span",{className:I.oh,key:"edited_indicator"},"\xa0",(0,m.tx)("comments.edited")))});C.displayName="CommentMessage"},448879:(e,r,n)=>{"use strict";n.d(r,{y:()=>i}),n(411855),n(226055),n(617453),n(187882),n(860168);let i={showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages"}},152811:(e,r,n)=>{"use strict";n.d(r,{L9:()=>O,T4:()=>P,ek:()=>x,hh:()=>V,pO:()=>G,vO:()=>U});var i=n(411855),a=n(188507),o=n(587670),s=n(534611),l=n(707458),c=n(841563),d=n.n(c),u=n(934480),p=n(939863),m=n(331972),h=n(964881),_=n(975350),g=n(63397),f=n(994988),E=n(103907),y=n(654034),b=n(714705),I=n(697551),T=n(860178),v=n(100197),S=n(440535),w=n(555328),A=n(697373),N=n(531461);let C=new Set([]);function O(e){return({creationDate:(0,p.t)("comments.sort_by_date"),recent:(0,p.t)("comments.sort_by_last_action"),unread:(0,p.t)("comments.sort_by_unread"),slide:(0,p.t)("comments.sort_by_slide")})[e]}let L=(e,r)=>Date.parse(r.comments[0].created_at)-Date.parse(e.comments[0].created_at),R={creationDate:L,recent:(e,r)=>Date.parse(r.lastRepliedAt||r.comments[r.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,r)=>{let n=Number(e.comments.some(e=>e.isUnread)),i=Number(r.comments.some(e=>e.isUnread));return n===i?L(e,r):i-n},slide:(e,r)=>0};function P(e){return({resolved:(0,p.t)("comments.show_resolved_comments"),yours:(0,p.t)("comments.only_your_threads"),currentPage:(0,p.t)("comments.only_current_page"),currentSlide:(0,p.t)("comments.only_current_slide")})[e]}let D=e=>!e.comments[0].resolved_at,k=e=>e.sidebarItemType===S.kT.COMMENT_THREAD,M=e=>e.sidebarItemType===S.kT.FEED_POST,F={currentPage:!1,currentNode:!1,currentSlide:!1,currentDevModeFocus:!1};function x(e){return({commentsOnly:(0,p.t)("comments.only_comments"),postsOnly:(0,p.t)("comments.only_posts")})[e]}let U={postsOnly:[N.mW.RESOLVED],all:[],commentsOnly:[]};async function B(e,r){if(r){let n=r.replace(u.Py,u.H3);return await e.search(n).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return C}let V=i.createContext({});function G(e){let r=(0,E.wq)(),n=(0,a.wA)(),c=(0,I.UP)(),u=(0,a.d4)(e=>e.comments.showResolved),p=(0,a.d4)(e=>e.comments.showOnlyParticipating),C=(0,a.d4)(e=>e.mirror.appModel.currentPage),O=e.currentNode||C,L=(0,T.TA)()||void 0,P=(0,a.d4)(e=>e.selectedView.commentThreadId),x=(0,v.ut)(o.Ez5?.singleSlideView().focusedSlideId,s.AD),G=(0,h.hA)(),H=(0,A.Ld)(),[W,K]=i.useState("creationDate"),[j,z]=i.useState({...F,resolved:!u,yours:p,currentDevModeFocus:!!G,...e.initialFilterState}),[Y,$]=i.useState("all"),[q,Z]=i.useState(""),[X,J]=i.useState(null),Q=(0,b.kC)(r),ee=i.useMemo(()=>({resolved:D,yours:e=>L&&e.comments.some(e=>e.user_id===L||(0,y.F$)(e).includes(L))||!1,currentPage:e=>C&&e.page===C||!1,currentNode:e=>{let r=e.comments[0].client_meta;return!!r?.in_frame&&r.node_id===O},currentSlide:e=>{let r=e.comments[0].client_meta?.node_id,n=r?l.q.instance.get(r):void 0,i=n?n.findContainingSlideOrSelf():s.AD;return x===s.AD||i===s.AD||i===x},currentDevModeFocus:e=>{let r=G?l.q.instance.get(G):null;if(!r)return!0;let n=e.comments[0]?.client_meta?.node_id,i=n?l.q.instance.get(n):null;return(0,m.W)(r,i)}}),[L,C,O,x,G]),et=i.useMemo(()=>({all:()=>!0,commentsOnly:k,postsOnly:M}),[]),er=i.useCallback(e=>{Z(e)},[]),en=i.useCallback(e=>{n(_.nL({activeSort:e})),K(e)},[n]),ei=i.useCallback(e=>{"resolved"===e&&(n(_.U3({showResolved:j.resolved})),c&&n((0,f.mH)(j.resolved))),"yours"===e&&(n(_.RO({showOnlyParticipating:!j.yours})),c&&n(g.Zj(j.yours?w.Qv.ALL:w.Qv.ME))),z(r=>(r[e]=!r[e],{...r}))},[n,j,c]),ea=i.useMemo(()=>{let e=new Set;for(let r of Object.values(N.mW))j[r]&&e.add(r);return e},[j]),eo=i.useCallback(e=>{$(e)},[]);i.useEffect(()=>{U[Y].forEach(e=>{("resolved"===e?!ea.has(e):ea.has(e))&&ei(e)})},[Y,ea,ei]),i.useEffect(()=>{q?B(Q,q).then(e=>{d()(X,e)||J(e)}):J(null)},[r,q,X,Q]);let es=i.useMemo(()=>({...R,...H}),[H]),el=i.useMemo(()=>(function(e,r,n,i,a,o,s,l){if("loaded"!==e.status)return e;let c=[...e.data];for(let e of(l&&(c=c.filter(e=>l.has(e.id))),i))c=c.filter(o[e]);return c=c.filter(s[n]),{...e,data:c.sort(a[r])}})(r,W,Y,ea,es,ee,et,X),[r,W,Y,ea,es,ee,et,X]),ec=i.useMemo(()=>"loaded"===el.status?{...el,data:el.data.filter(e=>e.sidebarItemType!==S.kT.WALKTHROUGH_MEDIA)}:el,[el]),ed=i.useMemo(()=>({setSort:en,toggleFilter:ei,setMode:eo,setQuery:er}),[er,en,ei,eo]),eu=i.useMemo(()=>({activeQuery:q,activeSort:W,activeMode:Y,activeFilters:ea,threads:r,filteredThreads:el,filteredSidebarItems:ec,threadManager:ed}),[q,W,Y,ea,r,el,ec,ed]),ep=i.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===P)},[P,r]);return i.useEffect(()=>{ep&&ep.comments[0].resolved_at&&j.resolved&&ei("resolved")},[j,ep,ei]),i.useEffect(()=>{z(e=>({...e,currentDevModeFocus:!!G}))},[G,z]),i.createElement(V.Provider,{value:eu},e.children)}},238559:(e,r,n)=>{"use strict";n.d(r,{Uu:()=>g,wV:()=>f});var i=n(411855),a=n(188507),o=n(975350),s=n(654034),l=n(457630),c=n(860178),d=n(555648),u=n(343348),p=n(874560),m=n(288345),h=n(57289);let _=n(194792).ss;function g(e){let r=(0,a.d4)(e=>e.comments.typeahead);return e.mentionsDisabled&&r?.type==="mentions"?null:i.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function f(e){let r=(0,a.d4)(e=>e.comments.typeaheadPositionOffset),n=i.useMemo(()=>{let n=e.position||{x:0,y:0};return{top:r.top+n.y,right:r.right+n.x,bottom:r.bottom+n.y,left:r.left+n.x,width:r.width,height:r.height}},[r,e.position]),o=(0,s.mz)();return i.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:o,direction:h.ri.DOWNWARDS,targetRect:n})}function E(e){let r;let n=(0,a.d4)(e=>e.comments.emojiPicker),s=(0,a.d4)(e=>e.comments.typeahead),[g,f]=(0,i.useState)(null);i.useEffect(()=>{s?.type==="suggestions"&&f(u.NS)},[s?.type]);let E=(0,a.wA)(),y=i.useCallback(()=>{E(o.RI({visible:!1}))},[E]),b=i.useCallback(e=>{E(o.We(e))},[E]),I=(0,l._X)({subscribeToUpdates_expensive:!0}),T=i.useMemo(()=>e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:I,[e.useWindowAsViewport,I]),v=(T?.isPanning||T?.isZooming)&&n?.visible;i.useEffect(()=>{v&&y()},[v,y]);let S=(0,c.iZ)(),w=!!(n&&n.visible||s),{onClear:A}=e,N=i.useCallback(()=>{n&&n.visible&&y(),s&&A()},[n,s,y,A]),{decoratorsRef:C}=e;return i.useEffect(()=>{C&&(C.current={visible:w,clearDecorators:N})},[N,C,w]),r={...r=e.useFixedPosition||e.direction!==h.ri.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>T.height-g&&e.targetRect.top>T.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:h.ri.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:T.height-e.targetRect.top},direction:h.ri.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:h.ri.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:h.ri.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},i.createElement("div",{style:{pointerEvents:"auto"}},n&&n.visible&&i.createElement(d._,{onInsert:n.onPick,onCancel:n.onCancel??y,targetRect:n.targetRect}),s&&"emojis"===s.type&&i.createElement(p.j,{dispatchTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,...r}),S&&s&&"mentions"===s.type&&(s.search||s.mentions.length>0)&&i.createElement(m.E,{dispatch:E,setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,entity:S,isCommunityMentions:e.isCommunityMentions,width:e.width,recordingKey:"mentionsTypeaheadView",dataTestId:"comment-mentions-typeahead",setMaxTypeaheadHeight:f,zIndex:e.isCommunityMentions?void 0:_,isComments:!0,...r}),s&&"suggestions"===s.type&&i.createElement(u.Cs,{setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...r}))}},884101:(e,r,n)=>{"use strict";n.d(r,{Kb:()=>I,ny:()=>b});var i=n(411855),a=n(629019),o=n.n(a),s=n(934480),l=n(96328),c=n(939863),d=n(120694),u=n(498606),p=n(227795),m=n(533051),h=n(249329),_=n(855226);function g(e){return void 0!==e.numUsers}let f={};function E(e,r){let n=e.map(e=>e.handle).slice(0,r),i=e.length-r;return i>0&&n.push((0,l.td)(i,"other")),(0,l.Yx)(n)}d.i.forEach(e=>{f[`:${e.id}:`]=e});let y=i.forwardRef(function(e,r){let n=g(e.reaction)?e.reaction.numUsers:e.reaction.users.length,a=Object.keys(e.reaction.skinTonesToUsers).length,l=a>0?Object.keys(e.reaction.skinTonesToUsers):[""],c=l.map(r=>(0,s.UF)(`${e.reaction.emoji}${r}`)[0]),d={};if(!g(e.reaction)){let r=[],n=[];if(a>0)l.forEach(i=>{let o=`${e.reaction.emoji}${i}`;r.push((0,s.UF)(o)[0].unicode);let l=E(e.reaction.skinTonesToUsers[i],Math.floor(40/a));n.push([o,l])});else{r.push((0,s.UF)(e.reaction.emoji)[0].unicode);let i=E(e.reaction.users,40);n.push([e.reaction.emoji,i])}d={emojiUnicodeList:r,emojiShortcodeToUsers:n}}return i.createElement("button",{className:o()({[h.bs]:e.reaction.selected,[h.mJ]:!e.reaction.selected,[h.aN]:!e.visible}),"data-tooltip-type":u.Ib.SPECIAL,"data-tooltip":m.h,"data-tooltip-data":JSON.stringify(d),"data-tooltip-max-width":200,onClick:e.onClick,"data-testid":`reaction-button-${e.reaction.emoji}`,ref:r},c.map(e=>i.createElement("span",{key:`${e.meta}`,className:h.A9},e.unicode)),i.createElement("span",{className:h.U9},n))});function b(e){let r=e.styleClassName?e.styleClassName:h.BB;return i.createElement(p.YW,{svg:_.A,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,c.t)("comments.add_reaction"),onClick:e.onClick,selected:e.selected,className:r,selectedClassName:e.selectedStyleClassName,dataTestId:"add-reaction-button","data-fullscreen-intercept":e["data-fullscreen-intercept"]})}function I(e){let{reactions:r,collapseOverflow:n,onClickExisting:a,children:s,prependToList:l}=e,d=i.useRef(null),u=i.useRef({}),[p,m]=i.useState(null),[_,g]=i.useState(!n);i.useLayoutEffect(()=>{if(!d.current)return;let{width:e}=d.current.getBoundingClientRect(),n=-parseInt(h.h)+parseInt(h.bB),i=0;for(let a of r){let o=u.current[a.emoji];if(!o)return;if((n+=parseInt(h.h)+o.getBoundingClientRect().width)>e||i===r.length-1&&n+40+parseInt(h.h)>e)break;i+=1}m(i)},[r]);let f=null===p?null:r.length-p,E=r.map((r,n)=>{let o=a?e=>a(r,e):void 0;return i.createElement(y,{key:r.emoji,reaction:r,onClick:o,ref:e=>u.current[r.emoji]=e,visible:_||e.addedReaction||null===p||n<p})}),b=!(_||e.addedReaction)&&null!==f&&f>0;return i.createElement(i.Fragment,null,i.createElement("div",{className:o()({[h.KD]:!0,[h.l$]:b,[h._s]:!(_||e.addedReaction)&&null===f}),ref:d},...l??[],E,!b&&s),b&&i.createElement("div",{className:h.Jd},i.createElement("button",{className:h.mJ,onClick:()=>{g(!0)},"data-testid":"show-more-reactions-button"},(0,c.tx)("comments.num_hidden_more",{numHidden:f}))))}},636662:(e,r,n)=>{"use strict";n.d(r,{K:()=>u});var i=n(411855),a=n(966712),o=n(96328),s=n(939863),l=n(67294),c=n(710381),d=n(386362);function u(e){let r=i.useCallback(()=>{if(e.replyContainerRef?.current){let r=(0,a.kc)().comments_smooth_scroll?"smooth":"auto";e.replyContainerRef.current.scrollIntoView({block:"end",behavior:r})}},[e.replyContainerRef]),n=i.createElement(c.C,{fallback:null,errorFallback:i.createElement(c.e,{type:"thread"}),editorRef:e.editorRef,editorType:e.editorType,dispatch:e.dispatch,user:e.user,typeahead:e.typeahead,mentionables:e.mentionables,threadPosition:e.threadPosition,setHyperlinkLocation:e.setHyperlinkLocation,hyperlinkLocation:e.hyperlinkLocation,setHyperlinkEditorRef:e.setHyperlinkEditorRef,messageMeta:e.messageMeta,attachments:e.attachments,submitText:e.submitText,placeholderText:e.placeholderText,onCancel:e.onCancel,onSubmit:e.onSubmit,onComposeFocus:e.onComposeFocus,onEditStart:e.onEditStart,editorOnInsert:e.editorOnInsert,editorOnClear:e.editorOnClear,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,isDisabled:e.isDisabled,mountInputFocused:e.mountInputFocused,updateMessage:e.updateMessage,updateAttachment:e.updateAttachment,deleteAttachment:e.deleteAttachment,setIsEditorFocused:e.setIsEditorFocused,isEmojiPickerDisabled:e.isEmojiPickerDisabled,hideEmojiPicker:e.hideEmojiPicker,allowAttachments:e.allowAttachments,recordingKey:e.recordingKey,className:e.className,authorChanged:e.authorChanged,createdAt:e.createdAt,threadId:e.threadId,fileKey:e.fileKey,editingExistingComment:e.editingExistingComment,scrollToBottom:e.replyContainerRef&&r,maintainSelectionOnFocus:e.maintainSelectionOnFocus});return i.createElement("div",{className:d.MP,ref:e.replyContainerRef,"aria-label":e.authorNames?(0,s.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,o.Yx)(e.authorNames)}):(0,s.t)("fullscreen.accessibility.reply_to_comment")},i.createElement("div",{className:d.i8},i.createElement(l.H8,{user:e.user||{}})),n)}},815549:(e,r,n)=>{"use strict";n(411855),n(188507),n(459401),n(966712);var i=n(38580);n(776621),n(939863),n(662275),n(625651),n(396226),n(177505),n(29680),n(335682),n(99506),n(243987),n(300874),n(851363),n(887326),n(187882),n(454351),n(129531),n(362369),n(391993),(0,i.eU)(!1)},36127:(e,r,n)=>{"use strict";n.d(r,{bK:()=>d,oZ:()=>u,uK:()=>c});var i=n(783145),a=n(38580),o=n(374626);let s=(0,a.eU)({}),l=(0,a.eU)(!1),c=(0,a.eU)({autoScroll:!1});async function d(e,r,n,a){let{guid:d}=e;o.zl.set(c,e=>e.autoScroll?{...e,guid:d}:e),a||o.zl.set(l,!0),await function(e,r){let{guid:n,name:a}=e,l=.03*a.length;return new Promise(c=>{(0,i.i)(a.length,0,{onUpdate:i=>{r.signal.aborted||o.zl.set(s,r=>({...r,[n]:{guid:n,boundingBox:e.absoluteBoundingBox,state:"deleting",name:a.slice(0,Math.floor(i))}}))},duration:l,ease:"linear",onComplete:c})})}(e,n),await function(e,r,n){let{guid:a}=e,l=.07*r.length;return new Promise(c=>{(0,i.i)(0,r.length,{onUpdate:i=>{n.signal.aborted||o.zl.set(s,n=>({...n,[a]:{guid:a,boundingBox:e.absoluteBoundingBox,state:"writing",name:r.slice(0,Math.floor(i))}}))},duration:l,ease:"linear",onComplete:c})})}(e,r,n),o.zl.set(s,e=>{let r={...e};return delete r[d],r}),a||o.zl.set(l,!1)}function u(){o.zl.set(s,{})}},112084:(e,r,n)=>{"use strict";n.d(r,{W:()=>o});var i=n(38329),a=n(988022);function o(e,r,n,o){var s,l,c,d;let u=i.D.getState(),p=(s=r,l=e,c=n,d=i.D,{search_session_id:o,node_id:s,node_type:function(e,r){if(!e)return null;let n=r.getState().mirror.sceneGraph.get(e);return n?.type||null}(s,d),query_length:l?.length,contains_at_symbol:l?.includes("@"),result_row_index:c});(0,a.ds)("canvas_mention_search_cancelled",u.openFile?.key,u,p)}n(863670)},634951:(e,r,n)=>{"use strict";n.d(r,{LL:()=>g,be:()=>f,k6:()=>y,xG:()=>E});var i=n(411855);n(851061),n(675678);var a=n(587670),o=n(86625),s=n(776621),l=n(409430),c=n(604978),d=n(957385),u=n(781779);let p=Object.create(null);function m(e){return(0,c.w6)(e).catch(()=>null)}let h=new d.A;async function _({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:i}){let a=500*window.devicePixelRatio,o=81.25*window.devicePixelRatio,[s,l]=await Promise.all([m({url:"https://static.figma.com/uploads/cbbdc3ccc2f650369332a454328722aa11cbd78a",height:a,width:a}),e?m({url:e,height:a,width:a}):null]),d=(0,c.Dl)(a,a),p=d.getContext("2d");if(!s)return"";if(i||p.drawImage(s,0,0,a,a),p.arc(a/2,a/2,a/2-o,0,2*Math.PI,!0),p.clip(),l){let e=a-2*o;p.drawImage(l,o,o,e,e)}else{if(!n||!r)return"";p.fillStyle=n,p.fillRect(0,0,a,a),p.textBaseline="middle",p.textAlign="center";let e=187.5*window.devicePixelRatio;p.font=`${e}px Inter`,p.fillStyle===u.$C?p.fillStyle=u.PN:p.fillStyle="white",p.fillText(r.substring(0,1).toUpperCase(),a/2,a/2+10*window.devicePixelRatio)}p.scale(window.devicePixelRatio,window.devicePixelRatio);let _=d.toDataURL("image/png");return h.set(_,e,r,n,i),_}function g(e,r,n,a){let[o,s]=(0,i.useState)(h.get(e,r,n,a)||"");return(0,i.useEffect)(()=>{if(!e&&!(r&&n)){s("");return}let i=!1,l=h.get(e,r,n,a);return l!==o&&(l?s(l):_({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:a}).then(e=>{i||s(e)})),()=>{i=!0}},[e,r,n,a,o]),o}async function f(e,r){let n=await (0,l.T)(e,p);(0,s.Lo)("activateStampToolWithImageURL","setting stamp tool",{label:r,bytesLength:n?.length}),a.glU.activateStampTool(n,r)}async function E(e,r,n,i,s,c){let d=await (0,l.T)(e,p);(0,o.l7)(c,"drop-face",()=>a.glU.dropFaceOntoCanvas(d,"Face Stamp",r,n,i,s))}function y(e,r){if(e.image)return`https://static.figma.com/uploads/${e.image}`;if(e.imageFunc)return e.imageFunc(r);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}},782540:(e,r,n)=>{"use strict";n.d(r,{n:()=>o});var i=n(145519),a=n(301922);let o=[{type:"REACTION",name:"r-fire",image:"d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",position:2},{type:"REACTION",name:"r-surprised",image:"1429964104bceac90c5c8e731ce4cc50b27e2797",position:1},{type:"REACTION",name:"r-eyes",image:"ffd0635e8f9322352eff0c15411ac0b536b98d87",position:8},{type:"REACTION",name:"r-wave",image:"0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",position:7},{type:"ACTION",name:"r-chat",image:"d1de3f6fe1f8ffa74d3db5203b2df761d0fed1cc",position:6,action:(e,r)=>{(0,a.q)().then(n=>{n||r(i.F6({position:e,source:"emoji_wheel_reactions"}))})}},{type:"REACTION",name:"r-sad",image:"78f60a21d2616c2a24c7645d8636dec855e48ffb",position:5},{type:"REACTION",name:"r-laugh",image:"a83de90bf34495081ce2e8bcaf28d1d2c16e5186",position:4},{type:"REACTION",name:"r-love",image:"ff5be810b821d264cc2c95f665d24a867c34e587",position:3}]},861802:(e,r,n)=>{"use strict";n.d(r,{WJ:()=>u,hf:()=>c,sn:()=>a,tR:()=>d});var i=n(939863);let a="s-heart";function o(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,i.t)("fullscreen.stamp_wheel.heart")}]}let s={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},l={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function c(e){return o({heart:l["s-heart"],thumbsDown:l["s-thumbsDown"],star:l["s-star"],thumbsUp:l["s-thumbsUp"],question:l["s-question"],profile:()=>e,dots:e=>{let r=s[e]||s["667799"];return`https://static.figma.com/uploads/${r}`},plusOne:l["s-plusOne"]})}let d="https://static.figma.com/uploads/2b2029d1eabf48358e208427103a2023435751dc",u=o({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>"https://static.figma.com/uploads/cb417fb549d06a2fb42e182cddd2b94b1996b768",dots:()=>d,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},970332:(e,r,n)=>{"use strict";n(411855),n(629019),n(799569),n(946689),n(939863),n(175290),n(101505),n(672517),n(226055),n(833629),n(63666),n(588694),n(799088),n(983238)},173101:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670),n(931828);var i=n(356390);n(114716),n(309798),(0,n(479296).D)(()=>i.Y5.fromFullscreen)},600907:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670),n(931828);var i=n(356390);n(114716),n(309798),(0,n(479296).D)(()=>i.Y5.fromFullscreen)},469572:(e,r,n)=>{"use strict";n.d(r,{a2:()=>l}),n(411855),n(188507),n(752795);var i=n(297666),a=n(38580),o=n(374626);n(931828);let s={x:(0,a.eU)(void 0),y:(0,a.eU)(void 0),cornerRadius:(0,a.eU)(void 0),angle:(0,a.eU)(void 0),width:(0,a.eU)(void 0),height:(0,a.eU)(void 0),fontSize:(0,a.eU)(void 0),fontStyle:(0,a.eU)(void 0),fontFamily:(0,a.eU)(void 0),fillPaints:(0,a.eU)(void 0),strokePaints:(0,a.eU)(void 0),effects:(0,a.eU)(void 0)},l=(0,i.s)(e=>{let r=s[e];r&&o.zl.set(r,e=>!e)},200,!0)},595755:(e,r,n)=>{"use strict";n(411855),n(893606)},824767:(e,r,n)=>{"use strict";n.d(r,{Zk:()=>_,x0:()=>h}),n(411855);var i=n(374626),a=n(776621),o=n(30637),s=n(809831),l=n(502665);n(860178),n(132572);var c=n(301819),d=n(982749);n(335218);let u=(0,i.E3)("frecencyHistory",{numItems:0,userIds:{}},{subscribeToChanges:!1},{debounceTime:1e3});class p{constructor({json:e,setJson:r,userId:n,fullscreenEditorType:i}){this.MAX_ENTRIES=5e3,this.numItems=e.numItems,this.userIds=e.userIds,this.setJson=r,this.fullscreenEditorType=i??"none",this.userId=n??"anonymous",this.cachedActions=this.initActions(),this.cachedQueries=this.initQueries()}addUsage(e,r){let n=this.getActions();n.addUsage(e)&&this.incrementTotalItems();let i=this.getQueries();i.addUsage(r,e)&&this.incrementTotalItems(),this.userIds[this.userId]={...this.userIds[this.userId],[this.fullscreenEditorType]:{actions:n.serialize(),queries:i.serialize()}},this.numItems>this.MAX_ENTRIES&&this.prune(),this.save()}prune(){let e=Object.entries(this.userIds).flatMap(([e,r])=>Reflect.ownKeys(r).flatMap(n=>{let i=r[n];if(!i)return[];let{actions:a,queries:o}=i,s=Object.entries(a).flatMap(([r,{timestamps:i}])=>({userId:e,editorType:n,action:r,timestamp:i[0]})),l=Object.entries(o).flatMap(([r,i])=>Object.entries(i).flatMap(([i,{timestamps:a}])=>({userId:e,editorType:n,action:i,query:r,timestamp:a[0]})));return s.concat(l)}));e.sort((e,r)=>e.timestamp-r.timestamp);let r=this.MAX_ENTRIES/2;for(let n=0;n<r;n++){let{userId:r,editorType:i,action:a,query:o}=e[n],s=this.userIds[r][i];s&&(void 0!==o?delete s.queries[o][a]:delete s.actions[a],this.userIds[r][i]=s,this.numItems-=1)}}incrementTotalItems(){this.numItems+=1}initActions(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.actions??{};return new c.l(e)}initQueries(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.queries??{};return new d.B(e)}getActions(){return this.cachedActions}getQueries(){return this.cachedQueries}save(){try{this.setJson({numItems:this.numItems,userIds:this.userIds}),m=this}catch(e){(0,a.x1)("error","Failed to save frecency data",e,{reportAsSentryError:!0})}}setMaxEntriesForTesting(e){(0,o.Lg)()&&(this.MAX_ENTRIES=e)}}let m=null;function h(){let e=i.zl.get(l.N).data,r=i.zl.get(s.u8);return m&&m.userId===e&&m.fullscreenEditorType===r||(m=new p({json:i.zl.get(u),setJson:e=>i.zl.set(u,e),userId:e,fullscreenEditorType:r})),{actions:m.getActions(),queries:m.getQueries()}}function _(){i.zl.set(u,{numItems:0,userIds:{}}),m=null}},887326:(e,r,n)=>{"use strict";var i=n(411855),a=n(188507),o=n(587670),s=n(86625),l=n(627776),c=n(517333),d=n(966712),u=n(886653),p=n(153234),m=n(28928),h=n(256975),_=n(738269);n(103907);var g=n(259927),f=n(324597),E=n(59181),y=n(483990);n(325469);var b=n(672517);n(756085),n(261607),n(12493);var I=n(875847),T=n(728325),v=n(283942),S=n(122983),w=n(369870);n(227944),n(678340);var A=n(428467),N=n(707465),C=n(284321),O=n(239671),L=n(279145),R=n(143678),P=n(507956),D=n(206074);n(47506);var k=n(374626),M=n(572206),F=n(376797),x=n(662275),U=n(237870),B=n(746806),V=n(144848);(0,U.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(x.AS())},[e]),[n,o]=(0,k.fp)(F.c);return i.createElement(B.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new M.Mi(0,0),onClose:r},i.createElement("div",{className:V.k,onMouseDown:e=>{e.stopPropagation()}},i.createElement("span",{className:V.P},"Debugger break in template execution"),i.createElement("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:n})))},"CodeConnectDebugModal"),n(931828);var G=n(335682);n(309798),n(99506);var H=n(848661),W=n(498606),K=n(218973),j=n(984871),z=n(977684);function Y(e){let[r,n]=i.useState(e.initialValue),o=i.useCallback(e=>{(0,H.gl)(e)||n(e.valueOf())},[n]),s=(0,a.wA)();return i.useEffect(()=>{(0,j.uw)({[e.configPropertyName]:r})},[r,e.configPropertyName]),i.createElement(K.Ht,{className:z.hF,"data-tooltip-type":W.Ib.TEXT,min:e.minVal,max:e.maxVal,bigNudgeAmount:e.bigNudgeAmount,smallNudgeAmount:e.smallNudgeAmount,"data-tooltip":e.propertyDescription,dispatch:s,value:r,onValueChange:o},i.createElement("span",{className:z.Pf},e.displayName))}(0,U.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(x.AS())},[e]);return i.createElement(B.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new M.Mi(0,0),onClose:r},i.createElement("div",{className:z.kL,onMouseDown:e=>{e.stopPropagation()}},i.createElement(Y,{configPropertyName:"minZoomPercentage",initialValue:j.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),i.createElement(Y,{configPropertyName:"zoomScaleOverlap",initialValue:j.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),i.createElement(Y,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:j.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),i.createElement(Y,{configPropertyName:"rebuildClustersZoomDelay",initialValue:j.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal"),n(965626),n(52354);var $=n(27087),q=n(973131),Z=n(585878),X=n(345581);class J extends Error{}async function Q({dispatch:e,fileKey:r,log:n=()=>{}}){try{n("Generating file version...");let i=(await q.m(r,"Exported to ML account","",e,!0))?.id;if(void 0===i)throw Error("undefined versionId");n(`Exporting file version ${i}...`);let{meta:{run_key:a}}=(await $.Ay.post(`/api/ml/export/file_version/${i}`)).data;n(`Waiting for run ${a}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:r,s3_uri:i}}=(await (0,$.Ay)({url:`/api/ml/export/status/${encodeURIComponent(a)}`})).data;if(r){n(`Export manifest is ready at ${i}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof J)return;n("Failed!"),n(`${e}`)}}(0,U.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(x.AS())},[e]),[n,o]=i.useState([]),s=(0,G.tS)();return i.useEffect(()=>{let n=!1,i=e=>{if(n)throw new J;o(r=>r.concat([e]))};return null===s?i("No open file"):Q({dispatch:e,fileKey:s,log:i}),()=>{n=!0,r()}},[r,e,s]),i.createElement(Z.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:r},i.createElement("div",{className:X.k},n.join("\n")))},"MLExportModal");var ee=n(193948);let et="preferences-menu",er=(0,S.ck)();class en extends p.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=p.C0(this,"keydown",e=>{(0,v.jr)(e,v.W0.NO)}),this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,y.A)(et)]}componentDidUpdate(e,r){if(super.componentDidUpdate(e,r),this.props.selectionToUpdate&&this.props.selectionToUpdate===o.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,f.k$)(e)||(0,f.gN)(e)||(0,f.id)(e)||!e.name||e.name!==et?(this.selectPreferencesMenu(),this.props.dispatch(_.ho({type:L.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(_.oB())}}menuItems(){return(0,E.p)({fileMenuArgs:{branchingActionsStatus:this.props.branchingActionsStatus,saveAsState:this.props.saveAsState,topLevelMode:this.props.appModel.topLevelMode,unreadCommentCount:this.props.unreadCommentCount,isOrgMember:this.props.isOrgMember,shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:this.props.pluginAndWidgetMenuArgs,additionalDebugItems:this.props.debugMenuItems,theme:this.props.theme,backToFileArgs:{shouldShowBackToFiles:(!er||er&&(0,w.MP)()&&!!(0,d.kc)().integ_zoom_allow_file_switching)&&!c.eD&&!(0,l.ce)(),isDisabled:!this.props.userStateLoaded},zoomArgs:{canZoomOut:this.props.canZoomOut,canZoomIn:this.props.canZoomIn},publishingModalArgs:{isPublishingModalDisabled:this.props.selectIsPublishingModalDisabled}})}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null;return i.createElement("div",{className:`${g.Dm}`},i.createElement(ei,{recordingKey:"mainMenu",ref:this.multilevelDropdownRef,menuItems:this.menuItems(),onKeyDown:this.onKeyDown,controlledByID:this.props.controlledByID,"aria-labelledby":this.props["aria-labelledby"],activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0}),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:this.props.selectedView.editorType===O.nT.Design,lean:this.props.isUI3?"right":void 0,...this.props}))}}en.displayName="FullscreenMainMenu",(0,a.Ng)((e,r)=>{let n={view:"recentFiles"},i=e.openFile;i&&i.folderId&&(0,I.N5)(e.folders,i.folderId)&&(n={view:"folder",folderId:i.folderId});let a=e.selectedView;return{appModel:e.mirror.appModel,userStateLoaded:e.userStateLoaded,selectedView:a,recentlyUsedPlugins:r.recentlyUsedPlugins,backToFilesHref:(0,N.Np)(e,n),saveAsState:e.saveAsState,dropdown:r.dropdown,branchingActionsStatus:r.branchingActionsStatus,memoryWarningLevel:r.memoryWarningLevel,debugMenuItems:r.debugMenuItems,selectionToUpdate:e.dropdownShown?.data?.selectionToUpdate,theme:e.theme.themePreference,unreadCommentCount:r.unreadCommentCount,canZoomIn:r.canZoomIn,canZoomOut:r.canZoomOut,isOrgMember:(0,A.canMemberOrg)(e.currentUserOrgId,e),isLimitedDevMode:(0,P.$A)(e.selectedView)&&!(0,h.tn)(e),selectIsPublishingModalDisabled:(0,C.LD)(e)}})(en);class ei extends i.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,r)=>{s.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,f.Dz)(e),e.args,this.props.dispatch,r),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(m.n.set({message:e.loadingIndicatorString,callback:()=>{T.VU.get(n,e.source??"menu",e.args)(r)}})):T.VU.get(n,e.source??"menu",e.args)(r)}})},this.transformMenuItems=(0,u.xx)(e=>(0,ee.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(_.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?i.createElement(b.fu,{name:R.e0.EDITOR_MENU},i.createElement(D.j,{ref:this.multilevelDropdownRef,items:e,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,activatePathOnMount:this.props.activatePathOnMount,lean:this.props.lean,...this.props})):null}}ei.displayName="FullscreenMultilevelDropdown"},176857:(e,r,n)=>{"use strict";n.d(r,{ou:()=>E});var i=n(36867),a=n(38329),o=n(966712),s=n(218549),l=n(829486),c=n(419527),d=n(335218);class u{constructor(e,r){this.factors=e,this.opts=r;let n=e.reduce((e,r)=>e+r.weight,0);if(1!==n)throw Error(`Total weight must be 1, but was ${n}`)}scoreFactor(e,r,n){return n.normalizedScore(e,r,this.opts)*n.weight}score(e,r){return this.factors.reduce((n,i)=>{let a=i.normalizedScore(e,r,this.opts);if(a<0||a>1)throw Error(`Normalized score for '${i.name}' must be between 0 and 1, but was ${a}`);return n+this.scoreFactor(e,r,i)},0)}sort(e,r,n){return this.score(e,r)>this.score(e,n)?-1:1}debugData(e,r){let n=this.score(e,r),i=`- Total Score: ${n.toFixed(2)}`;return{score:n,details:["Weighted sort (w=weight, s=score):",i,...this.factors.sort((n,i)=>this.scoreFactor(e,r,i)-this.scoreFactor(e,r,n)).map(n=>{let i=n.normalizedScore(e,r,this.opts),a=n.debugInfo&&n.debugInfo(e,r,this.opts)||"";return`- ${n.name}: w=${n.weight} x s=${i.toFixed(2)} = ${this.scoreFactor(e,r,n).toFixed(2)} ${a}`})].join("\n")}}}let p=new s.q(1e3);function m(e,r,n){let a=r.fullscreenMenuAction.stringMatchedAgainst,o=r.fullscreenMenuAction.stringMatchScore;if(!a||!o)return 0;let s=p.get(a);if(!s){let e=new i.A(a,n.acceptsUnicode).matchAgainstText(a);p.set(a,e?.score??1),s=e?.score??1}let l=Math.max(s,o);return o/l}function h(e,r){let n=r.fullscreenMenuAction.substringMatchedAgainst,i=r.fullscreenMenuAction.substringMatchScore;if(!n||!i)return 0;let a=new l.dU(n).perfectScore();return 0===a?0:i/a}let _={normalizedScore:(e,r,n)=>Math.max(m(e,r,n),h(e,r)),weight:.4,name:"String match",debugInfo(e,r,n){let i=m(e,r,n),a=h(e,r);return i>0||a>0?`Fuzzy match: ${i.toFixed(2)}, Synonym match: ${a.toFixed(2)}`:""}},g={normalizedScore:(e,r)=>r.fullscreenMenuAction.tags?.includes(c.$.AI)?1:0,weight:.1,name:"isAI"},f={normalizedScore:(e,r)=>r.fullscreenMenuAction.disabled?0:1,weight:.3,name:"isEnabled"};function E({actions:e,queries:r,acceptsUnicode:n="ja"===a.D.getState().user?.locale||!!(0,o.kc)().fuzzy_escape_regexp}){return new u([_,{normalizedScore(r,n){var i;let a=(0,d.n)(n.fullscreenMenuAction);return(i=e.data(a)?.score()??0)/(i+1e3)},weight:void 0!==(0,o.tl)().action_frecency_weight?(0,o.tl)().action_frecency_weight:.1,name:"Action Frecency"},{normalizedScore(e,n){var i;let a=(0,d.n)(n.fullscreenMenuAction);return(i=r.data(e,a)?.score()??0)/(i+1e3)},weight:void 0!==(0,o.tl)().query_frecency_weight?(0,o.tl)().query_frecency_weight:.1,name:"Query Frecency"},g,f],{acceptsUnicode:n})}},631378:(e,r,n)=>{"use strict";n.d(r,{x:()=>y});var i=n(634832),a=n(220848),o=n.n(a),s=n(36867),l=n(966712),c=n(829486),d=n(324597),u=n(586211),p=n(279145),m=n(169006),h=n(132572),_=n(824767),g=n(193948),f=n(189431),E=n(176857);class y{constructor(e,r,n,i){for(let a of(this.searchMap={},this.searchMapKeys=[],this.includeDisabled=!1,this.acceptsUnicode=!1,this.queryStringMap={},this.includeDisabled=!!(i&&i.includeDisabled),this.acceptsUnicode=!!(i&&i.acceptsUnicode),n.forEach(n=>this.addFigmaMenuItemsToSearchMap(e,r,n)),this.searchMapKeys=Object.keys(this.searchMap),this.searchMapKeys)){let e=this.searchMap[a],r=e.queryString?`${e.queryString} ${a}`:a;this.queryStringMap[r]=e}}isDisabled(e,r){return r.disabled?r.disabled:!(r.name||(0,p.Yh)(e,r.action)||r.quickAction?.alwaysEnabled)}addFigmaMenuItemsToSearchMap(e,r,n){if(!n||(0,d.k$)(n)||(0,d.gN)(n)||(0,d.id)(n)||!(0,g.UN)(n,{isDesktopMenu:!1,isReadOnly:e.isReadOnly,isSearching:!0,selectedView:r}))return;let a="children"in n;if(!(0,d._o)(n)||a||n.hideForQuickCommand||this._addToIndexInternal(n),"plugins-menu"!==n.name&&"widgets-menu"!==n.name&&a)for(let a of((0,i.assertDev)(null!=n.children,"this should be the type of menu groups that has FullscreenMenuItem as children"),n.children))this.addFigmaMenuItemsToSearchMap(e,r,a)}_addToIndexInternal(e){let{itemDisplayText:r,searchItem:n}=function(e){let r=(0,m.E)(e),n={fullscreenMenuAction:e,queryString:"",searchKey:r};if("plugins-menu-item"===e.name){let r=e.extensionSearchString||"";n.searchKey=r}return e.isRepairCommand&&(0,l.kc)().internal_only_debug_tools&&!(0,h.h8)()&&(n.queryString="repair"),e.searchSynonyms&&!(0,h.h8)()&&(n.queryString=[n.queryString,...e.searchSynonyms].join(" ")),{itemDisplayText:r,searchItem:n}}(e);this.searchMap[r]=n}getItem(e,r){if(!(r in this.searchMap))return;let n={...this.searchMap[r].fullscreenMenuAction};return n.disabled=this.isDisabled(e,n),n}_buildSearchResult(e,r,n,i){let a={...r},o={...a.fullscreenMenuAction};return o.stringMatchedAgainst=n?.text||"",o.substringMatchScore=i?.score||0,o.substringMatchedAgainst=i?.text||"",o.stringMatchScore=this._getStringMatchScore(o,n),o.popularityScore=(0,u.a)(o.action),o.disabled=this.isDisabled(e,o),{...a,fullscreenMenuAction:o}}_getStringMatchScore(e,r){return void 0!==e.isLowPriorityMatch&&e.isLowPriorityMatch?0:r?.score||0}_searchByFuzzyMatchAndSubstringMatch(e,r){if(!r)return[];let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let i=new c.dU(r),a=[];for(let[r,s]of Object.entries(this.queryStringMap)){let l=n.matchAgainstText(r),d=l?.score||0,u=[];for(let e of(u.push(i.matchAgainstText(r,c.cT.VISIBLE)),s.fullscreenMenuAction.searchSynonyms||[])){let r=i.matchAgainstText(e,c.cT.HIDDEN);u.push(r)}let p=o()(u,e=>e.score),m=p?.score||0;(d>0||m>0)&&a.push(this._buildSearchResult(e,s,l,p))}return a}_searchByFuzzyMatch(e,r){let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let i=[],a=n.matchAgainst(Object.keys(this.queryStringMap));if(a.length)for(let r of a){if((0,h.h8)()&&r.score<1)continue;let n={...this.queryStringMap[r.text]};i.push(this._buildSearchResult(e,n,r))}return i}_searchForSearchItem(e,r){if(!r)return[];let n=[];n=(0,h.h8)()?this._searchByFuzzyMatchAndSubstringMatch(e,r):this._searchByFuzzyMatch(e,r);let i=(0,h.h8)()?(0,E.ou)({...(0,_.x0)(),acceptsUnicode:this.acceptsUnicode}):f.r;return n=n.sort((e,n)=>i.sort(r,e,n)),this.includeDisabled||(n=n.filter(e=>!e.fullscreenMenuAction.disabled)),n}search(e,r){return this._searchForSearchItem(e,r).map(e=>e.fullscreenMenuAction)}searchIncludeKey(e,r){return this._searchForSearchItem(e,r).map(e=>[e.searchKey,e.fullscreenMenuAction])}list(e){let r=this.searchMapKeys.map(r=>{let n={...this.searchMap[r].fullscreenMenuAction};return n.popularityScore=(0,u.a)(n.action),n.disabled=this.isDisabled(e,n),n});return r.sort((e,r)=>(r.popularityScore||0)-(e.popularityScore||0)),r}map(e){let r={};return this.searchMapKeys.forEach(n=>{let i={...this.searchMap[n].fullscreenMenuAction};i.popularityScore=(0,u.a)(i.action),i.disabled=this.isDisabled(e,i),r[i.name||i.action||n]=i}),r}}},354235:(e,r,n)=>{"use strict";n.d(r,{d:()=>F}),n(137592);var i=n(411855),a=n(109388),o=n(188507),s=n(243742),l=n(587670),c=n(534611),d=n(707458),u=n(776250),p=n(91408),m=n(886653),h=n(572206),_=n(809831),g=n(356390),f=n(617453),E=n(373119),y=n(843495),b=n(99506),I=n(100197),T=n(651963),v=n(433861),S=n(860168);let w=new Set(["DOCUMENT","CANVAS","NONE"]),A=(0,p.jz)(S.y9S),N=(0,p.jz)(S.IuL),C=(0,p.jz)(S.LQy),O=(0,p.jz)(S.MJh),L=(e,r,n)=>n?e===b._Y.WHITEBOARD?r?C:N:r?O:0:0,R=(0,m.xx)((e,r,n,i,a)=>{let{x:o,y:s,offsetX:l,offsetY:c,width:d,height:u,zoomScale:p}=e;r&&(o+=A,s+=A,l+=A/p/2,c+=A/p/2,d-=A,u-=A,d=Math.max(d,0),u=Math.max(u,0));let m=L(i,a,n);return u-=m,u=Math.max(u,1),c-=m/p/2,{...e,x:o,y:s,offsetX:l,offsetY:c,width:d,height:u}}),P=e=>{let r=e.split(",");if(r.length)return r[0].replace(/[\[\]\s]/g,"")},D=e=>e.replace(/[\[\]\s]/g,"").split(",");function k(e,r,n){let i;let a=l.glU.getActiveCommentAnchorData();i=n&&a&&a.stablePath!==c.x7&&a.stablePath.length>0?a.stablePath:l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath;let o={canvasPosition:e,pageId:r,viewport:g.Y5.getViewportInfo(),createdIn:window.FigmaMobile?"mobileViewer":"fullscreen"};if(null==i||i===c.x7)return o;let s=l.Egt.getBoundsForStablePath(i);if(!s&&n&&((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!0},{forwardToDatadog:!0}),s=l.Egt.getBoundsForStablePath(i)),!s)return((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!1},{forwardToDatadog:!0}),r)?{...o,nodeId:r,inFrame:!1,stablePath:[r]}:o;let d={x:s.x,y:s.y},p=h.Mi.subtract(e,d),m=P(i);return{...o,nodeId:m,nodeOffset:p,inFrame:r!==m,stablePath:D(i)}}function M(e){let r=(0,I.J2)((0,f.UK)().renderRulers),n=(0,o.d4)(e=>e.mirror.appModel.showUi),u=(0,_.lg)(),p=i.useRef(g.Y5.getViewportInfo()),[m,h]=i.useState(g.Y5.getViewportInfo()),E="ui3"===(0,s.DP)().version;!function(e){let r=(0,o.d4)(e=>"prototype"===e.selectedView.view||"communityHub"===e.selectedView.view);i.useEffect(()=>{!r&&g.Y5.isReady()&&(e(g.Y5.getViewportInfo()),(0,T.H)())},[e,r]),i.useEffect(()=>{let r=r=>{(0,a.flushSync)(()=>{e(r)})};return g.Y5.viewport.on("onSetViewport",r),()=>{g.Y5.viewport.removeListener("onSetViewport",r)}},[e])}(i.useCallback(e=>{p.current=e,h(e)},[h]));let b=i.useMemo(()=>({getViewportInfo:()=>R(p.current,r,n,u,E),getRawViewportInfo:()=>p.current,getCommentsWrapperOffset:e=>({x:0,y:1}),setCanvasSpaceCenter:e=>l.glU.setCanvasSpaceCenter(e.x,e.y),setZoomScale:(e,r)=>l.glU.setCanvasZoomScale(r),setHovering:e=>{if(!e){(0,y.Uc)(c.AD);return}let r=l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath,n=r?d.q.instance.getFromStablePath(D(r)):null;n&&!w.has(n.type)?(0,y.Uc)(n.guid):(0,y.Uc)(c.AD)},setCurrentPageIdAsync:async e=>await d.q.instance.setCurrentPageFromNodeAsync(e),pageIdForNodeId:e=>l.glU.getPageIdFromNode(e),getCommentDestinationForCanvasPosition:k,getValidCommentsRect:()=>null}),[r,n,u,E]),S=i.useMemo(()=>new v.f5(b,{...v.Pe,isGetViewportAtomic:!0}),[b]);return i.createElement(v.kw.Provider,{value:S},i.createElement(v.aF,{latestViewport:m},e.children))}function F(e){return(0,E.q)()?i.createElement(M,null,e.children):i.createElement(i.Fragment,null,e.children)}},286723:(e,r,n)=>{"use strict";n.d(r,{DS:()=>V,Qp:()=>K,R$:()=>W,WD:()=>j,_W:()=>M,aF:()=>G,kh:()=>k,ob:()=>D,q0:()=>F,r1:()=>x,t$:()=>U});var i=n(411855),a=n(188507);n(296853);var o=n(675678),s=n(587670),l=n(707458),c=n(203264),d=n(776250),u=n(91408),p=n(320063);n(966712);var m=n(374626),h=n(38580),_=n(915440),g=n(711525),f=n(776621),E=n(680001),y=n(27315),b=n(493323),I=n(939863),T=n(413145),v=n(970516),S=n(335682),w=n(99506),A=n(279453),N=n(216158),C=n(694517),O=n(800876),L=n(585878),R=n(146935),P=n(630171);let D={alwaysPan:!0,maxScale:1},k={alwaysNavToSimilarViewport:!0},M=300,F=.5,x=4;function U(e,r){let n=(0,a.d4)(e=>e.openFile?.key),i=(0,a.d4)(e=>e.mirror.appModel.currentPage),o=r??i;return!!n&&!!o&&!!e&&(0,C.cn)(n,o,e)===m.zl.get(C.tP)}O.mg.COMPARE_THUMBNAIL;let B=(0,h.eU)("");function V(e){let r=new l.q(s.juq.LIVE_FILE),n=(0,c.ei)(e,!1,r),u=n?.createdAt||null,h=u?new Date(u).toISOString():void 0,E=n?.lastEditedAt||null,y=E?new Date(E&&E%6e4==0&&E<17061264e5?E+6e4:E).toISOString():void 0,b=c.E1()?.toISOString(),I=(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.filterStatusVersions),v=function(e){let r=(0,S.tS)(),n=function(e){let r=(0,S.q5)(),n=r?.key,a=(0,_.Rs)(A.WND,{nodeId:e,fileKey:n??""},{enabled:!!n&&!!e}),[s,l]=(0,m.fp)(B);return(0,p.h)(()=>l("")),i.useMemo(()=>{if("loaded"===a.status){let r=a.data.file;if(r.status===g.tT.Error)return(0,f.$D)(o.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: File error = "+r.error)),null;let n=r.data?.devModeActivity;if(!r.data||!n||0===n.length)return[];let i=n.filter(e=>e.activityType===w.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime()),c=`${e} - ${i.length}`;return e&&c!==s&&(l(c),(0,d.sx)("dev_mode.activity.fetch_activity_log",{numEntries:i.length},{forwardToDatadog:!0})),i}return"errors"===a.status?((0,f.$D)(o.FigmaTeam.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: "+JSON.stringify(a.errors))),null):"loading"===a.status?"loading":null},[a,s,e,l])}(e??""),a=e?("loading"===n?null:n)?.map(e=>e.version?.id).filter(T.t):void 0,s=(0,C.kT)({fileKey:r,pageSize:200,versionIds:a}),[l]=(0,N.IT)(s,{enabled:!!r});return i.useEffect(()=>{"errors"===l.status&&(0,f.$D)(o.FigmaTeam.FEEDBACK,Error(`Version fetch in CC error: ${l.errors}`))},[l.status]),{versions:l.data||[],requestStatus:"loading"===n?"loading":l.status}}(I?e:void 0),O=i.useMemo(()=>I?v.versions:function(e,r,n,i){let a=[],o=!1;function s(){if(a.length>0){let e=a[a.length-1];e.frameCreated=!0,e.frameEdited=void 0}}for(let l of e){let e={...l};if(e.canvas_url&&(!o&&i&&e.created_at&&e.created_at<i&&(o=!0,e.lastViewed=!0),!r||!(e.edited_at>r))){if(n&&e.edited_at<n)return s(),a;a.push(e)}}return s(),a}(v.versions,y,h,b),[v.versions,y,h,b,I]),{requestStatus:L}=v;return{versions:O,versionsQueryLoaded:"loaded"===L||"disabled"===L}}function G({title:e,onClose:r,children:n}){let a=(0,u.jz)(R.compareChangesModalWidth);return i.createElement(L.XV,{title:e,fixedCenter:!0,disableClickOutsideToHide:!0,onClose:r,headerClassName:P.wx,containerClassName:P.ik,maxWidth:a,innerContainerClassName:P.Hb,focus:!0},n)}function H(e){return!!e&&e.hasOwnProperty("getImage")}function W(e){let{view:r,opacity:n,Overlay:a,hideNoImageText:o,header:s}=e,l=()=>void 0!==n?{opacity:n}:{},c=i.useMemo(()=>H(e.image)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||x},[e]);return i.createElement("div",{className:r===E.Ss.SIDE_BY_SIDE?P.KJ:P.DF},!!s&&i.createElement("div",{className:P.Lg},s),!c&&i.createElement("div",{className:P.$0},!o&&(0,I.tx)("collaboration.feedback.compare_changes_modal.no_image_found")),H(e.image)?i.createElement(y.Nf,{className:P.Sl,style:{...l()},image:c,Overlay:a}):c&&i.createElement(y.ec,{className:P.Sl,style:{...l()},image:c,Overlay:a}))}function K(){return i.createElement("div",{className:P.GE},i.createElement(b.qc,null))}function j(e,r){let n=e?.toString();n&&r(v.lW({stringToCopy:n}))}},881512:(e,r,n)=>{"use strict";n.d(r,{xX:()=>l,$_:()=>c});var i=n(411855);n(188507),n(587670),n(776250);var a=n(181912);n(966712),n(493323),n(574176),n(46481);var o=n(939863);n(694517),n(498606);var s=n(558867);function l(e,r=!1){let n=(0,a.A)(new Date),i=(0,a.A)(e);return i.isSame(n,"day")?(0,o.t)("collaboration.feedback.time_hour_minutes",{time:i.toDate()}):i.isSame(n,"year")?(0,o.t)("collaboration.feedback.time_date_minutes_without_year",{time:i.toDate()}):r?(0,o.t)("collaboration.feedback.time_date_minutes",{time:i.toDate()}):(0,o.t)("collaboration.feedback.date",{time:i.toDate()})}function c(e,r){return e?i.createElement(s.Ro,{size:r,entity:{img_url:e}}):i.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"})}n(227795)},236192:(e,r,n)=>{"use strict";n.d(r,{Ah:()=>e$,Cr:()=>eX,YL:()=>eZ,aS:()=>e8,jP:()=>eJ,ur:()=>eq});var i=n(411855),a=n(188507),o=n(634832),s=n(675678),l=n(603953),c=n(155543),d=n(575382),u=n(841368),p=n(326331),m=n(743717),h=n(630819),_=n(397863),g=n(13583),f=n(587670),E=n(629019),y=n.n(E),b=n(776250),I=n(20848),T=n(91408),v=n(966712),S=n(498750),w=n(711525),A=n(183297),N=n(563706),C=n(563042),O=n(153234),L=n(522739),R=n(776621),P=n(268537),D=n(946689),k=n(564577),M=n(493323),F=n(574176),x=n(46481),U=n(762638),B=n(881388),V=n(939863),G=n(392592),H=n(809840),W=n(641655),K=n(598393),j=n(165514),z=n(944682),Y=n(738269),$=n(293017),q=n(662275),Z=n(188276),X=n(650769),J=n(259927),Q=n(483990),ee=n(101505),et=n(672517),er=n(385111),en=n(226055),ei=n(974105),ea=n(396226),eo=n(27703),es=n(356390),el=n(122983),ec=n(243987),ed=n(428467),eu=n(262151),ep=n(206193),em=n(694517),eh=n(300874),e_=n(239671),eg=n(945020),ef=n(851363),eE=n(498606),ey=n(779086),eb=n(507956),eI=n(846456),eT=n(881512),ev=n(1691),eS=n(60088),ew=n(720488),eA=n(227795),eN=n(129531),eC=n(524513),eO=n(798661),eL=n(860168),eR=n(730764),eP=n(321385),eD=n(548832),ek=n(548603),eM=n(796529),eF=n(347196),ex=n(949207),eU=n(432023),eB=n(95779),eV=n(540206),eG=n(501191),eH=n(660164),eW=n(124784),eK=n(120118),ej=n(950142);let ez=(0,T.jz)(eL.uj0),eY=(0,T.jz)(eL.QBm);function e$(e){return e===f.m1T.HISTORY||e===f.m1T.COMPARE_CHANGES||e===f.m1T.DEV_HANDOFF_HISTORY}function eq(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,R.x1)("version","Verison history got user without a handle",{item:e}),(0,R.$D)(s.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function eZ(e){switch(e.item.view){case"branch_child_create":return(0,V.tx)("collaboration.feedback.new_branch_created");case"branch_child_merge":return(0,V.tx)("collaboration.feedback.branch_merged");case"branch_child_update":return(0,V.tx)("collaboration.feedback.branch_updated_from_main_file");case"branch_create":return(0,V.tx)("collaboration.feedback.branch_created");case"branch_merge":return(0,V.tx)("collaboration.feedback.branch_merged_into_main_and_archived");case"branch_update":return(0,V.tx)("collaboration.feedback.updated_from_main");case"branch_archive":return(0,V.tx)("collaboration.feedback.branch_archived");case"branch_restore":return(0,V.tx)("collaboration.feedback.branch_restored");case"file_restore":if(!(0,v.kc)().version_history_restore_label)break;if(e.item.label)return(0,V.tx)("collaboration.feedback.version_restored_label",{label:e.item.label});return(0,V.tx)("collaboration.feedback.version_restored")}return i.createElement(i.Fragment,null,eq(e.item))}function eX(e){let{time:r}=e,n=i.useMemo(()=>(0,eT.xX)(r,!0),[r]),{onChange:a}=e;return i.useEffect(()=>{a&&a(n)},[a,n]),i.createElement(i.Fragment,null,n)}class eJ extends O.uA{constructor(e){super(e),this.descriptionRef=i.createRef(),this.onClick=O.cZ(this,"click",()=>{setTimeout(()=>{this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect&&this.props.onSelect(this.props.versionId)},300)}),this.disabledOnClickHandler=O.cZ(this,"click",()=>{setTimeout(()=>{if((0,b.sx)("CTA Clicked",{name:"Disabled Version History",teamId:this.props.team?.id}),this.props.isStarterTeam){if(!this.props.team){(0,R.$D)(s.FigmaTeam.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(q.to({type:eN.DV,data:{team:this.props.team,editorType:this.props.editorType,resource:eh.Bi.VERSION_HISTORY,currentPlan:ea.F.Plan.STARTER,upsellPlan:ea.F.Plan.PRO}}))}},300)}),this.onMouseEnter=e=>{let r=this.descriptionRef.current;r&&r.scrollHeight>r.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=e=>{this.setState({hovered:!1})},this.onDoubleClick=O.cZ(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onMenuClick=O.cZ(this,"contextmenu",e=>{this.props.onSavepointMenuCallback&&this.props.versionId!==em.V_&&this.props.onSavepointMenuCallback(this.props.versionId,this.props.checkpointKey||"",e)}),this.onBranchClick=O.cZ(this,"click",e=>{e.stopPropagation(),this.props.dispatch(Y.$T({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:e_.nT.Design}))}),this.onCompareClick=O.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrentClick=O.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({expandedDescription:!this.state.expandedDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,r)=>i.createElement("div",{className:eR.Lw,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},r),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let r=this.props.fileByKey[this.props.branchFileKey];return r&&!r.deleted_at?i.createElement("span",{className:eR.qC,onClick:this.onBranchClick},e||(r.name??(0,V.tx)("collaboration.feedback.branch"))):i.createElement("span",{className:eR.at},r?.name??(0,V.tx)("collaboration.feedback.branch"))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={expandedDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}componentDidUpdate(e,r){super.componentDidUpdate(e,r);let n=this.props.description,i=e.description;n!==i&&(this.state.expandedDescription&&n&&i&&n.length>=i.length||this.setState({expandedDescription:!1}))}render(){let e,r,n;let a=this.descriptionRef.current,o=!!(a&&(this.state.expandedDescription||a.scrollHeight>a.clientHeight||this.state.hovered)&&!this.props.isActive),s=(0,eT.$_)(this.props.userUrl,15),p=this.props.versionId===em.V_,m=!p&&!(0,ey.AI)({view:this.props.view??"file_default",label:this.props.label})&&!this.props.isLinked,h=this.props.version?.frameCreated||this.props.version?.frameEdited||this.props.version?.lastViewed,_=m&&!h,g=this.props.isPreview?eR.qv:eR.AS;this.props.disabled&&!this.props.isStarterTeam&&(g=eR.Y0+" "+g),p&&(g=eR.j$+" "+g),(this.props.isActive||this.props.isComparing)&&(g=eR.SU+" "+g),this.props.onSelect&&(g=eR.kD+" "+g);let f=this.props.isActive&&!p?eR.Nh:this.state.expandedDescription?eR.lV:o?eR.LF:eR.h_,E=this.state.expandedDescription?(0,V.tx)("collaboration.feedback.show_less"):(0,V.tx)("collaboration.feedback.show_more"),y=[],b=0;if(this.props.participatingImagesDict){let n=Object.keys(this.props.participatingImagesDict).length;for(let[a,o]of Object.entries(this.props.participatingImagesDict))if(e=(0,eT.$_)(o,15),r=this.generateEditorName(b,a),y.push(i.createElement("span",{className:eR.zL,key:a},(!this.props.first||"current_version"!=this.props.versionId)&&e,r)),++b>4&&b<n&&!this.props.isActive){y.push(i.createElement("div",{className:eR.lw,key:"number-additional-editors"},(0,V.tx)("collaboration.feedback.num_editors_number_editor_count_more",{numEditors:n-Number(b)})));break}}else this.props.user&&this.props.userUrl?(e=(0,eT.$_)(this.props.userUrl,15),r=this.generateEditorName(b,this.props.user),y.push(i.createElement("span",{className:eR.zL,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&e,r))):_&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&y.push(i.createElement("div",{className:eR.EB,key:"figma-system"},this.props.user));let I=eR.N5;this.props.hideLine?I="":this.props.first&&this.props.last?I=eR.y5:this.props.first?I=eR.pi:this.props.last&&(I=eR.p8);let T=this.props.isUI3?void 0:s,v=null,S="text"in this.props?this.props.text.toLowerCase():void 0;_||(T="components published"===S||"published to community hub"===S?i.createElement(x.U,{className:eR.mk,svg:eW.A,useOriginalSrcFills_DEPRECATED:!0},i.createElement(l.z,null)):i.createElement(ev.D,null)),_&&this.props.last&&(T=i.createElement(ev.D,null));let w=this.props.isUI3&&this.props.devModeActivity&&this.props.devModeActivity.length>0;if(w){let{status:e,nodes:r}=(0,j.D0)(this.props.devModeActivity);v=i.createElement(eO.e,{status:e,nodes:r}),T=i.createElement(eO.M,{status:e})}if(this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":T=i.createElement(x.U,{className:eR.F4,svg:eF.A},i.createElement(c.o,null)),v=(0,V.tx)("collaboration.feedback.branch_child_create",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(I=eR.zj),this.props.last&&(I=this.props.isUI3?"":eR.JE);break;case"branch_child_merge":T=i.createElement(x.U,{className:eR.Wi,svg:eM.A},i.createElement(d.C,null)),v=(0,V.tx)("collaboration.feedback.merged",{link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":T=i.createElement(ev.D,null),v=(0,V.tx)("collaboration.feedback.branch_child_update",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(I=eR.zj),this.props.last&&(I=this.props.isUI3?"":eR.JE);break;case"branch_merge":T=i.createElement(x.U,{className:eR.mq,svg:eV.A,useOriginalSrcFills_DEPRECATED:!0},i.createElement(d.C,null)),v=(0,V.tx)("collaboration.feedback.branch_merge",{link:this.generateBranchLink((0,V.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":T=i.createElement(x.U,{className:eR.VO,svg:ek.A},i.createElement(c.o,null)),v=(0,V.tx)("collaboration.feedback.branch_created");break;case"branch_update":T=i.createElement(x.U,{className:eR.F4,svg:eF.A},i.createElement(c.o,null)),v=(0,V.tx)("collaboration.feedback.branch_updated_from",{link:this.generateBranchLink((0,V.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":T=i.createElement(x.U,{className:eR.lf,svg:eD.A},i.createElement(l.z,null)),v=(0,V.tx)("collaboration.feedback.branch_archived");break;default:T=i.createElement(ev.D,null)}let A=[];this.props.version?.frameCreated&&A.push(this.props.isSection?(0,V.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,V.tx)("collaboration.feedback.compare_changes_modal.frame_created")),this.props.version?.lastViewed&&A.push((0,V.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you")),m&&!_&&this.props.time?A.push(i.createElement("div",{className:eR.IF},i.createElement(eX,{time:this.props.time}))):_&&this.props.time?A.push(this.renderTime(this.props.time,eR.Ov,this.props.showCompareChanges)):"displayText"in this.props?A.push(this.props.displayText):A.push(this.props.text),this.props.isUI3&&this.props.isComparing&&!this.props.isComparingLoading&&!p&&(n=i.createElement("div",{className:eR.UY},i.createElement("div",{className:eR.sh},A[0]),i.createElement(F.B,{svg:eP.A,className:eR.KD}),i.createElement("div",{className:eR.$D},(0,V.tx)("collaboration.feedback.current_file"))));let N=i.createElement(i.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?i.createElement("div",{className:eR.RI,dir:"auto"},v):w?i.createElement("div",{className:eR.Pf,dir:"auto"},v):n?i.createElement("div",{className:eR.Pf,dir:"auto"},n):i.createElement("div",{className:eR.Pf,dir:"auto"},A[0])),L=(0,C.$J)(this.props.description),R=y.length>0&&i.createElement("div",{className:eR.VM},y),P=!m&&this.props.time&&i.createElement("span",{className:eR.DS,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,eT.xX)(this.props.time)}," ",this.props.isLinked?i.createElement(eX,{onChange:this.setFormattedTime,time:this.props.time}):i.createElement(k.h1,{onChange:this.setFormattedTime,date:this.props.time})),D=A.length>1||L||o||R||P,U=i.createElement(i.Fragment,null,A.length>1&&i.createElement("div",{className:eR.HK},A.slice(1).map((e,r)=>i.createElement("div",{className:eR.Pf,dir:"auto",key:r},e))),(!this.props.isUI3||L)&&i.createElement("div",{className:f,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},L),o&&i.createElement("div",{className:eR.B0,onClick:this.props.disabled?void 0:this.toggleSeeMore},i.createElement("div",{className:eR.yT},E)),this.props.isUI3?i.createElement(i.Fragment,null,R,P,this.props.rowBodyFooter||!P&&(R||a)&&i.createElement("div",null)):i.createElement("div",null,R,P,this.props.rowBodyFooter)),B=this.props.isActive&&this.props.onSavepointMenuCallback&&!p&&i.createElement(eA.K0,{onClick:this.props.disabled?void 0:this.onMenuClick,className:eR.Wh,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.more_options"),recordingKey:O.Pt(this.props,"versonContext")},i.createElement(x.U,{svg:eB.A},i.createElement(u.J,null))),G=this.props.onHoverMenuCallback&&!this.props.onSavepointMenuCallback?i.createElement(eA.K0,{onClick:this.props.onHoverMenuCallback,className:this.props.forceShowHoverMenu?eR.xL:eR.Gb,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.more_options"),recordingKey:O.Pt(this.props,"versonContextHover")},i.createElement(x.U,{svg:eB.A},i.createElement(u.J,null))):null,H=i.createElement("button",{onClick:this.onCompareClick,className:eR.kr},(0,V.tx)("collaboration.feedback.compare")),W=i.createElement("button",{onClick:this.onCompareCurrentClick,className:eR.kr},(0,V.tx)("collaboration.feedback.compare")),K=i.createElement("button",{onClick:this.props.onDoneComparingClick,className:eR.kr},(0,V.tx)("collaboration.feedback.done_version_history"));return i.createElement(i.Fragment,null,(!_||this.props.showAutosaves)&&i.createElement("div",{className:g,ref:this.ref,onClick:this.props.disabled?this.disabledOnClickHandler:this.onClick,onMouseEnter:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseLeave,onContextMenu:this.props.disabled?void 0:this.onMenuClick,onDoubleClick:this.props.disabled&&this.props.isStarterTeam?void 0:this.onDoubleClick,"data-testid":"version-row"},!this.props.isUI3&&i.createElement("div",{className:I}),i.createElement("div",{className:_?eR.RV:eR.mP},i.createElement("div",{className:eR.Tc},i.createElement("div",{className:D?eR.eF:eR.nw,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},this.props.iconOverride?this.props.iconOverride(i.createElement("div",{className:I})):this.props.isUI3?i.createElement("div",{className:eR.Gl},i.createElement("div",{className:I}),T):T,this.props.isUI3?i.createElement("div",{className:eR.B_},i.createElement("div",{className:eR.eP},N,U),B,this.props.onHoverMenuCallback&&G,this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&p&&W,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&!p&&!this.props.isComparing&&H,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&K,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&this.props.isComparingLoading&&!p&&!this.props.isComparing&&i.createElement("div",{className:eR.Ob},i.createElement(M.kt,null))):N),!this.props.isUI3&&B,!this.props.isUI3&&G),!this.props.isUI3&&U)))}renderTime(e,r,n){let a=i.createElement(eX,{time:e,onChange:this.setFormattedTime});return i.createElement("div",{className:r},a)}getLabelRightPosition(e){return e?"65px":"35px"}}function eQ({shouldShowUpgradeLink:e,startUpgrade:r,hasRestrictedVersions:n}){let a=er.h.useTrackingContext({trigger:ep.b.HISTORY_UPSELL});return i.createElement(et.fu,{name:"Version History Paywall Panel",properties:{...a}},i.createElement("div",{className:eR.NM},i.createElement(H.E,{fontWeight:"semi-bold"},(0,V.tx)(n?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history")),i.createElement("div",null,e?i.createElement(H.E,null,(0,V.tx)("upsell.history.upsell_upgrade_description",{upgradeLink:i.createElement(D.Ph,{className:eR.s6,onClick:r,trackingProperties:{trackingDescriptor:ee.c.UPGRADE,upsellSource:ep.b.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},i.createElement(H.E,null,(0,V.tx)("upsell.history.upsell_upgrade")))})):i.createElement(H.E,null,(0,V.tx)("upsell.history.upsell_learn_more_description",{upgradeLink:i.createElement(D.Ph,{className:eR.s6,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},(0,V.tx)("upsell.history.learn_more"))})))))}function e0(){return i.createElement(i.Fragment,null,i.createElement("span",{className:eR.ot},N.Ay.mac?(0,V.tx)("collaboration.feedback.shortcut_mac"):(0,V.tx)("collaboration.feedback.shortcut")))}eJ.displayName="VersionRow";class e1 extends O.uA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let r=new Set(this.state.expandedIds);r.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(r.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(r.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:r})},this.drawRows=(e,r,n,i)=>{let a=[],o=0,s=-1,l=-1,c=0,d=e.length-1-e.slice().reverse().findIndex(e=>(0,ey.AI)(e)),u=e.length-1-e.slice().reverse().findIndex(e=>this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle));for(;o<e.length;){let r=e[o];if((0,ey.AI)(r)){let p=n&&(0===o&&r.disabled||0===a.length);c>0&&(this.renderAutoVersionBatch(a,e,s,l,n&&(r.disabled&&0===s||0===a.length),!1,this.state.showAutosaves,i),p=!1),a.push(this.renderRow(r,p,o===e.length-1||o===d&&!this.state.showAutosaves||o===u&&this.state.showOnlyUserVersionHistory,i)),c=0,s=-1,l=-1}else s<0&&(s=o),l=o,c++;o++}return c>0&&this.renderAutoVersionBatch(a,e,s,l,n&&(e[0].disabled&&0===s||0===a.length),r,this.state.showAutosaves,i),a},this.hasLabeledVersions=e=>{for(let r of e)if(r.label&&r.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(Y.$T({...this.props.selectedView,versionId:e.id})),this.props.dispatch($.Y6({mode:f.Oin.KEEP_UI,type:eg.lF.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,b.sx)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let r=this.getVersionByID(e);if(r&&!this.props.modalShown){let e;if(null!=r.label&&r.label.length>0)e=(0,V.t)("collaboration.feedback.viewing_version",{label:r.label});else{let n=(0,eT.xX)(r.touched_at);e=(0,V.t)("collaboration.feedback.viewing_version",{label:n})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(G.F.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===em.V_){this.props.dispatch((0,em.Nb)({id:em.V_}));return}let r=this.getVersionByID(e);r&&this.loadVersion(r)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,em.Nb)({id:e.id,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,eu.hM)(),this.onKeyDown=O.C0(this,"keydown",e=>{if(!this.props.dropdownShown&&!this.props.modalShown&&!this.props.versionHistory.compareId){if(e.keyCode===S.Uz.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,em.Eg)());else if(e.keyCode===S.Uz.UP_ARROW||e.keyCode===S.Uz.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let r=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let n=-1;if(this.props.versionHistory.activeId===em.V_)e.keyCode===S.Uz.DOWN_ARROW&&(n=0);else{let r=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==r&&(n=e.keyCode===S.Uz.UP_ARROW?r-1:r+1)}if(n<0){this.props.dispatch((0,em.Nb)({id:em.V_}));return}n>=r&&(n=r-1);let i=this.props.versionHistory.versions[n];i.disabled||this.loadVersion(i)}}}),this.startComparingChanges=e=>{this.props.dispatch($.Y6({mode:f.Oin.KEEP_UI,type:eg.lF.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0&&!this.props.modalShown){let r=this.getVersionByID(e);if(!r)return;if(0===f.AWq.getChunkChangeCount()){f.Egt.clearSelection();let e=(0,V.t)("collaboration.feedback.no_visible_changes");e.length>56&&(e=e.substring(0,56)+"\u2026"),this.props.dispatch(G.F.dequeue({})),this.props.dispatch(G.F.enqueue({type:"comparing",message:e}))}else{let e=null!=r.label&&r.label.length>0?r.label:(0,eT.xX)(r.touched_at),n=(0,V.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:e});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(G.F.dequeue({})),this.props.dispatch(G.F.enqueue({type:"comparing",message:n}))}}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch($.Y6({mode:f.Oin.OFF}))},this.compareChangesById=e=>{if(e===em.V_)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,em.vF)({fromVersionId:e}));return}let r=this.getVersionByID(e);r&&this.compareChanges(r)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let r=this.getVersionByID(e);r&&(this.props.dispatch((0,em.Nb)({id:em.V_})),this.compareChanges(r))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,em.vF)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,em._h)({direction:A.AS}))},this.startUpgrade=()=>{let e=this.getOpenFile(),r=e.teamId&&this.props.teams[e.teamId];if(!r){(0,R.$D)(s.FigmaTeam.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(q.to({type:W.V,data:{upsellSource:ep.b.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}))},this.restoreVersion=e=>{this.canEditFile()&&(this.props.dispatch(z.PF({fileKey:this.getOpenFile().key,versionId:e.id})),(0,b.sx)("History Version Checkpoint Restored",{versionId:e.id,savedAt:e.touched_at}))},this.duplicateVersion=e=>{let r=this.getOpenFile(),n=(0,el.xp)(r,r.project,(0,ed.getPermissionsState)(this.props));n?this.props.dispatch(q.to({type:eN.DV,data:{team:n,resource:eh.vL.FILE,action:ef.ZN.DUPLICATE_FILES,editorType:r.editorType,currentPlan:ea.F.Plan.STARTER,upsellPlan:ea.F.Plan.PRO}})):(this.props.dispatch(z.YW({file:this.getOpenFile(),versionId:e.id})),(0,b.sx)("History Version Checkpoint Duplicated",{versionId:e.id,savedAt:e.touched_at}))},this.clearVersion=e=>{this.props.dispatch(Z.D({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(q.to({type:eC.yU,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let r=this.getVersionByID(e);r?.label&&(this.label=r.label),r?.description&&(this.description=r.description),this.props.dispatch(q.to({type:eC.yU,data:{description:this.description,label:this.label,savepointID:e}}))}},this.dropdownCallback=(e,r)=>{let{version:n}=r;switch(e){case"savepoint-clear":this.clearVersion(n.id);break;case"savepoint-restore":this.restoreVersion(n);break;case"savepoint-duplicate":this.duplicateVersion(n);break;case"savepoint-edit":case"savepoint-label":this.editSavepoint(n.id);break;case"savepoint-compare":this.compareChangesFromCurrent();break;case"savepoint-link":try{!function(e,r,n){e(X.zT({...r,versionId:n})),e(G.F.enqueue({type:"link_copied_to_clipboard",message:(0,Q.A)("link-copied")}))}(this.props.dispatch,this.props.selectedView,n.id)}catch(e){this.props.dispatch(B.s.error("Failed to copy link"))}}},this.getVersionByID=e=>{let r=this.props.versionHistory,n=r.versions.find(r=>r.id===e);return r.linkedVersion?.id===e?r.linkedVersion:n},this.onSavepointMenu=(e,r,n)=>{if(this.props.dropdownShown&&this.props.dropdownShown.type===J.$O){n.preventDefault();return}n.stopPropagation(),n.preventDefault();let i=this.getVersionByID(e),a=this.getOpenFile(),{clientX:o,clientY:s}=n;this.props.dispatch(Y.j7({type:J.$O,data:{clientX:o,clientY:s,version:i,callback:this.dropdownCallback,editName:i.label?"savepoint-edit":"savepoint-label",enableClear:i.label&&i.label.length>0,disableDuplicate:this.props.selectedView.editorType===e_.nT.Slides&&(0,w.oA)(a.org?.isSlidesDisabled)||this.props.selectedView.editorType===e_.nT.Whiteboard&&!!a.org?.figjamDisabledAt}}))},this.onDoneComparingClick=O.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&(this.props.dispatch((0,em.Nb)({id:em.V_})),f.Egt.clearSelection(),this.props.dispatch(G.F.dequeue({matchType:"comparing"})),this.props.dispatch(G.F.dequeue({matchType:"view_changes"})))},300)}),this.renderRow=(e,r,n,a)=>{let o=this.getOpenFile();return i.createElement(eJ,{key:`history-item-${e.id}`,description:e.description,label:e.label,disabled:e.disabled,text:eq(e),displayText:i.createElement(eZ,{item:e}),view:e.view?e.view:null,participatingImagesDict:e.participating_images_dict,time:e.touched_at,isActive:this.props.versionHistory.activeId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===em.V_,isComparingLoading:this.state.loadingCompareId===e.id,isComparing:this.props.versionHistory.compareId===e.id,devModeActivity:e.dev_mode_activity,user:e.user&&e.user.handle,userUrl:e.user&&((0,ey.pW)(e)||e.label)?e.user.img_url:null,clearVersion:this.clearVersion.bind(this,e.id),onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,versionId:e.id,checkpointKey:e.checkpoint_key,dispatch:this.props.dispatch,recordingKey:O.Pt(this.props,"version",e.id),onSavepointMenuCallback:this.onSavepointMenu,onEditSavepoint:this.editSavepoint,first:r,last:n,isBranchingVersion:(0,ey.pW)(e),fileByKey:this.props.fileByKey,branchFileKey:e.branch_file_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isStarterTeam:a,team:o.teamId?this.props.teams?.[o.teamId]:void 0,editorType:o.editorType,isUI3:this.props.isUI3})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,em.Eg)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,r,n,a,o,s,l,c){let d;if(n<0||null===r||r.length<1)return;let u=r[n].id,h=this.state.expandedIds.has(u)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=n;e<=a;e++)r[e].id===this.props.versionHistory.activeId&&(h=!0,this.autoExpandGroupId=this.props.versionHistory.activeId);this.expandLast&&s&&(h||this.toggleAutoItemById(u),this.expandLast=!1);let _=a-n+1,g=!0;if(1===_&&(h=!0,g=!1),d=s&&(1===_||!h)?o?eR.y5:eR.p8:o?eR.pi:eR.N5,g&&l&&e.push(i.createElement(L.D8,{key:`auto_row_${n}`,recordingKey:O.Pt(this.props,`autoVersionBatch.${n}`),className:r[n].disabled?eR.Ao:eR.QQ,onClick:this.toggleAutoItemById.bind(this,u)},!this.props.isUI3&&i.createElement("div",{className:d}),i.createElement("div",{className:eR.Jt},this.props.isUI3?i.createElement("div",{className:eR.Gl},i.createElement("div",{className:d}),h?i.createElement(p.r,null):i.createElement(m.R,null)):i.createElement(ev.D,null),i.createElement("div",{className:eR.aJ},(0,V.tx)("collaboration.feedback.autosave_count",{count:_}),!this.props.isUI3&&i.createElement(F.B,{key:"expand-caret",className:h?eR.ey:eR.GE,svg:h?ex.A:eU.A}))))),h)for(let i=n;i<=a;i++)e.push(this.renderRow(r[i],o&&n===a,s&&i===a,c))}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,em.Nb)({id:em.V_})),document.addEventListener("keydown",this.onKeyDown),es.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),I.j.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),es.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),I.j.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,R.x1)("history","history view should only be possible to open when we have a file"),(0,o.assertDev)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){return this.props.openFile?.canEdit}showCompareChanges(){return(0,v.kc)().version_diffing&&this.props.selectedView.editorType===e_.nT.Design}render(){let e=this.getOpenFile(),r=e.team,n=this.props.versionHistory.versions.filter(e=>!this.state.showOnlyUserVersionHistory||this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle)),a=n.filter(e=>!e.disabled),o=n.filter(e=>e.disabled).slice(0,ec.cW);this.hasLabeled=this.hasLabeledVersions(a)||this.hasLabeledVersions(o);let s=null,l=(0,A.u9)(this.props.versionHistory),c=!(0,ec.XX)(r)&&!this.props.currentUserOrgId&&(o.length>0||!l),d=!!r&&(0,ed.canEditTeam)(r.id,(0,ed.getPermissionsState)(this.props));c&&(s=i.createElement(eQ,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:d,hasRestrictedVersions:!!o.length}));let u=i.createElement("div",{className:eR.UX},!this.props.versionHistory.loading&&(0,A.u9)(this.props.versionHistory)&&i.createElement("a",{className:eR.nf,onClick:this.loadMore},(0,V.tx)("collaboration.feedback.show_older"))),p=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,m=this.props.versionHistory.linkedVersion,h=m&&a.some(e=>m.id===e.id),_=!this.state.showOnlyUserVersionHistory||m?.user.id===this.props.user?.id,g=(0,eb.$A)(this.props.selectedView),E=(0,eI.C)(this.props.selectedView),b=!this.canEditFile(),I=a.map(e=>(0,ey.AI)(e)?1:0).reduce((e,r)=>e+r,0);return i.createElement("div",null,this.props.progressBarState.mode!==f.Oin.ON_AND_LOCKED&&i.createElement(et.fu,{name:"Version History Panel",properties:{teamId:r?.id}},i.createElement("div",{className:y()(eR.kL,J.Dm),style:g||E||this.props.isUI3?{width:g||this.props.isUI3?"100%":ez+eY,borderLeft:g?"unset":void 0,minWidth:E&&this.props.isUI3?"240px":"unset"}:{position:"fixed",top:"auto",bottom:"auto",width:ez+eY,height:"100%"}},i.createElement(e2,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:b}),i.createElement("div",{"data-not-draggable":!0},i.createElement("div",{className:eR.dG},!this.hasLabeled&&!b&&!g&&i.createElement("div",{className:eR.fy},i.createElement("div",null,(0,V.tx)("collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",{shortcut:i.createElement(e0,null)}))),m&&!h&&_&&i.createElement(eJ,{description:m.description,label:m.label,versionId:m.id,onSavepointMenuCallback:this.onSavepointMenu,displayText:(0,V.tx)("collaboration.feedback.get_version_text_linked_version_linked_version",{versionText:i.createElement(eZ,{item:m})}),view:m.view?m.view:null,time:m.touched_at,isActive:this.props.versionHistory.activeId===m.id,isCurrentVersionActive:this.props.versionHistory.activeId===em.V_,isComparingLoading:this.state.loadingCompareId===m.id,isComparing:this.props.versionHistory.compareId===m.id,userUrl:m.user.img_url,dispatch:this.props.dispatch,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isLinked:!0,first:!0,last:!0,isBranchingVersion:(0,ey.pW)(m),checkpointKey:m.checkpoint_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.props.versionHistory.loading&&i.createElement("div",{className:eR.u1},i.createElement(M.kt,null)),p&&i.createElement(eJ,{displayText:(0,V.tx)("collaboration.feedback.current_version"),view:null,isActive:this.props.versionHistory.activeId===em.V_,isCurrentVersionActive:this.props.versionHistory.activeId===em.V_,isComparingLoading:this.state.loadingCompareId===em.V_,isComparing:!!this.props.versionHistory.compareId,userUrl:this.props.user.img_url,versionId:em.V_,dispatch:this.props.dispatch,addSavepoint:this.addSavepoint,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,first:!0,last:!1,recordingKey:O.Pt(this.props,"currentVersion"),onCreateSavepoint:this.addSavepoint,onSavepointMenuCallback:this.onSavepointMenu,showAutosaves:this.state.showAutosaves,hideLine:0===a.length||!this.state.showAutosaves&&0===I,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.drawRows(a,0===o.length,!p),this.drawRows(o,!0,!1,d),s),0===o.length&&u))))}}function e2(e){let{onClose:r,addSavepoint:n,filterOptions:a,isViewOnly:o}=e,{toggleDropdown:s,dropdownTargetRef:l,isDropdownShown:c}=(0,eS.B)("FILTER_VERSIONS_DROPDOWN"),d=(0,en.GS)();i.useEffect(()=>{},[c,l]);let u=()=>{a?.setShowOnlyUserVersionHistory(!a?.showOnlyUserVersionHistory)},p=a?[i.createElement(P.MM,{key:"all",checked:!a.showOnlyUserVersionHistory,onClick:()=>a.showOnlyUserVersionHistory?u():null},(0,V.tx)("collaboration.feedback.all_filter_text")),i.createElement(P.MM,{key:"only_yours",disabled:o,checked:a.showOnlyUserVersionHistory,onClick:()=>a.showOnlyUserVersionHistory?null:u()},(0,V.tx)("collaboration.feedback.only_yours_filter")),i.createElement(P.wv,{key:"sep"}),i.createElement(P.MM,{key:"autosaves",checked:a.showAutosaves,onClick:()=>{a?.setShowAutosaves(!a.showAutosaves)}},(0,V.tx)("collaboration.feedback.show_autosave_versions"))]:[];return i.createElement("div",{className:eR.N1},i.createElement("div",{className:eR.qd},(0,V.tx)("collaboration.feedback.version_history")),i.createElement("div",{className:d?U.cx.flex.itemsCenter.gap4.$:U.cx.flex.itemsCenter.$},a&&i.createElement("div",{ref:l},i.createElement(eA.YW,{selected:!!a.showOnlyUserVersionHistory,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.filter_tooltip"),onClick:s,onMouseDown:e=>c&&e.stopPropagation()},i.createElement(x.U,{svg:eK.A},i.createElement(h.S,null)))),c&&l.current&&i.createElement(ew.Jz,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:p,hideDropdown:s,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,propagateCloseClick:!0}),!o&&i.createElement(eA.K0,{onClick:n,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.add_to_version_history_tooltip"),dataTestId:"versions-add-savepoint",recordingKey:O.Pt(e,"plusVersion")},i.createElement(x.U,{svg:eG.A,fallbackSvg:eH.A},i.createElement(_.x,null))),i.createElement(eA.K0,{onClick:r,"data-tooltip-type":eE.Ib.TEXT,"data-tooltip":(0,V.t)("collaboration.feedback.close_tooltip"),recordingKey:"button-close"},i.createElement(x.U,{svg:ej.A},i.createElement(g.L,null)))))}function e3({versions:e,selectedVersion:r,setVersion:n,last:o,idx:s,isSection:l}){let c=(0,a.wA)(),d=(0,eo.ud)(),u=(0,en.GS)();return i.createElement(i.Fragment,null,e.map((a,p)=>i.createElement(eJ,{key:`history-item-${a.id}`,description:a.description,label:a.label,disabled:a.disabled,text:eq(a),displayText:i.createElement(eZ,{item:a}),view:a.view?a.view:null,participatingImagesDict:a.participating_images_dict,time:a.touched_at,isActive:r?.id===a.id,user:a.user&&a.user.handle,userUrl:a.user&&((0,ey.pW)(a)||a.label)?a.user.img_url:null,onSelect:()=>n(a),isAllowedToChangeVersion:()=>!0,versionId:a.id,checkpointKey:a.checkpoint_key,dispatch:c,first:0===s&&0===p,last:o&&p===e.length-1,isBranchingVersion:(0,ey.pW)(a),fileByKey:d,branchFileKey:a.branch_file_key,showAutosaves:!0,version:a,isSection:l,isUI3:u,editorType:null,devModeActivity:a.dev_mode_activity})))}function e6({versions:e,selectedVersion:r,setVersion:n,last:a,idx:o}){let s;let[l,c]=i.useState(r&&!!e.find(e=>e.id===r.id)),d=K.VI()?.isSection,u=(0,en.GS)();s=a&&(1===e.length||!l)?0===o?eR.y5:eR.p8:0===o?eR.pi:eR.N5;let h=u?i.createElement(L.D8,{className:eR.QQ,onClick:()=>c(!l)},i.createElement("div",{className:eR.Jt},i.createElement("div",{className:eR.Gl},l?i.createElement(p.r,null):i.createElement(m.R,null)),i.createElement("div",{className:eR.aJ},(0,V.tx)("collaboration.feedback.autosave_count",{count:e.length})))):i.createElement(L.D8,{className:eR.QQ,onClick:()=>c(!l)},i.createElement("div",{className:s}),i.createElement("div",{className:eR.Jt},i.createElement(ev.D,null),i.createElement("div",{className:eR.aJ},(0,V.tx)("collaboration.feedback.autosave_count",{count:e.length}),i.createElement(F.B,{key:"expand-caret",className:l?eR.ey:eR.GE,svg:l?ex.A:eU.A}))));return i.createElement("div",{key:`auto_row_${o}`},h,l&&i.createElement(e3,{versions:e,selectedVersion:r,setVersion:n,last:a,idx:o,isSection:d}))}function e8({versions:e,selectedVersion:r,setVersion:n}){let a=[],o=[],s=0,l=K.VI()?.isSection;function c(e){o.length>0&&(a.push(i.createElement(e6,{key:s,versions:[...o],selectedVersion:r,setVersion:n,idx:s,last:e})),s++,o=[])}for(let d=0;d<e.length;d++){let u=e[d];(0,ey.AI)(u)||u.frameCreated||u.frameEdited||u.lastViewed?(c(!1),a.push(i.createElement(e3,{key:s,versions:[u],selectedVersion:r,setVersion:n,idx:s,last:d===e.length-1,isSection:l})),s++,o=[]):o.push(u)}return c(!0),i.createElement(i.Fragment,null,a)}e1.displayName="VersionHistoryView",(0,a.Ng)(ei.l$)(e1)},118335:(e,r,n)=>{"use strict";n.d(r,{PZ:()=>em,SI:()=>ed});var i=n(411855),a=n(188507),o=n(296853),s=n(730371),l=n(675678),c=n(39798),d=n(587670),u=n(534611),p=n(707458),m=n(629019),h=n.n(m),_=n(203264),g=n(776250),f=n(344780),E=n(38329),y=n(966712),b=n(374626),I=n(38580),T=n(395900),v=n(776621),S=n(966981),w=n(680001),A=n(27315),N=n(939863),C=n(239349),O=n(681912),L=n(598393),R=n(786110),P=n(738269),D=n(293017),k=n(662275),M=n(681655),F=n(41653),x=n(29680),U=n(335682),B=n(860178),V=n(694517),G=n(945020),H=n(237870),W=n(632857),K=n(759645),j=n(928229),z=n(625599),Y=n(125798),$=n(212411),q=n(754369),Z=n(286723),X=n(23318),J=n(236192),Q=n(845465),ee=n(630171);let et=[2,3,6,13,25,50,75,100,200,300,1e3];function er(e,r,n){if(!n)return!1;let i=r.get((0,u.dI)(e));if(!i)return!1;let a=i.absoluteBoundingBox;return!!a&&a.x<n.x+n.w&&a.x+a.w>n.x&&a.y<n.y+n.h&&a.y+a.h>n.y}function en(e,r){return{x:e.x-r.x,y:e.y-r.y,width:e.w,height:e.h}}function ei(e,r,n=!1){if(!r)return null;let i=e.get(r);return i?n?i.absoluteRenderBounds:i.absoluteBoundingBox:null}function ea(e){return!!(e?.basis?.styleType||e?.change?.styleType)}function eo(e,r,n){let i=e?.basis?.guid?(0,u.dI)(e.basis.guid):u.AD,a=ea(e)?null:ei(r.scene,i,!1),o=e?.change.guid?(0,u.dI)(e.change.guid):u.AD,s=e?.state==="removed"||ea(e)?null:ei(n.scene,o,!1);return{before:{id:i,box:a&&r.baseBox?en(a,r.baseBox):null},after:{id:o,box:s&&n.baseBox?en(s,n.baseBox):null}}}function es({frameId:e,historyFrameId:r,historySceneGraph:n,chunkChanges:a,discreteDiffing:c,setChunkChanges:p}){let m=(0,x.eY)(),[h,_]=(0,b.fp)(R.Ib),E=i.useMemo(()=>c?d.Egt.getLayerGUIDMapping(r,n.scene,e,m.scene):void 0,[c,e,r,n.scene,m.scene]);return i.useEffect(()=>{if(a)return;let i=d.egF.getNodeTree(r,n.scene,!c),h=d.egF.getNodeTree(e,m.scene,!c);if(!i||!h){_(new Map),p({});return}f.sn.reset("dev_mode.compare_changes.diffing",r),f.sn.start("dev_mode.compare_changes.diffing",{key:r});let{deltaTree:y,deltaNodeMap:b}=function(e,r,n,i,a,c,p=!0){let m;let h=new Map,_=o.w.decodeMessage(e.nodeChanges).nodeChanges,g=o.w.decodeMessage(r.nodeChanges).nodeChanges;if(!_||!g)return{deltaTree:{},deltaNodeMap:h};let f=new Map,E=0;!function e(r){if(E>=_.length)return(0,v.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(f.set(r.id,{change:_[E],node:r}),E++,r.children))e(n)}(e.tree);let y=p?n.get((0,u.dI)(g[0].guid)):null,b=_[0]&&p?i.get((0,u.dI)(_[0].guid)):null,I=y?.absoluteBoundingBox||null,T=b?.absoluteBoundingBox||null;function S(e,r,n){h.set(e,r.value),(0,z.NI)(n,r)}let w=0,A=function e(r,m={}){let _,E;if(w>=g.length)return(0,v.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=g[w],b=0===w;w++;let A=c?c.get(r.id)??u.AD:r.id,N=f.get(A),C={previousChange:N?.change,currentChange:y,isRootNode:b};if(N){let e=function(e,r,n,i,a){let l=new Map;for(let[c,p]of j.AW){let m=null,h=null;if((0,W.ar)(c)&&(e[c]&&e[c].guid&&(m=(0,u.dI)(e[c].guid)),r[c]&&r[c].guid&&(h=(0,u.dI)(r[c].guid))),m||h){let u=function(e,r){if(r){if("styleIdForStrokeFill"===c){e.strokePaints=r.fillPaints;return}for(let n of p)e[n]=r[n]}},_=h?d.egF.getNodeTree(h,i.scene,a)?.nodeChanges:null,g=m?d.egF.getNodeTree(m,n.scene,a)?.nodeChanges:null,f=_?o.w.decodeMessage(_).nodeChanges?.[0]:null,E=g?o.w.decodeMessage(g).nodeChanges?.[0]:null;if(u(r,f),u(e,E),f&&!E)l.set(c,{state:"removed",previousChange:f,currentChange:{phase:"REMOVED"}});else if(!f&&E)l.set(c,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(f&&E){for(let e of["name",...p])if(!(0,s.deepEqualsIgnoringDerivedData)(f[e],E[e])){l.set(c,{state:"changed",previousChange:f,currentChange:E});break}}}}return l}(y,N?.change,n,i,a);for(let e of j.cs)if(!(0,s.deepEqualsIgnoringDerivedData)(N.change[e],y[e])&&("textData"!==e||N.change[e]?.characters!==y[e]?.characters)){if("transform"===e&&b||p&&!er(N.change.guid,i,I)&&!er(y.guid,n,I))continue;C.state="changed";break}e.size>0&&(C.changedStyles=e)}else(!p||er(y.guid,n,I))&&(C.state="added");for(let n of(y.guid&&(C.state||C.changedStyles)&&(E={value:C}),_=E||m,E&&S((0,u.dI)(y.guid),E,m),r.children.forEach(r=>e(r,_)),N?.node?.children||[]))f.has(n.id)&&function({checkOverlap:e,parent:r,nodeId:n}){let a=f.get(n);if(e&&!er(a?.change.guid,i,T))return;let o={value:{state:"removed",previousChange:a?.change,currentChange:{phase:"REMOVED"}}};h.has((0,u.dI)(f.get(n)?.change.guid))&&(0,v.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let s=(0,u.dI)(a?.change.guid);S(s,o,r),f.delete(s)}({checkOverlap:p,nodeId:n.id,parent:_});return f.delete(A),m}(r.tree);if(!A.value&&A.children&&1===A.children.length){let e=A.children[0];delete e.parent,m=e}else m=A;return{deltaTree:m,deltaNodeMap:h}}(i,h,m,n,!c,E,!0);_(b),p((0,z.X$)(y,function(e){let r=e.value,n=null,i=r.state;return("added"===r.state||"changed"===r.state)&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange?r.previousChange:{phase:"REMOVED"},change:r.currentChange,state:i}),"removed"===r.state&&r.previousChange&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:{phase:"REMOVED"},state:i}),r.changedStyles&&(n||(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:r.currentChange,state:i}),n.changedStyles=r.changedStyles),{result:n}}));let I=f.sn.tryStop("dev_mode.compare_changes.diffing",r);I&&(0,g.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:I},{forwardToDatadog:!0})},[e,_,a,p,r,n.scene,m.scene,E,n,m,c]),i.useEffect(()=>()=>{_(new Map)},[_]),null}function el(e,r){if(e.isState){let r=e.parentNode?.name;return r?`${r}/${e.name}`:e.name}if(r.singleBackingSymbol&&r.singleBackingStateGroup){let n=r.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function ec(e){return{node:(0,C.mJ)(e),backingSymbolData:(0,q.$)([e])}}function ed({nodeId:e,detachedComponentsScene:r,documentIndex:n,showError:i}){let a=n===c.x1?d.juq.HISTORY:r?d.juq.DETACHED_COMPONENTS:p.q.CURRENT_DOCUMENT,o=new p.q(a),s=o.get(e)?.absoluteRenderBounds||{x:0,y:0,w:0,h:0},l=0,u=!0;return()=>({nodeBounds:{x:s.x,y:s.y,width:s.w,height:s.h},getImage:({scale:i,clipRect:a})=>{let s;let c=Date.now();c-l>1e4&&(l=c,(s=new T.jk("performance.dev_mode.compare_changes.get_image",{})).start());let d=(0,X.L6)(e,n,r,i,a);if(s){let e=s.stop(),r=d?.image?.length??0;e&&r&&(0,g.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:r,sceneType:o.getSceneTypeDebugString(),isFirstImage:u},{forwardToDatadog:!0})}return u=!1,d&&{data:d.image,width:d.width,height:d.height,scale:d.width/d.canvasSpaceBounds.width,canvasSpaceBounds:d.canvasSpaceBounds}},showError:i})}function eu({version:e,isSection:r}){let n=new Date(e.touched_at?e.touched_at:e.created_at),a=e.label;e.frameCreated?a=r?(0,N.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,N.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(a=(0,N.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let o=a?i.createElement(J.Cr,{time:n}):null;return i.createElement("div",{className:ee.sh},i.createElement("div",{className:ee.dp},a||i.createElement(J.Cr,{time:n})),i.createElement("div",{className:ee.m7},o))}let ep=(0,I.eU)(null);function em(e){let{nodeId:r,onCloseModal:n,modalTitle:a,currentImage:o,historicImage:s,historicHeader:l,currentHeader:c,versions:m,selectedVersion:_,setSelectedVersion:E,renderLoadingBar:I,modalError:T,discreteDiffingInput:v,initialSelectedNodeId:S,skipCorrectHistoryCanvasCheck:C,preferencesApi:R,origin:P}=e,D=(0,U.tS)(),k=B.iZ()?.id,[M,F]=i.useState(w.Ss.SIDE_BY_SIDE),[x,V]=i.useState(Z.q0),[G,H]=i.useState(!0),[W,q]=i.useState(null),[X,er]=i.useState(null),[en,ea]=i.useState(!0),[el,ec]=i.useState(!0),ed=L.VI()?.isSection,[em,eg]=i.useState(()=>S?{id:S,zoomToSelection:!0}:null),[ef,eE]=(0,b.fp)(ep),[ey,eb]=i.useState(void 0),eI=(0,b.fp)(A.w1)[1],eT=(0,Z.t$)(_||null,r)||!!v,ev=C||eT,eS=i.useMemo(()=>v?.sceneGraph?v.sceneGraph:new p.q(d.juq.HISTORY),[v?.sceneGraph]),ew=(0,O.G)();i.useEffect(()=>{em&&em.id!==r&&(0,g.sx)("Diff Modal New Layer Selected",{userId:k,fileKey:D,frameId:r,versionId:_?.id,layer_id:em.id})},[em]);let eA=i.useRef(_);i.useEffect(()=>{eA.current!==_&&(eA.current=_,eb(void 0),eg(null))},[_,eA]);let eN=void 0!==o,eC=void 0!==s,eO=i.useCallback(e=>{"Escape"===e.key&&(em?(eg(null),e.stopPropagation(),e.preventDefault()):n())},[n,em]);i.useEffect(()=>(document.addEventListener("keydown",eO),()=>{document.removeEventListener("keydown",eO)}),[eO]),i.useEffect(()=>{if("cc_versions"===P&&ey&&!el){(0,z.mf)(ey)?(0,g.sx)("Diff Modal No Changes Between Versions",{userId:k,fileKey:D,frameId:r,versionId:_?.id,initialVersion:en,versionMetadata:!1},{forwardToDatadog:!0}):(0,g.sx)("dev_mode.compare_changes.version_has_changes",{userId:k,fileKey:D,frameId:r,versionId:_?.id,initialVersion:en,versionMetadata:!1},{forwardToDatadog:!0});let e=f.sn.tryStop("dev_mode.compare_changes.switch_versions",_?.id);e&&(0,g.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[P,en,el,ey,_,r,D,k]),i.useEffect(()=>{_&&null===s&&(0,g.sx)("dev_mode.compare_changes.no_image",{userId:k,fileKey:D,frameId:r,versionId:_?.id},{forwardToDatadog:!0})},[s,_,r,D,k]);let eL=()=>i.createElement(w.BL,{isPreviewAvailable:eN,showOptions:eN,view:M,onSideBySideClick:()=>{F(w.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{F(w.Ss.OVERLAY)},additionalStyles:ee.tH}),[eR,eP]=i.useState(new Set),eD=i.useCallback((e,r)=>{r?eP(r=>new Set([...r,...e])):eP(r=>{let n=new Set(e);return new Set([...r].filter(e=>!n.has(e)))})},[eP]),ek=(0,i.useCallback)(e=>{let r=e?.value;if(r){let n="removed"===r.state?r.beforeNodeId:r.afterNodeId;eg({id:n,zoomToSelection:!1}),q(r.beforeNodeId),er(r.afterNodeId);let i=[n],a=e?.parent;for(;a;){let e=a.value;if(e){let r="removed"===e.state?e.beforeNodeId:e.afterNodeId;i.push(r)}a=a.parent}eD(i,!0)}else eg(null),q(null),er(null)},[eD]),eM=(0,i.useCallback)(e=>{e?eE("removed"===e.state?e.beforeNodeId:e.afterNodeId):eE(u.AD)},[eE]),eF=(0,i.useCallback)(e=>eE(e),[eE]),ex=(0,i.useCallback)((e,r)=>{e===em?.id?(eg(null),q(null),er(null)):(eg({id:e,zoomToSelection:!0}),eE(e),q((0,u.dI)(r.basis.guid)),er((0,u.dI)(r.change.guid)))},[em?.id,eE]),eU=(0,i.useMemo)(()=>ey&&(0,K.kF)(ey,j.FO.LEGO,void 0,$.O0)||{},[ey]),eB=!(0,z.mf)(eU),eV=v?v.nodeId:r,{beforeBoxes:eG,afterBoxes:eH}=function(e){let{frameId:r,historyFrameId:n,view:a,displayableChanges:o,historySceneGraph:s}=e;return(0,i.useMemo)(()=>{if(!r||!n)return{};let e=function(e,r,n,i){let a=new p.q,o=ei(r,n,!0),s=ei(a,e,!0);return(0,z.X$)(i,e=>{let n=eo(e.value,{scene:r,baseBox:o},{scene:a,baseBox:s});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(r,s,n,o);return{beforeBoxes:(0,z.X$)(e,e=>{let i=e.value,a=i.beforeBoxNodeId===n||i.afterBoxNodeId===r;return i.afterBox?i.beforeBox?{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"changed",isRootFrame:a}}:{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"added",isRootFrame:a}}:{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"removed",isRootFrame:a}}}),afterBoxes:(0,z.X$)(e,e=>{let i=e.value,a=i.beforeBoxNodeId===n||i.afterBoxNodeId===r;return i.afterBox?i.beforeBox?{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"changed",isRootFrame:a}}:{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"added",isRootFrame:a}}:{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"removed",isRootFrame:a}}})}},[r,n,a,o])}({frameId:r,historyFrameId:eV,historySceneGraph:eS,view:M,displayableChanges:eU,activeNode:ef,selectedNode:em});i.useEffect(()=>{if(!em?.id||!em?.zoomToSelection||!r||!eV)return;let{baseBeforeBox:e,baseAfterBox:n,resultBoxes:i}=function(e,r,n,i,a){let o=new p.q,s=ei(r,n,!0),l=ei(o,e,!0),c=[];for(let e of i){let n=(0,z.lE)(a,r=>(0,u.dI)(r.change.guid)===e||(0,u.dI)(r.basis.guid)===e);if(n){let e=eo(n,{scene:r,baseBox:s},{scene:o,baseBox:l});c.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:s,baseAfterBox:l,resultBoxes:c}}(r,eS,eV,[em.id],eU),{beforeBox:a,afterBox:o}=i[0]??{},s=1/0,l=1/0,c=-1/0,d=-1/0;a&&e&&(a.x-=e.w/2,a.y-=e.h/2,s=Math.min(s,a.x),l=Math.min(l,a.y),c=Math.max(c,a.x+a.width),d=Math.max(d,a.y+a.height)),o&&n&&(o.x-=n.w/2,o.y-=n.h/2,s=Math.min(s,o.x),l=Math.min(l,o.y),c=Math.max(c,o.x+o.width),d=Math.max(d,o.y+o.height)),s!==1/0&&eI({x:s,y:l,width:c-s,height:d-l})},[em,eI,r,eU]),i.useEffect(()=>()=>{eI(void 0)},[eI]);let eW=eG?{rootBox:eG,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:em?.id,expandedLayers:eR,ignoreState:"added",interactive:M===w.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:ep,recordingKey:"before"}:null,eK=eH?{rootBox:eH,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:em?.id,expandedLayers:eR,ignoreState:"removed",interactive:M===w.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:ep,recordingKey:"after"}:null,ej=!I&&!T;return i.createElement(Z.aF,{title:a,onClose:n},i.createElement("div",{className:ee.xZ},i.createElement("div",{className:ee.f},I&&!T&&i.createElement("div",{className:ee.Lq},i.createElement(Y.G,{hasLoadedDiffs:!1})),ej&&i.createElement("div",{className:ee.ND},(m||eB)&&i.createElement("div",{className:h()(ee._H,"devHandoffLeftPanel")},E&&i.createElement("div",{className:ee.b6},i.createElement("div",{className:h()(ee.Zl)},(0,N.tx)("collaboration.feedback.compare_changes_modal.history"),(0,y.kc)().dt_compare_changes_debug_helpers&&i.createElement(e_,{fileKey:D,setSelectedVersion:E})),i.createElement(J.aS,{versions:m||[],selectedVersion:_,setVersion:e=>{e.id!==_?.id&&(0,g.sx)("Diff Modal Selected Version Changed",{userId:k,fileKey:D,frameId:r,versionId:e.id}),f.sn.reset("dev_mode.compare_changes.switch_versions",e.id),f.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),ec(!0),en&&ea(!1),E(e)}})),i.createElement(K.zg,{changesToDisplay:eU,selectedNode:em?.id,expandedLayers:eR,setLayerExpanded:eD,onHover:eF,onClick:ex})),i.createElement("div",{className:ee.vF},M===w.Ss.SIDE_BY_SIDE&&i.createElement("div",{className:ee.m_},i.createElement("div",{className:ee.ZJ},l?i.createElement("div",{className:ee.K9},i.createElement("div",{className:ee.gO},l)):_&&i.createElement(eu,{version:_,isSection:ed})),i.createElement("div",{className:ee.t4}),i.createElement("div",{className:ee.ZJ},c?i.createElement("div",{className:ee.K9},i.createElement("div",{className:ee.gO},c)):i.createElement("div",{className:ee.K9},(0,N.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),M===w.Ss.SIDE_BY_SIDE&&i.createElement("div",{className:ee.Ik},i.createElement(w.qW,{zoomPercentageOptions:et,resetStateOnChangeValue:r,compareThumbnailSource:j.FO.LEGO,zoomOnMousePointer:!0},i.createElement("div",{className:ee.bV},eC?i.createElement(Q.H1,{value:eW},i.createElement(Z.R$,{image:s,view:M,Overlay:Q.q1})):i.createElement(Z.Qp,null),i.createElement("div",{className:ee.mq}),eN?i.createElement(Q.H1,{value:eK},i.createElement(Z.R$,{image:o,view:M,Overlay:Q.q1})):i.createElement(Z.Qp,null)),eN&&eL())),M===w.Ss.OVERLAY&&i.createElement("div",{className:ee.Ik},i.createElement(w.xY,{zoomPercentageOptions:et,resetStateOnChangeValue:r,zoomOnMousePointer:!0},i.createElement("div",{className:ee.Kk},eC?i.createElement(Q.H1,{value:eW},i.createElement(Z.R$,{image:s,view:M,hideNoImageText:!0,Overlay:Q.q1})):i.createElement(Z.Qp,null),G&&(eN?i.createElement(Q.H1,{value:eK},i.createElement(Z.R$,{image:o,view:M,hideNoImageText:!0,opacity:x,Overlay:Q.q1})):i.createElement(Z.Qp,null))),eN&&i.createElement(w.u,{opacity:x,isAfterImageShown:G,onToggleClick:()=>H(!G),onOpacityChange:e=>V(e.a)}),eN&&eL())),ev&&r&&eV&&i.createElement(es,{frameId:r,historyFrameId:eV,historySceneGraph:eS,chunkChanges:ey,discreteDiffing:!!v,setChunkChanges:e=>{ec(!1),eb(e)}}))),T&&i.createElement("div",{className:ee.Q9},(0,N.tx)("collaboration.feedback.compare_changes_modal.error")),i.createElement("div",null)),ej&&(ev?ey&&(0,z.mf)(ey)?i.createElement($.Ox,{text:(0,N.t)("collaboration.feedback.compare_changes_modal.no_changes")}):i.createElement(eh,{layerChangeNodeId:X,layerBasisNodeId:W,layerBasisSceneGraph:eS,selectedVersion:_||void 0,displayableChanges:eU,showSelectLayerHint:!em,preferencesApi:R??ew}):i.createElement($.Ox,{text:""}))))}function eh({layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:o,showSelectLayerHint:s,preferencesApi:l}){return s?i.createElement($.Ox,{text:(0,N.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):i.createElement($.wv,{layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:o,preferencesApi:l})}function e_({fileKey:e,setSelectedVersion:r}){let n=(0,i.useRef)(null),[a,o]=(0,i.useState)("Upload local file");return i.createElement("label",{className:ee.$8},a,i.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{let i=n.current?.files?.[0];if(i&&M.F){let n=await (0,F._)(E.D,(0,y.kc)(),M.F,i),a=E.D.getState().mirror.appModel.currentPage,s=`${e}-${a}-debug`;V.Ht.set(s,Promise.resolve({key:s,canvas:n.bytes})),o(i.name),r({id:"debug"})}}}))}let eg=(0,H.Ju)(function(e){let{nodeId:r,layerName:n}=e,o=(0,a.wA)(),s=(0,a.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),u=(0,a.d4)(e=>e.versionHistory.activeId),{Sprig:p}=(0,S.A)(),m=(0,U.tS)(),h=_.E1()?.toISOString(),y=(0,b.fp)(R.Ib)[1],{versions:I,versionsQueryLoaded:T}=(0,Z.DS)(r),w=(0,a.d4)(e=>e.selectedView.compareChangesVersionId??null),A=(0,i.useMemo)(()=>w?I.find(e=>e.id===w)??null:null,[I,w]),C=i.useCallback(e=>{!e&&(W(void 0),function(e,r,n,i){let a=E.D.getState().selectedView;r(P.$T({...a,compareChangesVersionId:e,filterStatusVersions:n,compareChangesNodeId:void 0}))}(e,o,!1,0),u&&u!==V.V_&&(o(D.Y6({mode:d.Oin.KEEP_UI,type:G.lF.SPINNER})),requestAnimationFrame(()=>{o((0,V.Nb)({id:u,nodeId:r??void 0,eventType:"LOAD_NEW_VERSION",versions:I}))}))),e!==w&&(W(void 0),function(e,r){let n=E.D.getState().selectedView;r(P.$T({...n,compareChangesVersionId:e}))}(e,o))},[o,w,u,I,r]),[O,L]=(0,b.fp)(V.tP),[M,F]=i.useState(!0),[x,B]=i.useState(!1),[H,W]=i.useState(void 0),K=void 0!==H,[j,z]=i.useState(void 0),Y=void 0!==j,$=(0,Z.t$)(A,r);i.useEffect(()=>{if(!M||!K||!Y||!T)return;F(!1);let e=f.sn.tryStop("dev_handoff.view_history",r);e&&(0,g.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),p("track","open_compare_changes",{origin:"cc_versions"})},[p,M,K,Y,T,r]);let q=(0,a.d4)(e=>e.modalShown?.type===eg.type);i.useEffect(()=>{if(q&&T&&!A){if(0===I.length){W(null),C(void 0);return}if(h){for(let e of I)if(e.lastViewed){C(e?.id);return}}C(I[0]?.id)}},[q,h,A,C,I,T]),i.useEffect(()=>{if($||!A)return;let e=performance.now();V._t(A,r)?.then(({canvas:r,key:n})=>{let i=performance.now();if(n===O)return;if(!d.glU.loadPartialHistoryScene(r))throw Error("Error loading history canvas");L(n);let a=performance.now(),o=Math.trunc(i-e),s=Math.trunc(a-i);g.sx("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:m,fetchBytesDurationMs:o,loadNodesDurationMs:s,canvasBytesLength:r.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{v.$D(l.FigmaTeam.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),V.w_(A),B(!0)})},[$,A,O,L,s,m,r]),i.useEffect(()=>{let e=setTimeout(()=>{if(!$){W(void 0);return}W(ed({nodeId:r,documentIndex:c.x1,showError:()=>{W(null)}}))},Z._W);return()=>clearTimeout(e)},[r,A,$]),i.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{z(void 0),(0,v.$D)(l.FigmaTeam.DEVELOPER_TOOLS,Error("Current image loading error")),B(!0)},n=ed({nodeId:r,showError:e});if(!n){e();return}z(n)},Z._W);return()=>clearTimeout(e)},[r]);let X=i.useCallback(()=>{y(new Map),C(void 0),o(k.Ce())},[y,C,o]);return i.createElement(em,{nodeId:r,onCloseModal:X,modalTitle:n?(0,N.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:n}):(0,N.t)("collaboration.feedback.compare_changes_modal.header"),currentImage:j,historicImage:H,versions:I,selectedVersion:A,setSelectedVersion:e=>{C(e.id)},renderLoadingBar:M,modalError:x,origin:"cc_versions"})},"LegoCompareChangesVersionsModal",H.ZU.YES);(0,H.Ju)(function(e){let{nodeId:r,detachedInfoStatus:n,origin:o}=e,s=(0,a.wA)(),{Sprig:l}=(0,S.A)(),[c,m]=i.useState(!0),[h,_]=i.useState(!1),[E,y]=i.useState(void 0),[b,I]=i.useState(void 0),T=void 0!==E,v=void 0!==b,w="loaded"===n.status,A=w?n.result:void 0;i.useEffect(()=>{if(!c||!T||!v||!w)return;m(!1);let e=f.sn.tryStop("dev_handoff.view_history",r);e&&(0,g.sx)("dev_handoff.view_history",{elapsedMs:e,origin:o},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,c,T,v,r,w,o]),i.useEffect(()=>{let e=setTimeout(()=>{if(!w||!A?.dataComponentId){y(void 0);return}y(ed({nodeId:A?.dataComponentId,detachedComponentsScene:A?.dataLocation==="temp-scene",showError:()=>{y(null)}}))},Z._W);return()=>clearTimeout(e)},[w,A]),i.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{I(void 0),_(!0)},n=ed({nodeId:r,showError:e});if(!n){e();return}I(n)},Z._W);return()=>clearTimeout(e)},[r]);let C=i.useCallback(()=>{s(k.Ce())},[s]),O=(0,N.t)("collaboration.feedback.compare_changes_modal.header"),L=(0,N.tx)("inspect_panel.node_type.main_component"),R={nodeId:A?.dataComponentId??u.AD,sceneGraph:new p.q(A?.dataLocation==="temp-scene"?d.juq.DETACHED_COMPONENTS:p.q.CURRENT_DOCUMENT)};return i.createElement(em,{nodeId:r,onCloseModal:C,modalTitle:O,currentImage:b,historicImage:E,historicHeader:L,renderLoadingBar:c,modalError:h,discreteDiffingInput:R})},"LegoCompareChangesDetachedModal",H.ZU.YES),(0,H.Ju)(function(e){let{changeNodeId:r,basisNodeId:n,initialSelectedNodeId:o,isComparingOverrides:s=!1}=e,l=(0,a.wA)(),{Sprig:c}=(0,S.A)(),d=ec(r),u=ec(n),[m,h]=i.useState(!1),[_,E]=i.useState(void 0),[y,b]=i.useState(void 0),I=void 0!==_,T=void 0!==y;i.useEffect(()=>{if(!I||!T)return;let e=f.sn.tryStop("dev_handoff.view_history",r),n=s?"cc_overrides":"cc_nodes";e&&(0,g.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),c("track","open_compare_changes",{origin:n})},[c,s,I,T,r]),i.useEffect(()=>{E(ed({nodeId:n,showError:()=>E(null)}))},[n]),i.useEffect(()=>{let e=()=>{b(void 0),h(!0)},n=ed({nodeId:r,showError:e});if(!n){e();return}b(n)},[r]);let v=i.useCallback(()=>{l(k.Ce())},[l]),w=(0,N.t)("collaboration.feedback.compare_changes_modal.header"),A={nodeId:n,sceneGraph:new p.q(p.q.CURRENT_DOCUMENT)};return d.node&&u.node?i.createElement(em,{nodeId:r,onCloseModal:v,modalTitle:w,currentImage:y,historicImage:_,currentHeader:el(d.node,d.backingSymbolData),historicHeader:el(u.node,u.backingSymbolData),renderLoadingBar:!1,modalError:m,discreteDiffingInput:A,initialSelectedNodeId:o}):null},"LegoCompareChangesForNodesModal",H.ZU.YES)},736782:(e,r,n)=>{"use strict";n.d(r,{Ec:()=>U});var i=n(411855),a=n(188507);n(587670);var o=n(629019),s=n.n(o),l=n(776250),c=n(153234),d=n(522739),u=n(574176),p=n(939863),m=n(278733),h=n(677664);n(809831);var _=n(450225);n(356390);var g=n(321487),f=n(99506),E=n(288641),y=n(502442);let b="hyperlink_popup--icon--7YW8G",I="hyperlink_popup--inlineText--U1QY9",T="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",v="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",S="hyperlink_popup--clickable--VAzTE",w="hyperlink_popup--divider--NSUKF",A="hyperlink_popup--open--EsmHi",N="hyperlink_popup--edit--Q80cZ";var C=n(97648),O=n(626744),L=n(677752),R=n(430602),P=n(614603),D=n(143091),k=n(350057),M=n(503878),F=n(667875);function x(e){let r,n;let o=(0,a.wA)(),x=r=>{o((0,h.RK)({rawInput:e.urlString,event:r})),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup()},U=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?(0,E.UA)(o,e.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),r.stopPropagation()},B=r=>{e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),e.showHyperlinkEditor(),(0,l.sx)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),r.stopPropagation()},V=r=>{(e.data.type===y.F.GENERIC||e.data.type===y.F.FIGMA_FILE||e.data.type===y.F.FIGMA_PROTOTYPE||e.data.type===y.F.FIGMA_VERSION)&&e.getLinkMetadata&&o(e.getLinkMetadata({clipboardText:e.data.url.toString(),url:e.data.url.toString(),isTextIframe:!1,entrypoint:_.WJ.MODAL}))},G=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?U(r):x(r)},{data:H}=e;switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:case y.F.FIGMA_VERSION:let W=H.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),K=H.url.pathname+H.url.search+H.url.hash,j=K.split(/\//),z="design"===j[1]||"board"===j[1]||"proto"===j[1],Y="board"===j[1];switch(H.type){case y.F.GENERIC:n=D.A;break;case y.F.FIGMA_FILE:case y.F.FIGMA_VERSION:n=z?Y?C.A:L.A:D.A;break;case y.F.FIGMA_PROTOTYPE:n=M.A}if((0,g.F)(H.url.host)&&z&&j[2]&&j[3]){let e=decodeURI(H.url.pathname.split(/\//)[3]).replace(/-/g," ");r=i.createElement("div",{className:v},e)}else r=i.createElement(i.Fragment,null,i.createElement("div",{className:"hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},W),K&&"/"!==K&&i.createElement("div",{className:T},K));break;case y.F.PAGE:n=R.A,r=i.createElement("div",{className:v},H.text);break;case y.F.FRAME:n=P.A,r=i.createElement(i.Fragment,null,i.createElement("div",{className:v},H.text),H.secondaryText&&i.createElement("div",{className:"hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},i.createElement(u.B,{className:"hyperlink_popup--pageSeparator--SAx-p",svg:O.A}),H.secondaryText));break;case y.F.INVALID:n=D.A,r=i.createElement("div",{className:v},(0,p.tx)("hyperlink.invalid_link",{link:H.urlString}));break;case y.F.MISSING:case y.F.NOT_LOADED:n=D.A,r=i.createElement("div",{className:v},H.text);break;case y.F.MAILTO:r=i.createElement("div",{className:T},H.url.pathname),n=k.A;break;case y.F.TEL:n=F.A,r=i.createElement("div",{className:T},H.url.pathname)}let $=e.canEdit,q=e.canEdit&&(H.type===y.F.GENERIC||H.type===y.F.FIGMA_FILE||H.type===y.F.FIGMA_VERSION||H.type===y.F.FIGMA_PROTOTYPE),Z=function(){switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,p.t)("hyperlink.prefix.open");case y.F.FIGMA_VERSION:return(0,p.t)("hyperlink.prefix.open_past_version");case y.F.PAGE:case y.F.FRAME:return(0,p.t)("hyperlink.prefix.go_to");case y.F.MAILTO:case y.F.TEL:return(0,p.t)("hyperlink.prefix.email");case y.F.INVALID:case y.F.MISSING:case y.F.NOT_LOADED:return null}}(),X=(()=>{switch(e.data.type){case y.F.MAILTO:return(0,p.t)("hyperlink.send_mail");case y.F.TEL:return(0,p.t)("hyperlink.call_telephone");default:return null}})(),J=(()=>{if(e.editorType===f._Y.SITES)switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,p.tx)("hyperlink.prefix.open")}return i.createElement(i.Fragment,null,Z?i.createElement("span",{className:I},Z," "):null,r)})(),Q=(r,a)=>i.createElement(d.GG,{type:"button",className:s()({[S]:r,[A]:!r}),onAuxClick:G,onMouseDown:G,recordingKey:e.recordingKey},r&&i.createElement(u.B,{className:b,style:m.sx.if(n===C.A,m.sx.add({transform:"rotate(90deg)"})).$,svg:n}),a),ee=i.createElement(d.GG,{type:"button",className:`${A} ${S}`,onAuxClick:x,onMouseDown:x,recordingKey:c.Pt(e,"secondaryButton")},X),et=(r,n)=>i.createElement(d.GG,{type:"button",recordingKey:c.Pt(e,"editHyperlinkPopup"),className:s()({[N]:!r,"hyperlink_popup--editContainer--W1EMp":r,[S]:r}),onMouseDown:B},r&&i.createElement(i.Fragment,null,i.createElement(u.B,{className:b,svg:D.A}),i.createElement("div",{className:s()(I,"hyperlink_popup--editText--IGsdw")},(0,p.tx)("hyperlink.edit"))),n);return i.createElement("div",{role:"none",className:"hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()}},(()=>{switch(e.editorType){case f._Y.SITES:switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return i.createElement(i.Fragment,null,$&&i.createElement(i.Fragment,null,et(!0,r),i.createElement("div",{className:w})),Q(!1,J));default:return i.createElement(i.Fragment,null,Q(!0,J),$&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),et(!1,(0,p.tx)("hyperlink.edit"))))}case f._Y.WHITEBOARD:return i.createElement(i.Fragment,null,Q(!0,J),$&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),et(!1,(0,p.tx)("hyperlink.edit"))),q&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),i.createElement(d.D8,{dataTestId:"hyperlink.preview",role:"button",recordingKey:c.Pt(e,"unfurlHyperlinkPopup"),className:N,onMouseDown:V},(0,p.tx)("hyperlink.create_preview"))));default:return i.createElement(i.Fragment,null,Q(!0,J),X&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),ee),$&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),et(!1,(0,p.tx)("hyperlink.edit"))))}})())}function U(e){let{data:r,editorType:n,urlString:a,canEdit:o,onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d}=e;return i.createElement(x,{data:r,editorType:n,urlString:a,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d})}},811641:(e,r,n)=>{"use strict";n.d(r,{Jq:()=>u});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234),l=n(743282),c=n(613122);let d=(0,l.g)();var u=(e=>(e.ESSENTIAL="essential",e.TOOLS="tools",e.VIEW="view",e.ZOOM="zoom",e.TEXT="text",e.SHAPE="shape",e.SELECT="select",e.CURSOR="cursor",e.EDIT="edit",e.COPY="copy",e.TRANSFORM="transform",e.ARRANGE="arrange",e.COMPONENTS="components",e.ADVANCED="advanced",e.ACCESSIBILITY="accessibility",e))(u||{});i.forwardRef((e,r)=>{let{tabInfo:n,completedTabs:a,onNavClick:o}=e;return i.createElement(i.Fragment,null,n.map((s,l)=>i.createElement(p,{key:s.id,tabInfo:n,completedTabs:a,onNavClick:o,recordingKey:e.recordingKey,tab:s,index:l,ref:r})))});let p=i.forwardRef((e,r)=>{let{tab:n,index:a,onNavClick:l,completedTabs:u}=e,p=s.rf(s.Pt(e,n.id),"click",e=>{l(n.id)});return void 0!==n.active?i.createElement("div",{role:"tab",ref:e=>{r.current||(r.current=[]),r.current[a]=e},"aria-selected":n.active,"aria-controls":d,key:n.id,id:n.id,className:n.className,"data-completed":u[n.id],onClick:p,tabIndex:-1},n.displayName):i.createElement("div",{key:n.id,className:o()(n.className,c.GM)})})},225699:(e,r,n)=>{"use strict";n.d(r,{k:()=>i}),n(411855),n(188507),n(629019),n(979441),n(592096),n(818),n(226055),n(516398),n(396697),n(29680),n(595755),n(187882),n(544403),n(860168);let i="left-panel-container"},187882:(e,r,n)=>{"use strict";n.d(r,{Ye:()=>c,n0:()=>d}),n(411855),n(188507);var i=n(587670);n(358145),n(438741);var a=n(226055);n(356390),n(617453);var o=n(396697),s=n(29680);n(396462);var l=n(100197);function c(){let e=(0,a.GS)(),r=!(0,l.ut)(i.Ez5?.editorPreferences().showSidebar,o.R.showSidebar),n=(0,l.ut)(i.Ez5?.uiState().leftPanelCollapsedUI3,!o.R.showSidebar);return e?n:r}function d(){return(0,s.p8)("pagesList")}},664457:(e,r,n)=>{"use strict";n.d(r,{j:()=>m});var i=n(411855),a=n(587670),o=n(794272),s=n(268537),l=n(939863),c=n(416095),d=n(238405);let u=s.ms,p=s.c$,m="component-insert-leaf-context-menu";i.memo(function(){let{dropdownShown:e,defaultFileKeys:r,openFileKey:n}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,defaultFileKeys:e.library.defaultPublished.fileKeys,openFileKey:e.openFile?.key||null}));if(!e||e.type!==m)return null;let s=e.data.component,h=s.file_key===n;return r.includes(s.file_key)?null:i.createElement(u,{className:d.H,style:e.data.position},h?i.createElement(p,{recordingKey:`goToLocalComponent.${s.node_id}`,onClick:()=>a.glU.goToSymbolOrStateGroupById(s.node_id,!1)},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component")):i.createElement(p,{recordingKey:`goToSubscribedComponent.${s.node_id}`,href:(0,c.Gd)(s),target:"_blank"},(0,l.tx)("design_systems.instance_swap_picker.go_to_main_component")))})},756159:(e,r,n)=>{"use strict";n.d(r,{Cl:()=>L,I1:()=>N,jz:()=>P,pz:()=>C});var i=n(89865),a=n.n(i),o=n(966712),s=n(38580),l=n(374626),c=n(684107),d=n(711525),u=n(860601),p=n(696673),m=n(999881),h=n(661570),_=n(218103),g=n(94968),f=n(896446),E=n(49921),y=n(289704),b=n(335682),I=n(529928),T=n(279453),v=n(243987),S=n(58032),w=n(984968),A=n(173454);let N=(0,s.eU)(e=>{let r=e(b.yV);if(!r)return(0,d.Xm)();let n=r.parentOrgId,i=e(h.g);if(!i)return(0,d.Xm)();let a=!!(i&&r.folderId===i),o=e((0,c.sj)({fileKey:r.key??"",teamId:r.teamId??"-1",workspaceId:r.team?.workspaceId??null,orgId:n,group:(0,m.M)()??null})),s=e(p.JB),l=e(w.Me),u=(0,v.w5)(l);return(0,S.gM)(o,a,s,n,u)}),C=(0,I.OX)(A.o.LIBRARY,"SET_LIBRARY_PUBLISHING_MODE"),O=(0,I.bt)(e=>e.openFile?.publishedHubFile?.id),L=(0,s.eU)(null),R=(e,r)=>r,P=(()=>{let e=(0,l.M2)((0,s.eU)(e=>{let r=e(O),n={variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}};if(!r||!(0,o.kc)().cmty_lib_admin_publish&&!(0,o.kc)().piper_community_templates_publish)return n;let i=e((0,T.vsj)({hubFileId:r})),s=(0,_.J)(i),l=(0,f.o)(i),c=e((0,T.Acj)({hubFileId:r})),d=(0,E.F)(c),u=e((0,T.eHy)({hubFileId:r})),p=(0,y.k)({type:"community",value:u},!0),m=(0,y.c)({type:"community",value:u},!0),h=e((0,T.CfA)({hubFileId:r})),b=(0,g.i)(h);return n.variables=a()(m,"node_id"),n.variableSets=a()(p,"node_id"),n.styles=a()(d,"node_id"),n.components=a()(s,"node_id"),n.stateGroups=a()(l,"node_id"),n.modules=a()(b,"node_id"),n},u.lQ)),r=(0,I.Pj)(e,"SET_OPEN_HUB_FILE_PUBLISHED_LIVEGRAPH",{variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}}),n=(0,l.FZ)(r,R);return(0,I.S9)(n,r.reducer)})()},140796:(e,r,n)=>{"use strict";n.d(r,{aU:()=>y});var i=n(411855),a=n(188507),o=n(776250),s=n(320063),l=n(966712),c=n(255942);n(723325);var d=n(32863),u=n(582064),p=n(356390),m=n(283942),h=n(335682),_=n(241272),g=n(743415),f=n(362918);let E=e=>!!e.isNewAssetsPanel;function y(e){let{isVisible:r,query:n,placeholder:y,onChange:b,className:I,extraSpacing:T,hideXIcon:v,hideSearchIcon:S,isFigjam:w,isLibraryModalUi3:A,autofocus:N,selectOnFocus:C,entryPointForTracking:O,forwardedRef:L,recordingKey:R}=e,P=(0,a.wA)(),D=(0,h.q5)(),k=(0,a.d4)(e=>e.search.sessionId),M=(0,g.k)(),F=i.useRef(null),x=function({isVisible:e,autofocus:r,selectOnFocus:n,ref:a}){return i.useCallback(()=>{a?.current&&e&&r&&a.current.focus(n)},[r,e,a,n])}({isVisible:r,autofocus:N,selectOnFocus:C,ref:F}),U=i.useCallback(e=>!!(e.altKey&&p.Y5.isReady())&&(0,m.f7)(e,!0),[]);(0,s.h)(()=>{if(x(),!(0,l.kc)().asset_search_persistent_sessions){let e=function(){P(u.ky())};return e(),e}P(u.AY({entryPoint:"editor:assets_panel"}))});let B=i.useCallback(()=>{"editor:assets_panel"===O&&o.az.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:n,assetsPanelVersion:M,fileKey:D?.key,fileTeamId:D?.teamId??void 0,fileOrgId:D?.parentOrgId??void 0}),E(e)?e.onClearSearch():b(""),(0,l.kc)().asset_search_persistent_sessions||P(u.ky())},[O,e,P,n,M,D?.key,D?.teamId,D?.parentOrgId,b]),V=i.useCallback(e=>{O&&(!(0,l.kc)().asset_search_persistent_sessions&&""===e&&k?P(u.ky()):""===e||k||P(u.Dy({entryPoint:O})),b(e))},[P,O,k,b]),{trackAIAssetSearchWithSprig:G,stopCurrentSprigTrack:H}=(0,_.k)(n,k,D?.key),W=i.useCallback(()=>{H(),""===n||k||P(u.Dy({entryPoint:O})),"editor:assets_panel"===O&&o.az.trackDefinedEvent("assets_panel.search_focused",{assetsPanelVersion:M,fileKey:D?.key,fileTeamId:D?.teamId??void 0,fileOrgId:D?.parentOrgId??void 0}),E(e)&&e.onFocus()},[O,D?.key,D?.parentOrgId,D?.teamId,e,M,H,k,P,n]),K=i.useCallback(()=>{G(),"editor:assets_panel"===O&&o.az.trackDefinedEvent("assets_panel.search_unfocused",{assetsPanelVersion:M,fileKey:D?.key,fileTeamId:D?.teamId??void 0,fileOrgId:D?.parentOrgId??void 0}),E(e)&&e.onBlur()},[O,D?.key,D?.parentOrgId,D?.teamId,e,M,G]);return w||A?i.createElement(d.IW,{ref:(0,c.A)(F,L),className:I,focusOnMount:!1,query:n,placeholder:y,clearSearch:B,onChange:V,onFocus:W,onBlur:K,isKeyDownHandled:U,hideXIcon:v,recordingKey:R,withUI3Icon:A}):E(e)?i.createElement(f.K,{ref:(0,c.A)(F,L),onFocus:W,onBlur:K,focusOnMount:!1,query:n,clearSearch:B,onChange:V,placeholder:e.placeholder,isKeyDownHandled:U,recordingKey:R}):i.createElement(d.Lp,{ref:(0,c.A)(F,L),className:I,focusOnMount:!1,extraSpacing:T,query:n,placeholder:y,clearSearch:B,onChange:V,onFocus:W,onBlur:K,isKeyDownHandled:U,hideXIcon:v,hideSearchIcon:S,recordingKey:R,dataTestId:"asset-panel-search-bar-input"})}},448406:(e,r,n)=>{"use strict";n.d(r,{PI:()=>l,rp:()=>s});var i=n(91408),a=n(173454),o=n(230997);(0,i.hG)(o.ZV),(0,i.hG)(o.FX);var s=(e=>(e.WIDE="WIDE",e.SMALL="SMALL",e.NORMAL="NORMAL",e))(s||{});function l(e,r){let n=!0,i=!0;for(let r of e){let e,o;if(r.type!==a.PW.STYLE){if("min_node_width"in r)e=r.min_node_width,o=r.min_node_height;else{if(!("width"in r))continue;e=r.width,o=r.height}if(!e||!o)return"NORMAL";if(e<3*o&&(n=!1),(e>64||o>64)&&(i=!1),!n&&!i)break}}return n?"WIDE":i&&!r?"SMALL":"NORMAL"}},48515:(e,r,n)=>{"use strict";n.d(r,{I:()=>i});var i=(e=>(e.ALL="all",e.RECENT="recent",e.LOCAL="local",e.FILE="file",e))(i||{})},734013:(e,r,n)=>{"use strict";n.d(r,{DG:()=>a}),n(411855);var i=n(286640);function a(e,r){null!==i.x4&&i.x4.setItem(`library-section-expanded-${e}`,JSON.stringify(r))}},790429:(e,r,n)=>{"use strict";n.d(r,{J:()=>l});var i=n(411855),a=n(188507),o=n(662275);n(284321),n(49116),n(173454);var s=n(776018);function l(e,r,n){let l=(0,a.wA)(),c=(0,a.d4)(e=>e.modalShown);return i.useCallback(()=>{c?.type===s.V&&c?.data&&l(o.hm({data:{...c?.data,asset:e,sectionPosition:r,sectionNameForTracking:n},type:s.V}))},[e,l,c,r,n])}},811529:(e,r,n)=>{"use strict";n.d(r,{ND:()=>_,Sg:()=>h,cx:()=>T,ff:()=>g,mZ:()=>p,o6:()=>y,sJ:()=>f}),n(411855),n(188507);var i=n(459401);n(776250);var a=n(966712);n(632430);var o=n(226055),s=n(44892),l=n(473744);n(335682);var c=n(416095);n(933342);var d=n(173454);n(279145);var u=n(479296);n(743415);let p="assets-panel",m=()=>({subscribedFiles:[],fileKeyToSubscribedItems:{}}),h=(0,u.n)((e,r)=>{let n=_((0,s.Jl)(e)),i=_(r,e);return{allItems:[].concat(n.allItems,i.allItems),publishedItems:[].concat(n.publishedItems,i.publishedItems),privateItems:[].concat(n.privateItems,i.privateItems),erroneousItems:[].concat(n.erroneousItems,i.erroneousItems),numUpdates:n.numUpdates+i.numUpdates,numPublished:n.numPublished+i.numPublished}});function _(e,r,n){let i=(0,s.y3)(e),a=[],o=[],l=[],u=n?Object.values(n):[],p=0,m=0,h=new Set;if(r)for(let e of Object.keys(r)){let n=r[e],i=n.containing_frame?.containingStateGroup?.nodeId;i&&n.old_key&&h.add(i)}for(let e of i)if(e.deletedFromSceneGraph||(a.push(e),e.status===d.E8.NOT_STAGED||e.status===d.E8.DELETED?l.push(e):o.push(e)),(0,s.UB)(e.status)&&m++,e.status!==d.E8.CURRENT&&e.status!==d.E8.NOT_STAGED||(e.type===d.PW.COMPONENT||e.type===d.PW.STATE_GROUP)&&(0,c.Hb)(e.status)&&e.old_key||e.type===d.PW.STATE_GROUP&&(0,c.Hb)(e.status)&&h.has(e.node_id)){p++;continue}return{allItems:a,publishedItems:o,privateItems:l,erroneousItems:u,numUpdates:p,numPublished:m}}function g(e,r,n,i,a,o){var s;let l=E(e.published.stateGroups,n,e,r,!!i),c=(s=!!i,E(e.published.components,n,e,r,s,e=>e.containing_frame?.containingStateGroup==null)),d={},u={};for(let e of c.subscribedFiles)(!a||e.key===a)&&(o&&e.key===o||(d[e.key]=e,u[e.key]=(u[e.key]||[]).concat(c.fileKeyToSubscribedItems[e.key])));for(let e of l.subscribedFiles)(!a||e.key===a)&&(o&&e.key===o||(d[e.key]=e,u[e.key]=(u[e.key]||[]).concat(l.fileKeyToSubscribedItems[e.key])));return{subscribedFiles:Object.values(d),fileKeyToSubscribedItems:u}}function f(e,r,n,a,o){let s=e.data;if(!s)return m();let l=[],d={};for(let e in Object.entries(s).forEach(([e,i])=>{let s=r[e];s&&(!n||(0,c.jk)(a,n,s,o))&&i.length>0&&(d[e]=[...i])}),d){let n=r[e];n&&l.push(n)}return(0,i.sortAlphabeticallyByProperty)(l,"name"),{subscribedFiles:l,fileKeyToSubscribedItems:d}}function E(e,r,n=null,a=null,o,s=()=>!0){let l=Object.create(null);for(let i in e){let d=e[i];for(let e in d){let i=r[e];if(!i||a&&n&&!(0,c.jk)(n,a,i,o))continue;let u=[];for(let r in d[e]){let n=d[e][r];s(n)&&u.push(n)}u.length>0&&(l[e]=u)}}let d=[];return Object.keys(l).forEach(e=>{let n=r[e];n&&d.push(n)}),(0,i.sortAlphabeticallyByProperty)(d,"name"),{fileKeyToSubscribedItems:l,subscribedFiles:d}}function y(e,r,n,i){let a=b(e.published.stateGroups,n,e,r,i),o=b(e.published.components,n,e,r,i,e=>e.containing_frame?.containingStateGroup==null),s={},l={};for(let e of[o,a])for(let r of e.subscribedHubFiles)s[r.id]=r,l[r.id]=(l[r.id]||[]).concat(e.hubFileIdToSubscribedItems[r.id]);return{subscribedHubFiles:Object.values(s),hubFileIdToSubscribedItems:l}}function b(e,r,n=null,a=null,o,s=()=>!0){let l={};for(let i in e){let d=e[i];for(let e in d){let i=r[e];if(!i||n&&a&&!(0,c.jk)(n,a,{key:i.id},o))continue;let u=[];for(let r in d[e]){let n=d[e][r];s(n)&&u.push(n)}u.length>0&&(l[e]=u)}}let d=Object.keys(l).map(e=>r[e]);return(0,i.sortAlphabeticallyByFn)(d,e=>e.versions[e.current_hub_file_version_id].name),{hubFileIdToSubscribedItems:l,subscribedHubFiles:d}}var I=(e=>(e[e.Grid=0]="Grid",e[e.List=1]="List",e))(I||{});function T(e){let r=(0,o.GS)();return!!e&&(e.type===d.PW.MODULE||(e.type===d.PW.COMPONENT||e.type===d.PW.STATE_GROUP)&&(r&&(0,a.kc)().dse_better_drag_previews||(0,l.o)(e)))}},781525:(e,r,n)=>{"use strict";n.d(r,{Ee:()=>O});var i=n(411855);n(188507);var a=n(421757),o=n(183686),s=n(398634),l=n(629019),c=n.n(l),d=n(153234),u=n(522739),p=n(723325),m=n(46481),h=n(762638),_=n(939863);n(963067);var g=n(226055);n(298527);var f=n(663767),E=n(715762);n(776250),n(320063),n(295680),n(335682),n(132135),n(811529);var y=n(721910);n(623680);let b="empty_states--emptyStateContent--i0Ad8",I="empty_states--emptyStateIcon--kLLCD",T="empty_states--emptyStateIconWrapper--SHUbu",v="empty_states--emptyStateText--gZR-A",S="empty_states--link--kfp3o blue_link--blueLink--9rlnd";var w=n(400232),A=n(951864),N=n(337987);let C=(e,r)=>e?r?E.r6.BROWSE_LIBRARIES_ACTIONS:E.r6.BROWSE_LIBRARIES_ASSETS_PANEL:r?E.r6.ACTIONS_EXPLORE_LIBRARIES_LINK:E.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK;function O({onClickExplore:e,width_ui3:r,fromActionsModal:n,bgTransparentUI3:a=!1}){let o=(0,g.GS)(),s=i.useMemo(()=>C(o,!!n),[n,o]),{onToggleLibraryModal:l}=(0,f.u)({entrypoint:s,modalType:"editor"}),c=i.useCallback(()=>{e?.(),l()},[e,l]);return o?i.createElement(L,{onClick:c,width:r,bgTransparent:a,fromActionsModal:!!n}):i.createElement(R,{onClick:c})}function L({onClick:e,width:r,bgTransparent:n=!1,fromActionsModal:s}){let{setKeyboardNavigationElement:l}=(0,p.M3)({path:[y.ON.CONTENTS,y.zr.CTA],disabled:s});return i.createElement("div",{className:c()("empty_states--ui3EmptyState--8bWkh",h.cx.if(n,h.cx.bgTransparent,h.cx.colorBgSecondary).$),style:{width:r}},i.createElement("div",{className:"empty_states--ui3LibraryIcon--56jRu"},i.createElement(o.l,null)),i.createElement("div",{className:"empty_states--ui3EmptyStateTitle--UwoAZ"},(0,_.tx)("design_systems.assets_panel.empty_state_title_ui3")),i.createElement("div",null,i.createElement("div",{className:"empty_states--ui3EmptyStateSubtitle---Yamk"},(0,_.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")),i.createElement("a",{href:"https://help.figma.com/hc/articles/360038662654",target:"_blank",rel:"noopener",className:"empty_states--ui3Link--jomud empty_states--link--kfp3o blue_link--blueLink--9rlnd"},(0,_.tx)("design_systems.assets_panel.learn_more"))),i.createElement(a.$n,{onClick:e,recordingKey:d.Pt("assetsEmptyState","exploreLibraries"),ref:l},(0,_.tx)("design_systems.assets_panel.empty_state_cta_ui3")))}function R({onClick:e}){return i.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd"},i.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,_.tx)("design_systems.assets_panel.components")),i.createElement("div",{className:b},i.createElement(m.U,{className:I,svg:w.A},i.createElement("div",{className:T},i.createElement(s.P,null))),i.createElement("div",{className:v},(0,_.tx)("design_systems.assets_panel.create_a_component")," ",i.createElement("a",{className:S,href:"https://help.figma.com/hc/articles/360038662654",target:"_blank",rel:"noopener"},(0,_.tx)("design_systems.assets_panel.learn_more")))),i.createElement("div",{className:b},i.createElement(m.U,{className:I,svg:A.A,fallbackSvg:N.A},i.createElement("div",{className:T},i.createElement(o.l,null))),i.createElement("div",{className:v},i.createElement(u.GG,{className:S,onClick:e,recordingKey:d.Pt("assetsEmptyState","exploreLibraries")},(0,_.tx)("design_systems.assets_panel.explore_libraries")))))}},238837:(e,r,n)=>{"use strict";function i(e,r){let n={},i={},a=[];return e.forEach(e=>{let o=r(e);if(!o)return;let s=o.containing_frame;if(s?.pageId){let r=s.pageId,a=s.pageName||"";i[r]=a,n[r]=n[r]||[],n[r].push(e)}else a.push(e)}),{itemsByPageId:n,pageNamesByPageId:i,itemsWithoutPage:a}}n.d(r,{VL:()=>a,fM:()=>o,tz:()=>i}),n(459401),n(966712),n(939863),n(680681),n(473744),n(416095),n(173454),n(811529);let a="0:1";function o(e,r,n,i){if(0!==n.length){if(1===Object.keys(e).length&&1===Object.keys(r).length){let r=Object.keys(e)[0];e[r].push(...n),n.splice(0,n.length)}else r[a]&&e[a]?(e[a].push(...n),n.splice(0,n.length)):i&&(r[a]||(r[a]="Page 1"),e[a]=[...n],n.splice(0,n.length))}}function s(e,r,n){sortAlphabeticallyOrPrioritizeExamplesByFn(r,{sortFn:e=>e.name,priorityFn:e=>isExampleAsset(e,{isPreset:n?.isPreset??!1})});let i=Object.create(null);for(let n of r){let r=getNameParts(n.name),a="";for(let o=0;o<r.length;o++){let s;let l=r[o],c=a,d=o<r.length-1;if(a+=l+(d?"/":""),s=i[c]?i[c]:e,d&&!i[a]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};i[a]=e,s.subtrees.push(e)}d||s.items.push(n)}}}function l(e,r,n){let i={},a=[],o=[],l={};for(let e of r)if(getFeatureFlags().dse_templates_proto&&e.type===AssetType.COMPONENT&&isTemplate(e))a.push(e);else if(isCanvasAsset(e)&&e.containing_frame?.nodeId&&""!==e.containing_frame.name){let r=e.containing_frame.nodeId;i[r]=i[r]||[],i[r].push(e),l[r]=e.containing_frame}else o.push(e);if(getFeatureFlags().dse_templates_proto&&a.length>0){let r={type:"NAME_GROUP",name:"Templates",key:`${e.key}-${c}`,items:[],subtrees:[]};e.subtrees.push(r),s(r,a,{isPreset:n?.isPreset??!1})}let d=Object.keys(i).length;if(d>0||1===d&&o.length){for(let r in i){let a=l[r],o=i[r],c={type:"NAME_GROUP",name:a.name||"",key:r,items:[],subtrees:[]};e.subtrees.push(c),s(c,o,{isPreset:n?.isPreset??!1})}s(e,o,{isPreset:n?.isPreset??!1})}else s(e,getFeatureFlags().dse_templates_proto?r.filter(e=>!isTemplate(e)):r,{isPreset:n?.isPreset??!1})}let c="template-subtree";var d=(e=>(e[e.COMPONENT=0]="COMPONENT",e[e.TEMPLATE=1]="TEMPLATE",e))(d||{})},44160:(e,r,n)=>{"use strict";n.d(r,{KO:()=>f});var i=n(411855),a=n(188507),o=n(776250),s=n(374626),l=n(395900),c=n(607283),d=n(940596),u=n(233333);let p="performance.ds_eco.asset_panel_loading",m=new l.jk(p,{}),h=((0,d.rt)(!1),(0,d.rt)(!1)),_=(e,r)=>{let n=(0,a.d4)(e=>e.openFile),l=(0,u.D)(),[d,_]=(0,s.fp)(h);i.useEffect(()=>{if(!l&&!d&&r){_(!0);let r=m.stop();r&&(0,o.sx)(p,{elapsedMs:r,fileKey:n?.key,teamId:n?.teamId,orgId:n?.parentOrgId,isUi3RedesignedAssetPanel:!1,numLibraries:e.allElementsTree.allElements.length,numComponents:g(e.allElementsTree.allElements),numComponentsShown:e.elementsInView.filter(e=>e.type===c.zq.TILE).length,numSectionsShown:e.elementsInView.filter(e=>e.type===c.zq.ROW).length},{forwardToDatadog:!0})}},[e.isDirty,e.elementsInView,e.allElementsTree,l,d,n,_,r])},g=e=>{let r=0;return e.forEach(e=>{e.type===c.zq.TILE?r+=1:e.type===c.zq.ROW&&(0,c.We)(e)&&(r+=g(e.children))}),r};function f({elementsCache:e,hasRenderedItems:r}){return _(e,r),null}},938720:(e,r,n)=>{"use strict";n.d(r,{lX:()=>U});var i=n(411855),a=n(188507);n(587670);var o=n(629019),s=n.n(o),l=n(512495),c=n.n(l),d=n(568214),u=n(91408);n(320063);var p=n(153234);n(554322);var m=n(572206),h=n(939863),_=n(428654);n(798099);var g=n(981354),f=n(809831),E=n(226055),y=n(44892);n(356390);var b=n(141123),I=n(232205),T=n(237929),v=n(267931),S=n(49116),w=n(776615),A=n(173454),N=n(498606),C=n(186380),O=n(776018),L=n(820396),R=n(421722),P=n(811529),D=n(870061),k=n(230997);let M="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",F=(0,u.hG)(k.QU);function x(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case"grid-compact":case void 0:return!1}}function U(e){var r,n,a;let{item:o}=e,{nameStyle:s,background:l}=(r=e.item,n=e.displayType,a=e.noBackground,i.useMemo(()=>{let e={};if(a)return{nameStyle:e,background:null};let i=(0,y.zR)(r,null);return i&&!x(n)&&(e.background=_.F.format(i),e.color=(0,d.G$)(i)),{nameStyle:e,background:i}},[n,a,r])),u=e.showName;(e.hideNameOverlay||e.shouldShowNamePopout&&!x(e.displayType))&&(u=!1);let p=c()({},e,{style:{marginLeft:e.gutterWidth}});return i.createElement(B,{...p},i.createElement(V,{...e},i.createElement(G,{...e,backgroundColor:l,className:void 0,style:e.isDragged?void 0:e.style}),u&&i.createElement("div",{className:function(e,r){switch(e){case"grid":case"grid-compact":case void 0:return r;case"list-compact":return"library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa";case"list":case"list-no-padding":return"library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa"}}(e.displayType,"library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa"),style:s},x(e.displayType)&&!e.isSearch?(0,T.kH)(o.name):o.name),e.item.type===A.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&i.createElement(W,{isList:x(e.displayType),numVariants:e.numVariants})))}(0,u.hG)(k.Us);let B=i.memo(i.forwardRef(function(e,r){let n;let a=x(e.displayType),o=i.useRef(null),s=r||o,l=e.height||120,c=e.width||120;l-=l%2,c-=c%2;let d=e.itemPadding??0;c+=2*d,l+=2*d;let u=a?e.style:{...e.style,width:c,height:l},p=(0,D.o)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:a});n="list-compact"===e.displayType?"library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":"list"===e.displayType?"library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":"list-no-padding"===e.displayType?"library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH":e.isDragged?"library_item_tile--tile--okxBn":e.isFigJam||e.isSlides?"library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn":e.useBaseTile?"library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt":"grid-compact"===e.displayType?"library_item_tile--tileGridCompact--a7lPd library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt":"library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt";let m=e.item.type===A.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,h=e.shouldShowNamePopout&&!a,_=!e.shouldHideDescription&&e.item.description;if(e.isFigJam||e.isSlides)return i.createElement("div",{className:`${n} ${e.className||""}`,style:u,onMouseUp:e.onMouseUp,"data-tooltip":e.isDragged?void 0:(0,T.kH)(e.item.name),"data-tooltip-type":e.isDragged?void 0:N.Ib.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove},e.children);if(p){let r=(_||h||m)&&!e.shouldHideTooltip;return i.createElement("div",{ref:s,className:`${n} ${e.className||""}`,style:u,onMouseUp:e.onMouseUp,"data-tooltip-type":r?N.Ib.SPECIAL:void 0,"data-tooltip":r?R.B:void 0,"data-tooltip-component-name":h?(0,T.kH)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":_?e.item.description:void 0,"data-tooltip-num-variants":m?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0},e.children)}return i.createElement("div",{ref:s,className:`${n} ${e.className||""}`,style:u,onMouseUp:e.onMouseUp},e.children)}));function V(e){let r="whiteboard"===(0,f.lg)(),n=x(e.displayType),o=(0,P.cx)(e.item),s=(0,v.H)(),l=(0,a.d4)(e=>e.modalShown?.type),c=i.useCallback(()=>{l===O.V&&s()},[l,s]),{onInsertableResourcePointerDown:d,dragState:u}=(0,I.j)({resource:e.item,isList:n,sourceForTracking:e.draggable?.sourceForTracking||"",sectionNameForTracking:e.draggable?.sectionNameForTracking,sectionDepth:e.draggable?.sectionDepth,clickToInsert:!!e.draggable?.clickToInsert,afterSuccessfulInsert:e.draggable?.afterSuccessfulInsert,draggingThumbMaxDimensions:o?void 0:new m.Mi((e.width||0)-F,(e.height||0)-F),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:l===O.V,onDragStart:()=>{e.draggable?.onDragStart?.(),c()}}),h=`componentThumb.${e.recordingNodePath}`,_=p.rf(h,"contextmenu",r=>{e.onContextMenu&&e.onContextMenu(r)},{recordMetadata:e=>{let r=e.currentTarget.getBoundingClientRect(),n=new m.Mi(r.left,r.top),i=new m.Mi(e.clientX,e.clientY).subtract(n);return{percentageMousePos:new m.Mi(i.x/r.width,i.y/r.height)}},playbackMetadata:r=>{let n=e.height||0,i=e.width||0;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:n,width:i})},clientX:0+r.percentageMousePos.x*i,clientY:0+r.percentageMousePos.y*n}}}),g=p.rf(h,"click",r=>{e.onItemClick&&e.onItemClick(r,e.item)});return i.createElement(i.Fragment,null,i.createElement("div",{className:(r||e.isSlides)&&u?"library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH":"library_item_tile--thumbAndNameWrapper--FT1HH",style:{padding:e.itemPadding},onPointerDown:r=>{e.draggable&&d(r)},onContextMenu:_,onDoubleClick:r=>{e.onItemDoubleClick&&e.onItemDoubleClick(r,e.item)},onClick:g,"data-testid":h},e.children),i.createElement(b.q,{dragState:u,isList:n}))}function G({displayType:e,item:r,isDragged:n,isFigJam:a,isSlides:o,backgroundColor:l,shouldShowShadowOnHover:c,height:d=120,width:u=120,noBackground:p,style:m,alwaysShowBorder:h,thumbWrapperClassName:f}){let E;let y=i.useContext(w.uW),b=(0,g.Xz)(),I=d-d%2,T=u-u%2,v=x(e);E=v?p?"library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6":"library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6":p||a?"library_item_tile--thumbWrapperNoBg--dq7A6":`${M} ${M}`;let S={width:2*T,height:2*I,padding:a?0:F,...m};return p||!l||a||(h||o||(S.boxShadow=(0,w.pw)(y,l,b)),S.background=_.F.format(l)),n&&(v?(S.width=void 0,S.height=void 0):S.background=void 0),i.createElement("div",{className:"library_item_tile--thumbContainer--7rKmQ",style:n&&v?void 0:{width:T,height:I}},i.createElement("div",{className:s()(E,f,{"library_item_tile--tileBorder--clelb":h}),style:S},r.type===A.PW.VARIABLE_SET?i.createElement(H,{variableSetID:r.node_id}):i.createElement(C.M,{className:c?"library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO":a||o?"library_item_tile--thumb--MNoWO":"library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",item:r,shouldGenerateLocalThumbnail:!0,draggable:!1})))}let H=i.memo(function({variableSetID:e}){let r=(0,a.d4)(e=>(0,S.a3)(e)),n=i.useMemo(()=>{let n=new Set;for(let i of Object.values(r))if(i.variableSetId===e&&(n.add(i.resolvedType),n.size>=3))break;return[...n.values()]},[r,e]),o=(n.length-1)/2;return i.createElement("div",{className:"library_item_tile--variableSetThumb--cCo2-"},n.map((e,r)=>i.createElement("div",{className:"library_item_tile--variableTypeIcon--58dL0",key:e,style:{marginTop:(o-r)*20}},i.createElement(L.i,{type:e,showTooltip:!1}))))});function W({isList:e,numVariants:r}){let n=(0,E.GS)();return r<=1?null:i.createElement("div",{className:e?"library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu":"library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu","data-tooltip":(0,h.t)("design_systems.assets_panel.variant_count",{numVariants:r}),"data-tooltip-type":N.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":n?500:void 0,"data-tooltip-show-immediately":!n||void 0,"data-tooltip-hide-immediately":!0},r)}},721910:(e,r,n)=>{"use strict";n.d(r,{JS:()=>o,Mk:()=>s,ON:()=>c,c_:()=>i,nE:()=>a,o8:()=>l,zr:()=>g});let i="components",a="examples",o="templates",s="assets",l="privateToThisFile";var c=(e=>(e[e.HEADER=0]="HEADER",e[e.BREADCRUMB=1]="BREADCRUMB",e[e.CONTENTS=2]="CONTENTS",e))(c||{}),d=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e[e.PAGES=1]="PAGES",e[e.ASSETS=2]="ASSETS",e))(d||{}),u=(e=>(e[e.SEARCH_AND_FILTER=0]="SEARCH_AND_FILTER",e[e.LIBRARY_SEARCH_CHIP=1]="LIBRARY_SEARCH_CHIP",e))(u||{}),p=(e=>(e[e.SEARCH=0]="SEARCH",e[e.SETTINGS=1]="SETTINGS",e))(p||{}),m=(e=>(e[e.BACK=0]="BACK",e[e.LIBRARY=1]="LIBRARY",e[e.ELLIPSIS=2]="ELLIPSIS",e[e.STUBS=3]="STUBS",e))(m||{}),h=(e=>(e[e.TEMPLATES=0]="TEMPLATES",e[e.EXAMPLES=1]="EXAMPLES",e[e.COMPONENTS=2]="COMPONENTS",e[e.FOLDERS=3]="FOLDERS",e))(h||{}),_=(e=>(e[e.LOCAL_AND_SUBSCRIBED=0]="LOCAL_AND_SUBSCRIBED",e[e.PRESETS=1]="PRESETS",e))(_||{}),g=(e=>(e[e.CTA=0]="CTA",e[e.UI_KITS=1]="UI_KITS",e))(g||{})},718242:(e,r,n)=>{"use strict";n.d(r,{LH:()=>_,R2:()=>f,XI:()=>g,Yc:()=>p,ud:()=>h,uo:()=>m});var i=n(411855),a=n(459401);n(776250);var o=n(966712),s=n(38580),l=n(696673),c=n(680681);n(335682),n(48515),n(721910);var d=n(623680),u=n(799550);function p(){let{currentView:e}=(0,d.wV)(),[r]=(0,u.MA)();return e===d.S5.Assets?r:void 0}function m(e,r){let n=[...e];return r&&(0,c.NX)(r)?(0,c.k9)({libraries:n,approvedLibraryKeysByResourceType:r}):(0,a.sortAlphabeticallyByProperty)(n,"name"),n}function h(e,r){return m(e.map(e=>({...e,key:e.fileKey})),r)}function _(e){let r=[...e];return(0,a.sortAlphabeticallyByFn)(r,e=>e.versions[e.current_hub_file_version_id].name),r}function g(e,{includeEmptyLibraries:r}={}){let n=e.numComponents+e.numStateGroups,i=(0,o.u4)("dse_editor_templates_v1",e.numModuleAssets,0)??0;return r||n>0||i>0?{name:e.name,fileKey:e.fileKey,numComponents:n,numTemplates:i,thumbnailUrl:e.thumbnailUrlOverride??e.thumbnailUrl,thumbnailShouldCover:!!e.thumbnailGuid||(0,l.wJ)(e.fileKey)}:null}function f(e,r=8){let[n,a]=i.useState(window.innerHeight);i.useEffect(()=>{let e=()=>{a(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=i.useMemo(()=>n-(e??0)-r,[r,e,n]);if(e)return o}(0,s.eU)(!1)},905485:(e,r,n)=>{"use strict";n.d(r,{G:()=>o});var i=n(411855);let a=i.createContext({getLibrary:()=>void 0,getPage:()=>void 0,getFolder:()=>void 0});function o(){return i.useContext(a)}},836328:(e,r,n)=>{"use strict";n.d(r,{MB:()=>a});var i=n(411855);function a({onBoth:e,onClick:r,onKeyDown:n}){return i.useCallback(i=>{e?.(i),0!==i.detail?r?.(i):n?.(i)},[e,r,n])}n(498750),n(723325),n(356390),n(283942),n(721910),n(718242),n(623680),n(205236),n(292072);let o=i.createContext(null)},606624:(e,r,n)=>{"use strict";n.d(r,{ZX:()=>s,r6:()=>a});var i=n(411855),a=(e=>(e[e.Mount=0]="Mount",e[e.Back=1]="Back",e[e.Forward=2]="Forward",e[e.ToggleView=3]="ToggleView",e))(a||{});let o=(0,i.createContext)({lastNavAction:0,lastNavDirection:0,setLastNavAction:()=>{},lastActionWasBackSwipe:!1});function s(){return(0,i.useContext)(o)}},977144:(e,r,n)=>{"use strict";n.d(r,{hK:()=>s});var i=n(411855);n(188507);var a=n(297666);n(522739),n(827586);var o=n(988022);function s({height:e}){return i.createElement("div",{style:{height:e}})}n(843495),n(335682),n(914214),n(734017),(0,a.s)((e,r,n,i)=>{(0,o.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:r,fileTeamId:n,fileOrgId:i})},500)},366508:(e,r,n)=>{"use strict";n.d(r,{Y:()=>E});var i=n(966712),a=n(607283),o=n(939863),s=n(696673),l=n(473744),c=n(237929),d=n(137459),u=n(238837),p=n(721910),m=n(718242);function h(e){let r=(0,c.ke)(e.name),n=e.containing_frame?.name;return n?[n,...r]:r}function _(e,r="",{isPreset:n}){let i=new Map,o=[];(0,l.gO)(e,{sortFn:e=>h(e).join("/"),priorityFn:e=>(0,l.Nz)(e,{isPreset:n})});let s=Object.create(null);for(let n of e){let e=h(n),l="";for(let c=0;c<e.length;c++){let d=e[c],u=l,p=c<e.length-1;l+=d+(p?"/":"");let m=null;if(s[u]&&(m=s[u]),p){let n=s[l]??{name:d,key:`${r}-${e.slice(0,c+1).join("/")}`,items:[],subtrees:new Map,type:a.l$.NAME_GROUP,previewAsset:void 0};s[l]||(s[l]=n,m?m.subtrees.set(d,n):i.set(d,n))}p||(m?m.items.push(n):o.push(n))}}return i.forEach(e=>{(function e(r){r.previewAsset=y(r),r.subtrees.forEach(r=>e(r))})(e)}),{sortedItems:o,sortedSubtrees:i}}function g(e,r,{isPreset:n}){let s=new Map,{itemsByPageId:c,pageNamesByPageId:d,itemsWithoutPage:m}=(0,u.tz)(e,e=>e),{itemsByPageId:h,pageNamesByPageId:g,itemsWithoutPage:f}=(0,u.tz)(r,e=>e),E={...d,...g};(0,u.fM)(c,E,m),(0,u.fM)(h,E,f,!0);let b=Object.keys(E);for(let e of((0,l.gO)(b,{sortFn:e=>E[e],priorityFn:e=>(0,l.dS)(E[e],{isPreset:n})}),b)){let r=E[e],d=e in c?c[e]:void 0,u=d,m=[],g=null,f=null;if((0,i.kc)().dse_preset_libraries&&d&&d.length>0){u=d.filter(e=>!(0,l.Nz)(e,{isPreset:n}));let{sortedItems:e,sortedSubtrees:r}=_(m=d.filter(e=>(0,l.Nz)(e,{isPreset:n})),"examples",{isPreset:n});m.length>0&&(f={name:(0,o.t)("design_systems.assets_panel.examples"),items:e,subtrees:r,key:p.nE,type:a.l$.COMPONENTS,previewAsset:void 0})}if(u&&u.length>0){let{sortedItems:e,sortedSubtrees:r}=_(u,"components",{isPreset:n});g={name:(0,o.t)("design_systems.assets_panel.components"),items:e,subtrees:r,key:p.c_,type:a.l$.COMPONENTS,previewAsset:void 0}}let b=null,I=h[e];if(I&&I.length>0){let{sortedItems:e,sortedSubtrees:r}=_(I,"templates",{isPreset:n});b={name:(0,o.t)("design_systems.assets_panel.templates"),items:e,subtrees:r,key:p.JS,type:a.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:T,sortedSubtrees:v}=_([...m??[],...u??[],...I??[]],"assets",{isPreset:n}),S={name:r,items:T,subtrees:v,key:p.Mk,type:a.l$.COMPONENTS,previewAsset:void 0},w={name:r,id:e,previewAsset:function({componentSubtree:e,exampleSubtree:r,templateSubtree:n}){let i=y(r),a=y(n),o=y(e);return i||a||o}({componentSubtree:g,exampleSubtree:f,templateSubtree:b}),components:g,examples:f,templates:b,assets:S};s.set(e,w)}return s}function f(e,r){let{allItems:n,publishedItems:i,privateItems:a,numPublished:o}=e;return o>0&&r&&a.length>0?i:n}function E({localComponentsInfo:e,localTemplatesInfo:r,localThumbnailUrl:n,localThumbnailShouldCover:l,subscribedComponentsInfo:c,subscribedTemplatesInfo:u,subscribedCommunityComponentsInfo:h,subscribedCommunityTemplatesInfo:E,canPublish:y,openFileKey:b,approvedLibraryKeysByResourceType:I}){let{fileKeyToSubscribedItems:T,subscribedFiles:v}=c,S=[...v],w={};if((0,i.kc)().dse_editor_templates_v1&&u)for(let e of(w=u.fileKeyToSubscribedItems,u.subscribedFiles))S.find(r=>r.key===e.key)||S.push(e);let A=function(e,r,n,i){let a=new Map;for(let o of(0,m.uo)(e,i)){let e=o.key,i=r[e]??[],s=n[e]??[],l=g(i,s,{isPreset:!1}),c={name:o.name,fileKey:e,pages:l,numComponents:i.length,numTemplates:s.length,thumbnailUrl:o.thumbnail_url_override??o.thumbnail_url,thumbnailShouldCover:!!o.thumbnail_guid};a.set(e,c)}return a}(S,T,w,I),N=function(e,r){if(!e&&!r)return new Map;let{hubFileIdToSubscribedItems:n,subscribedHubFiles:i}=e??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},{hubFileIdToSubscribedItems:a,subscribedHubFiles:o}=r??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},s=[...i,...o],l=new Map;for(let e of(0,m.LH)(s)){let r=e.id,i=n[r]??[],o=a[r]??[],s=g(i,o,{isPreset:!0});if(i.length+o.length>0){let n={name:(0,d.oA)(e),fileKey:r,pages:s,numComponents:i.length,numTemplates:o.length,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0};l.set(r,n)}}return l}(h,(0,i.kc)().dse_editor_templates_v1?E:void 0),C=function(e,r,n,i,l,c){let{privateItems:d,numPublished:u}=e,{privateItems:m,numPublished:h}=r??{privateItems:[],numPublished:0},E=u+h>0&&l&&d.length+m.length>0,y=f(e,l),b=r?f(r,l):[],I=(0,s.wJ)(c),T=g(y,b,{isPreset:I}),v={name:(0,o.t)("design_systems.assets_panel.local_assets"),fileKey:c,pages:T,numComponents:y.length,numTemplates:b.length,thumbnailUrl:n,thumbnailShouldCover:i};if(E){let e=null;if(d.length>0){let{sortedItems:r,sortedSubtrees:n}=_(d,"p_components",{isPreset:I});e={name:(0,o.t)("design_systems.assets_panel.components"),items:r,subtrees:n,key:p.c_,type:a.l$.COMPONENTS,previewAsset:void 0}}let r=null;if(m.length>0){let{sortedItems:e,sortedSubtrees:n}=_(m,"p_templates",{isPreset:I});r={name:(0,o.t)("design_systems.assets_panel.templates"),items:e,subtrees:n,key:p.JS,type:a.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:n,sortedSubtrees:i}=_([...d??[],...m??[]],"assets",{isPreset:I}),s={name:(0,o.t)("design_systems.assets_panel.assets"),items:n,subtrees:i,key:p.Mk,type:a.l$.COMPONENTS,previewAsset:void 0},l={name:(0,o.t)("design_systems.assets_panel.hidden"),id:p.o8,previewAsset:d[0]??m[0],components:e,examples:null,templates:r,assets:s};v.pages.set(p.o8,l)}return v}(e,r,n,l,y,b),O=new Map([...A,...N]);return O.set(C.fileKey,C),{localAssets:C,libraries:A,presets:N,allLibrariesUnsorted:O}}function y(e){let r=e?function e(r){let n=Array.from(r.items.values());for(let[i,a]of r.subtrees.entries())n.push(...e(a));return n}(e):[];return r.length>0?r[0]:void 0}},623680:(e,r,n)=>{"use strict";n.d(r,{S5:()=>m,wV:()=>E});var i=n(411855),a=n(358145),o=n(374626),s=n(940596),l=n(721910),c=n(905485),d=n(606624),u=n(799550),p=n(858855),m=(e=>(e.Libraries="All libraries",e.Pages="Library",e.Assets="Page",e.Search="Search",e.Recents="Recents",e))(m||{});let h=(0,s.rt)({}),_=(0,s.rt)(!1),g=(0,s.rt)(!1),f=e=>(e=>{let{currentView:r,libraryKey:n,pageId:i,folderPath:a}=e;switch(r){case"All libraries":if(n||i||a)return!1;break;case"Library":if(!n||i||a)return!1;break;case"Page":if(!n||!i)return!1}return!0})(e)?e:{currentView:"All libraries",libraryKey:void 0,pageId:void 0,folderPath:void 0};function E(){let{libraryKey:e,pageId:r,folderPath:n,currentView:s,setNavigationState:l,clearNavigationState:m,setIsSearching:E,setIsViewingRecents:b}=function(){let[e,r]=(0,o.fp)(h),[n,a]=(0,o.fp)(_),[s,l]=(0,o.fp)(g),{setLastNavAction:c}=(0,d.ZX)(),{libraryKey:p,pageId:m,folderPath:E}=e,[y]=(0,u.ye)(),b=y?E:void 0,I=i.useCallback(({libraryKey:e,pageId:n,folderPath:i})=>{r({libraryKey:e,pageId:n,folderPath:i})},[r]),T=i.useCallback(()=>{c(d.r6.Back),s&&l(!1),r({})},[c,s,r,l]),v=i.useMemo(()=>n?"Search":s?"Recents":p?m?"Page":"Library":"All libraries",[n,s,p,m]);return{...i.useMemo(()=>f({currentView:v,libraryKey:p,pageId:m,folderPath:b}),[v,b,p,m]),setNavigationState:I,clearNavigationState:T,setIsViewingRecents:l,setIsSearching:a}}(),{getLibrary:I,getPage:T,getFolder:v}=(0,c.G)(),{setLastNavAction:S,lastActionWasBackSwipe:w}=(0,d.ZX)(),A=(0,p.q)(),N=i.useCallback(({newNavigationState:i,isViewingRecents:a,isSearching:o})=>{let{libraryKey:l,pageId:c,folderPath:d}=i??{libraryKey:e,pageId:r,folderPath:n},u=a??"Recents"===s;return o??"Search"===s?l?{view:"Library",libraryKey:l,isSearching:!0}:{view:"All libraries",isSearching:!0}:u?{view:"Recents",isSearching:!1}:d?{view:"Folder",libraryKey:l,pageId:c,folderPath:d.join(" / "),isSearching:!1}:c?{view:"Page",libraryKey:l,pageId:c,isSearching:!1}:l?{view:"Library",libraryKey:l,isSearching:!1}:{view:"All libraries",isSearching:!1}},[s,n,e,r]),C=i.useMemo(()=>f({currentView:s,libraryKey:e,pageId:r,folderPath:n}),[s,e,r,n]),O=(0,a.qd)(C),L=i.useCallback(e=>(m(),S(d.r6.Back,e),N({newNavigationState:{}})),[m,N,S]),[R,P]=i.useMemo(()=>{if(!e)return[!1,!1];let i=I(e);if(!i)return[!1,!1];let a=T(e,r);return a?[!!(1===i.pages.size?Array.from(i.pages.values())[0]:void 0),!!y(a.assets)&&!!n]:[!1,!1]},[n,I,T,e,r]),{navigateToLibrary:D,navigateToPage:k,navigateToPath:M}=i.useMemo(()=>{let n=(e,r=d.r6.Forward,n)=>{let a=I(e);if(A(e))return l({libraryKey:e}),N({newNavigationState:{libraryKey:e}});if(a){if(1===a.pages.size){let[o]=Array.from(a.pages.keys());return r===d.r6.Forward?i(o,e,r,n):L(n)}return S(r,n),"Recents"===s&&b(!1),l({libraryKey:e}),N({newNavigationState:{libraryKey:e},isViewingRecents:!1})}},i=(r,i=e,o=d.r6.Forward,c)=>{let u=T(i,r);if(!u||!i)return;let p=y(u.assets);return p?o===d.r6.Forward?a([p.name],r,i,o,c):n(i,d.r6.Back,c):(S(o,c),"Recents"===s&&b(!1),l({libraryKey:i,pageId:r}),N({newNavigationState:{libraryKey:i,pageId:r},isViewingRecents:!1}))},a=(n,o=r,s=e,c=d.r6.Forward,u)=>{if(!n||0===n.length){if(!o)return;return i(o,s,c,u)}let p=v(s,o,n);if(!p)return;let m=y(p);return m?c===d.r6.Forward?a([...n,m.name],o,s,c,u):a(n.slice(0,-1),o,s,d.r6.Back,u):(S(c,u),l({libraryKey:s,pageId:o,folderPath:n}),N({newNavigationState:{libraryKey:s,pageId:o,folderPath:n}}))};return{navigateToLibrary:n,navigateToPage:i,navigateToPath:a}},[I,A,S,s,l,N,L,b,e,T,r,v]),F=i.useCallback(e=>M([...n??[],e]),[n,M]),x=i.useCallback(i=>{switch(S(d.r6.Back,i),s){case"Search":return E(!1),N({isSearching:!1});case"Recents":return b(!1),N({isViewingRecents:!1});case"Page":if(n&&n.length>0)return M(n.slice(0,-1),r,e,d.r6.Back,i);return D(e,d.r6.Back,i);case"Library":return L(i)}},[s,n,N,e,D,M,L,r,E,b,S]),U=i.useCallback(i=>e&&r?-1===i?k(r,e,d.r6.Back):n&&!(i>=n.length)?M(n.slice(0,i+1),r,e,d.r6.Back):void 0:void 0,[n,e,k,M,r]),B=i.useCallback(()=>(S(d.r6.Forward),b(!0),N({isViewingRecents:!0})),[S,b,N]),V=i.useCallback(()=>{S(d.r6.Forward),E(!0)},[S,E]),G=i.useCallback(()=>{if(O&&w){let{currentView:e,...r}=O;return S(d.r6.Forward),l(r),"Recents"===e?b(!0):b(!1),N({newNavigationState:r,isViewingRecents:"Recents"===e})}},[N,w,O,b,S,l]);return{...f({currentView:s,libraryKey:e,pageId:r,folderPath:n}),isCurrentlySkippingPage:R,isCurrentlySkippingFirstFolder:P,onBack:x,navigateBackToPathIndex:U,navigateToLibrary:D,navigateToPage:k,navigateToFolder:F,navigateToPath:M,navigateToRecents:B,navigateToTop:L,startSearch:V,forwardSwipe:G}}function y(e){if(e.key===l.Mk&&1===e.subtrees.size&&0===e.items.length){let r=Array.from(e.subtrees.values())[0];return r.name.toLowerCase()===e.name.toLowerCase()?r:void 0}}(0,s.rt)(void 0)},799550:(e,r,n)=>{"use strict";n.d(r,{MA:()=>d,ye:()=>m});var i=n(411855),a=n(374626),o=n(286640),s=(e=>(e.LIST="list",e.GRID="grid",e))(s||{});let l="assets-panel-view-mode-v2",c=(0,a.E3)(l,"grid");function d(){let[e,r]=(0,a.fp)(c),n=i.useCallback(e=>e.key===l&&null!=e.newValue,[]),s=i.useCallback(n=>{if(n)try{let i=JSON.parse(n);("grid"===i||"list"===i)&&e!==i&&r(i)}catch(e){}},[e,r]);return(0,o.tl)({onSync:s,shouldSyncValue:n}),[e,r]}let u="asset-panel-show-folders",p=(0,a.E3)(u,!1);function m(){let[e,r]=(0,a.fp)(p),n=i.useCallback(e=>e.key===u&&null!=e.newValue,[]),s=i.useCallback(n=>{if(n)try{let i=JSON.parse(n);"boolean"==typeof i&&e!==i&&r(i)}catch(e){}},[e,r]);return(0,o.tl)({onSync:s,shouldSyncValue:n}),[e,r]}},205236:(e,r,n)=>{"use strict";n.d(r,{e:()=>a});var i=n(411855);function a(e){let[r,n]=i.useState(e);return[r,i.useCallback(()=>n(!0),[]),i.useCallback(()=>n(!1),[]),i.useCallback(()=>n(e=>!e),[])]}},507662:(e,r,n)=>{"use strict";n.d(r,{T:()=>N});var i=n(411855),a=n(188507),o=n(737947),s=n(320063),l=n(672517),c=n(819229),d=n(694687),u=n(594901),p=n(428467),m=n(707465),h=n(134200),_=n(239671),g=n(173454),f=n(237870),E=n(393106),y=n(52921),b=n(220116),I=n(269842),T=n(715762),v=n(157630),S=n(730598),w=n(338256);let A=i.memo(function({initialTab:e,teamId:r,initialUpdatesModalScope:n,entrypoint:u}){let p=(0,a.d4)(e=>e.selectedView),h=(0,a.d4)(e=>(0,m.IE)(e)),g=(0,a.d4)(e=>e.openFile),f=(0,d.sZ)(),E=new URLSearchParams(o.Ay.location.search).get("teamToMoveFileToOnNavigate"),y=(0,c.R)();(0,s.h)(()=>{y({updateSource:"library_modal_open"})});let I=(0,T.YM)();return i.createElement(l.fu,{name:"Library Preference Modal",properties:{fileKey:g?.key,fileTeamId:g?.teamId,selectedTeamId:"team"===p.view?p.teamId:null,orgId:f?.id,inPublishDraftExp:!!E,entryPoint:u}},h?i.createElement(C,null):"fullscreen"===p.view&&p.editorType!==_.nT.Whiteboard?I?i.createElement(w.b,{entrypoint:u,initialTab:e,initialUpdatesModalScope:n}):i.createElement(b.B,{entrypoint:u,initialTab:e,initialUpdatesModalScope:n}):"team"===p.view?i.createElement(O,{initialTab:e,teamId:p.teamId}):r?i.createElement(O,{initialTab:e,teamId:r}):void 0)}),N=(0,f.Ju)(A,g.cX);function C(){let e=(0,T._K)();return i.createElement(I.s,{width:e,title:i.createElement(S.c,{availableTabs:[g.Wv.LIBRARIES],selectedTab:g.Wv.LIBRARIES})},i.createElement(v.Z,null,i.createElement(E.s,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,width:e})))}function O({initialTab:e,teamId:r}){let n=(0,a.wA)(),o=(0,a.d4)(e=>e.sharedFonts),s=(0,a.d4)(e=>(0,h.p)(e)),l=(0,a.d4)(e=>(0,p.canAdminOrg)(e.currentUserOrgId,e)),c=(0,u.FC)(),d=i.useMemo(()=>{let e=[g.Wv.LIBRARIES];return s&&e.push(g.Wv.FONTS),e},[s]),{selectedTab:m,setSelectedTab:_}=(0,T.SE)(d,e),f=(0,T._K)(s);return i.createElement(I.s,{width:f,title:i.createElement(S.c,{availableTabs:d,selectedTab:m,setSelectedTab:_})},i.createElement(v.Z,{showSharedFonts:s},m===g.Wv.LIBRARIES&&i.createElement(E.s,{showingDefaultSubscriptionsForTeamId:r,showingDefaultSubscriptionsForUser:!1,width:f}),m===g.Wv.FONTS&&i.createElement(y.y,{dispatch:n,teamId:r,width:f,resourceType:"team",useModalViewComponent:!0,canAdminOrg:l,permissionsState:c,sharedFonts:o})))}(0,f.Ju)(function({entrypoint:e}){return i.createElement(A,{initialTab:g.Wv.FONTS,entrypoint:e})},g.EJ)},398529:(e,r,n)=>{"use strict";n.d(r,{RV:()=>E});var i=n(411855),a=n(188507),o=n(966712),s=n(493323),l=n(574176),c=n(939863),d=n(830445),u=n(318812),p=n(291829),m=n(538697),h=n(326085),_=n(618208);function g({variableSet:e,modeDropdownStyle:r,entity:n,defaultModeId:o,isLibraryFileEnabled:s,fileKeyOrHubFileId:l}){let d=(0,a.wA)(),h=(0,u.Um)(),_="auto_inherit_mode_string",g=e.modes?e.modes[0].name:"",E=i.useMemo(()=>({name:(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:g}),id:_}),[g]),y=o?e.modes?.find(e=>e.id===o):E,[b,I]=(0,i.useState)(y),T=i.useMemo(()=>b?.id===_?E:e.modes?.find(e=>e.id===b?.id),[e,b,E]),v=i.useCallback(r=>{I(r),r.id===_?p.j.deleteDefaultMode({fileKeyOrHubFileId:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key}):p.j.setDefaultMode({fileKeyOrHubFileId:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key,defaultModeId:r.id}).catch(e=>{I(b)})},[b,l,n.entityType,n.entityId,e.key]);return e.modes&&1!==e.modes.length&&n&&y?i.createElement(m.l6,{id:`subscription-dropdown-${e.id}`,property:T,dispatch:d,dropdownShown:h,onChange:v,formatter:f,dropdownWidth:150,className:r,disabled:!s,dataTestId:`mode-dropdown-${e.id}`},i.createElement(m.c$,{value:E},(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:g})),i.createElement(m.sK,null),e.modes?.map(e=>i.createElement(m.c$,{key:e.id,value:e},f.format(e)))):i.createElement("div",{className:r})}let f={format:e=>e.name};function E({forBestMatches:e,variableSets:r,shouldDisplayDefaultModeDropdown:n,fileKey:a,hubFileId:u,entity:m,isLibraryFileEnabled:f}){let[E,y]=(0,i.useState)({}),[b,I]=(0,i.useState)(!1),T=i.useMemo(()=>{let e=a||u;if(e)return(0,d.ee)(e,a?"fileKey":"hubFileId")},[a,u]);if(!r||0===r.length)return null;n&&=r.some(e=>e.modes&&e.modes.length>1);let v=(0,o.kc)().ds_workspace_team_default_modes&&!b&&n&&m&&T;return(v&&p.j.getDefaultModes({fileKeyOrHubFileId:T,entityType:m.entityType,entityId:m.entityId}).then(e=>{y(e.data.meta),I(!0)}).catch(()=>{I(!0)}),v)?i.createElement(s.qc,null):i.createElement("div",null,!e&&i.createElement("div",{className:h.wx},i.createElement("div",{className:h.Pf},(0,c.tx)("design_systems.libraries_modal.header_variable_collections")),(0,o.kc)().ds_workspace_team_default_modes&&n&&i.createElement("div",{className:h.Pf},(0,c.tx)("design_systems.libraries_modal.header_default_mode"))),i.createElement("div",{className:e?h.VN:h.iE},r.map(r=>i.createElement("div",{className:h.nk,key:r.id},e?i.createElement(i.Fragment,null,i.createElement(l.B,{className:h.oS,svg:_.A}),i.createElement("span",{className:h.UU},r.name),r.numVariableMatches&&i.createElement("span",{className:h.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variable_match",{numVariables:r.numVariableMatches}))):i.createElement("div",{className:h.kW},i.createElement("span",{className:h.UU},r.name),n&&m&&T&&(0,o.kc)().ds_workspace_team_default_modes&&i.createElement(g,{variableSet:r,modeDropdownStyle:h.nI,fileKeyOrHubFileId:T,entity:m,defaultModeId:E[r.key],isLibraryFileEnabled:f})||i.createElement("div",{className:h.nI}),i.createElement("span",{className:h.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variables",{numVariables:r.numVariables})))))))}},13678:(e,r,n)=>{"use strict";n.d(r,{dD:()=>ed});var i=n(411855),a=n(188507),o=n(752795),s=n(587670),l=n(939683),c=n(358145),d=n(966712),u=n(374626),p=n(498750),m=n(915440),h=n(586459),_=n(563706),g=n(776621),f=n(799569),E=n(999251),y=n(607283),b=n(493323),I=n(32863),T=n(939863),v=n(944682),S=n(738269),w=n(876401),A=n(662275),N=n(782656),C=n(672517),O=n(289104),L=n(226055),R=n(974105),P=n(44892),D=n(535217),k=n(26281),M=n(112825),F=n(25108),x=n(384319),U=n(848661),B=n(869156),V=n(335682),G=n(694687),H=n(416095),W=n(99506),K=n(279453),j=n(284321),z=n(173454),Y=n(81182),$=n(237870),q=n(91271),Z=n(756159),X=n(453261),J=n(488578),Q=n(129975),ee=n(965200),et=n(371775),er=n(464331),en=n(388284),ei=n(809455),ea=n(183825),eo=n(412211),es=n(490776),el=n(440965),ec=n(843274);let ed=(0,$.Ju)(function(e){return i.createElement(C.fu,{name:"Publishing Modal",properties:{entryPoint:e.entrypoint}},i.createElement(ee.fo,null,i.createElement(eu,{...e})))},"PublishingModal");function eu({timedOut:e,initiallyCheckedItemIDs:r}){let n=(0,L.GS)(),[E,y]=(0,u.fp)(Z.pz),C=(0,V.q5)(),U=(0,a.d4)(e=>e.library),$=(0,a.d4)(j.cM),eo=(0,a.d4)(j.MH),es=(0,a.d4)(j.dM),ed=(0,B.nN)(),{modeLimit:eu,canShowCTA:em,showCTA:e_}=(0,X.z)("publishing"),eg=(0,a.wA)(),ef=(0,a.d4)(e=>e.savedPublishDescription),eE=(0,a.d4)(j.fA),ey=G.sZ()?.id,eb=(0,a.d4)(e=>e.orgById),eI=(0,a.d4)(R.d1),[eT,ev]=i.useState(""),[eS,ew]=i.useState(ef||""),eA=(0,V.Cq)({useSinatraType:!0}),eN=(0,Y.Y)(eA||null),[eC,eO]=i.useState(eN),eL=(0,d.kc)().wslp_read_publish_scope,[eR,eP]=i.useState(!1),eD=eN?W.pk.ORG:W.pk.TEAM,[ek,eM]=i.useState(eD),eF=eL?ek:eC?W.pk.ORG:W.pk.TEAM,ex=(0,d.kc)().wslp_workspace_publish_scope,eU=eI?.key,eB=(0,m.Rs)(K.Yh6,{fileKey:eU},{enabled:eL&&!!eU});i.useEffect(()=>{if("loaded"===eB.status){if(!eB.data.file?.lastPublishedAt){eP(!0);return}let e=eB.data.file?.libraryKeyToFile?.libraryPublishScope?.publishScopeType??W.pk.TEAM;ex||e!==W.pk.WORKSPACE||(e=W.pk.ORG),eM(e),eP(!0),e!==eD&&(0,g.x1)("designSystems publishing","Potential library publish scope mismatch (monitored by #feat-workspace-library-publishing)",{livegraphPublishScope:e,fileShareSettingPublishScope:eD})}},[eD,eB,ex]);let[eV,eG]=i.useState(null),eH=i.useContext(ee.og),eW=i.useMemo(()=>(0,P.Jl)(eo),[eo]),eK=(0,ee.UJ)(),ej=(0,ee.Xm)(),ez=(0,a.d4)(e=>(0,j.Kb)(e,ej)),eY=(0,c.ZC)(eH);i.useEffect(()=>{eY?.status===h.r.LOADING&&eH.status===h.r.SUCCESS&&(r||eq(new Set(ez)))},[ez,eH,r,eY?.status]);let[e$,eq]=i.useState(()=>new Set(r&&r.size>0?ez.filter(e=>r?.has(e)):ez)),[eZ,eX]=i.useState(!1),[eJ,eQ]=i.useState(null);i.useEffect(()=>{let e=e=>{"Shift"===e.key&&eX(!0)},r=e=>{"Shift"===e.key&&eX(!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]);let e0=i.useCallback(()=>{U.publishProgress.state===z.Qx.ASSEMBLING_COMPONENTS&&eg(w.TS())},[eg,U.publishProgress.state]),e1=i.useCallback(()=>{e0(),y(z.o.LIBRARY),eg(A.Ce())},[eg,y,e0]);i.useEffect(()=>{U.publishProgress.state===z.Qx.UPLOADING&&e1()},[e1,U.publishProgress.state]);let e2=(0,c.ZC)(U),e3=(0,c.ZC)(ez);i.useEffect(()=>{if(e2&&e3&&e2!==U){if(eQ(null),e3.every(e=>e$.has(e))){eq(new Set(ez));return}eq(new Set(ez.filter(e=>e$.has(e))))}},[ez,e$,U,eW,eK,C,e3,e2]),(0,B.SR)();let e6=(0,a.d4)(e=>(0,j.bd)(e,ej)),e8=i.useCallback(e=>{let r=[...e6.variableSets.modified.wellFormed,...e6.styles.modified.wellFormed,...e6.productComponents.modified.wellFormed].map(e=>e.node_id),n=r.indexOf(e);if(null===n)return;let i=new Set(e$),a=!i.has(e);if(eZ&&null!==eJ){let e=Math.min(n,eJ),o=Math.max(n,eJ);for(let n=e;n<=o;n++)a?i.add(r[n]):i.delete(r[n])}else a?i.add(e):i.delete(e);eq(i),eQ(n)},[e$,eJ,e6,eZ]),e5=i.useCallback(()=>{ez.length===e$.size?eq(new Set):eq(new Set(ez))},[ez,e$.size]),e7=i.useCallback((e,r)=>{eH.status===h.r.SUCCESS&&eH.nodeIdToValidatedMoveInfo[e]&&(eH.nodeIdToValidatedMoveInfo[e].publishType=r)},[eH]),e4=(0,a.d4)(e=>(0,j.oB)(e,ej)),e9=(0,a.d4)(e=>(0,j.JI)(e,ej)),te=(0,a.d4)(e=>(0,j.Dc)(e,ej)),tt=i.useCallback(()=>{let e=U.used__LIVEGRAPH.localNodeIdToDestinationKey;if(!Object.keys(U.movedLibraryItems.local).length&&!Object.keys(e).length)return;let r=e9.filter(e=>!!U.movedLibraryItems.local[e.node_id]&&e.status!==z.E8.DELETED&&e$.has(e.node_id)).map(e=>e.node_id),n=new Set(r);for(let i of[...r,...e4.filter(e=>{let r=e.containing_frame?.containingStateGroup?.nodeId,i=r&&es[r]||null;return!(!U.movedLibraryItems.local[e.node_id]||e.status===z.E8.DELETED||i&&((0,H.zE)(i)||n.has(i.node_id)))&&e$.has(r||e.node_id)}).map(e=>e.node_id),...te.filter(r=>!!e[r.node_id]&&r.status!==z.E8.DELETED&&e$.has(r.node_id)).map(e=>e.node_id)]){let e=s.glU.generatePublishableCopy(i);e&&e$.has(i)&&(e$.delete(i),e$.add(e))}},[e$,es,U.used__LIVEGRAPH.localNodeIdToDestinationKey,U.movedLibraryItems.local,e4,e9,te]),tr=(0,M.B)(),tn=(0,l.U)(),ti=(0,a.d4)(j.pR),ta=i.useCallback(e=>{let r;if(eI&&ti){if(!(0,d.kc)().wslp_publish_scope_library_publisher&&ey){let e=(0,Y.Y)(eI);if(eF===W.pk.ORG&&!e||eF!==W.pk.ORG&&e){let r={link_access:W.PQ.ORG_VIEW,org_browsable:eF===W.pk.ORG};(0,d.kc)().wslp_exploratory_logging&&tn("Publish Scope Change Updates File Share Settings",{oldOrgBrowsable:e,oldLinkAccess:eI.link_access,oldOrgPublished:e,newOrgBrowsable:r.org_browsable,newLinkAccess:r.link_access,newOrgPublished:r.org_browsable}),eI.file_repo_id?eg(N.yJ({repo:{id:eI.file_repo_id,...r},userInitiated:!0})):eg(v.yJ({file:{key:eI.key,...r},userInitiated:!0}))}}for(let e of e$){let r=ed[e];if((0,o.isNotNullish)(r)&&r.modes.length>eu){em(r.modes.length)?e_():(0,g.x1)("designSystems publishing","Blocking publishing of variable collection with too many modes, but upsell is not available",{collectionId:e});return}}if(eH.status===h.r.SUCCESS){let e=Object.keys(eH.nodeIdToValidatedMoveInfo).filter(e=>e$.has(e)&&"MOVE"===eH.nodeIdToValidatedMoveInfo[e].publishType),n=[...Object.values(eo),...Object.values(es),...Object.values($)].reduce((e,r)=>(eH.nodeIdToValidatedMoveInfo[r.node_id]&&r.old_key&&(e[r.node_id]=r.old_key),e),Object.create(null)),i=e4.filter(H.ad);r=(0,H.Cj)(e,n,i)}tt(),eg(w.ZS({savepointDescription:eS,itemsToPublish:e$,moveInformation:r,hubFileId:e||void 0,firstDraftVariablesForTheme:tr,publishScope:(0,d.kc)().wslp_publish_scope_library_publisher?eF:void 0}))}},[eI,ti,ey,eH,tt,eg,eS,e$,eF,ed,eu,em,e_,eo,es,$,e4,tr,tn]),to=i.useCallback(e=>{if(!eI)return;let r=_.Ay.mac?e.metaKey:e.ctrlKey;e.keyCode===p.Uz.ENTER&&r&&(ta(),e.preventDefault(),e.stopPropagation())},[eI,ta]),ts=i.useCallback(e=>{ew(e.target.value)},[]),tl=i.useCallback(e=>{eO(e),eg(S.oB())},[eg]),tc=i.useCallback(e=>{eM(e),eg(S.oB())},[eg]),td=!!eI?.starter_library_src_file_key,tu=i.useMemo(()=>{let e=0;return Object.values(eW).forEach(r=>{td?(0,H.lg)(r.status)&&e++:(0,H.Hb)(r.status)&&e++}),Object.values(es).forEach(r=>{td?(0,H.lg)(r.status)&&e++:(0,H.Hb)(r.status)&&e++}),e},[td,es,eW]),tp=(0,O.JT)(),tm=i.useMemo(()=>{let e=e=>Object.values(e).some(e=>e.status===z.E8.NEW);return!!(eE&&e(eW)||eE&&e(es)||e($))},[eE,es,$,eW]),{localKits:th}=(0,F.Ml)(),t_=(0,k.C)(th[0]?.dsKitKey||null,[D.x.WARNING]),tg=(0,a.d4)(j.Mh),tf=(0,a.d4)(j.Pd),{invalidExampleIds:tE,isPublishingInvalidExamples:ty}=(0,er.c)({modifiedComponents:e6.productComponents.modified.wellFormed,modifiedStateGroups:e6.stateGroups.modified.wellFormed,publishedHubFileComponents:tg,publishedHubFileStateGroups:tf,itemsToPublish:e$,publishingMode:E}),tb=i.useMemo(()=>!!(0,d.kc)().first_draft_publish_ux&&(th.length>1||"error"===(0,k.O)(t_))||ty,[ty,t_,th]);if(!eI)return null;if(eH.status===h.r.LOADING)return i.createElement(J.aF,{size:480,title:E===z.o.HUBFILE?(0,T.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,T.tx)("design_systems.publishing_modal.modal_header"),titleClassName:ec.GK,className:ec.vn,onKeyDown:to,onHide:e0},i.createElement(b.kt,{className:ec.S}));let tI=C?.team,tT=ej&&Object.keys(ej).some(e=>!!e$.has(e)&&!$[e]&&"MOVE"===ej[e].publishType),tv=e6.productComponents.modified.wellFormed.length,tS=e6.styles.modified.wellFormed.length,tw=e6.variableSets.modified.wellFormed.length,tA=(0,d.u4)("dse_editor_templates_v1",e6.modules.modified.wellFormed.length,0);return i.createElement(J.aF,{size:480,title:E===z.o.HUBFILE?(0,T.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,T.tx)("design_systems.publishing_modal.modal_header"),titleClassName:ec.GK,className:ec.vn,onKeyDown:to,onHide:e0,"data-testid":"publishing-modal"},i.createElement(f.s_,{dispatch:eg,onClose:()=>{y(z.o.LIBRARY)},customStyle:n?{top:8,right:12}:{top:6,right:6}}),i.createElement("div",{className:ec.Kl},i.createElement("div",{className:eV?ec.Ye:ec.dJ},i.createElement("div",{className:ec.YT},i.createElement(Q.l,null),n?i.createElement("div",{className:ec.PP},i.createElement(I.IW,{focusOnMount:!1,query:eT,clearSearch:()=>ev(""),onChange:ev,recordingKey:"publishingModalSearchBar",withUI3Icon:!0,smallFont:!0,hasTransparentBackground:!0})):i.createElement(I.Lp,{className:ec.vD,focusOnMount:!1,query:eT,clearSearch:()=>ev(""),onChange:ev,recordingKey:"publishingModalSearchBar"}),!eT&&i.createElement("div",{className:ec.iQ},i.createElement(q.v,{className:ec.Bl,placeholder:(0,T.t)("design_systems.publishing_modal.description_placeholder"),value:eS,onChange:ts,dir:"auto"}))),i.createElement(ep,{itemsToPublish:e$,onLibraryItemRowCheckboxToggle:e8,onTogglePublishAll:e5,setItemsToPublish:eq,onChangeMoveOptionForItem:e7,assetQuery:eT,showVariableCollectionOverview:eG,invalidAssetIds:tE}),!ey&&!eE&&tu>0&&i.createElement(eh,{numComponentsToUpsell:tu,isStarterLibrary:td,team:tI}),tT&&i.createElement(en.F,null),e&&i.createElement(ea.r,null),ty&&i.createElement(ei.K,null),i.createElement(et.C,{publishedHubFile:tp,setAllowOrgAccess:tl,isLoadingPublishScope:!eR,publishScope:ek,setPublishScope:tc,hasItemsToPublish:0!==e$.size,canPublishComponentsAndStateGroups:eE,org:ey?eb[ey]:null,publishProgress:U.publishProgress,numModifiedAssets:tw+tS+tv+tA,firstDraftValidationStatus:(0,k.O)(t_),hasNewLibraryItems:tm,closeModal:e1,editingFile:eI,publish:ta,disablePublishButton:tb,workspace:eB.data?.file?.team?.workspace}),i.createElement(x.o,null)),eV&&i.createElement("div",{className:ec.dJ},i.createElement(el.Q,{variableCollection:eV.variableCollection,view:eV.view,drillUp:()=>eG(null)}))))}function ep(e){let[r,n]=i.useState(!1),o=()=>{n(!r)},[s,l]=i.useState(!1),c=()=>{l(!s)},[u,p]=i.useState(!1),m=()=>{p(!u)},h=(0,ee.Xm)(),_=(0,ee.UJ)(),g=(0,a.d4)(e=>(0,j.bd)(e,h)),[f,b,I,v,S,w,A,N,C,O,L,R,P,D,k,M]=i.useMemo(()=>[g.variableSets.modified.wellFormed,g.variableSets.modified.erroneous,g.variableSets.unmodified.published,g.variableSets.unmodified.unpublished,g.variableSetsWithHiddenVariables.modified.wellFormed,g.modules.modified.wellFormed,g.modules.modified.erroneous,g.modules.unmodified.published,g.modules.unmodified.unpublished,g.styles.modified.wellFormed,g.styles.unmodified.published,g.styles.unmodified.unpublished,g.productComponents.modified.wellFormed,g.productComponents.modified.erroneous,g.productComponents.unmodified.published,g.productComponents.unmodified.unpublished].map(r=>e.assetQuery?r.filter(r=>r.name.toLocaleLowerCase().trim().includes(e.assetQuery.toLocaleLowerCase())):r),[g.productComponents.modified.erroneous,g.productComponents.modified.wellFormed,g.productComponents.unmodified.published,g.productComponents.unmodified.unpublished,g.modules.modified.wellFormed,g.modules.modified.erroneous,g.modules.unmodified.published,g.modules.unmodified.unpublished,g.styles.modified.wellFormed,g.styles.unmodified.published,g.styles.unmodified.unpublished,g.variableSets.modified.wellFormed,g.variableSets.modified.erroneous,g.variableSets.unmodified.published,g.variableSets.unmodified.unpublished,g.variableSetsWithHiddenVariables.modified.wellFormed,e.assetQuery]),F=i.useMemo(()=>new Set(O.concat(f).concat(P).concat((0,d.u4)("dse_editor_templates_v1",w,[])).map(e=>e.node_id)),[f,P,O,w]),x=f.length>0||v.length>0||S.length>0,B=(0,a.d4)(j.Wz),V=(r,n,a,o)=>{for(let s of r){let r=h?.[s.node_id],l=!1;if(s.type===z.PW.STATE_GROUP){let e=!r||"FORCED_COPY"===r.publishType,n=(B[s.node_id]??[]).some(e=>_.has(e.node_id));l=e&&n}let c=i.createElement(eo.v,{key:s.node_id,libraryItem:s,includeLeftAccessory:a,isChecked:e.itemsToPublish.has(s.node_id),onCheckBoxToggle:e.onLibraryItemRowCheckboxToggle,onChangeMoveOptionForItem:e.onChangeMoveOptionForItem,moveInfo:(0,H.Hb)(s.status)&&r||null,isUnmovableStateGroupWithMovableState:l,showVariableCollectionOverview:e.showVariableCollectionOverview,isVariableSetWithPrivateVariables:o,hasChangedVariables:x,isInvalid:e.invalidAssetIds.has(s.node_id)}),d=o?"-hiddenVariables":"";G(c,`library-item-row-${s.node_id}${d}`,46,n)}},G=(e,r,n,i)=>{let a=y.oz.getNextRenderedElementTop(i);i.push({parent:null,type:y.zq.ROW,top:a,element:e,key:r,height:n,sectionNameForTracking:void 0})},W=(()=>{let n=[],a=f.length+O.length+P.length+(0,d.u4)("dse_editor_templates_v1",w.length,0),l=I.length+L.length+k.length+(0,d.u4)("dse_editor_templates_v1",N.length,0),p=v.length+M.length+R.length+S.length+(0,d.u4)("dse_editor_templates_v1",C.length,0),h=D.length+b.length+(0,d.u4)("dse_editor_templates_v1",A.length,0);h&&(G(i.createElement(es.Zq,{header:(0,T.tx)("design_systems.publishing_modal.invalid_components_with_count",{countString:i.createElement(es.y_,{count:h})}),caretToggle:{isExpanded:u},onClick:m}),"erroneous",32,n),u&&(V(D,n,eo.o.TARGET),(0,d.kc)().dse_editor_templates_v1&&V(A,n),V(b,n)));let _=e.assetQuery?[...e.itemsToPublish].filter(e=>F.has(e)):[...e.itemsToPublish],g=e.assetQuery?[...e.itemsToPublish].filter(e=>!F.has(e)):[],E=_.length;if(a){let r;if(r=E===a||E>0&&E<a&&U.oV,G(i.createElement(es.D3,{header:(0,T.tx)("design_systems.publishing_modal.changes_header_with_count",{countString:i.createElement(es.y_,{count:E,total:a})}),checkboxValue:r,onClick:()=>{e.assetQuery?a===E?e.setItemsToPublish(new Set(g)):e.setItemsToPublish(new Set([...e.itemsToPublish,...F])):e.onTogglePublishAll()}}),"changed:header",32,n),f.length>0&&G(i.createElement("div",{className:ec.et},(0,T.tx)("design_systems.publishing_modal.variable_collections")),"variableSet:header",32,n),V(f,n,eo.o.CHECKBOX),(0,d.kc)().dse_templates_proto){let e=P.filter(H.Fl);e.length>0&&(G(i.createElement("div",{className:ec.et},(0,T.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),V(e,n,eo.o.CHECKBOX))}(0,d.kc)().dse_editor_templates_v1&&w.length>0&&(G(i.createElement("div",{className:ec.et},(0,T.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),V(w,n,eo.o.CHECKBOX)),O.length>0&&G(i.createElement("div",{className:ec.et},(0,T.tx)("design_systems.publishing_modal.styles")),"styles:header",32,n),V(O,n,eo.o.CHECKBOX),P.length>0&&G(i.createElement("div",{className:ec.et},(0,T.tx)("design_systems.publishing_modal.components")),"components:header",32,n),(0,d.kc)().dse_templates_proto?V(P.filter(e=>!(0,H.Fl)(e)),n,eo.o.CHECKBOX):V(P,n,eo.o.CHECKBOX)}return l&&(G(i.createElement(es.Zq,{header:(0,T.tx)("design_systems.publishing_modal.unchanged_header_with_count",{countString:i.createElement(es.y_,{count:l})}),caretToggle:{isExpanded:r},onClick:o}),"unchanged:header",32,n),r&&(V(I,n),V(L,n),V(k,n),(0,d.kc)().dse_editor_templates_v1&&V(N,n))),p&&(G(i.createElement(es.Zq,{header:(0,T.tx)("design_systems.publishing_modal.hidden_header_with_count",{countString:i.createElement(es.y_,{count:p})}),caretToggle:{isExpanded:s},onClick:c}),"private:header",32,n),s&&(G(i.createElement("div",{className:ec.m_},(0,T.tx)("design_systems.publishing_modal.these_wont_be_published")),"private:subheader",22,n),V(v,n),V(S,n,void 0,!0),V(R,n),V(M,n),(0,d.kc)().dse_editor_templates_v1&&V(C,n))),n})();return i.createElement(E.O,{scrollContent:W,isList:!0,recordingKey:"publishingModalLibraryList",getViewportHeight:e=>e-200,width:480,className:ec.jG,renderEmptyState:!W.length&&e.assetQuery?()=>i.createElement(em,{assetQuery:e.assetQuery}):void 0})}function em({assetQuery:e}){return i.createElement("div",{className:ec.VX},(0,T.tx)("design_systems.publishing_modal.empty_search_result",{assetQuery:e}))}function eh({numComponentsToUpsell:e,isStarterLibrary:r,team:n}){let a=n?i.createElement("a",{className:ec.nf,target:"_blank",rel:"noopener",href:`/files/upgrade-team/${n.id}`},(0,T.tx)("design_systems.publishing_modal.upgrade_team")):i.createElement("a",{className:ec.nf,target:"_blank",rel:"noopener",href:"/files/create-team"},(0,T.tx)("design_systems.publishing_modal.create_a_professional_team")),o=r?(0,T.tx)("design_systems.publishing_modal.starter_library_upsell",{numComponents:e}):(0,T.tx)("design_systems.publishing_modal.standard_upsell",{numComponents:e,teamUpsellLink:a});return i.createElement("div",{className:ec.UX,"data-testid":"libraryPublishModalUpsell"},o)}},611964:(e,r,n)=>{"use strict";n.d(r,{EH:()=>c,RR:()=>d,cw:()=>l});var i=n(634832),a=n(939863),o=n(662275),s=n(173454);function l(e){switch(e){case s.E8.CHANGED:return(0,a.tx)("design_systems.publishing_modal.modified");case s.E8.CURRENT:return(0,a.tx)("design_systems.publishing_modal.no_changes");case s.E8.DELETED:return(0,a.tx)("design_systems.publishing_modal.removed");case s.E8.NEW:return(0,a.tx)("design_systems.publishing_modal.added");case s.E8.NOT_STAGED:return"";default:(0,i.assertNever)(e)}}function c(e,r){return o.to({type:{type:"PublishingModal"},data:{initiallyCheckedItemIDs:e,timedOut:r}})}var d=(e=>(e.ASSET_PANEL_LIBRARY_CONTEXT_MENU="asset_panel_library_context_menu",e.COMPONENT_PUBLISH_ERROR_NOTIFICATION="component_publish_error_notification",e.FILENAME_VIEW_DROPDOWN="filename_view_dropdown",e.FULLSCREEN_MOVE_COMPONENTS_PROMPT="fullscreen_move_components_prompt",e.FULLSCREEN_OTHER="fullscreen_other",e.LIBRARY_PREFERENCES_MODAL="library_preferences_modal",e.PROPERTIES_PANEL="properties_panel",e.PUBLISH_UPSELL_MODAL="publish_upsell_modal",e.UNPUBLISHED_PREFERRED_VALUES_WARNING="unpublished_preferred_values_warning",e.COOPER_PUBLISH_SECTION="cooper_publish_section",e.TEST="test",e))(d||{})},333370:(e,r,n)=>{"use strict";n.d(r,{KU:()=>g,Md:()=>y,Nr:()=>E,Pc:()=>m,VB:()=>b,dm:()=>_,l0:()=>p,lM:()=>d,wM:()=>u});var i=n(634832),a=n(587670),o=n(776250),s=n(378905),l=n(237929),c=n(173454);function d(e,r){let n={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:r};return e.forEach(e=>{let i=n,a=(0,l.ke)(e.name);a.pop(),a.forEach(e=>{let n=i.name?i.name+"/"+e:e,a=i.subfolders.find(e=>e.name===n);if(!a){let e={name:n,type:"STYLE_FOLDER",level:i.level+1,styles:[],subfolders:[],styleTypeSection:r};i.subfolders.push(e),a=e}i=a}),i.styles.push(e)}),n}function u(e){if(!e.length)return[];let r=d(e,e[0].style_type),n=[],i=e=>{e.styles.length>0&&n.push(e.name),e.subfolders.forEach(i)};return i(r),n}function p(e){let r=[...e.subfolders].reverse(),n=[...e.styles];for(;r.length>0;){let e=r.pop();e&&(n.push(e),n.push(...e.styles),r.push(...[...e.subfolders].reverse()))}return n}function m(e){return e.split("/").filter(e=>e).map(e=>e.trim()).join("/")}function h(e){return"STYLE_FOLDER"===e.type?e.name:(0,l.In)(e.name)}function _(e){return p(e).filter(e=>e.type===c.PW.STYLE)}function g(e){return p(e).filter(e=>"STYLE_FOLDER"===e.type)}function f(e){return e.type===c.PW.STYLE?(0,l.ke)(e.name).length:e.level}function E(e,r){(0,s.TK)(e,r)&&(a.glU.deleteNode(e.node_id),(0,o.sx)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))}function y(e,r,n,i){if(!e&&!n||!r)return!1;let a=!i&&""!==i||"STYLE_FOLDER"===r.type&&n===r&&e?.type===c.PW.STYLE&&f(e)>f(n)&&i!==(0,l.In)(r.name);return!(e===r||n===r&&(r.type===c.PW.STYLE||!a)||"STYLE_FOLDER"===r.type&&(e?.type===c.PW.STYLE&&n?.type===c.PW.STYLE||e?.type==="STYLE_FOLDER"&&n?.type===c.PW.STYLE||e&&(h(e)+"/").startsWith(r.name+"/")||n&&(h(n)+"/").startsWith(r.name+"/")&&!a))}function b(e,r,n,o,s,u,m){if(e.forEach(e=>{(function(e,r){let n=e.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id),i=[];r.forEach(e=>{n.indexOf(e.node_id)>-1&&i.push(e)});let a=e[0],o=p(d(i,a.type===c.PW.STYLE?a.style_type:a.styleTypeSection)).filter(e=>e.type===c.PW.STYLE);for(let e=0;e<n.length;e++)if(n[e]!==o[e].node_id)return!0;return!1})(s=function(e,r){let n=new Set,i=new Set;for(let r of e)(r.type===c.PW.STYLE?[r]:(function e(r){let n=[];return r.styles.forEach(e=>{n.push(e)}),r.subfolders.forEach(r=>{n.push(r),n.push(...e(r))}),n})(r).concat([r])).forEach(e=>e.type===c.PW.STYLE?i.add(e.node_id):n.add(e.name));return r.filter(e=>"STYLE_FOLDER"===e.type?!n.has(e.name):!i.has(e.node_id))}([e],s),u)&&(u=I(e,s,u))}),!s)return;let h=new Set(e.map(e=>"STYLE_FOLDER"===e.type||m?function(e,r,n,a){if(!e)return a.some(e=>e.type===c.PW.STYLE&&""===(0,l.In)(e.name))?null:-1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&r.type===c.PW.STYLE||"STYLE_FOLDER"===e.type&&r.type===c.PW.STYLE)return null;if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type&&f(e)===f(r)){let n=o.indexOf(e.node_id),i=function(e,r){let n=_(e),i=new Set(r.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id)),a=n[0];return n.forEach(e=>{e.sort_position&&a.sort_position&&e.sort_position<a.sort_position&&i.has(e.node_id)&&(a=e)}),a}(r,a),s=o.indexOf(i.node_id);return n<s?n:s-1}{let s=a.indexOf(r);if(-1!==s){let e=a.slice(s,a.length).find(e=>e.type===c.PW.STYLE);if(!e)return n.length-1;let r=o.indexOf(e.node_id);return(0,i.assertDev)(-1!==r,"style to insert before does not exist in the stored list"),r-1}{let r=a.indexOf(e),s=a.slice(r+1).reverse().find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,i.assertDev)(-1!==l,"style to insert after does not exist in the stored list"),l}}}(r,n,u,s):function(e,r,n,a){if(!e)return -1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type)return o.indexOf(e.node_id);{let e=a.indexOf(r),s=a.slice(e,a.length).find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,i.assertDev)(-1!==l,"style to insert before does not exist in the stored list"),l-1}}(r,n,u,s)));if(h.size>1||h.has(null))return;let g=h.values().next().value,E=u[g],y=u[g+1],b=new Map,T=E;for(let r of e){let e=r=>{r.type===c.PW.STYLE?(a.glU.insertStyleBetween(r.node_id,T?.node_id||"",y?.node_id||""),T=r):(r.styles.forEach(r=>{e(r)}),r.subfolders.forEach(r=>{e(r)}))};e(r);let n=""===o?[]:o.split("/"),i=[...n,(0,l.kH)(r.name)];if(i.join("/")!==r.name){let e=(r,n)=>{if(r.type===c.PW.STYLE){let e=[...n,(0,l.kH)(r.name)].join("/");b.set(r.node_id,e),a.glU.renameNode(r.node_id,e)}else b.set(r.name,n.join("/")),r.styles.forEach(r=>{e(r,n)}),r.subfolders.forEach(r=>{let i=[...n,(0,l.kH)(r.name)];e(r,i)})};e(r,"STYLE_FOLDER"===r.type?i:n)}else b.set("STYLE_FOLDER"===r.type?r.name:r.node_id,r.name)}return b}let I=(e,r,n)=>{let i=(0,l.ke)(e.name);e.type===c.PW.STYLE&&i.pop();let o=r.filter(e=>e.type===c.PW.STYLE),s=[];for(;i.length;){let e=i.join("/");if(0===(s=o.filter(r=>(0,l.In)(r.name).startsWith(e))).length)i.pop();else break}if(s.length){let r,i=s[0];s.forEach(e=>{null!=e.sort_position&&null!=i.sort_position&&e.sort_position<i.sort_position&&(i=e)}),r=e.type===c.PW.STYLE?e:_(e)[0];let o=n.indexOf(r),l=n[o-1],d=n[o+1];a.glU.insertStyleBetween(i.node_id,l?.node_id||"",d?.node_id||"");let u=[...n];return u.splice(u.indexOf(i),1),u.splice(u.indexOf(l)+1,0,i),u}return n}},142232:(e,r,n)=>{"use strict";n.d(r,{Mz:()=>N,RL:()=>O,TM:()=>R,a7:()=>C,se:()=>L});var i=n(411855),a=n(188507),o=n(675678),s=n(215122),l=n(587670),c=n(776250),d=n(939683);n(320063),n(358145);var u=n(966712),p=n(374626),m=n(395900),h=n(776621),_=n(632430),g=n(479984),f=n(662275),E=n(493862),y=n(869156),b=n(844053),I=n(335682);n(396462),n(860178);var T=n(940596),v=n(416095),S=n(57392),w=n(715762);function A(){(0,h.$D)(o.FigmaTeam.SCENEGRAPH_AND_SYNC,Error("Query for library consumers aborted during reconnect"))}async function N(e){let r=(0,E.Ak)(),n=(0,E.Ki)(r),{componentKeys:i,localIds:a}=e.reduce((e,r)=>(r.component_key&&e.componentKeys.push(r.component_key),e.componentKeys.push(...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{componentKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(i,[],a,r);try{await n}catch(e){A()}}async function C(e){let r=(0,E.Ak)(),n=(0,E.Ki)(r),{componentKeys:i,stateGroupKeys:a,localIds:o}=e.reduce((e,r)=>{for(let[n,i]of(e.stateGroupKeys.push(r.key),Object.entries(r.newStateKeyToOutdatedItems)))e.componentKeys.push(n,...i.oldSubscribedKeysToUpdate),e.localIds.push(...i.localIdsToUpdate);return e},{componentKeys:[],stateGroupKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(i,a,o,r);try{await n}catch(e){A()}}async function O(e){let r=(0,E.Ak)(),n=(0,E.Ki)(r),{styleKeys:i,localIds:a}=e.reduce((e,r)=>(e.styleKeys.push(r.key,...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{styleKeys:[],localIds:[]});l.BXd.downloadAllSubscribedStyleConsumersForUpdate(i,a,r);try{await n}catch(e){A()}}function L(e,r=v.aD.ALL,n){let o=(0,a.wA)(),T=(0,S.bA)(r),R=(0,p.md)(I.yV),{scopedComponentUpdates:P,scopedStateGroupUpdates:D,scopedStyleUpdates:k,scopedVariableSetUpdates:M}=(0,p.md)(T),F=(0,a.d4)(b.c),x=F.file_key,U=R?.parentOrgId?.toString(),B=F.file_team_id?.toString(),V=F.productType,G=(0,y.wM)(M.map(e=>e.key)),H=i.useCallback((e,n)=>{if(Object.values(w.AX).includes(e)){let r=e===w.AX.REVIEW_INSTANCE_UPDATES_MODAL_UPDATE_INSTANCE||e===w.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE;return`Instance Actions Menu > ${e} > ${r?"Update instance":"Update all"}`}return Object.values(w.r6).includes(e)?`${e} > Updates Modal > ${r} > ${n?"Update all":"Update"}`:""},[r]),W=i.useCallback(async(r,n)=>{let i=l.BXd.getTimestampForLibraryUpdateStart();(0,E.Ff)()&&await N(r),await o(_.rX({components:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:i}))},[o,e]),K=i.useCallback(async(r,n)=>{let i=l.BXd.getTimestampForLibraryUpdateStart();(0,E.Ff)()&&await C(r),await o(_.As({stateGroups:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:i}))},[o,e]),j=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,E.Ff)()&&await O(e),await o(_.t5({styles:e,updateStartTime:r}))},[o]),z=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();if((0,E.Ff)()){let r=(0,E.Ak)(),n=(0,E.Ki)(r);l.BXd.downloadAllSubscribedVariableSetConsumersForUpdate(e.map(e=>e.key),r);try{await n}catch(e){A()}for(let r of e){let e=[];if(r.libraryVariableIdsForUpdate){for(let[n,i]of l.CWU.getUsedSubscribedVariablesInSetByVariableKey(r.key)){let r=G[(0,s.ey)(n)];r&&(i.size>0||!i.has(r.version))&&e.push(`VariableID:${n}/${r.version}`)}r.libraryVariableIdsForUpdate=e}else(0,h.x1)("variables","Expected variableSet to be an UpdateRootVariableSet")}}await o(_._K({variableSets:e,updateStartTime:r}))},[o,G]),Y=i.useCallback((e,r)=>{W([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,components:[e.component_key].toString(),entrypoint:H(n,!1)})},[n,x,U,B,H,V,W]),$=i.useCallback((e,r)=>{K([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,stateGroups:[e.key].toString(),entrypoint:H(n,!1)})},[n,x,U,B,H,V,K]),q=i.useCallback(e=>{j([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,styles:[e.key].toString(),entrypoint:H(n,!1)})},[n,x,U,B,H,V,j]),Z=i.useCallback(e=>{z([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,variableSets:[e.key].toString(),entrypoint:H(n,!1)})},[n,x,U,B,H,V,z]),X=(0,d.U)();return{updateComponent:Y,updateStateGroup:$,updateStyle:q,updateVariableSet:Z,updateAll:i.useCallback(async()=>{if((0,u.kc)().ds_update_batching_ui){X("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new m.jk("updateAll",{});e.start();try{let r=P.length+D.length+k.length+M.length;o(g.ni({total:r})),o(f.Ce()),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,components:P.map(e=>e.component_key).toString(),stateGroups:D.map(e=>e.key).toString(),styles:k.map(e=>e.key).toString(),variableSets:M.map(e=>e.key).toString(),entrypoint:H(n,!0)}),await W(P,void 0),await K(D,void 0),await j(k),await z(M),o(g.kX());let i=e.stop();X("library.update_all.success",{elapsedMs:i},{forwardToDatadog:!0})}catch(r){throw o(g.V2()),X("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0}),r}}else{X("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new m.jk("updateAll",{});e.start();let r=W(P,void 0);Promise.all([r,K(D,void 0),j(k),z(M)]).then(()=>{X("library.update_all.success",{elapsedMs:e.stop()},{forwardToDatadog:!0})}).catch(()=>{X("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0})}),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,components:P.map(e=>e.component_key).toString(),stateGroups:D.map(e=>e.key).toString(),styles:k.map(e=>e.key).toString(),variableSets:M.map(e=>e.key).toString(),entrypoint:H(n,!0)}),o(f.Ce())}},[W,P,K,D,j,k,z,M,x,U,B,V,H,n,o,X])}}function R(e,r){let{updateComponent:n,updateStateGroup:o}=L(e,void 0,r),s=(0,a.wA)(),c=i.useCallback((e,r)=>{let n=l.glU.getOutdatedStyleConsumers(r);s(_.Qn({styleUpdateInfo:e,oldStyleGUID:r,consumerGUIDsToUpdate:n}))},[s]);return{updateIndividualInstances:i.useCallback((e,r)=>{for(let r of Object.values(e))n(r.updateAsset,r.instanceIdsToUpdate);for(let e of Object.values(r))o(e.updateAsset,e.instanceIdsToUpdate)},[n,o]),updateAllConsumersOfStyleVersion:c}}(0,T.rt)(!1)},18339:(e,r,n)=>{"use strict";n.d(r,{$3:()=>F});var i=n(411855),a=n(188507),o=n(966712),s=n(915440),l=n(799569),c=n(946689),d=n(493323),u=n(939863),p=n(822998),m=n(662275),h=n(101505),_=n(672517),g=n(857766),f=n(396226),E=n(875847),y=n(335682),b=n(594901),I=n(611978),T=n(99506),v=n(279453),S=n(243987),w=n(147206),A=n(428467),N=n(206193),C=n(300874),O=n(851363),L=n(237870),R=n(611964),P=n(488578),D=n(129531),k=n(13678),M=n(430799);let F=(0,L.Ju)(function(e){let r=(0,y.q5)(),{team:n,afterFileMove:l}=e,c=(0,a.wA)(),d=(0,b.FC)(),u=(0,I._6)(),p=()=>{c(m.to({type:k.dD,data:{entrypoint:R.RR.PUBLISH_UPSELL_MODAL}}))},h=(0,a.d4)(e=>e.currentUserOrgId),_=(0,s.Rs)(v.G0Y,{orgId:h}),g=!!(0,o.kc)().ps_benchmark,E=g&&(0,S.w5)(n);return r?n&&(0,A.canEditTeam)(n.id,d)&&!E?i.createElement(D.bP,{team:n,resource:C.Bi.TEAM_LIBRARY,action:O.pE.PUBLISH_COMPONENTS,editorType:T._Y.DESIGN,onStarterPlanCtaClick:p,currentPlan:f.F.Plan.STARTER,upsellPlan:f.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:r.key,nodeId:"fullscreen"===u.view&&u.nodeId||""},upsellSource:N.b.LIBRARY_UPSELL_BADGE}):i.createElement(x,{team:n,afterFileMove:l,result:_,isPlanSpacesEnabled:g,onStylesClick:p}):i.createElement(i.Fragment,null)},"publish-components-upsell");function x(e){let r=(0,a.d4)(e=>e.currentUserOrgId),{result:n,isPlanSpacesEnabled:o,onStylesClick:s}=e,l=(0,y.q5)(),c=l?.editorType??null,u=o&&(0,S.w5)(e.team),p=i.useMemo(()=>n.transform(e=>e.currentUser.teamEditRoles.some(e=>{let r=e.team;return r&&(0,w.Vi)(r,c)&&!(0,w.M4)(r)&&!r.deletedAt})).unwrapOr(!1),[c,n]),m=!!r,h=o&&l&&(0,E.jd)(l.project),_=(0,I._6)();if(!l)return i.createElement(i.Fragment,null);if("loaded"!==n.status)return i.createElement(P.aF,{size:"small",height:176},i.createElement(d.qc,null));if(p||m||h)return i.createElement(U,{isFileInTeamWithProFeatures:u,isFileInOrg:m,team:e.team,afterFileMove:e.afterFileMove,onStylesClick:s});let g="fullscreen"===_.view?_.nodeId??"":void 0;return void 0!==g?i.createElement(D.bP,{team:e.team,resource:C.Bi.TEAM_LIBRARY,action:O.pE.PUBLISH_COMPONENTS,editorType:T._Y.DESIGN,onStarterPlanCtaClick:s,currentPlan:f.F.Plan.STARTER,upsellPlan:f.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:l.key,nodeId:g},upsellSource:N.b.LIBRARY_UPSELL_BADGE}):i.createElement(i.Fragment,null)}function U(e){let r=(0,a.wA)(),n=(0,y.q5)(),o=(0,a.d4)(e=>n?(0,g.up)(n,e.repos):null);if(!n)return i.createElement(i.Fragment,null);let s=(0,u.tx)("upsell.move_file_publish.move_file_to_team_to_publish"),d=(0,u.tx)("upsell.move_file_publish.move_file_to_pro_team_to_publish"),f=(0,u.tx)("upsell.move_file_publish.move_file_to_project_to_publish"),E=(0,u.t)("upsell.move_file_publish.move_to_team_to_publish_library_assets"),b=(0,u.t)("upsell.move_file_publish.move_to_project_to_publish_library_assets"),I=d;e.isFileInOrg?I=s:e.isFileInTeamWithProFeatures&&(I=f);let T=e.isFileInTeamWithProFeatures?(0,u.tx)("upsell.move_file_publish.move_to_project"):(0,u.tx)("upsell.move_file_publish.move_to_team");return i.createElement(_.fu,{name:"MoveFilePublishUpsell"},i.createElement(P.aF,{title:e.isFileInTeamWithProFeatures?b:E,size:"small"},i.createElement(l.s_,{...e,dispatch:r}),I,i.createElement("div",{className:M.OZ},i.createElement("div",{className:M.ac},i.createElement(c.tM,{onClick:()=>{r(m.Ce())},trackingProperties:{trackingDescriptor:h.c.CANCEL}},(0,u.tx)("upsell.shared.cancel")),i.createElement(c.rb,{href:"#",className:M.pL,onClick:()=>{let{afterFileMove:i}=e;(0,p.hd)({key:n.key,name:n.name,folder_id:n.folderId,team_id:n.teamId,editor_type:n.editorType,parent_org_id:n.parentOrgId},o,r,{handlesVisualBell:!1,callback:i},{isPublishing:!0})}},T)))))}},372291:(e,r,n)=>{"use strict";n.d(r,{RX:()=>I,Lm:()=>b});var i=n(411855),a=n(587670),o=n(772841),s=n(44948),l=n(966712),c=n(374626),d=n(391388);n(776621),n(880048),n(335682);var u=n(623746),p=n(58032),m=n(459401),h=n(38580),_=n(684107),g=n(437304),f=n(279453);(0,c.Iz)(e=>(0,_.x8)({fileKey:e}));let E=(0,c.Iz)(e=>(0,h.eU)(r=>{let n={};for(let i of e)n[i]=r((0,f.u6n)({fileKey:i}));return n}),m.valuesEqual);(0,c.Iz)(e=>(0,h.eU)(r=>{let n={};for(let i of e)n[i]=r((0,f.zkh)({libraryKey:i}));return n}),g._f);let y="all_sources";function b(){let e=(0,p.je)();return function(e,r){let n=(0,i.useMemo)(()=>E(e),[e]),a=(0,c.md)(n);return(0,s.wm)(()=>{let e=d.Qw.all(Object.values(a));return"loaded"!==e.status?e.transform(()=>({})):d.Qw.loaded(Object.fromEntries(Object.entries(a).map(([e,n])=>[e,function(e,r=y){var n,i;if(e?.status!=="loaded")return[];let a=e.data.file;if(a?.status!==o.tT.Loaded)return[];let s=a.data;return s?.modules?.status!==o.tT.Loaded?[]:(n=s.modules.data.map(e=>(0,u.J4)(e,{type:"team",file:s})),i=r,n.filter(e=>(i===y||e.moduleSource===i)&&I(e)))}(n,r)])))},[a,r])}((0,s.wm)(()=>e.data?.map(e=>e.fileKey)??[],[e.data]),a.QjO.EDITOR_TEMPLATE)}function I(e){if(!(0,l.kc)().dse_module_publish)return!1;switch(e.moduleSource){case a.QjO.EDITOR_TEMPLATE:return!!(0,l.kc)().dse_editor_templates_v1;case a.QjO.SLIDES_TEMPLATE:return!0;case a.QjO.SITES_TEMPLATE:return!!(0,l.kc)().sites;case a.QjO.LITE_TEMPLATE:return!!(0,l.kc)().cooper}}},60088:(e,r,n)=>{"use strict";n.d(r,{B:()=>u});var i=n(411855),a=n(109388),o=n(188507),s=n(743282),l=n(738269),c=n(720488),d=n(206074);function u(e){let r=(0,o.wA)(),n=i.useMemo(()=>e||(0,s.g)(),[e]),u=(0,o.d4)(e=>e.dropdownShown?.type===n),p=i.useMemo(()=>document.createElement("div"),[]);i.useEffect(()=>(document.body.appendChild(p),()=>{document.body.removeChild(p)}),[p]);let m=i.useRef(null),h=a.findDOMNode(m.current),_=h?.getBoundingClientRect()||null,g=e=>{e.callback&&e.callback("",null,r)};return{toggleDropdown:()=>{u?r(l.oB()):r(l.j7({type:n}))},dropdownTargetRef:m,Dropdown:function(e){let n=(0,c.UV)(e);return i.createElement(i.Fragment,null,u&&_&&a.createPortal(i.createElement(d.j,{parentRect:_,dispatch:r,onSelectItem:g,...e,...n}),p))},isDropdownShown:u}}},319008:(e,r,n)=>{"use strict";n.d(r,{Nz:()=>et});var i=n(411855),a=n(188507),o=n(634832),s=n(243742),l=n(587670),c=n(629019),d=n.n(c),u=n(323434),p=n(134288),m=n(776250),h=n(344780),_=n(358145),g=n(966712),f=n(374626),E=n(563706),y=n(99380),b=n(438741),I=n(489604),T=n(554322),v=n(572206),S=n(175515),w=n(939863),A=n(463304),N=n(457630),C=n(29680),O=n(335682),L=n(754209),R=n(78933),P=n(611978),D=n(247014),k=n(951840),M=n(407844);n(666258),n(168289),n(396021),n(270296);var F=n(746806),x=n(857063),U=n(534636),B=n(712053),V=n(14903),G=n(371536),H=n(855980),W=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(W||{});let K=(e,r)=>{let n=(0,N.ni)(),a=(0,T.Av)(),l=(0,M._)(),c=(0,C.p8)("showUi"),d=(0,P._6)(),u="prototype"===d.view&&"slides"===d.file.editor_type,p=function({isUI3:e,prototypeHeaderHidden:r,showUi:n,style:i,toolbarHeight:a,editorBannerHeight:s}){let l=0;if(e)l=0;else switch(i){case 3:case 0:case 1:l=n?a:0;break;case 2:l=r?0:a;break;default:(0,o.assertNever)(i)}return 0!==s&&(l+=s),l}({isUI3:"ui3"===(0,s.DP)().version&&!u,prototypeHeaderHidden:r,showUi:c,style:e,toolbarHeight:a,editorBannerHeight:l});return i.useMemo(()=>({left:n.x,top:p,width:n.width}),[n,p])},j=(e,r)=>{let n;let a=function(e){let r;let n=(0,N.ni)(),a=(0,M._)(),o=n.y+a;switch(e){case 1:r=4;break;case 2:r=o;break;case 3:r=0;break;case 0:r=10}return i.useMemo(()=>({left:n.x,top:o,width:n.width-(0===e?10:0),height:n.height-a-r}),[n,e,o,r,a])}(r),o=0;switch(r){case 0:n={borderWidth:5},o=5;break;case 1:n={borderTopWidth:4},o=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},o=5;break;case 2:n={}}return i.useMemo(()=>({style:{...a,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${o}px`},borderInfo:{width:o,color:e}}),[e,a,n,o])};function z(e){let{children:r,prototypeHeaderHidden:n}=e,a=(0,P.z3)(),o=0;"prototype"===a?o=2:E.Xb&&(o=1);let s=K(o,n||!1),l=2===o?H.Y$:void 0,c=2===o&&n?H.Fd:void 0;return i.createElement("div",{className:d()(H.GE,l,c),style:s,"data-testid":"multiplayer-bell-container"},r)}function Y(){let{style:e,borderInfo:r}=i.useContext(B.h);return e={...e,borderColor:r.color},i.createElement("div",{"data-testid":"viewport-frame",className:d()(H.KM),style:e})}function $(){let{style:e,borderInfo:r}=i.useContext(B.h);return e={...e,color:"brand"===r.color?"var(--color-bg-brand)":r.color,"--borderColorTransitionDurationSeconds":`${G.Bn}s`},i.createElement("div",{className:H.KM,style:e})}function q(e){let{children:r,colorOverride:n,overlayStatus:a}=e,o=(0,L.$0)(),s=(0,L.dR)(),l=(0,L.Ww)(),c=(0,P._6)(),d=0;"prototype"===c.view?d=c.isPresenterView?3:2:E.Xb&&(d=1);let u=j((()=>{if(n)return n;if(!a)return s&&l?.sessionID===s?.sessionID?l?.color??"transparent":o?.color??"transparent";{let{self:e,others:r}=a;return"none"!==e?"recording"===e?"var(--ramp-red-600)":"brand":"following"===r&&"none"===e?o?.color??"transparent":"transparent"}})(),d);return i.createElement(B.h.Provider,{value:u},r)}var Z=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.PREPARING_TO_RECORD="preparing_to_record",e.RECORDING="recording",e.NONE="none",e))(Z||{}),X=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(X||{});function J(){return"prototype"!==(0,P.z3)()}function Q(e,r,n,a){let o=(0,_.ZC)(e),s=(0,_.ZC)(r),l=i.useRef(performance.now());return i.useEffect(()=>{if("presenting"===e){let e=h.sn.tryStop("start_spotlight");e&&((0,m.sx)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0}),(0,g.kc)().workspace_activity_write&&n&&n.team&&n.team.workspaceId&&k.i.recordActivity({activityUnitType:D.qj.FILE_COLLABORATION,fileKey:n.key,collaborationType:D.Uz.SPOTLIGHT_STARTED,numPeopleInFile:a.current}))}else if("pending_auto_follow"===r){let e=h.sn.tryStop("join_spotlight");e&&(0,m.sx)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===r){let e=h.sn.tryStop("start_following");e&&(0,m.sx)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,r,n,a]),(e!==o||r!==s)&&(l.current=performance.now()),{statusChangedAt:l.current}}function ee(e){let{multiplayer:r,prototypeHeaderHidden:n}=e,a=(0,L.Ww)(),s=(0,L.dR)(),c=(0,L.$0)(),d=(0,L.y)(),m=(0,O.q5)(),h=(0,R.T)(),_=(0,b.y7)(),g=(0,b.oJ)(),E=(0,b.$)(),T=i.useContext(y.q5),[N,C]=i.useState(!1);i.useEffect(()=>{C(!1)},[s?.sessionID]),i.useEffect(()=>{c?.sessionID===s?.sessionID&&C(!1)},[c?.sessionID,s?.sessionID]);let{isAutoFollowPending:D,cancelAutoFollowCallback:k,completeAutoFollowCallback:M,observeCurrentPresenter:B,autoFollowType:W,autoFollowDelayMs:K}=(0,L.oW)(e),{isWaitingForFirstFollower:j,stopPresenting:Y}=function(e){let[r,n]=i.useState(!1),a=e.followerCount,[o,s]=(0,f.fp)(I.Dv);0===a||r||n(!0);let c=(0,b.jA)(e)||o;(0,b.jA)(e)&&o&&s(!1),!c&&r&&n(!1);let d=c&&0===a&&!r,u=(0,R.T)(),p=(0,P.z3)(),m=i.useCallback(()=>{u(R.N.STOP),"prototype"===p?S.hk()?.stopPresenting():l.h3O.stopPresenting()},[u,p]),h=i.useCallback(()=>!!d&&(m(),!0),[m,d]);return(0,A.O1)(h,A.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:d,stopPresenting:m}}(r),Z=function(e){let{multiplayer:r,showingExplainer:n,isPendingPresenting:i,recorder:a}=e;return a.isRecording?"recording":a.mediaStream?"preparing_to_record":(0,b.jA)(r)||i?"presenting":n?"showing_explainer":(0,b.NB)(r)?"prompt_to_accept_nomination":"none"}({multiplayer:r,showingExplainer:(0,f.md)(I.ah),isPendingPresenting:(0,f.md)(I.Dv),recorder:T}),X=function(e){let{multiplayer:r,isAutoFollowPending:n,presenterUser:i,suppressRejoinPrompt:a}=e;return n?"pending_auto_follow":(0,b.L3)(r)?"following":i&&!a?"prompt_to_rejoin":"none"}({multiplayer:r,isAutoFollowPending:D,presenterUser:s,suppressRejoinPrompt:N}),ee=i.useRef(r.allUsers.length);ee.current=r.allUsers.length;let{statusChangedAt:et}=Q(Z,X,m,ee),[er,en]=function(e,r){switch(e){case"presenting":if("following"===r||"prompt_to_rejoin"===r)return[e,"none"];return[e,r];case"prompt_to_accept_nomination":if("pending_auto_follow"===r)return["none",r];return[e,"none"];case"showing_explainer":case"none":return[e,r];case"preparing_to_record":case"recording":return[e,"none"];default:(0,o.assertNever)(e)}}(Z,X),ei=i.useCallback(()=>{C(!0),k(),h(R.N.IGNORE)},[k,h]),ea=W===L.D_.INITIAL,eo=i.useCallback(()=>"pending_auto_follow"===en&&!!D&&W===L.D_.INITIAL&&(k(),!0),[W,k,D,en]);(0,A.O1)(eo,A.KD.MULTIPLAYER_SPOTLIGHT);let es=J(),el="showing_explainer"===er,ec="none"!==er,ed="none"!==en,eu=i.useRef(null);i.useEffect(()=>{"preparing_to_record"===er&&T.mediaStream&&eu.current&&(eu.current.srcObject=T.mediaStream)},[er,T.mediaStream]);let ep=["presenting","prompt_to_accept_nomination","showing_explainer","preparing_to_record","recording"].includes(er)||["following"].includes(en),[em,eh]=(0,f.fp)(I.uc);return ep!==em&&eh(ep),i.createElement(q,{overlayStatus:{self:er,others:en}},i.createElement(u.N,null,ep&&i.createElement(p.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},i.createElement($,null))),i.createElement(u.N,null,ec&&i.createElement(p.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},i.createElement(z,{prototypeHeaderHidden:n},(()=>{switch(er){case"presenting":if(null===a)return null;if(j){let e=(0,w.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),r=(0,w.t)("collaboration.spotlight.bell.presenter.cancel");return i.createElement(U.Y,{color:"brand",message:{text:e},renderKey:`${a.sessionID}`,progressBar:!0,progressBarDurationMs:6e3,autoHide:!1,button:{text:r,onClick:Y}})}return i.createElement(U.Y,{color:"brand",message:{text:i.createElement(x.s,{count:r.followerCount})},renderKey:`${a.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,w.t)("collaboration.spotlight.bell.presenter.stop"),onClick:Y},docked:es});case"prompt_to_accept_nomination":if(!a||!d)return null;return i.createElement(U.Y,{color:"brand",useSecondaryColor:!0,message:{text:(0,w.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:d.name})},renderKey:`${a.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,w.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{_(r)}},showCloseButton:!0,onCloseCallback:()=>{g(a.sessionID,r)}});case"showing_explainer":if(null===a)return null;let e=s?(0,w.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:s?.name}):(0,w.tx)("collaboration.spotlight.bell.explainer");return i.createElement(U.Y,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${r.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"preparing_to_record":case"recording":if(!a)return null;return i.createElement(V.e,{onStopPresenting:Y});case"none":return null;default:(0,o.assertNever)(er)}})()))),i.createElement(u.N,null,ed&&i.createElement(p.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},i.createElement(z,{prototypeHeaderHidden:n},(()=>{switch(en){case"pending_auto_follow":{if(!s)return null;let e=s.name,r=ea?{text:(0,w.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:M}:{text:(0,w.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=ea?{text:(0,w.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ei}:null;return i.createElement(U.Y,{color:s?.color,message:r,renderKey:`${s.sessionID}`,progressBar:ea,progressBarDurationMs:K||0,autoHide:!1,button:n,ghost:el})}case"following":{let e=r.observingSessionID===r.presenterSessionID;if(null===c)return null;let n=c?.name||"",a=e?(0,w.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,w.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),o={text:e?(0,w.t)("collaboration.spotlight.bell.stop_following"):(0,w.t)("collaboration.spotlight.bell.stop"),onClick:()=>E(r)};return i.createElement(U.Y,{color:c?.color,message:{text:a},renderKey:`${r.observingSessionID}`,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:o,docked:es,ghost:el})}case"prompt_to_rejoin":let e=()=>(0,b.KI)(B,r,"Spotlight Rejoined",et);if(null!==c||null===s)return null;let n=(0,w.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:s.name}),a=(0,w.t)("collaboration.spotlight.bell.follower.follow");return i.createElement(U.Y,{color:s?.color,message:{text:n,onClick:e},renderKey:`${s.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:{text:a,onClick:e},showCloseButton:!0,onCloseCallback:()=>(0,b.KI)(()=>C(!0),r,"Spotlight Rejoin Dismissed",et),useSecondaryColor:!0,ghost:el});case"none":return null;default:(0,o.assertNever)(en)}})()))),(()=>{if("preparing_to_record"!==er&&"recording"!==er||!T.mediaStream)return null;let e=T.mediaStream.getVideoTracks();if(0===e.length)return null;let r=e[0].getSettings();if(!r.width||!r.height)return null;let n=r.width/400,a=r.height/225,o=n>a?400:r.width/r.height*225,s=n>a?r.height/r.width*400:225;return i.createElement(F.vx,{initialPosition:new v.Mi(12,-30),initialHeight:s,initialWidth:o,transparentContentBackground:!0,initialConstraints:{x:"left",y:"bottom"},canRenderBelowViewport:!0},i.createElement("video",{className:H.bw,ref:eu,autoPlay:!0,playsInline:!0,muted:!0}))})())}function et(e){let{prototypeHeaderHidden:r}=e,n=(0,a.d4)(({multiplayer:e})=>e),o=(0,L.HG)(),s=(0,L.By)(),l=-1!==n.observingSessionID;return((0,L.VA)({multiplayer:n}),(0,L.Pi)({multiplayer:n}),s)?null:o?i.createElement(ee,{multiplayer:n,prototypeHeaderHidden:r}):l?i.createElement(er,{prototypeHeaderHidden:r}):null}function er(e){let{prototypeHeaderHidden:r}=e,n=(0,L.$0)(),o=(0,O.q5)(),s=(0,a.d4)(e=>e.multiplayer.allUsers.length),l=i.useRef(s);l.current=s,Q("none","following",o,l);let c=`${n?.sessionID}`,d=i.useMemo(()=>{let e=n?.name||"";return{text:(0,w.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[n]),u=J();return null===n?null:i.createElement(q,null,i.createElement(Y,null),i.createElement(z,{prototypeHeaderHidden:r},i.createElement(U.Y,{color:n?.color,message:d,renderKey:c,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:null,docked:u})))}},666258:(e,r,n)=>{"use strict";n.d(r,{$i:()=>l,a8:()=>s});var i=n(587670),a=n(38580),o=n(168289);(0,a.eU)(2e3),(0,a.eU)(2e3),(0,a.eU)(""),(0,a.eU)(0),(0,a.eU)(!1),(0,a.eU)(!1),(0,a.eU)(null);let s=(0,a.eU)(o.h0.AWAITING_PLAYBACK);(0,a.eU)(i.z7E.DEFAULT),(0,a.eU)(o.zu.DEFAULT),(0,a.eU)(void 0);let l=(0,a.eU)(o.JJ.CANVAS);(0,a.eU)(0)},168289:(e,r,n)=>{"use strict";n.d(r,{JJ:()=>a,h0:()=>d,zu:()=>o});var i=(e=>(e.SET_CHAT="setChat",e.CLEAR_CHAT="clearChat",e.TARGET_DOM_NODE="targetDOMNode",e.TARGET_SCENE_NODE="targetSceneNode",e.INSERT_NODE="insertNode",e.ADJUST_ZOOM_LEVEL="adjustZoomLevel",e.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",e.CHANGE_TOOL="changeTool",e.MOVE_VIEWPORT="moveViewport",e.SET_CURSOR_DIRECTION="setCursorDirection",e.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",e.UPDATE_SELECTED_NODE_PROPERTIES="updateSelectedNodeProperties",e.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",e.FOCUS_INPUT="focusInput",e.SELECT_SCENE_NODE="selectSceneNode",e.SET_VIEWPORT_FRAME_TYPE="setViewportFrameType",e))(i||{}),a=(e=>(e.CANVAS="canvas",e.PROPERTIES_PANEL="properties-panel",e.TEXT_PANEL="text-panel",e))(a||{}),o=(e=>(e.DEFAULT="left",e.RIGHT="right",e))(o||{}),s=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",e[e.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",e))(s||{}),l=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e))(l||{}),c=(e=>(e.CREATE_FRAME="How to draw a frame",e.FORMAT_FRAME="How to use the design panel",e.CREATE_TEXT="Add words where needed",e.FORMAT_TEXT="How to format text",e))(c||{}),d=(e=>(e.PLAYING="playing",e.AWAITING_PLAYBACK="awaitingPlayback",e))(d||{}),u=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(u||{}),p=(e=>(e.TOP="top",e.CENTER="center",e.BOTTOM="bottom",e))(p||{}),m=(e=>(e.TEST="test",e.PRODUCT_FRAME="productFrame",e.PRODUCT_FRAME_CHERRIES_FRAME="productFrameCherriesFrame",e.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",e.CHERRIES_FRAME_CHERRIES_IMAGE="cherriesFrameCherriesImage",e.CHERRIES_FRAME_CHERRIES_TEXT="cherriesFrameCherriesText",e.CHERRIES_FRAME_PRICE_TEXT="cherriesFramePriceText",e.CHERRIES_FRAME_GROWN_TEXT="cherriesFrameGrownText",e.NO_BASICS_FILE_FRAME="noBasicsFileFrame",e.NO_BASICS_FILE_TEXT="noBasicsFileText",e))(m||{}),h=(e=>(e.ESC_KEY="esc key",e.STOP_BTN="stop button",e.NEXT_BTN="next tutorial button",e.PREV_BTN="previous tutorial button",e.STATE_MANAGER_ERROR="state manager error",e))(h||{})},396021:(e,r,n)=>{"use strict";n(86625),n(776621),n(198868),n(766022),n(168289),n(246497)},965626:(e,r,n)=>{"use strict";n(411855),n(568214),n(22332),n(762638),n(309798),n(99506),n(108401),n(666258),n(168289),n(396021),n(217130),n(246497)},67350:(e,r,n)=>{"use strict";n(411855),n(629019),n(946689),n(762638),n(939863),n(175290),n(101505),n(672517),n(309798),n(833629),n(970332),n(666258),n(168289),n(63666),n(588694),n(799088)},301922:(e,r,n)=>{"use strict";n.d(r,{q:()=>s}),n(188507);var i=n(38329),a=n(130097);n(915440);var o=n(279453);function s(){return new Promise((e,r)=>{let n=i.D.getState().openFile?.key;if(!n)return e(!1);(0,a.Ek)(o.J2w,{fileKey:n}).then(r=>e(!!r.file?.org?.cursorChatDisabledAt))})}},108401:(e,r,n)=>{"use strict";var i={};n.r(i),n.d(i,{GLARE_ANIMATION:()=>x,GRAY_BACKGROUND:()=>F,NONE:()=>B,ORANGE_GRADIENT:()=>M,PINK_GRADIENT:()=>D,animateBg:()=>k,glareAnimation:()=>U});var a=n(411855);n(188507);var o=n(587670),s=n(629019),l=n.n(s),c=n(344780),d=n(568214);n(22332);var u=n(966712);n(192437),n(798099),n(809831);var p=n(226055);n(949632),n(630331),n(457630),n(805286),n(460289),n(754209),n(100197),n(433861),n(593392);let m=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(m.set("me encanta","PINK_GRADIENT"),m.set("hola","PINK_GRADIENT"),m.set("bienvenides","PINK_GRADIENT"));let h=new Map([["https://static.figma.com/uploads/a83de90bf34495081ce2e8bcaf28d1d2c16e5186",["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],["https://static.figma.com/uploads/d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],["https://static.figma.com/uploads/0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],["https://static.figma.com/uploads/ffd0635e8f9322352eff0c15411ac0b536b98d87",["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],["https://static.figma.com/uploads/ff5be810b821d264cc2c95f665d24a867c34e587",["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],["https://static.figma.com/uploads/78f60a21d2616c2a24c7645d8636dec855e48ffb",["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],["https://static.figma.com/uploads/1429964104bceac90c5c8e731ce4cc50b27e2797",["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],["https://static.figma.com/uploads/e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c",["gift","hbd","bday","birthday"]],["https://static.figma.com/uploads/778eea842ed4020f6209e97c77abcd84984e5c94",["cool","coool","swag","chill"]],["https://static.figma.com/uploads/4fdb8f4b31f0e8f7abf1b56b334ab6b6fed134d0",["goat"]]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(h.set("https://static.figma.com/uploads/62f55b94bf05d9a49731714238dd5e6ce716225d",["me encanta","ole","vamos"]),h.set("https://static.figma.com/uploads/88ea7d675b3ebeebbd917bf6857afa502b51d928",["bienvenidos","bienvenides","bienvenidas"]),h.set("https://static.figma.com/uploads/89a607910c3edfcaf5efa1e19bc8b646f2e47a6a",["fuego","picante"]),h.set("https://static.figma.com/uploads/8b29bcdf89d32bafec42bee873327384b55eb54b",["hola","brillante","excelente","bien","muy bien","sol"]));var _=(e=>(e[e.Default=0]="Default",e))(_||{});let g=new Map;h.forEach((e,r)=>{!function(e,r,n){e.forEach(e=>n.set(e,r))}(e,r,g)});var f=n(741464);n(517333);var E=n(313894);n(38329),n(737433);var y=n(939683),b=n(886653);n(617453),n(193212),(0,n(38580).eU)(!1),(class e extends E.w{constructor({startingRelativePosition:r,startingRotation:n,position:i,viewportZoomScale:a,cursorOnRightForWindup:o,cursorOnRightForCollision:s,sessionId:l,getUserCursorTransform:c}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=i,this.viewportZoomScale=a,this.cursorOnRightForWindup=o,this.cursorOnRightForCollision=s;let d={transform:`translate(${r.x}px, ${r.y}px) rotate(${n}rad)`},u={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},p={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},m=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${p.transform}`})),h=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,u],timing:{duration:12*h,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[u,p],timing:{delay:12*h,duration:4*h,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:m,timing:{delay:16*h,duration:4*h,easing:`steps(${m.length})`}},{keyframes:[p,p],timing:{delay:20*h,duration:18*h}}],getReturnToCursorTransform:r=>{let n=(this.cursorOnRightForCollision?1:-1)*10,i=c(),o=(i.position.x-this.position.x)*a,s=(i.position.y-this.position.y)*a,l=i.rotation;return`translate(${e.lerp(n,o,r)}px,${e.lerp(0,s,r)}px) rotate(${e.lerp(0,l,r)}rad) scale(${e.lerp(2,1,r)})`}}}static lerp(e,r,n){return e*(1-n)+r*n}}).RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];let I=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let r=this.subscriptions.indexOf(e);r>=0&&this.subscriptions.splice(r,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let r of(this.wiggleMode=e,this.subscriptions))r(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),r=e-this.lastUpdateTime;return this.lastUpdateTime=e,r/1e3}update(e,r){e?this.setMousePositionAndUpdate(e,r):this.updateWiggleMeter(r)}setMousePositionAndUpdate(r,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let i="number"==typeof n?n:this.getDeltaTime();if(i<=0)return;this.mouseX=r.x,this.mouseY=r.y;let a=1,o=(this.mouseX-this.lastMouseX)/i,s=(this.mouseY-this.lastMouseY)/i;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(o*o+s*s);if(l>0){let e=o/l,r=s/l;a=e*this.lastDirectionX+r*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=r}let c=i/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=i/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+c;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-c),this.speedFactor=Math.min(1,this.speedFactor);let u=this.speedFactor>=.8,p=u&&a<0,m=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);u&&p&&m&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-i/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=i/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),u&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(i)}updateWiggleMeter(r){if((r="number"==typeof r?r:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=r/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function T(e,r){let n=3*e,i=3*e,a=1.7999999999999998*e,o=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){o.push(v(0,0,0));continue}let r=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*i)-i/2,l=Math.floor(Math.random()*a)-a/2;o.push(v(r,s,l))}return new Animation(new KeyframeEffect(r,o,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function v(e,r,n){return{transform:`translate(${e}px, ${r}px) rotate(${n}deg)`}}function S(e){return!!e.length&&e.some(e=>"running"===e.playState)}function w(e){let{content:r,children:n}=e,[i,o]=(0,a.useState)(0),s=(0,a.useRef)(0),l=(0,a.useRef)([]),c=a.useRef(null),[d,u]=(0,a.useState)([]),p=(0,y.am)(),m=(0,a.useMemo)(()=>0===r.length?0:((r.match(/\!+$/g)||[])[0]||"").length,[r]),h=(0,a.useCallback)(e=>{clearTimeout(s.current),s.current=setTimeout(()=>{o(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,a.useEffect)(()=>{o(m),h(1e3)},[m,h]),(0,a.useEffect)(()=>{if(!c.current)return;i>1&&!l.current.length&&(l.current=[T(1,c.current),T(1.5,c.current),T(2,c.current),T(2.5,c.current),T(3,c.current)]);let e=S(l.current);if(i>1){let e=Math.min(i-1-1,l.current.length-1);l.current.forEach((r,n)=>{n===e?r.play():r.cancel()})}else l.current.forEach(e=>e?.cancel());let r=S(l.current);!e&&r&&p("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[i,p]),a.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":d,ref:c},n)}I.WIGGLE_MODE_DEACTIVATION_TIME=6,I.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,I.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,I.WIGGLE_MODE_MOUSE_RESET_TIME=.6,I.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,I.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,I.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,I.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,I.WIGGLE_MODE_REPLENISH_SHAKES=3.5,I.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,I.WIGGLE_MODE_SHAKE_RESET_TIME=.5,I.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3,(0,b.xx)(function(e){return e.reduce((e,r)=>(e[r.sessionID]=r,e),{})}),n(36127);n(301922);var A=n(634832),N=n(277204);function C({color:e,isHighFiveHandOut:r,temporarilyHide:n,isCursorHandOnRight:i,aboutToHide:o=!1}){return a.createElement("div",{className:l()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":r,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":o})},a.createElement("div",{style:{opacity:n?"0":"1"},className:l()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":i})},a.createElement(P,{color:e})))}let O="#FFFFFF",L=new Set([O,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function R({color:e}){let[r,n]=a.useState(!1);if(!L.has(e))return(0,A.assertDev)(!!e,`Unknown color ${e} for Cursor High Fives`),a.createElement(a.Fragment,null);let i=(0,N._)(r?O:e,o.z7E.HIGH_FIVE,!1);return a.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:i,alt:"",onError:()=>n(!0)})}function P({color:e}){return a.createElement(R,{key:e,color:e})}n(563706),n(939863),n(145519),n(330505);let D="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",k="cursor_chat_emotes--animateBg---meP2",M="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",F="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",x="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",U="cursor_chat_emotes--glareAnimation--x1WJw",B="cursor_chat_emotes--NONE---FYHz";o.NLJ.SELECT,o.NLJ.HAND,o.NLJ.SELECT,o.NLJ.HAND;var V=n(91408);n(301462),n(601607),n(676938);var G=n(860168);(0,V.hG)(G.tui),n(781779);var H=n(217130);let W=(0,a.memo)(function({name:e,color:r,cursorType:n,chatMessage:s,isHighFiving:h,focusOnTextCursor:_,temporarilyHide:g,isCursorHandOnRight:E,isCursorPointingRight:y,editorType:b,isCursorAndChatAreaOffscreen:I,sessionId:T,prefersReducedMotion:v,isHighFivingSupported:S,useChatAnimation:A,disableMessageFade:O,isStaticView:L,isHoveringWidgetWithHiddenCursors:R}){let P=(0,p.GS)()&&!!(0,u.kc)().ui3_theme_cursors,[D,k]=(0,a.useState)(1),M=(0,a.useMemo)(()=>(0,d.GL)(r),[r]),[F,x]=(0,a.useState)("NONE"),[U,B]=(0,a.useState)(L),[V,G]=s||[];(0,a.useEffect)(()=>{let e,r;return V||G?(B(!0),k(1)):(B(!1),x("NONE")),O||(e=setTimeout(()=>{k(0)},5e3),r=setTimeout(()=>{B(!1),x("NONE")},8e3)),()=>{k(0),B(!1),x("NONE"),clearTimeout(e),clearTimeout(r)}},[V,G,O]);let W="whiteboard"===b;(0,a.useEffect)(()=>{if(W&&V&&!I)for(let e of m.keys()){let r=m.get(e);r&&function(e,r){var n;let i=e.toLocaleLowerCase(),a=!(1===(n=i.charAt(i.length-r.length-1)).length&&/[A-Za-z]/.test(n));return i.endsWith(r)&&a}(V,e)&&x(r)}},[V,I,W]);let K=a.useRef(null);(0,a.useEffect)(()=>{if(K.current&&K.current.innerText===V){let e=c.sn.tryStop(`view_cursor_chat_message_${T}_${V}`);e&&c.Vq.add("view_cursor_chat_message",e)}},[V,K,T]);let j=(0,u.kc)().cursor_bot&&y&&n===o.z7E.DEFAULT,z=n===o.z7E.PEN,Y=a.createElement("div",{className:l()({[H.iU]:U,[H.VW]:!U,[H.S8]:P&&!z,[H.z8]:j}),style:{color:M}},a.createElement("div",{className:U?H.bu:H.iY,style:{opacity:U?M===d.e3?.8:.5:1},dir:"auto"},e),U&&a.createElement("div",{className:H.Lo,style:{opacity:M===d.YN?.8*D:D,boxShadow:W?void 0:`2px 4px 8px ${r}40`},dir:"auto"},G&&a.createElement("div",{className:G.length>0&&(V?.length??0)>0?H.vD:""},G),V&&a.createElement("div",{ref:K},V)),a.createElement("div",{className:`${H.hD} ${i[F]}`,style:"NONE"!==F?{background:r,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:r},onAnimationEnd:()=>x("NONE")}));return _?null:a.createElement("div",{className:H.Dy,style:{opacity:R?0:1},"data-testid":`multiplayer-cursor-${T}`},a.createElement("div",{className:H.or},S?a.createElement(a.Fragment,null,a.createElement("div",{className:H.p},a.createElement(C,{color:r,isHighFiveHandOut:h,temporarilyHide:g,isCursorHandOnRight:E})),a.createElement("img",{className:l()({[H.u0]:!0,[H.Bj]:!0,[H.DE]:h,[H.z8]:j}),src:(0,N._)(r,h?o.z7E.DEFAULT:n,P),alt:`${h?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=(0,N.c)(r,P)}})):a.createElement("img",{className:l()({[H.u0]:!0,[H.z8]:j}),src:(0,N._)(r,n,P),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=(0,N.c)(r,P)}}),T&&a.createElement(f.o,{sessionId:T})),(A||W)&&!v?a.createElement(w,{content:V||""},Y):Y)}),K=a.memo(function({isCursorAndChatAreaOffscreen:e,x:r,y:n,children:i}){let o={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${r}px, ${n}px, 0)`};return a.createElement("div",{style:o},i)}),j=(e,r,n)=>{let i=React.useRef(null);i.current=e?.sessionId??i.current,useEffect(()=>{i.current&&n&&cursorChatTracker?.setOtherUserChattingState(i.current,r)},[n,r]),useEffect(()=>(i.current&&cursorChatTracker?.setOtherUserChattingState(i.current,!1),()=>{i.current&&cursorChatTracker?.setOtherUserChattingState(i.current,!1)}),[])}},624875:(e,r,n)=>{"use strict";n.d(r,{O:()=>o}),n(411855),n(188507);var i=n(91408),a=(n(498750),n(153234),n(572206),n(939863),n(293017),n(287010),n(973149),n(617453),n(205135),n(7959),n(746806),n(860168));n(801695);let o="nudge-amount";(0,i.hG)(a.md8)},371591:(e,r,n)=>{"use strict";n.d(r,{Bf:()=>ts,UB:()=>tc,xH:()=>tl});var i,a=n(411855),o=n(188507),s=n(634832),l=n(404396),c=n(948500),d=n(336935),u=n(426710),p=n(249964),m=n(93098),h=n(286482),_=n(5050),g=n(54837),f=n(935829),E=n(915906),y=n(732720),b=n(701817),I=n(508275),T=n(844463),v=n(841614),S=n(386424),w=n(752046),A=n(960141),N=n(556006),C=n(77437),O=n(353566),L=n(675507),R=n(303511),P=n(666309),D=n(222903),k=n(47493),M=n(459593),F=n(368785),x=n(785273),U=n(382707),B=n(206703),V=n(769335),G=n(711229),H=n(514118),W=n(217754),K=n(923968),j=n(542061),z=n(947718),Y=n(360407),$=n(970961),q=n(722872),Z=n(826097),X=n(587670),J=n(707458),Q=n(629019),ee=n.n(Q),et=n(966712),er=n(218549),en=n(886653),ei=n(574176),ea=n(348425),eo=n(939863),es=n(589538),el=n(497306),ec=n(931770),ed=n(498606),eu=n(820396),ep=n(764797),em=n(872429),eh=n(533228),e_=n(531930),eg=n(459476),ef=n(608974),eE=n(107018),ey=n(877424),eb=n(479641),eI=n(404754),eT=n(608026),ev=n(233891),eS=n(464300),ew=n(763634),eA=n(954037),eN=n(116198),eC=n(443043),eO=n(77499),eL=n(462725),eR=n(968109),eP=n(498902),eD=n(251232),ek=n(21458),eM=n(181033),eF=n(951912),ex=n(404605),eU=n(912109),eB=n(882354),eV=n(436902),eG=n(416014),eH=n(813601),eW=n(624204),eK=n(401127),ej=n(408026),ez=n(828099),eY=n(630351),e$=n(554593),eq=n(263699),eZ=n(751395),eX=n(994891),eJ=n(638894),eQ=n(729005),e0=n(772661),e1=n(69688),e2=n(376449),e3=n(348844),e6=n(528517),e8=n(596922),e5=n(313888),e7=n(531800),e4=n(691151),e9=n(900952),te=n(142284),tt=n(297447),tr=n(660257),tn=n(353560),ti=n(618208);let ta=new er.q(750);function to(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return e0.A;case"CENTER":return eQ.A;case"MAX":return e1.A;default:(0,s.assertNever)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return eq.A;case"CENTER":return e$.A;case"MAX":return eY.A;default:(0,s.assertNever)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return eX.A;case"CENTER":return eZ.A;case"MAX":return eJ.A;default:(0,s.assertNever)(e.stackCounterAlignItems)}}return eO.A}(e=>{function r(e){return void 0!==e.objectsPanelThumbnailId}function n(e,n,i){let o={src:eG.A,tooltip:""};if(!e)return o;let j=e.type;switch((0,el.GI)(e)&&(j="STAMP"),j){case"BOOLEAN_OPERATION":switch(e.booleanOperation){case"UNION":return{src:i?a.createElement(E.C,null):eS.A,tooltip:(0,eo.t)("layer_icon.tooltip.union")};case"INTERSECT":return{src:i?a.createElement(y.q,null):eT.A,tooltip:(0,eo.t)("layer_icon.tooltip.intersect")};case"SUBTRACT":return{src:i?a.createElement(b.j,null):ev.A,tooltip:(0,eo.t)("layer_icon.tooltip.subtract")};case"XOR":return{src:i?a.createElement(I.p,null):ew.A,tooltip:(0,eo.t)("layer_icon.tooltip.exclude")};default:return o}case"VECTOR":return{src:i?a.createElement(T.g,null):tr.A,tooltip:(0,eo.t)("layer_icon.tooltip.vector")};case"STAR":return{src:i?a.createElement(v.j,null):e3.A,tooltip:(0,eo.t)("layer_icon.tooltip.star")};case"LINE":return{src:i?a.createElement(S.z,null):ek.A,tooltip:(0,eo.t)("layer_icon.tooltip.line")};case"ELLIPSE":return{src:i?a.createElement(w.H,null):eN.A,tooltip:(0,eo.t)("layer_icon.tooltip.ellipse")};case"RECTANGLE":case"ROUNDED_RECTANGLE":return{src:i?a.createElement(A.M,null):eG.A,tooltip:(0,eo.t)("layer_icon.tooltip.rectangle")};case"REGULAR_POLYGON":return{src:i?a.createElement(N.X,null):eV.A,tooltip:(0,eo.t)("layer_icon.tooltip.polygon")};case"TEXT":return{src:i?a.createElement(C.I,null):te.A,tooltip:(0,eo.t)("layer_icon.tooltip.text")};case"SLICE":return{src:i?a.createElement(O.z,null):ej.A,tooltip:(0,eo.t)("layer_icon.tooltip.slice")};case"GROUP":case"FRAME":if((0,em.oz)()&&r(e)&&e.parentNode?.isResponsiveSet)return{src:(0,ep.l)(e.size.x),tooltip:(0,eo.t)("layer_icon.tooltip.layout")};if(e.isStateGroup)return{src:i?a.createElement(L.k,null):e5.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};if((0,eh.R)(e))return{src:i?function(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return a.createElement(l.d,null);case"CENTER":return a.createElement(c.B,null);case"MAX":return a.createElement(d.E,null);default:(0,s.assertNever)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return a.createElement(u.J,null);case"CENTER":return a.createElement(p.P,null);case"MAX":return a.createElement(m.n,null);default:(0,s.assertNever)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return a.createElement(h.D,null);case"CENTER":return a.createElement(_.h,null);case"MAX":return a.createElement(g.A,null);default:(0,s.assertNever)(e.stackCounterAlignItems)}}return a.createElement(f.q,null)}(e):to(e),tooltip:(0,eo.t)("layer_icon.tooltip.auto_layout")};if(e.resizeToFit)return{src:i?a.createElement(R.g,null):eL.A,tooltip:(0,eo.t)("layer_icon.tooltip.group")};else return{src:i?a.createElement(f.q,null):eO.A,tooltip:(0,eo.t)("layer_icon.tooltip.frame")};case"RESPONSIVE_SET":if((0,em.oz)())return{src:a.createElement(P.A,null),tooltip:(0,eo.t)("layer_icon.tooltip.webpage")};return{src:i?a.createElement(f.q,null):eO.A,tooltip:(0,eo.t)("layer_icon.tooltip.frame")};case"CODE_COMPONENT":if((0,em.oz)())return{src:a.createElement(D.O,null),tooltip:(0,eo.t)("layer_icon.tooltip.code_component")};return{src:eO.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"MODULE":return{src:e4.A,tooltip:(0,eo.t)("layer_icon.tooltip.module")};case"SYMBOL":if((0,et.kc)().dse_templates_proto&&r(e)&&e.isTemplate)return{src:e4.A,tooltip:(0,eo.t)("layer_icon.tooltip.template")};if(r(e)&&e.isState||n?.isStateGroup)return{src:i?a.createElement(k.y,null):e7.A,tooltip:(0,eo.t)("layer_icon.tooltip.variant")};return{src:i?a.createElement(L.k,null):e5.A,tooltip:(0,eo.t)("layer_icon.tooltip.component")};case"INSTANCE":return{src:i?a.createElement(M.m,null):eR.A,tooltip:(0,eo.t)("layer_icon.tooltip.instance")};case"STICKY":return{src:i?a.createElement(F.a,null):e6.A,tooltip:(0,eo.t)("layer_icon.tooltip.sticky")};case"SHAPE_WITH_TEXT":return{src:i?a.createElement(x.T,null):eW.A,tooltip:(0,eo.t)("layer_icon.tooltip.shape_with_text")};case"CONNECTOR":return{src:i?a.createElement(U.y,null):eA.A,tooltip:(0,eo.t)("layer_icon.tooltip.connector")};case"STAMP":return{src:i?a.createElement(B.w,null):e2.A,tooltip:(0,eo.t)("layer_icon.tooltip.stamp")};case"SECTION":return{src:i?a.createElement(V.e,null):eH.A,tooltip:(0,eo.t)("layer_icon.tooltip.section")};case"WIDGET":{let r=e.guid?J.q.instance.get(e.guid.toString()):null;if(r&&"EMBED_WIDGET"===r.widgetId)return{src:i?a.createElement(G.G,null):eC.A,tooltip:(0,eo.t)("layer_icon.tooltip.embed")};if(r&&"LINK_PREVIEW_WIDGET"===r.widgetId)return{src:i?a.createElement(H.N,null):eM.A,tooltip:(0,eo.t)("layer_icon.tooltip.link_preview")};return{src:i?a.createElement(W.h,null):tn.A,tooltip:(0,eo.t)("layer_icon.tooltip.widget")}}case"CANVAS":return{src:eU.A,tooltip:(0,eo.t)("layer_icon.tooltip.canvas")};case"TABLE":return{src:i?a.createElement(K.r,null):e9.A,tooltip:(0,eo.t)("layer_icon.tooltip.table")};case"SLIDE":return{src:ez.A,tooltip:(0,eo.t)("layer_icon.tooltip.slide")}}return o}function i(e){let r=(0,en.xx)((e,r)=>{let n;return(n=ta.get(e))&&n.thumbnailId===r||(n={thumbnailId:r,svg:ec.NO(e)},ta.set(e,n)),n.svg}),{guid:n,node:i,isMenuIcon:o,isMenuIconPurple:s,className:l,editModeType:c,detachedInfo:d,disabled:u,locked:p,hovered:m,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f}=e,E=i?r(n,i.objectsPanelThumbnailId):"",y=i?.hasEnabledAnimatedPaint,b=i?.hasEnabledVideoPaint,I=i?.isLiveObject;return a.createElement(eY,{className:l,node:i,isMenuIcon:o,isMenuIconPurple:s,thumbnailSrc:E,onDoubleClick:()=>{e.node&&(e.navigateAndPanTo?e.navigateAndPanTo(e.node.guid):X.glU.panToNode(e.node.guid))},animated:y||b,staticImage:i?.hasEnabledStaticImagePaint,editModeType:c,detachedInfo:d,isLiveObject:I,isDefaultResponsiveSet:e.isDefaultResponsiveSet,disabled:u,locked:p,hovered:m,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f})}e.LayerIcon=i,i.displayName="LayerIcon";let Q=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let r=(0,o.d4)(Q);return a.createElement(i,{...e,node:r.get(e.guid)||null})};class er extends a.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:i,className:o,disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:p,useUI3Icon:m}=this.props;return a.createElement(eY,{className:o,node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:i,animated:this.hasEnabledAnimatedPaintNodeChange(e),staticImage:this.hasEnabledStaticPaintNodeChange(e),disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:p,useUI3Icon:m})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():a.createElement(eu.i,{type:e})}renderVariableCollectionIcon(){return a.createElement(ei.B,{svg:ti.A,className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:r}=this.props;switch(e.styleType){case"GRID":let n=(0,es.s$)(e);return a.createElement(ei.B,{svg:n,className:r,autosize:!0,width:"10px"});case"FILL":return a.createElement(ei.B,{svg:eE.A,className:r});case"EFFECT":return a.createElement(ei.B,{svg:ef.A,className:r});case"TEXT":return a.createElement(ei.B,{svg:ey.A,className:r});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.image)return!0;return!1}render(){let{node:e,className:r}=this.props;return e.styleType?this.renderStyleIcon():"VARIABLE"===e.type?this.renderVariableIcon():"VARIABLE_SET"===e.type?this.renderVariableCollectionIcon():"CANVAS"===e.type?a.createElement(ei.B,{svg:eb.A,className:r}):this.renderBaseIcon()}}e.NodeChangeIcon=er;class eY extends a.PureComponent{render(){let e,r;let{node:i,parentNode:o,animated:s,staticImage:l,thumbnailSrc:c,isMenuIcon:d,isMenuIconPurple:u,onDoubleClick:p,editModeType:m,detachedInfo:h,isLiveObject:_,outOfView:g,horizontalScrollEnabled:f}=this.props;if(!i)return null;let E=e_.V3;c&&(E=e_.W5),d&&(E=u?e_.aN:e_.TK);let y=!1,b="";this.props.isDefaultResponsiveSet?(e=a.createElement(j.Q,null),b=(0,eo.t)("layer_icon.tooltip.home")):i.mask?(e=this.props.useUI3Icon?a.createElement(z.d,null):ex.A,b=(0,eo.t)("layer_icon.tooltip.mask")):(s||l)&&(0,el.oY)(i.type)&&!(0,el.GI)(i)?s?(e=this.props.useUI3Icon?a.createElement(Y._,null):eP.A,b=(0,eo.t)("layer_icon.tooltip.video")):(e=this.props.useUI3Icon?a.createElement($._,null):eD.A,b=(0,eo.t)("layer_icon.tooltip.image")):c?(e=(0,ei.V)(c),b=n(i,o).tooltip):m===X.m1T.DEV_HANDOFF&&h?.status==="loaded"&&"SYMBOL"!==i.type&&"INSTANCE"!==i.type?(e=eg.A,y=!0):_?(e=this.props.useUI3Icon?a.createElement(q.V,null):eF.A,b=(0,eo.t)("layer_icon.tooltip.live_object")):({src:e,tooltip:b}=n(i,o,this.props.useUI3Icon),r=function(e){if(e)switch(e.type){case"TEXT":return tt.A;case"STICKY":return e8.A;case"SHAPE_WITH_TEXT":return eK.A;case"FRAME":if((0,eh.R)(e))return to(e);break;case"CANVAS":return eB.A}}(i));let I=!y&&"ABSOLUTE"===i.stackPositioning&&(this.props.useUI3Icon?a.createElement(Z.I,{className:e_.E7}):a.createElement(ei.B,{className:e_.E7,svg:eI.A}));return a.createElement("span",{className:ee()(this.props.className||E,e_.P0,{[e_.EA]:f,[e_.EU]:f&&g}),onDoubleClick:p,"data-tooltip":b||null,"data-tooltip-show-above":!0,"data-tooltip-type":ed.Ib.TEXT},"string"==typeof e?a.createElement(ea.t,{svg:e,fallbackSvg:r}):a.createElement("span",{style:{stroke:"none",fill:"none"}},e),I)}}})(i||(i={}));let ts=i.ConnectedLayerIcon,tl=i.LayerIcon,tc=i.NodeChangeIcon},741944:(e,r,n)=>{"use strict";var i=n(91408),a=n(860168);(0,i.hG)(a.Nqv)},533228:(e,r,n)=>{"use strict";function i(e){let r=e.stackMode;return"HORIZONTAL"===r||"VERTICAL"===r}n.d(r,{R:()=>i}),n(411855)},357864:(e,r,n)=>{"use strict";n(634832),n(752795),n(375597),n(587670),n(153234),n(497306),n(72274),n(378762),n(273226),n(741944),n(146935)},384714:(e,r,n)=>{"use strict";n.d(r,{s:()=>f});var i=n(411855),a=n(91408),o=n(341834),s=n(572206),l=n(946689),c=n(939863),d=n(293017),u=n(356390),p=n(102930),m=n(746806),h=n(860168),_=n(658462);let g=(0,a.hG)(h.oVP);class f extends i.PureComponent{constructor(e){super(e),this.initialPosition=new s.Mi(window.innerWidth/2-g/2,window.innerHeight/2-60),this.onClose=()=>{(0,o._A)("shown"),this.props.dispatch(d.Z1())},this.onAlwaysClick=()=>{(0,o._A)("shown"),this.props.dispatch(d.Z1()),p.N.enableAutoOpen(),u.Y5.showVisualBellLocalized("plugins-added-from-file","desktop_open_views.open_in_desktop_from_now_on_modal.visual_bell",{},!1)}}static shouldShowOnce(){return void 0===(0,o.W2)()&&!p.N.isAutoOpenEnabled()}render(){return i.createElement(m.Wx,{initialPosition:this.initialPosition,title:(0,c.t)("desktop_open_views.open_in_desktop_from_now_on_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},i.createElement("div",{className:_.kL},i.createElement("div",{className:_.Qq},(0,c.tx)("desktop_open_views.open_in_desktop_from_now_on_modal.preferences_message")),i.createElement("div",{className:_.v0},i.createElement(l.nR,{onClick:this.onClose},(0,c.tx)("desktop_open_views.modal.dismiss_button")),i.createElement(l.$$,{onClick:this.onAlwaysClick},(0,c.tx)("desktop_open_views.open_in_desktop_from_now_on_modal.always_open_in_app_button")))))}}f.displayName="OpenDesktopAppFromNowOnModal"},102930:(e,r,n)=>{"use strict";n.d(r,{N:()=>h});var i=n(411855),a=n(91408),o=n(201888),s=n(341834);n(572206);var l=n(946689),c=n(939863),d=n(293017);n(726864);var u=n(746806),p=n(860168),m=n(839270);(0,a.hG)(p.oVP);class h extends i.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(d.Z1()),(0,s.hW)("never")},this.onClickOpenInApp=()=>{this.props.dispatch(d.Z1()),(0,s.hW)(this.state.alwaysChecked?"always":"never"),(0,o.Sr)(location.href,o.B3.OPEN_IN_DESKTOP_MODAL)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:"never"!==(0,s.vn)()}}static shouldShowOnce(){return(0,s._p)()&&void 0===(0,s.vn)()}static shouldAutoOpen(){return(0,s._p)()&&"always"===(0,s.vn)()}static toggleAutoOpen(){let e="always"===(0,s.vn)();(0,s.hW)(e?"never":"always")}static isAutoOpenEnabled(){return"always"===(0,s.vn)()}static enableAutoOpen(){(0,s.hW)("always")}static disableAutoOpenIfUnset(){void 0===(0,s.vn)()&&(0,s.hW)("never")}render(){return i.createElement(u.vx,{initialPosition:this.props.initialPosition,title:(0,c.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},i.createElement("div",{className:m.k},i.createElement("div",{className:m.K},i.createElement(l.tB,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),i.createElement(l.JU,{htmlFor:"always-open-desktop-app"},(0,c.tx)("desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"))),i.createElement("div",{className:m.K},i.createElement(l.nR,{onClick:this.onClose},(0,c.tx)("desktop_open_views.modal.dismiss_button")),i.createElement(l.$$,{onClick:this.onClickOpenInApp},(0,c.tx)("desktop_open_views.open_in_desktop_modal.open_in_app_button")))))}}h.displayName="OpenDesktopAppModal"},607672:(e,r,n)=>{"use strict";n.d(r,{VS:()=>_});var i=n(411855),a=n(188507),o=n(587670);n(629019);var s=n(939683);n(540721),n(358145),n(966712),n(586459),n(316082),n(964881),n(13379),n(226055),n(929715),n(617453);var l=n(634480),c=n(862442),d=n(177505),u=n(479118);n(335682);var p=n(611978);n(99506),n(100197),n(675678),n(915440),n(711525),n(391388),n(776621);var m=n(330654);n(493323),n(331737),n(320733),n(939863),n(279453),n(754168),n(653671),m.record(m.object({thumbnail_url:m.string(),thumbnail_meta:m.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:m.string().optional()})),n(438469),n(498750),n(356390),n(843495),n(187882);var h=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(h||{});function _({pagesList:e,isComparingChanges:r,enabled:n=!0}){let m=(0,c.Z)("page_change_navigator_navigate"),h=(0,l.E)(),_=(0,s.U)(),g=(0,a.wA)(),f=(0,p._6)(),E=(0,d.dh)(n),y=(0,a.d4)(e=>e.versionHistory);return(0,i.useCallback)(async i=>{n&&await (0,d.$P)(i,E,y,g,(0,u.Fy)(e,i)===o.xal.LOADED,_,m,h,r,f)},[e,m,h,_,g,f,E,y,r,n])}n(465702),n(86625)},653671:(e,r,n)=>{"use strict";n.d(r,{l7:()=>d});var i=n(707458),a=n(38580),o=n(586459),s=n(940596);(0,a.eU)(null),(0,s.Wh)(()=>(0,a.eU)([]));let l=(0,s.Wh)(()=>(0,a.eU)(null));(0,s.Wh)(()=>(0,a.eU)(o.r.INIT));let c=(0,s.Wh)(()=>(0,a.eU)(null)),d=(0,a.eU)(e=>e(c),(e,r,n)=>{let a=e(c),o="function"==typeof n?n(a):n;if(a!==o){if(r(c,o),o){let e=i.q.instance.get(o);r(l,e?.name||"")}else r(l,null)}})},438469:(e,r,n)=>{"use strict";n(411855),n(188507),n(752795),n(587670),n(629019),n(966712),n(153234),n(574176),n(939863),n(392592),n(809831),n(226055),n(177505),n(678340),n(479118),n(100197),n(601607),n(498606),n(815549),n(498750),n(283942),n(7959),n(354894)},465702:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670),n(707458),n(939683),n(929715),n(177505),n(479118),n(335682),n(653671)},161115:(e,r,n)=>{"use strict";n.d(r,{qg:()=>a,r5:()=>i}),n(411855),n(83909),n(356390),n(555074),n(301462),n(279702);let i=["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"];function a(e,r){return e===r}["PASS_THROUGH"].concat(i)},889449:(e,r,n)=>{"use strict";n.d(r,{U:()=>c});var i=n(411855),a=n(498750),o=n(29680),s=n(444951),l=n(747213);function c(e){let r=i.useRef(null);(0,o.f4)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===r.current){e.removeAllRanges();break}n=n.parentNode}});let n=e.flowPanel??null,c=e.localStylesPanel??null;return i.createElement("div",{ref:r,onKeyDown:e=>{if((0,a.Fo)(e)&&e.keyCode===a.Uz.A){let r=window.getSelection();if(r){let n=document.createRange();n.selectNodeContents(e.currentTarget),r.removeAllRanges(),r.addRange(n),e.preventDefault()}}},className:l.z},n,c,i.createElement(s.m,null))}},56285:(e,r,n)=>{"use strict";n.d(r,{Af:()=>en,DP:()=>Y,ZN:()=>et,aj:()=>G,bm:()=>$,nu:()=>ee,x5:()=>er});var i=n(411855),a=n(188507),o=n(675678),s=n(587670),l=n(629019),c=n.n(l),d=n(297666),u=n(966712),p=n(844157),m=n(776621),h=n(939863),_=n(308977),g=n(581250),f=n(452246),E=n(723081),y=n(617453),b=n(848661),I=n(29680),T=n(416095),v=n(666068),S=n(284321),w=n(234945),A=n(173454),N=n(507956),C=n(750029),O=n(846848),L=n(428877),R=n(836283),P=n(991443),D=n(564092),k=n(32067),M=n(788612),F=n(253598),x=n(393062),U=n(561817);let B=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),V=new E.ro;function G(e){let{blendMode:r,onError:n}=e,a=(0,b.gl)(r)||"string"==typeof r;return r&&!a&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof r}`)),n&&n(r),r=void 0),i.createElement(M._p,{redact:["Normal","Pass through"],indent:e.indent,className:e.className,name:(0,h.t)("inspect_panel.colors.blend"),value:V.format(r)})}let H=(e={})=>{let{isShort:r=!1,format:n=s.NVY.HEX,isInStyle:i}=e,a=r?U.lA:U.K5,o=n===s.NVY.HEX?"":U.cZ,l=i?U.UU:void 0;return c()(a,o,l)};function W(e){let{isInStyle:r}=e;return i.createElement("div",{className:U.Z3,"data-testid":"inspectMultilineColorRow"},i.createElement(M.d1,{className:c()({[U.UU]:r},U.y4),label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,isSuggestedVariable:e.isSuggestedVariable},!0!==e.hideColorChit?i.createElement(C.J,{className:U.Gz,paint:e.paint,tooltip:e.description}):i.createElement("div",null)),i.createElement(G,{className:H({isInStyle:r}),indent:!0,blendMode:e.paint.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,m.$D)(o.FigmaTeam.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"MultiLinePaintValue",props:e}})}}),e.colors.map((n,a)=>i.createElement(j,{key:a,valueFormatter:e.formatter,format:e.format,color:n,paint:e.paint,alwaysShowOpacity:e.alwaysShowOpacity,hideColorChit:e.hideColorChit,isInStyle:r})))}function K(e){let{format:r}=e,{paint:n,valueFormatter:a}=e.formattableColor,{variable:o,isSuggested:s,variableDisplayName:l}=e.formattableColor.variable??{},c=i.useRef(null);if(!n.color)return null;let d={...n.color,a:n.opacity??1};if(o&&(!(0,u.kc)().dt_inferred_vars_modal||!s))return i.createElement(W,{paint:n,className:U.yW,styleName:l,colors:[d],format:r,formatter:a,hideColorChit:e.hideColorChit,isVariable:!0,isSuggestedVariable:s,isInStyle:e.isInStyle});let p=(0,x.q)(d,r,a);return i.createElement("div",{"data-testid":"inspectColorRow",ref:c},i.createElement(M._p,{className:H({format:r,isInStyle:e.isInStyle}),copyValue:p.copyValue},!0!==e.hideColorChit?i.createElement(C.J,{className:U.Gz,paint:n}):i.createElement("div",null),i.createElement("span",{className:U.As},p.value),x.x.has(e.format)&&i.createElement(F.J,{value:d.a})))}function j(e){let r=(0,x.q)(e.color,e.format,e.valueFormatter);return i.createElement(i.Fragment,null,i.createElement(M._p,{className:H({isShort:!e.hideColorChit,format:e.format,isInStyle:e.isInStyle}),copyValue:r.copyValue},i.createElement("div",null),i.createElement("span",{className:U.As},r.value),x.x.has(e.format)&&i.createElement(F.J,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1})))}function z(e){let{format:r}=e,{paint:n,colors:a,valueFormatter:o,typeFormatter:s}=e.formattableColor;return i.createElement(W,{paint:n,className:U.to,defaultStyleName:(0,h.t)("inspect_panel.colors.gradient",{gradientType:s(n.type)}),colors:a,format:r,formatter:o,hideColorChit:e.hideColorChit,alwaysShowOpacity:!0,isInStyle:e.isInStyle})}function Y(e){let{formattableColor:r}=e;switch(r.paint.type){case"SOLID":return i.createElement(K,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return i.createElement(z,{...e});default:return null}}function $(e){return e.visible&&e.type&&B.has(e.type)}let q=()=>{let e=(0,a.d4)(e=>e.mirror.selectionProperties.fillPaints),r=i.useMemo(()=>!e||(0,b.gl)(e)?[]:e,[e]),n=(0,k.pF)(e=>(0,p.b)(e.mirror.selectionProperties,"inheritFillStyleKey")),o=(0,a.d4)(S.e_),l=(0,a.d4)(e=>e.mirror.selectionProperties.inheritFillStyleKey),c=(0,L.Ig)(),d=l?(0,T.Gp)(l,[],o):void 0,u=r.filter($).map(e=>(0,L.dc)(e,c,s.j0r.ALL_FILLS));return d&&n?[(0,L.rP)(n,d,u)]:u},Z=()=>{let e=(0,k.jY)(),r=(0,k.uQ)(),n=(0,g.Q)(),o=(0,_.v4)(),s=(0,N.ks)(),l=(0,a.d4)(e=>(0,w.$u)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),c=(0,L.Ig)(),d=i.useMemo(()=>l.filter(e=>$(e.paint)).map(e=>(0,L.dc)(e.paint,c)),[l,c]),u=(0,a.d4)(e=>(0,w.$u)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),p=(0,a.d4)(S.e_),m=i.useMemo(()=>{let r=u.map(e=>({ds:(0,T.Gp)(e.styleKey,e.styleGUIDs,p),name:e.styleName})),n=[];return r.forEach(({ds:r,name:i})=>{if(!r)return;let a=r.kind===A.AT.DANGLING?{...r.value,style_type:"FILL"}:r.value,o=e=>e.filter($).map(e=>(0,L.dc)(e,c)),s=(0,v.QH)(a);if(s&&"FILL"===s.type)n.push((0,L.rP)(i,r,o(s.fillPaints)));else{let a=e.get(r.value.node_id);a&&n.push((0,L.rP)(i,r,o(a.fills)))}}),n},[u,p,e,c]);return i.useMemo(()=>{let e=[...m,...d];return(0,D.QT)(e,r,n.inspectionMode,o,s)},[m,d,r,n.inspectionMode,o,s])},X=(e,r)=>e.type===R.q.STYLE?i.createElement(Q,{color:e,format:r.format}):i.createElement(J,{color:e,format:r.format,hideColorChit:r.hideColorChit});function J(e){return i.createElement(Y,{format:e.format,formattableColor:e.color,hideColorChit:e.hideColorChit})}function Q(e){let r=(0,a.wA)(),n=e.color.dsStyle.kind,o=e.color.dsStyle.value.node_id,s=i.useMemo(()=>(0,d.s)(()=>{o&&r(f.rb({styleNodeId:o,styleKind:n}))}),[r,n,o]);i.useEffect(s,[s]);let l=e.color.dsStyle.value;return n===A.AT.DANGLING&&(l.style_type="FILL",l.node_id=o),i.createElement(i.Fragment,null,i.createElement(M._p,{className:U.VB,copyValue:e.color.name,dataTestId:"styleNameRow"},i.createElement(P.zi,{dsStyle:l,hideNameInTooltip:!0}),i.createElement(M._p,{className:U.yW,value:e.color.name})),e.color.paints.map(r=>i.createElement("div",{key:r.encodedPaint,"data-testid":"stylePaintRow"},i.createElement(Y,{format:e.format,formattableColor:r,hideColorChit:e.hideColorChit,isInStyle:!0}))))}function ee(e){let r=(0,y.Ku)(),n=e.formattableColors,a=i.useMemo(()=>({format:r}),[r]);return i.createElement(M.x0,{limit:5,data:n,renderElement:X,extras:a})}function et(){let e=(0,N.ks)(),r=(0,k.uQ)(),n=I.eY().get(r??"")?.type,a=q(),o=(0,g.Q)(),s=(0,_.v4)(),l=(0,N.ks)(),c=(0,D.QT)(a,r,o.inspectionMode,s,l),d=(0,y.Ku)(),u=i.useMemo(()=>i.createElement(en,{id:"colors-panel"}),[]),p=k.T4.useCopyAllColors(c,d);if(c.length<1)return null;let m=(0,D.kX)(c);return i.createElement(M.VZ,{title:e?"TEXT"===n?(0,h.t)("dev_handoff.inspect_panel.fills.text"):(0,h.t)("dev_handoff.inspect_panel.fills.background"):(0,h.t)("inspect_panel.colors.title"),additionalHeaders:u,copyAllValue:p,recordingKey:"colors",matchingVars:m},i.createElement(ee,{formattableColors:c}))}function er(){let e=Z(),r=(0,y.Ku)(),n=i.useMemo(()=>i.createElement(en,{id:"colors-panel"}),[]),a=k.T4.useCopyAllColors(e,r);return e.length<1?null:i.createElement(M.VZ,{title:(0,h.t)("inspect_panel.colors.title"),additionalHeaders:n,copyAllValue:a,recordingKey:"colors"},i.createElement(ee,{formattableColors:e}))}function en(e){let r=(0,a.wA)(),n=(0,y.Ku)(),o=(0,a.d4)(e=>e.dropdownShown),l=(0,N.ks)(),c=(0,M.SV)("inspection_panel_color_format_change"),d=i.useCallback(e=>{(0,y.UK)().colorFormat.set(e),c({value:O.Fr.format(e)})},[c]);return i.createElement("div",{className:U.IX},i.createElement(O.bO,{id:`inspect-color-type-select:${e.id}`,className:U.NC,dropdownClassName:U.O4,property:n,formatter:O.Fr,onChange:d,dispatch:r,dropdownShown:o,dropdownAlignment:"right"},i.createElement(O.ef,{value:s.NVY.HEX}),i.createElement(O.ef,{value:s.NVY.RGB}),!l&&i.createElement(O.ef,{value:s.NVY.CSS}),i.createElement(O.ef,{value:s.NVY.HSL}),i.createElement(O.ef,{value:s.NVY.HSB}),l&&i.createElement(O.ef,{value:s.NVY.UIColor})))}},32067:(e,r,n)=>{"use strict";n.d(r,{Cj:()=>A,O1:()=>v,T4:()=>i,VW:()=>T,Wf:()=>I,jY:()=>S,pF:()=>w,uQ:()=>y,um:()=>b});var i,a=n(411855),o=n(188507);n(459401);var s=n(587670),l=n(597616),c=n(413145),d=n(884139),u=n(970516),p=n(617453),m=n(848661);n(555074);var h=n(869156),_=n(601607),g=n(428877),f=n(836283),E=n(533573);function y(){let e=(0,o.d4)(e=>e.mirror.selectionProperties?.numSelected===1),r=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return e&&Object.keys(r).find(e=>e)||null}function b(e,r){return e&&Number(e).toLocaleString("en",{maximumFractionDigits:r,useGrouping:!1})}function I(e=0){return Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}function T(){let e=y(),r=(0,_.Jk)(e);if(null!=e&&null!=r)return r}function v(){let e=function(){let e=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return a.useMemo(()=>{let r=Object.keys(e);return 0===r.length?null:r},[e])}(),r=(0,_.ew)(e??[]);if(e)return r}function S(){let e=(0,o.d4)(e=>e.mirror.objectsPanelRowRebuildCounter);return(0,_.hr)((e,r)=>e,e)}function w(e){return(0,o.d4)(r=>{let n=e(r);if(null!=n&&(0,m.hS)(n))return n})}function A(e,r){let n=(0,o.wA)(),i=a.useCallback(()=>{let i=window.getSelection();if(i&&i.toString().length>0||!e)return null;n(u.lW({stringToCopy:e.toString(),ignoreLineBreaks:!1})),r&&r()},[r,e,n]);return e?i:void 0}(e=>{let r={prefix:"",suffix:"",delimiter:": ",quoted:!1};function n(e,n){let i="",a={...r,...n};return e.forEach(e=>{if(e[1]){let{prefix:r,suffix:n,delimiter:o,quoted:s}=e.length>2?{...a,...e[2]}:a,l=s?`"${e[1]}"`:e[1];i+=`${r}${e[0]}${o}${l}${n}
`}}),i}e.copyPairs=n;let i=["true","false","nil","null"];function u(e,r){return`var(--${(0,d.OX)(r)}, ${e})`}e.unquoteEnumerableValues=function(e){return e.map(e=>{let[r,n]=e;return"string"==typeof n&&i.includes(n.toLowerCase())?[r,n,{quoted:!1}]:e})};let m=(e,r,n)=>{let{paint:i}=e,{variable:a}=e.variable??{};switch(i.type){case"SOLID":if(1===n){let r=e.valueFormatter(e.colors[0],{hexCSSValue:!0});return a?u(r,a.name):r}return function(e,r){let n=s.phr.convertGradientPaintToCSS(e.encodedPaint);return(r?n.replace(/(#[a-f0-9]{6})|(rgba\(\d{1,3}, \d{1,3}, \d{1,3}, \d\.\d{1,2})/gi,e=>u(e,r.name)):null)??n}(e,a);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return s.phr.convertGradientPaintToCSS(e.encodedPaint)}};function _(e,r){return e?.map(n=>m(n,r,e?.length||0))?.join(",\n")}e.copyColors=_;let y={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},T=(e=[])=>e.flatMap(e=>e.type===f.q.STYLE?e.paints:e),v="background";e.useCopyAllColors=function(e,r){let i=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=T(e),l=a.useCallback(()=>{if(1===i&&s){let e=new Set;if(s.forEach(r=>{r.paint.blendMode&&e.add(r.paint.blendMode)}),e.size<=1){let i=_(s,r),a=[];i&&a.push([v,i]);let o=[...e],l=o[0]?y[o[0]]:void 0;return l&&a.push(["background-blend-mode",l]),n(a,{suffix:";"})}}return n(s.reduce((e,n)=>{let i=n.paint.blendMode,a=i?y[i]:void 0;a&&e.push(["background-blend-mode",a]);let o=m(n,r,1),s=o?[v,o]:void 0;return s&&e.push(s),e},[]).filter(e=>e).map(e=>e),{suffix:";"})},[s,i,r]);return s?l:void 0};let S=(r,i,a,o)=>{let s=i.includes(" "),l=T(a),c=l.length>1||1===l.length&&"SOLID"!==l[0].paint.type,d=e.copyColors(l,r);if(!c&&!s)return`${o??"border"}: ${i} solid ${d}`;let u=s?[["border-width",i],["border-style","solid"]]:[[`${o??"border"}`,`${i} solid`]];return d&&u.push(c?["border-image-source",d]:["border-color",d]),n(u,{suffix:";\n"})};e.useStrokeCopyValue=function(e,r,n){let i=(0,p.Ku)(),o=T(r);return a.useMemo(()=>S(i,e,o,n),[i,e,o,n])},e.useCopyAllStrokes=function(e){let r=(0,p.Ku)();return a.useMemo(()=>e.map(e=>S(r,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[r,e])};let w=e=>e.map(e=>void 0===e?"":"string"==typeof e?e:`${I(e)}px`),A=(r,i,a,o)=>{if("FOREGROUND_BLUR"===r.type||"BACKGROUND_BLUR"===r.type)return n([["backdrop-filter",`blur(${r.radius}px)`]]);let s=e.copyColors(i,a);if(!r.offset)return;let[l,d,u,p,m]=o&&5===o.length?o:[null,null,null,null,null];return n([["box-shadow",[w([(0,E.NX)({variable:l})||r.offset?.x,(0,E.NX)({variable:d})||r.offset?.y,(0,E.NX)({variable:u})||r.radius,(0,E.NX)({variable:p})||r.spread]).join(" "),(0,E.NX)({variable:m})||s,"INNER_SHADOW"===r.type?"inset":void 0].filter(c.t).join(" ")]],{suffix:";"})};e.useCopyShadow=function(e,r){let n=(0,p.Ku)(),i=function(e,r){let n=a.useMemo(()=>e?[{color:e,colorVar:void 0}]:[],[void 0,e]);return(0,g.y6)(n)}(e.color);return a.useMemo(()=>A(e,i,n,r),[e,i,n,r])},e.useCopyAllShadows=function(e){let r=(0,p.Ku)(),n=(0,g.OE)(e,e=>e.color),i=e.flatMap(e=>[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar]).map(e=>e?.value?.alias?l.dI(e.value.alias):void 0),o=(0,h.hg)(i??[]);return a.useCallback(()=>n.filter(e=>e.color).map((e,n)=>A(e.value,[e.color],r,[o?.[5*n],o?.[5*n+1],o?.[5*n+2],o?.[5*n+3],o?.[5*n+4]])).join("\n"),[n,r,o])};let N=(e,r,n)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(r){if(n)return`{ mass: ${n[0]}, stiffness: ${n[1]}, damping: ${n[2]} }`;return e}return`cubic-bezier(${e})`}},C=e=>`${b(1e3*e,2)}ms`,O=r=>{let n=`// ${r.event}
`,i=r.action,a=[];return r.delay&&a.push(["animation-delay",C(r.delay)]),r.action&&(a.push([`// ${i?.action}`,`"${i?.value??""}"`]),i?.hasAnimation&&(a.push(["// Animate",i?.animation??""]),i?.isSpringTransition?a.push(["// Spring",N(i?.curve,i?.isSpringTransition,i?.curveFunction)]):(a.push(["animation-timing-function",N(i?.curve)]),a.push(["animation-duration",C(i.duration??0)])))),n+e.copyPairs(a,{suffix:";"})};e.useCopyAllInteractions=function(e){return a.useCallback(()=>e.map(e=>O(e)).join("\n"),[e])};let L=e=>{let r=e.image?.name??"Image",i=`${r}.${e.animatedImage?"gif":"png"}`;return n([[`// ${e.animatedImage?"GIF":"Image"}`,r],["background",`url("${i}")`],["background-size",(e=>"FILL"==e?"cover":"FIT"==e?"contain":void 0)(e.imageScaleMode)],["opacity",e.opacity<1?e.opacity.toFixed(2):void 0],["background-blend-mode",y[e.blendMode]]],{suffix:";"})};e.useCopyImages=function(e){return a.useCallback(()=>e.map(e=>L(e)).join("\n"),[e])}})(i||(i={}))},788612:(e,r,n)=>{"use strict";n.d(r,{HF:()=>el,I7:()=>et,M6:()=>en,N7:()=>Z,SH:()=>K,SV:()=>H,UZ:()=>j,VZ:()=>z,YE:()=>es,ZQ:()=>V,_p:()=>eo,d1:()=>Q,lz:()=>ec,nd:()=>X,r4:()=>ep,x0:()=>eu});var i=n(411855),a=n(188507),o=n(380620),s=n(629019),l=n.n(s),c=n(776250),d=n(830646),u=n(794272),p=n(966712),m=n(498750),h=n(860601),_=n(563706),g=n(153234),f=n(505113),E=n(939863),y=n(381028),b=n(258286),I=n(964881),T=n(970516),v=n(672517),S=n(973149),w=n(356390),A=n(848661),N=n(497306),C=n(335682),O=n(239671),L=n(498606),R=n(507956),P=n(7959),D=n(712685),k=n(32067),M=n(673867),F=n(813813);function x({name:e,fileKey:r,border:n,children:a,hideHeader:o,isHidden:s,padding:d=0,noBorder:p,recordingKey:h,dataTestId:g,onClick:f}){let{selectedNodeId:E,selectedPageId:y,isMultiSelect:b,sceneGraph:T,editorType:v}=(0,u.R)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return{selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:r[0],isMultiSelect:r.length>1,sceneGraph:e.mirror.sceneGraph,editorType:"fullscreen"!==e.selectedView.view?O.nT.Design:e.selectedView.editorType}}),S=!!(0,I.hA)(),A=n=>{e&&(0,c.sx)("inspection_panel_shortcut",{...n,file_key:r,name:e,editor_type:v})},C=n?F.F7:F.YK;switch(o&&(C=n?F.S4:F.Tq),d){case 1:C=F.JY;break;case 2:C=l()(C,F.Yz);break;case 3:C+=` ${F.Wm}`}return p&&(C=l()(C,F.mD)),s&&(C=""),i.createElement(P.Zk,{className:C,tabIndex:-1,onKeyDown:e=>{let r=!1;if((0,m.Fo)(e)&&e.keyCode===m.Uz.C?(r=!0,A({action:"copy"})):(0,m.Fo)(e)&&e.keyCode===m.Uz.A?(r=!0,A({action:"select_all"})):_.Ay.mac?"Meta"===e.key&&(r=!0):"Control"===e.key&&(r=!0),(e.target?.type==="text"||e.target?.type==="textarea"||e.target?.tabIndex===0)&&(r=!0),r);else{let r=window.getSelection();if(!r)return;let n=0===r.toString().length;r.removeAllRanges(),(n||e.keyCode!==m.Uz.ESCAPE)&&w.Y5.forwardKeyboardEvent(e.nativeEvent)}},onDoubleClick:n=>{if(e)return(0,c.sx)("inspection_panel_dbl_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,m.sN)(n),fileKey:r,editor_type:v}),!1},onClick:n=>{let i,a;if(e){if(f?.(n),E&&T)try{let e=(0,N.Ql)(T,E);i=e?.guid,a=e?.type}catch{}return(0,c.sx)("inspection_panel_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,m.sN)(n),fileKey:r,selectedPageId:y,selectedNodeId:E,topLevelFrameId:i,topLevelNodeType:a,isMultiSelect:b,editor_type:v,isDevModeFocusView:S}),!1}},recordingKey:h,"data-testid":g,id:g},a)}let U=(e,r)=>{let[n,a]=i.useState(!1),o=i.useCallback(()=>a(!0),[a]),s=i.useCallback(()=>a(!1),[a]);return i.useMemo(()=>({value:n?e:r,eventHandlers:{onMouseOver:o,onMouseOut:s},isHovered:n}),[n,e,r,o,s])},B=(e,r)=>{let[n,a]=i.useState(!1),o=i.useCallback(()=>a(!0),[a]),s=i.useCallback(()=>a(!1),[a]);return i.useMemo(()=>[n?e:r,{onMouseDown:o,onMouseUp:s}],[n,e,r,o,s])};function V(e,r){let{value:n,eventHandlers:a,isHovered:o}=U(r),[s,l]=B(e);return i.useMemo(()=>({value:s||n,eventHandlers:{...a,...l},isHovered:o}),[s,l,n,a,o])}let G=i.createContext({});function H(e,r){let n=i.useContext(G),a=i.useMemo(()=>({name:(r||n).recordingKey}),[r,n]),o=(0,d.j)(e,a);return(r||n).recordingKey?o:h.lQ}let W=(0,v.tf)(o.E);function K(e){let{title:r,copyAllValue:n,additionalHeaders:o,eventHandlers:s,isHovered:c,recordingKey:d}=e,u=H("inspection_panel_copy_all_click",i.useContext(G)),p=(0,a.wA)(),m=(0,g.rf)(d,"click",i.useCallback(()=>{if(!n)return;let e="string"==typeof n?n:n();p(T.lW({stringToCopy:e,ignoreLineBreaks:!1})),u({value:e})},[u,p,n])),{ref:h,..._}=(0,M.X)(r,c),f=i.useRef(null),y=(0,R.ks)(),b=(0,i.useMemo)(()=>({name:"Copy properties button",selectedAll:!1,source:"properties",title:r,isDevMode:y}),[y,r]);return r?i.createElement("div",{className:l()(F.Dn,{[F._]:e.snug}),ref:f},i.createElement(P.xw,{innerRef:h,..._,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevron,forceNoChevron:e.doNotReserveSpaceForChevron,className:l()(F.yr,{[F.Xx]:e.thin}),"data-testid":"inspectPanelTitle","data-onboarding-key":e.onboardingKey},r),i.createElement("div",{className:F.W0},n&&i.createElement(W,{...s,className:F.cL,onClick:m,trackingProperties:b},(0,E.tx)("inspect_panel.copy")),o),e.children):null}var j=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.NONE=1]="NONE",e[e.NO_BOTTOM=2]="NO_BOTTOM",e[e.EXTRA_TOP_PADDING_FOR_UI2=3]="EXTRA_TOP_PADDING_FOR_UI2",e))(j||{});function z(e){let{children:r,title:n="",copyAllValue:o,recordingKey:s}=e,c=(0,a.d4)(C.sS),d=i.useMemo(()=>`inspect:${s.toLowerCase()}`,[s]),u=i.useMemo(()=>({recordingKey:`inspect:${s}`}),[s]),{value:p,eventHandlers:m,isHovered:h}=V(F.Rp,F.fF);return i.createElement(x,{border:!0,fileKey:c,name:d,hideHeader:e.hideHeader,isHidden:e.isHidden,padding:e.padding,noBorder:e.noBorder,recordingKey:(0,g.Pt)(s,"panel"),dataTestId:`${s}-inspection-panel`,onClick:e.onClick},i.createElement(G.Provider,{value:u},e.formattedHeader??(!0!==e.hideHeader&&i.createElement(K,{title:n,copyAllValue:o,eventHandlers:m,additionalHeaders:e.additionalHeaders,isHovered:h,snug:e.snugTitle,thin:e.thinTitle,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevronInTitle,recordingKey:(0,g.Pt)(s,"header"),onboardingKey:e.headerOnboardingKey,matchingVars:e.matchingVars},e.headerChildren)),i.createElement("div",{className:l()(F.HH,p)},r)))}let Y={maximumFractionDigits:2,useGrouping:!1},$={maximumFractionDigits:2},q={maximumFractionDigits:2,useGrouping:!1,style:"unit",unit:"degree",unitDisplay:"narrow"},Z={...q,unitDisplay:"short"};function X(e,r){let n=e.toLocaleString("en",Y);return`${n}${r}`}function J(e){switch(e.format){case"pixels":if("number"==typeof e.value)return X(e.value,"px");if(Array.isArray(e.value)){let r=e.value.map(e=>e.toLocaleString("en",$)).join("px, ");return`${r}px`}return`${e.value}`;case"percent":if(!e.value)return;return Number(e.value).toLocaleString("en",{...Y,style:"percent"});case"fig_number":return e.value?S.wf.format(e.value):void 0;case"millis":return e.value&&X(1e3*e.value,"ms");case"degrees":return e.value&&e.value.toLocaleString("en",q);case"mixed":return e.value.map(J).join(", ");default:return e.value?.toString()}}function Q(e){let[r,n]=i.useState(!1),a=e.label||e.defaultLabel,o=e.label?F.Nw:F.G1;e.labelClassName&&(o+=` ${e.labelClassName}`);let s=function(e){let r=i.useRef(null),n=r.current,a=n&&(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth);return i.useEffect(()=>{n&&a&&e&&(n.setAttribute("data-tooltip",e.toString()),n.setAttribute("data-tooltip-type",L.Ib.TEXT))},[e,n,a]),r}(a);return i.createElement(eo,{className:e.className,copyValue:e.label,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},e.children&&i.createElement("div",null,e.children),a&&i.createElement("div",{className:F.Pq},e.isVariable||e.isSuggestedVariable?i.createElement(D.w,{text:a,containerClassName:F.gO,disableHover:!0,isHovered:r,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,E.t)("dev_handoff.variables.inferred_color"):void 0}):i.createElement("span",{ref:s,className:o,dir:"auto"},a)))}function ee(){return i.createElement("span",{className:F.jg})}function et({title:e}){return i.createElement("div",{className:F.Dn},i.createElement("span",{className:F.yr}," ",e," "))}let er=e=>e?.valueOf()===(0,E.t)("collaboration.branching_node_treatments.value.empty_dash");function en({basis:e,change:r,name:n}){return i.createElement("div",{className:l()(F.zy)},i.createElement("span",{className:F.rG},n),i.createElement("div",{className:l()(F.vd,F.mW)},i.createElement(o.E,{onClick:e.onClick,className:l()(F.Hz,F.ij,er(e.value)&&F.T7)},e.value),i.createElement(o.E,{onClick:r.onClick,className:l()(F.Zg,F.ij,er(r.value)&&F.T7)},r.value)))}function ei({variable:e,variableId:r,rowRef:n,isHovered:a}){let{isDetailModalShownForCurrentRow:o,toggleVariableDetailModal:s}=(0,y.i)(n,r),l=e&&(a||o);return(0,p.kc)().dt_dev_view_variables&&l?i.createElement("div",{className:F._o},i.createElement(b.WQ,{onClick:s,toggled:o})):null}function ea({valueProps:e,isHovered:r,variableContainerClassName:n,rowRef:a}){if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return i.createElement("div",{className:l()(F.M3,o&&F.Vd)},e.value.map((s,l)=>i.createElement("div",{key:l},i.createElement(ea,{valueProps:s,isHovered:r,variableContainerClassName:n,rowRef:a}),l<e.value.length-1&&!o&&i.createElement("span",null,", "))))}let o=`${J(e)}`;return e.variable?i.createElement(D.w,{dataTestId:"styledValueVariable",containerClassName:l()(F.gO,n),text:e.variable,disableHover:!0,isHovered:r,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,E.t)("dev_handoff.variables.inferred_value",{value:o}):o}):i.createElement(i.Fragment,null,o)}function eo(e){let r="onValueClicked"in e&&e.onValueClicked,n="value"in e?J(e):void 0,a=H("inspection_property_copy_click"),s=e.copyValue||n,c=(0,k.Cj)(s,()=>{a({property:e.name,value:s})}),[d,u]=i.useState(!1),m=(0,M.X)(e.name),h=(0,M.X)(n),_=i.useRef(null),g="redact"in e?e.redact:void 0,E=i.useMemo(()=>void 0===g?new Set:new Set(Array.isArray(g)?g:[g]),[g]),y=e.className||F.k$,b=e.multipleLines?F.mW:F.Nw,I=e.multipleLines?F.G3:F.Bz;if(!("value"in e)){let r=void 0===e.copyValue?void 0:c,n=i.createElement("div",{className:y},e.name&&e.showName&&i.createElement("span",{className:I,...m,"data-tooltip-tip-align-left":!0},e.name),e.children);return r?i.createElement("div",{className:F.A9,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,"data-testid":e.dataTestId},i.createElement(o.E,{className:F.Uh,onClick:r},n)):i.createElement("div",{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,"data-testid":e.dataTestId},n)}return!e.value||(0,A.gl)(e.value)||E.has(e.value)?null:i.createElement("div",{className:l()(F.A9,{[F.ri]:(0,p.kc)().dt_dev_view_variables}),onMouseEnter:()=>{u(!0),e.onMouseEnter?.()},onMouseLeave:()=>{u(!1),e.onMouseLeave?.()},"data-testid":e.dataTestId,ref:_},i.createElement("div",{className:y,onClick:c,"data-testid":"inspectionPropertyRow"},e.indent&&i.createElement("div",null),e.name?i.createElement("span",{className:I,"data-testid":"inspectionPropertyName",...m,"data-tooltip-tip-align-left":!0},i.createElement(f.o,{text:e.name})):i.createElement(ee,null),i.createElement("span",{className:b,"data-testid":"inspectionPropertyValue",...h,"data-tooltip-tip-align-left":!0},r?i.createElement(o.E,{className:F.TH,onClick:e=>{e.stopPropagation(),r()}},i.createElement(ea,{valueProps:e,isHovered:d,rowRef:_})):i.createElement(ea,{valueProps:e,isHovered:d,rowRef:_}))),i.createElement(ei,{variable:e.variable,variableId:e.variableId,rowRef:_,isHovered:d}))}function es(e){return i.createElement(eo,{...e,format:"pixels"})}function el(e){let r={...e,copyValue:e.value?.toLocaleString("en",Z)};return i.createElement(eo,{...r,format:"degrees"})}function ec(e){return i.createElement(eo,{...e,format:"millis"})}function ed({value:e,extras:r,renderElement:n}){return n(e,r)}function eu(e){let{data:r}=e,n=e.showMoreAmount||100,[a,s]=i.useState(e.limit),l=i.useCallback(()=>{s(Math.min(r.length,a+n))},[r,a,n,s]),c=Math.max(e.data.length-a,0),d="extras"in e?e.extras:{};return i.createElement(i.Fragment,null,e.data?.slice(0,a).map((r,n)=>i.createElement(ed,{value:r,extras:d,renderElement:e.renderElement,key:n})),0!==c&&i.createElement(o.E,{onClick:l,className:F.jP,key:"show-more"},(0,E.tx)("inspect_panel.property.remaining_more",{remaining:c})))}function ep(e){return i.createElement(eo,{...e,format:"percent",copyValue:void 0!==e.value?Number(e.value).toLocaleString(void 0,{maximumFractionDigits:2}):e.copyValue,value:e.value,name:e.name,variable:e.variable,isSuggestedVariable:e.isSuggestedVariable,redact:e.redact,className:e.className,indent:e.indent})}},189283:(e,r,n)=>{"use strict";n.d(r,{yg:()=>A});var i=n(411855),a=n(188507),o=n(587670),s=n(597616),l=n(574176),c=n(939863),d=n(308977),u=n(581250),p=n(617453),m=n(869156),h=n(526243),_=n(507956),g=n(56285),f=n(32067),E=n(788612),y=n(297281),b=n(428877),I=n(564092),T=n(542789),v=n(567751),S=n(666139);function w(e){let r=i.useMemo(()=>new y.ck,[]).format(e.type),n=(0,p.Ku)(),{spread:a,radius:o,offset:d,blendMode:u,visible:h,radiusVar:_,spreadVar:b,xVar:I,yVar:w,colorVar:A}=e,N=(0,m.hg)([I,w,_,b,A].map(e=>e?.value?.alias?s.dI(e.value.alias):void 0)),C=f.T4.useCopyShadow(e,N);if(!h)return null;let O="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type;return i.createElement(i.Fragment,null,i.createElement(E.d1,{className:v.n1,labelClassName:v.Q5,label:e.styleName,defaultLabel:r},i.createElement(l.B,{className:v.$x,svg:S.A})),O&&i.createElement(E._p,{copyValue:C,className:v.qR},i.createElement("div",{className:v.vP},(0,c.tx)("inspect_panel.shadows.x")),i.createElement("div",{className:v.cu},i.createElement(T.S,{value:(0,f.Wf)(d?.x),varData:I})),i.createElement("div",{className:v.vP},(0,c.tx)("inspect_panel.shadows.y")),i.createElement("div",{className:v.cu},i.createElement(T.S,{value:(0,f.Wf)(d?.y),varData:w}))),i.createElement(E._p,{copyValue:C,className:v.qR},i.createElement("div",{className:v.vP},(0,c.tx)("inspect_panel.shadows.blur")),i.createElement("div",{className:v.cu},i.createElement(T.S,{value:(0,f.Wf)(o),varData:_})),O&&i.createElement(i.Fragment,null,i.createElement("div",{className:v.vP},(0,c.tx)("inspect_panel.shadows.spread_tooltip")),i.createElement("div",{className:v.cu},i.createElement(T.S,{value:(0,f.Wf)(a),varData:b})))),O&&i.createElement(i.Fragment,null,i.createElement(g.aj,{blendMode:u,className:v.jK}),!!e.formattableColor&&i.createElement(g.DP,{formattableColor:e.formattableColor,format:n,isInStyle:!0})))}function A(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected)||0,r=(0,h.Z)(),n=r[0],s=f.T4.useCopyAllShadows(n?.effects??[]),l=i.useMemo(()=>i.createElement(g.Af,{id:"shadows-panel"}),[]),p=function(e,r){let n=(0,f.uQ)(),i=(0,u.Q)(),a=(0,d.v4)(),s=(0,_.ks)(),l=(0,b.Ig)();return e.map(e=>{if(!e.color)return{...e,styleName:r};let c=(0,b.oI)({color:e.color,colorVar:e.colorVar,variableScope:o.j0r.EFFECT_COLOR,displayValue:l}),d=(0,I.uA)(c,n,a.id,s,i.inspectionMode);return{...e,styleName:r,formattableColor:d}}).filter(e=>!!e)}(n?.effects??[],n?.styleName),m=(0,I.kX)(p.map(e=>e?.formattableColor)),y=i.useCallback(e=>i.createElement(w,{styleName:e.styleName,key:e.id,id:e.id,type:e.type,offset:e.offset,radius:e.radius,spread:e.spread,formattableColor:e.formattableColor,blendMode:e.blendMode,visible:e.visible,colorVar:e.colorVar,xVar:e.xVar,yVar:e.yVar,radiusVar:e.radiusVar,spreadVar:e.spreadVar,showShadowBehindNode:e.showShadowBehindNode}),[]);return 1!==e||!r||r.length<1||n.effects.length<1?null:i.createElement(E.VZ,{title:(0,c.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:s,additionalHeaders:l,matchingVars:m},i.createElement(E.x0,{limit:2,data:p,renderElement:y,extras:n.styleName}))}},184027:(e,r,n)=>{"use strict";n.d(r,{lk:()=>o,zK:()=>l,zM:()=>s});var i=n(411855),a=n(860601);let o=i.createContext(a.lQ);var s=(e=>(e[e.CREATE_STYLE=0]="CREATE_STYLE",e[e.EDIT_STYLE=1]="EDIT_STYLE",e[e.CREATE_VARIABLE_STYLE=2]="CREATE_VARIABLE_STYLE",e))(s||{});let l=i.createContext(null)},824374:(e,r,n)=>{"use strict";n.d(r,{u:()=>w});var i=n(411855),a=n(986175),o=n(693554),s=n(153234),l=n(46481),c=n(939863),d=n(723081),u=n(798099),p=n(848661),m=n(498606),h=n(161115),_=n(227795),g=n(538697),f=n(872429),E=n(319738),y=n(744684),b=n(811550);class I extends g.c${}class T extends g.l6{renderInput(){let e=E.p6;return"NORMAL"!==(0,p.E7)(this.props.property)&&(e=E.DU),i.createElement(_.K0,{className:e,tabIndex:-1,onPointerDown:u.dG,onMouseDown:this.onMouseDown,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,c.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},i.createElement(v,{value:(0,p.E7)(this.props.property),defaultBlendMode:"NORMAL"}))}}function v({value:e,defaultBlendMode:r}){return(0,h.qg)(e,r)?i.createElement(l.U,{svg:b.A},i.createElement(a.N,null)):i.createElement(l.U,{svg:y.A},i.createElement(o.l,null))}let S=new d.ro,w=i.memo(function(e){let r=(0,f.cJ)(),n=h.r5.map((n,a)=>{let o="LINEAR_BURN"===n&&r;return"SELECT_DIVIDER"===n?i.createElement(g.sK,{key:a}):i.createElement(I,{key:a,value:n,disabled:o,recordingKey:s.Pt(e,n)})});return i.createElement(T,{id:"color-picker-blend-mode-select",dropdownClassName:E.Qg,inputClassName:E.p6,className:E.rO,property:e.blendMode,onChange:e.onBlendModeChange,formatter:S,dispatch:e.dispatch,dropdownShown:e.dropdownShown,onMouseDown:u.dG,minTop:6,recordingKey:e.recordingKey,enablePreview:!0},n)})},407058:(e,r,n)=>{"use strict";n.d(r,{SY:()=>eh});var i=n(411855),a=n(675678),o=n(767129),s=n(41851),l=n(202512),c=n(445978),d=n(587670),u=n(86625),p=n(38329),m=n(153234),h=n(776621),_=n(96328),g=n(30090),f=n(448169),E=n(946689),y=n(46481),b=n(47506),I=n(939863),T=n(973149),v=n(723081),S=n(798099),w=n(226055),A=n(959232),N=n(988022),C=n(356390),O=n(283942),L=n(15859),R=n(618056),P=n(931770),D=n(53119),k=n(428467),M=n(279702),F=n(498606),x=n(420186),U=n(186126),B=n(527718),V=n(172834),G=n(205135),H=n(832637),W=n(390534),K=n(7959),j=n(538697),z=n(987850),Y=n(239737),$=n(132572),q=n(222478),Z=n(709731),X=n(30075),J=n(384775),Q=n(601902),ee=n(141273),et=n(671209),er=n(384627),en=n(296799),ei=n(306143),ea=n(634990),eo=n(498902),es=n(69782),el=n(521709);class ec extends j.l6{}class ed extends j.c${}let eu=x.qo,ep=(e,r)=>e.every((e,n)=>e===r[n]);async function em(e){let r=Array.from(e.animatedImage.hash).map(e=>e.toString(16).padStart(2,"0")).join("");await (0,L.Jr)().loadImageByHash(r);let n=(0,P.Sl)(e);return d.CUU.requestGIFData(n)}function eh(e){let r=(0,w.GS)(),n=(0,Y.vh)(),{withinMeter:a}=(0,z.X)(q.JT.REMOVE_BACKGROUND),o=(0,ee.Os)(),s=(0,$.AL)()&&n&&a&&!o;return i.createElement(e_,{...e,isUI3:r,canUseRemoveBackground:s})}class e_ extends i.Component{constructor(e){super(e),this.onRotateClockwiseClick=()=>{this.props.onChange((0,R.Lt)(this.props.paint,90),M.zk.YES),u.l7.user("image-rotate-clockwise",()=>{d.glU.repairThumbnails()})},this.onRemoveBackgroundClick=()=>{(0,J.$I)({moduleToOpen:{type:"custom",module:i.createElement(Q.A,null),beforeModuleOpen:()=>{(0,Z.B3)(q.JT.REMOVE_BACKGROUND),(0,Z.Ag)(q.JT.REMOVE_BACKGROUND,en.JY,{source:"fullscreen-action",imageHash:(0,_.H9)(this.props.paint.image.hash)})},name:X.Sn.BACKGROUND_REMOVE_TOAST},trackingData:{source:"image_settings_remove_background"}})},this.onScalingFactorChange=e=>{this.props.onChange({...this.props.paint,scale:e})},this.onPaintColorAdjustChange=(e,r,n)=>{let i={...this.props.paint.paintFilter,[e]:r};this.props.onChange({...this.props.paint,paintFilter:i},n?M.zk.YES:M.zk.NO),this.setState({forceThumbnailUpdate:n})},this.onPaintColorAdjustChangeOld=(e,r)=>{let n={...this.props.paint.paintFilter};n[e]=r,this.props.onChange({...this.props.paint,paintFilter:n},M.zk.NO),this.setState({forceThumbnailUpdate:!1})},this.onPaintColorAdjustStopDragging=(e,r,n)=>{let i={...this.props.paint.paintFilter};r instanceof MouseEvent&&void 0!==n&&(i[e]=n),this.props.onChange({...this.props.paint,paintFilter:i},M.zk.YES),this.setState({forceThumbnailUpdate:!0})},this.onGIFFrameChange=e=>{let r=Math.round(e);this.setState({animationFrameForScrubber:r,playing:!1})},this.onVideoTimeChange=e=>{this.setState({currentTimeForScrubber:e,playing:!1})},this.setGIFCoverFrame=e=>{if(!this.state.animatedFrameData){console.warn("No frame stored in state to update");return}let r=e??this.state.animationFrameForScrubber;if((null!=e||r!==this.props.paint.animationFrame)&&!this.props.updateStillImageAndSelectionPropertiesForGIF({...this.props.paint,animationFrame:r},this.state.animatedFrameData.data)){console.warn("Failed to update image");return}},this.setGIFPlaying=e=>{this.setState({playing:e})},this.setVideoPlaying=e=>{this.setState({playing:e})},this.onUpdateAnimatedFrameData=e=>{this.setState({animatedFrameData:e})},this.onUpdateCurrentTime=e=>{this.setState({currentTimeForScrubber:e})},this.setVideoDuration=e=>{this.setState({videoDuration:e})},this.uploadImagePaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;d.glU.uploadPaintImage(e,r)},this.uploadMediaPaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;d.glU.uploadPaintMedia(e,r)},this.waitingForGIF=!1,this.clearGIFContentRequest=()=>{this.waitingForGIF=!1},this.setupGIF=()=>{this.setState({animatedImage:null,animationFrameForScrubber:this.props.paint.animationFrame,playing:!1}),this.waitingForGIF=!0,em(this.props.paint).then(e=>{this.waitingForGIF&&this.setState({animatedImage:(0,D.J)(e)})}).catch(e=>(0,h.$D)(a.FigmaTeam.FIGJAM,e))},this.loadVideoJs=async()=>{if(!this.state.videoJsLib){let e=await (0,g.Fe)();this.setState({videoJsLib:e})}},this.setupVideoJs=()=>{this.setState({currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1}),this.loadVideoJs()},this.setIsVideoLoaded=e=>{this.setState({isVideoLoaded:e})},this.setUserClickedVideoControls=e=>{this.setState({userClickedVideoControls:e})},this.isAnimatedImage=()=>!!this.props.paint.animatedImage,this.isVideo=()=>!!this.props.paint.video||"VIDEO"===this.props.paint.type,this.isDragTarget=()=>!0,this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({isDragHover:!1});let r=this.props.paint.blendMode,n=this.props.paint.opacity;this.props.dropImageOnPaintThumbnail(r,n,e)},this.onImageButtonCointainerMouseOver=()=>{this.setState({isPreviewHover:!0})},this.onImageButtonCointainerMouseOut=()=>{this.setState({isPreviewHover:!1})},this.onImageButtonFocus=()=>{this.setState({isImageButtonFocused:!0})},this.onImageButtonBlur=()=>{this.setState({isImageButtonFocused:!1})},this.state={isDragHover:!1,isPreviewHover:!1,isImageButtonFocused:!1,forceThumbnailUpdate:!1,animatedImage:null,animatedFrameData:null,animationFrameForScrubber:e.paint.animationFrame||0,currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1,userClickedVideoControls:!1}}componentDidMount(){if(this.isAnimatedImage()?this.setupGIF():this.isVideo()&&this.setupVideoJs(),(0,$.qF)()&&!this.isAnimatedImage()&&!this.isVideo()){let e=p.D.getState();(0,N.ds)("bg_removal_available",e.openFile?.key,e,{source:"image_settings_panel"})}}UNSAFE_componentWillReceiveProps(e){this.props.paint.animationFrame!==e.paint.animationFrame&&this.setState({animationFrameForScrubber:e.paint.animationFrame})}componentDidUpdate(e){let r=null!=e.paint.animatedImage,n=null!=this.props.paint.animatedImage;!r&&n?this.setupGIF():r&&n?ep(e.paint.animatedImage.hash,this.props.paint.animatedImage.hash)||this.setupGIF():r&&!n&&this.clearGIFContentRequest(),"STRETCH"===this.props.paint.imageScaleMode&&(0,b.YQ)({id:"Image panel has cropped image"})}componentWillUnmount(){this.setVideoPlaying(!1),this.clearGIFContentRequest()}renderInlinePreview(){return this.isVideo()?i.createElement(V.A,{imagePaint:this.props.paint,openFileKey:this.props.openFileKey,width:eu,height:152,className:ea.IP,currentTime:this.state.currentTimeForScrubber,onUpdateCurrentTime:this.onUpdateCurrentTime,setDuration:this.setVideoDuration,playing:this.state.playing,setPlaying:this.setVideoPlaying,videoJsLib:this.state.videoJsLib,isVideoLoaded:this.state.isVideoLoaded,setIsVideoLoaded:this.setIsVideoLoaded,userClickedControls:this.state.userClickedVideoControls,setUserClickedControls:this.setUserClickedVideoControls}):this.isAnimatedImage()?i.createElement(U.Y,{imagePaint:this.props.paint,width:eu,height:152,className:ea.km,animatedImage:this.state.animatedImage,animationFrame:this.state.animationFrameForScrubber,onUpdateFrameData:this.onUpdateAnimatedFrameData,playing:this.state.playing}):i.createElement(B.K,{imagePaint:this.props.paint,width:eu,height:152,className:ea.km,forceUpdate:this.state.forceThumbnailUpdate})}renderMediaControls(){if(this.isVideo()){if(!(0,k.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)())return i.createElement(W.c,null);if(this.props.paint.video)return i.createElement(ei.P,{paint:this.props.paint,currentTime:this.state.currentTimeForScrubber||0,duration:this.state.videoDuration,onVideoTimeChange:this.onVideoTimeChange,disabled:null==this.props.paint.video,isVideoLoaded:this.state.isVideoLoaded,setPlaying:this.setVideoPlaying,playing:null!=this.props.paint.video&&this.state.playing,setUserClickedControls:this.setUserClickedVideoControls})}else if(this.isAnimatedImage())return i.createElement(et.F,{paint:this.props.paint,animationFrame:this.state.animationFrameForScrubber||0,numFrames:this.state.animatedImage?this.state.animatedImage.numFrames():null,onGIFFrameChange:this.onGIFFrameChange,disabled:null==this.state.animatedImage,setPlaying:this.setGIFPlaying,playing:null!=this.state.animatedImage&&this.state.playing,setGIFCoverFrame:this.setGIFCoverFrame});else return i.createElement("div",{className:ea.Vq},["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].map(e=>i.createElement(ey,{key:e,propertyName:e,onChange:this.onPaintColorAdjustChange,onChangeOld:this.onPaintColorAdjustChangeOld,filterColorAdjust:this.props.paint.paintFilter,onStopDragging:this.onPaintColorAdjustStopDragging,min:"contrast"===e?-.3:-1,max:"contrast"===e?.3:1,recordingKey:m.Pt(this.props,e)})))}render(){let e=this.isVideo(),r=(0,k.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)(),n=(0,$.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.canUseRemoveBackground&&!this.props.paint.image?.name.includes(en.LO),a=this.props.paint.image&&"Checker"===this.props.paint.image.name;var s=(this.state.isPreviewHover||this.state.isImageButtonFocused||a?ea.rv:ea.ZS)+(this.state.isDragHover?" "+ea.mw:"");return e&&!r&&(s=ea.ZS),i.createElement(K.Id,null,i.createElement(K.fI,{"data-onboarding-key":"image-scale-mode-select"},i.createElement(ef,{...this.props,recordingKey:m.Pt(this.props,"imageScale")}),"TILE"===this.props.paint.imageScaleMode&&i.createElement(eE,{className:ea.GA,value:"TILE"!==this.props.paint.imageScaleMode?1:this.props.paint.scale,onChange:this.onScalingFactorChange,recordingKey:m.Pt(this.props,"scalingFactor")}),n&&i.createElement("span",{className:ea.Yw},i.createElement(o.K,{onClick:this.onRemoveBackgroundClick,"aria-label":(0,I.t)("fullscreen.properties_panel.remove_background"),recordingKey:m.Pt(this.props,"removeBackground"),htmlAttributes:{"data-tooltip":(0,I.t)("fullscreen.properties_panel.remove_background"),"data-tooltip-type":F.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(y.U,{svg:es.A},i.createElement(l.$,null)))),i.createElement("span",{className:ea.Ts},i.createElement(o.K,{onClick:this.onRotateClockwiseClick,"aria-label":(0,I.t)("fullscreen.properties_panel.rotate_90"),recordingKey:m.Pt(this.props,"rotateClockwise"),htmlAttributes:{"data-tooltip":(0,I.t)("fullscreen.properties_panel.rotate_90"),"data-tooltip-type":F.Ib.TEXT}},i.createElement(y.U,{svg:el.A},i.createElement(c.R,null))))),i.createElement(f.Y,{className:s,style:{backgroundImage:`url('${(0,A.A)()}')`},isDragTarget:this.isDragTarget,onMouseOver:this.onImageButtonCointainerMouseOver,onMouseOut:this.onImageButtonCointainerMouseOut,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:m.Pt(this.props,"dropTarget")},i.createElement("div",{className:ea.mQ},this.renderInlinePreview(),i.createElement("div",{className:ea.dW,style:{width:eu,height:152}},e&&r&&i.createElement(E.nR,{className:ea.QY,onFocus:this.onImageButtonFocus,onBlur:this.onImageButtonBlur,onClick:this.uploadMediaPaint},(0,I.tx)("fullscreen.properties_panel.choose_video")),!e&&i.createElement(er.A,{onImageButtonBlur:this.onImageButtonBlur,onImageButtonFocus:this.onImageButtonFocus,uploadImagePaint:this.uploadImagePaint})))),this.renderMediaControls(),this.isAnimatedImage()&&i.createElement(H.u,{title:(0,I.t)("fullscreen.properties_panel.gifs_in_figma_prototypes"),icon_DEPRECATED:eo.A,userFlag:"dismissed_gifs_cover_frame_hint",hintText:(0,I.t)("fullscreen.properties_panel.choose_which_frame_displayed")}))}}e_.displayName="ImageSettingsModal";let eg=["FILL","FIT","STRETCH","TILE"];class ef extends i.PureComponent{constructor(){super(...arguments),this.imageScaleModeFormatter=new v.D,this.onImageScaleModeChange=e=>{"STRETCH"===e?C.Y5.triggerActionInUserEditScope("crop-image"):this.props.onChange({...this.props.paint,imageScaleMode:e})}}render(){let e=eg.map((e,r)=>i.createElement(ed,{key:r,value:e,recordingKey:m.Pt(this.props,e)}));return i.createElement(ec,{id:"image-scale-mode-select",className:ea.Nd,property:this.props.paint.imageScaleMode,onChange:this.onImageScaleModeChange,formatter:this.imageScaleModeFormatter,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,onMouseDown:S.dG,recordingKey:this.props.recordingKey},e)}}ef.displayName="ImageScaleSelection";class eE extends i.PureComponent{constructor(){super(...arguments),this.formatter=new T.LN({min:.01,max:100})}render(){return i.createElement(G.Q7,{className:this.props.className,formatter:this.formatter,property:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,recordingKey:this.props.recordingKey})}}function ey({min:e=-1,max:r=1,propertyName:n,...a}){let o=(0,i.useId)();return i.createElement(K.fI,null,i.createElement("div",{id:o,className:ea.tx},function(e){switch(e){case"exposure":return(0,I.t)("fullscreen.properties_panel.exposure");case"contrast":return(0,I.t)("fullscreen.properties_panel.contrast");case"vibrance":return(0,I.t)("fullscreen.properties_panel.saturation");case"temperature":return(0,I.t)("fullscreen.properties_panel.temperature");case"tint":return(0,I.t)("fullscreen.properties_panel.tint");case"highlights":return(0,I.t)("fullscreen.properties_panel.highlights");case"shadows":return(0,I.t)("fullscreen.properties_panel.shadows")}}(n)),i.createElement("div",{className:ea.CD},i.createElement(s.A,{"aria-labelledby":o,min:e,max:r,step:.01,bigStep:.1,value:a.filterColorAdjust?.[n]||0,defaultValue:0,hints:[0],rangeAnchor:0,onChange:(e,{commit:r})=>{a.onChange(n,e,r)},recordingKey:a.recordingKey,htmlAttributes:{"data-hold-focus":!0,onKeyDownCapture:e=>{C.Y5.isReady()&&(0,O.f7)(e)}}})))}eE.displayName="ScalingFactorInputs"},384627:(e,r,n)=>{"use strict";n.d(r,{A:()=>I});var i=n(411855),a=n(188507),o=n(421757),s=n(869452),l=n(768137),c=n(939863),d=n(662275),u=n(893606),p=n(239737),m=n(222478),h=n(709731),_=n(30075),g=n(384775),f=n(678206),E=n(144119),y=n(634990);function b({uploadImagePaint:e,recordingKey:r}){let n=(0,E.sO)(),l=(0,a.wA)(),u=(0,p.vh)();return i.createElement("div",{className:y.sn},i.createElement(o.IK,{onClick:e,recordingKey:r},n?(0,c.tx)("slides.properties_panel.replace_media"):(0,c.tx)("fullscreen.properties_panel.image_settings.upload_new")),u&&i.createElement("div",{className:y.zr},i.createElement(o.IK,{onClick:()=>{(0,h.B3)(m.JT.GENERATE_IMAGE),(0,g.$I)({moduleToOpen:{type:"custom",module:i.createElement(f.A,null),name:_.Sn.GENERATE_IMAGE},trackingData:{source:"image_settings_swap_image_generate_new"}}),l(d.Ce())},iconPrefix:i.createElement(s.T,null),variant:"secondary"},(0,c.tx)("fullscreen.properties_panel.image_settings.generate_new"))))}function I(e){return(0,u.R)()?i.createElement(b,{uploadImagePaint:e.uploadImagePaint}):i.createElement(l.nR,{className:y.QY,onFocus:e.onImageButtonFocus,onBlur:e.onImageButtonBlur,onClick:e.uploadImagePaint},(0,c.tx)("fullscreen.properties_panel.choose_image"))}},726284:(e,r,n)=>{"use strict";n.d(r,{Do:()=>I,PC:()=>T,UV:()=>b,bR:()=>y});var i=n(411855),a=n(188507),o=n(459401),s=n(587670),l=n(89865),c=n.n(l),d=n(391388),u=n(364898),p=n(899031),m=n(869156),h=n(335682),_=n(622896),g=n(416095),f=n(666068),E=n(401495);function y({subscribedLibraries:e}){let r=(0,a.d4)(e=>e.library),n=(0,h.tS)(),l=(0,m.Rb)().filter(e=>e.resolvedType===s.rXF.COLOR).length>0,c=(0,g.ti)(r.local.styles,"FILL").length>0;return i.useMemo(()=>{let r=[E.EU];return((l||c)&&r.push(E.KV),n)?r.concat((()=>{let r=e.filter(e=>e.fileKey!==n);return(0,o.sortAlphabeticallyByFn)(r,e=>e.fileName),r.map(e=>e.fileKey)})()):r},[l,c,n,e])}function b(){let e=(0,a.d4)(e=>e.mirror.appModel.currentPage),[r,n]=i.useMemo(()=>{let r=(0,p.a)();return[e,(r?.paints??[]).map(e=>({type:"paint",stylePaint:e}))]},[e]);return n}function I(){let e=(0,a.d4)(e=>e.library),r=(0,m.Rb)(),n=i.useMemo(()=>[...r].sort((e,r)=>e.sortPosition<r.sortPosition?-1:1),[r]),o=(0,m.yp)(),l=i.useMemo(()=>c()(o,e=>e.node_id),[o]),d=i.useMemo(()=>n.filter(e=>e.resolvedType===s.rXF.COLOR).map(e=>({type:"variable",variable:e,variableCollection:l[e.variableSetId]})),[n,l]),u=i.useMemo(()=>{let r=[...(0,g.ti)(e.local.styles,"FILL")];return(0,g.LX)(r),r.filter(f.XV).map(e=>({type:"style",style:e}))},[e.local.styles]);return i.useMemo(()=>[...d,...u],[d,u])}function T(e){let r=(0,h.tS)(),n=e!==E.EU&&e!==E.KV,a=(0,m.kf)(n?e:null),o=(0,m.u5)(n?e:null),l=(0,_.Bh)(n?e:""),p=i.useMemo(()=>d.Qw.from(l).transform(e=>(0,_.oz)(e,"FILL")),[l]);return i.useMemo(()=>{if(!n||!r)return d.Qw.loaded([]);let e=d.Qw.all([a,o]).transform(([e,r])=>{let n=c()(r,e=>e.node_id);return[...e].filter(e=>e.resolvedType===s.rXF.COLOR).sort((e,r)=>(0,u.Ez)(e.sortPosition,r.sortPosition)).map(e=>({type:"variable",variable:e,variableCollection:n[e.variableSetId]}))}),i=p.transform(e=>{let r=[...e].filter(f.XV);return(0,g.LX)(r),r.map(e=>({type:"style",style:e}))});return d.Qw.all([e,i]).transform(([e,r])=>[...e,...r])},[n,r,a,o,p])}},952675:(e,r,n)=>{"use strict";n.d(r,{a3:()=>b,ow:()=>f});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234),l=n(738269),c=n(848661),d=n(279702),u=n(221034),p=n(205135),m=n(538697),h=n(216899),_=n(446859),g=n(334495);let{OverridesProvider:f,OverridableComponent:E}=(0,_.r)();var y=(e=>(e[e.Select=0]="Select",e[e.Input=1]="Input",e))(y||{});class b extends i.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,isFocused:!1,previousPreviewValue:this.props.property,isMouseOverScrubbableControl:!1,isMouseOverSelect:!1},this.onMouseOver=e=>{this.props.onMouseEnter?.(e),this.setState({isMouseOver:!0})},this.onMouseLeave=e=>{this.props.onMouseLeave?.(e),this.setState({isMouseOver:!1})},this.onFocus=e=>{this.setState({isFocused:!0}),this.props.onInputFocus?.(e)},this.onBlur=e=>{this.setState({isFocused:!1}),this.props.onInputBlur?.(e)},this.onMouseEnterScrubbableControl=()=>{this.setState({isMouseOverScrubbableControl:!0})},this.onMouseLeaveScrubbableControl=()=>{this.setState({isMouseOverScrubbableControl:!1})},this.onMouseEnterSelect=()=>{this.setState({isMouseOverSelect:!0})},this.onMouseLeaveSelect=()=>{this.setState({isMouseOverSelect:!1})}}componentDidUpdate(e){this.props.enablePreview&&!e.dropdownShown&&this.props.dropdownShown?.type===this.props.id&&this.setState({previousPreviewValue:this.props.property})}areValuesEqual(e,r){return null==e||null==r?null==e==(null==r):this.props.formatter.isEqual?this.props.formatter.isEqual(e,r):e===r}render(){let e=(0,c.E7)(this.state.previousPreviewValue??this.props.property),r=[],n=!0;i.Children.forEach(this.props.children,r=>{this.areValuesEqual(r?.props?.value,e)&&(n=!1)}),n&&e&&!this.props.omitValueFromDropdown&&(r.push(i.createElement(m.c$,{value:e,key:"custom-option",dataTestId:`custom-option-${e}`},this.props.formatter.format(e))),0!==i.Children.count(this.props.children)&&r.push(i.createElement(m.sK,{key:"custom-option-divider"})));let a=g.be;!this.props.disabled&&(this.state.isMouseOver||this.state.isFocused)&&(a=g.Wv);let _=g.kL;this.props.disabled&&(_=g.Qz);let f=this.props.isTokenizable?h.$:p.p_,y=e=>{this.props.disableSelectFocus&&"ArrowDown"===e.key&&e.metaKey?(e.preventDefault(),this.props.dispatch(l.j7({type:this.props.id}))):this.props.onKeyDown?.(e)};return i.createElement("div",{className:`${_} ${this.props.className||""}`,onMouseDown:this.props.onMouseDown,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave,onMouseEnter:this.props.onMouseEnterNonPropagating,"data-onboarding-key":this.props.onboardingKey,onKeyDown:e=>{this.props.disableSelectFocus&&this.props.dropdownShown?.type===this.props.id&&"ArrowUp"===e.key&&e.metaKey&&(this.props.dispatch(l.oB()),this.props.forwardedRef?.current?.focus(),this.props.forwardedRef?.current?.select())}},i.createElement(E,{overrideKey:"select",originalComponent:m.l6,id:this.props.id,formatter:this.props.formatter,property:this.state.previousPreviewValue??this.props.property,className:this.props.disabled?g.t_:g.Lt,inputClassName:o()(a,this.props.inputClassName,{[g.in]:this.props.disableSelectFocus&&(this.state.isFocused||this.props.dropdownShown?.type===this.props.id)}),dropdownClassName:this.props.dropdownClassName,onChange:(e,r)=>{this.props.onChange(e,r,0)},dispatch:this.props.dispatch,disabled:this.props.disabled,dropdownShown:this.props.dropdownShown,recordingKey:s.Pt(this.props,"select"),icon:this.props.icon,iconClassName:this.props.iconClassName,dropdownWidth:this.props.dropdownWidth,willShowDropdown:this.props.willShowDropdown,onOptionFocus:this.props.onOptionFocus,disableSelectFocus:this.props.disableSelectFocus,openBelowTarget:this.props.openBelowTarget,chevronClassName:this.props.chevronClassName,dropdownAlignment:this.props.dropdownAlignment,onDropdownHidden:e=>{e&&this.props.forwardedRef?.current?.focus(),this.setState({previousPreviewValue:void 0})},enablePreview:this.props.enablePreview&&!!this.props.dropdownShown,optionsWithDisabledPreviews:this.props.optionsWithDisabledPreviews,isHoveredOverScrubbableComboboxControl:this.state.isMouseOverScrubbableControl,onMouseEnterFakeSelect:this.onMouseEnterSelect,onMouseLeaveFakeSelect:this.onMouseLeaveSelect},r,this.props.children),this.props.scrubbableControlProps?i.createElement(u.b,{onMouseEnter:this.onMouseEnterScrubbableControl,onMouseLeave:this.onMouseLeaveScrubbableControl,...this.props.scrubbableControlProps,className:o()(g.f0,{[g.d_]:!!this.props.icon,[g.hL]:this.props.disableSelectFocus})},i.createElement(E,{overrideKey:"inputComponent",originalComponent:f,dataTestId:this.props.dataTestId,className:this.props.inputClassName,formatter:this.props.formatter,property:this.props.forceInputPlaceholder&&this.props.placeholder?"":this.props.property,onChange:(e,r=d.zk.YES)=>{this.props.onChange(e,r,1)},onKeyDown:y,onKeyUp:this.props.onKeyUp,mixedMathHandler:this.props.mixedMathHandler,disabled:this.props.disabled,autoFocus:this.props.autoFocus,recordingKey:this.props.unNamespacedInputRecordingKey?this.props.recordingKey:s.Pt(this.props,"input"),onFocus:this.onFocus,onBlur:this.onBlur,noBorderOnFocus:!0,forwardedRef:this.props.forwardedRef,placeholder:this.props.placeholder&&(this.props.forceInputPlaceholder||!this.props.property)?this.props.placeholder:void 0,allowEmpty:this.props.allowEmpty,noPlaceholderLine:this.props.noPlaceholderLine,isHoveringOverSelect:this.state.isMouseOverSelect,shouldUseHoveringFormatterIfCombobox:this.state.isMouseOverScrubbableControl||this.state.isFocused})):i.createElement(E,{overrideKey:"inputComponent",originalComponent:f,dataTestId:this.props.dataTestId,className:`${g.hF} ${this.props.icon?g.d_:""} ${this.props.inputClassName||""}`,formatter:this.props.formatter,property:this.props.forceInputPlaceholder&&this.props.placeholder?"":this.props.property,onChange:(e,r=d.zk.YES)=>{this.props.onChange(e,r,1)},onKeyDown:y,onKeyUp:this.props.onKeyUp,disabled:this.props.disabled,autoFocus:this.props.autoFocus,recordingKey:this.props.unNamespacedInputRecordingKey?this.props.recordingKey:s.Pt(this.props,"input"),onFocus:this.onFocus,onBlur:this.onBlur,forwardedRef:this.props.forwardedRef,placeholder:this.props.forceInputPlaceholder&&this.props.placeholder?this.props.placeholder:void 0}))}}b.displayName="ComboBox",b.propTypes={children:(e,r,n)=>{let a=e[r],o=null;return i.Children.forEach(a,e=>{e.type&&e.type.__IS_VALID_SELECT_CHILD__||(o=Error(`${n} children should be of type 'Option' or 'SelectDivider'`))}),o}}},835808:(e,r,n)=>{"use strict";n.d(r,{QG:()=>s});var i=n(411855),a=n(188507),o=n(32067);function s(){let[e,r]=function(){let e=(0,a.d4)(e=>e.mirror.sceneGraph),r=(0,o.VW)(),n=(0,a.d4)(e=>e.mirror.selectionProperties.masterSymbolGUID);if(!r||!r.isAlive())return[null,null];if(r?.isStateGroup)return[null,r??null];if(r?.type==="SYMBOL"||r?.type==="INSTANCE"){let i=r??null;if(r?.type==="INSTANCE"&&(i=n?e.get(n):null),!i)return[null,null];if(!i?.isState)return[i??null,null];let a=i?.parentGuid?e.get(i?.parentGuid):null;return[i??null,a?.isStateGroup?a:null]}return[null,null]}(),n=i.useMemo(()=>{let n=e?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(n.length>0)return n;let i=r?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(i.length>0)return i},[e,r]),s=e?.description,l=r?.description,c=s&&l?l+"\n\n"+s:s||l;return i.useMemo(()=>({links:n,description:c}),[n,c])}},541878:(e,r,n)=>{"use strict";n.d(r,{Ho:()=>i,JI:()=>a,Kj:()=>s,OK:()=>c,Yj:()=>l}),n(587670);let i=1,a=.76;function o(e,r){return 1e-6>Math.abs(e-r)}var s=(e=>(e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e))(s||{});function l(e,r){switch(e){case 0:return"JPEG"===r?.75:.5;case 1:return"JPEG"===r?.8:.76;case 2:return 1}}function c(e,r){return o(e,l(0,r))?0:o(e,l(1,r))?1:2}},179447:(e,r,n)=>{"use strict";n.d(r,{J5:()=>B,K8:()=>x,Tq:()=>M,Vq:()=>F,lq:()=>k,sZ:()=>U});var i=n(411855),a=n(485463),o=n(256296),s=n(587670),l=n(776250),c=n(966712),d=n(153234),u=n(520581),p=n(763658),m=n(572206),h=n(939863),_=n(293017),g=n(798099),f=n(356390),E=n(288536),y=n(848661),b=n(498606),I=n(7959),T=n(538697),v=n(893606),S=n(994481),w=n(746806),A=n(541878),N=n(526459);let C=e=>({format:r=>{switch(r){case"DOCUMENT":return(0,h.t)("fullscreen.properties_panel.export_settings_color_profile.document",{documentColorProfile:e===s.RYP.DISPLAY_P3?(0,h.t)("fullscreen.properties_panel.export_settings_color_profile.p3"):(0,h.t)("fullscreen.properties_panel.export_settings_color_profile.srgb")});case"SRGB":return(0,h.t)("fullscreen.properties_panel.export_settings_color_profile.srgb");case"DISPLAY_P3_V4":return(0,h.t)("fullscreen.properties_panel.export_settings_color_profile.display_p3")}}});class O extends T.l6{}class L extends T.c${}let R=()=>({format:e=>{switch(e){case A.Kj.LOW:return(0,h.t)("fullscreen.properties_panel.export_settings_quality.low");case A.Kj.MEDIUM:return(0,h.t)("fullscreen.properties_panel.export_settings_quality.medium");case A.Kj.HIGH:return(0,h.t)("fullscreen.properties_panel.export_settings_quality.high")}}});class P extends T.l6{}class D extends T.c${}function k({id:e,value:r,suffixClassName:n,onSuffixChange:a,recordingKey:o}){let s=i.useCallback(e=>{a(e.target.value)},[a]),l=(0,v.R)(v.G.READY);return i.createElement(u.E,{name:"export_settings_suffix_text_input"},i.createElement(I.ks,{id:e,className:n,placeholder:l?(0,h.t)("fullscreen.properties_panel.export_suffix_placeholder"):(0,h.t)("fullscreen.properties_panel.export_suffix"),value:r,onChange:s,onMouseDown:g.dG,recordingKey:o}))}class M extends i.PureComponent{constructor(){super(...arguments),this.close=()=>{this.props.dispatch(_.XE()),f.Y5.deselectProperty()},this.onColorProfileChange=e=>{let r=(0,y._W)(this.props.exportSettings,{});this.props.onChange({...r,colorProfile:e}),(0,l.sx)("export_color_profile_change",{colorProfile:e,assetType:r.imageType})},this.onContentsOnlyChange=e=>{let r=(0,y._W)(this.props.exportSettings,{});this.props.onChange({...r,contentsOnly:e})},this.onSVGIDChange=e=>{let r=(0,y._W)(this.props.exportSettings,{});this.props.onChange({...r,svgIDMode:e?"ALWAYS":"IF_NEEDED"})},this.onSVGTextOutlinesChange=e=>{let r=(0,y._W)(this.props.exportSettings,{});this.props.onChange({...r,svgOutlineText:e})},this.onUseAbsoluteBoundsChange=e=>{let r=(0,y._W)(this.props.exportSettings,{});this.props.onChange({...r,useAbsoluteBounds:e})},this.onSVGSimplifyStrokeChange=e=>{let r=(0,y._W)(this.props.exportSettings,{});this.props.onChange({...r,svgForceStrokeMasks:!e})},this.onExportQualityChange=(e,r)=>{let n=(0,y._W)(this.props.exportSettings,{}),i=(0,A.Yj)(e,r);this.props.onChange({...n,quality:i})}}render(){let e=(0,y._W)(this.props.exportSettings,null);if(!e)return null;let r=new m.Mi(this.props.pickerShown?.initialX,this.props.pickerShown?.initialY),n="SVG"===e.imageType&&i.createElement("div",null,i.createElement(I.fI,{className:N.nM},i.createElement(a.S,{checked:"ALWAYS"===e.svgIDMode,onChange:this.onSVGIDChange,label:i.createElement(o.J,{htmlAttributes:{"data-tooltip":(0,h.t)("fullscreen.properties_panel.export_layer_names_using_id_attributes"),"data-tooltip-type":b.Ib.TEXT}},(0,h.tx)("fullscreen.properties_panel.include_id_attribute")),recordingKey:d.Pt(this.props,"svgID")})),s.glU.shouldShowTextNodeExportOptions()&&i.createElement(I.fI,{className:N.nM},i.createElement(a.S,{checked:!!e.svgOutlineText,onChange:this.onSVGTextOutlinesChange,label:i.createElement(o.J,{htmlAttributes:{"data-tooltip":(0,h.t)("fullscreen.properties_panel.export_text_as_outlined_path_element"),"data-tooltip-type":b.Ib.TEXT}},(0,h.tx)("fullscreen.properties_panel.outline_text")),recordingKey:d.Pt(this.props,"svgTextOutlines")})),s.glU.isStrokeMaskableAsSVG()&&i.createElement(I.fI,{className:N.nM},i.createElement(a.S,{checked:!e.svgForceStrokeMasks,onChange:this.onSVGSimplifyStrokeChange,label:i.createElement(o.J,{htmlAttributes:{"data-tooltip":(0,h.t)("fullscreen.properties_panel.export_stroke_as_inlined_path_element"),"data-tooltip-type":b.Ib.TEXT}},(0,h.tx)("fullscreen.properties_panel.simplify_stroke")),recordingKey:d.Pt(this.props,"svgSimplifyStroke")})));return i.createElement(w.vx,{title:(0,h.t)("fullscreen.properties_panel.export"),initialPosition:r,headerSize:"small",onClose:this.close,recordingKey:d.Pt(this.props,"modal")},i.createElement(p.k,{name:"export_settings_modal"},i.createElement(I.Id,null,this.props.isUI3&&i.createElement(S.dx,{left:i.createElement(I.JU,{htmlFor:"export-settings-suffix",className:N.hD},`${(0,h.t)("fullscreen.properties_panel.export_suffix_label")}: `),right:i.createElement(k,{id:"export-settings-suffix",value:e.suffix||"",onSuffixChange:this.props.onSuffixChange,suffixClassName:this.props.suffixClassName,recordingKey:d.Pt(this.props,"suffix")})}),i.createElement(E.ZH,null,({documentExportColorProfile:r})=>{let n=i.createElement(F,null),a=i.createElement(x,{documentExportColorProfile:r,onColorProfileChange:this.onColorProfileChange,colorProfile:e.colorProfile,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey});return this.props.isUI3?i.createElement(S.dx,{left:n,right:a}):i.createElement(I.fI,{className:N.ju},n,a)}),(0,c.kc)().ce_jpeg_export_quality_selector&&i.createElement(V,{onExportQualityChange:this.onExportQualityChange,exportSettings:e,isUI3:this.props.isUI3,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey}),"PDF"===e.imageType?null:i.createElement(I.fI,{className:N.nM},i.createElement(u.E,{name:"export_settings_use_contents_only_checkbox"},i.createElement(a.S,{checked:!!e.contentsOnly,onChange:this.onContentsOnlyChange,label:i.createElement(o.J,null,(0,h.tx)("fullscreen.properties_panel.ignore_overlapping_layers")),recordingKey:d.Pt(this.props,"contentsOnly")}))),s.glU.shouldShowTextNodeExportOptions()&&i.createElement(I.fI,{className:N.nM},i.createElement(u.E,{name:"export_settings_use_absolute_bounds_checkbox"},i.createElement(a.S,{checked:!!e.useAbsoluteBounds,onChange:this.onUseAbsoluteBoundsChange,label:i.createElement(o.J,null,(0,h.tx)("fullscreen.properties_panel.include_bounding_box")),recordingKey:d.Pt(this.props,"useAbsoluteBounds")}))),n)))}}function F(){return i.createElement(I.JU,{className:N.hD,htmlFor:"export-settings-color-profile"},`${(0,h.t)("fullscreen.properties_panel.export_settings_color_profile")}: `)}function x({documentExportColorProfile:e,onColorProfileChange:r,colorProfile:n,dropdownShown:a,dispatch:o,...s}){return i.createElement(u.E,{name:"export_settings_color_profile_select"},i.createElement(O,{id:"export-settings-color-profile",dataTestId:"export-settings-color-profile",dropdownWidth:160,chevronClassName:N.ho,inputClassName:N.AM,property:n??"DOCUMENT",formatter:C(e),onChange:r,dispatch:o,dropdownShown:a,onMouseDown:g.dG,recordingKey:d.Pt(s,"colorProfile")},i.createElement(L,{value:"DOCUMENT",recordingKey:d.Pt(s,"colorProfile","document")}),i.createElement(L,{value:"SRGB",recordingKey:d.Pt(s,"colorProfile","srgb")}),i.createElement(L,{value:"DISPLAY_P3_V4",recordingKey:d.Pt(s,"colorProfile","display-p3-v4")})))}function U(){return i.createElement(I.JU,{className:N.hD,htmlFor:"export-settings-quality"},`${(0,h.t)("fullscreen.properties_panel.export_settings_quality")}: `)}function B({onExportQualityChange:e,quality:r,imageType:n,dropdownShown:a,dispatch:o,...s}){return i.createElement(u.E,{name:"export_settings_quality_select"},i.createElement(P,{id:"export-settings-quality",dataTestId:"export-settings-quality",dropdownWidth:160,chevronClassName:N.ho,inputClassName:N.AM,property:(0,A.OK)(r,n),formatter:R(),onChange:r=>{n&&e(r,n)},dispatch:o,dropdownShown:a,onMouseDown:g.dG,recordingKey:d.Pt(s,"exportQuality")},i.createElement(D,{value:A.Kj.HIGH,recordingKey:d.Pt(s,"exportQuality","high")}),i.createElement(D,{value:A.Kj.MEDIUM,recordingKey:d.Pt(s,"exportQuality","medium")}),i.createElement(D,{value:A.Kj.LOW,recordingKey:d.Pt(s,"exportQuality","low")})))}function V({onExportQualityChange:e,exportSettings:r,dropdownShown:n,dispatch:a,recordingKey:o,isUI3:s}){if(!r||!r.quality||!r.imageType)return null;if("JPEG"===r.imageType||(0,c.kc)().ce_pdf_export_quality_selector&&"PDF"===r.imageType){let l=i.createElement(U,null),c=i.createElement(B,{onExportQualityChange:e,quality:r.quality,imageType:r.imageType,dropdownShown:n,dispatch:a,recordingKey:o});return s?i.createElement(S.dx,{left:l,right:c}):i.createElement(I.fI,{className:N.ju},l,c)}return null}M.displayName="ExportSettings"},227795:(e,r,n)=>{"use strict";n.d(r,{DK:()=>g,K0:()=>f,Me:()=>E,YW:()=>y});var i=n(411855),a=n(629019),o=n.n(a),s=n(62935),l=n(498750),c=n(522739),d=n(574176),u=n(348425),p=n(672517),m=n(817543),h=n(333483),_=n(783423);let g=i.forwardRef(function(e,r){let n=o()(e.className,e.containerClassName,h.U,e.disabled?h.Ah:h.pq,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.No]:e.isBackgroundTransparent});return i.createElement(f,{...e,className:n,ref:r},i.createElement(i.Fragment,null,i.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}),i.createElement(d.B,{className:h.ai,svg:_.A})))}),f=i.forwardRef(function(e,r){let n=(0,s.M)(r);function a(){n.current.blur()}let d=o()(e.className,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.Ah]:!e.selected&&e.disabled,[h.pq]:!e.selected&&!e.disabled,[h.No]:e.isBackgroundTransparent}),p=e.tooltipForScreenReadersOnly||!e.showTooltipWhenSelectedIsTrue&&e.selected,_=e.href?c.lt:c.GG;return i.createElement(_,{forwardedRef:n,className:d,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,onClick:e.disabled?void 0:e.onClick,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:r=>{switch(r.keyCode){case l.Uz.ENTER:case l.Uz.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&r.preventDefault(),e.onMouseDown?.(r),e.onKeyDown?e.onKeyDown(r):e.onClick?.(r);break;case l.Uz.ESCAPE:a()}},onPointerDown:e.disabled?void 0:e.onPointerDown,onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseUp:e.disabled?void 0:a,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onContextMenu:e.disabled?void 0:e.onContextMenu,href:e.disabled?void 0:e.href,type:e.type,target:e.target,"data-fullscreen-intercept":e["data-fullscreen-intercept"],"data-tooltip-type":p?null:e["data-tooltip-type"],"data-tooltip":p?null:e["data-tooltip"],"data-tooltip-show-immediately":p?null:e["data-tooltip-show-immediately"],"data-tooltip-max-width":p?null:e["data-tooltip-max-width"],"data-tooltip-show-above":p?null:e["data-tooltip-show-above"],"data-tooltip-shortcut-key":p?null:e["data-tooltip-shortcut-key"],"data-tooltip-offset-x":p?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":p?null:e["data-tooltip-offset-y"],"aria-label":e["aria-label"]??(0,m.En)(e),disabled:e.disabled,"aria-disabled":e.disabled,"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-owns":e["aria-owns"],recordingKey:e.recordingKey},e.children||i.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),E=(0,p.tf)(f),y=f;(0,p.tf)(y)},958568:(e,r,n)=>{"use strict";n.d(r,{LB:()=>_,T7:()=>h,TF:()=>f,V9:()=>p,aK:()=>c,cB:()=>u,jO:()=>g,v2:()=>m});var i=n(215122),a=n(587670),o=n(354189),s=n(416095),l=n(173454);function c(e,r){let n=r.get(e)?.symbolId;if(n){let i,a;let o=r.get(n),l=o?.containingStateGroupId;if(o?.isState&&l){let e=r.get(l);e?.isStateGroup&&(i=e?.stateGroupKey,a=e?.sharedStateGroupVersion)}let{componentKey:c,sharedSymbolVersion:d}=o??{};return{instanceGUID:e,backingGUID:n,fileKey:(0,s.yW)(o)??void 0,componentKey:c??void 0,stateGroupKey:i??void 0,symbolVersion:d??void 0,stateGroupVersion:a??void 0}}return null}function d(e,r,n){let i=(0,s.Av)(r);if(!i)return;let a=o.v.fromGuid(e.instanceGUID);n[i]?n[i].instanceIdsToUpdate.push(a):n[i]={updateAsset:r,instanceIdsToUpdate:[a]}}function u(e,r,n){let a={},o={};for(let r of n)for(let n of e)n.component_key&&(r.componentKey&&r.componentKey===n.component_key?r.symbolVersion&&r.symbolVersion!==n.content_hash&&d(r,n,a):r.componentKey&&n.oldSubscribedKeysToUpdate.includes(r.componentKey)?d(r,n,a):n.localIdsToUpdate.includes(r.backingGUID)&&d(r,n,a));for(let e of n)for(let n of r)if(n.key){if(e.componentKey&&e.stateGroupKey&&e.stateGroupKey===n.key)e.stateGroupVersion&&e.stateGroupVersion!==n.version&&Object.keys(n.newStateKeyToOutdatedItems).includes(e.componentKey)&&d(e,n,o);else for(let r of Object.keys(n.newStateKeyToOutdatedItems))e.componentKey&&n.newStateKeyToOutdatedItems[(0,i.ii)(r)].oldSubscribedKeysToUpdate.includes(e.componentKey)?d(e,n,o):n.newStateKeyToOutdatedItems[(0,i.ii)(r)].localIdsToUpdate.includes(e.backingGUID)?d(e,n,o):e.componentKey&&e.componentKey===r&&d(e,n,o)}return{componentInstanceUpdateInfo:a,stateInstanceUpdateInfo:o}}function p(e,r,n){return r&&n?{updateAsset:r,styleGUIDs:[...new Set([n,...e])]}:r?{updateAsset:r,styleGUIDs:e}:null}function m(e,r){return e.find(e=>r?.isLocalStyle?-1!==e.localIdsToUpdate.indexOf(r.GUID):!!r?.key&&-1!==e.oldSubscribedKeysToUpdate.indexOf(r.key)||e.key===r?.key&&r.version&&e.content_hash!==r.version)??null}function h(e,r){return e?r.filter(({key:r,version:n})=>e.oldSubscribedKeysToUpdate.includes(r)||r===e.key&&n!==e.content_hash).map(e=>e.nodeId).concat(e.localIdsToUpdate):[]}function _(e,r){return e.component_key&&e.content_hash?a.glU.getOutdatedComponentInstanceDevIds(e.component_key,e.content_hash,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,r||""):[]}function g(e,r){return a.glU.getOutdatedStateInstanceDevIds(e.version,e.newStateKeyToOutdatedItems,r||"")}function f(e){return e.type===l.PW.COMPONENT?_(e,void 0).length:g(e,void 0).length}},754369:(e,r,n)=>{"use strict";n.d(r,{$:()=>_});var i=n(411855),a=n(188507),o=n(587670),s=n(44948),l=n(848661),c=n(29680),d=n(335682),u=n(416095),p=n(57392),m=n(279145),h=n(705129);function _(e){let r=(0,m.Rn)("restore-symbol-or-state-group"),n=(0,a.d4)(e=>e.mirror.appModel[r]),_=(0,c.B9)(),g=(0,a.d4)(d.sS),f=(0,s.k9)(()=>{let r=new Set;for(let n of e){let e=_.get(n);if(e?.type!=="INSTANCE")continue;let i=e.symbolId;i&&r.add(i)}return r},[e,_]),{backingSymbolGUID:E,backingStateGroupGUID:y}=(0,h.nD)(f,_),b=i.useMemo(()=>(0,l.gl)(E)||null===E?null:_.get(E),[E,_]),I=i.useMemo(()=>(0,l.gl)(y)||null===y?null:_.get(y),[y,_]),T=i.useMemo(()=>{if(!b)return!1;let e=(0,u.yW)(b);return null!=e&&e!==g},[b,g]),v=i.useMemo(()=>!!(b&&o.Egt.nodeIsSoftDeleted(b.guid)),[b]),S=i.useMemo(()=>!!(I&&o.Egt.nodeIsSoftDeleted(I.guid)),[I]),w=i.useMemo(()=>{if(I)return I;if(!b)return null;if(v){let e=o.Egt.findBestAncestorInRestorePath(b.guid),r=""===e?null:_.get(e);if(r?.isStateGroup)return r}return null},[b,I,v,_]),A=(0,a.d4)(p.lm),N=i.useMemo(()=>I&&S?I:b&&v?b:null,[b,v,S,I]),C=i.useMemo(()=>{let e;return e=N?N.isStateGroup?"STATE_GROUP":w?"SYMBOL_AS_STATE":"SYMBOL_AS_NON_STATE":null,n||(e=null),e},[n,N,w]),O=i.useMemo(()=>b?.componentKey&&A.get(b.componentKey)?"DELETED_SUBSCRIBED_STATE":"SYMBOL_AS_STATE"===C?"DELETED_LOCAL_STATE":null,[A,b,C]);return i.useMemo(()=>({backingSymbolGUID:E,backingStateGroupGUID:y,singleBackingSymbol:b,singleBackingStateGroup:I,isBackingSymbolShared:T,isBackingSymbolSoftDeleted:v,isBackingStateGroupSoftDeleted:S,affiliatedStateGroup:w,affiliatedStateGroupId:w?.guid,symbolOrStateGroupToRestore:N,restoreType:C,stateResetType:O}),[E,y,b,I,T,v,S,w,N,C,O])}},225373:(e,r,n)=>{"use strict";n.d(r,{Cc:()=>eX,T:()=>eZ,lL:()=>eH});var i=n(411855),a=n(109388),o=n(188507),s=n(752795),l=n(767129),c=n(421757),d=n(18991),u=n(343427),p=n(629019),m=n.n(p),h=n(776250),_=n(91408),g=n(297666),f=n(794272),E=n(966712),y=n(374626),b=n(498750),I=n(527735),T=n(153234),v=n(743282),S=n(572206),w=n(127199),A=n(667167),N=n(946689),C=n(574176),O=n(46481),L=n(762638),R=n(939863),P=n(154483),D=n(278733),k=n(738269),M=n(293017),F=n(286954),x=n(271245),U=n(182976),B=n(662275),V=n(801161),G=n(931828),H=n(798099),W=n(298527),K=n(378905),j=n(696673),z=n(44892),Y=n(788744),$=n(756317),q=n(680681),Z=n(453681),X=n(957987),J=n(288542),Q=n(543817),ee=n(875847),et=n(669178),er=n(335682),en=n(694687),ei=n(416095),ea=n(933342),eo=n(99506),es=n(336599),el=n(643067),ec=n(458136),ed=n(137459),eu=n(173454),ep=n(809073),em=n(498606),eh=n(386976),e_=n(664457),eg=n(186380),ef=n(448406),eE=n(48515),ey=n(938720),eb=n(715762),eI=n(507662),eT=n(538697),ev=n(239737),eS=n(16774),ew=n(760445),eA=n(746806),eN=n(247307),eC=n(517418),eO=n(371623),eL=n(75640),eR=n(657124),eP=n(705129),eD=n(860168),ek=n(692377),eM=n(951864),eF=n(280999),ex=n(731719);let eU=(0,_.hG)(eD.jkd),eB=e=>{switch(e){case ef.rp.SMALL:return{height:22,width:22,gridClassName:""};case ef.rp.NORMAL:return{height:72,width:72,gridClassName:""};case ef.rp.WIDE:return{height:52,width:256,gridClassName:""}}},eV=(0,P.fv)(),eG=(e,r)=>{let n=eB(r),a=(0,E.kc)().ds_use_lib_keys?`${e.node_id}-${e.library_key}`:`${e.node_id}-${eV(e)}`;return i.createElement(ey.lX,{key:a,item:e,height:n?.height,width:n?.width,showName:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,isFigJam:!0,noBackground:!1,displayType:null===r?"list-compact":"grid",isSearch:!1,className:null===r?ek.Tv:ek.B_})};function eH(e,r){return i.createElement(eg.M,{item:e,shouldGenerateLocalThumbnail:!0,className:null===r?ek.Tv:ek.B_,draggable:!1})}let eW=e=>["drilldownItem-productComponent",e.node_id],eK=e=>e.length>1,ej="ENABLED_LIBRARIES_LABEL",ez=(0,P.fv)();function eY(e){let{openFile:r,onSwapCallback:n,instanceSwapPickerShown:a,multiselect:l,onMultiselectCallback:c,selectedItems:d,scrollContainerHeight:u,isLoadingSubscribedLibraries:p,shouldPerformSwapOnClick:_,itemsToSwap:g,incrementNumSearchesForTracking:T,dropdownAccessory:v,pickerType:S,pickerToggleRef:O,preferredItems:P,overrideDefaultItem:M,showPreferredSectionByDefault:H,preferredValuesErrorComponent:er,sessionId:em,isSearching:eh,setIsSearching:eg,entrypointForLogging:ey}=e,eA=S===A.Zl.INSTANCE_SWAP_PICKER||S===A.Zl.PREFERRED_VALUES_PICKER,eN=(0,A.qc)(),[eD]=(0,eL.Pk)(),eF=eN&&!eD,{library:ex,dropdownShown:eB,fileByKey:eV,hubFiles:eK,sceneGraphSelection:eY,isListView:e$,loadingState:eq}=(0,f.R)(e=>({library:e.library,dropdownShown:e.dropdownShown,fileByKey:e.fileByKey,hubFiles:e.hubFiles,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),eZ=(0,o.d4)(e=>e.universalInsertModal.showing),eX=r.key,eQ=(0,o.wA)(),e0=l?null:d[0]??null,e1=i.useMemo(()=>ez(M),[M]),e2=i.useMemo(()=>e1??z.uj(d),[e1,d]),e3=i.useMemo(()=>(0,eC.Dr)(ex,eN?eC.Wx.COMPONENTS_FIRST:eC.Wx.SUBPATHS_FIRST,eF),[eF,eN,ex]),e6=i.useMemo(()=>(0,eC.Oj)(ex,r,eV,eK,e2),[ex,r,eV,eK,e2]),e8=(0,et.g5)(ep.$A.Design).productComponents.filter(e=>!(0,j.tz)(ez(e))).map(eC.Kk),e5=i.useMemo(()=>P?P.map(eC.Kk):[],[P]),e7=i.useMemo(()=>(0,eC._D)(e6,eV,eK,eN?eC.Wx.COMPONENTS_FIRST:eC.Wx.SUBPATHS_FIRST,eF),[e6,eV,eK,eN,eF]),[e4,e9,te]=i.useMemo(()=>e2&&e7[e2]?.length>0?[e2,e7[e2],e6[e2]]:e3.length>0?[eX,e3,(0,ei.X0)(z.Qx(ex))]:eA&&Object.entries(e7).find(([e,r])=>r.length>0)||[null,[]],[e2,e7,e3,eA,e6,eX,ex]),[tt,tr]=i.useState(()=>H?{type:A.iN.PREFERRED}:e4&&(eA||e4!==eX)?{type:A.iN.FILE,key:e4}:{type:A.iN.RECENT});eO.S.useLaunchedEvent({pickerType:S,sessionId:em,dropdownSelection:tt,entrypoint:ey});let[tn,ti]=i.useState(null),ta=(0,o.Pj)(),to=i.useMemo(()=>{if((0,E.kc)().ds_instance_swap_use_ai_results)return[];let e=[],n=(0,ei.X0)(z.Qx(ex));e.push(...n);let i=[];return Object.values(e6).forEach(e=>{i.push(...e)}),e.push(...i),(e=>{let n=[];n=e.filter(e=>e.type===eu.PW.COMPONENT);let i=e.filter(e=>e.type===eu.PW.STATE_GROUP),a=(0,ei.Vk)(ex.published.components),o=(0,ei.A0)(ex,a,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},(0,ee.T9)(r.project)),s=Object.values((0,ei.WV)(ex.local.components)),l=o.concat(s),c=(0,ei.Gg)(i,l);return n.push(...c),n})(e)},[e6,ex,r]),ts=(0,ev.Nv)(!0),tl=eO.S.useOpenFileProperties(),tc=i.useCallback(e=>tt.type===A.iN.FILE?tt.key===eX?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&(0,K.TK)(e.item,tt.key)&&(0,ei.Av)(e.item)):tt.type===A.iN.PREFERRED?e.filter(e=>"LEAF"===e.type&&P&&!!P.find(r=>r.node_id===e.item.node_id)):e,[tt,eX,P]),td=i.useCallback(async(e,n,i)=>{let a=[];if((0,E.kc)().ds_instance_swap_use_ai_results){ea.YG.refreshSourcesIfNeeded(ta);let n=e2?e6[e2]:void 0;a=(await ea.YG.computeResultsReduxSearchTypeHelper(e,{type:eE.I.ALL},r.editorType===eo._Y.DESIGN,y.zl.get(Z.qp),!0,n,e2??void 0)).normalizedSearchResults.filter(e=>e.type!==eu.PW.MODULE).map(e=>({item:e,score:e.score}))}else a=await (0,ec.q)(e,to);let o=(0,w.xd)(a.map(e=>e.item),e=>e.name,e=>ez(e)+e.node_id),s=ts&&(0,E.kc)().ds_instance_swap_use_ai_results;if(eA){let r=tc(o).length;h.az.trackDefinedEvent("instance_swap_picker.search",{...tl,sessionId:em,searchSessionId:n,query:e,queryId:i,numResults:o.length,numFilteredResults:r,aiResultsEnabled:s,dropdownType:(0,A.Z4)(tt,eX),libraryKey:tt.type===A.iN.FILE?tt.key:void 0,isPreferredValues:S===A.Zl.PREFERRED_VALUES_PICKER})}else(0,h.sx)("Component Insert Search",{searchSessionId:n,query:e,queryId:i,numResults:o.length,aiResultsEnabled:s});return T(),o},[ts,eA,T,ta,e2,e6,r.editorType,to,tc,tl,em,tt,eX,S]),tu=i.useCallback((e,r)=>{e.preventDefault(),e.stopPropagation(),eQ(k.j7({type:e_.j,data:{component:r.item,position:{top:e.clientY,left:e.clientX}}}))},[eQ]),{validDropdownSelection:tp,validRootDrilldownItems:tm}=i.useMemo(()=>{let e=[];if(tt.type===A.iN.PREFERRED&&e5.length>0?e=e5:tt.type===A.iN.RECENT&&e8.length>0?e=e8:tt.type===A.iN.FILE&&e7.hasOwnProperty(tt.key)?e=e7[tt.key]:tt.type===A.iN.FILE&&eX===tt.key&&(e=e3),0===e.length){let e,r;if(e4)e={type:A.iN.FILE,key:e4},r=e9;else if(e5.length>0)e={type:A.iN.PREFERRED},r=e5;else if(e8.length>0)e={type:A.iN.RECENT},r=e8;else if(Object.keys(e7).length>0){let n=Object.keys(e7)[0];e={type:A.iN.FILE,key:n},r=e7[n]}else e={type:A.iN.RECENT},r=e8;return{validDropdownSelection:e,validRootDrilldownItems:r}}return{validDropdownSelection:tt,validRootDrilldownItems:e}},[tt,e5,e8,e7,eX,e3,e4,e9]),th=i.useMemo(()=>{if(l){if(e2&&te)return M?{[ez(M)]:z.O9(M,te)}:{[e2]:(0,eC.OK)(d,te)}}else{let e=M||e0;if(e&&te){let r=z.O9(e,te);return{[ez(e)]:r}}}return{}},[l,e2,te,d,M,e0]),[t_,tg]=i.useState({}),tf=i.useMemo(()=>({...th,...t_}),[th,t_]),[tE,ty]=i.useState({index:-1,parentId:null}),tb=i.useCallback(()=>ty({index:-1,parentId:null}),[]),tI=i.useCallback((e,r)=>{tb(),tp&&tp.type===A.iN.FILE&&(tg({[tp.key]:e}),eA&&h.az.trackDefinedEvent("instance_swap_picker.navigate",{...tl,sessionId:em,direction:r,path:e.join(" / "),libraryKey:tp.key,viewMode:e$?"list":"grid",isPreferredValues:S===A.Zl.PREFERRED_VALUES_PICKER}))},[tb,e$,eA,tl,S,em,tp]),tT=i.useMemo(()=>tp.type===A.iN.FILE&&tf[tp.key]||[],[tp,tf]),tv=(0,eS.b)({hideTooltips:!0}),tS=(0,W.n1)(),tw=i.useCallback(()=>{S!==A.Zl.PREFERRED_VALUES_PICKER&&(a.isShown&&a.modal?(a.returnFocusToToggle&&O?.current&&O.current.focus(),eQ(V.jD()),eQ((0,F.vq)())):S===A.Zl.RESOURCE_INSERT_MODAL&&eZ&&(eQ(G.b({seen_component_onboarding_modal:!0})),tv()))},[a,O,eQ,S,tv,eZ]),tA=i.useCallback(e=>{if(e$)return null;let r=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,ef.PI)(r)},[e$]),tN=i.useCallback(r=>{let n;tr(n=r===A.iN.PREFERRED?{type:A.iN.PREFERRED}:r===A.iN.RECENT?{type:A.iN.RECENT}:{type:A.iN.FILE,key:r}),e.searchBarRef?.current&&e.searchBarRef.current.focus(),eA?h.az.trackDefinedEvent("instance_swap_picker.library_switch",{...tl,sessionId:em,dropdownType:(0,A.Z4)(n,eX),libraryKey:n.type===A.iN.FILE?r:void 0,isPreferredValues:S===A.Zl.PREFERRED_VALUES_PICKER}):(0,h.sx)("Component Insert Library Switch",{isSearching:eh})},[e.searchBarRef,eA,tl,em,eX,S,eh]),tC=(0,en.sZ)(),tO=(0,el.Oe)(tC),tL=tt.type===A.iN.FILE?tt.key:void 0,tR=(0,Y.Fl)(),tP=i.useMemo(()=>({format:r=>r===ej?(0,R.t)("design_systems.instance_swap_picker.enabled_libraries"):r===eX?(0,R.t)("design_systems.instance_swap_picker.local_components"):r===A.iN.RECENT?eh?(0,R.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===A.Zl.RESOURCE_INSERT_MODAL?(0,R.t)("universal_insert.recents"):(0,R.t)("design_systems.instance_swap_picker.recently_used"):r===A.iN.PREFERRED?(0,R.t)("design_systems.instance_swap_picker.preferred"):eV[r]?.name??(0,ed.oA)(eK[r])??""}),[eX,eV,eK,eh,e.pickerType]),tD=i.useMemo(()=>{switch(tt.type){case A.iN.FILE:if(tt.key===eX)return"Local components";return"Subscribed libraries";case A.iN.RECENT:return"Recently used";case A.iN.PREFERRED:return"Preferred values"}},[tt,eX]),tk=i.useCallback(()=>{eQ(B.to({type:eI.T,data:{initialTab:eu.Wv.LIBRARIES,entrypoint:eb.r6.INSTANCE_SWAP_BROWSE_LIBRARIES_LINK}}))},[eQ]),tM=i.useCallback(e=>{if("LEAF"!==e.type||0===d.length)return!1;let{item:r}=e;if(tn&&!l){let e=(0,eP.Ml)(tn,Object.keys(eY));if(es.VP(eq,e))return r.node_id===tn.node_id&&(0,K.EF)(r,tn)}return d.some(e=>r.type===eu.PW.COMPONENT&&e.type===eu.PW.COMPONENT?!!r.component_key&&r.component_key===e.component_key||!r.component_key&&!e.component_key&&r.node_id===e.node_id:r.type===eu.PW.STATE_GROUP&&e.type===eu.PW.STATE_GROUP&&(!!r.key&&r.key===e.key||!r.key&&!e.key&&r.node_id===e.node_id))},[tn,eY,eq,l,d]),tF=i.useCallback(e=>{let{currentDrilldownItems:r,index:n,parentId:i}=e,a=Math.max(Math.min(tE.index,n),0),o=Math.min(Math.max(tE.index,n),r.length-1),s=r.slice(a,o+1).filter(e=>"LEAF"===e.type);c?.(s.map(e=>e.item),tM(r[n])?eC.Wu.DESELECT:eC.Wu.SELECT),ty({index:n,parentId:i})},[tM,c,tE.index]),tU=(0,Q.u)({alwaysSwap:eA,canSwap:_,itemsToSwap:g,openFileKey:eX,onSwap:n,sourceForTracking:"Instance Swap Picker"}),tB=i.useCallback((e,r,n,i,a)=>{if(!eX)return;if(l&&i){if(e.shiftKey&&-1!==tE.index&&tE.parentId===i.parentId){tF(i);return}ty({index:i.index,parentId:i.parentId})}let o=e.altKey;tn&&eQ(U.yH({key:(0,eP.Ml)(tn,Object.keys(eY))})),ti(r.item),tU(e,r.item,a?.queryId),tw();let s={aiResultsEnabled:ts&&(0,E.kc)().ds_instance_swap_use_ai_results,assetKey:(0,ei.Av)(r.item),position:i?.index,query:a?.query,queryId:a?.queryId,scoreAi:r.item.ai_score??void 0,scoreLexical:r.item.lexical_score??void 0,sessionId:em,dropdownType:(0,A.Z4)(tt,eX),fromSearch:n,libraryKey:tt.type===A.iN.FILE?tt.key:void 0,viewMode:e$?"list":"grid"},c={...tl,...s,type:r.item.type===eu.PW.COMPONENT?"component":"state_group",searchSessionId:em};if(S===A.Zl.INSTANCE_SWAP_PICKER)h.az.trackDefinedEvent("instance_swap_picker.insert_instance",c),h.az.trackDefinedEvent("asset_search.result_inserted",{...s,assetType:c.type,entryPoint:"instance-swap",fileKey:tl.fileKey,fileOrgId:tl.orgId,fileTeamId:tl.teamId,userId:tl.userId});else if(S===A.Zl.PREFERRED_VALUES_PICKER){let e=tM(r);(0,h.sx)("Preferred Values Picker Toggle Component",{...c,action:e?"deselect":"select"})}else(0,h.sx)("Component Insert Panel Insert Instance",{type:r.item.type===eu.PW.COMPONENT?"component":"state_group",fromSearch:n,altKey:o,viewMode:e$?"list":"grid",dropdownType:(0,A.Z4)(tt,eX)})},[eX,l,tn,tU,tw,tl,em,e$,tt,ts,S,tE.index,tE.parentId,tF,eQ,eY,tM]),tV=i.useRef(null),tG=i.useRef(null),tH=i.useCallback(e=>{e&&setTimeout(()=>tG.current?.focus(),0)},[]),tW=i.createElement(i.Fragment,null,i.createElement(eR.p,{id:(0,A.YU)(S),property:tp.type===A.iN.FILE?tp.key:tp.type,formatter:tP,rightIcon:i.createElement(X.P,{resourceId:tL}),onChange:tN,dispatch:eQ,dropdownShown:eB,dropdownAlignment:"left",dropdownWidth:230,openOnKeyPressed:[b.Uz.SPACE,b.Uz.ENTER],inputClassName:S===A.Zl.RESOURCE_INSERT_MODAL?ek.je:void 0,className:S===A.Zl.RESOURCE_INSERT_MODAL?ek.kc:ek.Kv,ref:tV,inputRef:tG,onDropdownHidden:tH,role:"combobox",dataTestId:"instance-swap-picker-library-select"},(()=>{function e(e){return i.createElement(eR.c,{key:e,value:e})}function n(e){return i.createElement(eR.c,{key:e,value:e,removeTextRightPadding:!0,rightSettingsIcon:i.createElement(J.t,null)})}function a(e){return i.createElement(eR.c,{key:e,value:e,removeTextRightPadding:!0,rightSettingsIcon:i.createElement($.FX,null)})}let{pass:o,fail:l}=(0,I.j)(Object.keys(e7),j.wJ),c=[];e5.length&&c.push(e(A.iN.PREFERRED));let d=(0,ee.T9)(r.project);if(e2&&e2!==eX&&!H&&!(0,ei.qB)(ex,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:e2},d)&&eV[e2]&&(c.length>0&&c.push(i.createElement(eT.sK,{key:"non-subscribed-divider"})),c.push(e(e2)),l=l.filter(e=>e!==e2)),!(0,E.kc)().dse_preset_libraries&&e2&&e2!==eX&&(0,ei.qB)(ex,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:e2},d)&&eK[e2]&&(o=o.filter(e=>e!==e2)),tO&&(0,q.NX)(tR)){let e=l.map(e=>eV[e]).filter(s.isNotNullish).map(({key:e,name:r})=>({key:e,name:r}));(0,q.k9)({libraries:e,approvedLibraryKeysByResourceType:tR}),l=e.map(({key:e})=>e)}if((eh||e8.length>0)&&(c.length>0&&c.push(i.createElement(eT.sK,{key:"recent-divider"})),c.push(e(A.iN.RECENT))),eA){for(let r of(e3.length>0&&(c.length>0&&c.push(i.createElement(eT.sK,{key:"local-divider"})),c.push(e(eX))),l.length>0&&(c.length>0&&c.push(i.createElement(eT.sK,{key:"subscribed-divider"})),!(0,E.kc)().dse_preset_libraries)&&c.push(i.createElement(eR.c,{key:ej,value:ej,disabled:!0})),l))tO&&(0,q.vR)(r)?c.push(a(r)):c.push(e(r));if(tS)for(let e of o)c.push(n(e));return c}for(let r of(e3.length>0&&c.push(e(eX)),l.length>0&&c.push(i.createElement(eT.sK,{key:"subscribed-divider"})),l))tO&&(0,q.vR)(r)?c.push(a(r)):c.push(e(r));if(tS)for(let e of o)c.push(n(e));return c})()),v),tK=i.useRef(null),tj=i.createElement("div",{className:S===A.Zl.RESOURCE_INSERT_MODAL?m()(ek.FK,ek.k2):ek._M},eN?i.createElement(i.Fragment,null,tW,i.createElement("div",{className:L.cx.ml4.$},i.createElement(eL.sX,{pickerType:S,includeFolderSetting:tp.type===A.iN.FILE&&!eh,ref:tK,sessionId:em,queryId:eh?e.queryId:void 0}))):tW),tz=i.useCallback(()=>{tr({type:A.iN.RECENT}),eA&&h.az.trackDefinedEvent("instance_swap_picker.search_all_libraries_from_empty",{...tl,sessionId:em,query:e.query,queryId:e.queryId,isPreferredValues:S===A.Zl.PREFERRED_VALUES_PICKER})},[eA,tl,S,e.query,e.queryId,em]),tY=i.createElement(eJ,{onClick:tz,type:tt.type}),t$=i.createElement("div",{className:eA?ek.y7:ek.uR,style:{height:u+(e.pickerType===A.Zl.RESOURCE_INSERT_MODAL?ew.Kr:0)}},i.createElement("div",{className:eA?ek.qv:void 0},(0,R.tx)("design_systems.instance_swap_picker.no_components")),i.createElement(N.nR,{className:eA?ek.ut:ek.oU,onClick:tk},i.createElement("div",null,i.createElement(C.B,{svg:eM.A,style:D.sx.colorIcon.$})),(0,R.tx)("design_systems.instance_swap_picker.browse_libraries"))),tq=Object.keys(e7).length>0;return i.createElement(w.uO,{recordingKey:e.recordingKey,scrollContainerHeight:u,onSearch:td,searchFilter:tc,setIsSearching:eg,onLeafItemContextMenu:tu,onLeafItemDrilldown:tB,onLeafItemDraggable:eA?void 0:{sourceForTracking:"component-insert-modal",clickToInsert:!1,afterSuccessfulInsert:tw,sectionNameForTracking:tD},rootDrilldownItems:tm,initialPath:tT,beforeItems:tj,beforeItemsRefs:[tG,tK],focusBeforeItems_DEPRECATED_UI2:()=>tV.current?.focus(),emptyState:t$,isSelectedItem:tM,multiselect:l,onMultiselectCallback:c,getBackgroundColorForLeafItemThumbnail:z.zR,getLeafItemTooltip:eA?eC.pf:void 0,getLeafItemThumbnail:eA||e$?eH:eG,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",drilldownItemsKeySupplement:tt.type===A.iN.FILE?tt.key:tt.type,getLeafItemRecordingKey:eW,getThumbnailGridLayoutForItems:tA,onDrilldownPathChange:tI,additionalRowBottomMargin:eA?w.qy:0,renderLeafItemNames:!!eA||e$,searchBarRef:e.searchBarRef,pickerToggleRef:O,extraHeightOnSearch:eA||e.pickerType===A.Zl.RESOURCE_INSERT_MODAL?0:eU,validLibrariesArePresent:tq,isLoading:p||(0,es.VP)(eq,x.fi),searchDebounceTime:e.searchDebounceTime,searchEmptyStateCTA:tY,searchBarPlaceholderText:tt.type===A.iN.PREFERRED?(0,R.t)("design_systems.instance_swap_picker.search_preferred"):tt.type===A.iN.RECENT?(0,R.t)("design_systems.instance_swap_picker.search_all_libraries"):null!=tt.key&&eV[tt.key]?(0,R.t)("design_systems.instance_swap_picker.search_filename",{filename:eV[tt.key].name}):(0,R.t)("design_systems.instance_swap_picker.search"),pickerType:e.pickerType,errorComponent:tt.type===A.iN.PREFERRED?er:void 0,query:e.query,setQuery:e.setQuery,contextValue:e.drilldownPickerContextValue,shouldUpdateServerResults:(0,ea.Wg)(ta.getState()),sessionId:em})}let e$=(0,P.fv)();function eq(e){let{multiselect:r,onMultiselectCallback:n,selectedItems:a,searchDebounceTime:s,shouldPerformSwapOnClick:l=!0,itemsToSwap:c,onSwapCallback:d,searchBarRef:u,setNumSearchesForTracking:p,scrollContainerHeight:m,pickerToggleRef:h,toggleGridViewButton:_,preferredItems:g,overrideDefaultItem:E,preferredValuesErrorComponent:y,sessionId:b,entrypointForLogging:I}=e,T=i.useRef(E).current,{instanceSwapPickerShown:v,loadingState:S,fileVersion:w,library:N}=(0,f.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState,fileVersion:e.fileVersion,library:e.library})),C=(0,o.d4)(er.tB),O=i.useMemo(()=>!!g&&eK(g),[g]),L=C?.key||null,R=e$(T),P=i.useMemo(()=>R??z.uj(a),[R,a]),D=i.useMemo(()=>{if(null==C||null==L||null===w)return!0;let e=(0,ee.T9)(C?.project);if(P&&C&&(0,ei.qB)(N,{key:C.key,team_id:C.teamId,editor_type:C.editorType,source_file_key:C.sourceFileKey},{key:P},e)&&!(0,ei.hH)(P)){let e=(0,ei.Mb)(P,w);return!es.D2(S,e)}if(O&&P&&P!==L)return es.VP(S,(0,eh._A)(L));let r=(0,eP.yD)(L);return!es.D2(S,r)},[C,L,w,O,P,N,S]),k=i.useCallback(()=>p?.(e=>e+1),[p]);return((0,eN.x)(D),(v.isShown||e.pickerType!==A.Zl.INSTANCE_SWAP_PICKER)&&L&&C)?i.createElement(eY,{openFile:C,instanceSwapPickerShown:v,multiselect:r,onMultiselectCallback:n,selectedItems:a,scrollContainerHeight:m,recordingKey:e.recordingKey,shouldPerformSwapOnClick:l,itemsToSwap:c,onSwapCallback:d,pickerToggleRef:h,searchBarRef:u,isLoadingSubscribedLibraries:D,searchDebounceTime:s,incrementNumSearchesForTracking:k,pickerType:e.pickerType,dropdownAccessory:e.pickerType===A.Zl.RESOURCE_INSERT_MODAL?_:null,preferredItems:g,preferredValuesErrorComponent:y,overrideDefaultItem:T,showPreferredSectionByDefault:O,query:e.query,setQuery:e.setQuery,drilldownPickerContextValue:e.drilldownPickerContextValue,sessionId:b,isSearching:e.isSearching,setIsSearching:e.setIsSearching,queryId:e.queryId,entrypointForLogging:I}):null}function eZ(e){let{pickerType:r,initialWidth:n,initialHeight:s,title:l,pickerToggleRef:c}=e,d=r===A.Zl.INSTANCE_SWAP_PICKER||r===A.Zl.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:u,dropdownShown:p}=(0,f.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),m=(0,o.wA)(),_=i.useRef(null),[E,y]=i.useState((0,v.g)()),b=u.isShown?new S.Mi(u.initialX,u.initialY):new S.Mi(0,0),I=i.useCallback(()=>{p?.type===(0,A.YU)(r)&&m(k.oB())},[m,p,r]),w=i.useCallback(()=>{u.isShown&&u.modal&&m((0,F.qX)({...u,modal:!1,returnFocusToToggle:!1})),_.current?.focus()},[m,u]),[N,C]=i.useState(0),O=i.useCallback(()=>{(0,h.sx)(`${d?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:N}),m((0,F.vq)())},[m,N,d]),L=i.useRef(null),R=d?320:428,{modalWidth:P}=(0,A.TQ)(r),D=(0,A.qc)(),M=i.useCallback(()=>u.isShown&&u.initialY?s||Math.min(window.innerHeight-u.initialY-20,R):R,[R,s,u]),[x,U]=i.useState(M),B=a.findDOMNode(L.current?.getEl());i.useLayoutEffect(()=>{let e=(0,g.s)(()=>{if(!B)return;let e=B.getBoundingClientRect();e.bottom>window.innerHeight&&U(x-(e.bottom-window.innerHeight)-20)},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[x,U,B]);let V=i.useRef(void 0),[G,H]=i.useState(""),[W,K]=i.useState(!1),j=i.createElement(eX,{isSwapPicker:d,searchBarRef:_,sessionId:E,queryId:W?V.current:void 0}),z=i.createElement("div",{className:ek.Hn},i.createElement("div",{className:ek.D0},l),!D&&j),Y=i.useCallback(()=>{p?.type.includes(eL.fn)&&m(k.oB())},[m,p?.type]);return i.createElement(eA.vx,{title:d?z:l,initialPosition:b,initialHeight:x,initialWidth:n??P,isCloseHidden:d&&!D,dragHeaderOnly:!0,onDragStart:I,onDragEnd:w,onClose:O,ref:L,autoflowHeight:!0,recordingKey:T.Pt(e.recordingKey,"modal"),disableHeaderBottomBorder:D,onClick:Y},i.createElement(eq,{...e,searchBarRef:_,toggleGridViewButton:j,setNumSearchesForTracking:C,scrollContainerHeight:x,pickerToggleRef:c,query:G,setQuery:H,sessionId:E,isSearching:W,setIsSearching:K,drilldownPickerContextValue:{queryId:V},queryId:V.current}))}function eX({isSwapPicker:e,isPreferredValues:r,searchBarRef:n,sessionId:a,queryId:s}){let c=(0,o.wA)(),p=eO.S.useTrackViewToggle({sessionId:a,queryId:s,isPreferredValues:!!r}),m=(0,o.d4)(e=>r?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),_=r?M.U8:M.fG,g=i.useCallback(i=>{i.stopPropagation(),c(_({isListLayout:!m})),n?.current&&n.current.focus(),e?p(!m):(0,h.sx)(`${r?"Preferred Values Picker":"Component Insert"} View Toggle`,{viewMode:m?"grid":"list"})},[c,_,m,n,e,p,r]);return i.createElement(l.K,{"aria-label":m?(0,R.t)("design_systems.instance_swap_picker.show_as_grid"):(0,R.t)("design_systems.instance_swap_picker.show_as_list"),onClick:g,recordingKey:T.Pt("toggleGridViewButton",r?"preferredValues":"instanceSwapPicker"),htmlAttributes:{onMouseDown:H.dG,"data-tooltip":m?(0,R.t)("design_systems.instance_swap_picker.show_as_grid"):(0,R.t)("design_systems.instance_swap_picker.show_as_list"),"data-tooltip-type":em.Ib.TEXT}},i.createElement(O.U,{svg:m?eF.A:ex.A},m?i.createElement(d.t,null):i.createElement(u.Z,null)))}function eJ({onClick:e,type:r}){let n=(0,A.qc)();if(r===A.iN.RECENT)return null;let a=(0,R.tx)("design_systems.instance_swap_picker.search_all_libraries");return n?i.createElement(c.$n,{onClick:e,variant:"secondary"},a):i.createElement(N.N_,{onClick:e,className:ek.nf,canFocus:!0,trusted:!0},a)}},28630:(e,r,n)=>{"use strict";n.d(r,{g:()=>p});var i=n(302245),a=n(848661),o=n(496470),s=n(234945),l=n(113916),c=n(705129);let d=e=>e.fileByKey,u=e=>e.library;function p(){return(0,i.Mz)([(e,r,n)=>r,(e,r,n)=>n,d,u],(e,r,n,i)=>{if(!r.get(e))return null;let{selectedItem:a}=(0,o.XV)(e,n,i,r);return a})}(0,i.Mz)([d,u,s.dK,l.i2],(e,r,n,i)=>{let s=null,{backingSymbolGUID:l,backingStateGroupGUID:d}=(0,c.nD)(new Set(i),n);if(d&&(0,a.hS)(d)?s=d:l&&(0,a.hS)(l)&&(s=l),!s)return null;let{selectedItem:u}=(0,o.XV)(s,e,r,n);return u})},151575:(e,r,n)=>{"use strict";n.d(r,{F:()=>I});var i=n(411855),a=n(340860),o=n(523099),s=n(587670),l=n(153234),c=n(46481),d=n(939863),u=n(696673),p=n(733169),m=n(848661),h=n(416095),_=n(498606),g=n(227795),f=n(754369),E=n(563438),y=n(313888),b=n(665150);function I(e){let{instanceAndSublayerGUIDs:r}=e,n=function(e){let r,n;let{backingSymbolGUID:l,singleBackingSymbol:c,isBackingSymbolShared:_,isBackingSymbolSoftDeleted:g,restoreType:I}=(0,f.$)(e),T=i.useMemo(()=>(0,h.yW)(c),[c]),v=(0,p.S)(T).unwrapOr(!1);if(null==l||(0,m.gl)(l))return null;let S=T&&(0,u.wJ)(T);return r=g||!c?"SYMBOL_AS_STATE"===I?(0,d.t)("design_systems.instance_panel.variant_missing"):(0,d.t)("design_systems.instance_panel.component_missing"):_?S?(0,d.t)("design_systems.instance_panel.view_library_in_community"):(0,d.t)("design_systems.instance_panel.go_to_main_component_nin_library"):(0,d.t)("design_systems.instance_panel.go_to_main_component"),n=_?S?b.A:E.A:y.A,g||!c||!_||v?{svg:n,onMouseDown:function(){l&&!(0,m.gl)(l)&&s.glU.goToSymbolOrStateGroupById(l,!0)},dataTooltip:r,disabled:g||!c,ui3Icon:S?i.createElement(a.N,null):i.createElement(o.E,null),backingSymbolGUID:l}:null}(r);return n?i.createElement(g.K0,{svg:n.svg,"data-tooltip-type":_.Ib.TEXT,onMouseDown:n.onMouseDown,"data-tooltip":n.dataTooltip,disabled:n.disabled,recordingKey:l.Pt(e,"findComponentButton",n.backingSymbolGUID)},i.createElement(c.U,{svg:n.svg},n.ui3Icon)):null}},750693:(e,r,n)=>{"use strict";n.d(r,{P$:()=>tn,Pi:()=>ti,So:()=>ts,eT:()=>e7,rM:()=>tl});var i,a=n(411855),o=n(188507),s=n(346124),l=n(485463),c=n(256296),d=n(540225),u=n(767129),p=n(416580),m=n(536825),h=n(631437),_=n(288107),g=n(243742),f=n(215122),E=n(587670),y=n(86625),b=n(118615),I=n(707458),T=n(597616),v=n(629019),S=n.n(v),w=n(539321),A=n(776250),N=n(297666),C=n(62935),O=n(794272),L=n(966712),R=(n(886653),n(153234)),P=n(522739),D=n(96328),k=n(763658),M=n(448169),F=n(192437),x=(n(946689),n(574176)),U=n(46481),B=n(939863),V=n(293017),G=n(632430),H=n(662275),W=n(411294),K=n(626783),j=n(906899),z=n(259927),Y=n(483990),$=n(775664),q=n(723081),Z=n(798099),X=n(297336),J=n(226055),Q=n(356390);n(617453);var ee=n(848661),et=n(618056),er=n(931770),en=n(555074),ei=n(869156),ea=n(318812),eo=n(335682),es=n(499777),el=n(69961),ec=n(416095),ed=n(833629),eu=n(241691),ep=n(173454),em=n(279702),eh=n(484892),e_=n(498606),eg=n(420186),ef=n(218973),eE=n(469572),ey=n(909279),eb=n(775372),eI=n(75215),eT=n(750029),ev=n(697652),eS=n(184027),ew=n(251518),eA=n(247908),eN=n(602029),eC=n(248752),eO=n(205135),eL=n(7959),eR=n(991443),eP=n(418985),eD=n(575722),ek=n(110382),eM=n(238093),eF=n(893606),ex=(n(343559),n(939791)),eU=n(781867),eB=n(807676),eV=n(533573),eG=n(158406),eH=n(712685),eW=n(875157),eK=n(117110),ej=n(107683),ez=n(872429);n(144119);var eY=n(347127),e$=n(876813),eq=n(920778),eZ=n(333483),eX=n(92385),eJ=n(424148),eQ=n(819785),e0=n(695038),e1=(n(668092),n(27921)),e2=n(874038),e3=n(953663),e6=n(641053);let e8=e=>{Q.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},e5=(e,r,n)=>{(0,L.kc)().ce_properties_panel_tracking&&(0,A.sx)("editor-paints-panel-fill-change"),Q.Y5.updateSelectionProperties({fillPaints:e},{shouldCommit:r,overwrite:n??E.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eE.a2)("fillPaints")},e7=a.memo(function(e){let{dispatch:r}=e,n=(0,ez.cJ)(),i=(0,el.o3)(el.nt.ui3ClipContentControl),o=(0,J.GS)(),s=a.useCallback((e,{fromSearch:n}={})=>{r(G.AV({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:n}))},[r]),d=(0,eM.yT)({...e,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey"});return a.createElement(F.tH,{boundaryKey:"FillPanel",fallback:F.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(k.k,{name:"fill_panel"},a.createElement("div",{className:"displayContents","data-test-id":"fill_panel"},a.createElement(eL.Zk,null,a.createElement(tt,{propertyList:e.fillPaints,onChange:e5,onApplyStyle:s,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:E.rrT.FILL,recordingKey:R.Pt(e,"paintList"),pickerInStyleCreationShown:e.pickerInStyleCreationShown,onPickerShown:()=>{(0,L.kc)().ce_properties_panel_tracking&&(0,A.sx)("editor-paints-panel-fill-color-picker-show")},variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,isUI3:e.isUI3,...(0,ew.Rz)(e),...d}),a.createElement(ev.JH,{isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},(()=>{if(e.selectionContainsFrames&&e.hasExports&&!n){if(o&&i){if(!e.fillPaints||(0,ee.hS)(e.fillPaints)&&0===e.fillPaints.length)return;return a.createElement(ex.Ad,{label:a.createElement(a.Fragment,null),input:a.createElement(l.S,{muted:!0,mixed:e.exportBackgroundDisabled===ee.oV,checked:!1===e.exportBackgroundDisabled,onChange:e8,recordingKey:R.Pt(e,"exportDisableCheckbox"),label:a.createElement(c.J,{htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":e_.Ib.TEXT}},(0,B.tx)("fullscreen.properties_panel.fill.show_in_exports")),htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":e_.Ib.TEXT}})})}return a.createElement(eL.fI,{className:eX.Kx},a.createElement(eI.t,{className:eX.kv,id:"frame-background-export-background-disabled",property:e.exportBackgroundDisabled===ee.oV?ee.oV:!e.exportBackgroundDisabled,onChange:e8,recordingKey:R.Pt(e,"exportDisableCheckbox")}),a.createElement(eL.JU,{className:eX.mH,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},(0,B.tx)("fullscreen.properties_panel.fill.show_in_exports")))}})())))))});class e4 extends a.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={showSwapButton:!1,syncState:"NONE",individualBorderOption:eb.om.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,r,n)=>{(0,L.kc)().ce_properties_panel_tracking&&(0,A.sx)("editor-paints-panel-stroke-change",{key:"color"}),Q.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:r,overwrite:n??E.WXh.ONLY_WHEN_NOT_EMPTY}),(0,eE.a2)("strokePaints")},this.onNonPaintsChange=(e,r=em.zk.YES)=>{let n=(0,ee._W)(this.props.strokePaints,[]);if(n.length>0&&!n.find(e=>e.visible)){let e=n.map(e=>({...e,visible:!0}));Q.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:em.zk.NO,overwrite:E.WXh.ONLY_WHEN_NOT_EMPTY})}Q.Y5.updateSelectionProperties(e,{shouldCommit:r}),(0,eE.a2)("strokePaints")},this.onApplyStyle=(e,{fromSearch:r}={})=>{this.props.dispatch(G.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:r}))},this.bordersAlignmentOnChange=(e,r=em.zk.YES)=>{if(this.state.individualBorderOption!==eb.om.ALL){let{strokeAlign:r}=e;(0,A.sx)("Individual Border Alignment Changed",{position:(0,ee.hS)(r)?r:"__mixed__"})}this.onNonPaintsChange(e,r)},this.forwardedRef=a.createRef(),this.toggleSettings=()=>{if(this.props.pickerShown?.id===this.settingsId)this.props.dispatch(V.XE());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,A.sx)("editor-paints-panel-advanced-stroke-show");let e=(0,eg.cn)(this.forwardedRef.current);this.props.dispatch(V.u1({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(V.Uv()),this.props.dispatch(j.sw())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.selectBorderSides=(e,r=em.zk.YES)=>{if(this.setState({individualBorderOption:e}),e===eb.om.CUSTOM)return;let n=e===eb.om.ALL,i={borderTopVisible:n||e===eb.om.TOP,borderRightVisible:n||e===eb.om.RIGHT,borderBottomVisible:n||e===eb.om.BOTTOM,borderLeftVisible:n||e===eb.om.LEFT};Q.Y5.updateSelectionProperties(i,{shouldCommit:r}),(0,eE.a2)("strokePaints")},this.nodesSupportIndividualBorders=(e,r)=>{let n=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let i of e)if(n.has(i.type)||"FRAME"===i.type&&!i.resizeToFit||"FRAME"===i.type&&r<2&&this.nodesSupportIndividualBorders(i.childrenNodes,r+1))return!0;return!1},this.supportsIndividualBorders=()=>{if(!this.props.numSelectedByType)return!1;if((0,X.vx)(this.props.numSelectedByType,"RECTANGLE")||(0,X.vx)(this.props.numSelectedByType,"ROUNDED_RECTANGLE")||(0,X.vx)(this.props.numSelectedByType,"SYMBOL")||(0,X.vx)(this.props.numSelectedByType,"INSTANCE"))return!0;if((0,X.vx)(this.props.numSelectedByType,"FRAME")){let e=Object.keys(this.props.sceneGraphSelection).map(I.q.instance.get).filter(e=>!!e);return this.nodesSupportIndividualBorders(e,0)}return!1},this.onBidirectionalEndpointRowMouseEnter=e=>{this.stopPropagation(e),this.props.leftEndCap&&this.props.rightEndCap&&(0,ee.hS)(this.props.leftEndCap)&&(0,ee.hS)(this.props.rightEndCap)&&this.props.leftEndCap!==this.props.rightEndCap&&this.setState({showSwapButton:!0})},this.onBidirectionalEndpointRowMouseLeave=e=>{this.stopPropagation(e),this.hideSwapButton()},this.hideSwapButton=()=>{this.setState({showSwapButton:!1})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:eb.om.ALL})}}render(){let e=(0,eM.yT)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,eM.A8)(e.inheritStyleKey),n=!(this.props.numSelectedByType&&(0,X.vx)(this.props.numSelectedByType,"TABLE"))&&(r||(0,ee._W)(this.props.strokePaints,[]).length>0||this.props.strokePaints===ee.oV),i=this.props.pickerShown?.id===this.settingsId,o=2===this.props.strokePanelTerminalPointCount&&this.props.strokePanelMode!==E.yTM.WASHI_TAPE,s=this.props.strokePanelMode!==E.yTM.WASHI_TAPE,l=this.supportsIndividualBorders();return a.createElement(k.k,{name:"stroke_panel"},a.createElement(eL.Zk,{"data-testid":"stroke-panel-id"},a.createElement(te,{propertyList:this.props.strokePaints,selectedPropertyType:E.rrT.STROKE,onChange:this.onPaintsChange,onApplyStyle:this.onApplyStyle,currentSelectedProperty:this.props.currentSelectedProperty,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:R.Pt(this.props,"paintList"),onPickerShown:()=>{(0,L.kc)().ce_properties_panel_tracking&&(0,A.sx)("editor-paints-panel-stroke-color-picker-show")},variableScopes:new Set([E.j0r.STROKE]),...(0,ew.Rz)(this.props),...e,onToggleListLayout:this.toggleSettings,onToggleAdvancedSettings:n&&s?this.toggleSettings:void 0,advancedSettingsTooltip:(0,B.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom}),n&&a.createElement(e$.t,{forwardedRef:this.forwardedRef,borderSharedWeight:this.props.borderSharedWeight,maxStrokeWeight:this.props.maxStrokeWeight,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,terminalCap:this.props.terminalCap,strokeJoin:this.props.strokeJoin,arcRadius:this.props.arcRadius,arcSweep:this.props.arcSweep,connectorLineStyle:this.props.connectorLineStyle,miterLimitAngle:this.props.miterLimitAngle,onNonPaintsChange:this.onNonPaintsChange,numSelectedByType:this.props.numSelectedByType,updateSyncState:this.updateSyncState,hideSwapButton:this.hideSwapButton,syncState:this.state.syncState,showSwapButton:this.state.showSwapButton,selectBorderSides:this.selectBorderSides,setIndividualBorderOption:this.setIndividualBorderOption,onBordersAlignmentChange:this.bordersAlignmentOnChange,onBidirectionalEndpointRowMouseEnter:this.onBidirectionalEndpointRowMouseEnter,onBidirectionalEndpointRowMouseLeave:this.onBidirectionalEndpointRowMouseLeave,showAdvancedStrokeSettings:s,showIndividualBorderControls:l,showEndPointControls:o,showStrokePicker:i,strokePanelMode:this.props.strokePanelMode,individualBorderOption:this.state.individualBorderOption,toggleSettings:this.toggleSettings,stopPropagation:this.stopPropagation,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,leftEndCap:this.props.leftEndCap,rightEndCap:this.props.rightEndCap,dashPattern:this.props.dashPattern,dashCap:this.props.dashCap})))}}function e9({title:e,propertyList:r,onChange:n,onApplyStyle:i,addProperty:s,overrideAddPropertyTooltip:l,onReorder:c,renderProperty:d,onDeleteProperty:u,onToggleListLayout:p,styleType:m,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,removeAllProperties:y,library:b,defaultColor:I,openFile:T,stylePickerShown:v,currentSelectedProperty:S,selectedPropertyType:w,modalShown:A,sceneGraphSelection:N,selectedStyleProperties:C,recordingKey:O,onToggleAdvancedSettings:L,advancedSettingsTooltip:P,isPanelBodyCollapsedAtom:D}){let k=(0,o.wA)(),M=(0,es.Xo)(),F=(0,ea.Um)(),x=!!a.useContext(eS.zK),U=x?`style-modal-${(0,eG.qj)(_)}`:(0,eG.qj)(_),B=(0,eM.WH)(h,g,m),G=(0,ek.AH)(B?.key??null,(0,ee.E7)(g)),H=B?.isLocal?B:G?.status==="loaded"?G.data:null,W=function(){let e=(0,ei.Rb)(),r=(0,ei.Pt)(),n=e.length>0,i=Object.keys(r).length>0;return n||i}(),K=r&&(0,ee.hS)(r)&&(r.length>1||r.some(e=>!(0,et.sb)(e.type)))?"createStyle":W?"createVariable":"createStyle",j=a.useCallback(()=>M&&M.id===U?M:null,[M,U]),z=a.useCallback(({initialX:e,initialY:r})=>{j()?k(V.XE()):k(V.u1({id:U,initialX:e,initialY:r}))},[k,U,j]),Y=a.useCallback(e=>{z(e)},[z]),$=a.useCallback((e,r)=>{n([e],r,E.WXh.ONLY_WHEN_NOT_DISABLED)},[n]),q=(0,en.kl)("numSelectedByType"),Z=(0,ev.y5)(D||null),X=a.useCallback(()=>{s(),Z()},[s,Z]),J=a.useMemo(()=>{if(q)return(0,eW.aZ)(w,q)},[w,q]);return a.createElement(a.Fragment,null,a.createElement(eC.Kx,{title:e,propertyList:r,onChange:n,addProperty:X,overrideAddPropertyTooltip:l,renderProperty:d,onDeleteProperty:u,onReorder:c,removeAllProperties:y,currentSelectedProperty:S,selectedPropertyType:w,recordingKey:O,dropdownShown:F,openFile:T,library:b,modalShown:A,pickerShown:M,sceneGraphSelection:N,selectedStyleProperties:C,stylePickerShown:v,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,styleType:m,onToggleListLayout:p,onPickerIconClick:Y,dispatch:k,onToggleAdvancedSettings:L,advancedSettingsTooltip:P,isPanelBodyCollapsedAtom:D}),(()=>{let e=j();if(!e)return;let n=r&&(0,ee.hS)(r)&&1===r.length?r[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return a.createElement(ew.ku,{paint:n,paintId:(0,eM.OS)(_),selectedStyle:H,inheritStyleKeyField:_,onChange:$,onApplyStyle:x?void 0:i,pickerShown:e,defaultColor:I,dropdownShown:F,initialView:"library",supportedViews:["library"],initialCreationModalView:K,recordingKey:R.Pt(O,"paintPicker"),variableScopes:J,hasVisiblePaintBelow:!1,isInStyleModal:x})})())}function te(e){let{version:r}=(0,g.DP)();return"ui3"!==r?a.createElement(tt,{...e,isUI3:!1}):a.createElement(tt,{...e,isUI3:!0})}e4.displayName="StrokePanel";class tt extends a.PureComponent{constructor(){super(...arguments),this.context=null,this.addProperty=()=>{let e=(0,eM.dd)(this.props.selectedStyleProperties);switch(this.props.selectedPropertyType){case E.rrT.STROKE:e||((0,eE.a2)("strokePaints"),Q.Y5.triggerActionInUserEditScope("add-stroke-to-selection"));break;case E.rrT.FILL:e?Q.Y5.triggerActionInUserEditScope("add-fill-to-style-selection"):Q.Y5.triggerActionInUserEditScope("add-fill-to-selection"),(0,eE.a2)("fillPaints")}},this.removeProperty=e=>{this.isInStyleModal()||this.props.dispatch(V.XE()),this.props.dispatch(V.Uv());let r=(0,ee._W)(this.props.propertyList,[]).filter((r,n)=>n!==e);this.props.onChange(r),Q.Y5.deselectProperty()},this.title=()=>{switch(this.props.selectedPropertyType){case E.rrT.STROKE:return(0,B.t)("fullscreen.properties_panel.fill.stroke");case E.rrT.FILL:return(0,B.t)("fullscreen.properties_panel.fill.fill");default:return""}},this.getUI3AddPropertyTooltip=()=>{if(!this.props.isUI3)return;let e=(0,ee._W)(this.props.propertyList,[]);switch(this.props.selectedPropertyType){case E.rrT.STROKE:return 0===e.length?(0,B.t)("fullscreen.properties_panel.section_stroke.tooltip_addStroke"):(0,B.t)("fullscreen.properties_panel.section_stroke.tooltip_addStrokeFill");case E.rrT.FILL:return(0,B.t)("fullscreen.properties_panel.section_fill.tooltip_addFill");default:return}},this.onChange=(e,r,n)=>{this.props.onChange(e,r,n),(0,ee._W)(this.props.propertyList,[]).length!==e.length&&et.Tm.clearCache()},this.onReorder=()=>{et.Tm.clearCache()},this.toggleListLayout=()=>{this.props.dispatch(V.Y({isListLayout:!this.props.stylePickerListLayout})),this.props.dispatch(j.sw())},this.renderProperty=(e,r,n,i,o,s,l,c,d)=>{let u=this.isInStyleModal()?"preview-paint":"paint",p=et.Tm.getId(r,this.props.selectedPropertyType,u),m=(0,ee._W)(this.props.propertyList,[]).slice(0,r).some(e=>e.visible);return a.createElement(tr,{key:`paint-${r}`,id:p,inheritStyleKeyField:this.props.inheritStyleKeyField,index:r,singletonRow:(0,ee._W)(this.props.propertyList,[]).length<=1,selectedPropertyType:this.props.selectedPropertyType,paint:e,selected:this.props.stylePickerShown.isShown?this.props.pickerShown?.id===p:n,isDragging:i,hasFocus:o,stylePickerShown:this.props.stylePickerShown,onPickerShown:this.props.onPickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,onChange:s,onMouseDown:l,onMouseMove:c,onMouseUp:d,onRemovePaint:this.removeProperty.bind(this,r),onApplyStyle:this.props.onApplyStyle,recordingKey:R.Pt(this.props,r),variableScopes:this.props.variableScopes,isUI3:this.props.isUI3,hasVisiblePaintBelow:m,...(0,ew.Rz)(this.props)})}}isInStyleModal(){return null!=this.context}render(){let e=this.getUI3AddPropertyTooltip();return a.createElement(e9,{title:this.title(),propertyList:this.props.propertyList,onChange:this.onChange,currentSelectedProperty:this.props.currentSelectedProperty,selectedPropertyType:this.props.selectedPropertyType,addProperty:this.addProperty,overrideAddPropertyTooltip:e,renderProperty:this.renderProperty,pickerShown:this.props.pickerShown,onReorder:this.onReorder,recordingKey:this.props.recordingKey,...(0,eM.yT)(this.props),onToggleListLayout:this.toggleListLayout,library:this.props.library,defaultColor:this.props.defaultColor,onApplyStyle:this.props.onApplyStyle,onToggleAdvancedSettings:this.props.isUI3?this.props.onToggleAdvancedSettings:void 0,advancedSettingsTooltip:this.props.isUI3?this.props.advancedSettingsTooltip:void 0,isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom})}}tt.displayName="PaintList",tt.contextType=eS.zK;class tr extends a.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=a.createRef(),this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,r)=>{e.visible=!0,this.props.onChange(e,r)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>this.isInStyleModal()?this.props.pickerInStyleCreationShown?.id===this.props.id?this.props.pickerInStyleCreationShown:null:this.props.pickerShown?.id===this.props.id?this.props.pickerShown:null,this.showPicker=()=>{if(!this.row.current)return;let e=(0,eg.cn)(this.row.current);this.props.onPickerShown?.(),Q.Y5.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,W.D)({id:this.props.id,initialX:e.x,initialY:e.y})):this.props.dispatch(V.u1({id:this.props.id,initialX:e.x,initialY:e.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch(j.sw()),this.props.dispatch(V.Uv()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,W.w)()):this.props.dispatch(V.XE()),Q.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,ee.E7)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let r=(0,ee.E7)(this.props.paint);if(!r)return;let n=Q.Y5.fileArrayToString;if(n){let i=n(Array.from(e.files));E.glU.dropImageOnPaintThumbnail(r.blendMode||"NORMAL",r.opacity||1,i,this.props.index,this.props.selectedPropertyType)}},this.dropImageOnPaintThumbnail=(e,r,n)=>{let i=Q.Y5.fileArrayToString;if(i){let a=i(Array.from(n.files));E.glU.dropImageOnPaintThumbnail(e,r,a,this.props.index,this.props.selectedPropertyType)}},this.updateStillImageAndSelectionPropertiesForGIF=(e,r)=>y.l7.user("update-gif-image",()=>(0,er.SK)(e,r,this.props.selectedPropertyType)),this.onDetachVariableClick=()=>{(0,ey.f)(E.VD3.VARIABLE_DETACH,()=>{let e=(0,eB.y)(this.props.paint);this.onPaintPickerChange(e,em.zk.YES)})}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||(Q.Y5.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),Q.Y5.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||(Q.Y5.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),Q.Y5.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}hasBoundColorVariable(){return!!this.props.paint.colorVar}render(){let e=this.renderButtons();return a.createElement("div",null,a.createElement(M.Y,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:R.Pt(this.props,"dropTarget")},a.createElement(P.D8,{recordingKey:R.Pt(this.props,"dragTarget")},a.createElement(ti,{ref:this.row,id:this.props.id,paint:this.props.paint,firstIconButton:e.length>0?e[0]:null,secondIconButton:e.length>1?e[1]:null,shownPickerMatchesThisPaint:!!this.pickerShown(),togglePicker:this.togglePicker,isDragHover:this.state.isDragHover,onChange:this.props.onChange,selected:this.props.selected,singletonRow:this.props.singletonRow,isDragging:this.props.isDragging,hasFocus:this.props.hasFocus,noBorderOnFocus:this.props.noBorderOnFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,isUI3:this.props.isUI3,...(0,ew.Rz)(this.props)}))),this.pickerShown()&&a.createElement(ew.ku,{paint:this.props.paint,paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:this.props.inheritStyleKeyField,dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail,updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF,onChange:this.onPaintPickerChange,onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onClose:this.hidePicker,recordingKey:R.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.pickerShown(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:this.props.hasVisiblePaintBelow,isInStyleModal:this.isInStyleModal()}))}renderButtons(){let e=[],r=this.props.isUI3?this.props.selected&&this.props.hasFocus:void 0;if(this.props.hideVisibilityToggle||this.hasBoundColorVariable()||e.push({button:a.createElement(eU.B,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:R.Pt(this.props,"visibleToggle"),selected:r}),opensPicker:!1,key:"visibleToggle"}),this.hasBoundColorVariable()&&e.push({button:a.createElement("span",{className:eX.zm},a.createElement(d.T,{selected:r},a.createElement(u.K,{"aria-label":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:R.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:Z.dG,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(U.U,{svg:eJ.A},a.createElement(p.U,null))))),opensPicker:!1,key:"detatchVariableButton"}),this.props.onRemovePaint){let n=this.props.isUI3?{"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.remove")}:{};e.push({button:a.createElement(d.T,{selected:r},a.createElement(u.K,{recordingKey:R.Pt(this.props,"removeButton"),onClick:this.props.onRemovePaint,"aria-label":(0,B.t)("fullscreen.properties_panel.fill.remove"),htmlAttributes:{...n,onMouseDown:Z.dG}},a.createElement(U.U,{svg:eQ.A,fallbackSvg:e0.A},a.createElement(m.O,null)))),opensPicker:!1,key:"removeButton"})}return e}}function tn({children:e}){return a.createElement("div",{onFocus:e=>e.stopPropagation()},e)}tr.displayName="PaintListItem",tr.contextType=eS.zK;let ti=a.forwardRef((e,r)=>{let n=r=>{r.stopPropagation(),e.togglePicker()},i=()=>{e.onFocus?.(),e.shownPickerMatchesThisPaint&&e.togglePicker()};(0,a.useEffect)(()=>()=>{e.onInputBlur&&e.onInputBlur()},[]);let o=(()=>{let r=e.paint.colorVar?.value?.alias;return r?T.dI(r):null})(),s=e.firstIconButton?a.createElement(to,{opensPicker:e.firstIconButton.opensPicker,componentKey:e.firstIconButton.key},e.firstIconButton.button):null,l=e.secondIconButton?a.createElement(to,{opensPicker:e.secondIconButton.opensPicker,componentKey:e.secondIconButton.key},e.secondIconButton.button):null,c=e.selected&&!e.hasFocus,d=e.fitToSize?eX.Cv:eX.BT,u=e.fitToSize?eX.np:eX.wM,p=a.createElement(a.Fragment,null,a.createElement("div",{className:S()(o?d:u,{[eX.NI]:e.selected,[eX.L3]:c}),onMouseDown:n,onMouseDownCapture:r=>{if(r.shiftKey||2&r.buttons){e.togglePicker(),r.preventDefault(),r.stopPropagation();return}},onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},o?a.createElement(eK.y,{isSelected:e.selected&&e.hasFocus},a.createElement(tl,{selected:e.selected,hasFocus:e.hasFocus,variableId:o,paint:e.paint,onMouseDown:n,recordingKey:e.recordingKey})):a.createElement(ta,{clearPaintFromCache:()=>et.Tm.clearCache(e.id),onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,allowAutoAndMixed:e.allowAutoAndMixed,disableOpacity:e.disableOpacity,togglePicker:e.togglePicker,chitOverride:e.chitOverride,recordingKey:e.recordingKey}))),m=a.createElement("div",{className:eX.RK,"data-onboarding-key":(0,ed.Lh)(ed.D8.PAINT_PANEL_ROW,e.id)},p,a.createElement("div",{className:eX.$r},s,l));if(e.preventDragging)return e.isUI3?a.createElement(ex.pG,{ref:r,appendedClassName:S()(eX.p,{[eX.Tp]:e.isDragHover,[eZ.CZ]:e.selected,[eZ.kR]:c}),input:p,leftIcon:s,rightIcon:l,onFocus:i,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp}):a.createElement(eL.fI,{forwardedRef:r,className:e.isDragHover?`${eX.Tp} ${eX.p}`:eX.p,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,onFocus:i,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},m);if(e.isUI3){let n=S()(eX.p,{[eX.Tp]:e.isDragHover,[eZ.CZ]:e.selected,[eZ.kR]:e.selected&&!e.hasFocus});return a.createElement(ex.Y9,{singletonRow:e.singletonRow,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,dragging:e.isDragging,onFocus:i,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,ref:r},null===s||null===l?a.createElement(ex.DE,{appendedClassName:n,input:p,icon:s||l,label:null}):a.createElement(ex.pG,{appendedClassName:n,input:p,leftIcon:s,rightIcon:l}))}return a.createElement(eN.e,{forwardedRef:r,className:e.isDragHover?`${eX.Tp} ${eX.p}`:eX.p,shiftGrabberOnInputFocus:!0,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow,dragging:e.isDragging,onFocus:i,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},m)});function ta(e){let r=(0,eF.R)(),n=r=>{r.stopPropagation(),e.togglePicker()},i=(r,n=!0)=>{r.visible=!0,e.onChange(r),n&&e.clearPaintFromCache?.()},l=S()({[eX.EC]:!e.paint.visible||e.disableOpacity}),c=(0,o.wA)(),d=e.chitOverride?e.chitOverride:{paint:e.paint};return a.createElement(a.Fragment,null,a.createElement(tn,null,a.createElement(eT.J,{...d,onMouseDown:n,recordingKey:R.Pt(e,"chit"),className:eX.x7})),a.createElement(ts,{...e,isUI3:r,onFocus:e.onInputFocus,onBlur:e.onInputBlur,visible:e.paint.visible,onTypeMouseDown:n,onMouseDown:Z.dG,onColorChange:r=>{let n={...e.paint,color:r};(0,s.areClose)(r.a,e.paint.opacity??1)||(n.opacity=r.a,n.visible=!0),i(n)},recordingKey:R.Pt(e,"value"),noBorderOnFocus:!0}),(!e.allowAutoAndMixed||!(0,ee.SX)(e.paint.color)&&!(0,ee.gl)(e.paint.color))&&a.createElement(ef.Pd,{inputClassName:l,className:eX.n1,onFocus:e.onInputFocus,onBlur:e.onInputBlur,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,value:e.paint.opacity,onValueChange:(r,n)=>{e.onChange({...e.paint,opacity:r,visible:!0},n)},dispatch:c,noLeftBorder:!0,noBorderOnFocus:!0,onMouseDown:Z.dG,recordingKey:R.Pt(e,"opacity")}))}function to(e){return e.opensPicker?a.createElement(tn,{key:e.componentKey},e.children):a.createElement(a.Fragment,{key:e.componentKey},e.children)}function ts(e){let r=(0,a.useMemo)(()=>e.allowAutoAndMixed?new $.C1({parseAlpha:!0}):new $.rC({parseAlpha:!0}),[e.allowAutoAndMixed]),n=(0,a.useMemo)(()=>new q.ZB(()=>e.paint),[e.paint]),i=(0,a.useMemo)(()=>e.allowAutoAndMixed&&((0,ee.SX)(e.paint.color)||(0,ee.gl)(e.paint.color))?e.paint.color:e.paint.color&&{...e.paint.color,a:e.paint.opacity??1},[e.allowAutoAndMixed,e.paint]),o=R.rf(e.recordingKey,"mousedown",r=>{e.onMouseDown?.(r),e.onTypeMouseDown?.(r)});return"SOLID"===e.paint.type?a.createElement(eO.AN,{forwardedRef:e.focusableRef,className:S()(e.visible?eX.EX:eX.wh,e.appendedColorInputClassname),onFocus:e.onFocus,onBlur:e.onBlur,noLeftBorder:!1,squareRightBorder:!1,formatter:r,property:i,onChange:e.onColorChange,onMouseDown:e.onMouseDown,recordingKey:R.Pt(e,"colorInput"),noBorderOnFocus:e.noBorderOnFocus}):a.createElement("div",{className:e.visible?eX.cD:eX.GI,onMouseDown:o},n.format(e.paint.type))}function tl({variableId:e,paint:r,onMouseDown:n,recordingKey:i,selected:o,hasFocus:s}){let l=(0,ei.u)(e),c=l?.name??"",d=!!l&&(0,eV.eF)(l),{version:u}=(0,g.DP)(),p=d?null:a.createElement(tn,null,a.createElement(eT.J,{paint:r,onMouseDown:n,recordingKey:R.Pt(i,"chit"),className:"ui3"===u?void 0:eX.x7}));if("ui3"===u)return a.createElement(tc,{selected:o,hasFocus:s,styleIcon:p||a.createElement("div",{"data-tooltip-type":e_.Ib.TEXT,"data-tooltip":(0,B.t)("variables.variable_was_deleted")},a.createElement(x.B,{className:eX.Bx,svg:e6.A})),styleName:c});let m=r.color&&r.opacity?`${(0,w.colorToHex)(r.color)}, ${(100*r.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:void 0;return a.createElement(a.Fragment,null,p,a.createElement("div",{className:eX.eV},a.createElement(eH.w,{isDeleted:d,text:c,variableDescription:l?.description,variableValue:m})))}function tc(e){let{styleIcon:r,styleName:n,selected:i,hasFocus:o,...s}=e;return a.createElement(P.GG,{...s,className:S()(eq.W1,{[eq.C_]:i&&!o,[eq.wH]:i&&o})},a.createElement("div",{className:eq.hg},r),a.createElement("div",{className:eq.p3},n))}ti.displayName="Paint",(e=>{class r extends a.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=a.createRef(),this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch(K.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>this.props.pickerShown?.id===this.pickerID(),this.showPicker=()=>{if(!this.row.current)return;let e=(0,eg.cn)(this.row.current);this.props.dispatch(V.u1({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch(j.sw()),this.props.dispatch(V.Uv()),this.props.dispatch(K.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(V.XE()),Q.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row.current&&this.props.showPicker(this.stylePickerID(),this.row.current)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,b.GP)(this.props.paint),r=E.Osy.paintDataNodesInPaint(e);this.props.dispatch(H.to({type:ej.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let r=E.Osy.paintDataNodesInPaint((0,b.GP)(this.props.paint));this.props.dispatch(G.nh({style:e,callback:e=>{if(r.length>1)this.props.dispatch(H.to({type:ej.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let r=(0,b.GP)(this.props.paint);y.l7.user("apply-style",()=>E.Osy.applyStyleToPaintDatas(r,e)),(0,A.sx)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,N.s)(e=>{(0,A.sx)("Edit Selection Paint",{fileKey:this.props.openFile?.key||"",count:this.props.count})}),this.onChangeForPaint=(e,r)=>{let n=r==em.zk.YES,i=(0,eA.U2)(e)||e.colorVar?E.Osy.resolvePaintWithVariable((0,b.GP)(this.props.paint),(0,b.GP)(e)):"",a=e;if(i){let r=(0,eh.K)(i);a=r?.paint||e}y.l7.user("change-paint",()=>E.Osy.updatePaint((0,b.GP)(this.props.paint),(0,b.GP)(a),n,(0,b.GP)(this.currentPaintValue()))),this.setState({paintValueInPicker:a}),this.props.dispatch(K.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,r)=>{this.onChangeForPaint(e,r),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,N.s)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{(0,ey.f)(E.VD3.VARIABLE_DETACH,()=>{let e=(0,eB.y)(this.props.paint);this.onChangeForPaint(e,em.zk.YES)})},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,b.GP)(this.props.paint);E.Osy.selectOnlySamePaint(e),(0,A.sx)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{let e=this.props.paint.colorVar?.value?.alias;return e?T.dI(e):null}}pickerID(){return`${z.F7}-${this.props.id}`}stylePickerID(){return`${z.yJ}-${this.props.id}`}componentDidMount(){this.props.openPickerOnInitialRender&&this.showPicker()}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let r=this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,n=this.renderButtons();return a.createElement("div",{onMouseOver:this.onMouseOver},a.createElement(ti,{ref:this.row,id:this.props.id,paint:this.currentPaintValue(),firstIconButton:n.length>0?n[0]:null,secondIconButton:n.length>1?n[1]:null,count:this.props.count,uniqueNodesCount:this.props.uniqueNodesCount,recordingKey:R.Pt(this.props,"paint"),onFocus:this.onFocus,onChange:this.onChangeForPaint,onInputFocus:this.props.onInputFocus,onInputBlur:this.props.onInputBlur,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,selected:this.pickerShown()||this.pickerShownIsStylePicker(),singletonRow:!1,isDragging:!1,hasFocus:!1,shownPickerMatchesThisPaint:this.pickerShown(),togglePicker:this.onPaintClick,isDragHover:!1,preventDragging:!0,isUI3:this.props.isUI3,focusableRef:this.props.focusableRef,...(0,ew.Rz)(this.props)}),this.pickerShown()&&this.props.pickerShown&&(this.props.customColorPicker?a.createElement(this.props.customColorPicker,{paint:this.currentPaintValue(),onChange:r,onClose:this.hidePicker,pickerShown:this.props.pickerShown,hideCustomColorPickerFillTypeToggle:this.props.hideCustomColorPickerFillTypeToggle??!1}):a.createElement(ew.ku,{paint:this.currentPaintValue(),paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:"inheritFillStyleKey",onChange:r,onApplyStyle:this.onApplyStyle,keepOpenOnItemSelect:!0,disableImagePaints:!0,recordingKey:R.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,initialView:this.paintPickerInitialView,initialStyleCreationPaint:this.currentPaintValue(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:!1,isInStyleModal:!1})),this.state.hasEverHovered&&a.createElement(eP.M,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&a.createElement(eP.U,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:R.Pt(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];if(this.boundColorVariableId())e.push({button:a.createElement("span",{className:eX.zm},a.createElement(u.K,{"aria-label":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:R.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:Z.dG,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(U.U,{svg:eJ.A},a.createElement(p.U,null)))),opensPicker:!1,key:"detatchVariableButton"});else{let r=(0,eY.f)(this.props.openFile?.editorType??null);e.push({button:a.createElement("span",{className:eX.zm},a.createElement(u.K,{"aria-label":r?(0,B.t)("slides.properties_panel.color_picker.theme_colors"):(0,Y.A)("style"),onClick:this.onStyleClick,recordingKey:R.Pt(this.props,"paint","styleButton"),htmlAttributes:{"data-tooltip":r?(0,B.t)("slides.properties_panel.color_picker.theme_colors"):"style","data-tooltip-type":r?e_.Ib.TEXT:e_.Ib.LOOKUP}},a.createElement(U.U,{svg:e1.A,fallbackSvg:e2.A},a.createElement(_.y,null)))),opensPicker:!0,key:"styleButton"})}return null==this.props.uniqueNodesCount||this.props.hideSelectSamePaintButton||e.push({button:a.createElement("span",{className:eX.zm},a.createElement(u.K,{onClick:this.onSelectSamePaintMouseDown,"aria-label":(0,B.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:R.Pt(this.props,"paint","selectSamePaintButton"),htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"data-tooltip-type":e_.Ib.TEXT}},a.createElement(U.U,{svg:e3.A},a.createElement(h.A,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}r.displayName="SelectionPaintItem",e.SelectionPaintItem=r,e.ConnectedSelectionPaintItem=(0,o.Ng)((e,r)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId==r.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(r,n)=>{let{top:i,left:a}=n.getBoundingClientRect(),[o,s]=[a-eD.N2,i];e(V.bS({id:r,initialX:o,initialY:s,modal:!0})),e(j.sw()),e(V.XE())},setPickerListLayout:r=>{e(V.Y({isListLayout:r}))}}))(r)})(i||(i={})),i.ConnectedSelectionPaintItem,R.o6},766022:(e,r,n)=>{"use strict";n.d(r,{B8:()=>G,gc:()=>K,tC:()=>W,w5:()=>H});var i,a,o,s,l=n(411855),c=n(188507),d=n(634832),u=n(243742),p=n(201706),m=n(587670),h=n(91408),_=n(794272),g=n(374626),f=n(886653),E=n(153234),y=n(617453),b=n(425805),I=n(848661),T=n(618056),v=n(869156),S=n(100197);n(284321);var w=n(234945),A=n(224690),N=n(666258),C=n(168289),O=n(238093),L=n(609572),R=n(564092),P=n(184027),D=n(297156),k=n(121534),M=n(750693),F=n(993012),x=n(176019),U=n(860168);(0,h.hG)(U.wQn);let B=(e,r)=>e?E.Pt(e,r):r;var V=(e=>(e[e.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",e[e.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",e[e.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",e))(V||{});(i||(i={})).ConnectedFillPanel=(0,c.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,mirrorSelectionProperties:e.mirror.selectionProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{version:n}=(0,u.DP)();return l.createElement(M.eT,{key:e.key,selectionProperties:e.selectionProperties,fillPaints:e.selectionProperties.fillPaints,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentSelectedProperty:e.currentSelectedProperty,currentSelectedGradientStop:e.currentSelectedGradientStop,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,currentTool:e.currentTool,colorFormat:r,editModeType:e.activeCanvasEditModeType,defaultColor:T.rC,inheritStyleKey:e.selectionProperties.inheritFillStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForFill||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:B(e.recordingKey,"fillPanel"),selectionContainsFrames:(0,b.Fx)(e.mirrorSelectionProperties),hasExports:!!e.selectionProperties.exportSettings&&(0,I._W)(e.selectionProperties.exportSettings,[]).length>0,exportBackgroundDisabled:e.selectionProperties.exportBackgroundDisabled,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:null,isUI3:"ui3"===n})});let G=i.ConnectedFillPanel;(a||(a={})).ConnectedEffectsPanel=(0,c.Ng)(e=>({library:e.library,selectedStyleProperties:e.mirror.selectedStyleProperties,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=e.selectedStyleProperties&&!!e.selectedStyleProperties.guid,{smallNudgeAmount:n,bigNudgeAmount:i}=(0,y.sT)(),{version:a}=(0,u.DP)();return l.createElement(D.F,{key:"effects",stylePickerShown:e.stylePickerShown,effects:e.selectionProperties.effects||[],inheritStyleKey:e.selectionProperties.inheritEffectStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForEffect||null,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentSelectedProperty:e.currentSelectedProperty,smallNudgeAmount:n,bigNudgeAmount:i,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:B(e.recordingKey,"effectsPanel"),selectionContainsOnlySpreadEligibleNodes:!!e.selectionProperties.containsOnlySpreadEligibleNodes||r,selectionContainsAnyKnockoutShadowEligibleNodes:!!e.selectionProperties.containsAnyKnockoutShadowEligibleNodes||r,framelikeWithoutFills:!!e.selectionProperties.framelikeWithoutFills,framelikeWithoutClipping:!!e.selectionProperties.framelikeWithoutClipping,isUI3:"ui3"===a})});let H=a.ConnectedEffectsPanel;(o||(o={})).ConnectedGridsPanel=(0,c.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{smallNudgeAmount:n,bigNudgeAmount:i}=(0,y.sT)(),a=(0,S.J2)(m.Ez5.editorPreferences().showFrameGrids);return l.createElement(k.S,{key:"grids",stylePickerShown:e.stylePickerShown,layoutGrids:e.selectionProperties.layoutGrids,smallNudgeAmount:n,bigNudgeAmount:i,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentTool:e.currentTool,colorFormat:r,showFrameGrids:a,editModeType:e.activeCanvasEditModeType,inheritStyleKey:e.selectionProperties.inheritGridStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForGrid||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:B(e.recordingKey,"gridsPanel")})});let W=o.ConnectedGridsPanel;(e=>{let r=(0,A.Tn)(),n=(0,f.xx)(x.N1);e.ConnectedTypePanel=(0,c.Ng)(e=>({library:e.library,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion}),null,(e,r,i)=>({...e,...i,...r,openTypeFeatures:n(i.selectionProperties.availableOTFeaturesForSelection,i.selectionProperties.availableOTFeaturesForFonts,i.selectionProperties.toggledOnOTFeaturesForSelection,i.selectionProperties.toggledOffOTFeaturesForSelection,i.selectionProperties.mixedStateOTFeaturesForSelection,e.selectedStyleProperties.guid)}))(function(e){let n=l.useContext(P.zK),i=(0,S.J2)(m.Ez5.propertiesPanelState().enabledTypePanelControls),a=null!=n;(0,d.assertDev)(null!=e.selectionProperties.fontFamily,"TypePanel missing fontFamily"),(0,d.assertDev)(null!=e.selectionProperties.fontStyle,"TypePanel missing fontStyle"),(0,d.assertDev)(null!=e.selectionProperties.fontSize,"TypePanel missing fontSize"),(0,d.assertDev)(a||null!=e.selectionProperties.textLineType,"TypePanel missing textLineType"),(0,d.assertDev)(a||null!=e.selectionProperties.wholeNodeTextLineType,"TypePanel missing wholeNodeTextLineType"),(0,d.assertDev)(null!=e.selectionProperties.lineHeight,"TypePanel missing lineHeight"),(0,d.assertDev)(null!=e.selectionProperties.letterSpacing,"TypePanel missing letterSpacing"),(0,d.assertDev)(null!=e.selectionProperties.paragraphSpacing,"TypePanel missing paragraphSpacing"),(0,d.assertDev)(null!=e.selectionProperties.paragraphIndent,"TypePanel missing paragraphIndent"),(0,d.assertDev)(null!=e.selectionProperties.listSpacing,"TypePanel missing listSpacing"),(0,d.assertDev)(null!=e.selectionProperties.textCase,"TypePanel missing textCase"),(0,d.assertDev)(null!=e.selectionProperties.textDecoration,"TypePanel missing textDecoration"),(0,d.assertDev)(null!=e.selectionProperties.maxLines,"TypePanel missing maxLines");let{smallNudgeAmount:o,bigNudgeAmount:s}=(0,y.sT)(),c=(0,O.WH)(e.selectionProperties.inheritTextStyleKey??null,e.selectionProperties.styleIdForText??null,"TEXT"),h=(0,L.L)(),f=(0,_.R)(e=>r(e,(0,w.qd)(e),p.R.TEXT)),E=(0,v.SG)(["TEXT_DATA"]).data??[],b=(0,R.R1)().variableConsumptionMap,I=(0,R.JG)(),{version:T}=(0,u.DP)(),A=(0,g.md)(N.$i)===C.JJ.TEXT_PANEL;return l.createElement(F.J,{key:"type",fonts:e.fonts,fontFamily:e.selectionProperties.fontFamily,fontStyle:e.selectionProperties.fontStyle,fontSize:e.selectionProperties.fontSize,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:e.selectionProperties.areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides,lineHeight:e.selectionProperties.lineHeight,intrinsicLineHeight:e.selectionProperties.intrinsicLineHeight,letterSpacing:e.selectionProperties.letterSpacing,paragraphSpacing:e.selectionProperties.paragraphSpacing,paragraphIndent:e.selectionProperties.paragraphIndent,listSpacing:e.selectionProperties.listSpacing,textLineType:e.selectionProperties.textLineType,textDirectionality:e.selectionProperties.textDirectionality,hasHadRTLText:e.selectionProperties.hasHadRTLText,wholeNodeTextLineType:e.selectionProperties.wholeNodeTextLineType,isHangingPunctuationApplicableToSelection:e.selectionProperties.isHangingPunctuationApplicableToSelection,textCase:e.selectionProperties.textCase,fillPaints:e.selectionProperties.fillPaints,textDecorationFillPaints:e.selectionProperties.textDecorationFillPaints,textDecoration:e.selectionProperties.textDecoration,textDecorationSkipInk:e.selectionProperties.textDecorationSkipInk,textUnderlineOffset:e.selectionProperties.textUnderlineOffset,textDecorationThickness:e.selectionProperties.textDecorationThickness,inheritStyleKey:e.selectionProperties.inheritTextStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForText||null,mainStyle:c,textContentBoundAsset:h,isTextPropReferencedByAnyNodeInSelection:f,textAlignHorizontal:e.selectionProperties.textAlignHorizontal,textAlignVertical:e.selectionProperties.textAlignVertical,textAutoResize:e.selectionProperties.textAutoResize,missingFont:e.selectionProperties.missingFont,textUserLayoutVersion:e.selectionProperties.textUserLayoutVersion,textExplicitLayoutVersion:e.selectionProperties.textExplicitLayoutVersion,textBidiVersion:e.selectionProperties.textBidiVersion,textTruncation:e.selectionProperties.textTruncation,leadingTrim:e.selectionProperties.leadingTrim,leadingTrimEnabled:e.selectionProperties.leadingTrimEnabled,hangingPunctuation:e.selectionProperties.hangingPunctuation,hangingList:e.selectionProperties.hangingList,fontVariantDiscretionaryLigatures:e.selectionProperties.fontVariantDiscretionaryLigatures||!1,fontVariantHistoricalLigatures:e.selectionProperties.fontVariantHistoricalLigatures||!1,fontVariantNumericFigure:e.selectionProperties.fontVariantNumericFigure||"NORMAL",fontVariantNumericSpacing:e.selectionProperties.fontVariantNumericSpacing||"NORMAL",fontVariantNumericFraction:e.selectionProperties.fontVariantNumericFraction||"NORMAL",fontVariantCaps:e.selectionProperties.fontVariantCaps||"NORMAL",fontVariantPosition:e.selectionProperties.fontVariantPosition||"NORMAL",fontVariations:e.selectionProperties.fontVariations||[],detachOpticalSize:e.selectionProperties.detachOpticalSizeFromFontSize||!1,openTypeFeatures:e.openTypeFeatures,editModeType:e.activeCanvasEditModeType,enabledTypePanelControls:i,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,userFavoriteFonts:e.userFavoriteFonts,orgById:e.orgById,smallNudgeAmount:o,bigNudgeAmount:s,library:e.library,sceneGraph:e.sceneGraph,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,localFontAgentVersion:e.localFontAgentVersion,recordingKey:B(e.recordingKey,"typePanel"),textVariablesExist:E.length>0,variableConsumptionMap:a?I:b,isSlides:e.isSlides,version:T,showBlueBorder:A})})})(s||(s={}));let K=s.ConnectedTypePanel},270296:(e,r,n)=>{"use strict";n(587670);var i=n(91408),a=n(860168);(0,i.jz)(a.uj0)},83695:(e,r,n)=>{"use strict";n.d(r,{KN:()=>K,y3:()=>z});var i=n(411855),a=n(752795),o=n(587670),s=n(597616),l=n(629019),c=n.n(l),d=n(44070),u=n.n(d),p=n(966712),m=n(503457),h=n(153234),_=n(522739),g=n(572206),f=n(723325),E=n(762638),y=n(939863),b=n(226055),I=n(394339),T=n(178462),v=n(88339),S=n(469380),w=n(771941),A=n(848661),N=n(869156),C=n(741843),O=n(750029),L=n(736656),R=n(325682),P=n(533573),D=n(712685),k=n(15270),M=n(746806),F=n(761110),x=n(773833),U=n(669459),B=n(50275),V=n(527967),G=n(200817);let H=i.createContext({autoCloseOnScroll:!0}),W=(0,m.kf)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6764),n.e(8248),n.e(9246),n.e(9181)]).then(n.bind(n,579181))).ExpressionBuilderSearch})});function K({resolvedType:e,targetVariableData:r,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:s,updateSelectionProperties:l,recordingKey:c,updateConditionInConditionalAction:d,isNarrowPanel:u,showVariableThumbnails:p,setVariableValue:m,onClose:_,requestedTypes:f,initialPosition:E,variantProperty:y}){let b=!1;(0,A.gl)(r)&&(r=void 0,b=!0),r=(0,x.IQ)(r,y),r?.type===o.Z_n.EXPRESSION&&r?.value.expressionFunction===o.JTp.STRINGIFY&&(r=r.value.expressionArguments[0]);let[T,S]=i.useState(null),N=i.useCallback(e=>{null!==e&&S(e)},[]),[C,O]=i.useState(E??null),{shouldShowAdvancedPrototypingPaywall:L,showAdvancedPrototypingVariablesModal:P}=(0,R.zt)(),D=i.useCallback(()=>{if(L)P();else if(!C&&T){let e=T.getBoundingClientRect();O(new g.Mi(e.left-34,e.top-6))}},[T,C,L,P]);i.useEffect(()=>{!0===n&&s&&T&&(D(),s(!1))},[n,T,D,s]);let k=i.useCallback(()=>{C&&(O(null),_&&_())},[C,_]),M=i.useCallback(e=>{if(void 0!==d)d(e);else if((0,a.isNotNullish)(m)){if(!m(e))return!1}else void 0!==l&&l({targetVariableData:e});return k(),!0},[k,d,l,m]),F=i.createElement(i.Fragment,null,C&&i.createElement(j,{initialTokens:r?(0,I.q)((0,v.A)(r,new w.o(!0))):[],initialPosition:C,resolvedType:e,onCloseExpressionBuilder:k,onInputSubmitted:M,icon:d?V.A:G.A,isInConditional:void 0!==d,recordingKey:h.Pt(c,"expressionBuilder"),requestedTypes:f})),U=i.createElement(z,{targetVariableData:r,forwardRef:N,onClick:D,recordingKey:c,isNarrowPanel:u,isInCell:!!m,showVariableThumbnails:p,isInConditional:void 0!==d,isMixed:b});return i.createElement(i.Fragment,null,F," ",U)}function j({initialTokens:e,initialPosition:r,resolvedType:n,onCloseExpressionBuilder:a,onInputSubmitted:o,icon:s,isInConditional:l,recordingKey:c,requestedTypes:d}){let{autoCloseOnScroll:p}=i.useContext(H),m=i.useMemo(()=>e.reduce((e,r)=>e+=r.stringValue,""),[e]),g=i.useRef(m),E=i.useRef(!1),[b,I]=i.useState(0),v=i.useCallback((e,r)=>{I(e),e>0&&!E.current&&(E.current=!0),r&&(0,x.EQ)(g.current,r,n,l?"conditional":"set_variable")},[l,n]),[A,N]=i.useState((0,S.d)(g.current,n,d)),O=i.useCallback(()=>{if(g.current.trim().length>0){(0,x.EQ)(g.current,"success",n,l?"conditional":"set_variable");let e=o((0,T.q)(g.current,new w.o));if(!e)return N(!e),e}else(0,x.EQ)(g.current,"submit_empty",n,l?"conditional":"set_variable"),a();return!0},[l,a,o,n]),L=i.useMemo(()=>u()(e=>{(0,x.EQ)(g.current,e,n,l?"conditional":"set_variable"),a()}),[l,a,n]),[R,P]=i.useState(!1),D=i.useCallback(()=>R?(0,y.t)("proto.expression_builder.ai_placeholder"):l?(0,y.t)("proto.expression_builder_entry.placeholder"):(0,y.t)("proto.expression_builder.placeholder"),[R,l]);return i.createElement("div",{className:B.Zh},i.createElement(M.vx,{container:C.c,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:r,onClose:a,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},i.createElement(f.dP,{recordingKey:c},i.createElement("div",null,i.createElement(W,{fallback:i.createElement("div",{className:B.D9}," Loading... "),errorFallback:null,initialTokens:e,expressionText:g,resolvedType:n,error:A,setError:N,onSubmit:O,onClose:L,icon:s,wiggleCount:b,setWiggleCount:v,hasWiggled:E.current,placeholderText:D(),isInConditional:l,recordingKey:h.Pt(c,"search"),requestedTypes:d,isAIMode:R,setIsAIMode:P})))),i.createElement(_.D8,{className:U.ZA,onMouseDown:e=>{if(R){L("click_out_cancel"),e.stopPropagation();return}!A&&O()||(b>=1?L("click_out_cancel"):0===b&&v(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{p&&g.current.trim()===m.trim()&&L("scroll_cancel")},recordingKey:h.Pt(c,"closeBuilder")}))}function z({targetVariableData:e,forwardRef:r,onClick:n,recordingKey:a,showVariableThumbnails:l,isNarrowPanel:d,isInCell:u,isInConditional:m,isMixed:g,variantProperty:f}){e=(0,x.IQ)(e,f);let I=(0,b.GS)(),T=(0,R.YT)(),S=i.useContext(L.c),N=T===R.Oz.TWO_COL,C=N&&S===L.P.LEFT,P=N&&S===L.P.RIGHT,D=i.useMemo(()=>e?(0,v.A)(e,new w.o(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})(?![^[]*])/):[],[e]);if(e&&(0,A.hS)(e)&&e?.resolvedType===o.rXF.COLOR)return i.createElement(O.J,{color:e.value});let k=0===D.length,M=c()({[B.WR]:!u&&d,[B.NQ]:u,[B.D9]:!u&&!d,[B.pC]:N,[B.g6]:C,[B._i]:I}),U=C?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_lhs"):P?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_rhs"):(0,y.t)("proto.expression_builder_entry.placeholder");return i.createElement(_.D8,{onClick:n,recordingKey:h.Pt(a,"openExpressionBuilder"),className:I?B.tY:E.cx.minW0.$},i.createElement("div",{className:M,ref:r},D.filter(e=>e.length>0).map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let n=e.replace(/[{}]/g,""),{variableId:a,modeId:o}=(0,x.Y_)(n);return i.createElement(Y,{variableId:a,modeId:o,showVariableThumbnails:l,key:r,disableHover:C})}if(s.sH(e))return i.createElement(Y,{variableId:e,showVariableThumbnails:l,key:r,disableHover:C});if((0,p.kc)().ds_variable_props_proto&&e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/[[]]/g,""),[a,o,s]=(0,x.Q6)(n);return i.createElement($,{stablePathToNode:a,componentPropId:s,showVariableThumbnails:l,key:r})}if((0,p.kc)().ds_variable_props_proto&&(0,x.Q6)(e)[0].length&&""!==(0,x.Q6)(e)[1]&&""!==(0,x.Q6)(e)[2]){let[n,a,o]=(0,x.Q6)(e);return i.createElement($,{stablePathToNode:n,componentPropId:o,showVariableThumbnails:l,key:r,disableHover:C})}return x.dX.test(e)?i.createElement("span",{key:r},e):x.yZ.test(e)||x.er.test(e)?i.createElement("span",{key:r},e):i.createElement(F.X,{isLeftColInteractionsPanel:C,text:e,key:r})}),k&&i.createElement("span",{className:B.a7},g?(0,y.t)("fullscreen.mixed"):m?U:(0,y.t)("proto.expression_builder.placeholder"))))}function Y({variableId:e,modeId:r,showVariableThumbnails:n,disableHover:a}){let o=(0,N.u)(e),s=o?(0,k.B9)(o.name):(0,y.t)("proto.expression_builder_entry.missing"),l=(0,N.G6)(o?.variableSetId),c=l&&r?l.modes.find(e=>e.id===r):null,d=c?.name,u=o&&n?(0,x.Xx)(o.resolvedType):null,p=d?`${s}: ${d}`:`${s}`;return i.createElement(D.w,{text:p,thumbnailValue:u,isDeleted:!!o&&(0,P.eF)(o),disableHover:a})}function $({stablePathToNode:e,componentPropId:r,showVariableThumbnails:n,disableHover:a}){let o=(0,x.aA)(e,r),s=o&&n?(0,x.Xx)(o.varValue.resolvedType):null;return i.createElement(D.w,{text:o?o.name:(0,y.t)("proto.expression_builder_entry.missing"),colorTheme:D.J.COMPONENT,thumbnailValue:s,isDeleted:!1,disableHover:a})}},773833:(e,r,n)=>{"use strict";n.d(r,{Cq:()=>function e(r){if(r&&r.varValue.type===a.Z_n.ALIAS)return a.CWU.getVariableResolvedValue(r.varValue.value,new Map);if(r&&r.varValue.type===a.Z_n.NODE_FIELD_ALIAS){let{stablePathToNode:n,indexOrKey:i}=r.varValue.value,a=F(n,i);return a?e(a):void 0}let n=(0,_.sr)(r);switch(typeof n){case"string":return{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:n};case"boolean":return{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:n};case"number":return{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:n}}},DE:()=>I,EQ:()=>$,HC:()=>V,Hq:()=>M,I0:()=>E,IQ:()=>j,J4:()=>B,N_:()=>W,Q6:()=>x,TL:()=>G,Ub:()=>D,Xx:()=>z,Y_:()=>K,ZX:()=>f,_z:()=>k,a1:()=>b,aA:()=>F,bU:()=>U,d9:()=>R,dX:()=>N,er:()=>O,he:()=>P,if:()=>T,kl:()=>v,q2:()=>S,sO:()=>w,tJ:()=>L,tz:()=>Y,uX:()=>C,wL:()=>H,yZ:()=>A,yy:()=>y});var i=n(411855),a=n(587670),o=n(534611),s=n(776250),l=n(776621),c=n(632430),d=n(394339),u=n(771941),p=n(869156),m=n(335682),h=n(512596),_=n(503795),g=n(90211);function f({highlightedItemID:e,variables:r,expressionItems:n,componentPropItems:i}){return e?r.find(r=>r.node_id===e)??i.find(r=>(0,_.lC)(r)===e)??n.find(r=>r.name===e)??null:null}let E=new RegExp(/\+|-|\*|!|=|\/|&|\||>|<| /g),y=new RegExp(/\+|-|\*|!|=|\/|&&|\|\||>|</g),b=new RegExp(/\+|-|\*|\//g),I=new RegExp(/\+/g),T=new RegExp(/>|<|!/g),v=new RegExp(/>=|<=/g),S=new RegExp(/!=|==|(OR|or|Or)|>=|<=|&&|\|\|/g),w=new RegExp(/(AND|and|And)|(NOT|not|Not)/g),A=new RegExp(/"([^"]*)"/),N=new RegExp(/^[0-9.]*$/),C=new RegExp(/(AND|and|And)|(NOT|not|Not)|(OR|or|Or)|!=|==|&&|\|\|/),O=new RegExp(/\s*(true|false)\s*/i),L=new RegExp(/\(|\)/g);function R(e){return!!e&&(!N.test(e)||isNaN(Number(e)))}function P(e,r){return e?.modes.find(e=>e.id===r)?.name??""}function D(e){let[r,n]=e.split("$$$");return[r,n]}function k(e,r,n){if(n.keepAliasId)return`${e}$$$${r}`;let i=n.variableIdToVariable(e);if(!i)return"{}";let a=n.variableCollectionIdToVariableCollection(i.variableSetId);if(!a)return"{}";let o=P(a,r);return`{${i.name}$$$${o}}`}function M(e){let[r,n,i]=x(e);if(!r||!n||!i)return[];if("COMPONENT_PROP_ASSIGNMENTS"===n){let e=F(r,i);return e?[r,n,i,e.varValue.resolvedType]:[]}return(0,l.xi)("Invalid node field when parsing node field alias expression text",n),[]}function F(e,r){if(!e||0===e.length||!r)return;let n=a.CWU.getComponentPropForVariableAlias(e,r);if(0!==Object.keys(n).length)return n}function x(e){let[r,n,i]=e.split("$$$");if(!r||!n||!i)return[[],"",""];let[,a]=r.split("StablePathToNode:"),[,o]=n.split("NodeField:"),[,s]=i.split("IndexOrKey:");return a&&o&&s?[JSON.parse(a),o,s]:[[],"",""]}function U(e,r,n){return"COMPONENT_PROP_ASSIGNMENTS"===r?`StablePathToNode:${JSON.stringify(e)}$$$NodeField:${r}$$$IndexOrKey:${n}`:((0,l.xi)("Invalid node field when parsing for node field alias",r),"")}function B(e){for(let r of e){if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);if("items"in r)return r.items[0].node_id;if("expressionItem"in r)return r.expressionItem.name}return null}function V(e){for(let r of e)if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);for(let r of e)if(r.type===_.Yc.VARIABLES)return r.items[0].node_id;for(let r of e)if(r.type===_.Yc.EXPRESSION&&"LITERAL"===r.expressionItem.type)return r.expressionItem.name;return null}function G(e){return i.useMemo(()=>e===a.rXF.BOOLEAN?[a.rXF.BOOLEAN,a.rXF.STRING,a.rXF.FLOAT]:e===a.rXF.STRING?[a.rXF.STRING,a.rXF.FLOAT]:[e],[e])}function H(e,r,n,a){let o=(0,p.Rb)(),s=(0,p.yp)(),l=(0,p.pN)(),c=l.data?.libraryVariables,d=l.data?.libraryVariableSets,[u,f]=(0,i.useMemo)(()=>"ALL_LIBRARIES"===n.type?[[...o,...c??[]],[...s,...d??[]]]:"LOCAL_VARIABLES"===n.type?[o,s]:[c??[],d??[]],[n.type,o,c,s,d]),E=(0,m.tS)(),y=(0,h.A)(null,null),b=i.useMemo(()=>{let e={};return y.forEach(r=>{e[r.fileKey]=r.fileName}),e},[y]),I=G(r),T=i.useMemo(()=>u.filter(e=>a?.includes(e.resolvedType)??I.includes(e.resolvedType)),[u,a,I]),v=(0,g.qF)(T,e??"");return i.useMemo(()=>null===e?[]:e.length>0?(0,_.dC)({variables:v,variableSets:f,styles:[],componentProps:[],layout:"list",fileNamesByKey:b,openFileKey:E}):(0,_.HK)({variables:v,variableSets:f,layout:n.layout}),[e,v,f,b,E,n.layout])}async function W(e,r){let n=r.find(r=>r.node_id===e.node_id);n&&await (0,c.ff)(n)}function K(e){let[r,n]=e.split(" %%% "),[i,a]=r.split("$$$");return{variableId:i,modeId:a,resolvedType:n?+n:null}}function j(e,r){return e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.IS_TRUTHY&&e.value.expressionArguments[0]&&(e=e.value.expressionArguments[0]),e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.RESOLVE_VARIANT&&e?.value.expressionArguments[0]?.type===a.Z_n.MAP&&r&&e.value.expressionArguments[0].value[r]&&(e=e.value.expressionArguments[0].value[r]),e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.STRINGIFY&&(e=e.value.expressionArguments[0]),e}function z(e){return Y(e)?{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:o.AD}:e===a.rXF.BOOLEAN?{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:!0}:e===a.rXF.FLOAT?{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:0}:null}function Y(e){return e===a.rXF.STRING||e===a.rXF.TEXT_DATA}function $(e,r,n,i){let o=new u.o(!0),c=[];try{c=(0,d.q)(e)}catch{(0,l.xi)("could not tokenize expression for logging:",e)}let p=c.filter(e=>"TOKEN_VARIABLE"===e.type||"TOKEN_VARIABLE_WITH_MODE"===e.type).map(e=>{let[r,n]=D(e.stringValue),i=o.variableIdToVariable(r);return{collection_id:i?.variableSetId,variable_id:r,variable_type:i?.resolvedType,mode_id:n}}),m=Object.keys(a.rXF)[Object.values(a.rXF).indexOf(n)].toLowerCase();"float"!==m&&"string"!==m&&"boolean"!==m&&(m="invalid");let h={status:r,resolved_type:m,variable_data:JSON.stringify(p),entry:i};s.az.trackDefinedEvent("prototype.expression_submit",h)}},360803:(e,r,n)=>{"use strict";n.d(r,{m:()=>function e(r){var n=[];for(var a of r){if("SET_VARIABLE"===a.connectionType){if(a.targetVariable&&"id"in a.targetVariable){let e=s.sH(a.targetVariable.id);a.targetVariable.id={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}}}a.targetVariableData&&(a.targetVariableData=c(a.targetVariableData.type,a.targetVariableData.resolvedType,a.targetVariableData.value))}else if("SET_VARIABLE_MODE"===a.connectionType)(0,i.assertNotNullish)(a.targetVariableModeID,"targetVariableModeID"),a.targetVariableModeID=(0,o.sH)(a.targetVariableModeID)||void 0;else if("CONDITIONAL"===a.connectionType&&a.conditionalActions){var l=[];for(var d of a.conditionalActions){var u=[],p=null;d&&(d.condition&&(p=c(d.condition.type,d.condition.resolvedType,d.condition.value)),d.actions&&(u=e(d.actions))),l.push({condition:p,actions:u})}a.conditionalActions=l}n.push(a)}return n}});var i=n(634832),a=n(587670),o=n(534611),s=n(597616),l=n(15270);function c(e,r,n){let i=(0,l.WI)(r,n),d=function(e){switch(e){case a.rXF.BOOLEAN:return"BOOLEAN";case a.rXF.FLOAT:return"FLOAT";case a.rXF.STRING:return"STRING";case a.rXF.COLOR:return"COLOR";case a.rXF.MAP:return"MAP";case a.rXF.SYMBOL_ID:return"SYMBOL_ID";case a.rXF.TEXT_DATA:return"TEXT_DATA";default:throw Error(`Unexpected resolved type: ${e}`)}}(r);if(e===a.Z_n.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:i.value}};if(e===a.Z_n.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:i.value}};if(e===a.Z_n.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:i.value}};if(e===a.Z_n.ALIAS){var u,p=null;if("string"==typeof n){let e=s.sH(n);e&&(p={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:p||i.value}}}if(e===a.Z_n.NODE_FIELD_ALIAS)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:d,value:{nodeFieldAliasValue:"stablePathToNode"in(u=i.value)&&"nodeField"in u&&"indexOrKey"in u?{stablePathToNode:{guids:u.stablePathToNode.map(e=>(0,o.sH)(e))},nodeField:u.nodeField,indexOrKey:u.indexOrKey}:{}}};if(e===a.Z_n.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:i.value}};if(e===a.Z_n.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function e(r){for(var n=r.expressionArguments,i=[],o=0;o<n.length;o++){var s=n[o],l=c(s.type,s.resolvedType,s.value);s.type===a.Z_n.EXPRESSION&&(l.value={expressionValue:e(s.value)}),i.push(l)}return{expressionArguments:i,expressionFunction:a.JTp[r.expressionFunction]}}(n)}};else if(e===a.Z_n.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:i.value}};else if(e===a.Z_n.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:i.value}}}},301036:(e,r,n)=>{"use strict";n(820286),n(848661)},325682:(e,r,n)=>{"use strict";n.d(r,{Oz:()=>L,YT:()=>P,hU:()=>v,x6:()=>A,zt:()=>O});var i=n(411855),a=n(188507);n(587670),n(534611);var o=n(776250);n(794272);var s=n(966712),l=n(38580),c=n(374626),d=n(662275),u=n(809831),p=n(226055),m=n(396226),h=n(848661);n(46878);var _=n(335682),g=n(99506),f=n(206193),E=n(300874);n(32067),n(394781);var y=n(453261),b=n(129531),I=n(144119),T=n(38340);function v(e,r,n,i,a,o,s,l,c,d){return{behavior:function(e){if(e){if(!(0,h.hS)(e))return h.oV;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,h.hS)(e)){for(let r of w)if(e.indexOf(r)>=0)return r}return null}(e),easing:function(e){if(e){if(!(0,h.hS)(e))return h.oV;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(r),isSpringTransition:A(r),easingFunction:n?(0,h.hS)(n)?n:h.oV:S,duration:i?(0,h.hS)(i)?i:h.oV:.3,shouldSmartAnimate:N(a,!1),preserveScroll:N(o,!1),resetVideoPosition:N(s,!1),openUrlInNewTab:N(l,!1),resetScrollPosition:N(c,!1),resetInteractiveComponents:N(d,!1)}}(0,l.eU)(!0);let S=[0,0,.58,1],w=["LEFT","RIGHT","TOP","BOTTOM"];function A(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function N(e,r){return e?(0,h.hS)(e)?e:h.oV:r}function C(e,r){let n;let s=(0,a.wA)();switch(e){case E.Bi.PROTOTYPING_MULTIPLE_ACTIONS:n=f.b.PROTOTYPING_MULTIPLE_ACTIONS;break;case E.Bi.PROTOTYPING_CONDITIONAL_ACTIONS:n=f.b.PROTOTYPING_CONDITIONAL_ACTIONS;break;case E.Bi.PROTOTYPING_VARIABLES:n=f.b.PROTOTYPING_VARIABLES;break;case E.Bi.VIDEOS_IN_PROTOTYPES:n=f.b.ADD_VIDEO;break;default:n=void 0}return(0,i.useCallback)(()=>{s(d.to({type:b.DV,data:{team:r,resource:e,editorType:g._Y.DESIGN,currentPlan:m.F.Plan.STARTER,upsellPlan:m.F.Plan.PRO,upsellSource:n}})),(0,o.sx)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[s,e,r,n])}function O(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:r,showMoveToProTeam:n}=(0,y.R)(),i=(0,s.kc)().prototype_multi_path_paywall&&!e,o=(0,a.d4)(e=>e.openFile),l=(0,a.d4)(e=>o&&o.teamId?e.teams[o.teamId]:null),d=(0,c.md)(_.Hu),p=(0,I.sO)(),m=(0,u.ow)(),h=C(E.Bi.PROTOTYPING_MULTIPLE_ACTIONS,l),g=C(E.Bi.PROTOTYPING_CONDITIONAL_ACTIONS,l),f=C(E.Bi.PROTOTYPING_VARIABLES,l),b=C(p?E.Bi.VIDEOS_IN_SLIDES:m?E.Bi.VIDEOS_IN_WHITEBOARD:E.Bi.VIDEOS_IN_PROTOTYPES,l);return{shouldShowAdvancedPrototypingPaywall:i,showAdvancedPrototypinglMultipleActionsModal:r?n:h,showAdvancedPrototypingConditionalActionsModal:r?n:g,showAdvancedPrototypingVariablesModal:r?n:f,showVideosModal:r&&!d?n:b}}var L=(e=>(e[e.SINGLE_COL=0]="SINGLE_COL",e[e.TWO_COL=1]="TWO_COL",e[e.NONE=2]="NONE",e))(L||{});function R(e){return e.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType))}function P(){let e=(0,T.HS)(),{selectedInteractions:r,differentLengthActions:n}=(0,T.Ay)(e);if(!(0,p.GS)())return 2;let i=R(r)||r.some(e=>void 0!==e.actions&&e.actions?.length>1),a=r.length>1&&!n&&r[0].actions?.length===1&&R(r)&&!r.every(e=>e.actions?.every(e=>"CONDITIONAL"===e.connectionType));return!i||n||a?0:1}},73349:(e,r,n)=>{"use strict";n.d(r,{E8:()=>l,U8:()=>o,_i:()=>s});var i=n(682331),a=n(126911);function o(e){let r=[],n=a.y.isApple();return n&&e.metaKey&&r.push("\u2318"),!n&&e.metaKey&&r.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&r.push(n?"\u2303":"Ctrl"),e.shiftKey&&r.push(n?"\u21E7":"Shift"),e.altKey&&r.push(n?"\u2325":"Alt"),r.push(c[e.keyCode]||String.fromCharCode(e.keyCode)),r.join(n?"":"+")}function s(e){if(!e)return null;let r={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let n of e)switch(n){case 16:r.shiftKey=!0;break;case 17:r.ctrlKey=!0;break;case 18:r.altKey=!0;break;case 91:case 92:case 93:case 224:r.metaKey=!0;break;default:r.keyCode=n}return r.keyCode?r:null}function l(e,r=!1){if(!e||e?.triggerDevice==="KEYBOARD")return null;let n=d.get(e?.triggerDevice),a=e?.keyCodes?.[0]??0,o=n?.get(a)??function(e){if(e>=i.c){let r=Math.floor((e-i.c)/2);return`Axis ${r} ${e%2==0?"-":"+"}`}return`Button ${e}`}(a);return o.length<=1&&!r&&(o+=" (Gamepad)"),o}let c={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},d=new Map([["SWITCH_PRO",new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["PS4",new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["XBOX_ONE",new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])]])},38340:(e,r,n)=>{"use strict";n.d(r,{Ay:()=>f,HS:()=>g});var i=n(188507),a=n(459401),o=n(730371),s=n(534611),l=n(776250),c=n(529004),d=n(356390),u=n(848661),p=n(234945),m=n(279702),h=n(113468);function _(e){if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+(e.interactionMaintained?.toString()??"0");case"ON_KEY_DOWN":return e.interactionType+(e.keyTrigger?.triggerDevice??"")+(e.keyTrigger?.keyCodes?.sort().toString()??"");case"AFTER_TIMEOUT":return e.interactionType+(e.transitionTimeout?.toString()??"0");case"ON_MEDIA_HIT":return e.interactionType+(e.mediaHitTime?.toString()??"0");default:return e.interactionType}}function g(){let e=(0,i.d4)(S),r=new Set((0,i.d4)(A));return e.some(e=>{let n=e.id&&e.sourceNodeID?c.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return n&&r.has(n)})?h.J.NORMAL:h.J.INHERITED_INTERNAL}function f(e){let r=(0,i.d4)(S),n=(0,i.d4)(w),a=e===h.J.INHERITED_INTERNAL?n:r,o=(0,i.d4)(A),g=new Set(o),f=new Set,b=[];a.forEach((e,r)=>{let n=e.id&&e.sourceNodeID?c.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;n&&g.has(n)&&(f.add(r),b.push(e))});let N=b.map(e=>e.actions?.length).some(e=>e!==b[0].actions?.length),C=(0===b.length?[]:b[0].actions||[]).map(e=>({...e}));if(!N)for(var O=0;O<b.length;O++){let e=b[O].actions||[];for(var L=0;L<e.length;L++){let r=C[L],n=e[L];for(let e in n)r[e]?y(n,r,e)||(r[e]=u.oV):r[e]=n[e]}}let R=i=>(function o(s){let c=function(...o){let[c,p]=o,_=!1,g=[],E=[];for(let e in c)(0,u.gl)(F[e])?(_=!0,g.push(e)):E.push(e);let{changes:y,eventChanges:b,actionChanges:S,interactionChanges:w}=function(e){let r={},n={},i={},a={};for(let o in e)T.has(o)?i[o]=e[o]:I.has(o)?n[o]=e[o]:v.has(o)?a[o]=e[o]:r[o]=e[o];return{changes:r,eventChanges:n,actionChanges:i,interactionChanges:a}}(c),A=[];a.forEach((e,r)=>{if(f.has(r)){let r={...e.event,...b},n=[],a=e.actions||[];for(let e=0;e<a.length;e++)if(e===i){if(s.length>1){let{newPrototypeAction:r}=function(e,r,n){if(r.length>2&&e.conditionalActions){let o=e.conditionalActions,s=e.conditionalActions,l=r[1],c=s[l];var i={condition:c.condition,actions:[]},a=[];let d=c.actions?c.actions:[];for(let e=0;e<d.length;e++)e===r[2]?a.push({...d[e],...n}):a.push({...d[e]});i.actions=a,o[l]=i,e.conditionalActions=o}return{newPrototypeAction:e}}(a[e],s,S);n[e]=r}else n.push({...a[e],...S})}else n.push({...a[e]});i>=n.length&&n.push({...S}),A.push({...e,...w,event:r,actions:n})}else A.push(e)}),(0,l.sx)("prototype_update_selection_properties",{mixedUpdate:_,mixedUpdatedProperties:g,nonMixedUpdatedProperties:E,num_connector:f.size,category:e}),e===h.J.NORMAL?A=[...A,...n]:e===h.J.INHERITED_INTERNAL&&(A=[...r,...A]),y.prototypeInteractions=A,d.Y5.updateSelectionProperties(y,{shouldCommit:p?.shouldCommit||m.zk.YES,overwrite:p?.overwrite})};return c.appendActionIndex=function(e){return o([...s,e])},c})([i]),P=e=>e&&null!=e.actions?e.actions[0]:null,D=e=>{let r=P(e);if(null==r)return s.dI(e.sourceNodeID);let n=s.dI(r.transitionNodeID);return n===s.AD||null===n?s.dI(e.sourceNodeID):n},k=(e,r)=>{if(!e.actions||e.actions?.length===0||0===r.length)return null;if(!(r.length>2))return e.actions[r[0]];{let n=e.actions.length>r[0]?e.actions[r[0]]:null;if(n&&n.conditionalActions){let e=n.conditionalActions.length>r[1]?n.conditionalActions[r[1]]:null;if(e&&e.actions)return e.actions.length>r[2]?e.actions[r[2]]:null}}},M=(e,r)=>{if(null==r||void 0===r)return s.dI(e.sourceNodeID);let n=s.dI(r.transitionNodeID);return n===s.AD||null===n?s.dI(e.sourceNodeID):n},F=function(e){let r={},n={};for(let i of e){if(!i||!i.event)continue;for(let e in i.event)r[e]?E(i.event,r,e)||(r[e]=u.oV):r[e]=i.event[e];let e=i.actions&&{...i.actions[0]};if(e)for(let r in e)n[r]?y(e,n,r)||(n[r]=u.oV):n[r]=e[r]}return{...r,...n}}(b),x=function(e){let r={},n=[{}];for(let a of e){if(!a||!a.event)continue;for(let e in a.event)r[e]?E(a.event,r,e)||(r[e]=u.oV):r[e]=a.event[e];if(!a.actions)continue;let e=a.actions;var i=0;for(let r of e){for(let e in r){i>n.length-1&&n.push({});let a=n[i];a[e]?y(r,a,e)||(a[e]=u.oV):a[e]=r[e]}i++}}return{interactionEvent:r,interactionActions:n}}(b),U=new Set(o.map(e=>{let r=c.s(e);return r?s.dI(r.nodeID):""}).filter(e=>""!==e)),B=a.filter(e=>e.sourceNodeID&&U.has(s.dI(e.sourceNodeID)));var V=[...B];let G=function(){let e=(0,i.d4)(w);return Object.keys((0,i.d4)(p.Xt)).length>1?function(e){let r=[],n=new Map;for(let r of e){let e=_(r.event);n.has(e)||n.set(e,[]);let i=n.get(e);i&&i.push(r)}for(let[e,i]of n)i&&i.length>0&&i[0].event&&r.push({key:e,event:i[0].event,interactions:i});return r}(e):function(e){let r=[];if(e.length>0&&e[0].event)for(let n of e)n.event&&r.push({key:_(n.event),event:n.event,interactions:[n]});return r}(e)}();if(G.length>0)for(var O=0;O<G.length;O++){let e=G[O];for(var H=0;H<e.interactions.length;H++){let r=e.interactions[H];V.find(e=>e.id===r.id)||V.push(r)}}return{makeUpdateSelectionPropertiesForActionIndex:R,updateSelectionProperties:R(0),makeUpdateMultipleDestinationNodesForActionIndex:i=>(function i(o){let l=function(i,l,c){let u={},p=[];a.forEach(e=>{let r=k(e,o),n=M(e,r);if(r&&n&&-1!==Object.keys(i).indexOf(n)&&s.sH(i[n])){let d=s.sH(i[n]);if(d){if(!e.actions)return;var a=[];let n=o[0];if(r){if(o.length>2){let r=e.actions[n],i=o[1];if(r.conditionalActions){let n=r.conditionalActions[i],s=o[2],u=r.conditionalActions;var l={condition:r.conditionalActions[i].condition,actions:[]};if(n.actions){let p={...n.actions[s],transitionNodeID:d};var c=[...n.actions];c.splice(s,1,p),l.actions=c,u[i]=l,r.conditionalActions=u,(a=[...e.actions]).splice(o[0],1,r)}}}else{let r={...e.actions[o[0]],transitionNodeID:d};(a=[...e.actions]).splice(o[0],1,r)}p.push({...e,actions:a})}}}else p.push(e)}),e===h.J.NORMAL?p=[...p,...n]:e===h.J.INHERITED_INTERNAL&&(p=[...r,...p]),u.prototypeInteractions=p,d.Y5.updateSelectionProperties(u,{shouldCommit:l,overwrite:c})};return l.appendActionIndex=function(e){return i([...o,e])},l.updateMultipleDestinationNodes=function(e,r,n){return l},l})([i]),updateMultipleDestinationNodes:(i,o,l)=>{let c={},u=[];a.forEach(e=>{let r=D(e);if(r&&-1!==Object.keys(i).indexOf(r)&&s.sH(i[r])){let n=s.sH(i[r]);if(n){if(!e.actions)return;let r=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==r){let i={...e.actions[r],transitionNodeID:n},a=[...e.actions];a.splice(r,1,i),u.push({...e,actions:a})}}}else u.push(e)}),e===h.J.NORMAL?u=[...u,...n]:e===h.J.INHERITED_INTERNAL&&(u=[...r,...u]),c.prototypeInteractions=u,d.Y5.updateSelectionProperties(c,{shouldCommit:o,overwrite:l})},detailPropsMultipleActions:x,detailProps:F,interactionsOnSelectedNode:B,interactionsOnSelectedNodesAndComponents:V,selectedInteractions:b,mergedActions:C,differentLengthActions:N,selectedNoodleIds:o}}function E(e,r,n){if("keyTrigger"===n){let i=e[n],o=(0,u._W)(r[n],void 0);return(0,a.valuesEqual)(i?.keyCodes||[],o?.keyCodes||[])&&i?.triggerDevice===o?.triggerDevice}return e[n]===r[n]}function y(e,r,n){switch(n){case"transitionNodeID":let i=e[n],a=(0,u._W)(r[n],void 0);return s.aI(i,a);case"targetVariable":let l=e[n],c=r[n];if(!l&&!c)return!0;if(l&&c){if("id"in l&&"id"in c)return l.id===c.id;if("nodeFieldAlias"in l&&"nodeFieldAlias"in c)return l.nodeFieldAlias===c.nodeFieldAlias}return!1;case"overlayRelativePosition":let d=e[n],p=(0,u._W)(r[n],void 0);return d?.x===p?.x&&d?.y===p?.y;case"easingType":let m=e[n],h=(0,u._W)(r[n],void 0);if("CUSTOM_CUBIC"!==m||"CUSTOM_CUBIC"!==h)return m===h;return b((0,u._W)(e.easingFunction,void 0),(0,u._W)(r.easingFunction,void 0));case"easingFunction":return b(e[n],(0,u._W)(r[n],void 0));case"extraScrollOffset":let _=e[n],g=(0,u._W)(r[n],void 0);return _?.x===g?.x&&_?.y===g?.y;case"targetVariableData":case"conditionalActions":return(0,o.deepEquals)(e[n],r[n]);default:return e[n]===r[n]}}function b(e,r){if(e===r)return!0;if(void 0===e||void 0===r||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}let I=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),T=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableSetID","targetVariableModeID","targetVariableSetKey"]),v=new Set(["stateManagementVersion"]);function S(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function w(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function A(e){return e.mirror.appModel.selectedInteractions}},394781:(e,r,n)=>{"use strict";n.d(r,{PR:()=>s});var i=n(534611);let a=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return i.dI(e)??i.dI(i.Hr)}recordInteractionUpgraded(e,r){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}hasInteractionBeenUpgraded(e,r){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}haveInteractionsBeenUpgraded(e){for(let r of e)if(!this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let r of e)if(1===r.stateManagementVersion&&this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class o{recordInteractionUpgraded(e,r){a.recordInteractionUpgraded(i.sH(e),i.sH(r))}}function s(){new o}},7959:(e,r,n)=>{"use strict";n.d(r,{$4:()=>O,Id:()=>S,JU:()=>D,K0:()=>b.K0,Me:()=>b.Me,UZ:()=>k,YW:()=>b.YW,Zk:()=>w,fI:()=>A,hl:()=>N,jT:()=>R,ks:()=>P,xw:()=>C});var i=n(411855),a=n(629019),o=n.n(a),s=n(517333),l=n(737947),c=n(966712),d=n(153234),u=n(522739),p=n(192437),m=n(210954),h=n(659838);n(574176);var _=n(939863),g=n(283942);n(498606);var f=n(697652),E=n(45148),y=n(333483),b=n(227795);let I=(e,r)=>({...e,className:`${r} ${e.className||""}`}),T=(e,r)=>(0,c.kc)().eu_error_boundaries?{...e,children:i.createElement(p.tH,{boundaryKey:r,fallback:i.createElement(v,null)},e.children)}:e;function v(){let e=(0,s.y3)();return i.createElement(E.aV,{appendedClassName:y.Bg},e?(0,_.t)("fullscreen.error.generic_panel_error_desktop"):(0,_.t)("fullscreen.error.generic_panel_error_web"),i.createElement(m.N,{trusted:!0,onClick:()=>l.Ay.reload("Reload due to properties panel error")},e?(0,_.t)("fullscreen.error.reload_tab"):(0,_.t)("fullscreen.error.refresh_page")))}function S(e){let r=i.useMemo(()=>T(e,"ModalPanel"),[e]);return i.createElement(u.D8,{...I(r,y.a2),"data-non-interactive":!0})}class w extends d.o6{render(){return i.createElement(u.D8,{...T(I(this.props,"propertiesPanel"),"Panel"),"data-non-interactive":!0})}}w.displayName="Panel";class A extends d.o6{render(){let e;let{selected:r,selectedSecondary:n,heightMultiplier:a,...o}=this.props,s=n?y.kR:r?y.CZ:null;return e=2===a?y.X0:1.25===a?y.ht:1.5===a?y.LE:y.l$,s&&(e+=" "+s),i.createElement(u.D8,{...I(o,e),"data-non-interactive":!0})}}function N(e){return i.createElement(u.D8,{...I(e,y.Zz),"data-non-interactive":!0})}function C(e){let{doNotReserveSpaceForChevron:r,faded:n,extended:a,innerRef:o,isPanelBodyCollapsedAtom:s,forceNoChevron:l,...c}=e,d=y.Dn;e.faded&&(d=y.Tz),e.extended&&(d=y.iY),s&&(d=d+" "+y.bW),l&&(d+=` ${y.sI}`);let p=I(c,d);return i.createElement(u.D8,{...p,forwardedRef:o},!r&&i.createElement(f.r2,{isPanelBodyCollapsedAtom:s||null}),e.children)}function O({...e}){return i.createElement("div",{...I(e,y.DS),dir:"auto"})}function L({noLeftBorder:e,squareRightBorder:r,noBorderOnFocus:n,noPlaceholderLine:i,softDisabled:a,className:s,...l}){return e&&(s+=` ${y.Z4}`),r&&(s+=` ${y.O1}`),n||(s+=` ${y.PQ}`),i&&(s+=` ${y.LJ}`),a&&(s+=` ${y.EA}`),Object.assign(l,{className:o()(y._Z,s)})}A.displayName="Row";let R=i.forwardRef(function(e,r){let n=L(e);return i.createElement(u.u2,{autoComplete:"false",spellCheck:!1,forwardedRef:r,...n})});class P extends i.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,g.jr)(e,g.W0.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=L(this.props);return i.createElement(h.L,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...e,onKeyDown:this.onKeyDown,ref:e.innerRef})}}function D({disabled:e,...r}){return i.createElement("label",{...I(r,e?y.wh:y.Pf),dir:"auto"})}function k(e){return i.createElement("label",{...I(e,y.wh)})}P.displayName="TextInput",i.forwardRef((e,r)=>{let{className:n,...a}=L(e);return i.createElement(u.D8,{...a,className:o()(n,y.PB),forwardedRef:r,tabIndex:0})})},544403:(e,r,n)=>{"use strict";var i=n(411855),a=n(834929),o=n(243742),s=n(629019),l=n.n(s),c=n(134288),d=n(62935),u=n(373935);let p=(0,i.createContext)(()=>null),m=(0,i.forwardRef)(function({size:e,defaultSize:r,animation:n,disableResizing:a,unsetSizeWhenDisabled:o,onResize:s,side:l,children:u,style:m,..._},g){let f=(0,d.M)(g),E=(0,i.useCallback)(()=>f.current,[f]),y=(0,i.useRef)(0),b=(0,i.useRef)(0),I="left"===l?-1:1,T=i.createElement(p.Provider,{value:E},a?null:i.createElement(h,{side:l,onDragStart:()=>{b.current=e,y.current||(y.current=e)},onDrag:e=>{let r="bottom"===l?e.delta.y:e.delta.x;s(b.current+r*I)},onDoubleClick:()=>{s(r??y.current)}}),u),v=a&&o?void 0:e,S="left"===l||"right"===l?v:void 0,w="bottom"===l?v:void 0,A=m?{...m,width:S,height:w}:{width:S,height:w};return n?i.createElement(c.P.div,{style:A,..._,ref:f,...n},T):i.createElement("div",{style:A,..._,ref:f},T)});function h({side:e,onDoubleClick:r,onDragStart:n,onDrag:o}){let[,s]=(0,a.i)({onDragStart:n,onDrag:o});return i.createElement("button",{...s({className:l()("bottom"===e?u.verticalHandle:u.horizontalHandle,u[e]),onDoubleClick:r})})}(0,i.forwardRef)(function(e,r){let{version:n}=(0,o.DP)(),{size:a,defaultSize:s,animation:l,disableResizing:c,onResize:d,side:u,children:p,...h}=e;return"ui2"===n?i.createElement("div",{...h,ref:r},p):i.createElement(m,{...e,ref:r})})},232531:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670),n(629019),n(62935),n(153234),n(617453),n(555074),n(869156),n(318812),n(279702),n(498606),n(218973),n(282263),n(683859),n(564092),n(533573),n(574176),n(538697),n(221537),n(614851)},876618:(e,r,n)=>{"use strict";n(411855),n(188507),n(939683),n(622422),n(966712),n(848661),n(555074),n(29680),n(601607),n(234945),n(279702),n(32067),n(221537)},221537:(e,r,n)=>{"use strict";n.d(r,{rO:()=>M}),n(411855),n(188507),n(634832);var i=n(340970),a=n(876579),o=n(698558),s=n(174496),l=n(532123),c=n(447501),d=n(902470),u=(n(587670),n(86625));n(595991),n(939683),n(44948),n(794272),n(966712);var p=n(374626),m=n(38580),h=(n(939863),n(973149)),_=n(83909);n(356390),n(617453),n(848661);var g=n(113058);n(555074),n(301462),n(234945),n(279702);var f=n(649295),E=n(969756),y=n(528822),b=n(355593),I=n(312077),T=n(792594),v=n(804264),S=n(127027),w=n(904459),A=n(715682),N=n(904595),C=n(396347),O=n(182586),L=n(464397),R=n(317392),P=n(183919),D=n(255032),k=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=5]="VERTICAL",e[e.ALL=6]="ALL",e))(k||{});function M(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}function F(e,r,n){return e!==r&&(_.wt.reportAnyPropertyChange([n]),!0)}P.A,R.A,C.A,L.A,D.A,O.A,N.A,i.z,a.M,o.v,s.R,l.K,c.y,d.z,v.A,S.A,y.A,b.A,I.A,T.A,f.A,E.A,A.A,A.A,w.A,w.A;class x extends g.M{getValueForNode(e){return M(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,r){!M(e.stackPrimaryAlignItems)&&F(e.stackSpacing,r,"stackSpacing")&&u.l7.user("set-stack-spacing",()=>{e.stackSpacing=r})}}new x;class U extends g.M{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,r){F(e.stackCounterSpacing,r,"stackCounterSizing")&&u.l7.user("set-stack-counter-spacing",()=>{e.stackSpacing=r})}}new U,h.Lk,h.Lk,(0,p.M2)((0,m.eU)({width:{min:!1,max:!1},height:{min:!1,max:!1}})),(0,p.M2)((0,m.eU)(null)),(0,p.M2)((0,m.eU)(null));var B=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",e))(B||{})},12519:(e,r,n)=>{"use strict";n.d(r,{gm:()=>s,pW:()=>o});var i=n(411855);n(188507),n(69107),n(587670),n(86625),n(629019),n(574176),n(46481),n(939863),n(356390),n(617453),n(848661),n(555074),n(301462),n(279702),n(498606),n(218973),n(760066),n(952675),n(538697),n(377835),n(893606),n(232531),n(876618),n(221537);var a=n(769502);function o({OriginalComponent:e,...r}){return i.createElement(e,{...r,inputClassName:a.be,iconClassName:a.Kk})}function s({OriginalComponent:e,...r}){return i.createElement(e,{...r,outerClassName:a.kk,pillsContainerClassName:a.j1})}},45148:(e,r,n)=>{"use strict";n.d(r,{aV:()=>p,oE:()=>m});var i=n(411855),a=n(498481);n(587670);var o=n(629019),s=n.n(o);n(794272),n(946689);var l=n(46481);n(939863),n(843495);var c=n(893606);n(690710),n(731262);var d=n(975687),u=n(87171);function p({title:e,children:r,flushWithContainer:n,appendedClassName:o}){let p=(0,c.R)();return i.createElement("div",{className:s()(n?d.jO:d.lG,o)},i.createElement("div",{className:d.Z7},i.createElement(l.U,{className:d.Ev,svg:u.A},i.createElement(a.r,null)),!p&&e),i.createElement("div",{className:d.t},p&&!!e&&i.createElement("div",{className:d.Qb},e),r))}function m({title:e,children:r,closeButton:n}){let o=(0,c.R)();return i.createElement("div",{className:d.Vf},i.createElement("div",{className:d.Ii},i.createElement("div",{className:d.Z7},i.createElement(l.U,{className:d.Ev,svg:u.A},i.createElement(a.r,null)),!o&&e),n),i.createElement("div",{className:d.t},o&&!!e&&i.createElement("div",{className:d.Qb},e),r))}},690710:(e,r,n)=>{"use strict";n.d(r,{NA:()=>d,OC:()=>u,ow:()=>p});var i=n(587670),a=n(97395),o=n(335682),s=n(731262);function l(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function c(e){let r=l(e);return r&&r.mode!==i.iCO.NONE&&r.mode!==i.iCO.NON_STATE_COMPONENTS?r.stateGroupModel:null}function d(e){let r=l(e);return r&&r.mode!==i.iCO.NONE&&r.mode!==i.iCO.NON_STATE_COMPONENTS?r.stateGroup:null}(0,a.Zm)(function(e){return c(e)?.stateGroupError});let u=(0,a.Zm)(function(e){return c(e)?.propertySortOrder}),p=(0,a.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&e.mode!==i.iCO.NONE&&e.mode!==i.iCO.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,s.dq)(e,r,n)):null),m=(0,a.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&(e.mode===i.iCO.STATE||e.mode===i.iCO.STATE_INSTANCE||e.mode===i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,s.dq)(e,r,n)):null);(0,a.P8)([m,function(e){return l(e)?.mode},c],(e,r,n)=>e&&n&&(r===i.iCO.STATE||r===i.iCO.STATE_INSTANCE||r===i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,s.m4)(e,n.propertySortOrder||[]):null)},731262:(e,r,n)=>{"use strict";n.d(r,{NE:()=>y,O4:()=>b,QV:()=>_,dq:()=>f,m4:()=>h,uL:()=>E,xJ:()=>p,zb:()=>g,zh:()=>m});var i=n(411855);n(188507);var a=n(587670),o=n(593779),s=n(302245),l=n(776250);n(83909),n(356390),n(843495);var c=n(848661),d=n(335682),u=n(416095);let p="\u2014";function m(e,r){return Object.keys(e).sort((e,n)=>r.indexOf(e)-r.indexOf(n)).map(r=>`${r}=${e[r]}`).join(", ")}function h(e,r,n){let i={};for(let a of e){if(void 0!==a.actionIndexPath&&void 0!==n&&a.actionIndexPath.some((e,r)=>e!==n[r]))continue;let{propertyValues:e}=a.stateInfo;if(e)for(let n of r)n in i&&i[n]!==e[n]?i[n]=i[n]&&e[n]?c.oV:"":i[n]=e[n]||""}return i}function _(e){return e.replace(/[,=]/g,"").trim()}function g(e,r,n){let i=a.glU.getStateGroupAnalyticsInfo(r);(0,l.sx)(e,{...i,...n||{}})}function f(e,r,n){return{stateInfo:e.stateInfo,symbol:(0,u.i_)(null,null,e.symbol,r||"",n||(0,o.l)("")),actionIndexPath:function(e){if(!e)return[];let r=e.match(/\{(.*?)\}/);return!r||r.length<2?[]:r[1].trim().split(",").map(e=>parseFloat(e.trim()))}(e.actionIndexPath)}}i.createContext(null);let E=(0,s.Mz)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,d.sS,d.XJ],function(e,r,n,i){if(!e)return null;let o=e.mode;if(o===a.iCO.NONE)return null;if(o===a.iCO.NON_STATE_COMPONENTS)return{mode:o,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let s=e.stateGroup,l=e.stateGroupModel,c=l?.propertySortOrder?.length===1,d=e.allStates.map(e=>f(e,r,n));if(o===a.iCO.STATE_GROUP)return{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c};let u=e.selectedStates.map(e=>f(e,r,n)),p=h(u,l.propertySortOrder||[],i);return a.iCO.STATE,{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c,selectedStates:u,selectedStatesPropertyValues:p}}),y=[["yes","no"],["true","false"],["on","off"]],b=y.reduce((e,r)=>e.concat(r),[])},376503:(e,r,n)=>{"use strict";n.d(r,{$6:()=>tm,EN:()=>td,NC:()=>tl,OH:()=>tc,SO:()=>ts,Th:()=>tp,_2:()=>ty,mP:()=>tu});var i=n(411855),a=n(188507),o=n(831841),s=n(902237),l=n(978783),c=n(921738),d=n(75819),u=n(319806),p=n(731369),m=n(900729),h=n(610155),_=n(245952),g=n(193753),f=n(706562),E=n(167),y=n(131449),b=n(586174),I=n(26172),T=n(339467),v=n(566506),S=n(871027),w=n(353344),A=n(885895),N=n(794105),C=n(443908),O=n(703828),L=n(459123),R=n(892535),P=n(587670),D=n(91408),k=n(966712),M=n(153234),F=n(572206),x=n(46481),U=n(348425),B=n(505113),V=n(939863),G=n(293017),H=n(31043),W=n(297336),K=n(226055),j=n(356390),z=n(848661),Y=n(29680),$=n(100197),q=n(279702),Z=n(498606),X=n(218973),J=n(205135),Q=n(7959),ee=n(410465),et=n(538697),er=n(746806),en=n(860168),ei=n(415979),ea=n(106524),eo=n(7479),es=n(313876),el=n(613887),ec=n(568154),ed=n(810381),eu=n(410671),ep=n(796476),em=n(625536),eh=n(761285),e_=n(430712),eg=n(920003),ef=n(110111),eE=n(134316),ey=n(800467),eb=n(234496),eI=n(222396),eT=n(144983),ev=n(237419),eS=n(824356),ew=n(316179),eA=n(900897),eN=n(260934),eC=n(729920),eO=n(161349),eL=n(748839),eR=n(467172),eP=n(155450),eD=n(706449),ek=n(204931),eM=n(328176),eF=n(340598),ex=n(625819),eU=n(660984),eB=n(641594),eV=n(773248),eG=n(710011),eH=n(98221),eW=n(15305),eK=n(822834),ej=n(494491),ez=n(554473),eY=n(866014),e$=n(448760),eq=n(256735),eZ=n(595324),eX=n(511219),eJ=n(123262),eQ=n(151809),e0=n(20918),e1=n(606409),e2=n(292030),e3=n(41025),e6=n(240078);let e8=(0,D.hG)(en.hhC);class e5 extends ee.I{}class e7 extends ee.Y{}class e4 extends et.l6{}class e9 extends et.c${}class te{constructor(){this.format=e=>{switch(e){case"LINE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.solid");case"SIMPLE_DASH":return(0,V.t)("fullscreen.properties_panel.stroke_settings.simple_dash");case"CUSTOM_DASH":return(0,V.t)("fullscreen.properties_panel.stroke_settings.custom");default:return""}}}}class tt extends ee.I{}class tr extends ee.Y{}function tn(e){return e.dashCap?(0,k.kc)().ce_tv_fpl_segmented_control?i.createElement("span",{className:e.className},i.createElement(o.b,{value:(0,z.hS)(e.dashCap)?e.dashCap:void 0,onChange:e.onChange,legend:i.createElement(s.q,null,(0,V.t)("fullscreen.properties_panel.stroke_settings.dash_cap")),recordingKey:e.recordingKey},i.createElement(o.c,{icon:i.createElement(x.U,{svg:ef.A,fallbackSvg:eE.A},i.createElement(d.Q,null)),value:"NONE","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.none")}),i.createElement(o.c,{icon:i.createElement(x.U,{svg:eI.A,fallbackSvg:eT.A},i.createElement(u.J,null)),value:"SQUARE","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.square")}),i.createElement(o.c,{icon:i.createElement(x.U,{svg:ey.A,fallbackSvg:eb.A},i.createElement(p.E,null)),value:"ROUND","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.round")}))):i.createElement(tt,{className:e.className,property:e.dashCap,onChange:e.onChange,recordingKey:e.recordingKey},i.createElement(tr,{svg:ef.A,fallbackSvg:eE.A,value:"NONE",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.none"),recordingKey:M.Pt(e,"NONE")}),i.createElement(tr,{svg:eI.A,fallbackSvg:eT.A,value:"SQUARE",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.square"),recordingKey:M.Pt(e,"SQUARE")}),i.createElement(tr,{svg:ey.A,fallbackSvg:eb.A,value:"ROUND",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.round"),recordingKey:M.Pt(e,"ROUND")})):null}function ti(e){return e?(0,z.gl)(e)?z.oV:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function ta(e){if(e){if((0,z.gl)(e))return z.oV;if(2===e.length)return e[0]}}function to(e){let r=(0,a.wA)(),n=(0,Y.ax)(),d=new te,{strokePanelMode:u,maxStrokeWeight:p,dashPattern:_,connectorLineStyle:g}=e,f=r=>{e.onChange({connectorLineStyle:r})},[E,y]=i.useState(ti(_));i.useEffect(()=>{y(ti(_))},[_]);let[b,I]=i.useState(!0),[T,v]=i.useState(),S=ta(_),w=function(e){if(e){if((0,z.gl)(e))return z.oV;if(2===e.length)return e[1]}}(_),A=()=>{if(!_||(0,z.gl)(_)||2!==_.length)return;I(!0);let r=_[0];e.onChange({dashPattern:[r,r]})},N=i.useRef("NONE"),C=i.createRef(),O=i.createRef(),L=i.createRef();i.useEffect(()=>{if("NONE"!==N.current){if("FOCUS_CURRENT_EVENT"===N.current)switch(E){case"SIMPLE_DASH":O.current?.focus(),O.current?.select();break;case"CUSTOM_DASH":C.current?.focus(),C.current?.select()}"FOCUS_NEXT_EVENT"===N.current?N.current="FOCUS_CURRENT_EVENT":N.current="NONE"}},[_,E,O,C]);let R=function(e){if((0,z.gl)(e))return z.oV;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}(e.dashCap),D=u===P.yTM.VERTEX||u===P.yTM.ENDPOINT,F=(0,a.d4)(e=>e.mirror.selectionProperties.numSelectedByType),U=(0,W.vx)(F,"CONNECTOR"),G=T??E;return i.createElement("div",{className:ei.wO},U&&void 0!==g&&i.createElement(Q.fI,null,i.createElement(Q.JU,{className:U?ei.Tm:ei.Uk},(0,V.tx)("fullscreen.properties_panel.stroke_settings.path_style")),(0,k.kc)().ce_tv_fpl_segmented_control?i.createElement("span",{className:ei.rI},i.createElement(o.b,{value:(0,z.hS)(g)?g:void 0,onChange:f,legend:i.createElement(s.q,null,(0,V.t)("fullscreen.properties_panel.stroke_settings.path_style")),recordingKey:M.Pt(e,"pathStyle")},i.createElement(o.c,{icon:i.createElement(x.U,{svg:e6.A},i.createElement(m.h,null)),value:"STRAIGHT","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.straight")}),i.createElement(o.c,{icon:i.createElement(x.U,{svg:e2.A,fallbackSvg:e3.A},i.createElement(h.S,null)),value:"ELBOWED","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.elbowed")}))):i.createElement(e5,{className:ei.rI,property:g,onChange:f,recordingKey:M.Pt(e,"pathStyle")},i.createElement(e7,{svg:e6.A,value:"STRAIGHT",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.straight"),recordingKey:M.Pt(e,"STRAIGHT")}),i.createElement(e7,{svg:e2.A,fallbackSvg:e3.A,value:"ELBOWED",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.elbowed"),recordingKey:M.Pt(e,"ELBOWED")}))),i.createElement(Q.fI,null,i.createElement(Q.JU,{className:D?ei.VB:ei._f},(0,V.tx)("fullscreen.properties_panel.stroke_settings.stroke_style")),i.createElement(e4,{id:"line-style-select",className:ei.au,property:E,formatter:d,onChange:(r,n=q.zk.YES)=>{N.current="FOCUS_NEXT_EVENT";let i=2*(p??1);switch(r){case"LINE":e.onChange({dashPattern:[]},n);break;case"SIMPLE_DASH":e.onChange({dashPattern:[i,i]},n);break;case"CUSTOM_DASH":e.onChange({dashPattern:[i,2*i,3*i,4*i]},n)}},dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:120,recordingKey:M.Pt(e,"strokeStyle"),icon:function(e){switch(e){case"LINE":return i.createElement(x.U,{svg:e0.A,fallbackSvg:e1.A},i.createElement(l.t,null));case"SIMPLE_DASH":return i.createElement(x.U,{svg:eJ.A,fallbackSvg:eQ.A},i.createElement(c.S,null));default:return}}(E),iconClassName:D?ei.uX:ei.eD,disabled:D,onPreview:e=>{v(e)},enablePreview:n},i.createElement(e9,{additionalStylesClassName:ei.Z,value:"LINE",recordingKey:M.Pt(e,"LINE")},i.createElement("span",{className:ei.Z},i.createElement(x.U,{className:ei.yW,svg:e0.A,fallbackSvg:e1.A},i.createElement(l.t,null)),i.createElement(B.o,{text:d.format("LINE")}))),i.createElement(e9,{value:"SIMPLE_DASH",recordingKey:M.Pt(e,"SIMPLE_DASH"),additionalStylesClassName:ei.Z},i.createElement("span",{className:ei.Z},i.createElement(x.U,{svg:eJ.A,fallbackSvg:eQ.A,className:ei.yW},i.createElement(c.S,null)),i.createElement(B.o,{text:d.format("SIMPLE_DASH")}))),i.createElement(et.sK,null),i.createElement(e9,{value:"CUSTOM_DASH",recordingKey:M.Pt(e,"CUSTOM_DASH")}))),("SIMPLE_DASH"===G||G===z.oV)&&i.createElement(i.Fragment,null,i.createElement(Q.fI,null,i.createElement(Q.JU,{className:D?ei.S_:ei.bP},(0,V.tx)("fullscreen.properties_panel.stroke_settings.dash")),i.createElement(X.$j,{className:ei.T7,min:0,value:ta(_),onValueChange:r=>{let n;if(N.current="NONE",!_||(0,z.gl)(_)||2!==_.length)n=[r,r];else{let e=_[0],i=_[1];n=b&&e===i?[r,r]:[r,i]}e.onChange({dashPattern:n})},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:M.Pt(e,"dash"),"data-tooltip-type":Z.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.stroke_settings.dash"),tooltipForScreenReadersOnly:!0,forwardedRef:O,disabled:D})),i.createElement(Q.fI,null,i.createElement(Q.JU,{className:D?ei.qF:ei.Jd},(0,V.tx)("fullscreen.properties_panel.stroke_settings.gap")),i.createElement(X.$j,{className:ei.rQ,min:0,value:void 0!==w&&(0,z.hS)(w)&&b&&S===w?void 0:w,placeholder:void 0!==w&&(0,z.hS)(w)&&b&&S===w?String(parseFloat(w.toFixed(2))):void 0,onValueChange:r=>{let n;N.current="NONE",I(!1),n=!_||(0,z.gl)(_)||2!==_.length?[r,r]:[_[0],r],e.onChange({dashPattern:n})},onBlur:e=>{L.current?.value===""&&A()},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:M.Pt(e,"gap"),"data-tooltip-type":Z.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.stroke_settings.gap"),tooltipForScreenReadersOnly:!0,forwardedRef:L,disabled:D}))),"CUSTOM_DASH"===G&&i.createElement(Q.fI,null,i.createElement(Q.JU,{className:D?ei.g5:ei.Rm},(0,V.tx)("fullscreen.properties_panel.stroke_settings.dashes")),i.createElement(J.nA,{className:ei.Ng,forwardedRef:C,formatter:H.B,property:e.dashPattern,onChange:r=>{e.onChange({dashPattern:r})},placeholder:(0,V.t)("fullscreen.properties_panel.stroke_settings.dash_gap"),recordingKey:M.Pt(e,"dashes"),disabled:D})),(u===P.yTM.VECTOR||u===P.yTM.LINE)&&("SIMPLE_DASH"===G||"CUSTOM_DASH"===G)&&void 0!==R&&i.createElement(Q.fI,null,i.createElement(Q.JU,{className:ei.$E},(0,V.tx)("fullscreen.properties_panel.stroke_settings.dash_cap")),i.createElement(tn,{className:ei.pl,dashCap:R,onChange:r=>{e.onChange({dashCap:r})},recordingKey:M.Pt(e,"dashCap")})))}to.displayName="StrokeLineStyleSettings";class ts extends et.l6{}class tl extends et.c${}class tc{constructor(){this.format=e=>{switch(e){case"NONE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,V.t)("fullscreen.properties_panel.stroke_settings.line_arrow");case"ARROW_EQUILATERAL":return(0,V.t)("fullscreen.properties_panel.stroke_settings.triangle_arrow");case"TRIANGLE_FILLED":return(0,V.t)("fullscreen.properties_panel.stroke_settings.reversed_triangle");case"CIRCLE_FILLED":return(0,V.t)("fullscreen.properties_panel.stroke_settings.circle_arrow");case"DIAMOND_FILLED":return(0,V.t)("fullscreen.properties_panel.stroke_settings.diamond_arrow");case"ROUND":return(0,V.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}}}let td={format(e){switch(e){case"NONE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_line");case"ARROW_EQUILATERAL":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_triangle");case"TRIANGLE_FILLED":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_reversed");case"CIRCLE_FILLED":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_circle");case"DIAMOND_FILLED":return(0,V.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_diamond");case"ROUND":return(0,V.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,V.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}},tu=["NONE","ARROW_LINES","ARROW_EQUILATERAL","TRIANGLE_FILLED","CIRCLE_FILLED","DIAMOND_FILLED"],tp=["ROUND","SQUARE"],tm=["NONE","ROUND","SQUARE"];function th(e,r){switch(e){case"NONE":return"default"===r?ex.A:eU.A;case"ARROW_LINES":return"default"===r?ek.A:eM.A;case"ARROW_EQUILATERAL":return"default"===r?ez.A:eY.A;case"TRIANGLE_FILLED":return"default"===r?eV.A:eG.A;case"DIAMOND_FILLED":return"default"===r?eL.A:eR.A;case"CIRCLE_FILLED":return"default"===r?eA.A:eN.A;case"ROUND":return ev.A;default:return eS.A}}function t_(e){let r=(0,a.wA)(),n=new tc,o=e.strokePanelMode===P.yTM.ENDPOINT,s=1===e.strokePanelTerminalPointCount||o;return i.createElement("div",{className:ei.wO},i.createElement(Q.fI,{"data-testid":"end-point-settings-row"},i.createElement(Q.JU,{disabled:e.disabled,className:e.disabled?ei.RR:ei.mZ},s?(0,V.t)("fullscreen.properties_panel.stroke_settings.end_point"):(0,V.t)("fullscreen.properties_panel.stroke_settings.end_points")),i.createElement(ts,{id:"end-point-select",className:ei.yc,property:e.endPoint,formatter:n,onChange:r=>{e.onChange({terminalCap:r}),e.onChange({strokeCap:r})},blurOnChange:!0,dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:200,recordingKey:e.recordingKey,icon:function(e,r){switch(e){case"NONE":default:return;case"ARROW_LINES":return r?i.createElement(x.U,{svg:eD.A,fallbackSvg:eF.A},i.createElement(_.N,null)):i.createElement(x.U,{svg:ec.A,fallbackSvg:ed.A},i.createElement(g.U,null));case"ARROW_EQUILATERAL":return r?i.createElement(x.U,{svg:ej.A,fallbackSvg:e$.A},i.createElement(f.P,null)):i.createElement(x.U,{svg:e_.A,fallbackSvg:eg.A},i.createElement(E.q,null));case"TRIANGLE_FILLED":return r?i.createElement(x.U,{svg:eB.A,fallbackSvg:eH.A},i.createElement(y.N,null)):i.createElement(x.U,{svg:eu.A,fallbackSvg:ep.A},i.createElement(b.k,null));case"DIAMOND_FILLED":return r?i.createElement(x.U,{svg:eO.A,fallbackSvg:eP.A},i.createElement(I.g,null)):i.createElement(x.U,{svg:es.A,fallbackSvg:el.A},i.createElement(T.x,null));case"CIRCLE_FILLED":return r?i.createElement(x.U,{svg:ew.A,fallbackSvg:eC.A},i.createElement(v.c,null)):i.createElement(x.U,{svg:ea.A,fallbackSvg:eo.A},i.createElement(S.J,null));case"ROUND":return r?i.createElement(x.U,{svg:eW.A},i.createElement(w.M,null)):i.createElement(x.U,{svg:em.A},i.createElement(A.B,null));case"SQUARE":return r?i.createElement(x.U,{svg:eK.A},i.createElement(N.Z,null)):i.createElement(x.U,{svg:eh.A},i.createElement(C.C,null))}}(e.endPoint,s),iconClassName:e.disabled?ei.qv:ei.O1,dropdownOverride:(0,z.gl)(e.endPoint)?void 0:"NONE"===e.endPoint?(0,V.t)("fullscreen.properties_panel.stroke_settings.none"):" ",disabled:e.disabled},tu.map(r=>i.createElement(tl,{key:r,value:r,recordingKey:M.Pt(e,r)},i.createElement("span",{className:ei.Z6},i.createElement(U.t,{className:ei.yW,svg:th(r,"default"),fallbackSvg:th(r,"fallback")}),i.createElement(B.o,{text:n.format(r)})))),i.createElement(et.sK,null),tp.map(r=>i.createElement(tl,{key:r,value:r,recordingKey:M.Pt(e,r)},i.createElement("span",{className:ei.Z6},i.createElement(U.t,{className:ei.yW,svg:th(r,"default"),fallbackSvg:th(r,"fallback")}),i.createElement(B.o,{text:n.format(r)})))))))}t_.displayName="EndPointSettings";class tg extends ee.I{}class tf extends ee.Y{}function tE(e){let r=(0,a.wA)(),n=r=>{e.onChange({strokeJoin:r})};return i.createElement("div",{className:ei.wO},i.createElement(Q.fI,null,i.createElement(Q.JU,{className:e.disabled?ei.u0:ei.PF},(0,V.tx)("fullscreen.properties_panel.stroke_settings.join"))," ",(0,k.kc)().ce_tv_fpl_segmented_control?i.createElement("span",{className:ei.fj},i.createElement(o.b,{value:e.disabled||(0,z.gl)(e.strokeJoin)?void 0:e.strokeJoin,onChange:n,legend:i.createElement(s.q,null,(0,V.t)("fullscreen.properties_panel.stroke_settings.join")),readonly:e.disabled,recordingKey:e.recordingKey},i.createElement(o.c,{icon:i.createElement(x.U,{svg:eZ.A},i.createElement(O.H,null)),value:"MITER","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.miter")}),i.createElement(o.c,{icon:i.createElement(x.U,{svg:eq.A},i.createElement(L.m,null)),value:"BEVEL","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.bevel")}),i.createElement(o.c,{icon:i.createElement(x.U,{svg:eX.A},i.createElement(R.m,null)),value:"ROUND","aria-label":(0,V.t)("fullscreen.properties_panel.stroke_settings.round_join")}))):i.createElement(tg,{className:ei.fj,property:e.disabled?void 0:e.strokeJoin,onChange:n,disabled:e.disabled,recordingKey:e.recordingKey},i.createElement(tf,{svg:eZ.A,value:"MITER",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.miter"),recordingKey:M.Pt(e,"MITER")}),i.createElement(tf,{svg:eq.A,value:"BEVEL",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.bevel"),recordingKey:M.Pt(e,"BEVEL")}),i.createElement(tf,{svg:eX.A,value:"ROUND",tooltip:(0,V.t)("fullscreen.properties_panel.stroke_settings.round_join"),recordingKey:M.Pt(e,"ROUND")}))),!e.disabled&&"MITER"===e.strokeJoin&&i.createElement(Q.fI,null,i.createElement(Q.JU,{className:e.disabled?ei.NW:ei.kF},(0,V.tx)("fullscreen.properties_panel.stroke_settings.miter_angle")),i.createElement(X.M4,{className:ei.Cj,disabled:e.disabled||"MITER"!==e.strokeJoin,value:e.miterLimitAngle,onValueChange:r=>{e.onChange({miterLimitAngle:r})},recordingKey:M.Pt(e,"miterAngle"),tooltipForScreenReadersOnly:!0,"data-tooltip-type":Z.Ib.TEXT,"data-tooltip":(0,V.t)("fullscreen.properties_panel.stroke_settings.miter_angle"),dispatch:r})))}function ty(e){let r=(0,a.wA)(),n=(0,$.J2)(P.Ez5.propertiesPanelState().isVertexSelectionAndHasEndpoints),o=(0,K.GS)();if(!e.pickerShown)return null;let s=new F.Mi(e.pickerShown.initialX,e.pickerShown.initialY),{strokePanelMode:l,strokePanelTerminalPointCount:c,numSelectedByType:d,arcRadius:u,arcSweep:p}=e,m=l===P.yTM.ENDPOINT||l===P.yTM.VECTOR&&c>0||n,h=l!==P.yTM.PENCIL,_=l===P.yTM.VECTOR||l===P.yTM.VERTEX,g=l===P.yTM.VECTOR&&0===c,f=g&&d&&1===Object.keys(d).length&&d.ELLIPSE&&1===u&&0!==p,E=e.strokePanelMode===P.yTM.VECTOR&&"LINE"!==ti(e.dashPattern)&&e.terminalCap?e.terminalCap:e.strokeCap;return i.createElement(er.vx,{title:o?(0,V.t)("fullscreen.properties_panel.stroke_settings"):(0,V.t)("fullscreen.properties_panel.stroke_settings.advanced_stroke"),initialPosition:s,headerSize:"small",onClose:()=>{r(G.XE()),j.Y5.deselectProperty()},recordingKey:M.Pt(e,"modal"),initialWidth:e8},i.createElement(to,{onChange:e.onChange,strokePanelMode:e.strokePanelMode,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,connectorLineStyle:e.connectorLineStyle,dashPattern:e.dashPattern,dashCap:e.dashCap,maxStrokeWeight:e.maxStrokeWeight,strokeCap:e.strokeCap,terminalCap:e.terminalCap,dropdownShown:e.dropdownShown,recordingKey:M.Pt(e.recordingKey,"lineStyle")}),m&&i.createElement(t_,{onChange:e.onChange,endPoint:E,dropdownShown:e.dropdownShown,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,disabled:g&&!f&&!n,recordingKey:M.Pt(e.recordingKey,"endPoint"),strokePanelMode:l}),h&&i.createElement(tE,{onChange:e.onChange,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,disabled:!_,recordingKey:M.Pt(e.recordingKey,"join")}))}tE.displayName="StrokeJoinAndMiterAngleSettings"},238093:(e,r,n)=>{"use strict";n.d(r,{A8:()=>y,OS:()=>g,WH:()=>T,bi:()=>I,dd:()=>E,yT:()=>v,zb:()=>f});var i=n(411855),a=n(188507),o=n(215122);n(587670);var s=n(534611),l=n(966712),c=n(154483),d=n(848661),u=n(29680),p=n(335682),m=n(622896),h=n(241691),_=n(173454);function g(e){return`styles-picker-${e}`}function f(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===g(e.inheritStyleKeyField)?e.stylePickerShown:null}function E(e){return e&&(0,s.fn)(e.guid)}function y(e){let r=(0,d.E7)(e);return r&&r!==o.n3.INVALID}function b({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:i}){let a=(0,d.E7)(n);if(!a)return null;let l=(0,d.E7)(i);if(!l)return null;let u=(0,s.dI)(l.guid),p=Object.values(e.local.styles).find(e=>e.node_id===u);if(p)return p.is_soft_deleted?null:p;let m=r.get(u);return m?{key:a,style_type:m.styleType,type:_.PW.STYLE,node_id:u,name:m.name,isLocal:!1,content_hash:m.styleVersionHash??void 0,userFacingVersion:(0,o.IA)(m.userFacingVersion),file_key:"",file_key_source:c.Ps.LOCAL_FILE,library_key:m.sourceLibraryKey}:null}function I({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:i}){if((0,l.kc)().ds_zombie_styles_fixes)return b({library:e,sceneGraph:r,inheritStyleID:i,inheritStyleKey:n});if(!y(n))return null;let a=(0,d.E7)(n);if(!a)return null;let o=Object.values(e.local.styles).find(e=>e.key===a);if(o&&!o.is_soft_deleted)return o;let s=(0,h.b)({library:e},a,(0,d.E7)(i));return s?.status==="loaded"?s.data:null}function T(e,r,n){let o=(0,a.d4)(e=>e.library),s=(0,u.eY)(),c=(0,m.bO)(),d=(0,p.tS)(),h=b({library:o,sceneGraph:s,inheritStyleKey:e,inheritStyleID:r}),_=i.useMemo(()=>{if(!e)return null;let i=I({library:o,inheritStyleKey:e,inheritStyleID:r,sceneGraph:s});if(i)return i;for(let r of Object.values(c))if(r?.status==="loaded"&&r.data.fileKey!==d){for(let i of(0,m.z5)(r,n))if(i.key===e)return i}return null},[r,e,c,o,d,s,n]);return(0,l.kc)().ds_zombie_styles_fixes?h:_}function v(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,dispatch:e.dispatch}}},783908:(e,r,n)=>{"use strict";n.d(r,{GC:()=>p,bf:()=>m,hg:()=>u});var i=n(411855),a=n(188507),o=n(297666),s=n(452246),l=n(378905),c=n(318812),d=n(575722);function u(e,r){let n=(0,a.wA)(),l=i.useMemo(()=>(0,o.s)(n,200),[n]);i.useEffect(()=>{r?.skip||l(s.GT({styleType:e}))})}function p(e){let r=(0,c.Um)();return i.useMemo(()=>r&&r.type===d.vG&&r.data.style.style_type===e?r:null,[r,e])}function m(e){let r=(0,a.d4)(e=>e.stylePreviewShown);return i.useMemo(()=>r.isShown&&!r.isCreating&&r.style.node_id===e.node_id&&(0,l.EF)(r.style,e),[r,e])}},377835:(e,r,n)=>{"use strict";n.d(r,{t:()=>o});var i=n(411855),a=n(236455);function o({providedClassName:e,OriginalComponent:r}){return i.createElement("div",{className:a.F},i.createElement(r,{providedClassName:e}))}},998905:(e,r,n)=>{"use strict";n.d(r,{AF:()=>h}),n(411855);var i=n(106075),a=n(930946),o=n(681625),s=n(315936);n(794272);var l=n(939863);n(356390),n(848661),n(279702);var c=n(691039),d=n(728314),u=n(229351),p=n(736002),m=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(m||{});function h(e){return e.rectangleCornerRadiiIndependent?{topLeft:e.rectangleTopLeftCornerRadius,topRight:e.rectangleTopRightCornerRadius,bottomRight:e.rectangleBottomRightCornerRadius,bottomLeft:e.rectangleBottomLeftCornerRadius}:{topLeft:e.cornerRadius??e.rectangleTopLeftCornerRadius,topRight:e.cornerRadius??e.rectangleTopRightCornerRadius,bottomRight:e.cornerRadius??e.rectangleBottomRightCornerRadius,bottomLeft:e.cornerRadius??e.rectangleBottomLeftCornerRadius}}u.A,i.a,p.A,a.$,c.A,o.w,d.A,s.t},937348:(e,r,n)=>{"use strict";n.d(r,{DJ:()=>P,Ul:()=>M,XL:()=>D,cf:()=>k});var i=n(411855),a=n(634832),o=n(831841),s=n(902237),l=n(149510),c=n(389054),d=n(738865),u=n(245116),p=n(815314),m=n(410276),h=n(587670),_=n(776250),g=n(966712),f=n(153234),E=n(520581),y=n(46481),b=n(939863),I=n(356390),T=n(848661),v=n(555074),S=n(100197),w=n(7959),A=n(410465),N=n(939791),C=n(432459),O=n(200482),L=n(720632),R=n(803612);function P(e){let r=i.createElement(E.E,{name:"text_align_horizontal"},i.createElement(F,{recordingKey:f.Pt(e.recordingKey,"textAlignHorizontal")})),n=i.createElement(E.E,{name:"text_align_vertical"},i.createElement(x,{textAlignVertical:e.textAlignVertical||T.oV,recordingKey:f.Pt(e.recordingKey,"textAlignVertical")}));return e.isUI3?i.createElement(N.fn,{ref:e.alignmentRowRef,leftLabel:(0,b.tx)("properties.label.alignment"),leftInput:r,rightLabel:null,rightInput:n,icon:e.iconButton}):i.createElement(w.fI,{className:C.lY,forwardedRef:e.alignmentRowRef,"data-onboarding-key":"type-panel-alignment-row"},i.createElement("div",{className:C.Xh},r),i.createElement("div",{className:C.qf},n),e.iconButton)}var D=(e=>(e.LEFT="text-align-left",e.CENTER="text-align-center",e.RIGHT="text-align-right",e.JUSTIFIED="text-align-justified",e))(D||{});class k extends A.I{}class M extends A.Y{}function F({recordingKey:e}){let r=(0,v.kl)("textAlignHorizontal")||T.oV,n=(0,T._W)((0,v.kl)("missingFont"),!1),u=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_HORIZONTAL);return(0,a.assertDev)(!!(r||u),"TypePanel missing textAlignHorizontal"),i.createElement(o.b,{legend:i.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_horizontal")),value:r,onChange:e=>{I.Y5.updateSelectionProperties({textAlignHorizontal:e})},readonly:u||n,recordingKey:e},i.createElement(o.c,{value:"LEFT","aria-label":(0,b.t)("fullscreen.type_panel.align_left"),icon:i.createElement(l.h,null)}),i.createElement(o.c,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_center"),icon:i.createElement(c.N,null)}),i.createElement(o.c,{value:"RIGHT","aria-label":(0,b.t)("fullscreen.type_panel.align_right"),icon:i.createElement(d.K,null)}))}function x(e){let r=(0,T._W)((0,v.kl)("missingFont"),!1),n=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_VERTICAL);return i.createElement(o.b,{value:e.textAlignVertical,onChange:e=>((0,g.kc)().ce_properties_panel_tracking&&(0,_.sx)("editor_type_panel_change",{key:"textAlignVertical",value:e}),I.Y5.updateSelectionProperties({textAlignVertical:e})),readonly:r||n,recordingKey:e.recordingKey,legend:i.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_vertical"))},i.createElement(o.c,{value:"TOP","aria-label":(0,b.t)("fullscreen.type_panel.align_top"),icon:i.createElement(y.U,{svg:L.A},i.createElement(u.b,null))}),i.createElement(o.c,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_middle"),icon:i.createElement(y.U,{svg:R.A},i.createElement(p.X,null))}),i.createElement(o.c,{value:"BOTTOM","aria-label":(0,b.t)("fullscreen.type_panel.align_bottom"),icon:i.createElement(y.U,{svg:O.A},i.createElement(m.z,null))}))}},708915:(e,r,n)=>{"use strict";n.d(r,{FX:()=>i}),n(411855),n(320063),n(966712),n(939863),n(456104),n(582947),n(397065),n(340514),n(893606),n(463546);let i="new_text_row_location_callout"},994481:(e,r,n)=>{"use strict";n.d(r,{TN:()=>c,cS:()=>d,dx:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(761725);let l=(0,i.forwardRef)(function({left:e,right:r,appendedClassName:n},a){let l=o()(s.RF,n);return i.createElement("div",{className:l,ref:a},e?i.createElement("div",{className:s.kb},e):null,r?i.createElement("div",{className:s.pG},r):null)}),c=(0,i.forwardRef)(function({children:e,appendedClassName:r},n){let a=o()(s.Pv,r);return i.createElement("div",{className:a,ref:n},e)}),d=(0,i.forwardRef)(function({label:e,input:r,appendedClassName:n},a){let l=o()(s.Od,n);return i.createElement("div",{className:l,ref:a},null!=e?i.createElement(u,null,e):null,i.createElement("div",{className:s.hF},r))});function u(e){return i.createElement("span",{"aria-hidden":"true",className:s.Pf,"data-non-interactive":!0},e.children)}(0,i.forwardRef)(function({label:e,leftInput:r,rightInput:n,appendedClassName:a},l){let c=o()(s.Y7,a);return i.createElement("div",{className:c,ref:l},i.createElement(u,null,e),i.createElement("div",{className:s.ig},r),i.createElement("div",{className:s.by},n))})},343559:(e,r,n)=>{"use strict";n.d(r,{mS:()=>p,r:()=>u});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(697652),c=n(939791),d=n(322515);let u=i.forwardRef(function({titleTx:e,icon:r,faded:n,isEmpty:a,...s},l){return i.createElement(c.DE,{...s,ref:l,appendedClassName:o()(d.En,d.VJ,{[d.yf]:n,[d.ry]:a},s.appendedClassName),input:i.createElement(c.Mw,null,e),label:null,icon:r})}),p=i.forwardRef(function({titleTx:e,input:r,faded:n,isEmpty:a,isPanelBodyCollapsedAtom:u,appendedClassName:p,...m},h){let _=o()(d.e4,{[d.yf]:n,[d.ry]:a},p);return i.createElement(s.D8,{className:_,forwardedRef:h,...m,"data-non-interactive":!0},i.createElement("div",{className:d.Dn},i.createElement(l.r2,{isPanelBodyCollapsedAtom:u||null}),i.createElement(c.Mw,null,e)),i.createElement("div",{className:d.Ix,"data-non-interactive":!0},r))});i.forwardRef(function({titleTx:e,faded:r,isEmpty:n,children:a,...s},l){return i.createElement(c.oO,{...s,ref:l,appendedClassName:o()(d.En,{[d.yf]:r,[d.ry]:n}),input:i.createElement(c.Mw,null,e)},a)}),i.forwardRef(function({titleTx:e,leftIcon:r,rightIcon:n,faded:a,isEmpty:s,...l},u){return i.createElement(c.pG,{...l,ref:u,appendedClassName:o()(d.En,{[d.yf]:a,[d.ry]:s}),input:i.createElement(c.Mw,null,e),leftIcon:r,rightIcon:n})}),i.forwardRef(function({titleTx:e,input:r,...n},a){return i.createElement(s.D8,{className:d.Ii,forwardedRef:a,...n,"data-non-interactive":!0},i.createElement("div",{className:d.DD},i.createElement(c.Mw,null,e)),i.createElement("div",{className:d.hF,"data-non-interactive":!0},r))})},939791:(e,r,n)=>{"use strict";n.d(r,{Ad:()=>b,DE:()=>y,Kg:()=>N,Mw:()=>S,Oe:()=>E,Y9:()=>A,fn:()=>f,my:()=>v,oO:()=>T,pG:()=>I,u9:()=>C});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(913016),c=n(574176),d=n(617453),u=n(309798),p=n(100197),m=n(179283),h=n(490393),_=n(78947),g=n(323316);let f=(0,i.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:a,appendedClassName:l,icon:c,...d},u){return i.createElement(s.D8,{className:o()(_.$f,l),forwardedRef:u,...d,"data-non-interactive":!0},null!=e?i.createElement(N,null,e):null,i.createElement("div",{className:_.Vp,"data-non-interactive":!0},r),null!=n?i.createElement(C,null,n):null,i.createElement("div",{className:_.ON,"data-non-interactive":!0},a),i.createElement(w,null,c))});(0,i.forwardRef)(function({label:e,leftIcon:r,input:n,rightIcon:a,...o},s){return i.createElement("div",{className:_.iv,ref:s,...o,"data-non-interactive":!0},null!=e?i.createElement(N,null,e):null,i.createElement("div",{className:_.dk,"data-non-interactive":!0},r),i.createElement("div",{className:_.Wy,"data-non-interactive":!0},n),i.createElement("div",{className:_.pK,"data-non-interactive":!0},a))});let E=(0,i.forwardRef)(function({label:e,leftIcon:r,input:n,firstRightIcon:a,secondRightIcon:o,...s},l){return i.createElement("div",{className:_.o7,ref:l,...s,"data-non-interactive":!0},null!=e?i.createElement(N,null,e):null,i.createElement("div",{className:_.dk,"data-non-interactive":!0},r),i.createElement("div",{className:_.Wy,"data-non-interactive":!0},n),i.createElement("div",{className:_.pK,"data-non-interactive":!0},a),i.createElement("div",{className:_.wm,"data-non-interactive":!0},o))}),y=(0,i.forwardRef)(function({label:e,input:r,icon:n,appendedClassName:a,...l},c){let d=o()(_.xx,a);return i.createElement(s.D8,{className:d,forwardedRef:c,...l,"data-non-interactive":!0},null!=e?i.createElement(N,null,e):null,i.createElement("div",{className:_.Vp,"data-non-interactive":!0},r),i.createElement(w,null,n))}),b=(0,i.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:a,...s},l){return i.createElement("div",{className:o()(_.cN,n),ref:l,...s,"data-non-interactive":!0},r?i.createElement(N,{alwaysShowLabel:a},r):null,i.createElement("div",{className:_.Vp,"data-non-interactive":!0},e))}),I=(0,i.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:a,...l},c){let d=o()(_.jz,a);return i.createElement(s.D8,{className:d,forwardedRef:c,...l,"data-non-interactive":!0},i.createElement("div",{className:_.q1,"data-non-interactive":!0}," ",e," "),i.createElement("div",{className:_.eK,"data-non-interactive":!0}," ",r," "),i.createElement("div",{className:_.H_,"data-non-interactive":!0}," ",n," "))}),T=(0,i.forwardRef)(function({input:e,children:r,appendedClassName:n,...a},l){let c=o()(_.qv,n);return i.createElement(s.D8,{className:c,forwardedRef:l,...a,"data-non-interactive":!0},i.createElement("div",{className:_.q1,"data-non-interactive":!0},e),i.createElement("div",{className:_.wH},r))});function v({}){return i.createElement("div",{"data-non-interactive":!0})}function S({children:e}){return i.createElement("span",{"aria-hidden":"true"},e)}function w({children:e}){return e?i.createElement("div",{className:_.to,"data-non-interactive":!0},e):null}(0,i.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:a,appendedClassName:l,topLeftInput:c,bottomLeftInput:d,topRightInput:u,bottomRightInput:p,leftInput:m,rightInput:h,...g},f){let E=o()(_.d1,l),y=null!=m?i.createElement("div",{className:_.kW},m):c,b=null!=h?i.createElement("div",{className:_.kW},h):u,I=null!=m?null:i.createElement("div",null,d),T=null!=h?null:i.createElement("div",null,p);return i.createElement(s.D8,{className:E,forwardedRef:f,...g,"data-non-interactive":!0},i.createElement(N,null,e),i.createElement(C,null,r),i.createElement(v,null),y,b,i.createElement("div",null,n),I,T,i.createElement("div",null,a))});let A=(0,i.forwardRef)(function({selected:e,grabberClassName:r,hideGrabber:n,singletonRow:a,dragging:l,children:d,selectedSecondary:u,containerClassName:p,...m},f){let E=!n&&(!a||l),y=e&&l?h.Aw:_.gB,b=u?_.kR:e?_.CZ:"";return i.createElement(s.D8,{...m,forwardedRef:f,className:o()(_.P6,b,p)},E&&i.createElement("div",{className:o()(r,{[_.tp]:l,[_.kI]:!l})},(!l||e)&&i.createElement(c.B,{className:y,svg:g.A})),d)});function N({children:e,alwaysShowLabel:r}){return O()||r?i.createElement("span",{"aria-hidden":"true",className:_.Qb,"data-non-interactive":!0},e):i.createElement(v,null)}function C({children:e}){return O()?i.createElement("span",{"aria-hidden":"true",className:_.iV,"data-non-interactive":!0},e):i.createElement(v,null)}let O=()=>{let e=null!=localStorage.getItem("property-labels-visible"),r=(0,p.J2)((0,d.UK)().showPropertyLabels),n=u.f(m.Fw)?.createdAt;return(0,i.useMemo)(()=>{let e=n??new Date;return!!e&&e<l.TL},[n])&&!e?((0,d.UK)().showPropertyLabels.set(!1),!1):r}},423324:(e,r,n)=>{"use strict";n.d(r,{d:()=>d});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(939791),c=n(78947);let d=(0,i.forwardRef)(function({leftInput:e,rightInput:r,leftLabel:n,rightLabel:a,leftIcon:d,rightIcon:u,appendedClassName:p,...m},h){let _=o()(c.ZD,p);return i.createElement(s.D8,{className:_,forwardedRef:h,...m,"data-non-interactive":!0},null!=n?i.createElement(l.Kg,null,n):null,i.createElement("div",{className:c.Vp,"data-non-interactive":!0},e),null!=a?i.createElement(l.u9,null,a):null,i.createElement("div",{className:c.ON,"data-non-interactive":!0},r),i.createElement("div",{className:c.dk,"data-non-interactive":!0},d),i.createElement("div",{className:c.pK,"data-non-interactive":!0},u))});(0,i.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:a,appendedClassName:d,collapsedLeftInput:u,collapsedRightInput:p,expandedTopLeftInput:m,expandedTopRightInput:h,expandedBottomLeftInput:_,expandedBottomRightInput:g,singleInput:f,showAllPaddingControls:E,showSinglePaddingControl:y,...b},I){let T=o()(c.KP,d),v=i.createElement("div",{className:c.Xv},f),S=i.createElement(i.Fragment,null,i.createElement("div",{className:c.Vp},u),i.createElement("div",{className:c.H$},p)),w=i.createElement(i.Fragment,null,i.createElement("div",{className:c.Vp},m),i.createElement("div",{className:c.ON},_),i.createElement("div",{className:c.H$},h),i.createElement("div",{className:c.Os},g));return i.createElement(s.D8,{className:T,forwardedRef:I,...b,"data-non-interactive":!0},i.createElement(l.Kg,null,e),i.createElement(l.u9,null,r),i.createElement(l.my,null),y?v:E?w:S,i.createElement("div",{className:c.dk},n),E&&a&&i.createElement("div",{className:c.pK},a))})},169006:(e,r,n)=>{"use strict";n.d(r,{E:()=>o});var i=n(324597),a=n(483990);function o(e){if(e.extensionSearchString)return e.extensionSearchString;let r=e.displayForQuickCommand?e.displayForQuickCommand:(0,i.Dz)(e);return(0,a.A)(r,e.args)}},901304:(e,r,n)=>{"use strict";n.d(r,{XG:()=>f,wI:()=>g}),n(411855);var i=n(675678),a=n(38329),o=n(374626),s=n(776621);n(419527);var l=n(988022),c=n(516703),d=n(239737),u=n(99888),p=n(65633),m=n(999140),h=n(30075),_=n(719624);function g({searchQuery:e,extensionId:r,moduleFilters:n,searchPosition:i,numSearchResults:a}){E({action:r,searchQuery:e,numSearchResults:a,rankingAlgorithm:(0,m.eg)(h.Jc.EXTENSIONS),searchPosition:i,module:h.Jc.EXTENSIONS,qaVersion:u.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}function f({action:e,numSearchResults:r,searchPosition:n,rankingAlgorithm:i,isSearchResult:a,moduleFilters:s}){E({action:e,searchQuery:o.zl.get(_.Q8),numSearchResults:r,rankingAlgorithm:i,searchPosition:n,qaVersion:u.$L,isAi:!0,isPlugin:!1,moduleFilters:s,isSearchResult:a,module:(0,p.x)()})}function E(e){let{quickActionsSessionId:r,quickActionsQueryId:n,currentSelection:p,fileKey:h,productType:g,source:f,role:E,hasAiFeatureAccess:y}=function(){let e=a.D.getState(),r=(0,c.l)(e),n=e.openFile?.key??"",p=(0,l.v5)(e.selectedView,null),h=o.zl.get(_.dd)??"";h||(0,s.$D)(i.FigmaTeam.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${u.OW}`));let g=o.zl.get(_.Rt);return{currentSelection:r,fileKey:n,productType:p,source:o.zl.get(_.rE)?.source??"",quickActionsSessionId:h,quickActionsQueryId:g,role:(0,m.WZ)(),hasAiFeatureAccess:(0,d.GG)()}}(),b={...e,quickActionsSessionId:r,currentSelection:p,fileKey:h,productType:g,quickActionsQueryId:n,source:f,role:E,hasAiFeatureAccess:y};(0,m.mi)(b)}n(169006)},987850:(e,r,n)=>{"use strict";n.d(r,{X:()=>c});var i=n(966712),a=n(38580),o=n(374626);n(915440),n(711525),n(279453),n(239737),n(132572);var s=n(222478);let l=(0,a.eU)(null);function c(e){let r=o.zl.get(l);if(!(0,i.kc)().qa_ai_metering||e===s.JT.ASSISTANT_CHAT||e===s.JT.FIND_INSPIRATION)return{withinMeter:!0};if(!r)return{withinMeter:!1};let n=r.find(r=>r.userActions.includes(e));if(!n)return{withinMeter:!1};let a=parseInt(n.remaining);return isNaN(a)?{withinMeter:!1}:{withinMeter:a>0,meterResetDate:n.resetsAt}}},239737:(e,r,n)=>{"use strict";n.d(r,{Ci:()=>w,GG:()=>T,Ko:()=>S,LC:()=>N,Nv:()=>A,vh:()=>I}),n(411855);var i=n(38329),a=n(966712),o=n(38580),s=n(374626),l=n(915440);n(711525);var c=n(218881),d=n(877723);n(809831);var u=n(960884),p=n(335682),m=n(69961);n(99506);var h=n(279453);n(243987),n(556261),n(56099);var _=n(984968);n(239671);var g=n(479296),f=n(132572),E=n(74487);let y=(0,o.eU)(a.tl().editing_file?.can_use_jubilee??!1),b=(0,o.eU)(!1),I=(0,g.n)(()=>{let e=(0,d.q8)(),r=(0,s.md)(y);return!!(0,E.$)()&&((0,a.kc)().qa_ai_metering?r:!e)});function T(){if(!(0,E.$)())return!1;let e=s.zl.get(y);if((0,a.kc)().qa_ai_metering)return e;let r=s.zl.get(u.Z),n=s.zl.get(_.Me),o=i.D.getState().openFile,l=!o||!o.canEdit;return!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:l})}(0,g.n)(e=>void 0!==e&&"loaded"===function(e){return(0,l.Rs)(h.GIl,{key:e},{enabled:!!e&&(0,f.AL)()&&(0,a.kc)().qa_ai_metering})}(e).status);let v=(0,g.n)(()=>{let e=(0,p.q5)(),r=(0,a.tl)().jubilee_b;return!!e&&!!r&&(e.parentOrgId?!!r.orgs[e.parentOrgId]:!!e.teamId&&!!r.teams[e.teamId])});function S(){if(!(0,E.$)()||!(0,a.kc)().api_asset_search)return!1;let e=s.zl.get(b);if((0,a.kc)().qa_ai_metering)return e;let r=s.zl.get(u.Z),n=s.zl.get(_.Me),o=i.D.getState().openFile,l=!o||!o.canEdit;return!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:l})}function w(e){return(0,a.kc)().api_asset_search?(e&&(0,a.kc)().asset_search_use_exp_perms&&m.nt.ui3.getValue()?(0,c.vs)("exp_search_ai_assets").then(e=>!!e.getValue("allow_ai_results",!1)):Promise.resolve(!1)).then(e=>{if(!e&&!(0,E.$)())return!1;let r=s.zl.get(b);if((0,a.kc)().qa_ai_metering)return r;let n=s.zl.get(u.Z),o=s.zl.get(_.Me),l=i.D.getState().openFile,c=!l||!l.canEdit;return!(0,d.lt)({currentOrg:n,currentTeam:o,isViewer:c})}):Promise.resolve(!1)}let A=(0,g.n)(e=>{let r=(0,d.q8)(),n=(0,s.md)(b);return!!((0,a.kc)().api_asset_search&&(function(e){let{getConfig:r}=(0,c.I7)("exp_search_ai_assets",void 0,!0);return!!r().getValue("allow_ai_results",!1)&&e&&m.nt.ui3.getValue()&&!!(0,a.kc)().asset_search_use_exp_perms}(e)||(0,E.$)()))&&((0,a.kc)().qa_ai_metering?n:!r)}),N=(0,g.n)(()=>{let e=(0,d.q8)(),r=(0,s.md)(b),n=v();return!!(0,E.$)()&&(!(0,a.kc)().asset_suggestions_require_completed_backfill||!!n)&&((0,a.kc)().qa_ai_metering?r:!e)});var C=(e=>(e.PERSONAL_DRAFT="PERSONAL_DRAFT",e.TEAM_OR_ORG_DISABLED="TEAM_OR_ORG_DISABLED",e.ORG_GUEST="ORG_GUEST",e.NON_PAID_SEAT="NON_PAID_SEAT",e.NO_ORG_OR_TEAM_USER="NO_ORG_OR_TEAM_USER",e.ROLLING_OUT="ROLLING_OUT",e))(C||{})},132572:(e,r,n)=>{"use strict";n.d(r,{AL:()=>s,C7:()=>c,Xk:()=>d,h8:()=>l,kK:()=>u,qF:()=>p});var i=n(38329),a=n(966712),o=n(74487);function s(){return!!(0,a.kc)().qa_v2&&(0,o.Q)()}function l(){let e=i.D;return(e?.getState().user?.locale!=="ja"||!!(0,a.kc)().fuzzy_escape_regexp)&&!!(0,a.kc)().qa_search_frecency&&(0,o.Q)()}function c(){return!!(0,a.kc)().asset_suggestions&&(0,o.$)()}function d(){return!!(0,a.kc)().hub_file_fragments}function u(){return!!(0,a.kc)().actions_hide_recents&&(0,o.$)()}function p(){return!!(0,a.kc)().eai_image_tools&&(0,o.$)()}},222478:(e,r,n)=>{"use strict";n.d(r,{HW:()=>a,II:()=>s,JT:()=>o,KL:()=>u,Xi:()=>l,gj:()=>d,i3:()=>c,wC:()=>i});let i=354,a=600;var o=(e=>(e.TRANSLATE_TEXT="translate-text",e.REWRITE_TEXT="rewrite-text",e.SHORTEN_TEXT="shorten-text",e.FIRST_DRAFT="first-draft",e.FIRST_DRAFT_MAKE_CHANGES="first-draft-make-changes",e.FIRST_DRAFT_MAKE_KIT="first-draft-make-kit",e.FIRST_DRAFT_COMPONENTIZE="first-draft-componentize",e.FIRST_DRAFT_SUGGEST_PROPS="first-draft-suggest-props",e.FIRST_DRAFT_LINTING="first-draft-linting",e.FIRST_DRAFT_DEBUG="first-draft-debug",e.FIND_INSPIRATION="find-inspiration",e.IMAGE_TO_DESIGN="image-to-design",e.REMOVE_BACKGROUND="remove-background",e.AUTO_RENAME_LAYERS="auto-rename-layers",e.GENERATE_IMAGE="generate-image",e.MAGIC_LINK="magic-link",e.CONTENT_FILL="content-fill",e.SLIDES_GENERATE_SPEAKER_NOTES="slides-generate-speaker-notes",e.SLIDES_REWRITE_TEXT="slides-rewrite-text",e.ASSISTANT_CHAT="assistant-chat",e.BOARD_TO_DECK="board-to-deck",e))(o||{});let s="https://help.figma.com/hc/en-us/articles/23870272542231",l="https://help.figma.com/hc/en-us/articles/23796390206743",c="https://help.figma.com/hc/en-us/articles/24004542669463",d="https://help.figma.com/hc/en-us/articles/24004711129879",u="https://help.figma.com/hc/en-us/articles/23796390206743"},432704:(e,r,n)=>{"use strict";n.d(r,{C:()=>s});var i=n(411855),a=n(320063);let o=(0,i.createContext)((0,i.createRef)());function s(e){let r=(0,i.useContext)(o);(0,a.h)(()=>{e.current&&""!==e.current.value&&!1===r.current&&e.current.select(),r.current=!0})}},54025:(e,r,n)=>{"use strict";n.d(r,{ES:()=>k,TC:()=>D,WP:()=>P});var i=n(411855),a=n(634832),o=n(675678),s=n(126049),l=n(776250),c=n(38329),d=n(38580),u=n(646240),p=n(374626),m=n(391388),h=n(776621),_=n(743282),g=n(572206),f=n(743905),E=n(809831),y=n(453681),b=n(335682),I=n(416095),T=n(933342),v=n(535257),S=n(435011),w=n(532888),A=n(239671),N=n(508567),C=n(48515),O=n(239737),L=n(719624),R=n(124008);let P=(0,d.eU)({currentSearch:null});function D({debounceWait:e=300}){let r=(0,R.s)(),n=(0,u.Xr)(P),a=(0,s.A)(k,e),o=(0,i.useCallback)(()=>{a.cancel(),n(()=>({currentSearch:null}))},[a,n]);return{debouncedAssetSearch:(0,i.useCallback)((e,n)=>{e?a({type:"input-text",query:e,assetTypeOption:n,isKnownLibrary:r}):o()},[a,o,r]),clearAssetSearchAndCancelDebounce:o,cancelDebouncedAssetSearch:a.cancel,flushDebouncedAssetSearch:a.flush}}async function k(e){let r=c.D.getState(),n=(0,b.tB)(r),i=(0,w.vx)(r),s=Date.now(),d=await (0,O.Ci)("input-text"===e.type);if(!n||null==i)return;let u=(0,_.g)(),g=p.zl.get(L.dd);p.zl.set(P,()=>({currentSearch:{queryId:u,input:e,result:m.Qw.loading()}}));try{let o,h=1;for(;!(0,T.Wg)(c.D.getState())&&h<=50;)await new Promise(e=>setTimeout(e,200*h)),h++;if(!(0,T.Wg)(c.D.getState()))throw Error("Failed to initialize assets");r=c.D.getState();let _={...e,openFile:(0,b.tB)(r),selectedView:(0,S.hK)(r),inDesignEditor:(0,E.XE)((0,S.hK)(r))===A.nT.Design,fileVersion:i,currentOrgId:(0,I.eD)(r),fileByKey:(0,w.t_)(r),libraryByLibraryKey:p.zl.get(y.qp)};switch(_.type){case"input-text":{let e=(await function(e,r){let{query:n,assetTypeOption:i,openFile:o,selectedView:s,inDesignEditor:l,fileVersion:c,currentOrgId:d,fileByKey:u,libraryByLibraryKey:p}=e;switch(i.type){case C.I.LOCAL:return T.YG.computeLocalResultsPromise(n,o?.key);case C.I.FILE:return T.YG.computeFileResultsPromise(n,i.fileKey,s?.view==="fullscreen"&&s?.fileKey||o?.key,l,r);case C.I.RECENT:case C.I.ALL:return T.YG.computeAllResultsPromise(n,l,c,d,o,s,u,p,r);default:return(0,a.assertNever)(i,"Unknown search type")}}(_,g)).normalizedSearchResults.filter(e=>_.isKnownLibrary(e));o=(0,T.Ow)(e);break}case"input-image":o=await F(_,g);break;case"input-selection":o=await x(_,g);break;default:(0,a.assertNever)(_)}if(p.zl.get(P).currentSearch?.queryId!==u)return;null===g&&(0,l.sx)("asset_search.missing_session_id",{previousSessionId:r.search.lastLoadedQuery.sessionId,entryPoint:r.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let f={aiResultsEnabled:d,elapsedTime:Date.now()-s,query:"input-text"===_.type?_.query:void 0,queryId:u,subscribedSearchResultCount:o.length,entryPoint:"input-text"===_.type?"actions_assets_tab":"actions_visual_search",fileKey:n?.key,numSubscribedLibraries:Array.from(T.YG.subscribedLibraryFileKeys).length,queryType:_.type.replace("input-",""),selectedViewFileKey:"fullscreen"===r.selectedView.view&&r.selectedView.fileKey?r.selectedView.fileKey:void 0};l.az.trackDefinedEvent("assets_panel.search_time",{...f,searchSessionId:g??""}),l.az.trackDefinedEvent("asset_search.query_result",{...f,sessionId:g??""}),o.slice(0,T.BJ).forEach((e,r)=>{(0,l.sx)("actions_assets_tab.top_k_results",{searchSessionId:g,queryId:u,query:"input-text"===_.type?_.query:void 0,queryType:_.type.replace("input-",""),fileKey:n?.key,position:r,scoreAi:e.ai_score,scoreLexical:e.lexical_score,aiResultEnabled:d,assetKey:(0,T.u2)(e),assetType:e.type})}),p.zl.set(P,()=>({currentSearch:{queryId:u,input:e,result:m.Qw.loaded(o)}}))}catch(r){if((0,h.$D)(o.FigmaTeam.SEARCH_AI,r),p.zl.get(P).currentSearch?.queryId!==u)return;p.zl.set(P,()=>({currentSearch:{queryId:u,input:e,result:m.Qw.error(r)}}))}}function M(e,r,n){let i;return e.assetTypeOption.type===C.I.FILE?i=JSON.stringify([e.assetTypeOption.fileKey]):n&&(T.YG.subscribedLibraryFileKeys.size<v.UR?i=JSON.stringify(Array.from(T.YG.subscribedLibraryFileKeys)):(0,l.sx)("actions_visual_search.maximum_subscribed_libraries_reached",{searchSessionId:r,fileKey:e.openFile?.key,fileVersion:e.fileVersion,currentOrgId:e.currentOrgId,numSubscribedLibraryFileKeys:Array.from(T.YG.subscribedLibraryFileKeys).length})),i}async function F(e,r){let n=await (0,f.yt)(e.imageFile),i=(0,f.m1)(new g.Mi(n.width,n.height)),a=await (0,f.SW)(n,i,e.imageFile);return(await N.$W.postComponentsFromImage(a,{openFileKey:e.openFile?.key||"",searchSessionId:r||"",subscribedLibraryFileKeys:M(e,r,await (0,O.Ci)(!1))})).data.meta}async function x(e,r){let n=(0,f.T1)(e.node);if(!n)throw Error("Failed to export thumbnail");return(await N.$W.postComponentsFromImage({type:"image",value:n},{openFileKey:e.openFile?.key||"",searchSessionId:r||"",subscribedLibraryFileKeys:M(e,r,await (0,O.Ci)(!1))})).data.meta}},16366:(e,r,n)=>{"use strict";n.d(r,{t:()=>a});var i=n(411855);function a(e,r){return(0,i.useCallback)(()=>!(e.manifest.parameters&&!1!==e.manifest.parameterOnly)&&!r,[e.manifest.parameters,e.manifest.parameterOnly,r])}},709731:(e,r,n)=>{"use strict";n.d(r,{Ag:()=>_,B3:()=>g,RL:()=>y,pP:()=>f,qy:()=>d,wj:()=>E,z8:()=>u});var i=n(374626),a=n(38580),o=n(776621),s=n(946465),l=n(232309),c=n(731718),d=(e=>(e.INITIAL="initial",e.RUNNING="running",e.CANCELLED="cancelled",e.ERROR="error",e.DONE="done",e))(d||{}),u=(e=>(e.INCOMPLETE="incomplete",e.SUCCEEDED="succeeded",e.FAILED="failed",e))(u||{});let p={action:"invalid",source:"invalid",clientLifecycleId:"invalid",quick_actions_session_id:"invalid",file_key:"invalid",product_type:"invalid"},m=(0,i.Iz)(()=>(0,a.eU)({state:"initial",aiTrackingContext:p,tasks:[]})),h="__ABORTED__";async function _(e,r,n,a){let d=m(e),{state:u,aiTrackingContext:p}=i.zl.get(d);if("running"===u){(0,o.xi)("quick-actions","Can't start action while another invocation of the same action is running");return}let _=new AbortController;i.zl.set(d,{state:"running",abortController:_,aiTrackingContext:p,tasks:[]}),(0,s.Dl)({...p,...a});try{let e=new Promise(e=>{_.signal.addEventListener("abort",()=>{e(h)})}),o=r({params:n,abortController:_,onTasksUpdate:e=>{i.zl.set(d,r=>({...r,tasks:e}))},clientLifecycleId:p.clientLifecycleId}),u=await Promise.race([o,e]);if(u!==h)return i.zl.set(d,e=>({state:"done",result:u,aiTrackingContext:p,tasks:e.tasks})),(0,c.k)(),(0,s.as)({...p,...a,status:l.dM.COMPLETED,reason:l.F9.SUCCESS}),u;i.zl.set(d,e=>({state:"cancelled",aiTrackingContext:p,tasks:e.tasks})),(0,s.as)({...p,...a,status:l.dM.FAILED,reason:l.F9.STOPPED});return}catch(e){_.abort(),(0,o.x1)("quick-actions","Error encountered running action",{error:e}),i.zl.set(d,r=>({state:"error",error:e,originalParams:n,aiTrackingContext:p,tasks:r.tasks})),(0,s.as)({...p,...a,status:l.dM.FAILED,reason:l.F9.ERROR})}}function g(e){let r=m(e);if("running"===i.zl.get(r).state)return;let n=(0,s.Uu)(e);i.zl.set(r,{state:"initial",aiTrackingContext:n,tasks:[]})}function f(e){let r=m(e);return i.zl.get(r)}function E(e){let r=m(e);return(0,i.md)(r)}function y(e,r,n){let a=m(e),o=(0,i.md)(a),s=async i=>await _(e,r,i,n);return{...o,start:s,stop:()=>{!function(e){let r=m(e),n=i.zl.get(r);"running"===n.state&&n.abortController.abort()}(e)}}}},562432:(e,r,n)=>{"use strict";n.d(r,{cq:()=>c,i8:()=>u,jX:()=>d});var i=n(188507),a=n(374626),o=n(318812),s=n(384775),l=n(719624);function c(){let[e,r]=(0,a.fp)(l.YH),n=(0,l.hw)(),c=(0,l.jh)(),d=(0,i.wA)(),u=(0,o.Um)();function p(e){(0,s.jD)(d,u,{forceClose:e})&&c()}return{push:function(i,{shouldResetSearchQuery:a=!0}={}){r([i,...e]),a&&n()},pop:function(){0!==e.length&&r(e.slice(1))},replace:function(n){r([n,...e.slice(1)])},current:e[0],close:function(){p(!0)},autoClose:function(){p(!1)},isRoot:0===e.length}}function d(){return 0===a.zl.get(l.YH).length}function u(){return a.zl.get(l.YH)[0]}},341255:(e,r,n)=>{"use strict";n.d(r,{m:()=>C});var i=n(411855),a=n(188507),o=n(86625),s=n(939863),l=n(760835),c=n(466636),d=n(376441),u=n(662275),p=n(964197),m=n(780700),h=n(269167),_=n(641638),g=n(170786),f=n(335682),E=n(694687),y=n(860178),b=n(555328),I=n(239671),T=n(376485),v=n(307292),S=n(436318),w=n(928754),A=n(16366),N=n(562432);function C({augmentedExtension:e,submenuRef:r,displayAboveTarget:n}){let{extension:g,publishedExtension:C,canRun:L,canRequest:R}=e,P=(0,a.wA)(),{close:D}=(0,N.cq)(),k=h.EO(C),M=h.OY(C),F=M&&h.gn(C),x=(0,v.Kp)(e),U=function(e){let r=(0,y.TA)(),n=(0,a.d4)(e=>e.authedActiveCommunityProfile),o=h.ej(e);return i.useCallback(()=>{if(!e)return;let i=b.aL.QUICK_ACTIONS;(0,l.mG)(e,i,r,n?.id),o()},[e,r,n,o])}(C),B=i.useCallback(()=>{P(d.v({}))},[P]),V=(0,m.Gt)(g.plugin_id,"quick-actions"),G=(0,S.q8)(g),H=(0,S.U4)(g),W=(0,S.S3)({submenuIsShown:H,extension:g,displayAboveTarget:n}),K=(0,A.t)(g,G),j=i.useCallback(()=>{(0,T.k0)(g)?o.l7.user("insert-widget",()=>O(g)):G&&r?W(r.current):V(),G||x(),K()&&D()},[g,G,r,x,K,W,V,D]),z=(0,f.q5)(),Y=(0,_.RW)(),$=i.useCallback(()=>{if(!z||!z.parentOrgId)return;let e={extension:{pluginId:g.plugin_id,iconUrl:g.redirect_icon_url,name:g.name},isWidget:(0,T.k0)(g),orgId:z.parentOrgId,workspaceDetails:Y.loaded?Y.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,I.wN)(z.editorType)};P((0,u.to)({type:w.S,data:e}))},[P,g,z,Y]),q=(0,E.sZ)(),Z=(0,p.a)(q?.id,g.plugin_id,Y.loaded?Y.data?.workspaceId:void 0);return i.useMemo(()=>{let e=C?.monetized_resource_metadata;return k&&!M&&e?{onAction:U,actionText:(0,c.XR)(e)}:k&&F?{onAction:B,actionText:(0,s.t)("qa.extensions.update_payment")}:L?{onAction:j,actionText:(0,s.t)("qa.extensions.run")}:Z?{onAction:()=>{},actionText:(0,s.t)("qa.extensions.approval_pending")}:R?{onAction:$,actionText:(0,s.t)("qa.extensions.request_approval")}:{onAction:()=>{},actionText:""}},[k,M,C,U,F,B,L,R,Z,$,j])}let O=e=>{(0,g.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:e.id,triggeredFrom:"quick-actions"})}},706966:(e,r,n)=>{"use strict";n(384775),n(719624)},362745:(e,r,n)=>{"use strict";n.d(r,{T:()=>_});var i=n(411855),a=n(966712),o=n(498750),s=n(860601),l=n(939863),c=n(921472),d=n(780700),u=n(875571),p=n(30075),m=n(266173),h=n(562432);function _(e){let r=function(e){let{push:r}=(0,h.cq)(),{extension:n}=e,o=function(e){if(e.manifest.parameters){let r=(0,d.IK)(e);return(0,u.o0)(r)}return null}(n);if(o&&e.canRun&&(0,a.kc)().qa_parameter_plugins)return()=>{r({module:i.createElement(m.r,{onExitParameterEntry:s.lQ,triggeredFrom:"quick-actions",parameters:o.parameters,displayName:o.displayName,parameterOnly:o.parameterOnly,pluginId:o.pluginId,pluginLocalFileId:o.pluginLocalFileId,command:o.command,initialParameterValues:void 0,recentlyUsedCommandName:(0,c.xn)(e)}),name:p.Sn.PLUGIN_PARAMETER_ENTRY})}}(e);if(r)return{text:(0,l.t)("qa.extensions.run_with_parameters"),onAction:r,shortcuts:[{key:o.Uz.TAB}]}}},99888:(e,r,n)=>{"use strict";n.d(r,{$L:()=>m,Be:()=>u,NP:()=>_,Nv:()=>h,OW:()=>d,RA:()=>s,U3:()=>p,W3:()=>a,gc:()=>l,mP:()=>o,qE:()=>i,tq:()=>f,uP:()=>g});var i=(e=>(e.VIEWER="viewer",e.EDITOR="editor",e))(i||{});let a="Quick Actions Search",o="open-quick-actions",s="Quick Actions Search Query Result",l="search-quick-actions";var c=(e=>(e.EXTENSION="extension",e.ACTION="action",e))(c||{});let d="Quick Actions Action",u="Quick Actions Panel Button",p="quick_actions_v1",m="quick_actions_v2",h="frecency",_="string-match",g="extensions",f="assets"},999140:(e,r,n)=>{"use strict";n.d(r,{Ev:()=>b,Fi:()=>v,M$:()=>A,Mq:()=>S,WZ:()=>N,eg:()=>I,mi:()=>w,zF:()=>C});var i=n(411855),a=n(188507),o=n(634832),s=n(776250),l=n(344780),c=n(374626),d=n(38580),u=n(988022),p=n(683694),m=n(335682),h=n(239737),_=n(132572),g=n(30075),f=n(719624),E=n(185997),y=n(99888);function b(){let e=(0,c.md)(m.ze)||"",r=(0,a.d4)(e=>e.selectedView),n=(0,c.md)(f.rE),o=n?.source||"",d=(0,c.md)(p.wg)?y.qE.EDITOR:y.qE.VIEWER,_=(0,h.vh)();return(0,i.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:i,searchQuery:a,numSearchResults:c,currentSelection:p,module:m,moduleFilters:h,qaVersion:g,searchQueryResults:f})=>{var E;E={quickActionsSessionId:n,quickActionsQueryId:i,searchQuery:a,numSearchResults:c,currentSelection:p,module:m,moduleFilters:h,qaVersion:g,fileKey:e,searchLatencyMs:l.sn.tryStop(y.gc),searchQueryResults:f,source:o,rankingAlgorithm:I(m),productType:(0,u.v5)(r,null),role:d,hasAiFeatureAccess:_},(0,s.sx)(y.RA,E,{forwardToDatadog:!0})},[e,_,d,r,o])}function I(e){switch(e){case g.Jc.ALL:return(0,_.h8)()?y.Nv:y.NP;case g.Jc.EXTENSIONS:return y.uP;case g.Jc.ASSETS:case g.Sn.ASSETS_TAB_DETAIL_VIEW:return y.tq;default:(0,o.assertNever)(e)}}function T(e){if(!e)return!1;if(e===g.Jc.ALL||e===g.Jc.ASSETS||e===g.Jc.EXTENSIONS)return!0;switch(e){case g.Sn.ASSETS_TAB_DETAIL_VIEW:case g.Sn.VISUAL_SEARCH:return!0;case g.Sn.EXTENSION_DETAILS:case g.Sn.REGENERATE_TEXT_TOAST:case g.Sn.MAGIC_LINK_DONE_TOAST:case g.Sn.BACKGROUND_REMOVE_TOAST:case g.Sn.RENAME_LAYERS_TOAST:case g.Sn.GENERATE_IMAGE:case g.Sn.IMAGE_TO_DESIGN:case g.Sn.MAGIC_LINK:case g.Sn.PLUGIN_PARAMETER_ENTRY:case g.Sn.PLUGIN_SUBMENU_ENTRY:case g.Sn.TRANSLATE:case g.Sn.REWRITE:case g.Sn.SHORTEN:case g.Sn.FIRST_DRAFT:case g.Sn.FIRST_DRAFT_KIT_PICKER:case g.Sn.FIRST_DRAFT_MAKE_CHANGES:case g.Sn.FIRST_DRAFT_LINT:case g.Sn.FIRST_DRAFT_DEBUG:case g.Sn.FIRST_DRAFT_MAKE_KIT:case g.Sn.ASSISTANT_CHAT:case g.Sn.LINK_TO_COMPONENT:case g.Sn.FOR_TESTING:return!1;default:(0,o.assertNever)(e)}}function v({isQAV2:e,moduleToOpen:r}){return!e||!r||("tab"===r.type?T(r.module):"custom"===r.type?T(r.name):void(0,o.assertNever)(r))}function S(e){(0,s.sx)(y.W3,e,{forwardToDatadog:!0})}function w(e){(0,s.sx)(y.OW,e,{forwardToDatadog:!0})}function A(e,r){return{...e,onAction:n=>{var i;let a=n.shortcut;i={source:r,shortcutText:a?(0,E.OZ)(a):"",actionText:e.text||""},(0,s.sx)(y.Be,i),e.onAction&&e.onAction(n)}}}function N(){return c.zl.get(p.wg)?y.qE.EDITOR:y.qE.VIEWER}let C=(0,d.eU)(null)},384775:(e,r,n)=>{"use strict";n.d(r,{$I:()=>D,Jf:()=>M,KY:()=>U,RM:()=>V,gn:()=>B,h$:()=>H,iP:()=>x,jD:()=>k});var i=n(587670),a=n(707458),o=n(344780),s=n(38329),l=n(38580),c=n(374626),d=n(743282),u=n(392592),p=n(153887),m=n(738269),h=n(809831),_=n(988022),g=n(408405),f=n(516703),E=n(239671),y=n(279145);n(893606);var b=n(987850),I=n(239737),T=n(132572),v=n(479296),S=n(222478),w=n(99888),A=n(999140),N=n(30075),C=n(719624),O=n(230642),L=n(28298),R=n(994172);let P=(0,l.eU)(null);function D({trackingData:e,moduleToOpen:r}){let n=s.D.dispatch;if((0,g.T)(s.D.getState().progressBarState.mode)||"fullscreen"!==s.D.getState().selectedView.view)return;let l=B(r);(0,A.Fi)({isQAV2:l,moduleToOpen:r})&&o.sn.start(w.mP);let h=s.D.getState(),E={keyboardShortcut:"",currentSelection:(0,f.l)(h),fileKey:h.openFile?.key??"",productType:(0,_.v5)(h.selectedView,null),role:(0,A.WZ)(),hasAiFeatureAccess:(0,I.GG)(),...e};if(c.zl.set(A.zF,e.source),c.zl.set(C.rE,E),l){if(c.zl.set(C.Bu,!0),c.zl.get(C.dd)||(c.zl.set(C.dd,(0,d.g)()),c.zl.set(p.q4)),c.zl.set(P,null),r){if(r.beforeModuleOpen){let e=function(){let e=c.zl.get(C.dd);if(!e)throw Error("Session ID is missing when opening a module in Quick Actions V2.");return{sessionId:e,canvasSelection:a.q.instance.getCurrentPage()?.directlySelectedNodes,searchQuery:c.zl.get(C.Q8)}}();r.beforeModuleOpen(e)}"tab"===r.type?(c.zl.set(C.Lk,r.module),r.filter&&c.zl.set(L.t,r.filter)):c.zl.set(C.YH,e=>[{module:r.module,name:r.name},...e])}i.qmM.setDefaultTool(),n(u.F.dequeue({matchTimeout:"ephemeral"}))}else n(m.j7({type:y.jv,hasOwnEscKeyHandler:!0,data:{fireQuickActionsTrackingEvent:e=>{(0,A.Mq)({...E,qaVersion:w.U3,quickActionsSessionId:e,timeToShowModal:o.sn.tryStop(w.mP)||0,module:N.Jc.ALL})}}}))}function k(e,r,n){if(c.zl.get(C.Bu)){if(!n.forceClose&&c.zl.get(C.ZG))return!1;c.zl.set(C.Bu,!1),c.zl.set(C.dd,null),(0,R.R)(),(0,O.b)()}else r?.type===y.jv&&e(m.oB());return!0}function M(e){return c.zl.get(C.Bu)||e?.type===y.jv}function F(e){for(let r of Object.values(S.JT))if(e===r)return r;return null}function x(e,r={}){!(!(0,T.AL)()||c.zl.get(C.Bu))&&(!F(e)||(0,I.GG)())&&function(e){let r=F(e);if(!r)return!0;let{withinMeter:n}=(0,b.X)(r);return n}(e)&&(c.zl.get(C.dd)||c.zl.set(C.dd,(0,d.g)()),c.zl.set(P,{action:e,payload:r}))}function U(){c.zl.get(P)&&(c.zl.set(P,null),c.zl.set(C.dd,null))}function B(e){let r=i.Ez5.uiState().isUI3.getCopy(),n=s.D.getState().selectedView,a=(0,h.JV)(n),o=a&&a!==E.nT.Whiteboard;return!!((0,T.AL)()&&o&&(r||e))}let V=(0,v.n)((e,r)=>{let n=r?.isUI3??i.Ez5.uiState().isUI3.getCopy(),a=s.D.getState().selectedView,o=r?.editorType??(0,h.JV)(a),l=o&&(o===E.nT.Design||o===E.nT.Slides);return!!((0,T.AL)()&&l&&(n||e))});class G{isQuickActionsShown(){return M(s.D.getState().dropdownShown)}}function H(){new G}},719624:(e,r,n)=>{"use strict";n.d(r,{Bu:()=>y,Bw:()=>u,JB:()=>v,Lk:()=>_,Q8:()=>m,Rt:()=>h,Sf:()=>f,TT:()=>p,YH:()=>E,ZG:()=>T,dd:()=>g,fq:()=>I,hw:()=>w,jh:()=>S,rE:()=>b});var i=n(411855),a=n(288706),o=n(38580),s=n(374626),l=n(877822),c=n(743282),d=n(30075);let u=(0,a.tx)({}),p=(0,a.tx)(null),m=(0,a.tx)(""),h=(0,o.eU)((0,c.g)());(0,o.eU)({loaded:!1,extensions:[]});let _=(0,a.tx)(d.Jc.ALL),g=(0,a.tx)(null),f=(0,o.eU)(null);(0,o.eU)(null);let E=(0,a.tx)([]);(0,s.Iz)(e=>(0,o.eU)(r=>{let[n]=r(E);return n?.name===e}));let y=(0,o.eU)(!1),b=(0,o.eU)(null),I=(0,o.eU)(0),T=(0,o.eU)(!1);function v(){let e=(0,l.AY)(p);return(0,i.useCallback)(()=>{e()},[e])}function S(){let e=(0,l.AY)(p),r=(0,l.AY)(m),n=(0,l.AY)(E),a=(0,l.AY)(_);return(0,i.useCallback)(()=>{e(),r(),n(),a()},[n,r,e,a])}function w(){let e=(0,l.AY)(m);return(0,i.useCallback)(()=>{e()},[e])}},610043:(e,r,n)=>{"use strict";n.d(r,{E:()=>l});var i=n(411855),a=n(762638),o=n(278733),s=(e=>(e.DEFAULT="default",e.BRAND="brand",e.ON_MENU="on_menu",e))(s||{});function l({children:e,variant:r="default",focused:n=!1}){let s=a.cx.b1.flex.h16.py0.px4.font11.itemsCenter.justifyCenter.gap4.bRadius5.match(r,{default:a.cx.colorBorder.colorTextSecondary,brand:a.cx.colorTextBrand,on_menu:a.cx.colorTextMenuSecondary}).$,l=o.sx.if("on_menu"===r,o.sx.add({borderColor:"var(--color-badge-border, var(--color-border-menu))"})),c=o.sx.if(n,o.sx.add({borderColor:"var(--color-border-selected)"})),d=l.add(c).$;return i.createElement("div",{className:s,style:d,"data-testid":"qav2-item-badge"},e)}},199819:(e,r,n)=>{"use strict";n.d(r,{P:()=>l});var i=n(411855),a=n(256296),o=n(485463);n(574176);var s=n(356235);function l(e){let r=i.createElement(a.h,null,e.label);return i.createElement("div",{className:s.kv},i.createElement(o.S,{checked:e.checked,disabled:e.disabled,label:r}))}},992795:(e,r,n)=>{"use strict";n.d(r,{ms:()=>y,rX:()=>b});var i=n(411855),a=n(535904),o=n(326331),s=n(841563),l=n.n(s),c=n(358145),d=n(498750),u=n(153234),p=n(268537);n(723325);var m=n(762638),h=n(318812),_=n(720488);n(24191);var g=n(505016),f=n(111176),E=n(891487);function y(e){return i.createElement(v,{...e,buttonComponent:I})}function b(e){return i.createElement(v,{...e,buttonComponent:T})}function I(e){let r=(0,i.useMemo)(()=>e.selected?e.labelForSelectedItem?e.labelForSelectedItem(e.selected):e.selected.toString():e.placeholder,[e]),n=u.rf(u.Pt(e,"dropdownButton"),"click",()=>{e.onSelect()});return i.createElement(g.l,{onClick:e=>{e.stopPropagation(),n()},iconSuffix:i.createElement(o.r,null),variant:"secondary",disabled:e.disabled},r)}function T(e){let r=u.rf(u.Pt(e,"dropdownIconButton"),"click",()=>{e.onSelect()});return i.createElement(a.d,{"aria-label":e.iconAriaLabel,toggled:e.isActive,variant:"secondary",onClick:e=>{e.stopPropagation(),r()}},e.iconSvg)}function v(e){let r=i.useRef(null),n=e.buttonRef||r,a=(0,i.useId)(),o=e.id??a,{toggle:s,hide:u,showing:g}=(0,h.BK)(o),y=(0,c.ZC)(g),[b,I]=(0,i.useState)(),T=()=>{let e=n.current;e&&(I(e.getBoundingClientRect()),document?.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur(),s())},v=(0,i.useCallback)(()=>{u()},[u]),{onFocus:S,active:w}=e;(0,i.useEffect)(()=>{S&&w&&S()},[w,S]),(0,E.kz)(d.Uz.ENTER,r=>{if(!r.target||!w)return;let n=e.items.filter(e=>"checkableOption"===e.type).find(e=>e.text===r.target.text);n&&A(n),T()},w);let A=(0,i.useCallback)(r=>{r.disabled||(r.onSelectOverride?r.onSelectOverride():e.onSelectedChange&&r.value&&e.onSelectedChange(r.value),v())},[v,e]);return(0,i.useEffect)(()=>{void 0!==y&&y!==g&&e.onVisibleChange?.(g)},[y,e,g]),i.createElement("div",null,i.createElement("div",{ref:n},i.createElement(f.c,{active:!!w},i.createElement(e.buttonComponent,{...e,onSelect:T,isActive:g}))),g&&b&&i.createElement(_.Jz,{lean:e.lean||"left",targetRect:b,displayAboveTarget:e.displayAboveTarget,hideDropdown:v,maxWidth:e.maxWidth,autoHeight:!0,autofocusPrevOnDismount:!0,options:e.items.map((r,n)=>{switch(r.type){case"header":return i.createElement(p.c$,{key:n,disabled:!0},i.createElement("div",{className:m.cx.overflowHidden.ellipsis.block.$},r.text));case"separator":return i.createElement(p.wv,{key:n});case"option":return i.createElement(p.c$,{key:n,disabled:r.disabled,onClick:()=>A(r)},i.createElement("div",{className:m.cx.overflowHidden.ellipsis.block.$},r.text));case"checkableOption":return i.createElement(p.MM,{key:n,disabled:r.disabled,onClick:()=>A(r),checked:l()(e.selected,r.value)},i.createElement("div",{className:m.cx.overflowHidden.ellipsis.block.$},r.text))}})}))}n(387193)},100140:(e,r,n)=>{"use strict";n.d(r,{fu:()=>f,oz:()=>g});var i=n(411855),a=n(715748),o=n(196294),s=n(498750),l=n(153234),c=n(24191);n(992795);var d=n(111176),u=n(891487),p=n(695426),m=n(187703),h=n(343090),_=n(52352);function g({tabId:e,onAction:r,children:n,navigatingShortcut:o,recordingKey:p}){let g=(0,h.U)(),f=(0,l.Pt)(g,"tabs",p??e),y=(0,i.useRef)(null),{activeTabId:b}=i.useContext(E),{active:I,target:T}=(0,c.H)({ref:y,createPath:(e,r)=>({path:[e,0],column:r}),focusOptions:{autoFocusOverride:b===e,enableAutoFocus:!1}});(0,u.TH)(o?[o]:[],e=>{e.preventDefault(),r()});let v=(0,i.useMemo)(()=>({shortcuts:[{key:s.Uz.ENTER}],onAction:r}),[r]),{onClickCallback:S}=(0,m.k)({primaryAction:v,active:I,actionLabel:!1,target:T}),w=(0,l.rf)(f,"click",S);return i.createElement("button",{ref:y,tabIndex:0,onClick:w},i.createElement(d.c,{active:I},i.createElement("div",{className:_.e},i.createElement(a.c,{id:e,value:e}),i.createElement("label",{htmlFor:e},n))))}function f({children:e,onChange:r,value:n}){return i.createElement(p.B,{primary:!1,gap:8,fullWidth:!0,justify:"space-between"},i.createElement(o.b,{value:n,onChange:r,className:_.g},i.createElement(E.Provider,{value:{activeTabId:n}},e)))}let E=i.createContext({activeTabId:""})},387193:(e,r,n)=>{"use strict";n.d(r,{AD:()=>g,AM:()=>p,L0:()=>h,MQ:()=>u,Uz:()=>d,Yf:()=>c,bE:()=>m,tm:()=>f,zp:()=>E});var i=n(411855),a=n(860601),o=n(743282),s=n(318812);class l{constructor(){this.listLength=0,this.map=new Map}reset(){this.listLength=0,this.map=new Map}register(e,r,n){if(!this.map.has(e)){void 0!==n?this.listLength+=n:this.listLength++;let i=this.listLength-1;return this.map.set(e,{index:i,ref:r}),i}return this.map.get(e)?.index??-1}unregister(e){this.map.delete(e),this.listLength--}getRef(e){for(let[r,{index:n,ref:i}]of this.map.entries())if(n===e)return i;return null}}class c{constructor(){this.items=[],this.listeners=new Map}register(e,r=a.lQ){null===e.ref.current||this.items.findIndex(r=>r.id===e.id)>-1||(this.items=[...this.items,e].sort((e,r)=>{var n;return e.ref.current&&r.ref.current?(n=e.ref.current,r.ref.current.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING)?-1:1:0}).filter(e=>null!==e.ref.current),this.listeners.set(e.id,r),this.notifyItemsChanged())}unregister(e){this.items=this.items.filter(r=>r.id!==e),this.listeners.delete(e),this.notifyItemsChanged()}getRef(e){return this.items[e]?.ref??null}getIndex(e){return this.items.findIndex(r=>r.id===e)}reset(){this.items=[]}findFirstIndexWith(e){return this.items.findIndex(e)}notifyItemsChanged(){for(let e of this.listeners.values())e()}}let d=i.createContext({tracker:new c,renderId:0,setRenderId:a.lQ}),u=i.createContext({trackerRef:i.createRef(),layoutIndex:-1}),p=i.createContext({trackerRef:i.createRef(),layoutIndex:-1,columns:1});function m(e){let r=i.useContext(d),n=(0,s.Um)();(0,i.useEffect)(()=>{n||e.current?.focus()},[r.renderId,n,e])}function h(e,r){let n=i.useRef(new l),{tracker:a}=i.useContext(d),o=(0,i.useId)(),[s,c]=i.useState(-1);i.useEffect(()=>(a.register({id:o,ref:e,primary:r},()=>c(a.getIndex(o))),()=>{a.unregister(o)}),[o,r,e,a]);let u=a.findFirstIndexWith(e=>!!e.primary);return{tracker:n,index:s,isPrimaryLayout:u<0?void 0:u===s}}let _=i.createContext({});function g(e){let r=i.useContext(u),n=i.useContext(p);r.trackerRef.current?.reset(),n.trackerRef.current?.reset();let a=(0,o.g)();return i.createElement(_.Provider,{value:a},e.children)}function f(e){let r=i.useContext(u),n=(0,i.useContext)(_),a=(0,i.useId)(),[o,s]=i.useState(-1),l=y(r.layoutIndex);return(0,i.useLayoutEffect)(()=>{r.trackerRef?.current&&s(r.trackerRef.current.register(a,e))},[r.trackerRef,a,e,n]),{itemIndex:y(o),layoutIndex:l,inPrimaryLayout:r.primary}}function E(e,r=!1){let n=i.useContext(p),a=(0,i.useContext)(_),o=(0,i.useId)(),[s,l]=i.useState(-1),c=y(n.layoutIndex),d=y(r?0:s%n.columns),u=y(Math.floor(s/n.columns));return(0,i.useLayoutEffect)(()=>{n.trackerRef?.current&&l(n.trackerRef.current.register(o,e,r?n.columns:void 0))},[n.trackerRef,o,e,a,n.columns,r]),{rowIndex:u,itemIndex:y(s),layoutIndex:c,columnIndex:d,inPrimaryLayout:n.primary}}function y(e){return e<0?0:e}},307292:(e,r,n)=>{"use strict";n.d(r,{Kp:()=>u,w0:()=>p});var i=n(411855),a=n(188507),o=n(293017),s=n(124271),l=n(261607),c=n(29680),d=n(169006);function u(e){let r=p();return(0,i.useCallback)(()=>{r((0,s.NG)(e))},[r,e])}function p(){let e=function(){let e=(0,a.d4)(e=>e.recentlyUsedQuickCommands),r=(0,a.wA)();return(0,i.useCallback)(n=>{let i=(0,d.E)(n),a=n.runPluginArgs,s=e.filter(e=>e.displayName!==i);s.unshift({displayName:i,runPluginArgs:a}),r(o.PQ(s))},[r,e])}(),r=(0,l.c)(),n=(0,c.p8)("isReadOnly");return(0,i.useCallback)((i,a)=>{let o=(0,s.UK)({item:i,isReadOnly:n,extensionMenuProps:r,includeDisabled:!0,isSubmenuChild:a});o.length>1||e(o[0])},[e,r,n])}},276060:(e,r,n)=>{"use strict";n.d(r,{O:()=>z});var i=n(411855),a=n(188507),o=n(756437),s=n(498481),l=n(913817),c=n.n(l),d=n(560945),u=n(966712),p=n(374626),m=n(498750),h=n(723325),_=n(762638),g=n(939863),f=n(154483),E=n(278733),y=n(271245),b=n(453681),I=n(669178),T=n(335682),v=n(336599),S=n(809073),w=n(48515),A=n(969504),N=n(545816),C=n(986231),O=n(938720),L=n(734017),R=n(132572),P=n(54025),D=n(829639),k=n(719624),M=n(750600),F=n(543216),x=n(167913),U=n(27892),B=n(943341),V=n(905641),G=n(663834),H=n(168519),W=n(393068),K=n(796616),j=n(573213);function z({numberOfGridColumns:e=4,maxResults:r,stretchEmptyStates:n=!1,header:l,suggestion:d,onClickSuggestion:u,largeSpacing:f}){let{currentSearch:E}=(0,p.md)(P.WP),A=(0,a.d4)(T.tB),C=(0,N.O)(),O=(0,p.md)(b.oE),L=(0,I.g5)(S.$A.Design).productComponents,H=(0,v.oh)(y.fi),W=(0,h.z3)("faux"),K=(0,D.s)(E),j="";E&&"input-text"===E.input.type?j=E.input.query:K&&(j=K.name);let z=f?12:8;if(!(0,R.kK)()&&H||E?.result.status==="loading")return i.createElement("div",null,!H&&l&&i.createElement(Y,{title:l.title}),i.createElement(U.V,{columns:e,padding:z,gap:12},Array.from({length:r??3*e}).map((e,r)=>i.createElement(U.V.Item,{key:r},i.createElement("div",{className:_.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},i.createElement(B.Y,{animationDelay:150*r})),i.createElement("div",{className:_.cx.wFull.pt8.$},i.createElement(x.O.Container,null,i.createElement(x.O.SkeletonLine,{index:r}),i.createElement(x.O.SkeletonLine,{index:r,bottom:!0})))))));if(!E||"disabled"===E.result.status){if(0===L.length||(0,R.kK)())return i.createElement("div",{className:_.cx.if(n,_.cx.hFull).$},i.createElement(G.S,{fillHeight:n},i.createElement(F.N,null,i.createElement(F.N.ArtworkIcon,null,i.createElement(o.W,null)),i.createElement(F.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.initial_state.title")}))));let a=L.slice(0,r??L.length).map((e,r)=>i.createElement(q,{key:e.node_id,asset:e,libraryNameByResourceId:C,fileNameByLibraryKey:O,assetTypeDropdownSelection:w.I.ALL,searchQuery:j,queryId:E?E.queryId:"",searchSessionId:p.zl.get(k.dd)??"",openFileKey:A?.key??"",sectionPosition:r,onDragStart:W}));return i.createElement("div",{"data-testid":"recents-assets-grid"},l&&i.createElement(Y,{title:l.title,seeMore:l.seeMore}),i.createElement(V.a,null),i.createElement(M.x,{primary:!0,columns:e,padding:z,gap:12},a))}if("errors"===E.result.status)return i.createElement("div",{className:_.cx.if(n,_.cx.hFull).$},l&&i.createElement(Y,{title:l.title,seeMore:l.seeMore}),i.createElement(G.S,{fillHeight:n},i.createElement(F.N,null,i.createElement(F.N.ArtworkIcon,{variant:"danger"},i.createElement(s.r,null)),i.createElement(F.N.Text,{title:(0,g.t)("assets_in_actions.assets_section.error.title"),subtitle:(0,g.t)("assets_in_actions.assets_section.error.description")}))));if(0===E.result.data.length)return i.createElement("div",{className:_.cx.if(n,_.cx.hFull).$},l&&i.createElement(Y,{title:l.title}),i.createElement(G.S,{fillHeight:n},i.createElement("span",{className:_.cx.textBodyMedium.colorTextSecondary.$},(0,g.tx)("assets_in_actions.assets_section.no_results.title",{query:c()(j,{length:24})}))));let $=E.result.data.slice(0,r??E.result.data.length).map((e,r)=>i.createElement(q,{key:e.node_id,asset:e,libraryNameByResourceId:C,fileNameByLibraryKey:O,assetTypeDropdownSelection:w.I.ALL,searchQuery:j,queryId:E?E.queryId:"",searchSessionId:p.zl.get(k.dd)??"",openFileKey:A?.key??"",sectionPosition:r,onDragStart:W}));return d&&$.push(i.createElement(M.x.Item,{key:"suggestion",fullWidth:!0,primaryAction:{text:"Search designs",shortcuts:[{key:m.Uz.ENTER}],onAction:u},singleClick:!0},i.createElement(M.x.GridItemHighlight,null,d))),i.createElement("div",null,l&&i.createElement(Y,{title:l.title,seeMore:l.seeMore}),i.createElement(V.a,null),i.createElement(M.x,{primary:!0,columns:e,padding:z,gap:12},$))}function Y({title:e,seeMore:r}){let n=r?i.createElement(H.p,{onAction:r.onAction,recordingKey:r.recordingKey},r.title):i.createElement("div",{className:_.cx.h24.$});return i.createElement(W.X,{paddingHorizontal:16},i.createElement(W.X.Title,{endEnhancer:n},e))}let $=(0,f.fv)();function q({asset:e,libraryNameByResourceId:r,fileNameByLibraryKey:n,assetTypeDropdownSelection:a,searchQuery:o,openFileKey:s,sectionPosition:l,onDragStart:c,disableActionShortcuts:d}){let p=$(e),m=p?r?.[p]:void 0,h=e.library_key?n?.[e.library_key]:void 0,g=(0,u.u4)("ds_use_lib_keys",h,m),{afterSuccessfulInsert:f,componentInsertSwapCallback:E}=(0,K.H$)({asset:e,assetTypeDropdownSelection:a,sectionPosition:l,openFileKey:s}),{primaryAction:y,secondaryAction:b,tertiaryAction:I}=(0,j.b)()({asset:e,afterSuccessfulInsert:f,componentInsertSwapCallback:E,disableActionShortcuts:d});return i.createElement(M.x.Item,{primaryAction:y,secondaryAction:b,tertiaryAction:I},i.createElement(M.x.GridItemHighlight,null,i.createElement(Z,{asset:e,sectionPosition:l,fileName:g,isSearch:!!o,onDragStart:c,afterSuccessfulInsert:f})),i.createElement(M.x.ItemFooter,null,i.createElement("div",{className:_.cx.pt8.flex.flexColumn.gap2.alignLeft.$},i.createElement("span",{className:_.cx.textBodyMedium.colorText.truncate.$},e.name),i.createElement("span",{className:_.cx.textBodyMedium.colorTextSecondary.truncate.$},g))))}function Z({asset:e,sectionPosition:r,isSearch:n,afterSuccessfulInsert:a,fileName:o,onDragStart:s}){let l=(0,C.Y)(e),c=(0,i.useRef)(null),[u,p]=i.useState({width:0,height:0});(0,d.w)(c,()=>{p({width:c.current?.clientWidth??0,height:c.current?.clientHeight??0})});let m=(0,A.F)(e,L.K.ACTIONS_ASSETS,r,"Actions Component Search");return i.createElement("div",{className:_.cx.wFull.$,style:E.sx.add({aspectRatio:"1/1"}).$},i.createElement("div",{ref:c,className:_.cx.wFull.hFull.$},i.createElement(O.lX,{item:e,showName:!1,height:u.height,width:u.width,draggable:{sourceForTracking:"actions_assets_tab",clickToInsert:!1,afterSuccessfulInsert:a,sectionNameForTracking:K.Bd,onDragStart:s},shouldHideTooltip:!0,isSearch:n,useBaseTile:!0,hideNameOverlay:!1,numVariants:l,displayType:"grid",sectionPosition:r,showTooltipImmediately:!1,fileName:o,alwaysShowBorder:!1,onContextMenu:m})))}},248513:(e,r,n)=>{"use strict";n.d(r,{B$:()=>ea});var i=n(411855),a=n(188507),o=n(634832),s=n(219728),l=n(767129),c=n(189904),d=n(818150);n(629019),n(913817),n(776250);var u=n(91408),p=n(320063),m=n(374626),h=n(646240),_=n(860601),g=n(96328),f=n(743282),E=n(762638),y=n(939863),b=n(153887),I=n(743905);n(271245);var T=n(318812),v=n(669178),S=n(335682);n(336599);var w=n(516703),A=n(809073),N=n(498606),C=n(48515),O=n(781525),L=n(56063),R=n(708873),P=n(287213),D=n(132572),k=n(54025),M=n(562432),F=n(99888),x=n(999140),U=n(30075),B=n(719624),V=n(695426),G=n(644233),H=n(268645),W=n(849232),K=n(100140),j=n(459179),z=n(891682),Y=n(853284);n(543216);var $=n(233387),q=n(652875),Z=n(276060),X=n(699306),J=n(173842),Q=n(572069),ee=n(719256),et=n(663834),er=n(124008),en=n(273602);let ei="actions-asset-tab-library-filter";function ea({initAssetSearch:e=!1,closeOnEscape:r=!1,initialTab:n=q.x.COMPONENTS}){let ea=(0,Y.V)(),el=(0,D.Xk)(),ec=(0,Q.A)(),ed=i.useRef(null),{currentSearch:eu}=(0,m.md)(k.WP),ep=(0,m.md)(I.hO.currentSearchAtom),em=(0,m.md)(I.hO.currentCommunitySearchAtom),[eh,e_]=(0,m.fp)(B.Q8),eg=(0,h.Xr)(B.Rt),{recentFragments:ef}=(0,I.cN)(!ea),eE=(0,J.U)(ea);(0,L.b)({disabled:!e});let ey=(0,T.Um)(),{close:eb}=(0,M.cq)(),eI=(0,R.j)(),[eT,ev]=(0,P.g)(),eS=eI.localAssets,ew=0===eS.numComponents&&0===eS.numTemplates&&0===eT.length&&0===ev.length,{debouncedAssetSearch:eA,clearAssetSearchAndCancelDebounce:eN,cancelDebouncedAssetSearch:eC,flushDebouncedAssetSearch:eO}=(0,k.TC)({debounceWait:300}),{debouncedFragmentTextSearch:eL,clearFragmentSearchAndCancelDebounce:eR,cancelDebouncedFragmentTextSearch:eP,flushDebouncedFragmentTextSearch:eD}=(0,z.S)({debounceWait:300,entryPoint:I.G4.ACTIONS_ASSETS_TAB_DETAIL}),{debouncedFragmentTextSearch:ek,cancelDebouncedFragmentTextSearch:eM,clearFragmentSearchAndCancelDebounce:eF,flushDebouncedFragmentTextSearch:ex}=(0,z.S)({debounceWait:300,entryPoint:I.G4.ACTIONS_ASSETS_TAB_DETAIL,isCommunity:!0}),[eU,eB]=i.useState({type:C.I.ALL}),eV=i.useCallback(e=>{eB(e),eA(eh,e),eO()},[eA,eO,eh]),eG=(0,er.s)(),eH=i.useRef(null);(0,p.h)(()=>()=>{m.zl.set(b.q4),function(e,r,n,i,a,o){let s=m.zl.get(B.dd),l=m.zl.get(S.ze);s&&l&&(e&&(n&&es(e)&&(0,I.Hl)({type:"input-text",value:e,file_key:l},o,m.zl.get(b.CZ),m.zl.get(I.hO.sortByAtom)),eo(e)&&(0,k.ES)({type:"input-text",query:e,assetTypeOption:{type:C.I.ALL},isKnownLibrary:a}),i&&es(e,!0)&&(0,I.Hl)({type:"input-text",value:e,file_key:l},o,m.zl.get(b.CZ),m.zl.get(I.hO.sortByAtom),void 0,!0)),r())}(m.zl.get(B.Q8),_.lQ,ea,el,eG,I.G4.ACTIONS_ASSETS_TAB_DETAIL)});let[eW,eK]=s.tU.useTabs({[q.x.COMPONENTS]:!0,[q.x.FRAGMENTS]:ea,[q.x.COMMUNITY]:el},{defaultActive:n}),ej=(0,v.g5)(A.$A.Design).productComponents.length,ez=ef?ef.length:0,eY=(0,i.useMemo)(()=>eK.activeTab===q.x.COMPONENTS?ej:eK.activeTab===q.x.FRAGMENTS?ez:(eK.activeTab,q.x.COMMUNITY,0),[ej,ez,eK.activeTab]);!function({activeTab:e,numRecentItems:r,isEmptySearchQuery:n}){let o=(0,m.md)(B.dd),s=(0,m.md)(B.Rt),l=(0,a.d4)(w.l),{query:c,queryId:d,results:u,loaded:p}=function(e){let{currentSearch:r}=(0,m.md)(k.WP),n=(0,m.md)(I.hO.currentSearchAtom);return e===q.x.COMPONENTS?{query:r?.input.type==="input-text"?r.input.query:"",queryId:r?.queryId,results:r?.result.data||[],loaded:r?.result.status==="loaded"}:e===q.x.FRAGMENTS?{query:n?.input.type==="input-text"?n.input.value:"",queryId:n?.searchId,results:n?.result.data||[],loaded:n?.result.status==="loaded"}:{query:"",queryId:"",results:[],loaded:!1}}(e),h=(0,x.Ev)(),_=(0,i.useRef)(new Set),g=`${e}-${d}`;(0,i.useEffect)(()=>{(p||r>0&&n)&&!_.current.has(g)&&(h({quickActionsSessionId:o||"invalid-for-assets-tab",quickActionsQueryId:s,searchQuery:c,numSearchResults:p?u.length:r,currentSelection:l,module:U.Sn.ASSETS_TAB_DETAIL_VIEW,moduleFilters:e,qaVersion:F.$L,searchQueryResults:""}),_.current.add(g))},[h,o,s,l,g,e,c,u.length,p,r,n])}({activeTab:eK.activeTab,numRecentItems:eY,isEmptySearchQuery:0===eh.length});let e$=i.useCallback(e=>{switch(e){case q.x.COMPONENTS:ea&&eP(),el&&eM(),eo(eh)&&(eA(eh,eU),eO());break;case q.x.FRAGMENTS:eC(),el&&eM(),es(eh)&&(eL(eh),eD());break;case q.x.COMMUNITY:ea&&eP(),eC(),es(eh,!0)&&(ek(eh),ex());break;default:(0,o.assertNever)(e)}eK.setActiveTab(eW[e].id),ed.current?.focus()},[eP,eA,eU,eO,eC,eL,eD,eh,eK,eW,ea,el,eM,ek,ex]),eq=i.useCallback(e=>{e_(e),eg((0,f.g)()),(eK.activeTab===q.x.COMPONENTS||0===e.length)&&eA(e,eU),ea&&(eK.activeTab===q.x.FRAGMENTS||0===e.length)&&eL(e),eK.activeTab===q.x.COMMUNITY&&el&&ek(e)},[e_,eg,eK.activeTab,ea,el,eA,eU,eL,ek]),eZ=i.createElement(K.fu,{value:eK.activeTab,onChange:_.lQ,numItems:el?3:2},i.createElement(K.oz,{tabId:q.x.COMPONENTS,onAction:()=>e$(q.x.COMPONENTS)},(0,y.tx)("assets_in_actions.detail_view.components_tab.title")),ea&&i.createElement(K.oz,{tabId:q.x.FRAGMENTS,onAction:()=>e$(q.x.FRAGMENTS)},(0,y.tx)("assets_in_actions.detail_view.fragments_tab.title")),el&&i.createElement(K.oz,{tabId:q.x.COMMUNITY,onAction:()=>e$(q.x.COMMUNITY)},(0,y.tx)("assets_in_actions.detail_view.community_tab.title"))),eX=eu?.queryId,eJ=ep?.searchId,eQ=em?.searchId,e0=ea&&eu&&"loaded"===eu.result.status?i.createElement("div",{className:E.cx.flex.wFull.colorBgSecondary.itemsCenter.px8.py6.radiusMedium.$},i.createElement(c.N,{style:{"--color-icon":"var(--color-icon-brand)"}}),i.createElement("span",{className:E.cx.ml8.textBodyMedium.$},ec?(0,y.tx)("assets_in_actions.fragments.fragment_search_sugggestion",{boldText:i.createElement("span",{className:E.cx.textBodyMediumStrong.$},(0,y.tx)("assets_in_actions.fragments.fragment_search_sugggestion_bold_text")),orgText:(0,g.EJ)(ec,20)}):(0,y.tx)("assets_in_actions.fragments_section.empty_state.text")),i.createElement("span",{className:E.cx.mlAuto.textBodyMediumStrong.colorTextBrand.$},(0,y.tx)("assets_in_actions.fragments.fragment_search_sugggestion_hint"))):void 0,e1=eu&&!ew;return i.createElement(G.n,{width:(0,u.jz)(en.X),height:480,bodyFontMedium:!0,dataTestId:"assetsDetailView"},i.createElement(G.n.Header,null,i.createElement("div",{ref:eH,className:E.cx.flex.flexColumn.$},i.createElement(W.v,{ref:ed,searchQuery:eh,onSearchChange:eq,forceRoot:r,onClear:()=>{e_(""),eN(),ea&&eR(),el&&eF()},endEnhancer:ea&&i.createElement(l.K,{"aria-label":(0,y.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:$.KB,htmlAttributes:{"data-tooltip":(0,y.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":N.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(d.A,null)),placeholder:eE}),(ea||el||e1)&&i.createElement("div",{className:E.cx.px8.pb8.flex.itemsCenter.justifyBetween.$},(ea||el)&&i.createElement(V.b,{primary:!1,gap:8,align:"center"},eZ),i.createElement(s.tU.TabPanel,{...eW[q.x.COMPONENTS]},i.createElement("div",{className:E.cx.h24.flex.itemsCenter.$},e1&&i.createElement(ee.i,{assetPanelItems:eI,onSetAssetType:eV,value:eU,id:ei,dataTestId:ei,recordingKey:ei,dropdownShown:ey,role:"button",showTooltipOnEllipsis:!0}))),ea&&i.createElement(s.tU.TabPanel,{...eW[q.x.FRAGMENTS]},i.createElement("div",{className:E.cx.h24.flex.itemsCenter.$},ep&&i.createElement(j.s,{containerRef:eH,hideSpacesFilter:el,entryPoint:I.G4.ACTIONS_ASSETS_TAB_DETAIL}))),el&&i.createElement(s.tU.TabPanel,{...eW[q.x.COMMUNITY]},i.createElement("div",{className:E.cx.h24.$}))))),i.createElement(G.n.Body,null,i.createElement(q.f.Provider,{value:{activeTabId:eK.activeTab}},i.createElement(s.tU.TabPanel,{...eW[q.x.COMPONENTS]},i.createElement(H.q,{key:eX},ew?i.createElement(et.S,{fillHeight:!0},i.createElement(O.Ee,{onClickExplore:eb,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):i.createElement(Z.O,{numberOfGridColumns:6,stretchEmptyStates:!0,suggestion:ea&&e0,onClickSuggestion:()=>{e$(q.x.FRAGMENTS)}}))),ea&&i.createElement(s.tU.TabPanel,{...eW[q.x.FRAGMENTS]},i.createElement(H.q,{key:eJ},i.createElement(X.M,{focusHandle:ed,initialState:{type:"recents",recents:ef},stretchEmptyStates:!0,entryPoint:I.G4.ACTIONS_ASSETS_TAB_DETAIL}))),el&&i.createElement(s.tU.TabPanel,{...eW[q.x.COMMUNITY]},i.createElement(H.q,{key:eQ},i.createElement(X.M,{focusHandle:ed,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:[]},entryPoint:I.G4.ACTIONS_ASSETS_TAB_DETAIL}))))))}function eo(e){let{currentSearch:r}=m.zl.get(k.WP);return null===r||"input-text"!==r.input.type?e.length>0:r.input.query!==e}function es(e,r=!1){let n=r?m.zl.get(I.hO.currentCommunitySearchAtom):m.zl.get(I.hO.currentSearchAtom);return null===n?e.length>0:"input-text"!==n.input.type||n.input.value!==e}},699306:(e,r,n)=>{"use strict";n.d(r,{M:()=>L});var i=n(411855),a=n(634832),o=n(498481),s=n(913817),l=n.n(s),c=n(374626),d=n(723325),u=n(762638),p=n(939863),m=n(743905),h=n(132572),_=n(829639),g=n(750600),f=n(687312),E=n(543216),y=n(931261),b=n(565548),I=n(602138),T=n(167913),v=n(27892),S=n(943341),w=n(192916),A=n(572069),N=n(663834),C=n(168519),O=n(393068);function L({focusHandle:e,entryPoint:r,initialState:n,numberOfGridColumns:a=3,maxResults:s,stretchEmptyStates:d=!1,header:g,forceLoadingState:f,hideEditorNames:y,isCommunity:C,largeSpacing:O,searchResultRef:L}){let D=(0,c.md)(C?m.hO.currentCommunitySearchAtom:m.hO.currentSearchAtom),k=(0,c.md)(m.hO.sortByAtom),M=(0,_.s)(D),F=(0,A.A)(),x=O?12:8,U=(0,h.kK)()||!F;if(n?.type==="recents"&&null===n.recents||D?.result.status==="loading"||f)return i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(v.V,{columns:a,padding:x,gap:12},Array.from({length:s??3*a}).map((e,r)=>i.createElement(v.V.Item,{key:r},i.createElement("div",{className:u.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},i.createElement(S.Y,{animationDelay:150*r})),i.createElement("div",{className:u.cx.wFull.pt8.$},i.createElement(T.O.Container,null,i.createElement(T.O.SkeletonLine,{index:r}),i.createElement(T.O.SkeletonLine,{index:r,bottom:!0})))))));if(!D||"disabled"===D.result.status){if(!n)return null;let o=C?(0,p.t)("assets_in_actions.fragments_section.empty_state.header_community"):U?(0,p.t)("assets_in_actions.fragments_section.empty_state.header_generic"):(0,p.t)("assets_in_actions.fragments_section.empty_state.header",{orgText:F}),l=C?(0,p.t)("assets_in_actions.fragments_section.empty_state.text_community"):(0,p.t)("assets_in_actions.fragments_section.empty_state.text");return n.recents?.length?i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),i.createElement(R,{fragments:n.recents,focusHandle:e,numberOfGridColumns:a,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:C,largeSpacing:O})):i.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},i.createElement(N.S,{fillHeight:d},i.createElement(E.N,null,i.createElement(E.N.ArtworkIllustration,{light:i.createElement(I.A,null),dark:i.createElement(b.A,null)}),i.createElement(E.N.Text,{title:o,subtitle:l}))))}if("errors"===D.result.status)return i.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(N.S,{fillHeight:d},i.createElement(E.N,null,i.createElement(E.N.ArtworkIcon,{variant:"danger"},i.createElement(o.r,null)),i.createElement(E.N.Text,{title:(0,p.t)("assets_in_actions.fragments_section.error.title"),subtitle:(0,p.t)("assets_in_actions.fragments_section.error.description")}))));if(0===D.result.data.length){let e="";return"input-text"===D.input.type?e=D.input.value:M&&(e=M.name),i.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(N.S,{fillHeight:d},i.createElement("span",{className:u.cx.textBodyMedium.colorTextSecondary.$},(0,p.tx)("assets_in_actions.fragments_section.no_results.title",{query:l()(e,{length:24})}))))}let B=(0,w.t)(D.result.data,k);return i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),i.createElement(R,{fragments:B,focusHandle:e,numberOfGridColumns:a,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:C,largeSpacing:O,searchResultRef:L}))}function R({fragments:e,focusHandle:r,numberOfGridColumns:n,entryPoint:o,maxResults:s,hideEditorNames:l,isCommunity:c,largeSpacing:p,searchResultRef:m,disableActionShortcuts:h}){let _=(0,f.r)(r,o,h),E=(0,d.z3)("faux");return i.createElement(g.x,{primary:!0,columns:n,padding:p?12:8,gap:12},e.slice(0,s??e.length).map((r,n)=>{let s=i.createElement(T.O.Container,null,i.createElement(T.O.Title,null,r.file_name),i.createElement(T.O.EditInfo,{editor:{name:r.editor_name,imageUrl:r.editor_img_url},lastEditedAt:r.last_edited_at,hideEditorName:l,isCommunity:c})),{primaryAction:d,secondaryAction:p,tertiaryAction:h}=_(r,n,null,e),f="";switch(r.type){case"fig-file-fragment":f=`${r.file_key}-${r.node_id}`;break;case"hub-file-fragment":f=`${r.hub_file_id}-${r.node_id}`;break;default:(0,a.assertNever)(r)}return i.createElement(g.x.Item,{key:f,primaryAction:d,secondaryAction:p,tertiaryAction:h},i.createElement(g.x.GridItemHighlight,null,i.createElement(y.a,{entryPoint:o,fragment:r,fragmentPosition:n,onDragStart:E,ref:0===n?m:void 0})),i.createElement(g.x.ItemFooter,null,i.createElement("div",{className:u.cx.pt8.$},s)))}))}function P({title:e,icon:r,seeMore:n}){let a=n?i.createElement(C.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):i.createElement("div",{className:u.cx.h24.$});return i.createElement(O.X,{paddingHorizontal:16},i.createElement(O.X.Icon,null,r),i.createElement(O.X.Title,{endEnhancer:a},e))}},520103:(e,r,n)=>{"use strict";n.d(r,{C:()=>et});var i=n(411855),a=n(188507);n(675678);var o=n(767129),s=n(755020),l=n(340860),c=n(297501),d=n(846627),u=n(374626),p=n(812115);n(776621);var m=n(96328),h=n(827586),_=n(574176),g=n(762638),f=n(939863),E=n(278733),y=n(67294),b=n(335666),I=n(970516),T=n(677664),v=n(756085),S=n(376485),w=n(498606),A=n(350913),N=n(222478),C=n(562432),O=n(341255),L=n(362745),R=n(724790),P=n(999140);n(30075);var D=n(821597),k=n(34762),M=n(644233),F=n(187703),x=n(28298),U=n(760445),B=n(145755),V=n(60418),G=n(507847),H=n(436318),W=n(958473),K=n(486788),j=n(712291),z=n(794412),Y=n(110354);function $({augmentedExtension:e}){let{extension:r,publishedExtension:n}=e,{pop:a}=(0,C.cq)(),o=i.useRef(null),{onAction:s,actionText:l}=(0,O.m)({augmentedExtension:e,submenuRef:o,displayAboveTarget:!0}),c="extension_details_view",d=(0,B.DK)({text:l,onAction:s,augmentedExtension:e,submenuRef:o});d=(0,P.M$)(d,c);let u=(0,L.T)(e);u&&(u=(0,P.M$)(u,c));let p=(0,G.DS)(e);p&&(p=(0,P.M$)(p,c)),(0,F.k)({primaryAction:d,secondaryAction:u,tertiaryAction:p,actionLabel:!0,active:!0,target:null});let m=(0,R.x)(),_=N.HW-48-41,f=n.unique_run_count,E=n.like_count;return i.createElement(M.n,{height:N.HW,width:m,dataTestId:"extension-details-view"},i.createElement(D.t,null),i.createElement(Z,{extension:r,onGoBack:a}),i.createElement(h.P,{height:_,className:g.cx.px16.$},i.createElement(X,{imgUrl:r.redirect_cover_image_url,extensionName:r.name}),i.createElement(J,{name:r.name,numLikes:E,numRuns:f}),i.createElement(Q,{publishedExtension:n}),i.createElement(ee,{description:r.description})),i.createElement(H.Xq,{augmentedExtension:e}))}function q({augmentedExtension:e}){let r=(0,u.md)(x.t);return i.createElement(V.M6,{numResults:1,moduleFilters:r},i.createElement($,{augmentedExtension:e}))}function Z({extension:e,onGoBack:r}){let n=(0,S.k0)(e),u=n?(0,f.t)("qa.extensions.widget"):(0,f.t)("qa.extensions.plugin"),p=e.plugin_id,m=function(e){let r=(0,a.wA)(),n=(0,S.k0)(e)?(0,A.ox)(e.plugin_id):(0,A.ab)(e.plugin_id);return(0,i.useCallback)(()=>{(0,d.e)(n)||r((0,T.RK)({rawInput:n}))},[r,n])}(e),h=(0,a.wA)(),_=i.useCallback(()=>{h(I.Pv({url:n?(0,A.ox)(p):(0,A.ab)(p),extensionType:n?"widget":"plugin"}))},[h,n,p]);return i.createElement("div",{className:g.cx.p8.$,style:E.sx.add({height:"48 px"}).$},i.createElement("div",{className:g.cx.flex.h32.px4.itemsCenter.justifyBetween.$},i.createElement("div",{className:g.cx.flex.flexRow.$},i.createElement(o.K,{onClick:r,"aria-label":(0,f.t)("qa.go_back")},i.createElement(s.C,null)),i.createElement("div",{className:g.cx.pl8.colorText.textBodyLarge.$},u)),i.createElement("div",{className:g.cx.flex.flexRow.itemsCenter.gap8.$},i.createElement(o.K,{onClick:m,"aria-label":(0,f.t)("qa.extensions.open_in_community"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.extensions.open_in_community"),"data-tooltip-type":w.Ib.TEXT}},i.createElement(l.N,null)),i.createElement(o.K,{onClick:_,"aria-label":(0,f.t)("qa.copy_link"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.copy_link"),"data-tooltip-type":w.Ib.TEXT}},i.createElement(c.W,null)))))}function X({imgUrl:e,extensionName:r}){let n=(0,b.X)(e);return i.createElement("div",{className:g.cx.overflowHidden.bRadius5.mb12.$,style:E.sx.add({aspectRatio:n?"16/9":"2/1",background:"var(--color-loading)"}).$},i.createElement("img",{src:e,className:g.cx.hFull.wFull.eventsNone.$,style:E.sx.add({objectFit:"cover"}).$,alt:`Thumbnail for ${r}`}))}function J({name:e,numLikes:r,numRuns:n}){return i.createElement("div",{className:g.cx.flex.flexRow.justifyBetween.$},i.createElement("div",{className:g.cx.colorText.textHeadingMedium.$},e),i.createElement("div",{className:g.cx.flex.flexRow.itemsCenter.gap8.colorTextSecondary.textBodyMedium.$},i.createElement("div",{className:g.cx.flex.flexRow.gap2.$},i.createElement(_.B,{svg:Y.A,className:g.cx.colorIconSecondary.$,style:E.sx.add({margin:"3px"}).$}),i.createElement("div",null,(0,m.$M)(r))),i.createElement("div",{className:g.cx.flex.flexRow.gap2.$},i.createElement(_.B,{svg:z.A,className:g.cx.mx2.colorIconSecondary.$}),i.createElement("div",null,(0,m.$M)(n)))))}function Q({publishedExtension:e}){if(!e)return null;let r=e.community_publishers?.accepted[0];if(!r)return null;let{img_url:n,name:a}=r;return i.createElement("div",{className:g.cx.pt4.flex.flexRow.itemsCenter.justifyBetween.colorTextSecondary.textBodyMedium.$},i.createElement("div",{className:g.cx.flex.$},i.createElement(y.H8,{user:{img_url:n,name:a},size:y.Pf.SMALL16}),i.createElement("div",{className:g.cx.pl8.$},(0,U.kB)(e))),i.createElement("div",null,i.createElement(W.o,{publishedExtension:e,showTooltip:!0})))}function ee({description:e}){return i.createElement("div",{className:g.cx.pt16.pb8.$},i.createElement(p.R,{value:e,quillClassName:j.C,fallback:null,errorFallback:null}))}function et({extensionId:e,extensionType:r}){let{pop:n}=(0,C.cq)(),a=(0,v._P)(e,!0),o=(0,K.Oy)();if(!a.loaded)return i.createElement(k.R,null);let s=a.plugin;if(!s)return n(),null;let l=o(s,r);return(0,K.JT)(l)?(n(),null):l.publishedExtension?i.createElement(q,{augmentedExtension:{...l,publishedExtension:l.publishedExtension}}):i.createElement(k.R,null)}},145755:(e,r,n)=>{"use strict";n.d(r,{DK:()=>s}),n(411855);var i=n(901304);n(153579);var a=n(315964),o=n(60418);function s(e){let{text:r,onAction:n,augmentedExtension:s,submenuRef:l}=e,c=(0,o.OX)();return{text:r,shortcuts:[a.Hz],onAction:e=>{s&&(0,i.wI)({extensionId:s.extension.plugin_id,searchPosition:e.target?.index??0,numSearchResults:c.numResults,searchQuery:c.searchQuery,moduleFilters:c.moduleFilters}),n(e)},submenuRef:l}}},60418:(e,r,n)=>{"use strict";n.d(r,{M6:()=>l,OX:()=>c});var i=n(411855),a=n(374626),o=n(719624);let s=i.createContext(null);function l({numResults:e,moduleFilters:r,children:n}){return i.createElement(s.Provider,{value:{numResults:e,moduleFilters:r}},n)}function c(){let e=i.useContext(s),r=(0,a.md)(o.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:r}}},507847:(e,r,n)=>{"use strict";n.d(r,{DS:()=>E});var i=n(188507),a=n(966712),o=n(939863),s=n(71425),l=n(986270),c=n(813648),d=n(860178),u=n(331626),p=n(555328),m=n(376485),h=n(562432),_=n(583718),g=n(315964),f=n(486788);function E(e){let r=function(e){let r=(0,i.wA)(),n=(0,u.U_)(),{extension:a,types:c}=e,{unsave:d}=y(e);if(!(e.types.has(g.Ag.RECENT)||e.types.has(g.Ag.USER_SAVED)||e.types.has(g.Ag.LOCAL)))return;let p=!!((0,m.ZQ)(a)&&e.publishedExtension);return{displayText:p?(0,o.t)("universal_insert.remove_local_version"):(0,o.t)("universal_insert.remove"),callback:()=>{!(c.has(g.Ag.LOCAL)&&(0,m.ZQ)(a)&&(r(s.qR(a.localFileId)),p))&&(c.has(g.Ag.RECENT)&&n&&r(((0,m.k0)(a)?l.Kq:l.lD)({storeInRecentsKey:n,resourceId:a.plugin_id})),c.has(g.Ag.USER_SAVED)&&d())}}}(e),n=function(e){let{save:r}=y(e),n=(0,i.wA)(),a=(0,u.U_)(),s=(0,d.TA)();if(!e.types.has(g.Ag.USER_SAVED)&&!(0,f.JT)(e))return{displayText:(0,o.t)("community.saves.save"),callback:()=>{if(r(),a&&s){let{extension:r}=e;n(((0,m.k0)(r)?l.RH:l.gU)({storeInRecentsKey:a,id:r.plugin_id,version:e.extension.id,currentUserId:s,skipPluginRun:!0}))}}}}(e),c=r||n,{pop:p}=(0,h.cq)();if((0,a.kc)().qa_extension_saves&&c)return{shortcuts:[g.r7],onAction:()=>{c.callback(),p()},text:c.displayText}}function y(e){let{extension:r}=e,n=(0,_.zX)({extensionId:r.plugin_id});return(0,c._i)(r.plugin_id,(0,m.k0)(r)?p.vt.WIDGET:p.vt.PLUGIN,e.publishedExtension,n)}},436318:(e,r,n)=>{"use strict";n.d(r,{S3:()=>I,U4:()=>b,Xq:()=>y,q8:()=>E});var i=n(411855),a=n(188507),o=n(675678),s=n(776621);n(762638),n(278733);var l=n(738269),c=n(620604),d=n(781267),u=n(261607),p=n(318812),m=n(376485),h=n(562432),_=n(307292),g=n(632788);let f="EXTENSION_SUBMENU_DROPDOWN";function E(e){return!!(e.manifest.menu&&e.manifest.menu.length>0)}function y({augmentedExtension:e}){let{extension:r}=e,n=(0,p.Um)(),a=b(r),l=(0,u.c)(),{close:m}=(0,h.cq)(),f=(0,_.w0)();if(!a||!r||!r.manifest||!r.manifest.menu)return null;let E=(0,c.z)(r.manifest.menu,r).map(e=>(0,d.aS)(e,e=>()=>{var r;(0,d.Im)(l,"quick-actions",e.menuAction),f(e,!0),("run-installed-plugin"!==(r=e.menuAction).type&&"run-local-plugin"!==r.type?((0,s.$D)(o.FigmaTeam.EXTENSIBILITY,Error("shouldSubmenuCloseQuickActions expected 'run-installed-plugin' or 'run-local-plugin'")),1):r.parameterOnly&&r.parameterEntry)||m()}));return i.createElement(g.ms,{parentRect:n?.data.targetRect,displayAboveTarget:n?.data.displayAboveTarget,lean:"left",minWidth:64,items:E})}function b(e){let r=(0,p.Um)();return(0,m.ZQ)(e)?r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===e.localFileId:r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===null}function I({submenuIsShown:e,extension:r,displayAboveTarget:n}){let o=(0,a.wA)();return i.useCallback(i=>{if(e)o(l.oB());else if(i){let e=i.getBoundingClientRect();o(l.j7({type:f,data:{extensionId:r.plugin_id,localFileId:(0,m.ZQ)(r)?r.localFileId:null,targetRect:e,displayAboveTarget:n}}))}},[o,e,r,n])}},958473:(e,r,n)=>{"use strict";n.d(r,{o:()=>g});var i=n(411855),a=n(574176),o=n(762638),s=n(939863),l=n(809840),c=n(466636),d=n(555328),u=n(498606),p=n(112512);function m({publishedExtension:e,showTooltip:r}){if(!e.monetized_resource_metadata)return null;let n=(0,c.X2)(e.monetized_resource_metadata);return r?i.createElement("div",{"data-testid":"freemium-text",className:o.cx.flex.itemsCenter.gap4.$,"data-tooltip":n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")),i.createElement(a.B,{svg:p.A,className:o.cx.colorIconSecondary.$})):i.createElement("div",{"data-testid":"freemium-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")))}function h({publishedExtension:e}){return e.monetized_resource_metadata?i.createElement("div",{"data-testid":"free-trial-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.resource.free_trial_days",{days:e.monetized_resource_metadata.trial_length_in_days}))):null}function _({showTooltip:e}){return e?i.createElement("div",{"data-testid":"off-platform-text",className:o.cx.flex.itemsCenter.gap4.$,"data-tooltip":(0,s.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")),i.createElement(a.B,{svg:p.A,className:o.cx.colorIconSecondary.$})):i.createElement("div",{"data-testid":"off-platform-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")))}function g({publishedExtension:e,showTooltip:r}){return(0,d.PM)(e)?i.createElement(m,{publishedExtension:e,showTooltip:r}):(0,c.Lt)({resource:e,payment:e.community_resource_payment})?i.createElement(h,{publishedExtension:e}):(0,d.zF)(e)?i.createElement(_,{showTooltip:r}):null}},486788:(e,r,n)=>{"use strict";n.d(r,{JT:()=>u,Oy:()=>d});var i=n(411855);n(634832);var a=n(756085);n(258237),n(782501);var o=n(269167),s=n(694687);n(860178);var l=n(215822),c=n(376485);function d(){let e=(0,a.tB)(),r=(0,a.ll)(),n=(0,a.U6)(),d=(0,a.cW)(),u=(0,a.ZT)(),p=(0,o.FP)(),m=(0,a.$1)(),h=(0,s.sZ)();return i.useCallback((i,a)=>(function({extension:e,org:r,allowlistPlugins:n,allowlistWidgets:i,publishedPlugins:a,publishedWidgets:s,localExtensions:d,communityPaymentsState:u,lastUsedTimestampById:p,type:m}){let h;let _=(0,o.Y8)({extension:e,publishedPlugins:a,publishedWidgets:s,communityPaymentsState:u});_&&(h=Object.values(d).find(e=>e.plugin_id===_.id));let g={types:new Set([m]),publishedExtension:_,key:function(e){let r=e.plugin_id;return(0,c.ZQ)(e)?`${r}-${e.localFileId}`:r}(e),lastUsedTimestamp:p[(0,c.ZQ)(e)?e.localFileId:e.plugin_id],localPublishedExtension:h};if((0,c.ZQ)(e))return _&&!(0,l.nf)(_)&&(g.publishedExtension=void 0),{...g,extension:e,canRun:!0,canRequest:!1};if((0,c.bH)(e)||!r)return{...g,extension:e,canRun:!0,canRequest:!1};let f=r.public_plugins_allowed,E=r.plugins_whitelist_enforced,y=r.widgets_whitelist_enforced,b=r.plugin_requests_allowed,I=r.widget_requests_allowed,T=(0,c.k0)(e);if(!f)return{...g,extension:e,canRun:!1,canRequest:!1};if(!(T?y:E))return{...g,extension:e,canRun:!0,canRequest:!1};let v=!!(T?i:n)[e.plugin_id];return{...g,extension:e,canRun:v,canRequest:!v&&(T?I:b)}})({extension:i,org:h,allowlistPlugins:r,allowlistWidgets:n,publishedPlugins:d,publishedWidgets:u,localExtensions:m,communityPaymentsState:p,lastUsedTimestampById:e,type:a}),[h,r,n,d,u,m,p,e])}function u(e){let{extension:r}=e;return(0,c.ZQ)(r)}n(30075),n(315964)},128247:(e,r,n)=>{"use strict";n.d(r,{d:()=>f});var i=n(411855),a=n(421757),o=n(96796),s=n(463420),l=n(587670),c=n(707458),d=n(983405),u=n(320063),p=n(762638),m=n(809840),h=n(535217);n(26281),n(25108);var _=n(356390);n(335682),n(498606),n(992795);var g=n(695426);function f({validationFailures:e,category:r,selectedKit:n,shouldAutoFix:a}){return i.createElement(i.Fragment,null,[...e.system.filter(e=>e.rule.category===r).map(e=>i.createElement(y,{key:e.rule.key,rule:e.rule,output:e.output,dsKitKey:n.dsKitKey,shouldAutoFix:a})),...e.component.filter(e=>e.rule.category===r).map(e=>i.createElement(E,{key:e.rule.key,rule:e.rule,output:e.output,shouldAutoFix:a}))])}function E({rule:e,output:r,shouldAutoFix:n}){let a=i.useCallback(n=>{if(n?.stopPropagation(),!e.fix)return!1;{let n=!0,i=c.q.instance;for(let a in r){let o=i.get(a);o&&!e.fix(o,r[o.guid]?.meta)&&(n=!1)}return _.Y5.triggerAction("commit"),n}},[e,r]),o=i.useMemo(()=>Object.values(r).flatMap(e=>e.guids),[r]);return 0===Object.keys(r).length?null:i.createElement(b,{rule:e,guids:o,meta:null,autofix:a,shouldAutoFix:n})}function y({dsKitKey:e,rule:r,output:n,shouldAutoFix:a}){let o=i.useCallback(i=>(i?.stopPropagation(),!!r.fix&&r.fix(e,n.meta)),[r,e,n]);return 0===n.guids.length?null:i.createElement(b,{rule:r,guids:n.guids,meta:n.meta,autofix:o,shouldAutoFix:a})}function b({rule:e,guids:r,meta:n,autofix:c,shouldAutoFix:h}){let[_,f]=i.useState(!1),[E,y]=i.useState(!1),[b,T]=i.useState(!1),v=e=>{T(c(e))},S=i.useCallback(e=>{l.Egt.clearSelection(),l.Egt.addToSelection(e)},[]),w=e=>{l.NfO.scrollAndZoomIntoView([e]),S?.([e])};return((0,u.h)(()=>{h&&v()}),0===r.length)?null:i.createElement(i.Fragment,null,i.createElement(g.B,{fullWidth:!0,justify:"space-between",align:"center"},i.createElement("button",{onClick:()=>y(!E),className:p.cx.cursorPointer.flex.itemsCenter.$},E?i.createElement(o.O,null):i.createElement(s.k,null),i.createElement(I,{severity:e.severity}),i.createElement(m.E,{fontSize:11,fontWeight:"medium"},e.name)),e.fix&&i.createElement(a.$n,{variant:"secondary",onClick:v},b?"Fixed":"Autofix")),E&&i.createElement(d.Y1,{padding:{horizontal:12},direction:"vertical"},i.createElement(m.E,{fontSize:11,fontWeight:"regular",color:"secondary"},e.warning),S&&i.createElement(a.$n,{variant:"link",onClick:()=>S(r)},"Select offending layers"),i.createElement("button",{onClick:()=>f(!_),className:p.cx.cursorPointer.flex.itemsCenter.$},_?i.createElement(o.O,null):i.createElement(s.k,null),i.createElement(m.E,{fontSize:11,fontWeight:"medium"},"Show metadata")),_&&i.createElement(d.Y1,{padding:{horizontal:12},direction:"vertical",width:"fill-parent",height:100,overflow:"scroll"},n?i.createElement(m.E,{fontSize:11,fontWeight:"regular",color:"secondary"},JSON.stringify(n)):i.createElement(m.E,{fontSize:11,fontWeight:"regular",color:"secondary"},r.map((e,n)=>i.createElement("span",{key:e},i.createElement(a.$n,{variant:"link",onClick:w.bind(null,e)},e),n<r.length-1&&", "))))))}function I({severity:e}){switch(e){case h.x.ERROR:return i.createElement("div",{className:p.cx.p2.font11.colorTextDanger.justifyCenter.fontSemiBold.$},"[Error]");case h.x.WARNING:return i.createElement("div",{className:p.cx.p2.font11.colorTextWarning.justifyCenter.fontSemiBold.$},"[Warning]");default:return null}}},711376:(e,r,n)=>{"use strict";n.d(r,{Ne:()=>el,Xy:()=>es});var i=n(411855),a=(n(831841),n(902237),n(256296),n(41851),n(219728),n(380620)),o=n(767129),s=(n(497189),n(11190),n(755020)),l=n(629019),c=n.n(l),d=n(265171),u=n.n(d),p=(n(568214),n(153234)),m=n(574176),h=n(762638),_=n(939863),g=n(428654),f=(n(168039),n(356390),n(498606));n(660510),n(695426),n(948529),n(193637);var E=n(267344),y=n(781779),b=n(63932),I=n(248114),T=n(662322),v=n(713634),S=n(68596),w=n(186109),A=n(909351),N=n(647975),C=n(557901),O=n(553380),L=n(787848),R=n(515337),P=n(668015),D=n(3199),k=n(579371),M=n(589750),F=n(315706),x=n(433146),U=n(521422),B=n(108627),V=n(98743),G=n(422810),H=n(788522),W=n(982170),K=n(496188),j=n(692645),z=n(395999),Y=n(474143),$=n(285509),q=n(479500),Z=n(432384),X=n(231512),J=n(782251),Q=n(767642),ee=n(728741),et=n(477572),er=n(487781),en=n(988646),ei=n(276183),ea=n(956376),eo=n(591241);let es=0,el=2,ec=([y.jR,y.N0,y.k0,y.RO,y.Sb].map(e=>({string:e,color:g.F.parse(e)})),new Map().set(0,X.A).set(u()(.25*el,2),J.A).set(u()(el/2,2),Q.A).set(u()(.75*el,2),ee.A).set(el,et.A),new Map().set(0,er.A).set(u()(.25*el,2),en.A).set(u()(el/2,2),ei.A).set(u()(.75*el,2),ea.A).set(el,eo.A),new Map().set("Plus Jakarta Sans",W.A).set("Outfit",j.A).set("Inter",H.A).set("Public Sans",z.A).set("Domine",G.A).set("Source Serif 4",q.A).set("Roboto Serif",$.A).set("Roboto Mono",Y.A).set("JetBrains Mono",K.A).set("Space Mono",Z.A)),ed=new Map().set("Plus Jakarta Sans",v.A).set("Outfit",w.A).set("Inter",T.A).set("Public Sans",A.A).set("Domine",I.A).set("Source Serif 4",O.A).set("Roboto Serif",C.A).set("Roboto Mono",N.A).set("Space Mono",L.A).set("JetBrains Mono",S.A),eu=new Map().set("Plus Jakarta Sans",D.A).set("Outfit",M.A).set("Inter",P.A).set("Public Sans",F.A).set("Domine",R.A).set("Source Serif 4",B.A).set("Roboto Serif",U.A).set("Roboto Mono",x.A).set("Space Mono",V.A).set("JetBrains Mono",k.A);function ep({selectedKey:e,items:r,recordingKey:n}){return i.createElement("div",{className:h.cx.flex.flex1.flexWrap.itemsCenter.rowGap8.justifyBetween.$},r.map(({key:r,name:o,svg:s,onClick:l})=>i.createElement(a.E,{"aria-label":o,recordingKey:p.Pt(n,r),className:c()(b.tA,b.i9,e===r&&b.wH),key:r,onClick:l,htmlAttributes:{"data-tooltip":o,"data-tooltip-show-above":!0,"data-tooltip-type":f.Ib.TEXT}},i.createElement(m.B,{svg:s}))))}E.m.COLOR,E.m.RADIUS,E.m.SPACING,E.m.FONT},468971:(e,r,n)=>{"use strict";n.d(r,{Pt:()=>s});var i=n(38580),a=n(374626);n(239349),n(335682);let o=(0,i.eU)({});function s(e,r){let{fileKey:n,guid:i}=e;a.zl.set(o,e=>({...e,[`${n}-${i}`]:r}))}},233387:(e,r,n)=>{"use strict";n.d(r,{KB:()=>eu,WS:()=>es,jp:()=>ep});var i=n(411855),a=n(634832),o=n(219728),s=n(258316),l=n(803038),c=n(707458),d=n(776250),u=n(91408),p=n(374626),m=n(646240),h=n(860601),_=n(153234),g=n(30637),f=n(743282),E=n(762638),y=n(939863),b=n(153887),I=n(743905),T=n(318812),v=n(335682),S=n(28588),w=n(48515),A=n(781525),N=n(56063),C=n(708873),O=n(287213),L=n(901304),R=n(239737),P=n(132572),D=n(222478),k=n(54025),M=n(660510),F=n(562432),x=n(829639),U=n(946465),B=n(232309),V=n(30075),G=n(384775),H=n(719624),W=n(452362),K=n(821597),j=n(512682),z=n(695426),Y=n(644233),$=n(268645),q=n(100140),Z=n(343090),X=n(652875),J=n(276060),Q=n(699306),ee=n(719256),et=n(663834),er=n(883216),en=n(459179),ei=n(994172),ea=n(273602);let eo="actions-visual-search-library-filter";function es(){let{currentSearch:e}=(0,p.md)(k.WP),r=(0,p.md)(I.hO.currentSearchAtom),n=(0,p.md)(I.hO.currentCommunitySearchAtom),s=e?.queryId,l=r?.searchId,c=n?.searchId,m=i.useRef(null),_=i.useRef(null),g=i.useRef(null),f=function(e){let r;if(!e)return"no-search";let n=e.input.type;switch(e.input.type){case"input-text":r=e.input.value;break;case"input-image":r=`${e.input.imageFile.name}-${e.input.imageFile.lastModified}`;break;case"input-selection":r=`${e.input.file_key}-${e.input.node.guid}`;break;default:(0,a.assertNever)(e.input)}let i=e.result.status;return`${n}-${r}-${i}`}(r);(0,N.b)(),i.useEffect(()=>()=>{(0,ei.R)(),p.zl.set(k.WP,{currentSearch:null})},[]);let b=(0,T.Um)(),{close:v}=(0,F.cq)(),S=(0,C.j)(),[L]=(0,O.g)(),D=0===L.length,[M,x]=i.useState({type:w.I.ALL}),[U,B]=o.tU.useTabs({[X.x.FRAGMENTS]:!0,[X.x.COMPONENTS]:(0,R.Ko)(),[X.x.COMMUNITY]:(0,P.Xk)()},{defaultActive:X.x.FRAGMENTS}),V=i.useCallback(r=>{r===X.x.COMPONENTS&&(0,d.sx)("Visual search components tab clicked",{session_id:p.zl.get(H.dd),query_id:e?.queryId}),B.setActiveTab(U[r].id),_.current?.focus()},[B,U,e]),G=i.createElement(q.fu,{value:B.activeTab,onChange:h.lQ,numItems:ed()},i.createElement(q.oz,{tabId:X.x.FRAGMENTS,onAction:()=>V(X.x.FRAGMENTS)},(0,y.tx)("assets_in_actions.detail_view.fragments_tab.designs_title")),(0,R.Ko)()&&i.createElement(q.oz,{tabId:X.x.COMPONENTS,onAction:()=>V(X.x.COMPONENTS)},(0,y.tx)("assets_in_actions.detail_view.components_tab.title")),(0,P.Xk)()&&i.createElement(q.oz,{tabId:X.x.COMMUNITY,onAction:()=>V(X.x.COMMUNITY)},(0,y.tx)("assets_in_actions.detail_view.community_tab.title"))),W=(()=>{switch(B.activeTab){case X.x.COMPONENTS:return s;case X.x.FRAGMENTS:return l;case X.x.COMMUNITY:return c;default:(0,a.assertNever)(B.activeTab)}})();return r&&"disabled"!==r.result.status?i.createElement(Y.n,{width:(0,u.jz)(ea.X),height:480,bodyFontMedium:!0,dataTestId:"visualSearchView",recordingKey:"visualSearchView"},i.createElement(K.t,{ref:m,key:W}),i.createElement(Y.n.Header,null,i.createElement(ec,null),ed()>1&&i.createElement("div",{className:E.cx.pt4.px8.pb4.flex.itemsCenter.justifyBetween.$,ref:g},i.createElement(z.b,{primary:!1,gap:8,align:"center"},G),(0,R.Ko)()&&i.createElement(o.tU.TabPanel,{...U[X.x.COMPONENTS]},i.createElement("div",{className:E.cx.h32.flex.itemsCenter.$},e&&!D&&i.createElement(ee.i,{assetPanelItems:S,onSetAssetType:r=>{if(e)switch(e.input.type){case"input-image":case"input-selection":x(r),(0,k.ES)({...e.input,assetTypeOption:r});return;case"input-text":throw Error("Cannot run visual search on text input");default:(0,a.assertNever)(e.input)}},value:M,hideLocal:!0,hidePresets:!0,id:eo,dataTestId:eo,recordingKey:eo,dropdownShown:b,role:"button"}))),i.createElement(o.tU.TabPanel,{...U[X.x.FRAGMENTS]},i.createElement("div",{className:E.cx.h32.flex.itemsCenter.$},i.createElement(en.s,{containerRef:g,hideSpacesFilter:(0,P.Xk)(),entryPoint:I.G4.ACTIONS_VISUAL_SEARCH_VIEW}))),(0,P.Xk)()&&i.createElement(o.tU.TabPanel,{...U[X.x.COMMUNITY]},i.createElement("div",{className:E.cx.h32.$})))),i.createElement(Y.n.Body,{key:f},i.createElement(X.f.Provider,{value:{activeTabId:B.activeTab}},(0,R.Ko)()&&i.createElement(o.tU.TabPanel,{...U[X.x.COMPONENTS]},i.createElement($.q,{key:s},D?i.createElement(et.S,{fillHeight:!0},i.createElement(A.Ee,{onClickExplore:v,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):i.createElement(J.O,{numberOfGridColumns:6,stretchEmptyStates:!0}))),i.createElement(o.tU.TabPanel,{...U[X.x.FRAGMENTS]},i.createElement($.q,{key:l},i.createElement(Q.M,{focusHandle:m,numberOfGridColumns:3,stretchEmptyStates:!0,entryPoint:I.G4.ACTIONS_VISUAL_SEARCH_VIEW}))),(0,P.Xk)()&&i.createElement(o.tU.TabPanel,{...U[X.x.COMMUNITY]},i.createElement($.q,{key:c},i.createElement(Q.M,{focusHandle:m,numberOfGridColumns:3,stretchEmptyStates:!0,isCommunity:!0,entryPoint:I.G4.ACTIONS_VISUAL_SEARCH_VIEW})))))):i.createElement(el,null)}function el(){let e=(0,p.md)(I.hO.sortByAtom),r=(0,p.md)(b.CZ),n=(0,v.tS)(),a=i.useRef((0,f.g)()),o=(0,U._M)({action:D.JT.FIND_INSPIRATION,clientLifecycleId:a.current}),c=i.useRef(null),d=i.useCallback(i=>{n&&((0,U.ID)({...o,interaction:B.lc.EXECUTE,interaction_type:B.dk.BUTTON_CLICK}),(0,R.Ko)()&&(0,k.ES)({type:"input-image",imageFile:i,assetTypeOption:{type:w.I.ALL}}),(0,I.Hl)({type:"input-image",imageFile:i,file_key:n},I.G4.ACTIONS_VISUAL_SEARCH_PROMPT,r,e),(0,P.Xk)()&&(0,I.Hl)({type:"input-image",imageFile:i,file_key:n},I.G4.ACTIONS_VISUAL_SEARCH_PROMPT,void 0,"percent_match",void 0,!0))},[n,r,e,o]),u=i.useCallback(()=>{if((0,g.nl)()){d(new File([Uint8Array.from(atob("iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAATSURBVHgBY7wpKfmfAQqYGJAAADAAAg7iNdOVAAAAAElFTkSuQmCC"),e=>e.charCodeAt(0))],"image0.jpg",{type:"image/jpeg"}));return}let e=c.current?.files||null;null!==e&&0!==e.length&&d(e[0])},[d]),m=(0,_.AF)((0,_.Pt)("visualSearchView","imageUploadButton"),"change",e=>{u()});return i.createElement(i.Fragment,null,i.createElement("input",{type:"file",ref:c,accept:S.xp.join(","),onChange:m,multiple:!1,className:E.cx.hidden.$}),i.createElement(er.A,{action:D.JT.FIND_INSPIRATION,actionLabel:(0,y.tx)("asset_suggestions.visual_search_button"),actionIcon:i.createElement(s.T,null),onPerform:()=>ep(I.G4.ACTIONS_VISUAL_SEARCH_PROMPT),aiTrackingContext:o,instructionAction:{type:"custom",label:(0,y.tx)("asset_suggestions.visual_search_image_upload_button"),iconPrefix:i.createElement(l.s,null),onPerform:()=>c.current?.click()}},(0,y.tx)("asset_suggestions.visual_search_instructions")))}function ec(){let e=(0,p.md)(I.hO.currentSearchAtom),r=(0,x.s)(e),n=(0,m.Xr)(I.hO.currentSearchAtom),a=i.useRef(null),o=(0,Z.U)();(0,M.z)();let s=i.useCallback(()=>{n(null)},[n]);return i.createElement("div",{className:E.cx.flex.itemsCenter.justifyBetween.px8.py12.if(ed()>1,E.cx.bSolid.bb1.colorBorder).$,ref:a},i.createElement("div",{className:E.cx.flex.gap8.itemsCenter.$},i.createElement(W.o,{recordingKey:(0,_.Pt)(o,"backButton")}),i.createElement("span",{className:E.cx.textBodyLarge.colorText.$},(0,y.tx)("asset_suggestions.visual_search_results_title")),r&&i.createElement(j.K,{pill:r,onDismiss:s,recordingKey:(0,_.Pt)(o,"inputPill")})),1===ed()&&i.createElement(en.s,{containerRef:a,hideSpacesFilter:(0,P.Xk)(),entryPoint:I.G4.ACTIONS_VISUAL_SEARCH_VIEW}))}function ed(){let e=1;return(0,R.Ko)()&&e++,(0,P.Xk)()&&e++,e}function eu(){(0,d.sx)("Visual search in search bar clicked",{has_selection:c.q.instance.getCurrentPage()?.directlySelectedNodes?.length===1,session_id:p.zl.get(H.dd)}),(0,L.XG)({action:"find-inspiration",isSearchResult:!1,searchPosition:null,numSearchResults:null,rankingAlgorithm:null,moduleFilters:null}),(0,G.$I)({moduleToOpen:{type:"custom",module:i.createElement(es,null),beforeModuleOpen:()=>ep(I.G4.ACTIONS_SEARCH_BAR_ICON),name:V.Sn.VISUAL_SEARCH},trackingData:{source:"search_bar_visual_search_button"}})}function ep(e){let r=p.zl.get(v.ze),n=c.q.instance.getCurrentPage()?.directlySelectedNodes;!(!r||n?.length!==1||n[0]?.isSlide())&&((0,I.Hl)({type:"input-selection",node:n[0],name:n[0].name,file_key:r},e,p.zl.get(b.CZ),p.zl.get(I.hO.sortByAtom)),(0,P.Xk)()&&(0,I.Hl)({type:"input-selection",node:n[0],name:n[0].name,file_key:r},e,void 0,"percent_match",void 0,!0),(0,R.Ko)()&&(0,k.ES)({type:"input-selection",node:n[0],name:n[0].name,assetTypeOption:{type:w.I.ALL}}))}},156099:(e,r,n)=>{"use strict";n.d(r,{q:()=>c});var i=n(587670),a=n(86625),o=n(707458),s=n(356390);let l=e=>Uint8Array.from(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));function c({create:e,slideGrid:r}){let n,c;let d=r&&r.length>0,u=o.q.instance,p=u.getCurrentPage();if(!p)throw Error("Something went wrong");if(1===p.directlySelectedNodes.length){var m;if(!function(e){let r=s.Y5.getViewportInfo(),n=r.width/r.zoomScale,i=r.height/r.zoomScale,a=r.offsetX-n/2,o=r.offsetX+n/2,l=r.offsetY-i/2,c=r.offsetY+i/2,d=e.absoluteBoundingBox,u=d.x+d.w,p=d.y+d.h;return!(u>o)&&!(p>c)&&!(d.x<a)&&!(d.y<l)}(n=p.directlySelectedNodes[0])&&(n=void 0),d&&n?.isOrInSlide()){let e=n.findContainingSlideOrSelf();c=u.get(e)}(m=n)&&["FRAME","RECTANGLE","ROUNDED_RECTANGLE","ELLIPSE","STAR","INSTANCE","SYMBOL"].includes(m.type)||(n=void 0)}return a.l7.user("generate image",()=>{if(!n&&e){let e=s.Y5.getViewportInfo();if((n=u.createNode("RECTANGLE")).size={x:1024,y:1024},n.x=e.offsetX-n.size.x/2,n.y=e.offsetY-n.size.y/2,d){if(!c){let e=i.Ez5.slideDeck().getClosestGridCoord({x:n.x,y:n.y},null),a=e.row>=0?e.row:0,o=e.col>=0?e.col:0,s=r[a][o];c=u.get(s)}if(c){let e=function(e){let r=e.absoluteBoundingBox;return{x:r.x+r.w/2,y:r.y+r.h/2}}(c);n.x=e.x-n.size.x/2,n.y=e.y-n.size.y/2}}u.getCurrentPage()?.appendChild(n),n.fills=[{type:"IMAGE",image:{hash:l("7f12ea1300756f144a0fb5daaf68dbfc01103a46"),name:"Checker"},imageScaleMode:"FILL"}],p.setSelectionToSingleNode(n.guid),i.glU.showSelectionOverlayImmediately()}}),n??null}},335650:(e,r,n)=>{"use strict";n.d(r,{J1:()=>d,NA:()=>l,Q3:()=>c,ZP:()=>a});var i=n(776250),a=(e=>(e.RECORDINGS_WINDOW_OPENED="recordings_window_opened",e.NEW_RECORDING_BUTTON_CLICKED="new_recording_button_clicked",e.RECORDING_INITIALIZED="recording_initialized",e.RECORDING_DEVICE_UNAVAILABLE="recording_device_unavailable",e.RECORDING_START="recording_start",e.RECORDING_ABORT="recording_abort",e.RECORDING_FINISH="recording_finish",e.RECORDING_SAVED="recording_saved",e.RECORDING_RESTARTED="recording_restarted",e))(a||{}),o=(e=>(e.SIDEBAR="sidebar",e))(o||{}),s=(e=>(e.REPLAY_OPENED="replay_opened",e.LINK_COPIED="link_copied",e.DELETED="deleted",e))(s||{}),l=(e=>(e.SIDEBAR="sidebar",e.LINK="link",e.COMMENT="comment",e.NEW_RECORDING="new_recording",e))(l||{});function c(e,r,n){(0,i.sx)("recording_funnel_event",{fileKey:e?.key,editorType:e?.editorType,funnelEventName:r,entrypoint:n},{forwardToDatadog:!0})}function d(e,r,n,a){(0,i.sx)("recording_replay_event",{fileKey:e,editorType:r,replayEventName:"replay_opened",entrypoint:n,recordingId:a},{forwardToDatadog:!0})}},548091:(e,r,n)=>{"use strict";n.d(r,{ZM:()=>a,bY:()=>o,r9:()=>s}),n(411855),n(188507),n(970516),n(335682),n(132135);let i="recording_";function a(e){return`${i}${e.replace(/-/g,"_")}`}function o(e){return e.startsWith(i)}function s(e){return o(e)?e.slice(i.length).replace(/_/g,"-"):null}},55069:(e,r,n)=>{"use strict";n.d(r,{Vm:()=>u,ks:()=>p}),n(411855);var i=n(38580),a=n(374626),o=n(776621);n(457630),n(601607);let s=(0,i.eU)({}),l=(0,i.eU)(null,(e,r,n)=>{let i=e(s);if(n.parentNodeId&&!i[n.parentNodeId]){(0,o.xi)("scene node overlay",`trying to add child overlay to ${n.parentNodeId} but parent overlay does not exist`);return}r(s,e=>({...e,[n.nodeId]:n}))}),c=(0,i.eU)(null,(e,r,n)=>{let i=e(d(n)).map(e=>e.nodeId),a=new Set([n,...i]);r(s,e=>Object.fromEntries(Object.entries(e).filter(([e])=>!a.has(e))))}),d=((0,i.eU)(e=>Object.keys(e(s)).length>0),(0,a.Iz)(e=>(0,i.eU)(r=>Object.values(r(s)).filter(({parentNodeId:r})=>r===e))));function u(e,r,n){a.zl.set(l,{nodeId:e,component:r,...n})}function p(e){a.zl.set(c,e)}function m({viewportInfo:e,overlay:r,offset:n={x:0,y:0}}){let i=useSceneSelector((e,r)=>e.get(r),r.nodeId),a=useAtomValue(d(r.nodeId));if(!i)return null;let o=i.absoluteBoundingBox,s=canvasRectToViewport(e,{x:o.x,y:o.y,width:o.w,height:o.h}),l={x:s.x+e.x+n.x,y:s.y+e.y+n.y};return React.createElement("div",{style:{position:"fixed",width:s.width,height:s.height,top:0,left:0,transform:`translate(${l.x}px, ${l.y}px)`,pointerEvents:"none",...r.overflowHidden?{overflow:"hidden"}:{}}},r.component,a.map(r=>React.createElement(m,{key:r.nodeId,viewportInfo:e,overlay:r,offset:{x:-1*l.x,y:-1*l.y}})))}(0,i.eU)(e=>Object.values(e(s)).filter(({parentNodeId:e})=>!e))},952746:(e,r,n)=>{"use strict";n.d(r,{Kf:()=>S,MX:()=>E});var i=n(411855),a=n(243742),o=n(587670),s=n(966712),l=n(153234),c=n(572206),d=n(428654),u=n(798099),p=n(601978),m=n(421123),h=n(460187),_=n(529118);function g(e){let{version:r}=(0,a.DP)();return i.createElement(f,{...e,uiVersion:r})}class f extends l.o6{constructor(){super(...arguments),this.dragging=!1,this.srgbCanvasElement=null,this.srgbCanvasRef=e=>{this.srgbCanvasElement=e,this.srgbCanvasElement&&((0,s.kc)().ee_color_management_force_canvas?(0,p.dM)({canvas:this.srgbCanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"srgb"}):this.props.renderCanvas(this.srgbCanvasElement,this.props.value))},this.displayP3CanvasElement=null,this.displayP3CanvasRef=e=>{let r=!!(null===this.displayP3CanvasElement&&e);this.displayP3CanvasElement=e,this.displayP3CanvasElement&&(0,p.dM)({canvas:this.displayP3CanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"display-p3",initializeCanvasColorSpace:r})},this.barElement=null,this.barRef=e=>{this.barElement=e,e&&this.disableWeirdHorizontalScrollingPageNavigation(e)},this.handleElement=null,this.handleRef=e=>{this.handleElement=e,this.handleElement&&(this.props.renderHandle(this.props.value,this.handleElement),this.disableWeirdHorizontalScrollingPageNavigation(this.handleElement))},this.offset=new c.Mi(0,0),this.setOffset=e=>{if(null!=e){let r=e.target.getBoundingClientRect(),n=new c.Mi(r.left+r.width/2,r.top+r.height/2);this.offset=n.subtract(new c.Mi(e.clientX,e.clientY))}else null!=this.props.offset?this.offset=this.props.offset:this.offset=new c.Mi(0,0)},this.ensureInitialized=()=>{if(!this.barElement)throw Error("callback called before rendering barElement")},this.mouseToValue=e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect(),n=e.x+this.offset.x,i=e.y+this.offset.y;return n-=r.left+(this.props.handlePadding?this.props.handle/2:0),i-=r.top+(this.props.handlePadding?this.props.handle/2:0),n/=this.props.width,i/=this.props.height,n=Math.max(Math.min(n,1),0),i=Math.max(Math.min(i,1),0),new c.Mi(n,i)},this.valueToPosition=e=>{let r=e.x,n=e.y;return r*=this.props.width,n*=this.props.height,r-=this.props.handlePadding?0:this.props.handle/2,n-=this.props.handlePadding?0:this.props.handle/2,new c.Mi(r,n)},this.onPointerDown=l.Am(this,"pointerdown",e=>{e.stopPropagation(),this.dragging=!0,e.currentTarget.setPointerCapture(e.pointerId),e.currentTarget===this.handleElement?this.setOffset(e):(this.setOffset(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerUp=l.Am(this,"pointerup",e=>{if(!this.dragging)return l.aH;this.dragging=!1,this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!0)},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerMove=e=>{this.dragging&&(e.stopPropagation(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},this.onWheel=l.M5(this,"wheel",e=>{e.stopPropagation();let r=e.ctrlKey;this.props.wheelCallback?.(new c.Mi(e.deltaX,e.deltaY),e.altKey,r)},{recordMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey}),playbackMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey})}),this.onKeyDown=l.C0(this,"keydown",e=>{e.stopPropagation(),this.props.keyDownCallback(e)})}componentDidUpdate(e,r){super.componentDidUpdate(e,r),e.value!==this.props.value&&(this.srgbCanvasRef(this.srgbCanvasElement),this.displayP3CanvasRef(this.displayP3CanvasElement),this.handleRef(this.handleElement))}componentWillUnmount(){super.componentWillUnmount(),this.dragging=!1}disableWeirdHorizontalScrollingPageNavigation(e){e.addEventListener("wheel",e=>e.preventDefault(),{passive:!1})}canvasWidth(){return this.props.width+(this.props.handlePadding?this.props.handle:0)}canvasHeight(){return this.props.height+(this.props.handlePadding?this.props.handle:0)}render(){let e={position:"relative",boxSizing:"border-box",overflow:"hidden",width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.canvasWrapperStyles},r="ui3"===this.props.uiVersion?T:I,n={position:"absolute",boxShadow:`inset ${r}`,left:0,top:0,width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height?1:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.ghostStyles},a=this.valueToPosition(this.props.value),s={position:"absolute",boxSizing:"border-box",boxShadow:r,left:a.x,top:a.y,width:this.props.handle,height:this.props.handle,borderRadius:.5*this.props.handle},l=this.props.hitBoxMargin;return i.createElement("div",{className:this.props.containerClass,style:{position:"relative"}},i.createElement("div",{ref:this.barRef,style:e},this.props.colorProfile===o.RYP.SRGB?i.createElement("canvas",{ref:this.srgbCanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,this.props.colorProfile===o.RYP.DISPLAY_P3?i.createElement("canvas",{ref:this.displayP3CanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,i.createElement("div",{style:n})),this.props.children,i.createElement("div",{ref:this.handleRef,onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,onLostPointerCapture:this.onPointerUp,onWheel:this.onWheel,onKeyDown:this.onKeyDown,style:s,tabIndex:0,className:_.p}),i.createElement("div",{onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,onWheel:this.onWheel,style:{position:"absolute",left:-l,top:-l,right:-l,bottom:-l}}))}}function E(e){return"ui3"===e?b:y}f.displayName="SliderControlInner";let y=12,b=16,I="0 0 0 .6px rgba(0, 0, 0, 0.2)",T="var(--elevation-200-canvas)",v=d.F;function S({hitBoxMargin:e,width:r,height:n,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:p,renderCanvas:_,containerClass:f,recordingKey:y,canvasWrapperStyles:b,ghostStyles:I,colorProfile:T,colorHandle:S,children:w}){let{version:A}=(0,a.DP)(),N=(0,i.useCallback)((e,r)=>{let n=E(A);if(r.style.borderRadius=`${n/2}px`,r.style.borderStyle="solid",r.style.borderWidth="0.5px",r.style.borderColor="var(--color-icon-tertiary, white)",r.style.background="var(--color-bg, white)",S){r.style.borderColor="white",r.style.borderWidth=`${"ui3"===A?4:2}px`;let n=S(e);T===o.RYP.DISPLAY_P3&&(0,h.p3)()?r.style.backgroundImage=`url(${(0,m.rl)(n,T||o.RYP.SRGB)})`:r.style.background=v.format(n,(0,h.VG)(T||o.RYP.SRGB))}},[S,T,A]),C=E(A),O="ui3"===A?{outlineWidth:"1px",outlineStyle:"solid",outlineColor:"var(--color-bordertranslucent)",outlineOffset:"-1px"}:{};return i.createElement(g,{hitBoxMargin:e,width:r,height:n,handle:C,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:p,renderCanvas:_,renderHandle:N,containerClass:f,recordingKey:y,canvasWrapperStyles:{...O,...b},ghostStyles:I,colorProfile:T},w)}},178772:(e,r,n)=>{"use strict";n.d(r,{T:()=>y});var i=n(411855),a=n(198430),o=n(915440),s=n(939863),l=n(175290),c=n(809840),d=n(21584),u=n(672517),p=n(226055),m=n(570809),h=n(335682),_=n(825531),g=n(279453),f=n(498606),E=n(676939);function y(){let e=(0,h.tS)()??"",r=function(e){let r=(0,o.Rs)(g.oBY,{key:e}),n=(0,d.J)();return r?.data?.file?.hasPermission&&n}(e),n=(0,m.M)(),{inExperiment:y,devModeGraceDays:b}=(0,_.X)(e),I=(0,p.GS)(),T=n?.remainingGraceDays??b,v=y?(0,s.t)("fullscreen.toolbar.request_sent.dev_mode_grace_period_tooltip",{numDays:T}):(0,s.t)("fullscreen.toolbar.approval_pending.dev_mode_grace_period_tooltip",{numDays:T}),S=(0,i.useMemo)(()=>void 0===y?i.createElement(a.k,null):y?(0,s.tx)("fullscreen.toolbar.request.request_sent"):(0,s.tx)("fullscreen.toolbar.approval_pending"),[y]);return r?i.createElement(u.fu,{name:"Dev Mode Request Badge"},i.createElement("div",{"data-tooltip":v,"data-tooltip-type":f.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-above":!!I||void 0,"data-tooltip-show-below":!I||void 0,"data-testid":"dev_mode_request_pending_tooltip"},i.createElement(l.Y,{width:y?100:120,padding:{vertical:I?4:8,horizontal:I?8:13},cornerRadius:6,backgroundColor:I?"secondary":"toolbar-secondary",horizontalAlignItems:"center"},i.createElement(c.E,{fontSize:11,fontWeight:"medium"},S)))):I?null:i.createElement(E.g,{variant:"toolbar-secondary",text:(0,s.t)("general.dev_mode")})}},377020:(e,r,n)=>{"use strict";let i;var a=n(411855),o=n(188507),s=n(675678),l=n(629019),c=n.n(l),d=n(134288),u=n(388809),p=n(966712),m=n(374626),h=n(915440),_=n(752553),g=n(886653),f=n(153234),E=n(776621),y=n(498480),b=n(80161),I=n(574176),T=n(715981),v=n(762638),S=n(939863),w=n(256975),A=n(964881),N=n(944682),C=n(670915),O=n(293017),L=n(782656),R=n(103907),P=n(672517),D=n(226055),k=n(788811),M=n(857766),F=n(355513),x=n(411916),U=n(516398),B=n(408405),V=n(122983),G=n(369870);n(488983);var H=n(52570),W=n(335682);n(594901);var K=n(860178),j=n(279453),z=n(147206),Y=n(428467),$=n(239671),q=n(800876),Z=n(498606),X=n(143678),J=n(507956),Q=n(377747),ee=n(634694),et=n(459343),er=n(585645),en=n(525060),ei=n(676939),ea=n(860142),eo=n(601538),es=n(439398),el=n(267850),ec=n(733378),ed=n(641344),eu=n(882746),ep=n(944068),em=n(784578),eh=n(553520),e_=n(250116);let eg=(0,V.ck)(),ef="FULLSCREEN_FILENAME_CHEVRON",eE="FULLSCREEN_FILENAME_DROPDOWN";class ey extends f.o6{constructor(e){super(e),this.startRenaming=f.cZ(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(O.vg())}),this.submitFileName=e=>{this.props.dispatch(O.Wk()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(O.Wk())},this.nameRef=a.createRef()}render(){let e=(0,b._C)({textRef:this.nameRef,text:this.props.name});return this.props.isRenaming?a.createElement(er.A,{className:c()(eh.a6),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:f.Pt(this.props,"input"),maxLength:this.props.maxLength}):a.createElement("span",{className:c()(eh.DD,{[eh.il]:!!this.props.user}),onClick:this.startRenaming,dir:"auto","data-testid":this.props.dataTestId||"filename",tabIndex:0,role:"textbox",ref:this.nameRef,onKeyDown:e=>(0,U.hx)({e,onClickHandler:this.startRenaming}),"aria-label":(0,S.t)("fullscreen.filename_view.file_input_title"),"data-tooltip-type":Z.Ib.TEXT,"data-tooltip":e?this.props.name:void 0},this.props.name)}}function eb(e){let r=(0,D.GS)();return a.createElement(ey,{...e,name:(0,M.oj)(e.repo),onRename:r=>{e.dispatch(L.NN({repo:e.repo,name:r}))},isUI3:r})}function eI(e){let r=(0,o.wA)(),n=(0,K.iZ)(),i=(0,W.q5)(),s=(0,o.d4)(e=>e.isRenaming),l=(0,m.md)(k.lu),c=!!i&&(0,ec.DF)(i,n),d=null==i&&null!=l?{type:"new-autosave-file",newAutosaveFile:l}:{type:"open-file",openFile:i,canRename:c};return a.createElement(eT,{dispatch:r,user:n,renamableFile:d,isRenaming:s,recordingKey:e.recordingKey})}function eT(e){let r,n,i;let o=(0,_.n_)(k.b_),l=(0,D.GS)(),{renamableFile:c}=e;"open-file"===c.type?(r=c.canRename,n=c.openFile?.name):(r=!0,n=c.newAutosaveFile.name,i=c.newAutosaveFile.editorType);let d="new-autosave-file"===c.type;return a.useEffect(()=>{d&&n&&i&&(0,F.hL)(n,(0,$.wN)(i))},[d,n,i]),a.createElement(ey,{...e,name:n||(0,S.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:r=>{"new-autosave-file"===c.type?o({fileKey:c.newAutosaveFile.fileKey,name:r,source:k.oE.EDITOR}):c.openFile?e.dispatch(N.Nw({file:c.openFile,name:r})):(0,E.$D)(s.FigmaTeam.UNOWNED,Error("Tried renaming but file does not exist"))},isUI3:l,maxLength:100})}function ev({file:e}){let r=(0,o.wA)(),n=(0,R.n6)();if(!e||!(0,M.Kz)(e))return null;let i=X.e0.EDITOR_TOOLBAR_ACTION;return a.createElement("div",{className:eh._H},a.createElement(ee.a$,{branchFileKey:e.key,size:y.vj.LARGE,onClick:e=>{r(C.hx({direction:q.Kn.TO_SOURCE,trackingContextName:i,unreadCommentCount:n}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}ey.displayName="EditableName";let eS=e=>{let r=(0,h.Rs)(j.GgD,{repoId:e});if("loaded"!==r.status)return;let n=r.data.repo?.files;return!!n&&n.map(e=>(0,ee.AM)(e)).some(e=>e===ee.pT.IN_REVIEW||e===ee.pT.CHANGES_REQUESTED||e===ee.pT.APPROVED)};function ew({file:e,viewOnly:r}){let n=(0,h.Rs)(j.Std,{orgId:e.parentOrgId}),i=(0,h.Rs)(j.nn0,{fileKey:e.key}),s=(0,J.ks)(),l=(0,w._I)(),c=(0,A.l7)(),u="loading"===n.status||e.parentOrgId&&!e.org,p=(0,Q.Yj)(e.fileRepoId),m=e.fileRepoId?p:null,_=(0,o.wA)(),g=(0,em.kU)({file:e,viewOnly:r}),f=r&&!g;if(!e||m?.status==="loading"||u||"loading"===i.status||f)return null;let E=!!(e.repo&&(0,M.Ns)(e,e.repo)),y=!!(0,M.Kz)(e)&&!!e.trashedAt;return s&&!l?a.createElement("div",{className:v.cx.flex.itemsCenter.wFitContent.$},a.createElement(ei.g,{variant:"toolbar-secondary",text:(0,S.t)("general.dev_mode")})):a.createElement(d.P.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},a.createElement("div",{className:v.cx.flex.itemsCenter.wFitContent.$},E&&e.fileRepoId&&a.createElement(eA,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:_,branchInfo:m}),a.createElement(a.Fragment,null,a.createElement(ed.A,null),!y&&!c&&a.createElement(eu.a7,{file:e,viewPermission:g,recordingKey:"fileNamePermission"}))))}function eA(e){let r=eS(e.repoId),{branchInfo:n}=e;if(!n||"loaded"!==n.status)return null;let i=n.data.activeBranches.length;return i<1?null:a.createElement(T.L,{text:(0,S.t)("fullscreen.filename_view.branch-count",{BRANCHES:i}),onClick:()=>e.dispatch(C.o5({trackingContextName:X.e0.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&r,indicatorStyle:eh.q3})}function eN({openFile:e,user:r}){let n=(0,ep._)(),i=function(e,r){if(!e?.project)return"";let n=e.project;return n.path?n.path:(0,p.kc)().ps_benchmark&&n.id===r?.personal_drafts_folder_id?(0,S.t)("fullscreen.filename_view.drafts_to_move"):(0,S.t)("fullscreen.filename_view.drafts")}(e,r),o=i.length>25?i:void 0,s=(0,D.GS)();return a.createElement("div",{className:i?eh.TV:eh.jw,title:o},a.createElement("div",{className:eh.ub,onClick:n,role:"link",tabIndex:0},i),!s&&a.createElement(I.B,{ariaHidden:!0,svg:e_.A,className:eh.xo}))}class eC extends f.o6{constructor(e){super(e),i=a.createRef()}renderDropdownMenu(){let{dropdownShown:e,recordingKey:r,dispatch:n}=this.props,i=!!e&&e.type===eE;return a.createElement(el.G,{trackEvent:(e,r)=>{this.context.trackEvent(e,r)},dropdownTargetRect:e?.data?.targetRect,recordingKey:r,dispatch:n,dropdownVisible:i,activatePathOnMount:e?.data?.activatePathOnMount})}renderChevronWithDropdown(e,r){let n=a.createElement(a.Fragment,null,a.createElement(et.c,{divRef:i,className:e?eh.ai:eh.fN,svgContainerClassName:eh.Gp,dispatch:this.props.dispatch,showingDropdown:!!r&&this.showingDropdown(),dropdownKey:eE,recordingKey:f.Pt(this.props,"chevron"),dataOnboardingKey:ef,rcsHandlerId:"Filename chevron clicked",tabIndex:0,ariaLabel:(0,S.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",isUI3:this.props.isUI3}),this.renderDropdownMenu());return a.createElement("div",{className:c()({[eh.Xz]:!e}),onMouseDown:e=>{let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});i?.current?.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},n)}showingDropdown(){return this.props.dropdownShown?.type===eE}render(){let{user:e,openFile:r,isRenaming:n,isUI3:o}=this.props,s=r?.repo,l=!!(r&&(0,M.Kz)(r)),d=!!(r&&s&&(0,M.Ns)(r,s)),p=!!r&&(0,ec.DF)(r,e),m=!!this.props.user&&!!r&&!!this.props.editorIsReadOnly,h=!!r&&(0,z.Pe)(r),_=!n&&e&&r&&!h&&!this.props.isLimitedDevMode&&!this.props.hideChevron,g=!n&&e&&r&&this.props.isLimitedDevMode,E=_||g,y=!eg&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return a.createElement("div",{className:c()(eh.iW,{[eh.Ij]:!e}),id:"fullscreen-filename","data-onboarding-key":eo.G8,onContextMenu:e=>{if(i.current){let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});i.current.dispatchEvent(r),e.preventDefault()}}},a.createElement("div",{className:n?eh.Tt:eh.W},r?.fileRepoId&&e?.id&&a.createElement(a.Fragment,null,a.createElement(u.aY,{openFile:r,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),a.createElement(H.jQ,{repoId:r.fileRepoId,openFileKey:r.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,y&&!o&&a.createElement("div",{className:eh.tL},a.createElement(ep.H,{iconClassName:eh.ht})),a.createElement(eN,{user:e,openFile:r}),!n&&l&&s&&a.createElement(en.o,{repo:s,dispatch:this.props.dispatch,trackingContextName:X.e0.EDITOR_TOOLBAR_ACTION}),d&&s?a.createElement(eb,{dispatch:this.props.dispatch,user:e,repo:s,canRename:p,isRenaming:n}):a.createElement(eI,{recordingKey:f.Pt(this.props,"fileName")}),!n&&r&&e&&a.createElement("div",{className:eh.ld},a.createElement(ev,{file:r})),!n&&r&&a.createElement(es.s,{openFile:r}),a.createElement("div",{className:c()({[eh.Dg]:!E})},E&&this.renderChevronWithDropdown(d,r)),(0,G.MP)()&&a.createElement(ea.e,{isUI3:!1,targetKey:ef}),!n&&r&&a.createElement(ew,{file:r,viewOnly:m})))}}eC.displayName="FilenameView",eC.contextType=P.QE;let eO=(0,g.xx)(x.vp);(0,o.Ng)(function(e){let r;let n=(0,Y.getPermissionsState)(e),i=(0,p.kc)().ps_benchmark;r=i?eO(n.user,n.currentUserOrgId,n.currentTeamId):eO(n.user,n.currentUserOrgId);let a=(0,B.T)(e.progressBarState.mode)?!e.openFile?.canEdit:e.mirror?.appModel?.isReadOnly,o=!1;return o=i?e.plans.length>1:(0,x.Tt)(e.authedUsers.orderedIds,n),{editorIsReadOnly:a,isLimitedDevMode:(0,J.$A)(e.selectedView)&&!(0,w.tn)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:r,hasMultipleWorkspaces:o,workspaceName:(0,x.HE)(e,r),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...n}})(eC)},267850:(e,r,n)=>{"use strict";n.d(r,{G:()=>ew});var i=n(411855),a=n(188507),o=n(587670),s=n(138020),l=n(966712),c=n(915440),d=n(939863),u=n(616541),p=n(566590),m=n(119735),h=n(54552),_=n(944682),g=n(660656),f=n(738269),E=n(507877),y=n(76320),b=n(293017),I=n(662275),T=n(103907),v=n(672517),S=n(289104),w=n(385111),A=n(965480),N=n(226055),C=n(988022),O=n(720647),L=n(857766),R=n(888429),P=n(12493),D=n(906400),k=n(396226),M=n(711296),F=n(723245),x=n(875847),U=n(356390),B=n(288536),V=n(665723),G=n(122983),H=n(869156),W=n(335682),K=n(99506),j=n(279453),z=n(147206),Y=n(428467),$=n(284321),q=n(206193),Z=n(694517),X=n(300874),J=n(239671),Q=n(451e3),ee=n(813408),et=n(851363),er=n(279145),en=n(143678),ei=n(392340),ea=n(858212),eo=n(671667),es=n(634694),el=n(828736),ec=n(193948),ed=n(236192),eu=n(776983),ep=n(71676),em=n(13678),eh=n(611964),e_=n(18339),eg=n(206074),ef=n(129531),eE=n(872429),ey=n(144119),eb=n(266294),eI=n(733378),eT=n(736524);let ev=(0,G.ck)();var eS=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(eS||{});function ew({trackEvent:e,dropdownTargetRect:r,recordingKey:n,dispatch:eS,dropdownVisible:ew,activatePathOnMount:eA,leanPadding:eN}){let eC=(0,a.d4)(e=>e.mirror.appModel),eO=(0,a.d4)(e=>e.selectedView),eL=(0,a.d4)(e=>(0,Y.getPermissionsStateMemoized)(e)),eR=(0,a.d4)(e=>e.userStateLoaded),eP=(0,a.d4)(e=>e.openFile),eD=(0,a.d4)(e=>e.fileVersion),ek=(0,W.Cq)({useSinatraType:!0}),eM=(0,a.d4)(e=>e.repos),eF=(0,a.d4)(e=>e.teams),ex=(0,a.d4)(e=>e.currentUserOrgId),eU=(0,a.d4)(e=>e.currentTeamId),eB=(0,ei.Q)({currentOrgId:ex,currentTeamId:(0,l.kc)().ps_benchmark?eU:null}),eV=(0,N.GS)(),eG=(0,ey.sO)(),eH=(0,eE.cJ)(),eW=(0,l.kc)().file_delete_pv2_cleanup,eK=(0,eT.F)(),ej=(0,c.Rs)(j.dTR,{fileKey:eP?.key||""},{enabled:!!eP?.key}),ez=(0,a.d4)($.fA),eY=(0,a.d4)($.LD);(0,H.SR)();let e$=(0,c.Rs)(j.iY3,{branchFileKey:eP?.key||""},{enabled:!!eP}),eq=(0,S.JT)(),eZ=i.useMemo(()=>{if(eP&&"loaded"===eB.status)return(0,F.T0)(eB.data,eP.key)},[eP,eB]),eX=(0,a.d4)($.F9),eJ=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),eQ=(0,ep.jT)(eP,eX),e0=(0,P.$n)(),e1=(0,T.n6)(),e2=(0,A.kD)(),e3=(0,A.J3)(),e6=(0,A.JU)(e3),e8=e3===A.kN.FILE_IN_DRAFTS,e5=(0,m.J_)(),e7=(0,m.pH)(eP?.key??null,{enabled:!!eP&&e5()}),e4=(0,m.GI)("filename-context-menu"),e9=o.Ez5.uiState().isRecovery.getCopy(),te=i.useMemo(()=>eY?"disabled":ez?"publish":"show_upsell_modal",[ez,eY]),tt=(0,B.R6)(),{colorProfilePreference:tr}=(0,V.jK)(),tn=(0,V.hP)(tr),ti=(0,ea.S)(),ta=w.h.useTrackingContext({trigger:q.b.FILE_DUPLICATE});if(!eP||!ew)return null;let to=eO.editorType,ts=to!==J.nT.Whiteboard,tl=!!(ts&&(0,L.Kz)(eP)),tc=!1,td=!1,tu=!1;"loaded"===ej.status&&(tc=eW?!!ej.data?.file?.canTrash&&!!(0,s.oA)(ej.data?.file?.canTrash):!!ej.data?.file?.canDelete,td=!!(0,s.oA)(ej.data?.file?.canMove),tu=!!(ej.data.file&&(0,O._R)(ej.data.file.editorType??K._Y.DESIGN,ej.data.file.currentPlanUser)));let tp="loaded"===eB.status&&(0,F.gV)(eB.data,ex),tm=eL.user,th="loaded"===e$.status&&(null===e$.data.file||e$.data.file&&(0,es.AM)(e$.data.file)===es.pT.MERGED),t_=tl&&("loaded"!==e$.status||th),tg=e$.data?.file?.project,tf=tg&&eP.editorType&&(0,z.Jf)(tg,eP.editorType),tE=(0,Y.isFileFigjamDisabled)(eP,eL)||to===J.nT.Slides&&(0,s.oA)(eP.org?.isSlidesDisabled)||(0,Y.isOrgUserExternallyRestrictedFromState)(eL),ty=tm&&eP.canManage,tb=!1;tb=eW?tc:!!tm&&eP.canDelete;let tI=!!(tl&&eP.trashedAt),tT=tI&&!t_,tv=eq&&eq.profile.entityType===ee.o1.TEAM;tb=!!tm&&tb&&!tv;let tS=td,tw=!!(0,l.kc)().file_move_modal_v2_precheck||tS,tA=(0,eI.DF)(eP,tm),tN=!!eZ,tC=eP.project,tO=tC&&tf?tl?(0,d.t)("fullscreen.filename_view.duplicate-as-new"):(0,d.t)("fullscreen.filename_view.duplicate"):(0,d.t)("fullscreen.filename_view.duplicate-to-drafts"),tL=null,tR=(0,l.kc)().ps_benchmark;tR?tC&&""!==tC.path&&(tL=tC):tL=eP.teamId?tC:null;let tP=tR&&eP.folderId===tm?.personal_drafts_folder_id,tD=eP.canEdit&&!!eP.thumbnailGuid,tk=eB.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],tM=eB.data?.currentUser?.userSidebarSections!=null?(0,s.oA)(eB.data.currentUser.userSidebarSections):null,tF=(0,F.t$)(tM??[],tk),tU=tF.find(e=>e.id===eZ?.resource.sidebarSectionId),tB=()=>{let e=[];return 0===tF.length&&e.push({recordingKey:"favorite-custom",displayText:(0,d.t)("sidebar.starred"),isChecked:!1,callback:()=>tW(!1)}),tF.map(r=>{e.push({recordingKey:"favorite-custom",displayText:""===r.name?(0,d.t)("sidebar.starred"):r.name,isChecked:!!tU&&tU.id===r.id,callback:()=>tW(!!tU&&tU.id===r.id,r.id)})}),e},tV=()=>{if(!e5()||"loaded"!==e7.status||!e7.data)return[];let{canPinFileToWorkspace:e,canEditPin:r,existingFilePinId:n,workspaceHasMaxPins:i}=e7.data;return e?[{displayText:(0,d.t)("tile.dropdown.pin_to_workspace"),callback:()=>e4(eP.key,i)}]:r?[{displayText:(0,d.t)("tile.dropdown.edit_workspace_pin"),callback:()=>tK(n)},{displayText:(0,d.t)("tile.dropdown.remove_workspace_pin"),callback:()=>tj(n)}]:[]},tG=()=>{eS(I.to({type:em.dD,data:{entrypoint:eh.RR.FILENAME_VIEW_DROPDOWN}}))},tH=()=>{let e=eP.teamId&&eF[eP.teamId];eS(I.to({type:e_.$3,data:{afterFileMove:tG,team:e||null}}))},tW=(e,r)=>{if(!ek)return;let n={entrypoint:"editor",favoriteId:eZ?.resource.id,sectionId:r,file:ek,fileBrowserEntryPoint:!1};e?eS(h.qP(n)):eS(h.Fb(n))},tK=e=>{eS(I.to({type:(0,u.l)(),data:{pinnedFileId:e}}))},tj=e=>{eS(I.to({type:(0,p.I)(),data:{pinnedFileId:e}}))},tz=!ev&&eO.editorType===J.nT.Design&&eP.canEdit,tY=(0,ec.jv)((0,R.t)(e0,en.e0.EDITOR_TOOLBAR,eJ),{appModel:eC,selectedView:eO}),t$=(0,ec.jv)((0,R.m)(e0,en.e0.EDITOR_TOOLBAR,eJ,e1),{appModel:eC,selectedView:eO}),tq=(()=>{if(ev)return[];let e=[];return ti&&!tP&&((!tp||tN)&&e.push({displayText:tN?(0,d.t)("favorited_resources.indicate_section_prefix")+": "+(tU&&""!==tU.name?tU.name:(0,d.t)("sidebar.starred")):(0,d.t)("favorited_resources.add_to_sidebar"),children:tB()}),tN&&e.push({recordingKey:"favorite-custom-remove",displayText:(0,d.t)("favorited_resources.remove_from_sidebar"),callback:()=>tW(!0,tU?.id)})),e.push(...tV()),e})(),tZ=(e,r)=>e?r:[],tX=[...t$,...tZ(tl,tY),{separator:!0,displayText:""},...tZ(!ev&&!e9,[{disabled:!(0,er.Yh)(eC,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,ed.Ah)(eC.activeCanvasEditModeType)?(0,d.t)("fullscreen.filename_view.version-history-hide"):(0,d.t)("fullscreen.filename_view.version-history-show"),callback:()=>{eS(f.oB()),(0,ed.Ah)(eC.activeCanvasEditModeType)?eS((0,Z.Eg)()):eS((0,Z._b)({source:en.e0.EDITOR_TOOLBAR}))}}]),...tZ(!!e2,[(0,el.r)({dispatch:eS,fileKey:e2?.fileKey||"",templateName:e2?.name||""})]),...tZ(e6,[(0,el.w)({dispatch:eS,file:{key:eP.key,name:eP.name,folder_id:eP.folderId,team_id:eP.teamId,editor_type:eP.editorType,parent_org_id:eP.parentOrgId},fileNeedsMovingBeforePublish:e8,isPublished:!!e2,source:"filename-context-menu"})]),...tZ(!ev&&!(ts&&tl)&&to!==J.nT.Whiteboard&&!eG,[{disabled:"disabled"===te,recordingKey:"publishVersion",displayText:(0,d.t)("fullscreen.filename_view.publish-styles-and-components"),callback:()=>{"show_upsell_modal"===te?tH():"publish"===te&&tG()}}]),...tZ(eQ,[{recordingKey:"viewFileAnalytics",displayText:(0,d.t)("fullscreen.filename_view.file_analytics"),callback:()=>{eS((0,I.to)({type:eu.e,data:{fileKey:eP.key,entrypoint:M.F.FileView}}))}}]),...tZ(ts&&!eG&&!eH&&!e9,[{disabled:!tm,recordingKey:"exportSelectedExportables",displayText:(0,d.t)("fullscreen.filename_view.export"),shortcut:eC.keyboardShortcuts&&(0,er.c1)(eC.keyboardShortcuts,"export-selected-exportables"),callback:()=>{U.Y5.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...tZ(eK&&eP.canEdit,[{disabled:!tm,recordingKey:"copyToFigmaSlides",displayText:(0,d.t)("slides.general.copy_current_page_to_figma_slides"),callback:()=>{(0,C.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,eb.fx)(eP,eD).then(e=>{(0,eb.PF)(eS,e)})}}]),...tZ(tq.length>0,[{separator:!0,displayText:""},...tq]),{separator:!0,displayText:""},...tZ(!tl,tY),{separator:!0,displayText:""},...tZ(tz,[(0,D.o)(tt,tn)]),{separator:!0,displayText:""},...tZ(!ev&&!tP,[{disabled:!eR||tE,recordingKey:"duplicate",displayText:tO,callback:()=>{eS(f.oB());let e=(0,G.xp)(eP,eP.project,eL);if(e){eS(I.to({type:ef.DV,data:{team:e,resource:X.vL.FILE,action:et.ZN.DUPLICATE_FILES,editorType:eP.editorType||K._Y.DESIGN,currentPlan:k.F.Plan.STARTER,upsellPlan:k.F.Plan.PRO,upsellSource:q.b.FILE_DUPLICATE}}));return}U.Y5.dispatchIfSaved(_.YW({file:eP,checkOssSalesExperiment:eX}))}}]),...tZ(!tI,[{disabled:!tA,recordingKey:"rename",displayText:tl?(0,d.t)("fullscreen.filename_view.rename-branch"):(0,d.t)("fullscreen.filename_view.rename"),callback:()=>{eS(f.oB()),eS(b.vg())}}]),...tZ(!ev&&tT,[{disabled:!ty,displayText:"Restore",callback:()=>{eS(f.oB()),ek&&eS(g.R({fileKeys:{[eP.key]:ek},userInitiated:!0}))}}]),...tZ(!ev&&!!tL,[{disabled:!1,displayText:(0,d.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(tL){let e;e=(0,l.kc)().ps_benchmark?(0,x.cU)(tL.id,tL.orgId??null,tL.teamId,eL):(0,Q.EE)(tL.id,tL.orgId??null),eS(E.V3({url:e}))}}}]),...tZ(!ev&&!tl,[{disabled:!tw,recordingKey:"moveToProject","data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",displayText:(0,d.t)("fullscreen.filename_view.move-to-project"),callback:(0,eI.RG)(eS,eP,eM,{canMove:!!tS,isUserViewerRestricted:!!tu,planUser:ej.data?.file?.currentPlanUser??null,inDrafts:!!ej.data?.file?.isDraftFile})}]),...tZ(!ti&&(tN||!tp)&&!tP,[{recordingKey:"favorite",displayText:tN?(0,d.t)("fullscreen.filename_view.unfavorite_label"):(0,d.t)("fullscreen.filename_view.favorite_label"),callback:()=>tW(!!tN)}]),...tZ(!ev&&!tI&&!tP&&tc,[{disabled:!tb,recordingKey:"delete",displayText:tl?(0,d.t)("fullscreen.filename_view.archive-branch"):(0,l.kc)().pdr_trashed_section?(0,d.t)("fullscreen.filename_view.trash"):(0,d.t)("fullscreen.filename_view.delete"),callback:tl?()=>{eS(f.oB()),ek&&(eS(_.VK({fileKeys:{[eP.key]:ek},userInitiated:!0})),e("Branch Archived",{fileKey:eP.key,fileRepoId:eP.fileRepoId}))}:()=>{if(eS(f.oB()),!eP||!ek)return;let e=(0,L.up)(eP,eM);e&&(0,L.SA)(eP,e)?eP.repo?.canEdit&&!e.trashed_at&&eS(y.U1({filesByKey:{},reposById:{[e.id]:{repo:e,main_file:ek}}})):tb&&eS(y.U1({filesByKey:{[eP.key]:ek}}))}}]),...tZ(!ev&&tI,[{disabled:!ty,displayText:(0,d.t)("fullscreen.filename_view.delete-branch"),callback:()=>{eS(f.oB()),eS(I.to({type:eo.e,data:{fileName:eP.name,onConfirm:()=>eS(y.kj({fileKeys:{[eP.key]:!0},userInitiated:!0}))}}))}}]),...tZ(!!tD,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,d.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{eS(_.$m({file_key:eP.key,thumbnail_guid:null}))}}])];return i.createElement(v.fu,{name:en.e0.EDITOR_FILENAME_DROPDOWN,properties:{...ta,slideConversionDropdownEntrypoint:eK}},i.createElement(eg.j,{items:tX,parentRect:r,showPoint:!eV,recordingKey:n,dispatch:eS,allowCodegenOptions:eO.editorType===J.nT.Design,onSelectItem:e=>{e.callback&&e.callback("",{},eS)},activatePathOnMount:eA,lean:eV?"right":void 0,leanPadding:eN,shouldUsePortal:eV}))}},733378:(e,r,n)=>{"use strict";n.d(r,{DF:()=>d,Qy:()=>p,RG:()=>u});var i=n(181912),a=n(822998),o=n(738269),s=n(857766),l=n(216158),c=n(520425);function d(e,r){return!!e&&!!r&&(e.creatorId===r.id&&(0,i.A)(e.createdAt).add(30,"s").isAfter((0,i.A)())||e.canEdit)}function u(e,r,n,i){return()=>{if(e(o.oB()),!r)return;let l=(0,s.up)(r,n);(0,a.hd)({key:r.key,name:r.name,folder_id:r.folderId,team_id:r.teamId,editor_type:r.editorType,is_team_template:!!r.template&&!r.template.unpublishedAt,parent_org_id:r.parentOrgId},l,e,void 0,{},void 0,!1,i)}}function p(e){return!e.parentOrgId&&!e.teamId}l.M4.Query({fetch:async e=>{if(!e)return null;let r=await c.L.getFileCanRequestEdit({fileKey:e});return!!r.data.meta?.can_request_edit},key:"fileCanRequestEdit"})},784578:(e,r,n)=>{"use strict";n.d(r,{$5:()=>M,Kw:()=>F,Xo:()=>B,i1:()=>x,kU:()=>U,oH:()=>V});var i=n(411855),a=n(188507),o=n(675678),s=n(587670),l=n(776250),c=n(915440),d=n(711525),u=n(776621),p=n(493323),m=n(939863),h=n(553015),_=n(750293),g=n(672517),f=n(226055),E=n(594901),y=n(317946),b=n(860178),I=n(99506),T=n(279453),v=n(623746),S=n(336599),w=n(147206),A=n(802026),N=n(498606),C=n(143678),O=n(507956),L=n(979796),R=n(651994),P=n(344027),D=n(676939),k=n(473174);let M="edit_button_upgrading_to_edit";var F=(e=>(e.EDIT_BUTTON_LOADING="editButtonLoading",e.EDIT_BUTTON="editButton",e.PRO_REQUEST_UPGRADE="proRequestUpgrade",e.ORG_REQUEST_UPGRADE="orgRequestUpgrade",e.REQUEST_EDIT_VIEW="requestEditView",e.PENDING_UPGRADE_REQUEST="pendingUpgradeRequest",e.VIEW_ONLY="viewOnly",e))(F||{});function x(e){return!!e&&["orgRequestUpgrade","proRequestUpgrade","requestEditView"].includes(e.type)}function U(e){let r=e.file,n=(0,a.d4)(e=>e.loadingState),s=(0,a.d4)(e=>e.teams),p=(0,b.iZ)(),h=(0,i.useMemo)(()=>!!r&&(0,w.Pe)(r),[r]),_=(0,a.d4)(({openFile:e})=>e?.org?.name),g=(0,y.E)(),f=r.canEdit,N=(0,E.sj)(r),C=r.editorType===I._Y.SLIDES&&!!(0,d.oA)(r.org?.isSlidesDisabled),L=(0,O.ks)(),R=r.canAccessFullDevMode,P=(0,c.Rs)(T.OiG,{fileKey:r.key,orgId:r.parentOrgId}),D=(0,i.useCallback)(()=>{let e={file_key:r.key,link_access:r.linkAccess};r.parentOrgId?(e.account_type=r.currentPartialOrgUser?.designPaidStatus,e.parent_org_id=r.parentOrgId):r.teamId&&(e.team_id=r.teamId),(0,l.sx)("Edit Button Events",{edit_button_event:"click",...e})},[r]);if("loading"===P.status)return{type:"editButtonLoading"};if("loaded"===P.status){let i=r.org?.inviteWhitelist?.guestInviteSetting===A.Gv.REQUIRE_APPROVAL&&!!P.data.orgJoinRequest,a=P.data.file?.fileRoleRequests.find(e=>e.requesterUserId===p?.id),l=i?(0,m.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:_||""}):a?(0,m.t)("fullscreen.toolbar.pending-edit-request-tooltip"):void 0,c=r.editorType===I._Y.DESIGN?r.currentPartialOrgUser?.designAccountTypeRequest:r.currentPartialOrgUser?.whiteboardAccountTypeRequest,d=r.editorType===I._Y.DESIGN?r.currentTeamUser?.designAccountTypeRequest:r.currentTeamUser?.whiteboardAccountTypeRequest,E=c?.status==="pending",y=d?.status==="pending",b=E?c:y?d:null,T=(0,v.V1)(P.data.file?.currentPrivilegedOrgUser??null),w=T?{...T,license_group_member:T.license_group_member?{license_group_id:T.license_group_member.licenseGroupId}:void 0}:null;if(!i&&(0,S.VP)(n,M))return{type:"editButtonLoading"};if(P.data.file?.canClickButtonToUpgradeAndEdit)return{type:"editButton",upgrade:async()=>{await g(r,M),D()}};if(P.data.file?.mustRequestAccountUpgradeToEdit){if(r.org)return null===r.editorType?null:L&&f&&!R?null:{type:"orgRequestUpgrade",editorType:r.editorType,fileKey:r.key,orgUser:w,orgId:r.parentOrgId,isDevMode:L};{let n=r.teamId&&s[r.teamId];if(n)return{type:"proRequestUpgrade",file:e.file,team:n,isDevMode:L}}}else if(P.data.file?.mustRequestEditorRoleToEdit)return p||(0,u.$D)(o.FigmaTeam.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:p?.id??"",isDevMode:L};else if(P.data.file?.canEditCanvas||P.data.file?.canEditToUpgrade)return null;else if(b&&!L)return null===r.editorType?null:{type:"pendingUpgradeRequest",pendingUpgradeRequest:b,editorType:r.editorType,isRestrictedView:h,isDisabledView:N,pendingToolTipMessage:l,orgId:r.parentOrgId,pendingRequest:!0};return{type:"viewOnly",isRestrictedView:h,isDisabledView:N||C,pendingToolTipMessage:l,pendingRequest:!!(E||y||a||i)}}return null}function B({viewPermission:e,variant:r,recordingKey:n,hideViewOnlyText:a,disableAutoAppearingTooltips:o}){let s=(0,f.GS)();switch(e.type){case"editButtonLoading":return i.createElement("div",{className:k.Hg},i.createElement(h.$,{"aria-label":(0,m.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:r,recordingKey:n,width:s?"fill-parent":void 0},i.createElement("span",{className:k.yx},(0,m.t)("fullscreen.toolbar.edit-file-button")),i.createElement(p.kt,{className:k.yU})));case"editButton":{let a={"data-tooltip":(0,m.t)("fullscreen.toolbar.edit-file-button-hover-tooltip"),"data-tooltip-show-immediately":!0,"data-tooltip-type":N.Ib.TEXT,"data-tooltip-max-width":500,"data-tooltip-offset-y":5};return i.createElement(g.fu,{name:C.e0.FILE_EDIT_BUTTON},i.createElement("div",{"data-onboarding-key":"edit-button-onboarding"},i.createElement(h.$,{variant:r,onClick:e.upgrade,recordingKey:n,width:s?"fill-parent":void 0,...a},(0,m.t)("fullscreen.toolbar.edit-file-button"))))}case"requestEditView":return i.createElement(L.N,{fileKey:e.fileKey,userId:e.userId,isDevMode:e.isDevMode,buttonVariant:r,recordingKey:n});case"orgRequestUpgrade":return i.createElement(g.fu,{name:C.e0.FILE_ORG_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,orgId:e.orgId}},i.createElement(R.R7,{fig_file_key:e.fileKey,orgUser:e.orgUser,orgId:e.orgId,editorType:e.editorType,variant:r,recordingKey:n}));case"proRequestUpgrade":return i.createElement(g.fu,{name:C.e0.FILE_PRO_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,teamId:e.team.id}},i.createElement(R.sG,{file:e.file,team:e.team,entryPoint:_.tc.EDIT_FILE,variant:r,recordingKey:n}));case"pendingUpgradeRequest":{if("dltBannerViewPermission"===n&&!s)return i.createElement(D.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingRequest:e.pendingRequest,variant:r,hideViewOnlyText:a});let l={...e,variant:r,hideViewOnlyText:a,disableAutoAppearingTooltips:o};return i.createElement(P.Ki,{...l})}case"viewOnly":return i.createElement(D.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,pendingRequest:e.pendingRequest,variant:r,hideViewOnlyText:a})}}function V(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&s.Ez5.uiState().isRecovery.getCopy())}},549166:(e,r,n)=>{"use strict";n.d(r,{Cv:()=>eu});var i=n(411855),a=n(188507),o=n(782683),s=n(139689),l=n(587670),c=n(629019),d=n.n(c),u=n(126049),p=n(91408),m=n(517333),h=n(737947),_=n(939683),g=n(358145),f=n(374626),E=n(498750),y=n(438741),b=n(489604),I=n(554322),T=n(768137),v=n(946689),S=n(659838),w=n(827586),A=n(46481),N=n(939863),C=n(649506),O=n(738269),L=n(507877),R=n(293017),P=n(931828),D=n(798099),k=n(198371),M=n(226055),F=n(516398),x=n(369870),U=n(85098),B=n(335682),V=n(754209),G=n(396462),H=n(94500),W=n(416822),K=n(571232),j=n(338400),z=n(498606),Y=n(70699),$=n(619031),q=n(459343),Z=n(720488),X=n(810522),J=n(275415),Q=n(637820),ee=n(104295),et=n(636203),er=n(648044),en=n(27947),ei=n(860168),ea=n(531114),eo=n(639685),es=n(630834);let el="multiplayer-nickname-dropdown",ec=(0,x.ck)(),ed=(0,p.jz)(ei.rJv);function eu(e){let r=(0,B.q5)(),{user:n,multiplayer:o,dropdownShown:s}=e,c=(0,a.wA)(),d=(0,a.d4)(e=>"prototype"===e.selectedView.view),u=(0,V.dR)(),p=(0,V.Ww)(),m=(0,y.B4)(),h=i.useCallback(e=>{!function(e,r,n,i,a,o,s){if(!a)return;let c=e.sessionID,d=c===r,u=o&&o.sessionID===r;if(d&&u)s();else if(i){let r=a.observingSessionID===c||a.sessionID===c?-1:e.sessionID,i=-1!==a.observingSessionID,o=a.observingSessionID!==c&&a.sessionID!==c;i&&n((0,H._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:a.observingSessionID,multiplayerSessionID:a.sessionID}})),o&&(n((0,H._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:c,multiplayerSessionID:a.sessionID}})),n(P.b({aware_of_observation_mode:!0}))),n(R.J4({...a,observingSessionID:r}))}else l.h3O.observeUser(c),a.observingSessionID!==c&&a.sessionID!==c&&n(P.b({aware_of_observation_mode:!0}))}(e,p?.sessionID,c,d,o,u,m)},[p?.sessionID,c,d,o,u,m]),_=d?null:r;return n?i.createElement(i.Fragment,null,!ec&&_&&n&&i.createElement(Q.k,{fileKey:_.key}),i.createElement(ep,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h})):i.createElement(i.Fragment,null,!ec&&_&&n&&i.createElement(Q.k,{fileKey:_.key}),i.createElement(ef,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h}))}function ep(e){let{multiplayer:r,user:n,onUserClick:a,dropdownShown:o,editingFile:s}=e,l=(0,i.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,i.useEffect)(()=>{},[r,n]);let c=(0,k.DG)(s?.key||"").enabled;return i.createElement("div",{className:ea.Wh},i.createElement(en.sK,null),l&&i.createElement(eg,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:a}),s&&i.createElement(X.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let em=(0,i.forwardRef)(function(e,r){let{query:n,setQuery:a}=e,l=(0,g.ZC)(n),c=i.useRef(null),[u,p]=i.useState(!1),m=(0,M.GS)();return(i.useEffect(()=>{c.current&&n!==l&&(c.current.scrollWidth>c.current.clientWidth?p(!0):p(!1))},[l,n]),m)?i.createElement("div",{ref:r,className:ea.MT},i.createElement("div",{className:ea.qc},i.createElement(A.U,{svg:eo.A,"aria-label":(0,N.t)("fullscreen.accessibility.search_icon")},i.createElement(o.h,null))),i.createElement(S.L,{ref:c,placeholder:(0,N.t)("collaboration.spotlight.menu.search.placeholder"),className:d()({[ea.Rt]:!0,[ea.ro]:u}),value:n,onClick:D.dG,onChange:e=>{a(e.target.value),(0,D.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&(a(""),(0,D.dG)(e))},spellCheck:!1}),!!n&&i.createElement("button",{className:ea.hC,onClick:e=>{e.stopPropagation(),a("")},"aria-label":(0,N.t)("search.sidebar_search_clear")},i.createElement("div",{className:ea.i3},i.createElement(A.U,{svg:es.default},i.createElement(s.A,null))))):null});function eh(e){let{targetRect:r,arrowOffsetFromRectLeft:n,currentUser:o,peopleList:s,userListRenderer:l,onUserClick:c,onKeyDown:d}=e,p=(0,M.GS)(),m=(0,i.useRef)(null),h=(0,i.useRef)(null),[g,E]=(0,f.fp)(b.ah),[S,A]=(0,f.fp)(b.Dv),[L,R]=i.useState(p?310:220),P=(0,a.wA)(),D=(0,I.Av)(),k=Math.min(window.innerHeight-D-22,p?465:450);i.useLayoutEffect(()=>{m.current&&h.current&&R(k-m.current.offsetHeight-h.current.offsetHeight)},[p,k]);let F=(0,i.useCallback)(()=>{E(!0)},[E]),{start:x,cancel:U}=(0,G.Z)(F),B=(0,i.useCallback)(()=>{U(),E(!1)},[U,E]),H=(0,y.Vi)(),W=(0,i.useCallback)(()=>{H(),B(),A(!0),P(O.oB())},[B,P,A,H]),K=(0,y.B4)(),j=(0,i.useCallback)(()=>{K(),P(O.oB())},[P,K]),z=(0,V.dR)(),$=z&&e.currentUser.sessionID===z.sessionID?i.createElement(T.pz,{onClick:j,className:ea.BK},(0,N.tx)("collaboration.spotlight.button.stop")):i.createElement(v.$$,{onClick:W,className:ea.BK,onMouseOver:()=>{x(300)},onMouseLeave:B},(0,N.tx)("collaboration.spotlight.tooltip.spotlight_me")),[q,X]=i.useState(""),{searchResults:J}=function(e){let{query:r,usersToSearch:n}=e,[a,o]=i.useState(n),s=i.useRef(!1),l=(0,_.am)(),c=i.useRef(!1),d=c.current,p=i.useCallback(async e=>{if(""===e)o(n);else{s.current=!1;let r=await (0,er.n)(e,n);s.current||(o(r.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),c.current=!0))}},[d,l,n]),m=(0,u.A)(p,200);return i.useEffect(()=>(m(r),()=>{m.cancel(),s.current=!0}),[m,r,n]),{searchResults:a}}({query:q,usersToSearch:s});return i.createElement(Z.Cf,{className:ea.qN,removeUI3BorderPadding:p,targetRect:r,maxHeight:k,maxWidth:ed,lean:"center",arrowOffsetFromRectLeft:n,onKeyDown:d,showPoint:!p,disableDropdownScrollContainer:!0,propagateCloseClick:!0},i.createElement("div",{ref:m,className:ea.az},i.createElement(Y.Q,{user:o,isOverflow:!0,isCurrentUserHeaderRow:p}),i.createElement("div",{className:ea.Vr},$,i.createElement(Q.L,null))),s.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:ea.me}),i.createElement("div",{className:ea.dn,ref:p?h:void 0},i.createElement(em,{ref:p?void 0:h,query:q,setQuery:X})),i.createElement(w.P,{width:ed-16,maxHeight:L,scrollBarAlways:!0},i.createElement(C.W,{autofocus:!0,label:(0,N.t)("fullscreen.toolbar.multiplayer.all_users"),renderer:l,onSelect:e=>{e.length&&(c(e[0]),P(O.oB()))},initiallyNotSelected:!0,customClassName:ea.cu},J))))}let e_="multiplayer-tools-dropdown";function eg(e){let{multiplayer:r,dropdownShown:n,currentUser:o,onUserClick:s}=e,l=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null),p=(0,i.useRef)(null),g=(0,i.useRef)(null),I=(0,M.GS)(),T=(0,a.wA)(),[v,S]=i.useState(!1),w=n?.type===e_,A=(0,i.useMemo)(()=>r.allUsers.filter(e=>e.sessionID!==o?.sessionID),[r.allUsers,o]),[C,R]=(0,f.fp)(b.ah);C&&!w&&R(!1);let P=l.current&&c.current?l.current.clientWidth-c.current.clientWidth:void 0,k=(0,U.Wq)(P),{users:x,overflowUsers:B}=(0,U.uC)(A,null,!1,k),G=(0,i.useMemo)(()=>[...x,...B],[B,x]),H=(0,_.am)(),K=(0,i.useCallback)(e=>{if((0,D.dG)(e),!c.current)return;u.current=c.current.getBoundingClientRect();let r=n?.type===e_;T(L.gR({type:e_})),r||H("Multiplayer Tools Opened",{currentUserSessionID:o.sessionID,otherUserSessionsCount:G.length})},[o.sessionID,T,n?.type,G.length,H]),j=(0,V.dR)(),$=j&&j.sessionID!==o.sessionID?j:null,Z=(0,W.q)(),X=(0,y.tu)(),J=(0,y.oJ)(),Q=i.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:n}){let a=(0,E.Gc)(()=>{let r=`/files${Z}/user/${e.userID}`;h.Ay.redirect(r,m.eD?void 0:"_blank")}),o=[],s=r.sessionNominatedByCurrentUser===e.sessionID;return r.presenterSessionID!==e.sessionID&&(s?o.push({text:(0,N.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,U.AD)(e)&&J(e.sessionID,r)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,N.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,U.AD)(e)&&X(e.sessionID,r)},key:"ask-to-spotlight"})),o.push({text:(0,N.tx)("avatar.tooltip.view_profile"),onClick:e=>{a(e)},key:"view-profile"}),i.createElement(Y.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:n,secondaryActions:o})}}),[r,Z,X,J]),et=w||v,er=G.length+1,en=i.createElement(ee.s,{featured:$,quickAccess:x,maxVisibleUsers:(I?U.A8:U.Q2)-1,onUserClick:s,totalUserCount:er}),ei=i.createElement("button",{id:"multiplayer-toolbar-container","aria-label":(0,N.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"aria-expanded":null!=u.current&&n?.type===e_,"data-tooltip-type":z.Ib.TEXT,"data-tooltip":(0,N.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":c.current&&g.current?c.current.offsetWidth/2-g.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":c.current&&l.current?l.current.clientHeight/2-c.current.clientHeight/2:0,className:d()({[ea.XE]:!0,[ea.yx]:I&&B.length>0,[ea.Ge]:I&&0===B.length,[ea.wH]:w,[ea.yo]:!w&&v}),ref:c,onMouseOverCapture:e=>{S(!0),(0,D.dG)(e)},onMouseDownCapture:K,onMouseLeave:()=>{S(!1)},onKeyDown:e=>{(0,F.hx)({e,onClickHandler:e=>{K(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:D.dG},i.createElement("span",{key:o.sessionID,ref:p,className:ea.r9},i.createElement(Y.Q,{user:o,key:o.sessionID,isOverflow:!1})),i.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:ea.rR},B.length>0&&i.createElement("span",{className:d()({[ea.zk]:!0,[ea.r9]:!0,[ea.wH]:w,[ea.yo]:!w&&v}),style:{minWidth:er<10?8:er<100?15:22}},`${er}`),i.createElement(q.o,{divRef:g,disableHoverAnimation:I,className:d()({[ea.ai]:!0,[ea.r9]:!0,[ea.wH]:w,[ea.yo]:!w&&v}),showingDropdown:et})));return i.createElement("span",{className:ea.EI,ref:l,"data-onboarding-key":"multiplayer-users-container"},I?i.createElement(i.Fragment,null,ei,en):i.createElement(i.Fragment,null,en,ei),n?.type===e_&&g.current&&i.createElement(eh,{targetRect:g.current.getBoundingClientRect(),arrowOffsetFromRectLeft:g.current?g.current.offsetWidth/2+1:0,currentUser:o,onUserClick:s,userListRenderer:Q,peopleList:G,onKeyDown:e=>{"Tab"===e.key&&T(O.oB())}}))}function ef(e){let{multiplayer:r,user:n,onUserClick:a,dropdownShown:o,editingFile:s}=e,l=(0,i.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,i.useEffect)(()=>{},[r,n]);let c=(0,k.DG)(s?.key||"").enabled;return i.createElement("div",{className:ea.Wh},i.createElement(en.sK,null),i.createElement(ey,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:a,editingFile:s}),s&&i.createElement(X.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let eE="multiplayer-users-dropdown";function ey(e){let{editingFile:r,multiplayer:n,dropdownShown:o,currentUser:s,onUserClick:l}=e,c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),p=(0,a.wA)(),_=(0,i.useCallback)(e=>{(0,D.dG)(e),c.current&&(d.current=c.current.getBoundingClientRect(),p(L.gR({type:eE})))},[p]),g=o?.type,f=(0,i.useMemo)(()=>g===el&&u.current?u.current.getBoundingClientRect():null,[g]),b=(0,J.C$)(),I=(0,W.q)(),T=(0,j.Lk)(),v=r?.key??null,{usersNotInCall:S}=(0,K.W5)(v,!0),w=n.allUsers,A=(0,U.D4)(),R=(0,a.d4)(e=>v&&e.voice.activeCall[v])||!1,{users:P,overflowUsers:k}=(0,U.uC)(T?S:w,s,R,A),M=i.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),x=(0,y.tu)(),B=(0,y.oJ)(),V=i.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let a=(0,E.Gc)(()=>{let r=`/files${I}/user/${e.userID}`;h.Ay.redirect(r,m.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID;return n.presenterSessionID!==e.sessionID&&(s?o.push({text:(0,N.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,U.AD)(e)&&B(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,N.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,U.AD)(e)&&x(e.sessionID,n)},key:"ask-to-spotlight"})),o.push({text:(0,N.tx)("avatar.tooltip.view_profile"),onClick:e=>{a(e)},key:"view-profile"}),i.createElement(Y.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[n,I,x,B]);return i.createElement("span",{className:ea.VV,"data-onboarding-key":"multiplayer-avatars"},P.map((e,r)=>{let n=i.createElement(Y.Q,{user:e,onboardingKey:M(r),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===s?.sessionID?i.createElement("span",{key:e.sessionID,ref:u},n):n}),k.length>0&&i.createElement(i.Fragment,null,i.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,N.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=d.current&&o?.type===eE,className:ea.O5,ref:c,onMouseDown:_,onKeyDown:e=>{(0,F.hx)({e,onClickHandler:e=>{_(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:D.dG},i.createElement($.f,{className:ea.zb,text:`${k.length}`})),o?.type===eE&&c.current&&i.createElement(J.WM,{targetRect:c.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&p(O.oB())}},i.createElement(C.W,{autofocus:!0,label:"More multiplayer users",renderer:V,onSelect:e=>{e.length&&(l(e[0]),p(O.oB()))},customClassName:ea.cu},k))),o?.type===el&&f&&i.createElement(Z.Cf,{targetRect:f,maxHeight:b,className:ea.a1,propagateCloseClick:!0},i.createElement(et.M,null)))}},157147:(e,r,n)=>{"use strict";n.d(r,{ec:()=>p}),n(752795);var i=n(587670),a=(n(939863),n(256975)),o=n(813648);n(69961);var s=n(279145),l=n(259494),c=n(605492),d=(e=>(e[e.TOOL=0]="TOOL",e[e.ACTION=1]="ACTION",e[e.CUSTOM_ACTION=2]="CUSTOM_ACTION",e[e.ACTION_SUBMENU=3]="ACTION_SUBMENU",e[e.FLYOUT=4]="FLYOUT",e[e.LABEL=5]="LABEL",e[e.TEXT_BUTTON=6]="TEXT_BUTTON",e))(d||{});let u=[i.m1T.DESIGN_LAYOUT,i.m1T.WHITEBOARD_LAYOUT,i.m1T.SLIDE_LAYOUT,i.m1T.RASTER,i.m1T.GRADIENT,i.m1T.TEXT,i.m1T.COMMENTS];u.concat([i.m1T.VECTOR]),u.concat([i.m1T.VECTOR,i.m1T.PLACE_IMAGE]),i.m1T.VECTOR,i.m1T.PLACE_IMAGE,i.m1T.PREVIEW,i.m1T.BRANCHING,i.m1T.COMPARE_CHANGES,i.m1T.HISTORY,i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.RASTER,i.m1T.GRADIENT,i.m1T.PREVIEW,i.m1T.COMMENTS,i.m1T.BRANCHING,i.m1T.HISTORY,i.m1T.COMPARE_CHANGES,i.NLJ.SELECT,i.NLJ.SCALE,i.NLJ.SHAPE_RECTANGLE,i.NLJ.SHAPE_LINE,i.NLJ.SHAPE_ARROW,i.NLJ.SHAPE_ELLIPSE,i.NLJ.SHAPE_REGULAR_POLYGON,i.NLJ.SHAPE_STAR;let p={type:0,tool:i.NLJ.COMMENTS,action:"set-tool-comments",editModes:u.concat([i.m1T.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"};o.kg,i.NLJ.SELECT,i.NLJ.FRAME,i.NLJ.SECTION,i.NLJ.SLICE,i.NLJ.VECTOR_PEN,i.NLJ.VECTOR_PENCIL,i.NLJ.VECTOR_BEND,i.NLJ.VECTOR_PAINT_BUCKET,i.NLJ.TYPE,i.NLJ.HAND;let m={type:1,action:"focus-mode-component-set-toggle",editModes:[i.m1T.DESIGN_LAYOUT],recordingKey:"focusModeComponentSetToggle",isActive:()=>i.Ez5.uiState().focusModeState.getCopy()===i.xc1.COMPONENT_SET,onboardingKey:"focus-mode-component-set-toggle"},h=[{type:1,action:"multi-edit-text",editModes:u,recordingKey:"multiEditText",onboardingKey:"multi-edit-text"},{type:1,action:"select-matching",editModes:[i.m1T.DESIGN_LAYOUT],recordingKey:"selectMatching"},m],_=e=>r=>!!r.mirror.selectionProperties.resettableInstanceOverrides?.selectionOverrides[e];i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,[...u,i.m1T.DEV_HANDOFF],[...u,i.m1T.DEV_HANDOFF],i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,_(i.YnC.SIZE),_(i.YnC.EXPORTS),_(i.YnC.EFFECTS),_(i.YnC.LAYER),_(i.YnC.VISIBLE),_(i.YnC.NAME),_(i.YnC.FILL),_(i.YnC.STROKE),_(i.YnC.TEXT),_(i.YnC.TEXT_STYLE),_(i.YnC.PROTOTYPE_INTERACTIONS),_(i.YnC.OVERLAY),Symbol("uniqueSymbol"),[...h,(i.m1T.DESIGN_LAYOUT,i.m1T.TEXT),([...u,i.m1T.DEV_HANDOFF,i.m1T.PREVIEW],e=>e.openFile?.canEdit||(0,a.tn)(e)),([...u,i.m1T.DEV_HANDOFF,i.m1T.PREVIEW],()=>!0)],i.NLJ.SELECT,[...u,i.m1T.PREVIEW,i.m1T.HISTORY],i.NLJ.HAND,[...u,i.m1T.PREVIEW,i.m1T.HISTORY],l.N,i.NLJ.SELECT,i.m1T.DEV_HANDOFF,i.m1T.DEV_HANDOFF_HISTORY,c.A,i.NLJ.MEASURE,i.m1T.DEV_HANDOFF,i.NLJ.ANNOTATE,i.m1T.DEV_HANDOFF,i.NLJ.COMMENTS,i.m1T.DEV_HANDOFF,u.concat([i.m1T.DEV_HANDOFF,i.m1T.PREVIEW,i.m1T.MAGIC_LINK])},252828:(e,r,n)=>{"use strict";n.d(r,{QT:()=>$,pK:()=>Y});var i=n(411855),a=n(188507),o=n(243742),s=n(587670),l=n(629019),c=n.n(l),d=n(961747),u=n(939683),p=n(794272),m=n(966712),h=n(498750),_=n(860601),g=n(153234),f=n(268537),E=n(715981),y=n(939863),b=n(738269),I=n(809831),T=n(506599),v=n(226055),S=n(728325),w=n(356390),A=n(949632),N=n(617453),C=n(227944),O=n(318812),L=n(100197),R=n(239671),P=n(498606),D=n(279145),k=n(259494),M=n(507956),F=n(459343),x=n(585645),U=n(206074),B=n(227795),V=n(610544),G=n(349307),H=n(179544),W=n(98285),K=n(539954);let j="zoom-input-dropdown";function z({targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:l}){let c=(0,u.am)();i.useEffect(()=>{c("View Menu Opened")},[c]);let d=(0,I.E3)(),h="ui3"===(0,o.DP)().version,_=(0,L.J2)((0,A.d)().activeCanvasCurrentZoom),g=(0,L.J2)((0,N.UK)().activeCanvasPixelPreview),f=(0,L.J2)((0,A.d)().activeCanvasRetinaMode),E=(0,p.R)(e=>e.mirror.appModel.keyboardShortcuts),y=(0,a.d4)(e=>!e.mirror.appModel.isReadOnly),b=(0,a.d4)(e=>!!e.user),T=(0,a.d4)(e=>(0,M.$A)(e.selectedView)),v=e=>(0,a.d4)(r=>!!r.mirror.appModel[e]),O=d===R.nT.Design,P=d===R.nT.Slides,k="design"===(0,R.oD)(d),F=(0,a.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),x=(0,L.J2)(s.Ez5.editorPreferences().showPropertyLabels),U=(0,L.J2)(s.Ez5.editorPreferences().showFrameGrids),B=(0,L.J2)((0,A.d)().showFrameGridsViewOnly),V=y?"showFrameGrids":"showFrameGridsViewOnly",G=(0,L.J2)((0,m.kc)().figjam_snap_to_dot_grid_reset?(0,N.UK)().snapToDotGridStagingReset:(0,N.UK)().snapToDotGrid),H=(0,L.J2)((0,N.UK)().snapToPixelGrid),W=k?H:G,K=(0,L.J2)((0,N.UK)().showDotGrid),j=(0,L.J2)((0,N.UK)().renderGrid),z=k?j:K,$=k?"renderGrid":"showDotGrid",q=[{type:"ZOOM_IN",shortcut:(0,D.c1)(E,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,C.Zr)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,D.c1)(E,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,C.Zr)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,D.c1)(E,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,D.c1)(E,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:g,recordingKey:"activeCanvasPixelPreview",hidden:!O&&!T,disabled:(0,C.Zr)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,D.c1)(E,"toggle-pixel-preview"),isChecked:!g,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:g&&!f,shortcut:f?void 0:(0,D.c1)(E,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:g&&f,shortcut:f?(0,D.c1)(E,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:k?"PIXEL_GRID":"DOT_GRID",shortcut:(0,D.c1)(E,k?"toggle-grid":"toggle-show-dot-grid"),recordingKey:$,isChecked:z,disabled:!(0,C.Zr)("toggle-grid")},{type:k?"SNAP_TO_PIXEL_GRID":"SNAP_TO_DOT_GRID",shortcut:(0,D.c1)(E,k||P?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:O?"snapToPixelGrid":"snapToDotGrid",isChecked:W,disabled:!(0,C.Zr)(O||P?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:T},{type:"LAYOUT_GRIDS",shortcut:(0,D.c1)(E,"toggle-shown-layout-grids"),recordingKey:V,hidden:!k||!b,isChecked:y?U:B,disabled:(0,C.Zr)(V)},{type:"RULERS",shortcut:(0,D.c1)(E,"toggle-rulers"),recordingKey:"renderRulers",hidden:!k,isChecked:(0,L.J2)((0,N.UK)().renderRulers),disabled:(0,C.Zr)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!k||!b,disabled:(0,C.Zr)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,D.c1)(E,"toggle-outlines"),isChecked:(0,L.J2)((0,A.d)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,L.J2)((0,A.d)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,L.J2)((0,A.d)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,D.c1)(E,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!v("hideMultiplayerCursors"),disabled:(0,C.Zr)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:x,hidden:!h},{type:"separator"},{type:"COMMENTS",shortcut:(0,D.c1)(E,"toggle-show-comments"),recordingKey:"showComments",isChecked:v("showComments"),disabled:(0,C.Zr)("showComments")},{type:"ANNOTATIONS",recordingKey:"showAnnotations",isChecked:(0,L.J2)(s.Ez5.uiState().showAnnotations),disabled:!(0,C.Zr)("toggle-show-annotations"),hidden:!T},{type:"PROTOTYPING",shortcut:(0,D.c1)(E,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!O||y,isChecked:F}],Z=i.useCallback(e=>{s.glU.setCanvasZoomScale(e/100)},[]);return i.createElement(Y,{targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:l,allowCodegenOptions:k,currentZoom:100*_,dropdownItems:q,onSelectDropdownItem:(e,r)=>{switch(e){case"ZOOM_IN":w.Y5.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":w.Y5.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":w.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":s.glU.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":s.glU.setCanvasZoomScale(1);break;case"ZOOM_TO_200":s.glU.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":S.VU.get("toggle-pixel-preview","toolbar")(r);break;case"PIXEL_GRID":S.VU.get("toggle-grid","toolbar")(r);break;case"SNAP_TO_PIXEL_GRID":S.VU.get("toggle-snapping-to-pixels","toolbar")(r);break;case"SNAP_TO_DOT_GRID":S.VU.get("toggle-snapping-to-dots","toolbar")(r);break;case"DOT_GRID":S.VU.get("toggle-show-dot-grid","toolbar")(r);break;case"LAYOUT_GRIDS":S.VU.get("toggle-shown-layout-grids","toolbar")(r);break;case"MULTIPLAYER_CURSORS":S.VU.get("toggle-multiplayer-cursors","toolbar")(r);break;case"PROPERTY_LABELS":S.VU.get("toggle-show-property-labels","toolbar")(r);break;case"PROTOTYPING":S.VU.get("toggle-prototyping-info","toolbar")(r);break;case"RULERS":S.VU.get("toggle-rulers","toolbar")(r);break;case"SLICES":S.VU.get("toggle-show-slices","toolbar")(r);break;case"COMMENTS":S.VU.get("toggle-show-comments","toolbar")(r);break;case"ANNOTATIONS":S.VU.get("toggle-show-annotations","toolbar")(r);break;case"OUTLINES":w.Y5.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":w.Y5.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":w.Y5.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":g&&w.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":g||w.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),f&&w.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":g||w.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),f||w.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}n()},onSubmitCustomZoom:Z})}function Y({targetRect:e,showingZoomDropdown:r,recordingKey:n,allowCodegenOptions:s,currentZoom:l,dropdownItems:c,displayAboveTarget:d,onSelectDropdownItem:u,onSubmitCustomZoom:p}){let m=(0,a.wA)(),_="ui3"===(0,o.DP)().version,E=i.useMemo(()=>({ZOOM_IN:(0,y.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,y.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,y.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,y.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,y.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,y.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,y.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,y.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,y.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,y.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,y.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,y.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,y.t)("fullscreen_actions.toggle-shown-layout-grids"),MULTIPLAYER_CURSORS:(0,y.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,y.t)("fullscreen_actions.toggle-show-property-labels"),RULERS:(0,y.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,y.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,y.t)("fullscreen_actions.toggle-show-comments"),ANNOTATIONS:(0,y.t)("fullscreen_actions.toggle-show-annotations"),OUTLINES:(0,y.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,y.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,y.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,y.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,y.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,y.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,y.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,y.t)("fullscreen_actions.single-properties-panel")}),[]),I=i.useMemo(()=>{let e=r=>{if("separator"===r.type)return{displayText:"",disabled:!0,separator:!0};let{children:n,...i}=r,a={displayText:E[r.type]};switch(r.type){case"ZOOM_TO_50":a.isChecked=50===l;break;case"ZOOM_TO_100":a.isChecked=100===l;break;case"ZOOM_TO_200":a.isChecked=200===l}return n&&(a.children=n.map(e)),{...i,...a}};return c.map(e)},[l,c,E]),T=i.useCallback((e,r)=>{u(e.type,r)},[u]);return i.createElement(U.j,{items:I,onSelectItem:T,parentRect:e,showPoint:!_,dispatch:m,recordingKey:g.Pt(n,"dropdown"),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:s,displayAboveTarget:d},i.createElement("div",{style:{height:2}}),i.createElement("div",{className:V.zj,onKeyDown:e=>{(e.keyCode===h.Uz.ENTER||e.keyCode===h.Uz.ESCAPE)&&r&&m(b.oB())}},i.createElement(x.A,{className:V.hF,placeholderValue:`${Math.round(l)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let r=-1;try{r=parseInt(e,10)}catch(e){}r>0&&p(r)},recordingKey:g.Pt(n,"dropdown","zoomInput")})),i.createElement(f.wv,null))}function $({type:e,recordingKey:r,currentZoom:n,Dropdown:o,...s}){let l=(0,a.wA)(),u=i.useRef(null),p=(0,O.BK)(s.dropdownId),[m,h]=(0,i.useState)(null),f=(0,v.GS)(),{isPropertiesPanelCollapsed:b}=(0,T.iT)(),I=i.useCallback(()=>{h(u?.current?.getBoundingClientRect()||null)},[u]);i.useEffect(()=>(I(),d._.addListener(I),window.addEventListener("resize",I),()=>{d._.removeListener(I),window.removeEventListener("resize",I)}),[I]);let S=i.useCallback(()=>{I(),p.toggle({hasOwnEscKeyHandler:!1})},[p,I]),w=g.rf(g.Pt(r,"zoomButton"),"click",S),A=p.showing&&m&&i.createElement(o,{targetRect:m,showingZoomDropdown:p.showing,toggleZoomMenu:p.toggle,recordingKey:r});function N(){let e=Math.round(n);return f?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}switch(e){case"FULL":{let e=!("canZoomIn"in s)||s.canZoomIn,n=!("canZoomOut"in s)||s.canZoomOut,a="onZoomIn"in s?s.onZoomIn:_.lQ,o="onZoomOut"in s?s.onZoomOut:_.lQ;return i.createElement("div",{role:"none",className:c()(V.sH,V.mu),onClick:e=>e.stopPropagation()},i.createElement(B.K0,{recordingKey:g.Pt(r,"zoomOutButton"),className:c()({[V.QO]:!0,[V.Sn]:n}),svg:G.A,fallbackSvg:H.A,disabled:!n,onClick:o,"data-tooltip-type":P.Ib.LOOKUP,"data-tooltip":"zoom-out"}),i.createElement(E.L,{ariaLabel:(0,y.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:w,selected:p.showing,className:c()(V.LY,p.showing&&V.vu),onboardingKey:k.q,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.zoom_menu.zoom_view_options")},i.createElement("div",{className:V.cm,"data-testid":"zoom-amount",ref:u},N()),i.createElement("div",{className:V.FH,ref:u},i.createElement(F.c,{dispatch:l,dropdownKey:j,showingDropdown:p.showing,dataTestId:"zoom-menu-chevron",className:p.showing?V.r4:V.Dn,svgContainerClassName:V.r2,toggleOnClick:!0}))),A,i.createElement(B.K0,{recordingKey:g.Pt(r,"zoomInButton"),className:c()({[V.sy]:!0,[V.Sn]:e}),svg:W.A,fallbackSvg:K.A,disabled:!e,onClick:a,"data-tooltip-type":P.Ib.LOOKUP,"data-tooltip":"zoom-in"}))}case"DROPDOWN_ONLY":{let e=f?V.l4:V.Xf,r=f?p.showing?V.wg:b?V.Jk:V.Y7:p.showing?V.om:V.wR,n=f?p.showing?V.S0:V.i5:V.cm,a=i.createElement("div",{className:r,ref:f?u:void 0,onClick:w,role:"button",tabIndex:0},i.createElement("div",{className:n,"data-testid":"zoom-amount"},N()),i.createElement("div",{className:c()(V.FH,{[V.WB]:f&&p.showing}),ref:u},i.createElement(F.c,{dispatch:l,dropdownKey:j,showingDropdown:p.showing,dataTestId:"zoom-menu-chevron",toggleOnClick:!0,isUI3:f})));return i.createElement("div",{className:V.sH,role:"none",onClick:e=>e.stopPropagation()},i.createElement(E.L,{selected:p.showing,className:e,onboardingKey:k.q,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:S,onClickForKeyDownOnly:!0,isUI3:f},a),A)}default:return null}}i.memo(function({recordingKey:e}){let r=(0,I.E3)(),n=(0,C.Zr)("zoom-out"),a=(0,C.Zr)("zoom-in"),o=100*(0,L.J2)((0,A.d)().activeCanvasCurrentZoom);return r===R.nT.Whiteboard?i.createElement($,{type:"FULL",recordingKey:e,currentZoom:o,Dropdown:z,dropdownId:j,canZoomIn:a,canZoomOut:n,onZoomIn:()=>w.Y5.triggerAction("zoom-in"),onZoomOut:()=>w.Y5.triggerAction("zoom-out")}):i.createElement($,{type:"DROPDOWN_ONLY",recordingKey:e,currentZoom:o,Dropdown:z,dropdownId:j})})},460528:(e,r,n)=>{"use strict";n(411855),n(320063),n(939863),n(862442),n(970332),n(788256),n(746806)},457261:(e,r,n)=>{"use strict";n(411855),n(966712),n(939863),n(101505),n(226055),n(970332)},261503:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670),n(707458),n(320063),n(939863),n(970332),n(67350),n(788256)},493168:(e,r,n)=>{"use strict";n(411855),n(188507),n(587670),n(707458),n(320063),n(939863),n(931828),n(862442),n(970332),n(67350),n(32067),n(788256),n(493364),n(460528)},988424:(e,r,n)=>{"use strict";n(411855),n(188507),n(629019),n(799569),n(946689),n(939863),n(931828),n(672517),n(226055),n(168039),n(617453),n(373119),n(126911),n(457630),n(309798),n(100197),n(173101),n(600907),n(788256),n(70964);var i=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(i||{});let a=e=>"dark"===e?"https://static.figma.com/uploads/d2eefebde737b9d5fba2b35193dcd51e26ed0164":"https://static.figma.com/uploads/99d648a7ac711ba9d19976515105d6395eeb2d4c",o=e=>"dark"===e?"https://static.figma.com/uploads/e27a5d39945685c389cd50e9f08144678edefeab":"https://static.figma.com/uploads/2357b697bfe85711b1de702dc63611ef8bb75859",s=e=>"dark"===e?"https://static.figma.com/uploads/f49911183f0d3a2b6ee5044b42e0a14fe549999a":"https://static.figma.com/uploads/2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa",l=e=>"dark"===e?"https://static.figma.com/uploads/045c7e1324e953b8ee9ec91ac4e944995662e11e":"https://static.figma.com/uploads/c764bcd0a726bf2d31f70f16808785efeae4de56",c=e=>"dark"===e?"https://static.figma.com/uploads/7a24deb2e05c4542dbd8b6bd1f009e26ba761b48":"https://static.figma.com/uploads/32f4843d9b24a4b95129bacd47f6b81fe439228f"},258525:(e,r,n)=>{"use strict";n.d(r,{B:()=>i}),n(411855),n(188507),n(320063),n(939863),n(931828),n(226055),n(862442),n(970332),n(67350),n(788256),n(746806);let i="text-panel-container"},52354:(e,r,n)=>{"use strict";n(411855),n(188507),n(931828),n(251960),n(456104),n(335682),n(860178),n(309798),n(833629),n(397065),n(463546),n(939863),n(119198),n(349410),n(101505),n(226055),n(974105),n(696673),n(29680),n(99506),n(945020),n(970332),n(460528),n(457261),n(261503),n(258525),n(587670),n(293017),n(843495),n(799943),n(493364),n(788256),n(707458),n(32067),n(493168),n(988424)},788256:(e,r,n)=>{"use strict";n.d(r,{Qf:()=>o}),n(356390),n(843495);var i=n(508169);n(497306),n(457630);var a=(e=>(e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e))(a||{});function o(e){let r=null;try{r=e.getCurrentPage()}catch(e){if(e.message!==i.e)throw e}return r}},282263:(e,r,n)=>{"use strict";n.d(r,{Cr:()=>W,Gx:()=>B,Q8:()=>$,V5:()=>z,_X:()=>V,hu:()=>K,nE:()=>H,rf:()=>j});var i=n(411855),a=n(188507),o=n(730371),s=n(767129),l=n(927457),c=n(587670),d=n(86625),u=n(794272),p=n(966712),m=n(153234),h=n(572206),_=n(46481),g=n(939863),f=n(896474),E=n(632430),y=n(169231),b=n(356390);n(848661);var I=n(869156),T=n(279702),v=n(498606),S=n(420186),w=n(273226),A=n(107244),N=n(251518),C=n(227795);n(83695);var O=n(683859),L=n(29808),R=n(533573),P=n(158406),D=n(830324),k=n(939143),M=n(746806),F=n(502601),x=n(564092);n(875157);var U=n(501191);function B(e,r,n){let o=(0,a.wA)(),s=(0,a.d4)(e=>e.variablePickerShown),l=(0,i.useCallback)(i=>{i?o((0,E.Yi)({item:i,callback:i=>{let a=(0,x.y$)(n,i);d.l7.user("alias-variable",()=>c.CWU.setVariableValueForMode(e,r,a))&&b.Y5.triggerAction("commit")}})):d.l7.user("unalias-variable",()=>c.CWU.detachVariableValueForMode(e,r))&&b.Y5.triggerAction("commit")},[o,e,r,n]);return[s.isShown&&"variable-picker-alias"===s.type&&s.variableID===e&&s.modeID===r,(0,i.useCallback)((i,a)=>{let s=i.getBoundingClientRect();o((0,y.C)({type:"variable-picker-alias",isShown:!0,initialPosition:new h.Mi(s.left,s.bottom),initialView:a?.initialView,variableID:e,modeID:r,resolvedType:n,onVariableSelected:l}))},[e,r,n,o,l]),l]}function V({children:e,...r}){return i.createElement(G,{...r,children:e})}function G({fields:e,children:r,resolvedType:n,requestedTypes:s,editingStyleGuid:l,initialPickerPosition:c,onVariableSelected:d,onExpressionSubmitted:u,onComponentPropSelected:m}){let{consumedVariable:h}=(0,x.u3)(e,l),_=(0,R.MH)(h),g=(0,I.u)(_??void 0),f=!!g&&(0,R.eF)(g),b=(0,x.Ek)(e),[T,v,S,w,A]=function(e,r,n,s,l,c,d){let{mapVariableIdToTypedValue:u}=s??{},m=(0,a.wA)(),h=(0,a.d4)(e=>e.variablePickerShown),{updateVariableConsumption:_,clearVariableConsumption:g}=(0,x.u3)(e),f=(0,i.useCallback)(e=>{n?n(e):e?m((0,E.Yi)({item:e,callback:n=>{u?_(u({variable:e,variableId:n})):_((0,x.y$)(r,n))}})):g()},[n,m,_,r,g,u]),b=(0,i.useCallback)(e=>e?l?l(e):(_(u?u(e):e),!0):(g(),!0),[u,g,l,_]);return[h.isShown&&"variable-picker-fields"===h.type&&(0,o.deepEquals)(h.fields,e)&&s?.metadata===h.metadata,(0,i.useCallback)((n,i)=>{let a=i?.initialPosition??d?.()??(0,D.n)(n);m((0,y.C)({type:"variable-picker-fields",isShown:!0,initialPosition:a,fields:e,resolvedType:r,requestedTypes:s?.requestedTypes,currentFieldValue:i?.currentFieldValue,onVariableSelected:f,metadata:s?.metadata,variableFilters:s?.variableFilters,onExpressionSubmitted:(0,p.kc)().prototype_expressions_nodefields?b:void 0,onComponentPropSelected:(0,p.kc)().ds_variable_props_unified_ui?c:void 0}))},[d,m,e,r,s?.requestedTypes,s?.metadata,s?.variableFilters,f,b,c]),f,(0,p.kc)().prototype_expressions_nodefields?b:void 0,(0,p.kc)().ds_variable_props_unified_ui?c:void 0]}(e,n,d,{requestedTypes:s},u,m,c),N=(0,i.useMemo)(()=>({showBindingUI:v,isShowingBindingUI:T,onVariableSelected:S,boundVariableId:_,isBoundVariableDeleted:f,onExpressionSubmitted:w,onComponentPropSelected:A,mismatchedValue:b}),[v,T,S,_,f,w,b,A]);return i.createElement(O.p.Provider,{value:N},r)}function H({variableID:e,modeID:r,children:n,resolvedType:a}){let[o,s,l]=B(e,r,a),c=(0,I.u8)(e,r),d=(0,R.MH)(c??null),u=(0,I.u)(d??void 0),p=!!u&&(0,R.eF)(u),m=(0,i.useMemo)(()=>({showBindingUI:s,isShowingBindingUI:o,onVariableSelected:l,boundVariableId:d,isBoundVariableDeleted:p}),[s,o,l,d,p]);return i.createElement(O.p.Provider,{value:m},n)}function W({children:e,resolvedType:r,variableValue:n,onVariableValueChange:a,onVariableSelected:o}){let s=i.useRef(),[l,d]=i.useState(!1),u=(0,i.useCallback)(()=>{d(!1)},[]),p=(0,i.useCallback)(e=>{let r=e.getBoundingClientRect();s.current=new h.Mi(r.left,r.bottom),d(!0)},[]),m=n.type===c.Z_n.ALIAS?n.value:void 0,_=(0,I.u)(m),g=!!_&&(0,R.eF)(_),f=(0,i.useMemo)(()=>({showBindingUI:p,isShowingBindingUI:l,boundVariableId:m??null,isBoundVariableDeleted:g}),[p,l,m,g]),E=(0,I.BQ)(m);return i.createElement(O.p.Provider,{value:f},e,l?n.resolvedType!==c.rXF.COLOR?i.createElement(Z,{disabledVariableIds:new Set,boundVariable:null,initialPosition:s.current,resolvedType:r,onVariableSelected:o,onClose:u,pickerType:"create-modal",recordingKey:"variableBindingsDropdown"}):n.type===c.Z_n.COLOR?i.createElement(N.sk,{disabledVariableIds:new Set,title:"",color:n.value,boundVariable:null,initialPosition:s.current,recordingKey:"variableBindingsDropdown",onChange:e=>a({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:o,onClose:u}):n.type===c.Z_n.ALIAS?i.createElement(N.sk,{disabledVariableIds:new Set,title:"",color:E.value,boundVariable:_,initialPosition:s.current,recordingKey:"variableBindingsDropdown",onChange:e=>a({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:o,onClose:u}):void 0:null)}function K({boundVariableId:e,resolvedType:r,requestedTypes:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l,children:c}){let d=(0,I.u)(e??void 0),u=!!d&&(0,R.eF)(d),[p,m,_]=function({resolvedType:e,requestedTypes:r,boundVariableId:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l}){let c=(0,i.useId)(),d=(0,a.wA)(),u=(0,a.d4)(e=>e.variablePickerShown);return[u.isShown&&"variable-picker-controlled"===u.type&&u.key===c,(0,i.useCallback)((i,a)=>{let u=i.getBoundingClientRect();d((0,y.C)({type:"variable-picker-controlled",isShown:!0,initialPosition:a?.initialPosition??o?.()??new h.Mi(u.left,u.bottom),initialView:a?.initialView,variableID:n,key:c,resolvedType:e,requestedTypes:r,onVariableSelected:s,onComponentPropSelected:l}))},[d,n,c,e,r,o,s,l]),c]}({resolvedType:r,requestedTypes:n,boundVariableId:e,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l});return i.createElement(O.p.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:u,isShowingBindingUI:p,showBindingUI:m,onVariableSelected:s,onComponentPropSelected:l,variableBindingContextKey:_}},c)}function j({variableScope:e}){let r=(0,a.wA)(),n=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),o=(0,a.d4)(e=>e.variablePickerShown);if(!o.isShown||"variable-picker-controlled"!==o.type)return null;let{resolvedType:s,initialPosition:l,requestedTypes:c,variableID:d,onVariableSelected:u,variableFilters:p}=o;return i.createElement(Y,{variableID:d,resolvedType:s,requestedTypes:c,initialPosition:l,onVariableSelected:u,onClose:n,variableScopes:e?new Set([e]):void 0,variableFilters:p})}function z({variableScope:e}){let r=(0,a.wA)(),n=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),o=i.useContext(O.p)?.isShowingBindingUI,s=i.useContext(O.p)?.variableBindingContextKey,l=(0,a.d4)(e=>e.variablePickerShown);if(!o||!l.isShown||"variable-picker-controlled"!==l.type||l.key!==s)return null;let{resolvedType:c,initialPosition:d,requestedTypes:u,variableID:p,onVariableSelected:m,onComponentPropSelected:h,variableFilters:_}=l;return i.createElement(Y,{variableID:p,resolvedType:c,requestedTypes:u,initialPosition:d,onVariableSelected:m,onComponentPropSelected:h,onClose:n,variableScopes:e?new Set([e]):void 0,variableFilters:_})}function Y({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:a,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:d,variableFilters:u}){let p=(0,I.u)(a),m=(0,i.useMemo)(()=>{if(a&&p)return{type:c.Z_n.ALIAS,resolvedType:e,value:a}},[e,a,p]);return i.createElement(Z,{disabledVariableIds:new Set,initialPosition:n,resolvedType:e,requestedTypes:r,boundVariable:p,newVariableInitialValue:m,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:d,variableFilters:u,pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown"})}function $(){let e=(0,a.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?i.createElement(q,{pickerShownState:e}):null}function q({pickerShownState:e}){let r=(0,a.wA)(),{variableID:n,modeID:o,resolvedType:s,initialPosition:l,initialView:u,onVariableSelected:p,variableFilters:h}=e,_=(0,I.u8)(n,o),g=(0,I.u)(_?.type===c.Z_n.ALIAS?_?.value:void 0),f=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),E=(0,i.useCallback)((e,r)=>{let i={type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:e};d.l7.user("set-color-variable-value",()=>c.CWU.setVariableValueForMode(n,o,i))&&r===T.zk.YES&&b.Y5.triggerAction("commit")},[n,o]);return _?.resolvedType===c.rXF.COLOR&&_?.type!==c.Z_n.NODE_FIELD_ALIAS?i.createElement(F.Q,null,i.createElement(X,{disabledVariableIds:new Set([n]),boundVariable:g,variableValue:_,initialPosition:l,initialView:u,onColorChange:E,onVariableSelected:p,onClose:f,recordingKey:"variableBindingsDropdown"}),i.createElement(k.$3,{recordingKey:m.Pt("variableBindingsDropdown","closer"),onClose:f})):i.createElement(i.Fragment,null,i.createElement(F.Q,null,i.createElement(Z,{disabledVariableIds:new Set([n]),initialPosition:l,resolvedType:s,variableFilters:h,boundVariable:g,onVariableSelected:p,onClose:f,pickerType:"alias",recordingKey:"variableBindingsDropdown"})),i.createElement(k.$3,{recordingKey:m.Pt("variableBindingsDropdown","closer"),onClose:f}))}function Z({disabledVariableIds:e,initialPosition:r,boundVariable:n,newVariableInitialValue:a,resolvedType:o,requestedTypes:c,variableFilters:d,fields:h,pickerType:E,variableScopes:y,recordingKey:b,onVariableSelected:I,onComponentPropSelected:T,onClose:N}){let O=i.useRef(null),{VariableCreateModalRoot:R,VariableAndComponentPropCreateModalRoot:D,VARIABLE_CREATE_MODAL_WIDTH_PX:F}=(0,i.useContext)(L.l)??{},[x,B]=(0,i.useState)(!1),V=i.useRef(),G=(0,u.R)(e=>(0,A.y7)(e)),H=i.useMemo(()=>!!(0,p.kc)().ds_variable_props_unified_ui&&!!D&&!!G&&!!(0,w.fx)(h),[D,G,h]);function W(){let e=O.current?.getEl();if(!e)return;let r=(0,S.cn)(e,F);V.current=r,B(!0)}function K(){B(!1)}return i.createElement(i.Fragment,null,i.createElement(M.vx,{ref:O,title:"",headerSize:"hidden",initialPosition:r,onClose:N,dragHeaderOnly:!1,initialWidth:P.d9,autoflowHeight:!0},i.createElement(k.Rp,{selectedItem:n,disabledVariableIds:e,resolvedType:o,pickerType:E,recordingKey:b,setControlRightButtons:function(){if((R||H)&&void 0!==o&&("fields"===E||"prop-assignment"===E))return(0,p.kc)().fpl_variables_button_migration?i.createElement(s.K,{"aria-label":(0,g.t)("variables.binding_ui.create_variable_button_tooltip"),recordingKey:m.Pt(b,"createVariable"),onClick:W,htmlAttributes:{"data-tooltip":(0,g.t)("variables.binding_ui.create_variable_button_tooltip"),"data-tooltip-type":v.Ib.TEXT}},i.createElement(_.U,{svg:f.KC["plus-32"]},i.createElement(l.e,null))):i.createElement(C.K0,{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,g.t)("variables.binding_ui.create_variable_button_tooltip"),recordingKey:m.Pt(b,"createVariable"),svg:U.A,onClick:W})}(),onVariableSelected:I,onComponentPropSelected:T,onClose:N,requestedTypes:c,variableScopes:y,variableFilters:d})),i.createElement(k.$3,{recordingKey:m.Pt(b,"closer"),onClose:N}),x&&function(){if(!R&&!H||void 0===o||!V.current)return null;if(H&&D){let e=(0,w.fx)(h);return i.createElement(D,{initialPosition:V.current,initialVariableValue:a,resolvedType:o,onCreateVariable:I,onClose:K,refField:e})}if(R)return i.createElement(R,{initialPosition:V.current,initialValue:a,resolvedType:o,onCreateVariable:I,onClose:K})}())}function X({disabledVariableIds:e,boundVariable:r,variableValue:n,initialPosition:a,initialView:o,recordingKey:s,onColorChange:l,onVariableSelected:d,onClose:u}){let p=n.type===c.Z_n.COLOR?n.value:{r:1,g:1,b:1,a:1};return i.createElement(N.sk,{title:"",color:p,disabledVariableIds:e,initialPosition:a,initialView:o,boundVariable:r,recordingKey:s,onChange:l,onVariableChange:d,onClose:u})}},564092:(e,r,n)=>{"use strict";n.d(r,{AA:()=>K,Ek:()=>q,JG:()=>F,Px:()=>B,QT:()=>Y,R1:()=>M,Zz:()=>V,kN:()=>U,kX:()=>$,oU:()=>j,u3:()=>H,uA:()=>z,xp:()=>W,y$:()=>D,yK:()=>G});var i=n(411855),a=n(188507),o=n(730371),s=n(69107),l=n(587670);n(86625);var c=n(534611),d=n(597616),u=n(89865),p=n.n(u);n(900956),n(776250);var m=n(44948),h=n(966712),_=n(374626);n(939863);var g=n(154483);n(392592);var f=n(308977),E=n(239349),y=n(581250);n(662275);var b=n(848661),I=n(814431),T=n(555074),v=n(869156);n(57392),n(234945);var S=n(173454),w=n(279702),A=n(507956),N=n(909279);n(715762),n(507662);var C=n(836283),O=n(875157),L=n(859703),R=n(761334),P=(e=>(e[e.LEARN_MORE=0]="LEARN_MORE",e[e.REVIEW_UPDATES=1]="REVIEW_UPDATES",e))(P||{});function D(e,r){return{type:l.Z_n.ALIAS,resolvedType:e,value:r}}function k(e){if(0===e.length)return null;if(e.length>=2){for(let r=1;r<e.length;r++)if(!(0,o.deepEquals)(e[r],e[0]))return b.oV}let r=e[0];return r?.isMixed?b.oV:r}function M(){let[e,r]=(0,T.lJ)("variableConsumptionInfo");return{variableConsumptionMap:b.E7(e)?.variableConsumptionMap||{},setVariableConsumptionMap:(0,i.useCallback)((e,n=w.zk.YES)=>{r({variableConsumptionMap:e},n)},[r])}}function F(){return(0,b.E7)((0,I.b)("variableConsumptionMap"))||{}}let x=(0,g.fv)();function U(){let e=(0,T.kl)("variableConsumptionInfo"),r=(0,m.k9)(()=>b.E7(e)?.variableSetKeyToModeData||{},[e]),n=function(){let e=(0,T.kl)("variableConsumptionInfo");return(0,m.k9)(()=>b.E7(e)?.variableSetKeyToPageLevelPresetMode||{},[e])}(),i=function(){let e=(0,v.jI)();return(0,m.wm)(()=>{if("loaded"===e.status){let r=e.data?.items.filter(e=>e.modes&&e.modes.length>1);return p()(r,e=>e.key)}return{}},[e])}();return(0,m.wm)(()=>{for(let[e,a]of Object.entries(n))if(!r[e]&&i[e]){let n=i[e];if(!n.modes?.find(e=>e.id===a))continue;r[e]={collectionID:n.node_id,collectionName:n.name,modeOptions:n.modes?.map(e=>({modeId:{guid:e.id,collectionKey:n.key},name:e.name,isCompatible:!0}))||[],explicitMode:{guid:a,collectionKey:n.key},inheritMode:null,fileKey:x(n)}}return r},[i,n,r])}function B(){let e=(0,T.kl)("variableConsumptionInfo");return(0,m.k9)(()=>b.E7(e)?.variableSetKeyToMode||{},[e])}function V(e){let r=(0,v.u)(e),n=U();return r?Object.values(n).find(e=>e.collectionID===r.variableSetId)??null:null}function G(e){let r=V(e),n=(0,v.G6)(r?.collectionID);if(!r||!n)return null;let i=r.modeOptions,a=r.explicitMode,o=r.inheritMode,s=a??o;return"MIXED"===s?null:i.find(e=>s?e.modeId.guid===s.guid:e.modeId.guid===n.defaultModeID)??null}function H(e,r){let{variableConsumptionMap:n,setVariableConsumptionMap:a}=M(),o=(0,I.b)("guid"),s=F(),d=n;return r&&(0,b.hS)(o)&&c.aI(r,o)&&(d=s),{consumedVariable:d&&k(e.map(e=>d[e])),updateVariableConsumption:(0,i.useCallback)(r=>{let n={};e.forEach(e=>{n[e]=r,(0,R.oz)(e,r)}),(0,N.f)(l.VD3.VARIABLE_ATTACH,()=>{a(n)})},[a,e]),clearVariableConsumption:(0,i.useCallback)((r=w.zk.YES)=>{let n={};e.forEach(e=>{n[e]=null}),(0,N.f)(l.VD3.VARIABLE_DETACH,()=>{a(n,r)})},[a,e])}}function W(e,r,n){return j(e,function(e){if(!(!e||(0,b.gl)(e)))return{type:l.Z_n.FLOAT,resolvedType:l.rXF.FLOAT,value:e}}(r),n)}function K(e,r,n){return j(e,function(e){if(e)return{type:l.Z_n.STRING,resolvedType:l.rXF.STRING,value:e}}(r),n)}function j(e,r,n){let i=(0,E.uQ)(),a=(0,y.Q)(),o=(0,A.ks)(),s=(0,f.v4)(),{variableConsumptionMap:c}=M(),d=n||c,u=function(e){if(e&&(0,b.hS)(e)){if(e.type===l.Z_n.EXPRESSION&&1===e.value.expressionArguments.length){let r=e.value.expressionArguments[0];if(r.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.FONT_STYLE){let r=e.value.asString??e.value.asFloat;if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.ALIAS)return e.value}}(d&&k([e].map(e=>d[e]))||null),p=O.ZM[e]??l.j0r.ALL_SCOPES,m=!u&&o&&i&&r,_=m?l.w3z.getIdsOfVariablesWithValue(i,[p],{type:r.type,value:r.value}):[],g=!m||1!==_.length||(0,h.kc)().dt_inferred_vars_modal?void 0:_[0],I=(0,v.u)(u??g);if(!I)return _.length>0&&r?{matchingVars:{ids:_,rawValue:r}}:{};let T=(0,f.xv)(I,s.id),S=o&&"code"===a.inspectionMode&&T?T:I?.name;return{variable:I,variableDisplayName:S,isSuggested:!u}}function z(e,r,n,i,a){let o=function(e,r){let n=function(e,r){let n=e.variableScope?new Set([e.variableScope]):void 0,{boundVar:i,matchingVars:a}=function(e,r,n){if(!e)return{};let{colorVar:i,color:a,opacity:o}=r;if(i?.value?.alias)return{boundVar:d.dI(i.value.alias)};if(!a||!n)return{};let s=(0,v.iC)(e,Array.from(n),{type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:{...a,a:a.a*(o??1)}});return s?{matchingVars:{ids:s,rawValue:{type:l.Z_n.COLOR,value:{...a,a:a.a*(o??1)}}}}:{}}(r,e.paint,n),o=i??(a?.ids.length===1?a.ids[0]:void 0);return{variableId:o,isSuggested:!i&&!!o,matchingVars:a}}(e,r);if(!n.variableId)return{variable:null,variableData:n};let i=_.zl.get((0,L.Ev)(n.variableId));if(i)return{variable:i,variableData:n};let a=l.CWU.getSubscribedVariableInfo(n.variableId);return a?{variable:(0,S.ZI)(a),variableData:n}:{variable:null,variableData:n}}(e,r),s=function(e,r,n,i,a){if(r.isSuggested&&!i)return{variable:null};let o=(0,f.xv)(e,n),s=i&&"code"===a&&o?o:e?.name;return{variable:e,variableDisplayName:s,isSuggested:r.isSuggested,matchingVars:i?r.matchingVars:void 0}}(o.variable,o.variableData,n,i,a);return{...e,variable:s}}function Y(e,r,n,i,a){return e.map(e=>e.type===C.q.STYLE?function(e,r,n,i,a){let o=e.paints.map(e=>z(e,r,n,i,a));return{...e,paints:o}}(e,r,i.id,a,n):z(e,r,i.id,a,n))}function $(e){return e.map(e=>{if(e&&e.type===C.q.RAW&&e.paint.color)return e.variable?.matchingVars}).filter(e=>!!e)}function q(e){return(0,a.d4)(r=>{let n=b.E7(r.mirror.selectionProperties.variableConsumptionInfo)?.variableNotMatchingSetValue||{},i=e.map(e=>{let r=n[e]??void 0;return(0,s.isNonNullObject)(r)&&"isMixed"in r?b.oV:r});return 0===i.length?void 0:1===i.length?i[0]:i.every(e=>(0,o.deepEquals)(e,i[0]))?i[0]:b.oV})}},533573:(e,r,n)=>{"use strict";n.d(r,{Io:()=>_,MH:()=>function e(r){let n=(0,u.E7)(r);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&n.value?.alias)return s.dI(n.value?.alias);if("type"in n){if(n.type===o.Z_n.ALIAS)return n.value;if(n.type===o.Z_n.FONT_STYLE)return e(n.value.asFloat??n.value.asString??null);if(n?.type===o.Z_n.EXPRESSION&&n.value.expressionFunction===o.JTp.STRINGIFY&&1===n.value.expressionArguments.length)return e(n.value.expressionArguments[0])}}return null},NX:()=>f,Oi:()=>p,eF:()=>h,gQ:()=>g,rY:()=>m});var i=n(634832),a=n(730371),o=n(587670),s=n(597616),l=n(568214),c=n(939863),d=n(775664),u=n(848661);function p(e){if("MIXED"===e)return(0,c.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case o.rXF.FLOAT:return String(parseFloat(e.value.toFixed(2)));case o.rXF.BOOLEAN:return e.value?(0,c.t)("variables.values.boolean.true"):(0,c.t)("variables.values.boolean.false");case o.rXF.COLOR:return d.TI.format(e.value);case o.rXF.STRING:return e.value;default:return JSON.stringify(e.value)}}function m(e,r){if(e===r)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!r||!r.dataType||!r.resolvedDataType||!r.value||e.dataType!==r.dataType||e.resolvedDataType!==r.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===r.value.boolValue;case"FLOAT":return e.value.floatValue===r.value.floatValue;case"STRING":return e.value.textValue===r.value.textValue;case"COLOR":return(0,i.assertNotNullish)(e.value.colorValue),(0,i.assertNotNullish)(r.value.colorValue),(0,l.YU)(e.value.colorValue)===(0,l.YU)(r.value.colorValue);default:return(0,a.deepEquals)(e,r)}}function h(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let _={CORNER_RADIUS:[o.rXF.FLOAT],STACK_SPACING:[o.rXF.FLOAT],STACK_PADDING_LEFT:[o.rXF.FLOAT],STACK_PADDING_TOP:[o.rXF.FLOAT],STACK_PADDING_RIGHT:[o.rXF.FLOAT],STACK_PADDING_BOTTOM:[o.rXF.FLOAT],TEXT_DATA:[o.rXF.STRING,o.rXF.FLOAT],WIDTH:[o.rXF.FLOAT],HEIGHT:[o.rXF.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],STACK_COUNTER_SPACING:[o.rXF.FLOAT],MIN_WIDTH:[o.rXF.FLOAT],MAX_WIDTH:[o.rXF.FLOAT],MIN_HEIGHT:[o.rXF.FLOAT],MAX_HEIGHT:[o.rXF.FLOAT],STROKE_WEIGHT:[o.rXF.FLOAT],OPACITY:[o.rXF.FLOAT],BORDER_TOP_WEIGHT:[o.rXF.FLOAT],BORDER_BOTTOM_WEIGHT:[o.rXF.FLOAT],BORDER_LEFT_WEIGHT:[o.rXF.FLOAT],BORDER_RIGHT_WEIGHT:[o.rXF.FLOAT],MISSING:[],PARAGRAPH_SPACING:[o.rXF.FLOAT],PARAGRAPH_INDENT:[o.rXF.FLOAT],VISIBLE:[o.rXF.BOOLEAN],VARIANT_PROPERTIES:[o.rXF.SYMBOL_ID],FONT_FAMILY:[o.rXF.STRING],FONT_STYLE:[o.rXF.STRING,o.rXF.FLOAT],FONT_VARIATIONS:[o.rXF.FLOAT],FONT_SIZE:[o.rXF.FLOAT],LETTER_SPACING:[o.rXF.FLOAT],LINE_HEIGHT:[o.rXF.FLOAT]};function g(e){return!!e.variable}function f({variable:e,variableDisplayName:r}){return e?e.codeSyntax?.[o.y0x.WEB]?e.codeSyntax[o.y0x.WEB]:`var(--${(r??e.name).replace(/[^a-zA-Z0-9-]/g,"")})`:""}},939143:(e,r,n)=>{"use strict";n.d(r,{$3:()=>e_,Rp:()=>ea,Zd:()=>eI});var i=n(411855),a=n(188507),o=n(634832),s=n(587670),l=n(937036),c=n(629019),d=n.n(c),u=n(939683),p=n(320063),m=n(358145),h=n(966712),_=n(498750),g=n(255942),f=n(527735),E=n(153234),y=n(173748),b=n(192437),I=n(723325),T=n(493323),v=n(574176),S=n(939863),w=n(378905),A=n(696673),N=n(788744),C=n(756317),O=n(680681),L=n(957987),R=n(288542),P=n(869156),D=n(318812),k=n(29680),M=n(335682),F=n(694687),x=n(643067),U=n(173454),B=n(878319),V=n(498606),G=n(7959),H=n(538697),W=n(110382),K=n(181075),j=n(512596),z=n(405209),Y=n(425483),$=n(503795),q=n(90211),Z=n(387727),X=n(761334),J=n(875157),Q=n(669459),ee=n(280999),et=n(731719),er=n(703475);function en({resolvedType:e,requestedTypes:r}){return r||(e?[e]:null)}function ei(e,r,n){return i.createElement("div",{className:Q.p$,style:{height:(0,$.Ih)({layout:r})}},e.length>0?(0,S.t)("variables.binding_ui.no_search_results"):n===s.rXF.COLOR?(0,S.t)("variables.binding_ui.no_colors_empty_state"):(0,S.t)("variables.binding_ui.no_variables_empty_state"))}function ea({selectedItem:e,resolvedType:r,requestedTypes:n,variableFilters:a,pickerType:s,disabledVariableIds:l,setControlRightButtons:c,variableScopes:d,recordingKey:u,onVariableSelected:p,onStyleSelected:m,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g}){let{currentView:f,setCurrentView:E,toggleLayout:y}=(0,z.R)({selectedItem:e,resolvedType:r}),I=function(e){switch(e.type){case"ALL_LIBRARIES":return ed;case"LOCAL_VARIABLES":return ec;case"SUBSCRIBED_VARIABLES":return eo;case"COMPONENT_PROPS":return el;default:(0,o.assertNever)(e,"Unhandled view for picker body")}}(f),T=(0,i.useMemo)(()=>en({requestedTypes:n,resolvedType:r??null}),[n,r]),[v,S]=(0,i.useState)("");return i.createElement(b.tH,{boundaryKey:"VariablePicker",fallback:ei(v,f.layout,r)},i.createElement(I,{selectedItem:e,currentView:f,setCurrentView:E,toggleLayout:y,resolvedType:r,disabledVariableIds:l,pickerType:s,setControlRightButtons:c,recordingKey:u,onVariableSelected:p,onStyleSelected:m,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g,requestedTypes:n,searchQuery:v,onSearchInputChange:S,variableScopes:d,variableFilters:a}),i.createElement(j.M,{resolvedTypes:T,selectedItem:e}))}function eo({selectedItem:e,currentView:r,setCurrentView:n,toggleLayout:a,resolvedType:o,pickerType:l,setControlRightButtons:c,recordingKey:d,onVariableSelected:u,onStyleSelected:p,onClose:m,requestedTypes:h,searchQuery:_,onSearchInputChange:g,variableScopes:f,variableFilters:E}){let y=r.fileKey,b=(0,P.kf)(y),I=(0,P.u5)(y),T=e?.type===U.PW.VARIABLE?e:null,v=(0,P.G6)(T?.variableSetId||""),S="loading"===I.status||"loading"===b.status,[A,N]=(0,i.useMemo)(()=>{let e=b.data??[],r=I.data??[];return T?.subscriptionStatus==="SUBSCRIBED"&&(0,w.TK)(T,y)&&!e.find(e=>e.key===T?.key)&&v?[[...e,T],[...r,v]]:[e,r]},[y,b,I,T,v]);return o===s.rXF.COLOR&&"color-picker"===l&&p?i.createElement(es,{fileKey:y,selectedStyle:e?.type===U.PW.STYLE?e:null,render:({isLoading:s,dsStyles:y})=>i.createElement(eh,{variables:A,variableSets:N,dsStyles:y,currentView:r,setCurrentView:n,toggleLayout:a,selectedItem:e,disabledVariableIds:new Set,resolvedType:o,pickerType:l,setControlRightButtons:c,recordingKey:d,isLoading:s||S,onVariableSelected:u,onStyleSelected:p,onClose:m,requestedTypes:h,searchQuery:_,onSearchInputChange:g,variableScopes:f,variableFilters:E})}):i.createElement(eh,{variables:A,variableSets:N,dsStyles:[],currentView:r,setCurrentView:n,toggleLayout:a,selectedItem:e,disabledVariableIds:new Set,resolvedType:o,pickerType:l,setControlRightButtons:c,recordingKey:d,onVariableSelected:u,onClose:m,requestedTypes:h,searchQuery:_,onSearchInputChange:g,variableScopes:f})}function es({fileKey:e,selectedStyle:r,render:n}){let a=(0,W.AH)(r?.key||null,r),{status:o,stylesByFileKey:s}=(0,W.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:a}),c=s[e]?.styles??[];return i.createElement(K.m,null,n({isLoading:"loaded"!==o,dsStyles:c}))}function el({selectedItem:e,disabledVariableIds:r,currentView:n,setCurrentView:a,toggleLayout:o,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onStyleSelected:h,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b,onComponentPropSelected:I}){let T=(0,P.Rb)(),v=(0,P.yp)();return c===s.rXF.COLOR&&"color-picker"===d&&h?i.createElement(eu,{styleType:l.s4.FILL,render:s=>i.createElement(eh,{variables:T,variableSets:v,dsStyles:s,currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onStyleSelected:h,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b})}):I?i.createElement(ep,{render:s=>i.createElement(eh,{variables:T,variableSets:v,dsStyles:[],currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b,onComponentPropSelected:I,componentProps:s}),pickerType:d,requestedTypes:g}):i.createElement(eh,{variables:T,variableSets:v,dsStyles:[],currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b})}function ec({selectedItem:e,disabledVariableIds:r,currentView:n,setCurrentView:a,toggleLayout:o,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onStyleSelected:h,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b}){let I=(0,P.Rb)(),T=(0,P.yp)();return c===s.rXF.COLOR&&"color-picker"===d&&h?i.createElement(eu,{styleType:l.s4.FILL,render:s=>i.createElement(eh,{variables:I,variableSets:T,dsStyles:s,currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onStyleSelected:h,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b})}):i.createElement(eh,{variables:I,variableSets:T,dsStyles:[],currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onClose:_,requestedTypes:g,searchQuery:f,onSearchInputChange:E,variableScopes:y,variableFilters:b})}function ed({selectedItem:e,disabledVariableIds:r,currentView:n,setCurrentView:a,toggleLayout:o,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onStyleSelected:h,onComponentPropSelected:_,onClose:g,keepOpenOnItemSelect:f,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T}){let v=(0,P.Rb)(),S=(0,P.yp)(),w=(0,P.pN)(),A="loaded"!==w.status,N=w.data?.libraryVariables,C=w.data?.libraryVariableSets,O=(0,i.useMemo)(()=>[...v,...N??[]],[v,N]),L=(0,i.useMemo)(()=>[...S,...C??[]],[S,C]);return c===s.rXF.COLOR&&"color-picker"===d&&h?i.createElement(em,{styleType:l.s4.FILL,selectedStyle:e?.type===U.PW.STYLE?e:null,render:({dsStyles:s,isLoading:l})=>i.createElement(eh,{variables:O,variableSets:L,dsStyles:s,isLoading:l||A,currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onStyleSelected:h,onClose:g,keepOpenOnItemSelect:f,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T})}):_?i.createElement(ep,{render:s=>i.createElement(eh,{variables:O,variableSets:L,dsStyles:[],isLoading:A,currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onClose:g,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T,onComponentPropSelected:_,componentProps:s}),pickerType:d,requestedTypes:E}):i.createElement(eh,{variables:O,variableSets:L,dsStyles:[],isLoading:A,currentView:n,setCurrentView:a,toggleLayout:o,selectedItem:e,disabledVariableIds:r,resolvedType:c,pickerType:d,setControlRightButtons:u,recordingKey:p,onVariableSelected:m,onClose:g,requestedTypes:E,searchQuery:y,onSearchInputChange:b,variableScopes:I,variableFilters:T})}function eu({styleType:e,render:r}){return r((0,W.Je)(e))}function ep({render:e,pickerType:r,requestedTypes:n}){return e(i.useCallback(()=>{let e=(()=>{switch(r){case"set-variable":return(0,h.kc)().ds_variable_props_proto?s.CWU.getComponentPropsForSetVariableList():[];case"prop-assignment":return(0,h.kc)().ds_variable_props_binding?s.CWU.getComponentPropsForPropAssignmentList():[];default:return(0,h.kc)().ds_variable_props_unified_ui?s.CWU.getComponentPropsForFieldsList():[]}})(),i=[];return e&&Object.keys(e).length>0&&e.forEach(e=>{i.push(...(0,$.LV)(e.values,n))}),i},[r,n])())}function em({styleType:e,selectedStyle:r,render:n}){let a=(0,W.Je)(e),o=(0,W.AH)(r?.key||null,r),{status:s,stylesByFileKey:c}=(0,W.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:o}),d=(0,i.useMemo)(()=>Object.values(c).reduce((e,{styles:r})=>(e.push(...r),e),[]),[c]),u=(0,i.useMemo)(()=>a.concat(d),[a,d]);return i.createElement(K.m,null,n({isLoading:"loaded"!==s,dsStyles:u}))}function eh({variables:e,variableSets:r,dsStyles:n,currentView:a,setCurrentView:o,toggleLayout:l,selectedItem:c,disabledVariableIds:u,resolvedType:p,pickerType:g,setControlRightButtons:f,recordingKey:y,isLoading:b,onVariableSelected:v,onStyleSelected:w,onClose:A,keepOpenOnItemSelect:C,requestedTypes:L,searchQuery:R,onSearchInputChange:k,variableScopes:V,variableFilters:H,onComponentPropSelected:W,componentProps:K}){(0,X.D)({isLoading:b??!1,eventName:"variables.variable_picker_load_time"});let z=(0,M.tS)(),ee=(0,D.Um)(),et=c?(0,$.UT)(c):null,er=(0,P.u)(c&&c.type===U.PW.VARIABLE?c.node_id:void 0),ea=(0,P.G6)(er?.variableSetId),[eo,es]=i.useState(null);i.useRef(null).current=eo;let el=i.useRef(null),{canToggleLayout:ec,layout:ed}=R.length>0?{canToggleLayout:!1,layout:"list"}:{canToggleLayout:!0,layout:a.layout},eu=(0,i.useCallback)(()=>{el.current&&el.current.focus(),l()},[l]),ep=(0,i.useMemo)(()=>en({requestedTypes:L,resolvedType:p??null}),[L,p]),em=w?[U.ub.VARIABLE,U.ub.STYLE]:[U.ub.VARIABLE],eh=(0,j.A)(ep,c,em),e_=(0,F.sZ)(),ef=(0,N.Fl)(),eE=(0,x.Oe)(e_)&&(0,O.NX)(ef),ey=(0,i.useMemo)(()=>{if(eE){let e=eh.map(({fileKey:e,fileName:r})=>({key:e,name:r}));return(0,O.k9)({libraries:e,approvedLibraryKeysByResourceType:ef}),e.map(({key:e,name:r})=>({fileKey:e,fileName:r}))}return eh.sort((e,r)=>e.fileName.localeCompare(r.fileName))},[eh,eE,ef]),eb=(0,i.useMemo)(()=>{let e={};return(eE?ey:eh).forEach(r=>{e[r.fileKey]=r.fileName}),e},[eh,ey,eE]),eT=(0,i.useMemo)(()=>L?e.filter(e=>L.includes(e.resolvedType)):e.filter(e=>void 0===p||e.resolvedType===p),[e,p,L]);var ev=er&&!eT.find(e=>(0,$.UT)(e)===et);let eS=(0,i.useMemo)(()=>V?eT.filter(e=>(0,$.UT)(e)===et||(0,J.AQ)(e,V)):eT,[eT,V,et]),ew=(0,q.qF)(eS,R),eA=(0,i.useMemo)(()=>R.length>0?ew:ew.filter(e=>{let r=e.resolvedType,n=H?.[B.t.HIDE_IN_DEFAULT_VIEW];if(n&&n[r])return!1;let i=H?.[B.t.MUST_INCLUDE_ONE_OF];if(i&&i[r]?.length){let n=i[r];if("LIBRARY"===e.subscriptionStatus||n&&!Object.values(e.modeValues).some(e=>{if(e.type===s.Z_n.STRING){let r=e.value.trim().toLocaleLowerCase();return n?.some(e=>e===r)}return!1}))return!1}return!0}),[ew,R,H]),eN=(0,q.bT)(n,R),eC=(0,q.tZ)(K??[],R),eO=(0,i.useMemo)(()=>{if("ALL_LIBRARIES"===a.type)return(0,$.dC)({variables:eA,variableSets:r,styles:eN,componentProps:eC,layout:ed,fileNamesByKey:eb,openFileKey:z});if(p===s.rXF.COLOR)return(0,$.w$)({variables:eA,variableSets:r,styles:eN,layout:ed,isLocal:"LOCAL_VARIABLES"===a.type});if("COMPONENT_PROPS"!==a.type)return(0,$.HK)({variables:eA,variableSets:r,layout:ed});{let e=(0,$.HK)({variables:eA,variableSets:r,layout:ed});if(!(0,h.kc)().ds_variable_props_proto)return e;let n=(0,$.dh)({componentProps:eC});return n.length>0&&e.length>0&&n.push({type:$.Yc.SECTION_HEADER,name:(0,S.t)("variables.binding_ui.file_variables")}),n.concat(e)}},[a.type,p,eA,r,eN,ed,eb,z,eC]);var eL=!1;ev&&ea&&(eO.unshift({type:$.Yc.VARIABLES,items:[er],variableSet:ea}),eL=!0);let eR=i.useRef([]);eR.current=eO;let eP=i.useRef(null),eD=(0,i.useCallback)(()=>{eP.current?.scrollToTop();let e=function(e){let r=null;for(let n of e)if("items"in n){r=n.items[0];break}return r}(eR.current);es(e?(0,$.UT)(e):null)},[]),ek=(0,i.useCallback)((e,r)=>{let n=(0,$.oM)(eR.current,e);n>=0&&eP.current?.scrollToIndex(n,r),es(e)},[]),eM=(0,m.ZC)(R);(0,i.useLayoutEffect)(()=>{!b&&eM!==R&&(R.length>0||!et?eD():R||ek(et,{align:"center"}))},[R,b,eD,ek,et,eM]);let{showStyleContextMenu:eF,hideStyleContextMenu:ex}=(0,Z.XM)(),eU=(0,i.useCallback)((e,r)=>{e.type===U.PW.STYLE&&eF({dsStyle:e,position:r})},[eF]),eB=(0,i.useCallback)(e=>{es((0,$.UT)(e))},[es]),eV=(0,i.useCallback)(e=>{eo===(0,$.UT)(e)&&es(null)},[eo,es]),eG=(0,i.useCallback)(e=>{e.type===U.PW.VARIABLE?v(e):e.type===U.PW.STYLE?w?.(e,{fromSearch:R.length>0}):"COMPONENT_PROP"===e.type&&W?.(e),C||A()},[C,v,w,R.length,W,A]),eH=(0,i.useCallback)(e=>{k(e.currentTarget.value)},[k]),eW=(0,i.useCallback)(r=>{if(r.keyCode===_.Uz.ENTER){let r=function({highlightedItemID:e,variables:r,dsStyles:n,componentProps:i}){return e?[...r,...n,...i].find(r=>(0,$.UT)(r)===e)??null:null}({variables:e,dsStyles:n,componentProps:eC,highlightedItemID:eo});r?eG(r):c&&v(),A()}else r.keyCode===_.Uz.ESCAPE?A():((0,I.Nt)(r,!1)||(0,I.c2)(r,!1)||(0,I.yn)(r.code,!1)||(0,I.lv)(r.code,!1))&&(eo?(eP.current?.getVirtualItems()??[]).some(e=>{let r=eR.current[e.index];return"items"in r&&r.items.some(e=>(0,$.UT)(e)===eo)})||ek(eo,{align:"center"}):et?ek(et,{align:"center"}):eD())},[e,n,eC,eo,A,eG,c,v,et,ek,eD]);return i.createElement(I.dP,{recordingKey:y,onClick:ex},i.createElement("div",{className:Q.PP},i.createElement(eg,{inputRef:el,value:R,onChange:eH,onKeyDown:eW,recordingKey:E.Pt(y,"input")})),i.createElement(eI,{recordingKey:y,currentView:a,resolvedType:p,subscribedLibraries:ey,setControlRightButtons:f,onSetSelect:o,onToggleLayoutIconClick:ec?eu:void 0}),i.createElement(G.Id,{className:d()({[Q.eB]:p!==s.rXF.COLOR,[Q.a2]:!0})},b?i.createElement("div",{className:Q.S,style:{height:(0,$.Ih)({layout:ed})}},i.createElement(T.kt,null)):0!==eN.length||0!==eA.length||0!==eC.length||eL?"list"===ed?i.createElement(Y.HZ,{ref:eP,className:Q.jG,listItems:eO,selectedItemID:et,disabledVariableIds:u,highlightedItemID:eo,pickerType:g,recordingKey:y,onItemHighlight:eB,onItemSelect:eG,onItemContextMenu:eU,onItemMouseLeave:eV}):i.createElement(Y.Rm,{ref:eP,className:Q.jG,listItems:eO,selectedItemID:et,highlightedItemID:eo,recordingKey:y,onItemHighlight:eB,onItemSelect:eG,onItemContextMenu:eU,onItemMouseLeave:eV}):ei(R,ed,p)),ee?.type===Z.A7&&i.createElement(Z.ip,{dsStyle:ee.data.dsStyle,position:ee.data.position,recordingKey:E.Pt(y,"contextMenu")}))}function e_({recordingKey:e,onClose:r}){let n=E.rf(e,"mousedown",i.useCallback(e=>{r(),e.stopPropagation()},[r]));return(0,k.dH)()===s.NLJ.DROPPER_COLOR?null:i.createElement("div",{tabIndex:0,role:"button",className:Q.ZA,onMouseDown:n})}function eg({inputRef:e,value:r,onChange:n,onKeyDown:a,recordingKey:o}){let s=i.useRef(null);return(0,p.h)(()=>{s.current&&s.current.focus()}),i.createElement("div",{className:Q.ON},i.createElement(v.B,{className:Q.qc,svg:er.A}),i.createElement(G.jT,{ref:(0,g.A)(e,s),className:Q.Rt,value:r,onChange:n,noBorderOnFocus:!0,placeholder:(0,S.t)("variables.binding_ui.search_placeholder"),onKeyDown:a,recordingKey:o}))}class ef extends H.l6{}class eE extends H.c${}function ey({recordingKey:e,currentView:r,subscribedLibraries:n,onSetSelect:o,resolvedType:l}){let c=(0,a.wA)(),d=(0,D.Um)(),p=(0,i.useRef)(`variable-binding-set-select-${(0,y.N)()}`),m=(0,u.U)(),_=(0,i.useMemo)(()=>({format(e){switch(e.type){case"LOCAL_VARIABLES":return l===s.rXF.COLOR?(0,S.t)("variables.binding_ui.set_labels.local_colors"):(0,S.t)("variables.binding_ui.set_labels.local_variables");case"COMPONENT_PROPS":return"Component properties";case"SUBSCRIBED_VARIABLES":return e.fileName;case"ALL_LIBRARIES":return(0,S.t)("variables.binding_ui.set_labels.all_libraries")}},isEqual:(e,r)=>e.type===r.type&&("SUBSCRIBED_VARIABLES"!==e.type||e.fileKey===r.fileKey)}),[l]),g=n.length>0?i.createElement(eE,{value:{type:"LOCAL_VARIABLES",layout:r.layout},formattedValue:l===s.rXF.COLOR?(0,S.t)("variables.binding_ui.set_labels.local_colors"):(0,S.t)("variables.binding_ui.set_labels.local_variables"),recordingKey:E.Pt(e,"localVariables")}):null,{pass:b,fail:I}=(0,f.j)(n,e=>(0,A.wJ)(e.fileKey)),T=(0,F.sZ)(),v=(0,x.Oe)(T),w="SUBSCRIBED_VARIABLES"===r.type?r.fileKey:void 0;return i.createElement(ef,{id:p.current,dispatch:c,dropdownShown:d,dropdownWidth:200,className:Q.DQ,chevronClassName:Q.mL,inputClassName:Q.NI,property:r,formatter:_,rightIcon:i.createElement(L.P,{resourceId:w}),onChange:function(e){o(e),(r.type!==e.type||"SUBSCRIBED_VARIABLES"===e.type&&e.fileKey!==w)&&m("variable_picker_library_changed",{pickerViewType:e.type,libraryFilterKey:"SUBSCRIBED_VARIABLES"===e.type?e.fileKey:void 0})},recordingKey:e},i.createElement(eE,{value:{type:"ALL_LIBRARIES",layout:r.layout},formattedValue:(0,S.t)("variables.binding_ui.set_labels.all_libraries"),recordingKey:E.Pt(e,"allLibraries")}),g&&i.createElement(H.sK,null),g,g&&i.createElement(H.sK,null),I.length>0&&!(0,h.kc)().dse_preset_libraries&&i.createElement(H.c$,{isHeader:!0,formattedValue:(0,S.t)("variables.binding_ui.libraries")}),I.map((n,a)=>{let o=v&&(0,O.vR)(n.fileKey);return i.createElement(eE,{key:n.fileKey,value:{type:"SUBSCRIBED_VARIABLES",layout:r.layout,fileKey:n.fileKey,fileName:n.fileName},formattedValue:n.fileName,recordingKey:E.Pt(e,"subscribedLibrary",a),removeTextRightPadding:o,rightSettingsIcon:o&&i.createElement(C.FX,null)})}),(0,h.kc)().dse_preset_libraries?b.map((n,a)=>i.createElement(eE,{key:n.fileKey,value:{type:"SUBSCRIBED_VARIABLES",layout:r.layout,fileKey:n.fileKey,fileName:n.fileName},formattedValue:n.fileName,recordingKey:E.Pt(e,"subscribedLibrary",a),removeTextRightPadding:!0,rightSettingsIcon:i.createElement(R.t,null)})):null)}function eb({recordingKey:e,currentView:r,resolvedType:n,onToggleLayoutIconClick:a}){if(n!==s.rXF.COLOR)return null;{let{tooltip:n,layoutSvg:o}=function(e){switch(e){case"list":return{tooltip:(0,S.t)("variables.binding_ui.show_as_grid_tooltip"),layoutSvg:ee.A};case"grid":return{tooltip:(0,S.t)("variables.binding_ui.show_as_list_tooltip"),layoutSvg:et.A}}}(r.layout);return i.createElement(G.K0,{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":n,recordingKey:e,svg:o,onClick:a})}}function eI({recordingKey:e,currentView:r,subscribedLibraries:n,setControlRightButtons:a,resolvedType:o,onSetSelect:s,onToggleLayoutIconClick:l}){return i.createElement(G.fI,{className:Q.zz},s?i.createElement(ey,{currentView:r,subscribedLibraries:n,recordingKey:E.Pt(e,"setSelector"),onSetSelect:s,resolvedType:o}):i.createElement("div",{className:Q.b8},(0,S.t)("variables.binding_ui.set_labels.local_variables")),(l||a)&&i.createElement("div",{className:Q.aX},l&&i.createElement(eb,{currentView:r,resolvedType:o,onToggleLayoutIconClick:l,recordingKey:E.Pt(e,"toggleLayout")}),a))}},875157:(e,r,n)=>{"use strict";n.d(r,{$8:()=>M,AQ:()=>k,Mm:()=>P,Us:()=>O,ZM:()=>L,aZ:()=>F,iG:()=>D,my:()=>I});var i=n(411855),a=n(668e3),o=n(993086),s=n(291254),l=n(598977),c=n(692775),d=n(193161),u=n(587670),p=n(574176),m=n(939863),h=n(595869),_=n(666139),g=n(560185),f=n(668524),E=n(180377),y=n(58502),b=n(402997),I=(e=>(e.SCOPE="scope",e.LABEL="label",e))(I||{});let T=new Set([u.rXF.FLOAT,u.rXF.COLOR,u.rXF.STRING]),v=new Set([u.rrT.FILL,u.rrT.STROKE,u.rrT.EFFECT]),S=new Set([u.j0r.FRAME_FILL,u.j0r.SHAPE_FILL,u.j0r.TEXT_FILL]),w=[{type:"scope",scope:u.j0r.ALL_SCOPES,name:(0,m.tx)("variables.scopes.all_properties")},{type:"scope",scope:u.j0r.CORNER_RADIUS,name:(0,m.tx)("variables.scopes.corner_radius"),iconElement:i.createElement(p.B,{svg:h.A})},{type:"scope",scope:u.j0r.WIDTH_HEIGHT,name:(0,m.tx)("variables.scopes.width_height"),iconElement:i.createElement(p.B,{svg:E.A})},{type:"scope",scope:u.j0r.GAP,name:(0,m.tx)("variables.scopes.gap"),iconElement:i.createElement(p.B,{svg:g.A}),subLabel:(0,m.tx)("variables.scopes.auto_layout")},{type:"scope",scope:u.j0r.TEXT_CONTENT,name:(0,m.tx)("variables.scopes.text_content"),iconElement:i.createElement(p.B,{svg:b.A})},{type:"scope",scope:u.j0r.STROKE_FLOAT,name:(0,m.tx)("variables.scopes.stroke"),iconElement:i.createElement(p.B,{svg:y.A})},{type:"scope",scope:u.j0r.OPACITY,name:(0,m.tx)("variables.scopes.layer_opacity"),iconElement:i.createElement(a.N,null)},{type:"scope",scope:u.j0r.EFFECT_FLOAT,name:(0,m.tx)("variables.scopes.effects"),iconElement:i.createElement(p.B,{svg:_.A})},{type:"label",key:"typography",label:(0,m.tx)("fullscreen.type_panel.typography")},{type:"scope",scope:u.j0r.FONT_STYLE,name:(0,m.tx)("variables.scopes.font_weight"),iconElement:i.createElement(o.j,null)},{type:"scope",scope:u.j0r.FONT_SIZE,name:(0,m.tx)("variables.scopes.font_size"),iconElement:i.createElement(s.Z,null)},{type:"scope",scope:u.j0r.LINE_HEIGHT,name:(0,m.tx)("variables.scopes.line_height"),iconElement:i.createElement(l.e,null)},{type:"scope",scope:u.j0r.LETTER_SPACING,name:(0,m.tx)("variables.scopes.letter_spacing"),iconElement:i.createElement(c.y,null)},{type:"scope",scope:u.j0r.PARAGRAPH_SPACING,name:(0,m.tx)("variables.scopes.paragraph_spacing"),iconElement:i.createElement(d.o,null)},{type:"scope",scope:u.j0r.PARAGRAPH_INDENT,name:(0,m.tx)("variables.scopes.paragraph_indent"),iconElement:i.createElement(p.B,{svg:f.A})}],A=[{type:"scope",scope:u.j0r.ALL_SCOPES,name:(0,m.tx)("variables.scopes.all_properties")},{type:"scope",scope:u.j0r.ALL_FILLS,name:(0,m.tx)("variables.scopes.all_fills")},{type:"scope",scope:u.j0r.FRAME_FILL,name:(0,m.tx)("variables.scopes.frame_fill"),indented:!0},{type:"scope",scope:u.j0r.SHAPE_FILL,name:(0,m.tx)("variables.scopes.shape_fill"),indented:!0},{type:"scope",scope:u.j0r.TEXT_FILL,name:(0,m.tx)("variables.scopes.text_fill"),indented:!0},{type:"scope",scope:u.j0r.STROKE,name:(0,m.tx)("variables.scopes.stroke")},{type:"scope",scope:u.j0r.EFFECT_COLOR,name:(0,m.tx)("variables.scopes.effects")}],N=[{type:"scope",scope:u.j0r.ALL_SCOPES,name:(0,m.tx)("variables.scopes.all_properties")},{type:"scope",scope:u.j0r.TEXT_CONTENT,name:(0,m.tx)("variables.scopes.text_content"),iconElement:i.createElement(p.B,{svg:b.A})},{type:"scope",scope:u.j0r.FONT_FAMILY,name:(0,m.tx)("variables.scopes.font_family"),iconElement:i.createElement(s.Z,null)},{type:"scope",scope:u.j0r.FONT_STYLE,name:(0,m.tx)("variables.scopes.font_weight_or_style"),iconElement:i.createElement(o.j,null)}],C=[...w,...A,...N].reduce((e,r,n,i)=>("scope"in r&&(e[r.scope]=r.name),e),{});function O(e){return C[e]}let L={CORNER_RADIUS:u.j0r.CORNER_RADIUS,STACK_SPACING:u.j0r.GAP,STACK_PADDING_LEFT:u.j0r.GAP,STACK_PADDING_TOP:u.j0r.GAP,STACK_PADDING_RIGHT:u.j0r.GAP,STACK_PADDING_BOTTOM:u.j0r.GAP,TEXT_DATA:u.j0r.TEXT_CONTENT,WIDTH:u.j0r.WIDTH_HEIGHT,HEIGHT:u.j0r.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:u.j0r.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:u.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:u.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:u.j0r.CORNER_RADIUS,STACK_COUNTER_SPACING:u.j0r.GAP,MIN_WIDTH:u.j0r.WIDTH_HEIGHT,MAX_WIDTH:u.j0r.WIDTH_HEIGHT,MIN_HEIGHT:u.j0r.WIDTH_HEIGHT,MAX_HEIGHT:u.j0r.WIDTH_HEIGHT,STROKE_WEIGHT:u.j0r.STROKE_FLOAT,BORDER_TOP_WEIGHT:u.j0r.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:u.j0r.STROKE_FLOAT,BORDER_LEFT_WEIGHT:u.j0r.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:u.j0r.STROKE_FLOAT,OPACITY:u.j0r.OPACITY,PARAGRAPH_SPACING:u.j0r.PARAGRAPH_SPACING,PARAGRAPH_INDENT:u.j0r.PARAGRAPH_INDENT,FONT_FAMILY:u.j0r.FONT_FAMILY,FONT_STYLE:u.j0r.FONT_STYLE,FONT_VARIATIONS:u.j0r.PARAGRAPH_SPACING,FONT_SIZE:u.j0r.PARAGRAPH_SPACING,LETTER_SPACING:u.j0r.LETTER_SPACING,LINE_HEIGHT:u.j0r.LINE_HEIGHT,MISSING:null,VISIBLE:null,VARIANT_PROPERTIES:null};Object.keys(u.Z6A).filter(e=>isNaN(Number(e)));let R={FRAME:u.j0r.FRAME_FILL,SYMBOL:u.j0r.FRAME_FILL,INSTANCE:u.j0r.FRAME_FILL,VECTOR:u.j0r.SHAPE_FILL,STAR:u.j0r.SHAPE_FILL,LINE:u.j0r.SHAPE_FILL,ELLIPSE:u.j0r.SHAPE_FILL,RECTANGLE:u.j0r.SHAPE_FILL,REGULAR_POLYGON:u.j0r.SHAPE_FILL,ROUNDED_RECTANGLE:u.j0r.SHAPE_FILL,TEXT:u.j0r.TEXT_FILL,TEXT_PATH:u.j0r.TEXT_FILL,VECTOR_OPERATION:u.j0r.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,SLIDE_ROW:null,SLIDE_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null,RESPONSIVE_SET:null,CODE_COMPONENT:null};function P(e){return e===u.rXF.FLOAT?w:e===u.rXF.COLOR?A:e===u.rXF.STRING?N:[]}function D(e){let r=new Set;for(let n of e)L[n]&&r.add(L[n]);return r}function k(e,r){if(!T.has(e.resolvedType))return!0;let n=!1;for(let e of r)if(S.has(e)){n=!0;break}for(let i of e.scopes)if(r.has(i)||i===u.j0r.ALL_SCOPES||i===u.j0r.ALL_FILLS&&n)return!0;return!1}function M(){return[u.rXF.FLOAT,u.rXF.COLOR,u.rXF.STRING]}function F(e,r){if(!e||!r||!v.has(e))return;let n=new Set;switch(e){case u.rrT.STROKE:case u.rrT.STROKE_PRESET:n.add(u.j0r.STROKE);break;case u.rrT.FILL:for(let e in r){let r=R[e];r&&n.add(r)}break;case u.rrT.EFFECT:n.add(u.j0r.EFFECT_COLOR)}return n.size?n:void 0}},859703:(e,r,n)=>{"use strict";n.d(r,{A6:()=>e_,BJ:()=>em,Cg:()=>eo,Eo:()=>W,Ev:()=>ep,Gc:()=>ec,H2:()=>K,LC:()=>Q,Oi:()=>eu,Oj:()=>Y,Ri:()=>z,TD:()=>ei,Yt:()=>$,ZG:()=>H,bO:()=>ed,cp:()=>j,hy:()=>es,hz:()=>q,jt:()=>en,q9:()=>eg,qy:()=>V,uk:()=>el,xA:()=>ea});var i=n(459401),a=n(752795),o=n(215122),s=n(587670),l=n(534611),c=n(636149),d=n.n(c),u=n(89865),p=n.n(u),m=n(802691),h=n.n(m),_=n(966712),g=n(38580),f=n(374626),E=n(684107),y=n(394255),b=n(860601),I=n(364898),T=n(696673),v=n(830445),S=n(356390),w=n(281889),A=n(674011),N=n(529928),C=n(279453),O=n(173454),L=n(875387);let R=(0,A.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsSubscribed),P=(0,g.eU)(e=>e(R).map(O.Rn)),D=(0,A.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsLocal),k=(0,g.eU)(e=>e(D).map(O.Dt)),M=(0,A.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesSubscribed),F=(0,A.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesLocal),x=(0,g.eU)(e=>e(F).map(O.kz)),U=(0,g.eU)(e=>e(M).map(O.ZI)),B=(0,g.eU)(e=>({...p()(e(k),e=>e.keyForPublish),...p()(e(P),e=>e.key)}));(0,g.eU)(e=>({...p()(e(x),e=>e.keyForPublish),...p()(e(U),e=>e.key)}));let V=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),r=(0,f.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=p()(r.added.map(O.Dt),e=>e.node_id);return{...e,...n}}if("deleted"in r){let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{S.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableSetsInfo()})});let r=(0,w.Vr)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),G=(0,g.eU)(e=>({...e(V),...e(ea)})),H=(0,f.Iz)(e=>(0,g.eU)(r=>r(V)[e]));(0,f.Iz)(e=>(0,g.eU)(r=>r(ea)[e]));let W=(0,f.Iz)(e=>(0,g.eU)(r=>r(G)[e]));(0,f.Iz)(e=>(0,E.BV)(r=>n=>n(r({fileKey:e}))));let K=(0,f.Iz)(e=>(0,g.eU)(r=>{let n={};for(let i of e)n[i]=r((0,C.o9k)({fileKey:i}));return n}),i.valuesEqual),j=(0,f.Iz)(e=>(0,E.eS)(r=>n=>n(r({fileKey:e}))));function z(e){return(0,C.eHy)(e?{hubFileId:e}:null)}let Y=(0,f.Iz)(e=>(0,g.eU)(r=>{let n={};for(let i of e)n[i]=r((0,y.he)(C.cmY)({variableCollectionKey:i}));return n}),i.valuesEqual),$=(0,f.Iz)(e=>(0,g.eU)(r=>{let n={};for(let i of e)n[i]=r((0,C.jXq)({fileKey:i}));return n}),i.valuesEqual),q=(0,f.Iz)(e=>(0,g.eU)(r=>{let n={};for(let i of e)n[i]=r((0,C.eHy)({hubFileId:i}));return n}),i.valuesEqual),Z=(0,g.eU)(e=>{let r=e(ed),n=e(L.q),i=((0,_.kc)().dse_preset_libraries?Object.values(r).filter(e=>!(0,v.lR)(n,e)):Object.values(r)).map(e=>e.key).sort();return e((0,E.a5)(i.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.ey)(r.args.key)]=r.result,e),{})}),X=(0,g.eU)(e=>{let r=e(ed),n=e(L.q),i=(e(T.JB)?Object.values(r).filter(e=>(0,v.lR)(n,e)):[]).map(e=>e.key).sort().map(e=>({key:e})),a=(0,v.ku)(v.p9,i,e);return"loaded"!==a.status?{}:a.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variable;if(!n)return e;let i=(0,o.ey)(n.key);return{...e,[i]:r.result}},{})}),J=(0,g.eU)(e=>({...e(Z),...e(X)}),b.lQ),Q=(0,N.Pj)(J,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),ee=(0,g.eU)(e=>{let r=[...new Set(Object.values(e(Z)).map(e=>e.data?.variable?.variableCollection.key).filter(a.isNotNullish))].sort();return e((0,E.Ew)(r.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.yG)(r.args.key)]=r.result,e),{})},b.lQ),et=(0,g.eU)(e=>{let r=[...new Set(Object.values(e(X)).map(e=>e.data?.variable?.variableCollection.key).filter(a.isNotNullish))].sort().map(e=>({key:e})),n=(0,v.ku)(v.nT,r,e);return"loaded"!==n.status?{}:n.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variableCollection;if(!n)return e;let i=(0,o.ey)(n.key);return{...e,[i]:r.result}},{})}),er=(0,g.eU)(e=>({...e(ee),...e(et)}),b.lQ),en=(0,N.Pj)(er,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,g.eU)(e=>{let r=Object.keys(e(V));if(0!==r.length)return r[0]});let ei=(0,g.eU)(e=>Object.values(e(V))),ea=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),r=(0,f.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=p()(r.added.map(O.Rn),e=>e.node_id);return{...e,...n}}{let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{S.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariableSetsInfo()})});let r=(0,w._n)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),eo=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),r=(0,f.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...p()(r.added.map(O.kz),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return h()(e,e=>e.node_id&&!n.has(e.node_id))}if("setDeleted"in r)return h()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{S.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariablesInfo()})});let r=(0,w.j2)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),es=(0,f.Iz)(e=>(0,g.eU)(r=>r(eo)[e]??null)),el=(0,g.eU)(e=>Object.keys(e(eo)).map(r=>e(es(r))).sort((e,r)=>-(0,I.Ez)(e.sortPosition,r?.sortPosition))),ec=(0,g.eU)(e=>d()(e(el),e=>e.variableSetId)),ed=(()=>{let e=(0,N.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),r=(0,f.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...p()(r.added.map(O.ZI),e=>e.node_id)};if("deleted"in r)return h()(e,e=>e.id!==r.deleted);if("setDeleted"in r)return h()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{S.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariablesInfo()})});let r=(0,w.uE)(r=>{e(r)});return()=>{r(),e(null)}},(0,N.S9)(r,e.reducer)})(),eu=(0,f.Iz)(e=>(0,g.eU)(r=>r(ed)[e]??null)),ep=(0,f.Iz)(e=>(0,g.eU)(r=>r(eo)[e]??r(ed)[e]??null));function em(e,r){let n=S.Y5.isReady(),i=new Map(Object.entries(r)),a=n&&e?s.CWU.getVariableResolvedValue(e,i):null,o=(0,g.eU)(a);return e&&(o.onMount=a=>{n||S.Y5.onReady().then(()=>{a(s.CWU.getVariableResolvedValue(e,i))});let o=Object.entries(r),c=o.length>0?o.map((e,r)=>`${e}${r}`).join(","):l.AD,d=(0,w.RW)(e,c,e=>{a(e[c]??null)});return()=>{d(),a(null)}}),o}let eh=(()=>{let e=(0,g.eU)({}),r=(0,f.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...p()(r.added.map(O.Vk),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return h()(e,e=>e.node_id&&!n.has(e.node_id))}return{}}return e});return r.onMount=e=>{S.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableOverridesInfo()})});let r=(0,w.xb)(r=>{e(r)});return()=>{r(),e(null)}},r})(),e_=(0,f.Iz)(e=>(0,g.eU)(r=>{let n=Object.values(r(eh)).filter(r=>r.variableSetId===e);return p()(n,e=>e.rootVariableKey)})),eg=(0,g.eU)(e=>{if(!(0,_.kc)().ds_variables_resolution_v2||!(0,_.kc)().ds_variables_bump_set_versions)return!1;let r=e(ei),n=e(B);return!!r.some(e=>(0,a.isNullish)(n[e.keyForPublish]))})},761334:(e,r,n)=>{"use strict";n.d(r,{D:()=>I,NF:()=>T,oz:()=>S});var i=n(411855),a=n(587670),o=n(534611),s=n(597616),l=n(776250),c=n(38329),d=n(320063),u=n(358145),p=n(374626),m=n(776621),h=n(988022),_=n(742621),g=n(151283),f=n(335682),E=n(860178),y=n(859703);function b(e){switch(e){case a.rXF.BOOLEAN:return"boolean";case a.rXF.FLOAT:return"float";case a.rXF.STRING:return"string";case a.rXF.COLOR:return"color";case a.rXF.MAP:return"map";case a.rXF.SYMBOL_ID:return"symbol_id";case a.rXF.FONT_STYLE:return"font_style";case a.rXF.TEXT_DATA:return"text_data"}}function I({isLoading:e,eventName:r}){let n=(0,u.ZC)(e),a=(0,i.useRef)();(0,d.h)(()=>{a.current=performance.now()});let o=function(e){let r=(0,i.useRef)(!1);return function(){r.current||(e(),r.current=!0)}}(function(){if(a.current){let e=performance.now()-a.current;l.az.trackDefinedMetric(r,{loadTimeMs:e})}});n&&!e&&o()}function T({resolvedType:e}){let r=(0,f.tS)(),n=(0,E.TA)();(0,d.h)(()=>{r&&n&&l.az.trackDefinedEvent("variables.inline_creation_dialog_opened",{fileKey:r,userId:n,resolvedType:b(e)})})}function v(e){return"type"in e}function S(e,r){try{if(v(r)?r.type===a.Z_n.ALIAS:"ALIAS"===r.dataType){let n=v(r)?r.value:(0,s.dI)(r.value?.alias),i=v(r)?b(r.resolvedType):r.resolvedDataType,l=c.D.getState(),d=Object.keys(l.mirror.sceneGraphSelection),u=l.openFile?.key,m=l.user&&l.user.id,f=p.zl.get((0,y.Ev)(n)),E=f?.variableSetId?p.zl.get(y.Eo(f?.variableSetId))?.node_id:null,I=a.CWU.getSubscribedVariableInfo(n),{resourceId:T,libraryKey:S}=(0,_.Cw)(f??(0,_.O8)(I),l.openFile),w=(0,g.X)(T),A=l.mirror.selectedStyleProperties.guid;for(let r of(A&&(d=[o.dI(A)]),d))(0,h.ds)("ds_variable_reference_set",u,l,{userId:m,variable_id:n,collection_id:E,value_type:i?.toString().toUpperCase(),node_id:r,variable_field_id:e,is_style:!!A,is_shared:f?.subscriptionStatus==="SUBSCRIBED",library_key:S,partner_type:w,appleEulaAccepted:!!l.userFlags.apple_eula_accepted},{forwardToDatadog:!0})}else if(v(r)&&r.type===a.Z_n.FONT_STYLE){let n=r.value.asString??r.value.asFloat,i=c.D.getState(),s=Object.keys(i.mirror.sceneGraphSelection),l=i.openFile?.key,d=i.user&&i.user.id,u=p.zl.get((0,y.Ev)(n?.value)),m=u?.variableSetId?p.zl.get(y.Eo(u?.variableSetId))?.node_id:null,f=a.CWU.getSubscribedVariableInfo(n?.value),{resourceId:E,libraryKey:I}=(0,_.Cw)(u??(0,_.O8)(f),i.openFile),T=(0,g.X)(E),v=i.mirror.selectedStyleProperties.guid;for(let r of(v&&(s=[o.dI(v)]),s))(0,h.ds)("ds_variable_reference_set",l,i,{userId:d,variable_id:n?.value,collection_id:m,value_type:n?.resolvedType?b(n?.resolvedType).toUpperCase():void 0,node_id:r,variable_field_id:e,is_style:!!v,is_shared:u?.subscriptionStatus==="SUBSCRIBED",library_key:I,partner_type:T,appleEulaAccepted:!!i.userFlags.apple_eula_accepted},{forwardToDatadog:!0})}}catch(e){(0,m.x1)("variables","Could not log variable consumption",{exception:e},{reportAsSentryError:!0})}}},635736:(e,r,n)=>{"use strict";n.d(r,{y:()=>eg});var i=n(411855),a=n(188507),o=n(459401),s=n(730371),l=n(752795),c=n(171975),d=n(140838),u=n(260906);n(587670),n(86625);var p=n(629019),m=n.n(p),h=n(126049),_=n(395096),g=n(776250),f=n(91408),E=n(820286),y=n(358145),b=n(189430),I=n(966712),T=n(374626),v=n(860601),S=n(153234),w=n(286640),A=n(763658),N=n(572206),C=n(32863),O=n(46481),L=n(762638),R=n(939863),P=n(169231),D=n(798099),k=n(617453);n(869156);var M=n(844053),F=n(318812),x=n(6024),U=n(100197),B=n(945020),V=n(173454),G=n(498606),H=n(237870),W=n(233890),K=n(227795),j=n(545317),z=n(958420),Y=n(282263),$=n(939384),q=n(859703),Z=n(868036),X=n(746806),J=n(337676),Q=n(273289),ee=n(128282),et=n(980984),er=n(641647),en=n(865474),ei=n(116273),ea=n(210024),eo=n(63444),es=n(313650),el=n(84013);let ec="variables-modal-width",ed="variables-modal-height",eu="variables-modal-position",ep=(0,f.jz)(es.gZ),em=(0,f.jz)(es.Ld),eh=(0,f.jz)(es.Cg),e_=(0,f.jz)(es.NE),eg=(0,H.Ju)(function(){let e=(0,x.n)({type:eg}),r=(0,a.wA)(),n=(0,U.J2)((0,k.UK)().showGuids),p=(0,a.d4)(e=>e.variablePickerShown),H=(0,a.d4)(e=>e.modalShown?.type===z.eK.type),ef=(0,T.md)(q.q9),{state:{currentVariableSet:eE,renamingModeGUID:ey,renamingVariableID:eb,selectedGroupNames:eI,selectedVariableIDs:eT,variableGroupList:ev,variableList:eS,variableOverrides:ew,isSidebarOpen:eA},actions:eN}=(0,Q.D)(Q.u.WRITEABLE),{showing:eC,show:eO,hide:eL,data:eR}=(0,F.BK)("variables-modal-context-menu"),eP=(0,i.useCallback)((e,r,n,i)=>{H&&eN.toggleEditVariableModal(null);let a=eT;eT.includes(e)||(eN.setSelectedVariableIDs([e]),a=[e]),eO({data:{position:{left:n.clientX,top:n.clientY},modeID:r,variables:(0,o.mapAndFilterNullish)(a,e=>eS.find(r=>r.node_id===e)),cellElement:n.currentTarget,groupNames:[],onCreateExpression:i}}),n.preventDefault()},[H,eT,eO,eN,eS]),eD=(0,i.useCallback)((e,r)=>{eO({data:{position:{left:r.clientX,top:r.clientY},groupNames:eI,variables:[],cellElement:r.currentTarget}}),r.preventDefault()},[eI,eO]),ek=(0,a.d4)(M.c);(0,i.useEffect)(()=>(0,g.sx)("ds_variables_modal_opened",ek),[ek]);let eM=e=>eT.length>0&&e?.key==="Enter"&&!!e.shiftKey&&(eN.duplicateVariables?.(),!0),eF=(0,I.kc)().ds_lbu_variable_modal_copy_paste??!1,ex=function(e,r,n){let[a,o]=(0,i.useState)(null),s=(0,y.ZC)(e);return(0,i.useEffect)(()=>{let n=null!==a&&Date.now()-a<100;e.length>(s?.length??0)&&n&&(r(e.filter(e=>!s?.includes(e)).map(e=>e.node_id)),o(null))},[e,s,a,r]),(0,i.useCallback)(()=>{o(Date.now()),n?.()},[n,o])}(eS,eN.setSelectedVariableIDs,eN.pasteClipboardVariables),eU=(0,i.useCallback)((e,r)=>{eF&&r===B.zy.COPY&&eN.copySelectedVariables?.(),eF&&r===B.zy.PASTE&&ex(),e.accept(),e.shouldPropagate=!1},[eN,eF,ex]),eB=S.fo("variablesModal","keydown",e=>{eM(e.event)&&(e.accept(),eM(e))}),eV=i.useRef(null),eG=(0,i.useRef)(null),eH=function({hasVariables:e=!0,isSidebarOpen:r=!1}={}){let n=(0,w.Q_)(),a=(0,j.P)(),o=(0,i.useMemo)(()=>new N.Mi(a+(0,f.jz)(es.gZ),(0,f.jz)(es.Ld)+(0,f.jz)(es.gZ)),[a]),[{windowInnerHeight:l,windowInnerWidth:c}]=(0,_.A)((0,b.l)(),300,{equalityFn:s.deepEquals}),[d]=(0,i.useState)(()=>{let e=n?.getItem(eu);if(!e)return null;let i=JSON.parse(e);return i.x+(r?e_:0)>c||i.y>l?(n?.removeItem(eu),n?.removeItem(ec),n?.removeItem(ed),null):new N.Mi(i.x,i.y)}),[u]=(0,i.useState)(()=>{let e=Number(n?.getItem(ec));return e&&Number.isFinite(e)?e:642}),[p]=(0,i.useState)(()=>{let e=Number(n?.getItem(ed));return e&&Number.isFinite(e)?e:380});return{initialConstraints:d?{x:"left",y:"top"}:{x:"right",y:"top"},initialPosition:d??o,maxWidth:c-2*ep,maxHeight:l-em-2*ep,minWidth:400,minHeight:e?180:300,initialWidth:u,initialHeight:p}}({hasVariables:eS.length>0,isSidebarOpen:eA}),eW=(0,j.P)(),eK=(0,w.Q_)(),ej=(0,i.useCallback)(({width:e,height:r})=>{eK?.setItem(ec,String(e)),eK?.setItem(ed,String(r-eh))},[eK]),ez=(0,i.useCallback)(e=>{eK?.setItem(eu,JSON.stringify(e))},[eK]),[eY,e$]=(0,i.useState)(null),eq=(0,i.useCallback)(()=>{let e=eG.current;e&&e.setTransform(e=>{let r={...e,position:new N.Mi(ep,ep+em),width:window.innerWidth-2*ep,height:window.innerHeight-2*ep-em};return(0,s.deepEquals)(r,e)?(e$(null),eY):(e$(e),r)})},[eY]),eZ=(0,i.useCallback)(e=>{e.target===e.currentTarget&&eq()},[eq]),eX=(0,l.isNotNullish)(eE),eJ=(0,$.al)(),eQ=!(0,I.kc)().ds_gradient_variables,[e0,e1]=i.useState(""),e2=(0,i.useCallback)(e=>{e1((e??"").trim())},[]),e3=(0,h.A)(e2,200),e6=(0,i.useCallback)(()=>e2(""),[e2]),e8=(0,i.useCallback)(e=>""===e?e6():e3(e),[e6,e3]);return i.createElement(A.k,{name:"variables_modal"},i.createElement(W.vL,{handleKeyDown:eB,handleClipboard:eU,ref:eV,name:"variables-authoring-modal",focusOnMount:!0},i.createElement(X.vx,{allowAutoExpanding:!1,allowResizeHeight:!0,allowResizeWidth:!0,fullFrame:!0,initialConstraints:eH.initialConstraints,initialHeight:eH.initialHeight,initialPosition:eH.initialPosition,initialWidth:eH.initialWidth,maxHeight:eH.maxHeight,maxWidth:eH.maxWidth,minHeight:eH.minHeight,minWidth:eH.minWidth,onDragEnd:ez,onEdgeDoubleClick:eq,onResize:ej,ref:eG,contentContainerClassName:eo.yl,onClick:()=>{p.isShown&&r((0,P.B)()),H&&eN.toggleEditVariableModal(null),eV.current?.focus()},onKeyDown:eB,onClose:e,recordingKey:"variablesModal",title:i.createElement("div",{className:eo.DD,onDoubleClick:eZ},!eX&&i.createElement("div",{className:L.cx.ml8.fontSemiBold.font11.fontUi.$},(0,R.tx)("variables.authoring_modal.title")),eX&&i.createElement("div",{className:m()({[eo.Cz]:!0,[eo.ho]:eA})},(0,I.kc)().fpl_variables_button_migration?i.createElement(c.f,{recordingKey:S.Pt("variablesModal","toggleSidebar"),"aria-label":(0,R.t)("variables.authoring_modal.toggle_sidebar"),onIcon:i.createElement(O.U,{svg:el.A},i.createElement(d.C,null)),offIcon:i.createElement(O.U,{svg:el.A},i.createElement(u.O,null)),checked:eA,onChange:e=>eN.setIsSidebarOpen(e)}):i.createElement(K.K0,{recordingKey:S.Pt("variablesModal","toggleSidebar"),svg:el.A,"data-tooltip-type":G.Ib.TEXT,"data-tooltip":(0,R.t)("variables.authoring_modal.toggle_sidebar"),onClick:()=>eN.setIsSidebarOpen(e=>!e)})),(0,I.kc)().ds_variables_modal_qol&&i.createElement(C.IW,{focusOnMount:!1,query:e0,className:eo.ON,placeholder:(0,R.t)("variables.authoring_modal.filter"),clearSearch:e6,onChange:e8}),eJ&&i.createElement("div",{className:eo.ED},i.createElement(ee.G,null)),eQ&&i.createElement("div",{className:eo.aZ},i.createElement(Z.T,null)))},i.createElement(E.hh,null,i.createElement("div",{className:eo.kL,style:{"--propertiesPanelWidth":`${eW}px`},"data-testid":"variables-modal-container"},eA&&eE&&i.createElement(en.z,{groups:ev,onChangeVariableSet:eN.setCurrentVariableSetID,onContextMenu:eD,onCreateVariableSet:eN.createVariableSet,onCreateVariableSetExtension:eN.createVariableSetExtension,onDeleteVariableSet:eN.deleteVariableSet,onMoveSelectedGroupsToGroup:eN.moveSelectedGroupsToGroup,onMoveVariableToGroup:eN.moveVariableToGroup,onRenameGroup:eN.renameGroup,onRenameVariableSet:eN.renameVariableSet,onMoveGroups:eN.moveGroups,recordingKey:"variablesModal",selectedGroupNames:eI,selectedVariableIDs:eT,setSelectedGroupNames:eN.setSelectedGroupNames,variableSet:eE,isShowingGuids:n}),i.createElement("div",{className:eo.ok,onMouseDown:D.dG},ef&&i.createElement(J.P,null),0!==eS.length&&eE?i.createElement(A.k,{name:"variables_modal_table"},i.createElement(ei.f,{groups:ev,key:eI.join("-"),onCreateMode:eN.createMode,onDeleteMode:eN.deleteMode,onDuplicateMode:eN.duplicateMode,onMoveVariableToGroup:eN.moveVariableToGroup,onRenameGroup:eN.renameGroup,onRenameMode:eN.renameMode,onRenameVariable:eN.renameVariable,onReorderVariables:eN.reorderVariables,onSetModeAsDefault:eN.setModeAsDefault,onVariableContextMenu:eP,recordingKey:"variablesModal",renamingModeGUID:ey,renamingVariableID:eb,selectedGroupNames:eI,selectedVariableIDs:eT,setRenamingModeGUID:eN.setRenamingModeGUID,setRenamingVariableID:eN.setRenamingVariableID,setSelectedVariableIDs:eN.setSelectedVariableIDs,variableSet:eE,isShowingGuids:n,toggleEditVariableModal:eN.toggleEditVariableModal,setVariableValueForMode:eN.setVariableValueForMode,filterString:(0,I.kc)().ds_variables_modal_qol?e0:""}),eN.setRenamingVariableID&&i.createElement("div",{className:eo.qr},i.createElement(er.fr,{recordingKey:"variablesModal",groups:ev,selectedGroup:eI[0],setRenamingVariableID:eN.setRenamingVariableID,variableSetID:eE.node_id,selectedVariableIDs:eT,setSelectedVariableID:eN.setSelectedVariableIDs}))):i.createElement(ea.j,{recordingKey:"variablesModal",groups:ev,selectedGroup:eI[0],setRenamingVariableID:eN.setRenamingVariableID,setSelectedVariableID:eN.setSelectedVariableIDs,variableSetID:eE?.node_id}),(0,I.kc)().ds_variables_extended_sets&&eE&&(0,V.GI)(eE)?i.createElement("pre",{className:L.cx.maxH200.overflowAuto.$},JSON.stringify(ew,void 0,2)):null))),eC&&eR&&i.createElement(et.Q,{allVariables:eS,contextMenuData:eR,hasGroups:ev.length>1,hideContextMenu:eL,onCreateGroup:eN.createGroup,onUngroup:eN.ungroup,onDuplicateVariables:eN.duplicateVariables,onCopyVariables:eF?eN.copySelectedVariables:null,onPasteVariables:eF?ex:null,onDeleteEmptyGroup:v.lQ,onDeleteVariables:eN.deleteVariables,onSetAllVariablesSelected:v.lQ,toggleEditVariableModal:eN.toggleEditVariableModal,recordingKey:S.Pt("variablesModal","contextMenuDropdown")}),i.createElement(Y.Q8,null))))},"VariablesModal",H.ZU.YES)},933123:(e,r,n)=>{"use strict";n.d(r,{ay:()=>m,jv:()=>_,wp:()=>h});var i=n(411855),a=n(587670),o=n(597616),s=n(966712),l=n(939863),c=n(356390),d=n(112162),u=n(453261),p=n(15270);function m(){return(0,i.useCallback)((e,r,n,i="",s=a.HS4.VARIABLES_MODAL,d)=>{let u=(0,p.Wc)(r,n,i),m=(0,p.WI)(n),h=e??a.CWU.createVariableSet((0,l.t)("variables.authoring_modal.default_collection_name"),a.G6k.AUTOMATIC_FIRST_COLLECTION),_=a.CWU.createVariable(u,h,m,s);if(d){let[e,r]=d;a.CWU.insertVariableBetween(_,e,r)}return o.fn(_)?(c.Y5.triggerAction("commit"),_):null},[])}function h(){return(0,i.useCallback)((e,r="")=>{let n=function(e,r=""){let n=e.map(e=>e.name),i=(0,l.t)("variables.variable_collection_default_name");return(0,d.g)(r+i,n)}(e,r),i=a.CWU.createVariableSet(n,a.G6k.VARIABLES_MODAL);return c.Y5.triggerAction("commit"),i},[])}function _(){let e=(0,i.useCallback)((e,r,n="")=>{let i=function(e,r=""){let n=e.map(e=>e.name),i=(0,l.t)("variables.variable_collection_extension_default_name");return(0,d.g)(r+i,n)}(e,n),o=a.CWU.createVariableSetExtension(i,r);return c.Y5.triggerAction("commit"),o},[]),r=(0,u.z)("authoring").allowExtendedSets;return(0,s.kc)().ds_variables_extended_sets&&r?e:null}},554905:(e,r,n)=>{"use strict";n.d(r,{Td:()=>a,eC:()=>o,hS:()=>s});var i=n(188507);function a(){return(0,i.d4)(e=>o(e))}function o(e){return null!==e.openFile&&!e.openFile?.canEditCanvas}let s=(0,n(529928).bt)(e=>o(e))},832568:(e,r,n)=>{"use strict";n.d(r,{iG:()=>c,vt:()=>l});var i=n(188507),a=n(243987),o=n(984968),s=n(851363);function l(e){let r=(0,o.ol)(),n=(0,i.d4)(e=>!!r&&(0,a.oc)(r.id,e));return!(!r||e&&r.id!==e||!n||(0,a.w5)(r))&&r.student_team_state!==s.kU.STUDENT_TEAM_CURRENT&&r.student_team_state!==s.kU.STUDENT_TEAM_EXPIRED}function c(e){if(!e)return!1;let r=!!(0,a.XX)(e),n=e.studentTeamState===s.kU.STUDENT_TEAM_CURRENT||e.studentTeamState===s.kU.STUDENT_TEAM_EXPIRED;return r||n}},828702:(e,r,n)=>{"use strict";n.d(r,{t:()=>A});var i=n(411855),a=n(188507),o=n(201140),s=n(902634),l=n(915440),c=n(711525),d=n(768137),u=n(799569),p=n(762638),m=n(939863),h=n(278733),_=n(175290),g=n(662275),f=n(995852),E=n(101505),y=n(672517),b=n(279453),I=n(243987),T=n(237870),v=n(488578),S=n(508850);function w(e){let r=(0,a.wA)(),n=(0,l.Rs)(b.Aqu,{teamId:e.teamId});if("loaded"!==n.status||n.data.team?.stripeCustomerId.status!=="loaded")return null;let g=!!(0,c.oA)(n.data.team?.stripeCustomerId),y=[],T=(0,c.oA)(n.data.team?.allProjects),v=T?.length??0,w=T?.filter(e=>e.isViewOnly).length??0,A=T?.filter(e=>e.isInviteOnly).length??0,N=n.data.team?.teamFileCounts?.designFileCount??0,C=n.data.team?.teamFileCounts?.whiteboardFileCount??0,O=(e,r,n)=>{e>r&&y.push({limitExceededType:n,limitExceededCount:e-r})};if(O(N,I.WW,"design_file_count"),O(C,I.WW,"whiteboard_file_count"),O(v,I.Wf,"total_project_count"),v<=I.Wf&&(O(w,I.h,"view_only_project_count"),O(A,I.PX,"invite_only_project_count")),0===y.length)return null;let L=e.canEditTeam?(0,m.tx)("locked_team.card.title"):(0,m.tx)("locked_team.card.title_viewer"),R=e.canEditTeam?g?(0,m.tx)("locked_team.card.editor_previously_paid_description"):(0,m.tx)("locked_team.card.editor_previously_on_trial_description"):(0,m.tx)("locked_team.card.view_only_description"),P=e.canEditTeam?g?(0,m.tx)("locked_team.card.editor_previously_paid_cta"):(0,m.tx)("locked_team.card.editor_previously_on_trial_cta"):null,D=e=>{switch(e.limitExceededType){case"design_file_count":return(0,m.tx)("locked_team.card.move_figma_design_files",{numDesignFiles:e.limitExceededCount});case"whiteboard_file_count":return(0,m.tx)("locked_team.card.move_figjam_boards",{numFigjamFiles:e.limitExceededCount});case"total_project_count":return(0,m.tx)("locked_team.card.move_projects",{numProjects:e.limitExceededCount});case"view_only_project_count":return(0,m.tx)("locked_team.card.change_permissions_from_view_only",{numViewOnlyProjects:e.limitExceededCount});case"invite_only_project_count":return(0,m.tx)("locked_team.card.change_permissions_from_invite_only",{numInviteOnlyProjects:e.limitExceededCount});default:throw Error("Not a valid starter plan limit")}};return i.createElement(_.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:e.width,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},i.createElement("div",{className:p.cx.flex.justifyBetween.wFull.$},i.createElement("div",{className:p.cx.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},i.createElement(o.s,{className:S.K})),!!e.onClose&&i.createElement(u.Jn,{onClick:e.onClose})),i.createElement("div",{className:p.cx.font14.fontSemiBold.lh24.$},L),i.createElement("div",{className:p.cx.font13.lh24.$},R),e.canEditTeam&&i.createElement("div",{className:p.cx.wFull.bb1.bSolid.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"list"},y.map(e=>i.createElement("div",{key:e.limitExceededType,className:p.cx.flex.itemsCenter.gap10.wFull.bt1.bSolid.pb12.pt12.fontMedium.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"listitem"},i.createElement(s.U,{className:p.cx.minW24.$}),i.createElement("div",{className:p.cx.font11.lh16.$},D(e))))),!!P&&i.createElement("div",{className:p.cx.flex.justifyEnd.wFull.$},i.createElement(d.vd,{onClick:()=>r(f.WX({teamId:e.teamId})),className:p.cx.if(e.fullWidthButton,p.cx.maxWFull.wFull).hAuto.lh16.preWrap.pt8.pb8.$,trackingProperties:{teamId:e.teamId,trackingDescriptor:g?E.c.UPGRADE_TO_PROFESSIONAL:E.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN}},P)))}let A=(0,T.Ju)(function(e){let r=(0,a.wA)();return i.createElement(v.aF,{size:500},i.createElement(y.fu,{name:"Locked State Team Overview Modal",properties:{teamId:e.teamId}},i.createElement(w,{...e,width:452,onClose:()=>r(g.Lo()),noPaddingOrBorder:!0})))},"LockedStateOverviewModal")},984226:(e,r,n)=>{"use strict";n(411855),n(96328),n(574176),n(939863),n(547733),n(466636),n(555328),n(498606)},774620:(e,r,n)=>{"use strict";n.d(r,{K:()=>b});var i=n(411855),a=n(188507),o=n(563706),s=n(768137),l=n(799569),c=n(939863),d=n(175290),u=n(809840),p=n(970516),m=n(662275),h=n(4564),_=n(498606),g=n(237870),f=n(227795),E=n(488578),y=n(552899);let b=(0,g.Ju)(function(e){let{localPlugin:r}=e,n=(0,a.wA)(),{error:g}=r;if(!g)return null;let b=(0,h.M)(),I=!!b?.isCompatibleWith({desktopVersion:80}),T=o.Ay.mac?(0,c.tx)("universal_insert.show_in_finder"):(0,c.tx)("universal_insert.show_in_explorer");return i.createElement(E.aF,{size:"small",title:(0,c.t)("universal_insert.manifest_error_title")},i.createElement(l.s_,{dispatch:n}),i.createElement(d.Y,{direction:"vertical",spacing:16},i.createElement(d.Y,{direction:"horizontal",horizontalAlignItems:"space-between",width:"fill-parent",verticalAlignItems:"start",spacing:8},i.createElement(d.Y,{backgroundColor:"secondary",padding:4,width:"fill-parent",cornerRadius:3},i.createElement(u.E,{color:"secondary",fontSize:13,fontFamily:"monospace"},g.text)),i.createElement(f.K0,{svg:y.A,onClick:()=>{n(p.lW({stringToCopy:g.text}))},"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,c.t)("inspect_panel.copy")})),i.createElement(d.Y,{width:"fill-parent",horizontalAlignItems:"end"},i.createElement(s.nR,{onClick:()=>n(m.Lo())},(0,c.tx)("universal_insert.cancel")),i.createElement(s.$$,{onClick:()=>{I?b.openExtensionManifest(r.localFileId):b.openExtensionDirectory(r.localFileId)}},I?(0,c.tx)("universal_insert.edit_manifest"):T))))},"DevelopmentResourceErrorModal")},33876:(e,r,n)=>{"use strict";n.d(r,{A:()=>m});var i=n(411855),a=n(188507),o=n(395771),s=n(762638),l=n(939863),c=n(809840),d=n(71425),u=n(884484),p=n(17076);function m({localResource:e,publishedResource:r}){let{error:n,localFilePath:a}=e||{},s=(0,u.Pt)(n?.type,e);if(!e&&r)return i.createElement(_,{resource:r});if(!e||null==a)return null;if(!n)return i.createElement(o.R,{className:p.cV,text:a.replace("/manifest.json","")});if(!s)return null;let{action:l,msg:d,buttonText:m}=s;return i.createElement(i.Fragment,null,i.createElement(c.E,{color:"danger"},d),i.createElement(h,{onClick:l,isError:!0},m))}function h({children:e,onClick:r,isError:n}){return i.createElement("button",{onClick:e=>{e.stopPropagation(),r()},className:s.cx.underline.bgTransparent.with({colorTextDanger:n,colorTextSecondary:!n}).$},e)}function _({resource:e}){let r=(0,a.wA)();return i.createElement("div",{className:p.cV},i.createElement(h,{onClick:()=>{r((0,d.JZ)({resourceType:e.is_widget?"widget":"plugin"}))}},i.createElement(c.E,null,(0,l.tx)("universal_insert.locate_local_version_text"))))}},927206:(e,r,n)=>{"use strict";n.d(r,{ur:()=>m,xY:()=>h});var i=n(411855),a=n(188507);n(629019),n(946689);var o=n(574176),s=n(939863),l=n(376441),c=n(498606),d=n(194490),u=n(471174),p=(e=>(e.AUTO="auto",e.CONSTRAINED="constrained",e))(p||{});function m(){let e=(0,a.wA)(),r=i.useCallback(r=>{r.stopPropagation(),e(l.v({}))},[e]);return i.createElement("button",{className:d.qS,onClick:r},(0,s.tx)("community.buyer.update_payment"))}function h(){return i.createElement("div",{className:d.QW,"data-tooltip-type":c.Ib.TEXT,"data-tooltip":(0,s.t)("community.buyer.update_payment_info_to_retain_access")},i.createElement(o.B,{svg:u.A}))}},103567:(e,r,n)=>{"use strict";n.d(r,{PE:()=>g});var i=n(411855),a=n(188507),o=n(768137),s=n(946689),l=n(939863),c=n(175290),d=n(809840),u=n(225266),p=n(215822);function m(e){return{...e.is_widget?{widget_id:e.id}:{plugin_id:e.id},src:u.Nn.INVITE_TILE}}function h({resource:e}){let r=function(e){let r=(0,a.wA)(),n=m(e);return()=>r((0,u.dx)(n))}(e),n=function(e){let r=(0,a.wA)(),n=m(e);return()=>r((0,u.MZ)(n))}(e);return i.createElement(c.Y,null,i.createElement(o.nR,{onClick:e=>{e.stopPropagation(),n()}},(0,l.tx)("community.detail_view.decline")),i.createElement(s.$$,{onClick:e=>{e.stopPropagation(),r()}},(0,l.tx)("community.detail_view.accept")))}function _({resource:e}){let r=(0,p.uF)(e),n=e.creator,a=e.is_widget?"widget":"plugin",o=`/community/${a}/${e.id}`;return i.createElement(d.E,null,(0,l.tx)("universal_insert.invited_you_to_publish",{ownerName:i.createElement(d.E,{fontWeight:"medium"},n.handle),resourceName:i.createElement(s.CY,{href:o,onClick:e=>{e.stopPropagation()},target:"_blank",trusted:!0},i.createElement(d.E,{fontWeight:"medium"},r.name))}))}function g({resource:e}){return i.createElement(c.Y,{direction:"vertical"},i.createElement(_,{resource:e}),i.createElement(h,{resource:e}))}},389211:(e,r,n)=>{"use strict";n.d(r,{I5:()=>a,ol:()=>c,qY:()=>l,xb:()=>o,xf:()=>s});var i=n(411855);function a(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M12 15L6 20L12 25",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("path",{d:"M28 15L34 20L28 25",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("rect",{x:"22.2002",y:"10",width:"2",height:"20",transform:"rotate(18 22.2002 10)",fill:"black",fillOpacity:"0.9"}))}function o(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 8H15V6H25V8ZM31 22C31 28.0751 26.0751 33 20 33C13.9249 33 9 28.0751 9 22C9 15.9249 13.9249 11 20 11C26.0751 11 31 15.9249 31 22ZM33 22C33 29.1797 27.1797 35 20 35C12.8203 35 7 29.1797 7 22C7 14.8203 12.8203 9 20 9C23.0804 9 25.9105 10.0714 28.1382 11.8618L31 9L34.5355 12.5355L31.3731 15.698C32.4097 17.5647 33 19.7134 33 22ZM21 22V14H19V22C19 22.5523 19.4477 23 20 23C20.5523 23 21 22.5523 21 22Z",fill:"black",fillOpacity:"0.9"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function s(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C6 7.79086 7.79086 6 10 6H30C32.2091 6 34 7.79086 34 10V21.1632V30C34 32.2091 32.2091 34 30 34H14.3864H10C7.79086 34 6 32.2091 6 30V10ZM10 8C8.89543 8 8 8.89543 8 10V23.1195L13.7151 15.8804L14.4948 14.8927L15.2809 15.8753L20.7081 22.6594L25.9453 19.1679L26.6001 18.7314L27.1783 19.2652L32 23.716V21.1632V10C32 8.89543 31.1046 8 30 8H10ZM8 30V26.3472L14.5052 18.1073L19.7191 24.6247L20.2919 25.3406L21.0547 24.8321L26.3999 21.2686L32 26.4378V30C32 31.1046 31.1046 32 30 32H14.3864H10C8.89543 32 8 31.1046 8 30ZM24 17C25.6569 17 27 15.6569 27 14C27 12.3431 25.6569 11 24 11C22.3431 11 21 12.3431 21 14C21 15.6569 22.3431 17 24 17Z",fill:"black",fillOpacity:"0.9"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function l(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6C7.79086 6 6 7.79086 6 10V30C6 32.2091 7.79086 34 10 34H14.3864H30C32.2091 34 34 32.2091 34 30V21.1632V10C34 7.79086 32.2091 6 30 6H10ZM8 10C8 8.89543 8.89543 8 10 8H30C31.1046 8 32 8.89543 32 10V14H8V10ZM8 16V30C8 31.1046 8.89543 32 10 32H14.3864H30C31.1046 32 32 31.1046 32 30V21.1632V16H8ZM13 11C13 12.1046 12.1046 13 11 13C9.89543 13 9 12.1046 9 11C9 9.89543 9.89543 9 11 9C12.1046 9 13 9.89543 13 11ZM17 19.9207V27.0793C17 27.4911 17.4435 27.7505 17.8024 27.5486L24.1657 23.9693C24.5316 23.7635 24.5316 23.2365 24.1657 23.0307L17.8024 19.4514C17.4435 19.2495 17 19.5088 17 19.9207Z",fill:"black",fillOpacity:"0.9"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function c(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("rect",{x:"5",y:"17",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),i.createElement("rect",{x:"24",y:"9",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),i.createElement("rect",{x:"24",y:"25",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),i.createElement("path",{d:"M15 20H15.5C17.7091 20 19.5 18.2091 19.5 16V16C19.5 13.7909 21.2909 12 23.5 12H24",stroke:"black",strokeWidth:"2"}),i.createElement("path",{d:"M15 20H15.5C17.7091 20 19.5 21.7909 19.5 24V24C19.5 26.2091 21.2909 28 23.5 28H24",stroke:"black",strokeWidth:"2"}))}},491815:(e,r,n)=>{"use strict";n.d(r,{mk:()=>d,wR:()=>c});var i=n(411855);n(188507),n(752795);var a=n(91408);n(794272);var o=n(572206);n(939863),n(466636),n(271245),n(395281),n(756085),n(875847),n(694687),n(860178),n(336599),n(106112),n(401730),n(376485),n(231472),n(811529),n(705129);var s=n(860168);let l=(0,a.hG)(s.tui),c=((0,a.hG)(s.fWT),(0,a.hG)(s.nnJ),(0,a.hG)(s.i_6));function d(e,r){let n=(0,i.useRef)(null),a=(0,i.useRef)(!1);return r.every(e=>!!e)&&!a.current&&(n.current=e,a.current=!0),null!==n.current?n.current:e}(0,a.hG)(s.Yr1),(0,a.hG)(s.Eg1),(0,a.hG)(s.yUQ),(0,a.hG)(s.BuT),new o.Mi(c,c+l),i.createContext(null)},157004:(e,r,n)=>{"use strict";n(411855),n(629019),n(563706),n(153234),n(522739),n(574176),n(762638),n(939863),n(498606)},379928:(e,r,n)=>{"use strict";n.d(r,{I:()=>S});var i=n(411855),a=n(109388),o=n(188507),s=n(587670),l=n(629019),c=n.n(l),d=n(522739),u=n(572206),p=n(986270),m=n(356390),h=n(312167),_=n(860178),g=n(809073),f=n(498606),E=n(80332),y=n(634951),b=n(16774),I=n(936986),T=n(732519);function v({children:e,mini:r,user:n}){return r?i.createElement("div",{className:c()(T.HG,T.ET)},e):i.createElement("div",{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:c()(T.HG)},e)}function S({user:e,hideName:r,mini:n,searchQuery:a,triggeredFrom:l}){let c=e.hi_res_img_url||e.img_url,d=`${c}?c=1`,f=(0,E.$L)(e.id,E.us),I=(0,y.LL)(d,e.name||e.handle||"",f),S=(0,_.TA)(),O=(0,b.b)(),L=(0,o.wA)(),R=i.useCallback(()=>{L(p.F9({currentUserId:S??void 0,storeInRecentsKey:g.$A.FigJam,item:{id:e.id,user:e,type:g.vt.FaceStamp}}))},[S,L,e]),{dragState:P,onInsertableResourcePointerDown:D}=(0,h.Z)({icon:i.createElement("img",{src:I,className:T.iE,alt:`profile stamp for ${e.name}`}),insertAction:r=>{let{dropPosition:n,isClick:i,type:a}=r;if(i||"click"===a){let r=m.Y5.getViewportInfo();(0,y.xG)(I,r.offsetX,r.offsetY,e.id,"click",s.zkO.USER),R()}else{let i=r.pointerPercentageOffset?r.pointerPercentageOffset.x:0,a=r.pointerPercentageOffset?r.pointerPercentageOffset.y:0,o=new u.Mi(50,50),l=n.subtract(new u.Mi(i*o.x,a*o.y)).subtract(new u.Mi(5,5));(0,y.xG)(I,l.x,l.y,e.id,"drag",s.zkO.USER),R()}},clickToInsert:!n,afterSuccessfulInsert:O,resource:{id:e.id,name:e.name||"",img:I},triggeredFrom:l,searchQuery:a,mini:n});return n&&!I?null:i.createElement(v,{mini:n,user:e},I?i.createElement(i.Fragment,null,i.createElement(N,{stampImageUrl:I,username:e.name||"",onPointerDown:D,dragging:null!==P,mini:n}),i.createElement(C,{dragState:P,imageUrl:I}),!r&&i.createElement(A,{username:e.name||e.handle||""})):i.createElement(i.Fragment,null,i.createElement(w,{mini:n}),!r&&i.createElement(A,{username:""})))}function w({mini:e}={}){return i.createElement("div",{className:c()(T.HG,{[T.ET]:e,[T.M4]:!e})},i.createElement("div",{className:c()(T.eP,T.iE)}),!e&&i.createElement("div",{className:c()(T.t$,T.OP)}))}function A({username:e}){return i.createElement("div",{title:e,className:T.OP},e)}function N(e){return i.createElement(d.GG,{recordingKey:"facestamp",dataTestId:`facestamp-${e.username}${e.mini?"-mini":""}`,onPointerDown:e.onPointerDown},i.createElement("img",{draggable:!1,src:e.stampImageUrl,className:c()(T.iE,{[T.Jy]:e.dragging,[T.dG]:e.mini}),alt:`profile stamp for ${e.username}`}))}function C(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=m.Y5.getViewportInfo();return new u.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new u.Mi(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,a.createPortal)(i.createElement("img",{alt:"",className:c()(I.$J,{[I.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},465448:(e,r,n)=>{"use strict";n.d(r,{qK:()=>l});var i=n(411855),a=n(188507),o=n(720289),s=n(707465);function l(){let e=(0,a.d4)(e=>e.recentlyUsed.faceStamps),r=function(){let e=!!(0,a.d4)(e=>e.openFile?.org),r=(0,a.d4)(e=>(0,s.zg)(e.selectedView)&&!e.user);return!!(e&&!r)}(),n=(0,o.o)();return i.useMemo(()=>n&&r?e.figjam.map(e=>e.user):[],[n,e,r])}n(809073)},391926:(e,r,n)=>{"use strict";n(411855),n(522739)},416333:(e,r,n)=>{"use strict";n.d(r,{qX:()=>I});var i=n(411855),a=n(188507),o=n(587670),s=n(86625);n(153234);var l=n(939863);n(738274);var c=n(662275);n(986270),n(737499);var d=n(109388);n(629019),n(936986),n(596256),n(964937),n(809831),n(894571),n(57150),n(867795),n(161405),n(831236),n(288300),n(809073);var u=n(389211);n(491815),n(391926),n(16774);var p=n(501972),m=n(813648),h=n(237870),_=n(746806),g=n(620597),f=n(984064);let E="delightful-toolbar-media-button",y="InsertMediaModal";(0,h.Ju)(function(){let e=(0,a.wA)(),r=(0,a.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=i.useRef(null),s=r?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:E},{initialModalPosition:u,modalPosition:h,setModalPosition:b}=(0,m.ts)(s,157,320),I=i.useCallback(()=>{o.glU.triggerAction("set-tool-default",null),e(c.ES({type:y}))},[e]),T=i.useCallback(e=>{b(e)},[b]),v=!h||!!u?.equals(h);return(i.useEffect(()=>{let e=e=>{let r=d.findDOMNode(n.current?.getEl()),i=(0,p.Tc)(E);if(!r||!i)return;let a=r.contains(e.target),o=i.contains(e.target);!v||a||o||I()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[I,v]),u)?i.createElement(_.vx,{ref:n,initialPosition:u,initialWidth:320,title:(0,l.t)("whiteboard.embeds.insert_embed_modal.title"),onClose:I,onDragStart:()=>o.glU.triggerActionInUserEditScope("set-tool-default",null),onDragEnd:T,dragHeaderOnly:!0,arrowRelativeX:r?void 0:160,arrowPosition:_.F_.BOTTOM,smallArrow:!0,containerClassName:f.jT,headerClassName:f.N1,isFigJam:!0},i.createElement("div",{className:f.hQ,"data-testid":"insert-media-modal"},i.createElement(g.q,{onSuccess:I}))):null},y);var b=n(511080);function I(e){let r=function(e){switch(e){case"Table":return o.NLJ.TABLE;case"CodeBlock":return o.NLJ.CODE_BLOCK;case"MindMap":return o.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return o.NLJ.TYPE;case"Section":return o.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e);return e=>{let{dropPosition:n,isClick:i}=e;i?s.l7.user("click-insert-tool",()=>o.glU.createNodeAtViewportCenterFromTool(r)):s.l7.user("drag-insert-tool",()=>o.glU.createNodeFromTool(r,n.x,n.y))}}n(972283),n(487392),b.PW(),b.Ch(),b.oV(),b.aO(),u.I5(),u.xb(),u.xf(),u.qY(),u.ol(),b.Rz()},583718:(e,r,n)=>{"use strict";n.d(r,{QK:()=>m,zX:()=>p});var i=n(411855),a=n(188507),o=n(915440),s=n(756085),l=n(269167),c=n(813648),d=n(279453),u=n(555328);function p({extensionId:e}){let r=(0,a.d4)(e=>e.currentUserOrgId),n=(0,o.Rs)(d.BB3,{orgId:r});return i.useMemo(()=>n.data?.currentUser?.installedPlugins.find(r=>r.pluginId===e)?.id,[n.data?.currentUser?.installedPlugins,e])}function m(e,r){let n=(0,s.Be)(),i=r===u.vt.PLUGIN?n.plugins[e]:n.widgets[e],o=(0,l.xp)(e),d=(0,l.aQ)(e),m=(0,a.d4)(r=>r.publishedPlugins[e]?o:d),h=p({extensionId:e}),{unsave:_,save:g}=(0,c._i)(e,r,m,h);return{unsave:_,save:g,isSavedForUser:!!(i&&"user"===i.installed_by),isSavedForOrg:!!(i&&"org"===i.installed_by),version:i}}},16774:(e,r,n)=>{"use strict";n.d(r,{b:()=>l});var i=n(188507),a=n(801161),o=n(813648),s=n(231472);function l(e){let r=(0,i.d4)(e=>e.universalInsertModal),n=(0,o.LR)(),l=(0,i.wA)();return()=>{r.pinned===s.t.NOT_PINNED&&(n(),e?.hideTooltips&&l(a.jD()))}}},148009:(e,r,n)=>{"use strict";n(188507),n(226055),n(231472)},172226:(e,r,n)=>{"use strict";var i=n(411855);n(188507),n(629019),n(966712),n(812115),n(268537),n(210954),n(493323),n(827586),n(574176);var a=n(939863),o=n(71425);n(941381);var s=n(662275);n(672517),n(756085),n(269167),n(170786),n(813648),n(318812),n(737499),n(336599),n(215822),n(288300),n(555328);var l=n(237870);n(96557),n(720488),n(984226),n(927206),n(491815),n(16774);var c=n(488578);n(687348),(0,l.Ju)(function({dispatch:e}){return i.createElement(c.Rw,{confirmationTitle:(0,a.t)("whiteboard.inserts.widget_development_error_modal_title"),content:(0,a.t)("whiteboard.inserts.widget_development_error_modal_description"),onConfirm:()=>{e((0,o.JZ)({resourceType:"widget"})),e(s.Lo())},confirmText:(0,a.t)("whiteboard.inserts.widget_development_import_manifest"),size:"small",disableClickOutsideToHide:!0,hideOnConfirm:!1,cancelText:(0,a.t)("whiteboard.inserts.widget_development_error_modal_close"),hideCancel:!1,popStack:!0})},"FigjamPublishedDevelopmentWidgetErrorModal",l.ZU.YES)},632788:(e,r,n)=>{"use strict";n.d(r,{EJ:()=>v,T9:()=>S,_n:()=>T,lD:()=>w,ms:()=>A});var i=n(411855),a=n(188507);n(517333),n(268537);var o=n(939863),s=n(71425);n(970516),n(662275);var l=n(884484),c=n(756085);n(170786);var d=n(813648),u=n(318812),p=n(694687),m=n(215822);n(555328);var h=n(376485),_=n(18993),g=n(400466);n(96557),n(350913);var f=n(507956),E=n(206074),y=n(720488);function b({pluginId:e,preferences:r}){let{pinnedPlugins:n,pinPlugin:i,unpinPlugin:a}=r;return n.find(r=>r.plugin_id===e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.unpin"),callback:()=>{a(e)}}:{displayText:(0,o.t)("dev_handoff.inspect_panel.pin"),callback:()=>{i(e)}}}function I({plugin:e}){let{callback:r,isPluginSetToAutoRun:n}=(0,_.bE)(e??null);return(0,_.aY)(e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.auto_run"),callback:r,isChecked:n}:null}n(172226);let T="DROPDOWN_TYPE_SAVED_AND_RECENT_ACTIONS_DROPDOWN";function v(e){let r=(0,u.Um)(),n=(0,g.VR)(),a=(0,f.ks)(),s=(0,p.sZ)(),l=(0,c.ll)(),d=I({plugin:e.plugin}),h=[];return(h.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),a&&((0,m.Th)(e.plugin,s,l)&&n.loaded&&h.push(b({pluginId:e.plugin.plugin_id,preferences:n})),d&&h.push(d)),r)?a?i.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h,autoHeight:!0}):i.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h}):null}function S(e){if(!e.localResource&&!e.publishedResource)throw Error("Either localResource or publishedResource is required");let r=(0,f.ks)(),n=(0,a.wA)(),p=(0,u.Um)(),_=Object.values((0,c.$1)()).find(r=>r.plugin_id===e.publishedResource?.id),E=(0,g.VR)(),y=I({plugin:e.publishedResource?(0,m.uF)(e.publishedResource):null}),T=e.localResource||_,v=(0,c.B7)(T?T.plugin_id:e.publishedResource.id),S=(0,c.Ud)(T?T.plugin_id:e.publishedResource.id),w=e.publishedResource||v||S,N=!!w?.versions[w.current_plugin_version_id],C=w?w.is_widget:T?.manifest.containsWidget,O=(0,d.LR)(),L=(0,l.NV)(T,w),R=(0,l.OX)(w),P=(0,l.x2)(T,w,O),D=(0,l.qu)(T),k=(0,l.qi)(N,()=>{T&&n(s.qR(T?.localFileId))});if(!p||!p.data.targetRect)return null;let M=[];(T&&!T.error||w)&&M.push(L),N&&e.viewResource&&M.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),N&&M.push(P),T&&T.error?.type!==h.ho.LOAD&&M.push(D),T||M.push({displayText:(0,o.t)("universal_insert.locate_local_version"),callback:()=>{(0,s.JZ)({resourceType:C?"widget":"plugin"})}});let F=[];w&&N&&E.loaded&&r&&F.push(b({pluginId:w.id,preferences:E})),N&&y&&F.push(y);let x=[];T&&x.push(k),R&&x.push(R);let U=M.some(Boolean)&&(x.some(Boolean)||F.some(Boolean))&&{displayText:"",separator:!0},B=x.some(Boolean)&&F.some(Boolean)&&{displayText:"",separator:!0};return i.createElement(A,{parentRect:p.data.targetRect,lean:"left",minWidth:y?220:120,rootAndSubmenuMaxWidth:y?void 0:190,disableDropdownScrollContainer:!0,hidePointWhenContentOffScreen:!0,dataTestId:"developmentResourceOptionDropdown",items:[...M,U,...F,B,...x].filter(e=>!!e)})}let w="DROPDOWN_TYPE_DEVELOPMENT_RESOURCE_OPTIONS_DROPDOWN";function A(e){let r=(0,a.wA)();return i.createElement(E.j,{...e,dispatch:r,showPoint:!0,type:y.it.DEFAULT,onSelectItem:e=>{e.callback&&e.callback("",null,r)}})}},760445:(e,r,n)=>{"use strict";n.d(r,{B6:()=>m,Kr:()=>c,Nh:()=>h,Zm:()=>p,kB:()=>_});var i=n(411855);n(188507),n(752795);var a=n(91408);n(96328),n(572206),n(799569),n(762638);var o=n(939863);n(870505),n(779709),n(457630),n(231472),n(457689),n(507956),n(157004),n(148009),n(56714);var s=n(860168);n(179494),(0,a.hG)(s.rDe);let l=(0,a.hG)(s.SKA);(0,a.hG)(s.rZj);let c=44;(0,a.hG)(s.wgS);let d=(0,a.hG)(s.iah),u=(0,a.hG)(s.LdP);(0,a.hG)(s.paq);let p=6,m=2;function h(e){if(!e)return{x:d,y:d};let r=document.querySelector("#toolbelt-action-component-insert");if(r){let e=r.getBoundingClientRect(),n=e?e?.top-l-6:u;return{x:e?.x||284,y:n}}{let e=document.querySelector("#toolbar-action-component-insert")?.getBoundingClientRect();return{x:e?.x||284,y:e?.bottom||u}}}function _(e){if(!e.community_publishers?.accepted||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,o.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,o.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,o.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}i.createContext(null)},76158:(e,r,n)=>{"use strict";n.d(r,{s:()=>i});var i=(e=>(e.COMPONENT="component",e.PLUGIN="plugin",e.WIDGET="widget",e))(i||{}),a=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(a||{})},76154:(e,r,n)=>{"use strict";n.d(r,{dr:()=>e_,yG:()=>eg});var i=n(411855),a=n(188507),o=n(752795);n(86625);var s=n(629019),l=n.n(s);n(517333),n(563042);var c=n(946689),d=n(723325),u=n(574176),p=n(348425),m=n(762638),h=n(939863),_=n(278733),g=n(175290),f=n(365292),E=n(408552),y=n(251288),b=n(760835),I=n(466636);n(545941);var T=n(738269),v=n(931828),S=n(672517),w=n(802915),A=n(780700),N=n(756085),C=n(988022),O=n(269167),L=n(641638);n(170786);var R=n(318812),P=n(694687),D=n(99506),k=n(215822),M=n(555328);n(376485);var F=n(498606),x=n(18993),U=n(978527),B=n(464628),V=n(399932);n(933464);var G=n(788541),H=n(507956),W=n(206074),K=n(227795);n(33876);var j=n(927206);n(103567);var z=n(552993);n(172226);var Y=n(632788),$=n(760445);n(76158);var q=n(179494),Z=n(292164),X=n(362679),J=n(13556),Q=n(237494),ee=(e=>(e.COMMUNITY="community",e.RECENT="recent",e.DEVELOPMENT="development",e.DEVELOPMENT_MISSING_LOCAL="development_missing_local",e.ORG_PRIVATE="org_private",e.SAVED="saved",e.INVITED="invited",e))(ee||{});function et(e){let r=(0,a.d4)(e=>e.orgById);if(e.resource.is_private){let n=e.resource?.org_id&&r[e.resource.org_id]?.name;return i.createElement(u.B,{svg:Q.A,className:q.kQ,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":n?(0,h.t)("community.plugins.private_for_plugin_org_name",{orgName:n}):(0,h.t)("community.plugins.private_for_plugin_org")})}return i.createElement(i.Fragment,null)}let er=i.createContext(null);function en(){return(0,o.requireNotNullish)(i.useContext(er),"Must be wrapped within <FdBrowseWidgetTileContext.Provider>")}let ei=i.createContext(null);function ea(){return(0,o.requireNotNullish)(i.useContext(ei),"Must be wrapped within <FdBrowsePluginTileContext.Provider>")}function eo(e,r,n){let a=i.useRef(null),o=i.useCallback(()=>{a.current&&a.current.click()},[a]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationItem:c}=(0,d.M3)({path:r||[0],fauxClick:o,id:e}),u=n&&r&&r.length>=2&&r[0]===$.B6&&0===r[1];return i.useEffect(()=>{u&&c?.fauxFocus()},[u,c]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationButtonRef:a}}i.memo(function(e){let r=(0,N.Be)(),n=r.plugins[e.pluginId]||r.orgPlugins[e.pluginId],a=(0,N.b4)()[e.pluginId],o=(0,N.cW)()[e.pluginId],s=i.useMemo(()=>"recent"===e.type?a:"org_private"===e.type?(0,k.uF)(o):n,[n,e.type,o,a]),l=(0,R.Um)(),c=l?.type===Y._n&&l.data.pluginId===e.pluginId&&l.data.targetRect&&l.data.viewType===e.type,d=eg(e.pluginId,e.type);return i.createElement(es,{pluginId:e.pluginId,type:e.type,dropdownIsShown:c,runOptionsDropdownIsShown:d,version:s})});let es=i.memo(function(e){let{dropdownIsShown:r,version:n}=e,o=(0,a.wA)(),{viewPluginDetails:s}=ea(),l=i.useCallback(n=>{n.stopPropagation(),r?o(T.oB()):o(T.j7({type:Y._n,data:{pluginId:e.pluginId,targetRect:n.currentTarget.getBoundingClientRect(),viewType:e.type}}))},[r,o,e.pluginId,e.type]),c=(0,A.dR)(e.pluginId,"universal-insert"),d=(0,A.Gt)(e.pluginId,"universal-insert"),u=(0,w.t)(e.pluginId,d,c),p=u.length>0,m=e.runOptionsDropdownIsShown&&p,h=i.useRef(null),{validatePublishedPluginInOrgAllowlist:_,isPluginBlockedByAllowlist:g}=(0,N.j1)(e.pluginId),f=(0,A.RK)(e.pluginId),E=i.useCallback(r=>{if(r?.stopPropagation(),_()){if(p){m?o(T.oB()):o(e_({pluginId:e.pluginId,tileType:e.type}));return}f?d():c(),o(v.b({seen_published_plugin_onboarding_modal:!0})),o(v.b({seen_development_plugin_onboarding_modal:!0}))}},[_,p,f,o,m,e.pluginId,e.type,d,c]),y=h.current?.getBoundingClientRect();if(!n)return null;let b=!!(m&&y)||r,I=i.createElement(z._W,{resourceId:e.pluginId,resourceType:M.vt.PLUGIN,parentView:z.nN.TILE,isFauxFocused:b});return i.createElement("div",null,i.createElement(ec,{pluginVersion:n,pluginId:e.pluginId,onOptionsClick:l,optionsButtonIsActive:r,onClick:E,showOnClickDropdownChevron:p,secondaryIcon:i.createElement(et,{resource:n}),primaryCTAButton:I,isFauxFocused:b,visuallyDisabled:g}),i.createElement("div",{ref:h}),m&&y&&i.createElement(W.j,{showPoint:!1,lean:"center",items:u,onSelectItem:e=>{e.callback&&e.callback("",null,o)},parentRect:y,dispatch:o}),r&&i.createElement(Y.EJ,{viewResource:s,plugin:n}))});function el({pluginId:e,name:r,icon:n,iconUrl:a}){let[o,s]=i.useState(!!n);return i.createElement("div",{className:l()(o?q.lP:q.vt)},n||i.createElement(U.V,{plugin:{name:r,plugin_id:e,redirect_icon_url:a??""},loading:"lazy",alt:`${r} icon`,onLoad:()=>s(!0)}))}function ec(e){let r;let n=e.pluginVersion?.name??e.localPlugin?.name??"",a=e.pluginVersion?.redirect_icon_url,{isPluginSetToAutoRun:o}=(0,x.bE)(e.pluginVersion??null),s=e.localPlugin?e.localPlugin.manifest.editorType:e.pluginVersion?.manifest.editorType,c=!e.subheader,{viewPluginDetails:d,keyboardNavigationPath:b,shouldFocusFirstItem:I}=ea(),{setKeyboardNavigationElement:T,isFauxFocused:v,keyboardNavigationButtonRef:w}=eo(`plugin_${n}`,b,!!I),A=(0,S.j6)(),R=(0,O.ul)(e.pluginId),D=Object.values((0,N.$1)()).find(r=>String(r.plugin_id)===e.pluginId),M=(0,k.uF)(R),U=(0,k.pk)(M),B=(0,O.EO)(R)&&!D,V=(0,O.OY)(R),W=(0,O.gn)(R)&&!D,z=(0,P.sZ)(),Y=(0,N.ll)(),$=!D&&(0,L.BF)({org:z,extensionVersion:M??e.pluginVersion,isWidget:!1,allowlistedExtensions:Y}),Q=e.isCommunityPreview&&!$&&!e.isDevModeWizard,ee=B&&!V?i.createElement(ef,{plugin:R,hideFreeTrialBadge:!0}):W?i.createElement(j.ur,null):Q?i.createElement(em,{pluginId:e.pluginId,buttonRef:w}):void 0,et=(0,E.QP)({resource:R,height:"16",validBadges:[E.op.FREEMUM,E.op.OFF_PLATFORM,E.op.PURCHASED]}),er=e.metadataOverrideNode??i.createElement(i.Fragment,null,i.createElement("div",{className:q.FV},i.createElement(g.Y,{spacing:4},i.createElement("div",{className:l()(q.B6,{[m.cx.colorTextDisabled.$]:e.visuallyDisabled})},n),o&&i.createElement(f.Ex,{height:"16"},(0,h.t)("universal_insert.auto_run")),e.inReview&&i.createElement(y.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,et&&!W&&i.createElement("div",{className:q.UK},et),e.publishingStatusIcon&&i.createElement("div",{className:m.cx.colorIcon.$},i.createElement(p.t,{svg:e.publishingStatusIcon})),e.showOnClickDropdownChevron&&i.createElement(u.B,{svg:Z.A,className:q.o2})),e.subheader&&i.createElement("div",{className:q.ZK},e.subheader)),ee&&i.createElement("div",{className:q.D1},ee),e.onOptionsClick&&i.createElement(K.K0,{svg:X.A,fallbackSvg:J.A,className:e.optionsButtonIsActive?q.F$:q.D1,onClick:e.onOptionsClick,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,h.t)("universal_insert.more_options")}),e.primaryCTAButton&&i.createElement("div",{style:_.sx.add({alignSelf:"center"}).$},e.primaryCTAButton)),en=function(e,r){if((0,H.ks)());else if(e&&r)return!0;return!1}(e.showEditorTypeIcon,s),ei=(0,H.ks)();r=en?i.createElement(G.li.IconAndBadgeContainer,null,i.createElement(el,{pluginId:e.pluginId,name:n,iconUrl:a,icon:e.icon}),i.createElement(G.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},i.createElement(G.dn,{editorType:s,is16x16:!0}))):ei&&U?i.createElement(G.li.IconAndBadgeContainer,null,i.createElement(el,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:a}),i.createElement(G.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},i.createElement(G.ZA,null))):i.createElement(el,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:a});let es=()=>{if((0,C.Cu)({trackingContext:A.name,pluginId:e.pluginId}),B&&!V||$){d();return}if(e.onClick){e.onClick();return}d()};return i.createElement("div",{className:l()(c?q.$C:q.MJ,v||e.isFauxFocused?q.c6:void 0,e.isDevModeWizard?q.NH:void 0),onClick:es,role:"button",tabIndex:0,ref:b?T:void 0},i.createElement("button",{onClick:e=>{e.stopPropagation(),es()},ref:Q?void 0:w,"data-testid":"plugin-tile-button"}),i.createElement("div",{className:q.ot},e.isNotification&&i.createElement("div",{className:q.Vx}),r),er)}function ed(e){let r=useDispatch(),n=useLocalWidgets(),i=React.useMemo(()=>e.localFileId?n[e.localFileId]:void 0,[n,e.localFileId]),a=usePublishingPlugins(),o=i?i.plugin_id:e.widgetId,s=useMyPublishedWidgets({includePendingPublishers:!1}),l=React.useMemo(()=>Object.values(s).find(e=>e.id===o),[s,o]),c=React.useMemo(()=>l&&l.current_plugin_version_id?l.versions[l.current_plugin_version_id]:void 0,[l]),d=useDropdownShown(),{viewWidgetDetails:u}=en(),p=d?.type===DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN&&d?.data.isRecentTile===e.isRecentTile&&d?.data.localFileId===e.localFileId&&d?.data.pluginId===o&&d?.data.targetRect,m=React.useCallback(n=>{if(n.stopPropagation(),p)r(fileBrowserActions.hideDropdown());else{let i=n.currentTarget.getBoundingClientRect();r(fileBrowserActions.showDropdown({type:DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN,data:{localFileId:e.localFileId,pluginId:o,isRecentTile:e.isRecentTile,targetRect:i}}))}},[r,e.localFileId,o,e.isRecentTile,p]),h=React.useCallback(()=>{i&&createWidget({pluginID:i.plugin_id,widgetName:i.name,pluginVersionID:"",triggeredFrom:"universal-insert"})},[i]);if(!i&&!l)return null;let _=React.createElement(DevelopmentResourceStatus,{localResource:i,publishedResource:l}),g=l&&isInReview(l),f=l&&getPluginVersionOrEmptyVersion(l).redirect_snapshot_url||e.localFileId&&a[e.localFileId]&&a[e.localFileId].metadata.widgetSnapshotImageSrc||widgetDevelopmentSnapshotSvgIcon,E=l&&!g?l.roles.is_public?globeIcon:lock:void 0;return React.createElement(React.Fragment,null,React.createElement(ep,{widget:c,localWidget:i,subheader:_,iconUrl:f,widgetId:o,onClick:()=>h(),onOptionsClick:m,optionsButtonIsActive:p,useHorizontalLayout:!0,showEditorTypeIcon:!1,publishingStatusIcon:E,inReview:g}),p&&(i?React.createElement(DevelopmentResourceOptionsDropdown,{localResource:i,viewResource:u}):React.createElement(DevelopmentResourceOptionsDropdown,{publishedResource:l,viewResource:u})))}function eu({useHorizontalLayout:e=!1,onIconClick:r,disabled:n,iconUrl:o="",widget:s,publishedWidget:l,keyboardNavigationButtonRef:c}){let d=i.useMemo(()=>e?[E.op.PRICE]:[E.op.PURCHASED,E.op.OFF_PLATFORM,E.op.FREEMUM,E.op.PRICE],[e]),u=(0,a.d4)(e=>e.authedActiveCommunityProfile);return i.createElement("div",{className:e?q.Zv:q.Cq,onClick:r,role:"button",tabIndex:0},n?i.createElement(B.z,{src:o,context:D._Y.DESIGN}):i.createElement(V._,{widget:s,src:o,analytics:{triggeredFrom:"universal-insert"},keyboardNavigationButtonRef:c,context:D._Y.DESIGN}),i.createElement("div",{className:q.VJ},(0,E.$3)({resource:l,authedActiveCommunityProfile:u,validBadges:d,height:e?"16":"24"})))}let ep=i.memo(function(e){let r=e.localWidget??e.widget??k.lT,{viewWidgetDetails:n,keyboardNavigationPath:a,shouldFocusFirstItem:o}=en(),{setKeyboardNavigationElement:s,isFauxFocused:c,keyboardNavigationButtonRef:d}=eo(`widget_${r.name}`,a,!!o),u=(0,N.ZT)()[e.widgetId],f=(0,O.EO)(u),E=(0,O.gn)(u),b=u?(0,k.uF)(u):null,I=r.name;b?.name&&b?.name!==""&&(I=b?.name);let T=(0,P.sZ)(),v=(0,N.U6)(),w=!e.localWidget&&(0,L.BF)({org:T,extensionVersion:b??e.widget,isWidget:!0,allowlistedExtensions:v}),A=!!(f||w),R=(0,S.j6)(),D=A?void 0:e=>e.stopPropagation(),M=e.metadataOverrideNode??i.createElement(i.Fragment,null,i.createElement("div",{className:q.QF},i.createElement("div",{className:q.JW},i.createElement(g.Y,{spacing:4,verticalAlignItems:"center"},i.createElement("div",{className:l()(q.Y2,{[m.cx.colorTextDisabled.$]:e.visuallyDisabled})},I),e.inReview&&i.createElement(y.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,e.publishingStatusIcon&&i.createElement("div",{className:m.cx.colorIcon.$},i.createElement(p.t,{svg:e.publishingStatusIcon})),E&&i.createElement("div",{className:q.Y9},i.createElement(j.xY,null)))),i.createElement("div",{className:q.ML},e.subheader)),e.onOptionsClick&&i.createElement(K.K0,{svg:X.A,fallbackSvg:J.A,className:e.optionsButtonIsActive?q.F$:q.D1,onClick:e.onOptionsClick,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,h.t)("universal_insert.more_options")}),e.primaryCTAButton&&i.createElement("div",{style:_.sx.add({alignSelf:"center"}).$},e.primaryCTAButton));return i.createElement("div",{className:l()(e.useHorizontalLayout?q.Gy:q.BG,c?q.c6:void 0),onClick:r=>{(0,C.Cu)({trackingContext:R.name,widgetId:e.widgetId}),A?n():e.onClick?e.onClick(r):n()},role:"button",tabIndex:0,ref:a?s:void 0,"data-testid":"widget-tile"},i.createElement("div",{className:q.ot},e.isNotification&&i.createElement("div",{className:q.Vx}),e.showEditorTypeIcon?i.createElement(G.li.IconAndBadgeContainer,null,i.createElement(eu,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:D,disabled:A,iconUrl:e.iconUrl,widget:r,publishedWidget:u,keyboardNavigationButtonRef:d}),i.createElement(G.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"widget"},i.createElement(G.dn,{editorType:e.editorType,is16x16:!0}))):i.createElement(eu,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:D,disabled:A,iconUrl:e.iconUrl,widget:r,publishedWidget:u,keyboardNavigationButtonRef:d})),M)});function em(e){let r=(0,a.wA)(),n=i.useRef(null),o=(0,R.Um)(),s=(0,N.JI)(),l=(0,H.ks)(),d=(0,A.dR)(e.pluginId,"universal-insert"),p=(0,A.Gt)(e.pluginId,"universal-insert"),m=(0,w.t)(e.pluginId,p,d),_=m.length>0,g=eg(e.pluginId,"community"),f=_&&o?.type===e.dropdownShownType&&o?.data.pluginId===e.pluginId,E=g||f,{validatePublishedPluginInOrgAllowlist:y}=(0,N.j1)(e.pluginId),b=(0,A.RK)(e.pluginId),I=i.useCallback(n=>{if(n.stopPropagation(),y()){if(_){E?r(T.oB()):(e.dropdownShownType&&r(T.j7({type:e.dropdownShownType,data:{pluginId:e.pluginId}})),r(e_({pluginId:e.pluginId,tileType:"community"})));return}b?p():d(),r(v.b({seen_published_plugin_onboarding_modal:!0})),r(v.b({seen_development_plugin_onboarding_modal:!0}))}},[y,_,b,r,E,e.dropdownShownType,e.pluginId,p,d]);if(l&&!s)return null;let S=n.current?.getBoundingClientRect(),C=e.usePrimaryButtonStyles?i.createElement(c.$$,{onClick:I,className:q.lI},(0,h.tx)("universal_insert.run"),_&&i.createElement(u.B,{svg:Z.A,className:q.sI})):i.createElement("button",{className:q.lO,onClick:I,ref:e.buttonRef},(0,h.tx)("universal_insert.run"),_&&i.createElement(u.B,{svg:Z.A,className:q.zZ}));return i.createElement("div",{className:e.usePrimaryButtonStyles?q.od:void 0,"data-testid":"run-plugin-button"},i.createElement("div",{ref:n},C),E&&S&&i.createElement(W.j,{showPoint:!1,items:m,onSelectItem:e=>{e.callback&&e.callback("",null,r)},parentRect:S,dispatch:r,lean:"left"}))}let eh="DROPDOWN_TYPE_RUN_PLUGIN_SUBMENU";function e_(e){return T.j7({type:eh,data:e})}function eg(e,r){let n=(0,R.Um)();return n?.type===eh&&n.data.pluginId===e&&r===n.data.tileType}function ef(e){let r=(0,O.lt)(e.plugin);return e.plugin.monetized_resource_metadata?i.createElement("div",{className:q.y2},i.createElement("div",{className:q.lO},(0,I.bV)(e.plugin.monetized_resource_metadata)),!e.hideFreeTrialBadge&&(0,I.Lt)({resource:e.plugin,payment:r})&&i.createElement(b.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}},794321:(e,r,n)=>{"use strict";n.d(r,{fD:()=>a});var i=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(i||{}),a=(e=>(e.BRAINSTORM="BRAINSTORM",e.UPDATES="TEAM UPDATES",e.PLAN="PLANNING AHEAD",e.TEAM="TEAM CHART",e.NONE="NONE",e))(a||{})},27928:(e,r,n)=>{"use strict";n.d(r,{KF:()=>F});var i=n(411855),a=n(188507),o=n(634832),s=n(91408),l=n(951158),c=n(939863),d=n(662275),u=n(931828),p=n(672517),m=n(178323),h=n(965480),_=n(777078),g=n(988022),f=n(820642),E=n(99506),y=n(106112),b=n(555328),I=n(809073),T=n(237870),v=n(488578),S=n(15839),w=n(342056),A=n(406094),N=n(865894),C=n(458602),O=n(938573),L=n(623009),R=n(305694),P=n(119101),D=n(79132),k=n(860168),M=n(945892);function F(e,r){r.editorType=r.editorType||E._Y.WHITEBOARD,e(d.$O({type:V.type,data:r}))}function x(e){let r;let{onTemplateInsertedCurrentFile:n,onTemplateInsertedNewFile:s,hideModal:p}=e,g=(0,a.wA)(),E=i.useRef(null),{templates:T,categoryTitles:v,duplicateFile:S,fileKey:w,searchQuery:k,searchTemplatesResult:F,setSearchQuery:x,categoryIds:U,subcategories:B}=(0,D.bg)({source:"browse-templates-modal"}),{templates:G,categoryIds:H}=(0,D.bg)({templatesShelfType:b.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER}),W={...G,...T},K=(0,h.Gi)(),j={};H.reduce((e,r)=>(e[r]=(0,c.t)("browse_templates_modal_sidebar.get_started"),e),j);let z={...v,...j},[Y,$]=i.useState(),[q,Z]=i.useState(),X=(0,l.Im)(W),J=Y&&Object.values(W).find(e=>e.includes(Y))||[],{insertTemplate:Q,isInsertingTemplate:ee}=(0,_.Fz)(),et=(0,a.d4)(e=>Y?e.hubFiles[Y]:null),er=i.useCallback(()=>{"newFile"===e.triggeredFrom&&g(u.b({figjam_templates_picker_new_file_closed:!0})),p?p():g(d.ES(V))},[e.triggeredFrom,g,p]),en=i.useCallback(()=>{n?n():er()},[n,er]);i.useEffect(()=>{let r=U.filter(r=>v[r]===e.initiallySelectedCategoryTitle);1===r.length&&Z(r[0])},[U,v,e.initiallySelectedCategoryTitle]),i.useEffect(()=>{E.current?.scrollTo(0,0),Y&&et&&(0,m._)("resource_previewed",{fileKey:w,resourceType:"template",resourceName:(0,f.a6)(et).name,resourceId:Y,triggeredFrom:"browse-templates-modal",templateType:y.n.HubFile})},[Y,w,et]);let ei=!k,ea=(0,_.b4)(),eo=(0,_.WS)(),es=e=>ee(e)||eo(e),el=r=>{if(e.templateInsertionLocation===f.RD.CURRENT_FILE)Q({template:r,onSuccess:en,triggeredFrom:"browse-templates-modal"});else{switch(r.type){case y.n.HubFile:S(r.template.id);break;case y.n.TeamTemplate:ea({templateIdentifier:{type:I.vt.TeamTemplate,file_key:r.template.file_key},templateName:r.template.name,openInNewTab:!0});break;case y.n.TeamTemplateLg:ea({templateIdentifier:{type:I.vt.TeamTemplate,file_key:r.template.fileKey},templateName:r.template.name,openInNewTab:!0});break;default:(0,o.assertNever)(r)}s?.()}};if(Y)r=i.createElement(N.h,{templateId:Y,templateInsertionLocation:e.templateInsertionLocation,insertTemplate:el,isInsertingTemplate:es(Y),moreTemplateIds:J,selectTemplate:$}),ei=!1;else if(k)r=i.createElement(C.D,{searchQuery:k,hubFileResultIds:F,isInsertingTemplate:es,onInsertTemplate:el,onPreviewHubFileTemplate:$});else if(q===O.u)switch(K?.type){case"org":r=i.createElement(R.yB,{insertTemplate:el,isInsertingTemplate:es,templateInsertionLocation:e.templateInsertionLocation});break;case"team":r=i.createElement(P.z,{teamId:K.entity.id,teamName:K.name,onInsert:el,isInsertingTemplate:es,templateInsertionLocation:e.templateInsertionLocation});break;default:r=i.createElement(i.Fragment,null)}else r=X?i.createElement(i.Fragment,null):i.createElement(A.s,{templates:W,categoryIds:U,categoryTitles:z,selectedCategory:q,selectCategory:Z,enterCommunityUrl:"/community/figjam",templateInsertionLocation:e.templateInsertionLocation,previewHubFile:$,onInsertTemplate:el,isInsertingTemplate:es});return i.createElement(i.Fragment,null,i.createElement(L.F,{editorType:e.editorType,triggeredFrom:e.triggeredFrom,searchQuery:k,setSearchQuery:x,previewTemplateId:Y,goBack:()=>$(void 0),hideModal:er}),i.createElement("div",{className:M.jE,ref:E},ei&&i.createElement(O.J,{categoryIds:U,categoryTitles:z,selectedCategory:q,selectCategory:Z,makeSomethingCategoryId:H?.length?H[0]:"",triggeredFrom:e.triggeredFrom,subcategories:B}),r))}function U(e){let r=(0,a.wA)(),{hideModal:n,hideTintedModalBackground:o}=e,l=i.useCallback(()=>{n?n():r(d.ES(V))},[r,n]),c="newFile"===e.triggeredFrom,u="whiteboard"===e.editorType?c?M.hW:M.sd:c?M.b8:M.yl,{properties:m,name:h}=(0,p.j6)();return i.createElement(v.aF,{className:u,backgroundClassName:c?M.XO:void 0,size:(0,s.hG)(k.jmC),onHide:()=>{(0,g.Cu)({...m,trackingContext:h,text:w.T}),l()},tintedModalBackground:!o},i.createElement(x,{...e}))}function B(e){let r=(0,a.d4)(e=>e.openFile?e.openFile.key:null);return i.createElement(p.fu,{name:"template_modal_shown",properties:{fileKey:r,source:e.triggeredFrom}},i.createElement(U,{...e}))}let V=(0,T.Ju)(B,"BrowseTemplatesModal"),G=(e=!0,r)=>({modalType:S.q3.WELCOME,trackingContextName:"Browse Templates Modal",element:n=>i.createElement(B,{editorType:E._Y.WHITEBOARD,templateInsertionLocation:f.RD.CURRENT_FILE,triggeredFrom:"newFile",hideModal:r?n.onClickPrimaryCta:n.dismissModal,hideTintedModalBackground:e})});G(),G(!0,!0),G(!1)},540292:(e,r,n)=>{"use strict";n.d(r,{AF:()=>x,Cm:()=>z,G3:()=>j,Kt:()=>K,Pr:()=>U,iq:()=>k,tJ:()=>B});var i=n(411855),a=n(188507),o=n(634832),s=n(346124),l=n(629019),c=n.n(l),d=n(983405),u=n(737947),p=n(915440),m=n(860601),h=n(768137),_=n(268537),g=n(493323),f=n(762638),E=n(939863),y=n(970516),b=n(738269),I=n(988022),T=n(128765),v=n(27703),S=n(318812),w=n(820642),A=n(279453),N=n(106112),C=n(218934),O=n(554905),L=n(555207),R=n(927625),P=n(79132),D=n(945892);function k(e){return i.createElement("div",{className:D.sk},e.children)}function M({template:e}){let r=(0,S.Um)(),{primaryKey:n}=(0,T.fG)()(e);return r?.type===P.hx&&r?.data?.templatePrimaryKey===n&&r.data?.position?i.createElement(F,{template:e,position:r.data.position}):null}function F({template:e,position:r}){let n=(0,a.wA)(),{viewSourceFileUrl:o,duplicateLink:s,primaryKey:l}=(0,T.fG)()(e),c=e.type===N.n.TeamTemplate,m=(0,p.Rs)(A.sMs,{key:l},{enabled:c});return i.createElement(_.ms,{style:{...r,position:"fixed"}},i.createElement(_.c$,{onClick:()=>{n(b.oB()),n(y.S({url:s}))}},(0,E.tx)("browse_templates_modal.context_menu.copy_link")),o&&c&&i.createElement(_.c$,{onClick:()=>{n(b.oB()),u.Ay.redirect(o,"_blank")},disabled:"loading"===m.status||"disabled"===m.status||!m.data?.file?.hasPermission},i.createElement(d.Y1,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",spacing:8},i.createElement("span",null,(0,E.tx)("browse_templates_modal.context_menu.view_original_file")),i.createElement(g.kt,{className:f.cx.if("loading"!==m.status,f.cx.invisible).$}))))}function x(e){let{clientMeta:r,imageUrl:n,thumbnailIsSet:a,isWhiteboard:o,name:s,publishers:l,hubFileId:c,resizedThumbnailUrls:d}=(0,T.fG)()(e.template),u=(0,P.jq)(e.template),p=(0,O.Td)();return i.createElement(i.Fragment,null,i.createElement(C.zq,{onContextMenu:u,image:i.createElement(C.FK,{backgroundColor:(0,v.Cn)(r)},i.createElement(C.zx.Cover,null,i.createElement("button",{className:D.n_,onClick:e.onInsert,disabled:e.isInsertingTemplate||p})),i.createElement(C.zx.Center,null,i.createElement(L.i,{insertTemplate:e.onInsert,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,w.Ve)(e.templateInsertionLocation))),i.createElement(R.Ho,{image:n,isSet:a,isWhiteboard:o,hubFileId:c,alt:s,resizedThumbnailUrls:d})),bottomRow:i.createElement(C.Wf.FullMetadata,{name:s,publishers:l,hoverText:e.onPreview?(0,E.t)("browse_templates_modal.view_details"):void 0,onClick:e.onPreview||m.lQ})}),i.createElement(M,{template:e.template}))}function U(e){let r=(0,a.d4)(r=>r.hubFiles[e.hubFileId]);return i.createElement(x,{template:{template:r,type:N.n.HubFile},onInsert:()=>e.onInsert({template:r,type:N.n.HubFile}),isInsertingTemplate:e.isInsertingTemplate,onPreview:e.previewHubFile,templateInsertionLocation:e.templateInsertionLocation})}function B({url:e,fileKey:r}){return i.createElement("a",{href:e,target:"_blank"},i.createElement(h.nR,{className:D._p,onClick:()=>{(0,I.Cu)({fileKey:r,uiSelectedView:"see_more_button",name:"Templates Modal Browse More"},"cta_clicked")}},(0,E.tx)("browse_templates_modal_content.see_more_in_community")))}function V(){return i.createElement("div",{className:f.cx.flex.itemsCenter.h40.my8.wFull.$},i.createElement(G,null))}function G(){return i.createElement("div",{className:c()(f.cx.w100.h16.bRadius3.$,D.Mm)})}function H({lightness:e="normal"}){let r=function(e){switch(e){case"normal":return D.Mm;case"light":return D.EQ;case"lightest":return D.Y;default:(0,o.assertNever)(e)}}(e);return i.createElement(C.zq,{image:i.createElement(C.FK,{removeBorder:!0},i.createElement("div",{className:c()(r,f.cx.wFull.hFull.$)})),bottomRow:i.createElement("div",{className:c()(r,f.cx.h16.w100.bRadius3.$)})})}function W({shouldFade:e}){return i.createElement(i.Fragment,null,(0,s.range)(3).map(r=>{let n="normal";return e&&(n=2===r?"lightest":1===r?"light":"normal"),i.createElement(H,{key:r,lightness:n})}))}function K(){return i.createElement("div",{className:f.cx.px24.$},i.createElement(V,null),i.createElement(k,null,i.createElement(W,null),i.createElement(W,null),i.createElement(W,{shouldFade:!0})))}function j({shouldFade:e}){return i.createElement("div",{className:f.cx.pb20.$},i.createElement("div",{className:f.cx.h24.mb16.$},i.createElement(G,null)),i.createElement(k,null,i.createElement(W,{shouldFade:e})))}function z(){return i.createElement(d.Y1,{width:"fill-parent",height:"fill-parent",verticalAlignItems:"center",horizontalAlignItems:"center"},i.createElement(g.kt,{size:"large"}))}},305694:(e,r,n)=>{"use strict";n.d(r,{yB:()=>D});var i=n(411855),a=n(459401),o=n(629019),s=n.n(o),l=n(966712),c=n(268537),d=n(428322),u=n(574176),p=n(762638),m=n(939863),h=n(175290),_=n(965480),g=n(694687),f=n(99506),E=n(643067),y=n(106112),b=n(383986),I=n(143678),T=n(630028),v=n(540292),S=n(119101),w=n(348787),A=n(52245),N=n(945892),C=n(949207),O=n(432023);function L({filterOptions:e,selectedIds:r,isMyTeamsOnly:n,onFilterChange:o,userTeamOrWorkspaceIds:s,showWorkspaces:l,rightAlignOptions:d=!0}){let u=new Set(r||e.map(e=>e.id)),g=[],f=[],E=[],y=!1;for(let r of e)u.has(r.id)&&E.push(r),(0,_.qI)(r)?y=!0:s.has(r.id)?g.push(r):f.push(r);(0,a.sortAlphabeticallyByProperty)(g,"name"),(0,a.sortAlphabeticallyByProperty)(f,"name");let T=g.filter(e=>u.has(e.id)),v=f.filter(e=>u.has(e.id)),S=function({filterOptionsCount:e,userMemberFilterOptionsSelected:r,userNonMemberFilterOptionsSelected:n,isMyTeamsOnly:i,showWorkspaces:a,unassignedTeamsSelected:o}){let s=[...r,...n],l=s.length+(o?1:0);return 0===l?(0,m.t)("browse_templates_modal.none_selected"):l===e?a?i?(0,m.t)("browse_templates_modal.my_teams_only"):(0,m.t)("browse_templates_modal.all_workspaces"):(0,m.t)("browse_templates_modal.all_teams"):1===l?o?(0,m.t)("browse_templates_modal.other_teams"):s[0].name:(0,m.t)("browse_templates_modal.first_name_count_more",{count:l-1,firstName:s[0].name})}({filterOptionsCount:e.length,userMemberFilterOptionsSelected:T,userNonMemberFilterOptionsSelected:v,showWorkspaces:l,isMyTeamsOnly:n,unassignedTeamsSelected:u.has(b.s)}),w=(e,r)=>{o({ids:e?E.reduce((e,n)=>n.id===r.id?e:[...e,n.id],[]):[...E.map(e=>e.id),r.id],myTeamsOnly:n})},A=(e,r)=>{let i=new Set(u);e.forEach(e=>{r?i.add(e.id):i.delete(e.id)}),o({ids:Array.from(i),myTeamsOnly:n})},N=[];if(l){if(N.push(...[...g,...f].filter(e=>!!e.id).map(e=>{let r=u.has(e.id);return i.createElement(c.rr,{key:e.id||e.name,checked:r,onClick:()=>{w(r,e)},displayType:c.Jn.Checkbox},e.name)})),N.length&&N.unshift(i.createElement(c.wv,{key:"my-teams-only-separator"})),N.unshift(i.createElement(c.rr,{key:"my-teams-only",checked:n,onClick:()=>o({ids:r,myTeamsOnly:!n}),displayType:c.Jn.Checkmark},(0,m.tx)("browse_templates_modal.my_teams_only"))),y){let e=u.has(b.s);N.push(i.createElement(c.wv,{key:"unassigned-teams-separator"}),i.createElement(c.rr,{key:"unassigned-teams",checked:e,onClick:()=>{w(e,{id:b.s})},displayType:c.Jn.Checkbox},(0,m.tx)("browse_templates_modal.other_teams")))}}else g.length>0&&N.push(i.createElement(c.rr,{displayType:c.Jn.Checkbox,key:"my-teams",checked:g.length===T.length,mixed:g.length>T.length&&T.length>0,onClick:()=>{A(g,T.length<g.length)}},(0,m.tx)("browse_templates_modal.my_teams"))),N.push(...g.map(e=>{let r=u.has(e.id);return i.createElement(c.rr,{key:e.id||e.name,checked:r,onClick:()=>{w(r,e)},displayType:c.Jn.Checkbox,nested:!0},e.name)})),g.length>0&&f.length>0&&N.push(i.createElement(c.wv,{key:"other-teams-separator"})),f.length>0&&N.push(i.createElement(c.rr,{key:"other-teams",displayType:c.Jn.Checkbox,checked:f.length===v.length,mixed:f.length>v.length&&v.length>0,onClick:()=>{A(f,v.length<f.length)}},(0,m.tx)("browse_templates_modal.all_others"))),N.push(...f.map(e=>{let r=u.has(e.id);return i.createElement(c.rr,{key:e.id||e.name,checked:r,onClick:()=>{w(r,e)},displayType:c.Jn.Checkbox,nested:!0},e.name)}));return N.length?i.createElement(h.Y,{spacing:0,width:"hug-contents"},i.createElement("span",{className:p.cx.colorTextSecondary.$},(0,m.tx)("browse_templates_modal.published_from")),i.createElement(c.Ve,{label:S,noBorder:!0,rightAlignOptions:d,stayOpenOnSelect:!0,optionsBelowSelector:!0,options:N,notDraggable:!0,noRightPadding:!0,menuTrackingContextName:I.e0.TEMPLATES_BROWSE_FILTERS,menuTrackingProperties:{isEnterpriseOrg:l}})):null}function R(e){let[r,n]=(0,i.useState)(!0),a=(0,i.useRef)(null),o=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{!0!==o.current||r||a.current?.scrollIntoView()},[r]),i.createElement("section",null,i.createElement("button",{className:s()(p.cx.wFull.alignLeft.sticky.top0.zIndexTemplateModalTeamName.font13.my8.h40.fontMedium.colorBg.$,N.MY),onClick:()=>n(!r),ref:a},i.createElement("h2",null,i.createElement(u.B,{className:p.cx.relative.inlineFlex.justifyCenter.colorIconTertiary.mx2.w16.$,style:{top:"-2px"},svg:r?C.A:O.A}),e.workspaceName&&i.createElement("span",{className:p.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName)),r&&i.createElement(i.Fragment,null,i.createElement("div",{className:p.cx.if(e.minimalSpacing,p.cx.px0.mb0,p.cx.px24.mb20).$},e.children),i.createElement(d.a,{"data-testid":`load-more-team-${e.teamId}`,onIntersectionChange:({isIntersecting:r})=>{r&&e.onRequestLoadMoreForTeam(e.teamId)}})),i.createElement(d.a,{onIntersectionChange:({isIntersecting:e})=>{o.current=e}}))}function P(e){return i.createElement("section",null,i.createElement("div",{className:s()(p.cx.borderBox.$,A.a0)},i.createElement("div",{className:A.bV},e.workspaceName&&i.createElement("span",{className:p.cx.colorTextSecondary.fontNormal.$},e.workspaceName," / "),e.teamName),e.onSeeAllClick&&i.createElement("button",{className:A.jy,onClick:e.onSeeAllClick},(0,m.tx)("whiteboard.inserts.see_all"))),i.createElement("div",{className:p.cx.if(e.minimalSpacing,p.cx.px0.mb0,p.cx.px24.mb20).$},e.children))}function D(e){let r=(0,i.useRef)(null),n=(0,g.sZ)(),a=(0,E.G7)(n),{filterOptions:o,selectedTeamOrWorkspaceOrLicenseGroupIds:s,isMyTeamsOnly:c,onFilterChange:u,requestLoadMore:b,requestLoadMoreForTeam:I,templatesByTeam:A,userTeamOrWorkspaceIds:N,isLoadingTeamTemplates:C}=(0,_.GR)(n,f._Y.WHITEBOARD),O=(0,l.kc)().pro_templates_lg;O&&A.forEach(e=>{e.templates.length>6&&(e.templates=e.templates.slice(0,6))});let[D,k]=(0,i.useState)(null);return D?i.createElement(S.z,{teamId:D.teamId,teamName:D.name,templateInsertionLocation:e.templateInsertionLocation,isInsertingTemplate:e.isInsertingTemplate,onInsert:e.insertTemplate,onBackClick:()=>k(null)}):i.createElement("div",{className:p.cx.wFull.$},i.createElement(h.Y,{horizontalAlignItems:"space-between",height:w.k,padding:{left:24,right:24},strokeWidth:{bottom:1},strokeColor:"default"},i.createElement("div",{className:p.cx.font13.fontMedium.$},(0,m.tx)("browse_templates_modal.published_by_current_org_name",{orgName:n.name})),i.createElement(L,{filterOptions:o,selectedIds:s,isMyTeamsOnly:c,onFilterChange:e=>{"function"==typeof r.current?.scroll&&r.current.scroll({top:0,behavior:"smooth"}),u(e)},userTeamOrWorkspaceIds:new Set(N),showWorkspaces:a})),0===A.length?C?i.createElement(v.Kt,null):i.createElement(T.Ht,null):i.createElement("section",{className:p.cx.overflowYScroll.$,ref:r,style:{height:`calc(100% - ${w.k}px)`}},A.map(({team_id:r,team_name:n,workspace_name:o,templates:s,total:l})=>{let c=i.createElement(v.iq,null,s.map(r=>i.createElement(v.AF,{templateInsertionLocation:e.templateInsertionLocation,key:r.file_key,template:{template:r,type:y.n.TeamTemplate},onInsert:()=>e.insertTemplate({template:r,type:y.n.TeamTemplate}),isInsertingTemplate:e.isInsertingTemplate(r.file_key)})));return O?i.createElement(P,{key:r,teamName:n,workspaceName:a?o:null,teamId:r,onSeeAllClick:l>6?()=>{k({teamId:r,name:n??""})}:void 0},c):i.createElement(R,{key:r,teamName:n,workspaceName:a?o:null,teamId:r,onRequestLoadMoreForTeam:I},c)}),i.createElement(d.a,{"data-testid":"load-more-teams",className:p.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&b()}})))}},79132:(e,r,n)=>{"use strict";n.d(r,{hx:()=>y,jq:()=>b,bg:()=>E});var i=n(411855),a=n(188507),o=n(297666),s=n(966712);n(498750);var l=n(939863),c=n(384162),d=n(410424),u=n(738269);n(178323);var p=n(988022),m=n(128765),h=n(820642);n(99506);var _=n(336599),g=n(463592);n(106112);var f=n(555328);function E(e){let{templatesShelfType:r,source:n}=e,u=(0,a.wA)(),[m]=i.useState(()=>new g.Ef([],{keys:["name"]})),E=r||f.cS.FIGJAM_TEMPLATES_PICKER,y=c.sz.loadingKeyForPayload({shelfType:E}),b=(0,_.oh)(y),I=(0,_.mC)(y),T=(0,a.d4)(e=>e.hubFiles),v=(0,a.d4)(e=>e.communityHub.shelves[E]),S=(0,a.d4)(e=>e.openFile?e.openFile.key:null),w=s.Ay().user_data?.id,[A,N]=i.useState(""),[C,O]=i.useState([]),L=i.useMemo(()=>(v||[]).reduce((e,r)=>({...e,[r.id]:r.shelf_content.map(e=>e.id)}),{}),[v]),R=i.useMemo(()=>(v||[]).reduce((e,r)=>({...e,[r.id]:(0,l.Yd)(r.i18n_meta.title,r.title)}),{}),[v]),P=i.useMemo(()=>(v||[]).map(({id:e})=>e),[v]),D=i.useCallback(e=>{let r=T[e],i=(0,h.a6)(r);u(d.rL({hubFileId:e,hubFileName:i.name||"this file",openInNewTab:!0,source:n}))},[u,T,n]);return i.useEffect(()=>{b||I||u(c.sz({shelfType:E}))},[u,I,b,E]),i.useEffect(()=>{let e=Object.keys(L).reduce((e,r)=>[...e,...L[r]],[]).map(e=>(0,h.a6)(T[e]));m.set(e)},[L,T,m]),i.useEffect(()=>{let e;A?(e=[...new Set(e=m.search(A).map(e=>e.hub_file_id))],(0,p.Cu)({userId:w,fileKey:S,entry_point:"templates_modal",scope:"Templates Modal",files:0,private_plugins:0,private_widgets:0,public_plugins:0,public_widgets:0,projects:0,teams:0,users:0},"search_query_result")):e=[],O(e)},[A,w,S,m]),{templates:L,categoryTitles:R,hubFiles:T,isLoading:b,duplicateFile:D,fileKey:S,userId:w,setSearchQuery:i.useCallback((0,o.s)(N,300),[]),searchQuery:A,searchTemplatesResult:C,categoryIds:P,subcategories:i.useMemo(()=>{if(!v)return[];let e={activity:(0,l.t)("browse_templates_modal.subcategory.activity"),role:(0,l.t)("browse_templates_modal.subcategory.role")},r=[];return v.forEach(n=>{if(!n.shelf_meta.category)return;let i=n.shelf_meta.category,a=r.find(e=>e.id===i);a?a.categoryIds.push(n.id):r.push({id:i,title:e[i]||i,categoryIds:[n.id]})}),r},[v])}}n(301400);let y="templates_context_menu";function b(e){let r=(0,a.wA)(),{primaryKey:n}=(0,m.fG)()(e);return i.useCallback(e=>{e.preventDefault();let i={templatePrimaryKey:n,position:{top:e.clientY,left:e.clientX}};r(u.j7({type:y,data:i}))},[r,n])}},302608:(e,r,n)=>{"use strict";n.d(r,{bb:()=>eh});var i=n(411855),a=n(188507),o=n(256296),s=n(485463),l=n(421757),c=n(629019),d=n.n(c),u=n(320063),p=n(189430),m=n(966712),h=n(38580),_=n(374626),g=n(646240),f=n(574705),E=n(153234),y=n(554322),b=n(572206),I=n(27087),T=n(448169),v=n(946689),S=n(511443),w=n(827586),A=n(574176),N=n(939863),C=n(392592),O=n(934533),L=n(970516),R=n(662275),P=n(931828),D=n(318812),k=n(611978),M=n(309798),F=n(239671),x=n(103101),U=n(237870),B=n(538697),V=n(746806),G=n(911738),H=n(390980),W=n(786972),K=n(33798),j=n(681109),z=n(589084),Y=n(132208),$=n(175479),q=n(785496);let Z=(0,h.eU)(!1),X=e=>e.map(e=>{let r=e.name.match(/((.*)\s+-\s+)?(.*)/);return{optionCategoryName:r&&r[2]||"Other",optionSubareaName:r&&r[3]||e.name,gid:e.gid}}).reduce((e,r)=>{let n=e.get(r.optionCategoryName);return n||(n=[],e.set(r.optionCategoryName,n)),n.push({name:r.optionSubareaName,gid:r.gid}),e},new Map),J=e=>{let r=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!r||r.length<2)throw Error((0,N.t)("bug_reporter.error_invalid_asana_url"));return r[1]};function Q(e){return!ee(e)}function ee(e){return"error"in e}let et={gid:"",name:"Pick an option"},er="bugReporter",en=(0,h.eU)(!0),ei=(0,h.eU)(""),ea=(0,h.eU)(""),eo=(0,h.eU)(""),es=(0,h.eU)(et),el=(0,h.eU)(et),ec=(0,h.eU)(!1),ed=i.createElement("div",{className:W.jM},"WARNING: because the title begins with TEST: your bug will be routed to the ",i.createElement("a",{className:W.Hm,href:"https://app.asana.com/0/1203643376438098/list",target:"_blank"},(0,N.tx)("bug_reporter.warning_asana_board")));function eu(e){let r=(0,D.Um)(),n=(0,a.wA)(),c=(0,y.Av)(),{windowInnerHeight:h}=(0,p.l)(),[g,f]=(0,_.fp)(ei),[b,I]=(0,_.fp)(ea),[O,L]=(0,_.fp)(eo),[R,P]=(0,_.fp)(es),[k,M]=(0,_.fp)(el),[F,x]=(0,_.fp)(ec),[U,G]=i.useState(!0),[j,z]=i.useState(!1),[$,q]=i.useState([]),[Z,X]=i.useState(void 0),Q=h-(c+V.uF+S.Ug)-S.lc;(0,u.h)(()=>{!0===F&&(ee(),x(!1))});let ee=()=>{G(!0),q([]),e.clearForm()},et=i.useCallback(()=>!!(!e.isSubmitting&&b.trim()&&O.trim())&&(!e.isNewReport||!!R.gid&&!!k.gid),[O,e.isNewReport,e.isSubmitting,k.gid,R.gid,b]),en=r=>{if(r)try{let n=J(r);e.attachFromTask(n)}catch(e){n(C.F.enqueue({message:`${e}`,error:!0}))}},eu=E.AF(E.Pt(er,"link-input"),"change",e=>{let r=e.target.value;f(r),""===r&&ee()}),em=E.AF(E.Pt(er,"title-input"),"change",e=>{I(e.target.value)}),eh=E.AF(E.Pt(er,"description-input"),"change",e=>{L(e.target.value)}),e_=E.qP(E.Pt(er,"severity-input")??"","change",e=>{P(e)}),eg=E.qP(E.Pt(er,"product-area-input")??"","change",e=>{M(e)}),ef=i.useCallback(e=>{let r=[],i=[];for(let n of e)if(n.size>52428800)i.push(n.name);else{let e=URL.createObjectURL(n);r.push({fileContent:n,url:e,name:n.name,type:n.type})}if(i.length>0){let e=`Error: files could not be attached (over 50MB limit): [${i.join(", ")}].`;console.error(e),n(C.F.enqueue({error:!0,message:e}))}return r},[n]),eE=e=>{if(e.files.length>0){let r=ef([...e.files]);q(e=>[...e,...r])}z(!1)},ey=E.AF(E.Pt(er,"include-filekey-input"),"change",e=>{G(e.currentTarget.checked)}),eb=i.useCallback(()=>{et()&&e.submitBugReport(b,O,R,k,U,$,Z)},[$,et,O,U,Z,e,k,R,b]),eI=E.of(er,"submit",e=>{e.preventDefault(),eb()}),eT=(e,r)=>{let n=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?eb():("description"!==r&&e.preventDefault(),"asanaInput"===r&&en(g))),"Escape"===e.key&&n&&n.blur()},ev=E.v_(E.Pt(er,"asanaInput"),"keydown",e=>{eT(e,"asanaInput")});return i.createElement(T.Y,{className:d()(j&&W.oE),isDragTarget:()=>!0,onTargetDragEnter:()=>{z(!0)},onTargetDragLeave:()=>{z(!1)},onTargetDrop:e=>eE(e)},j&&i.createElement("div",{className:W.$1},i.createElement(A.B,{svg:K.A}),(0,N.tx)("bug_reporter.drop_attachments")),i.createElement(w.P,{maxHeight:Q,hideScrollbar:j},i.createElement("form",{onSubmit:eI,onPaste:e=>{if(e.clipboardData.files.length>0){let r=ef([...e.clipboardData.files]);q(e=>[...e,...r])}},className:d()(W.yl,j&&W.vw)},i.createElement("div",{className:W.uu},i.createElement(o.J,{className:W.y8},(0,N.tx)("bug_reporter.asana_hint")),i.createElement(v.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.asana_link_placeholder"),value:g,onChange:eu,onPaste:e=>{let r=e.clipboardData.getData("text");try{J(r),en(r)}catch{}},onKeyDown:ev,maxLength:150})),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.title")),i.createElement(v.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>eT(e,"title"),value:b,onChange:em,maxLength:150})),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.severity")),i.createElement(B.l6,{id:"bug_reporter_select_severity",dispatch:n,property:R,onChange:e_,dropdownShown:r,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},0===e.severityOptions.length&&i.createElement(B.c$,{key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading")),e.severityOptions.map(e=>i.createElement(B.c$,{value:e,key:e.gid},e.name)))),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.product_area")),i.createElement(B.l6,{id:"bug_reporter_select_product_area",dispatch:n,property:k,onChange:eg,dropdownShown:r,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},(()=>{if(0===e.productAreaGroups.size)return i.createElement(B.c$,{value:null,key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading"));let r=[];return e.productAreaGroups.forEach((e,n)=>{r.push(i.createElement(B.c$,{value:null,key:n,disabled:!0},n)),e.forEach(e=>r.push(i.createElement(B.c$,{value:e,key:e.gid},e.name))),r.push(i.createElement(B.sK,{key:`${n}.divider`}))}),r.pop(),r})())),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.description")),i.createElement(v.ks,{className:[W._Z,W.Tg].join(" "),placeholder:(0,N.t)("bug_reporter.modal.description_placeholder"),type:"textarea",value:O,onChange:eh,onKeyDown:e=>eT(e,"description"),maxLength:1e3})),i.createElement("div",null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.images_and_videos")),i.createElement(ep,{attachmentFiles:$,setAttachmentFiles:q,validateInputFiles:ef})),(0,m.kc)().in_app_performance_profiling&&i.createElement("div",null,i.createElement(i.Fragment,null,i.createElement(o.J,{className:W.Pf},(0,N.tx)("bug_reporter.profiler.title")),i.createElement(H.J,{onProfilingFinish:e=>{X(e)}}),Z&&(0,N.tx)("bug_reporter.profiler.profile_attached"))),"fullscreen"===e.selectedView.view&&i.createElement(s.S,{checked:U,onChange:(e,{event:r})=>ey(r),label:i.createElement(o.J,null,i.createElement("div",{className:W.HI},(0,N.t)("bug_reporter.modal.include_filekey"),i.createElement("div",{className:W.kB},i.createElement(A.B,{svg:Y.A}),i.createElement("div",{className:W.dX},(0,N.tx)("bug_reporter.modal.include_filekey_info")))))}),b.startsWith("TEST:")&&ed,i.createElement(v.e2,{className:W.GC},i.createElement(l.$n,{variant:"secondary",onClick:e.onClose},(0,N.tx)("bug_reporter.modal.cancel")),i.createElement(l.$n,{variant:"primary",type:"submit",disabled:!et()},(0,N.t)("bug_reporter.modal.submit"))))))}function ep(e){let{attachmentFiles:r,setAttachmentFiles:n,validateInputFiles:a}=e,o=i.useRef(null),s=i.useCallback(()=>{o.current&&(o.current.value="")},[]),l=i.useCallback(()=>{let e=o.current?.files||null;if(null===e||0===e.length)return;let r=a([...e]);n(e=>[...e,...r]),s()},[s,a,n]),c=(e,r,i)=>{e.preventDefault(),n(e=>(e.splice(r,1),[...e])),URL.revokeObjectURL(i)};return i.createElement("div",{className:W.VL},r.length>0&&r.map((e,r)=>i.createElement("div",{className:W.Dq,key:r},i.createElement("div",null,e.type.startsWith("image")?i.createElement("img",{className:W.cR,alt:e.name,key:r,src:e.url}):i.createElement("video",{className:W.cR,key:r,src:e.url}),i.createElement("div",{className:W.Lw})),i.createElement("button",{onClick:n=>c(n,r,e.url)},i.createElement(A.B,{className:W.Yz,svg:q.A})))),i.createElement("label",{className:W.UM,htmlFor:"file-upload"},i.createElement(A.B,{svg:z.A})),i.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:o,onChange:l,multiple:!0,hidden:!0}))}function em(e){let r=(0,a.wA)(),n=E.rf(E.Pt(er,"asana-link"),"click",()=>{});return i.createElement("div",{className:W.yl},i.createElement("div",{className:W.lM},(0,N.tx)("bug_reporter.success_message")),i.createElement("div",{className:W.U3},i.createElement("div",{className:W.AX},i.createElement(A.B,{svg:$.A}),i.createElement(v.CY,{onClick:n,href:e.taskUrl,target:"_blank",trusted:!0},(0,N.tx)("bug_reporter.asana_link"))),i.createElement("div",{className:W.AX},i.createElement(A.B,{svg:j.A}),i.createElement(v.CY,{onClick:()=>{r(L.lW({stringToCopy:e.taskUrl}))},trusted:!0},(0,N.tx)("bug_reporter.copy_link")))),e.isNewReport&&i.createElement("div",null,(0,N.tx)("bug_reporter.urgent_bug_info",{notifyTheRelevantOncall:i.createElement(v.CY,{href:"https://go/find-oncall",target:"_blank",trusted:!0},(0,N.tx)("bug_reporter.notify_oncall"))})),e.slackUrl&&i.createElement("div",null,i.createElement(v.vx,{className:W.$U,href:e.slackUrl,target:"blank",type:"button"},(0,N.tx)("bug_reporter.open_slack_discussion"))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>i.createElement("p",{key:e},e.toString())))}let eh=(0,U.Ju)(function(){let e=(0,a.d4)(e=>e.multiplayer.allUsers.length),r=(0,a.d4)(e=>e.user?.id),n=(0,k._6)(),o=(0,a.wA)(),{windowInnerHeight:s}=(0,p.l)(),l=(0,G.O)(),[c,d]=i.useState([]),[h,E]=(0,_.fp)(ei),y=(0,g.Xr)(ea),T=(0,g.Xr)(eo),v=(0,g.Xr)(es),w=(0,g.Xr)(el),[A,L]=i.useState(new Map),D=(0,g.Xr)(ec),[U,B]=(0,_.fp)(en),[H,K]=i.useState(!1),[j,z]=i.useState(!1),Y=i.useRef(""),$=i.useRef(""),q=i.useRef(""),ed=i.useRef(""),ep=i.useRef(""),eh=i.useRef([]),e_=i.useRef(null),eg=i.useRef(0),ef=(0,g.Xr)(Z),eE=()=>{o(R.Ce())},ey=(0,M.f)("seen_bug_reporter_modal");(0,u.h)(()=>{ey||o(P.b({seen_bug_reporter_modal:!0})),ef(!0)}),i.useEffect(()=>{(async()=>{try{let{data:e}=await x.o.getMeta();d(e.meta.severity),L(X(e.meta.product_area))}catch(e){o(C.F.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}})()},[o]);let eb=()=>x.o.getGetTask({taskGid:Y.current}).then(({data:e})=>e).catch(e=>{let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof I.Dr&&e.data?.message&&(r=e.data.message),o(C.F.enqueue({message:r,error:!0}))}),eI=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let r=e.map(async e=>{try{return{uuid:await ev(e.fileContent,e.type),name:e.name}}catch(r){return{error:`Please add attachment ${e.name} directly in Asana instead. ${r}`}}}),n=await Promise.all(r);return eh.current=n.filter(ee).map(({error:e})=>e),{attachments:n.filter(Q),errorMessages:n.filter(ee).map(({error:e})=>e)}},eT=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{return{attachments:[{uuid:await ev(JSON.stringify(e),"application/json"),name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},ev=async(e,r)=>{let n=await x.o.getAttachmentUploadUrl({fileType:r});if(200!==n.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:i,fields:a,uuid:o}=n.data.meta,s=new FormData;for(let e in a)s.append(e,a[e]);if(s.append("content-type",r),s.append("file",e),204!==(await fetch(i,{method:"post",body:s})).status)throw Error("Failed to upload attachment to S3");return o},eS=async(i,a,s,l,c,d,u)=>{z(!0),ed.current=i,ep.current=a,o(C.F.enqueue({type:"bug-reporter-submitting",message:(0,N.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:O.zX.SPINNER})),o(C.F.enqueue({type:"bug-reporter-submitting-long",message:(0,N.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:O.zX.SPINNER}));let p={env:(0,m.tl)().cluster_name,user_agent:navigator.userAgent,view:n.view,user_id:r,org_id:(0,m.tl)().org_id,tracking_session_id:(0,m.tl)().tracking_session_id,release_commit:(0,m.tl)().release_manifest_git_commit,device_info:(0,f.N)(),num_people_in_file:e};"fullscreen"===n.view?(p.editor_type=(0,F.Bu)(n.editorType),c&&(p.file_key=n.fileKey,p.url=window.location.href)):p.url=window.location.href;let _={title:i,severity:s.gid,product_area:l.gid,description:a,metadata:p},g=[eI(d),eT(u)],[E,y]=await Promise.all(g);E.attachments.length>0&&(_.attachments=E.attachments),y.attachments.length>0&&(_.profileUuid=y.attachments[0].uuid),(E.errorMessages.length||y.errorMessages.length)&&(eh.current=[...E.errorMessages,...y.errorMessages]);try{let e=U?await I.Ay.post("/api/bug_reports",_):await I.Ay.put("/api/bug_reports/update_task",{..._,task_gid:Y.current=J(h)});if(e.status>=200&&e.status<300)o(C.F.dequeue({matchType:"bug-reporter-submitting"})),o(C.F.dequeue({matchType:"bug-reporter-submitting-long"})),$.current=e.data.meta.task_url,Y.current=e.data.meta.task_gid,U||(q.current=e.data.meta.slack_url),eg.current=e_.current?.getCurrentContentSize()?.y||0,K(!0),D(!0),z(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(r){o(C.F.dequeue({matchType:"bug-reporter-submitting"})),o(C.F.dequeue({matchType:"bug-reporter-submitting-long"}));let e=r.message;r instanceof I.Dr&&r.data?.message&&"string"==typeof r.data.message&&(e=r.data.message),o(C.F.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0})),z(!1)}},ew=async e=>{Y.current=e,B(!1);let r=await eb();r&&(y(r.meta.title),T(r.meta.description),v(r.meta.severity??et),w(r.meta.product_area??et))};return i.createElement(V.vx,{ref:e_,title:(0,N.t)("help_widget.menu.report_issue"),initialPosition:(()=>{let e=l?S.lc:S.Ug,r=S.lc;return H&&(r=s-(eg.current+V.uF)-S.lc),new b.Mi(e,r)})(),initialConstraints:{x:"right",y:H?"top":"bottom"},onClose:eE,recordingKey:er,headerClassName:W.yK,dragHeaderOnly:!0},H?i.createElement(em,{isNewReport:U,taskUrl:$.current,taskGid:Y.current,slackUrl:q.current,title:ed.current,description:ep.current,submissionErrorMessages:eh.current}):i.createElement(eu,{isNewReport:U,selectedView:n,severityOptions:c,productAreaGroups:A,attachFromTask:ew,submitBugReport:eS,onClose:eE,clearForm:()=>{B(!0),y(""),T(""),w(et),v(et),Y.current="",E("")},isSubmitting:j}))},"BugReporterModal")},884812:(e,r,n)=>{"use strict";n.d(r,{l:()=>u});var i=n(411855),a=n(946689),o=n(939863),s=n(662275),l=n(585878),c=n(793712);function d(e){return i.createElement("div",{style:{height:e.height}})}function u(e){let r=e.onHide||(()=>{e.dispatch(s.Lo())});return i.createElement(l.XV,{...e,isCloseHidden:!0},i.createElement(d,{height:18}),e.children&&i.createElement("div",{className:c.Vw},e.children,i.createElement(d,{height:18})),i.createElement(p,{onConfirm:e.onConfirm,onCancel:r,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class p extends i.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return i.createElement("div",{className:this.props.className},i.createElement(a.JU,{className:c.Pf},i.createElement(a.tB,{checked:this.state.checked,onChange:this.onCheck,className:c.kv}),this.props.children),i.createElement("div",{className:c.aV},!this.props.hideCancelButton&&i.createElement(a.tM,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,o.t)("modal.cancel")),this.props.makeButtonAppearNegative?i.createElement(a.qM,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm")):i.createElement(a.vd,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm"))))}}p.displayName="CheckboxConfirmButtons"},443958:(e,r,n)=>{"use strict";n.d(r,{WB:()=>C});var i=n(411855),a=n(188507),o=n(38580),s=n(374626),l=n(946689),c=n(773058),d=n(47506),u=n(939863),p=n(896474),m=n(809840),h=n(662275),_=n(672517),g=n(460187),f=n(665723),E=n(585575),y=n(237870),b=n(526360),I=n(585878),T=n(27858);let v=(e,r)=>{switch(e){case E.M.SRGB:return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case E.M.DISPLAY_P3:switch(r.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let n=r.diagnostics&&"client"in r.diagnostics&&"desktop-app"===r.diagnostics.client?(0,u.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,u.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(r.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in r.diagnostics&&r.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,u.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:n}),type:"warning"};case"MonitorNotSupported":if(r.diagnostics&&"alternativeMonitorName"in r.diagnostics&&r.diagnostics.alternativeMonitorName)return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:r.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},S="user-color-profile",w={srgbOption:`${S}-srgb-option`,p3Option:`${S}-p3-option`,supportDetailsWarningIcon:`${S}-warning-icon`,supportDetailsInfoIcon:`${S}-info-icon`},A=(0,o.eU)(!1),N=(0,y.Ju)(function(){let e=(0,a.wA)(),r=(0,f.jK)(),n=function(e){switch(e){case E.M.DEFAULT:case E.M.SRGB:return E.M.SRGB;case E.M.DISPLAY_P3:return E.M.DISPLAY_P3}}(r.colorProfilePreference),o=v(n,(0,g.Av)()),y=function(e){switch(e){case E.M.SRGB:return(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case E.M.DISPLAY_P3:return(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(n),[S,N]=(0,s.fp)(A);return i.useEffect(()=>(S||N(!0),()=>{S&&((0,d.YQ)({id:"user_color_profile_modal_closed"}),N(!1))}),[N,S]),i.createElement(_.fu,{name:"color_management_user_color_profile_modal"},i.createElement(I.XV,{title:(0,u.t)("fullscreen.color_management.user_color_profile_modal.title"),minWidth:320,maxWidth:320,onClose:()=>{e((0,h.AS)())}},i.createElement("div",{className:T.yl},i.createElement("label",{className:T.fK},i.createElement(m.E,null,(0,u.tx)("fullscreen.color_management.user_color_profile_modal.options.label"))),i.createElement(c.z,{isHorizontal:!0,className:T.R$,value:n,onChange:e=>{(0,f.it)({colorProfilePreference:e,id:r.id})}},i.createElement(c.Z,{className:T.hO,value:E.M.SRGB,dataTestId:w.srgbOption},(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),i.createElement(c.Z,{className:T.hO,value:E.M.DISPLAY_P3,dataTestId:w.p3Option},(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value"))),i.createElement(m.E,{color:"secondary"},y),i.createElement("div",{className:T.jH}),i.createElement(m.E,{color:"secondary"},(0,u.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(l.Ph,{trusted:!0,href:b.s,target:"_blank",className:T.nf},(0,u.tx)("rcs.rcs_shared.learn_more")),i.createElement("div",{className:T.jH}),i.createElement("div",{className:T.yF}),i.createElement("div",{className:T.cd},i.createElement(p.In,{icon:"warning"===o.type?"warning-32":"info-32",dataTestId:"warning"===o.type?w.supportDetailsWarningIcon:w.supportDetailsInfoIcon}),i.createElement("span",null,o.text,"warning"===o.type&&i.createElement(i.Fragment,null,i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(l.Ph,{trusted:!0,href:b.s,target:"_blank",className:T.nf},(0,u.tx)("rcs.rcs_shared.learn_more"))))))))},"user_color_profile_modal");function C(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,r,n)=>{n((0,h.to)({type:N}))}}}},332086:(e,r,n)=>{"use strict";n.d(r,{FF:()=>v,G$:()=>C});var i=n(411855),a=n(188507),o=n(946689),s=n(632923),l=n(939863),c=n(63397),d=n(662275),u=n(931828),p=n(107877),m=n(672517),h=n(143678),_=n(237870),g=n(558867),f=n(195907),E=n(488578),y=n(46526),b=n(10429),I=n(164786);let T={INDIGO:b.S0,VIOLET:b.xl,RED:b.qE,GREEN:b.Ts,GOLD:b.fr};var v=(e=>(e[e.COMMENTS=0]="COMMENTS",e[e.OPT_IN=1]="OPT_IN",e))(v||{});let S=(e,r)=>e.indexOf(r)>-1;function w({user:e,variations:r}){return i.createElement(i.Fragment,null,i.createElement(g.Ro,{className:I.my,entity:e,size:100}),S(r,0)&&i.createElement("div",null,i.createElement(y.eR,{backgroundColor:T.RED,position:{top:"12px",left:"12%",transform:"rotate(-12deg)"}}),i.createElement(y.eR,{backgroundColor:T.INDIGO,position:{top:"-40px",left:"9%",transform:"rotate(60deg)"}}),i.createElement(y.eR,{backgroundColor:T.VIOLET,position:{top:"-10px",left:"27%",transform:"rotate(20deg)"}}),i.createElement(y.eR,{backgroundColor:T.GREEN,position:{top:"-30px",left:"70%",transform:"rotate(30deg)"}}),i.createElement(y.eR,{backgroundColor:T.GOLD,position:{top:"8px",left:"88%",transform:"rotate(-20deg)"}})),i.createElement("h1",{className:I.wx},e?.handle),i.createElement("h2",{className:I.m_},(0,l.tx)("community.onboarding.here_s_how_you_ll_look_when_using_the_figma_community")),i.createElement("h3",{className:I.N4},(0,l.tx)("community.onboarding.change_your_photo_or_name_in_your_settings"),S(r,0)&&i.createElement(i.Fragment,null,i.createElement("br",null),(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you"))))}function A(){return i.createElement(i.Fragment,null,i.createElement("h1",{className:I.wx},(0,l.tx)("community.onboarding.follow_our_guidelines")),i.createElement("h2",{className:I.m_},(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you")))}function N(){return i.createElement("div",{className:I.Il},i.createElement("li",null,i.createElement("div",{className:I.Qk},(0,l.tx)("community.onboarding.stay_on_topic")),i.createElement(y.iF,null)),i.createElement("li",null,i.createElement("div",{className:I.Qk},(0,l.tx)("community.onboarding.be_respectful")),i.createElement(y.B1,null)),i.createElement("li",null,i.createElement("div",{className:I.Qk},(0,l.tx)("community.onboarding.read_our_guidelines",{guidelinesLink:i.createElement("a",{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank"},(0,l.tx)("community.onboarding.guidelines"))})),i.createElement(y.$E,null)))}let C="COMMUNITY_OPT_IN";(0,_.Ju)(function({userId:e,onFinish:r,variations:n}){let _=(0,a.d4)(e=>e.user);e=e||_?.id;let g=(0,a.wA)(),y=()=>{g(d.Ce())},b=()=>{g(u.b({[f.Pn]:!0}))},T=S(n,0)&&1===n.length,v=S(n,0)?1===n.length?I.aq:I.Qc:I.FT;return i.createElement(E.aF,{className:v},i.createElement(m.fu,{name:h.e0.PROFILE_CREATE_MODAL,properties:{action:p.s0.COMMUNITY_OPT_IN,communityHubEntity:p.ZO.USERS,communityHubEntityId:e}},S(n,1)&&_?i.createElement(w,{user:_,variations:n}):i.createElement(A,null),S(n,0)&&i.createElement(N,null),i.createElement(s.Go,{type:"submit",className:I.C5,onClick:()=>{y();let i=S(n,1);i&&(g((0,c.h1)({onSuccess:r})),b()),S(n,0)&&e&&(b(),i||r?.())}},S(n,0)?(0,l.tx)("community.onboarding.got_it"):(0,l.tx)("community.onboarding.looks_good")),!T&&i.createElement(o.tM,{className:I.IK,onClick:y},(0,l.tx)("general.cancel"))))},C)},79190:(e,r,n)=>{"use strict";n.d(r,{OZ:()=>P}),n(625609);var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(126049),c=n(207286),d=n(768137),u=n(799569),p=n(976999),m=n(762638),h=n(47506),_=n(939863),g=n(392592),f=n(175290),E=n(896474),y=n(396147),b=n(662275),I=n(672517),T=n(694687),v=n(99506),S=n(820113),w=n(756704),A=n(679892),N=n(237870),C=n(488578),O=n(452434);function L(e,r){return r(b.Lo()),A.Eh.postDevModeOptInTermsAccepted({orgId:e}).catch(e=>(r(g.F.enqueue({message:(0,_.t)("dev_mode_opt_in.modal.failed_to_agree_to_opt_in"),error:!0})),Promise.reject(e))).then(()=>(0,h.YQ)({id:"dev_mode_opt_in_success_event"}))}function R(){let e=(0,a.wA)();return i.createElement(u.Jn,{onClick:()=>e(b.Lo()),innerText:"Close"})}(0,N.Ju)(function(e){let r=(0,a.wA)(),n=(0,T.sZ)(),o=parseInt(e.emailRequestId??""),s=!Number.isNaN(o);return i.createElement(I.fu,{name:"DevMode Opt-in Page",properties:{org_id:n.id,source:s?"email":"notif"}},i.createElement("div",{className:O.$1},i.createElement(D,{org:n,onAccept:()=>{let e=L(n.id,r);return s&&e.then(()=>{w.w.approveRequests({plan_id:n.id,plan_type:y.ps.ORG,included_request_ids:[o.toString()],selection_method:y.Xv.EMAIL}).catch(e=>(r(g.F.enqueue({message:(0,_.t)("dev_mode_opt_in.modal.upgrade_seats_error",{seatCount:1}),error:!0})),Promise.reject(e))).then(()=>r(g.F.enqueue({message:(0,_.t)("dev_mode_opt_in.modal.upgraded_seats",{seatCount:1}),type:"requests-approved"})))}),e},showNotNow:!1,hasAssociatedSeats:s})),i.createElement("div",{className:O.NX,style:{position:"absolute",top:24,right:24}},i.createElement(R,null)))},"DEV_MODE_OPT_IN_FULL_SCREEN_MODAL");let P=(0,N.Ju)(function(e){let r=(0,a.wA)(),n=(0,T.sZ)();return i.createElement(I.fu,{name:"DevMode Opt-in Modal",properties:{org_id:n.id,source:e.source?e.source:"dashboard"}},i.createElement(C.aF,{className:m.cx.overflowHidden.$,padding:40,size:520},i.createElement(D,{org:n,onAccept:()=>{let i=L(n.id,r);e.onOptInUpgrade&&i.then(()=>e.onOptInUpgrade()),e.onOptInShowModal&&i.then(()=>e.onOptInShowModal())},showNotNow:!0,hasAssociatedSeats:!!e.onOptInUpgrade}),i.createElement("div",{style:{position:"absolute",top:4,right:4}},i.createElement(R,null))))},"DEV_MODE_OPT_IN_PARTIAL_MODAL");function D(e){let r=(0,a.wA)(),n=(0,c.Xf)(e.org.id),o=(0,l.A)(e.onAccept,750,{leading:!0,trailing:!1}),u=i.createElement("a",{className:m.cx.cursorPointer.fontMedium.$,href:"https://help.figma.com/hc/articles/19813618057623",target:"_blank",rel:"noopener noreferrer"},(0,_.t)("dev_mode_opt_in.modal.guide_to_dev_mode_billing")),h=i.createElement("a",{className:m.cx.cursorPointer.fontMedium.$,href:"https://www.figma.com/pricing",target:"_blank",rel:"noopener noreferrer"},"figma.com/pricing"),g=new S.vr(n.data?.currency??"usd"),y=e.org.billing_tier??v.Ag.ORG,T=g.getPricesForOrgPlan(y),w="loaded"===n.status?i.createElement(i.Fragment,null,g.formatMoney(T.dev_mode)):i.createElement(p.Wi,{className:m.cx.h8.w20.inlineBlock.$});return i.createElement("div",{className:O.hQ},i.createElement("div",{className:O.rf},i.createElement("div",{className:O.wx},(0,_.tx)("dev_mode_opt_in.modal.header")),i.createElement("div",{className:s()(O.uI,m.cx.mb24.$)},e.hasAssociatedSeats?(0,_.tx)("dev_mode_opt_in.modal.subheader_with_seats"):(0,_.tx)("dev_mode_opt_in.modal.subheader")),i.createElement("div",{className:O.fZ},i.createElement("div",{className:m.cx.mt16.ml16.mr16.$},i.createElement(f.Y,{width:"fill-parent",spacing:8},i.createElement(E.In,{icon:"file-design-with-devmode-32-file-type"}),i.createElement("span",null,i.createElement("div",{className:O.uI},(0,_.tx)("dev_mode_opt_in.modal.pricing.with_design.main_text")),i.createElement("div",{className:O.Yg},(0,_.tx)("dev_mode_opt_in.modal.pricing.with_design.sub_text"))))),i.createElement("div",{className:O.Ot}),i.createElement("div",{className:m.cx.ml16.mr16.mb16.$},i.createElement(f.Y,{width:"fill-parent",spacing:8},i.createElement(E.In,{icon:"file-devmode-32-file-type"}),i.createElement("span",null,i.createElement("div",{className:O.uI},(0,_.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.main_text")),i.createElement("div",{className:O.Yg},(0,_.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.sub_text")))))),i.createElement("div",{className:O.Yg},i.createElement("div",{className:m.cx.mt24.fontMedium.$},(0,_.tx)("dev_mode_opt_in.modal.description_question")),i.createElement("div",{className:m.cx.mt8.$},(0,_.tx)("dev_mode_opt_in.modal.description_provision",{pricingLink:h,plan:y===v.Ag.ORG?(0,_.t)("dev_mode_opt_in.modal.org"):(0,_.t)("dev_mode_opt_in.modal.ent"),price:w,billingLink:u}))),i.createElement(d.vd,{className:s()(O.x6,m.cx.mt24.$),type:"button",onClick:o},e.hasAssociatedSeats?(0,_.tx)("dev_mode_opt_in.modal.agree_with_seats"):(0,_.tx)("dev_mode_opt_in.modal.agree")),e.showNotNow&&i.createElement(I.jm,{role:"button",className:s()(m.cx.mt8.flex.justifyCenter.$,O.qD),onClick:()=>r(b.Lo())},(0,_.tx)("dev_mode_opt_in.modal.not_now"))))}},765165:(e,r,n)=>{"use strict";n.d(r,{K:()=>u});var i=n(411855),a=n(91408),o=n(153234),s=n(816660),l=n(860168),c=n(550371);let d=(0,a.jz)(l.LdP);function u({allowedResizeDirections:e,onEdgeDoubleClick:r,resizeTo:n,onResizeEnd:a,getCurrentContainerBounds:l,lockAspectRatio:c,isResizing:u,setIsResizing:h,setResizeDirections:_,hidden:g,recordingKey:f,mirrorResizeHorizontally:E=!1}){let{startResizing:y}=function({resizeTo:e,getCurrentContainerBounds:r,isResizing:n,setIsResizing:a,setResizeDirections:l,onResizeEnd:c,lockAspectRatio:u,recordingKey:p,hidden:h,mirrorResizeHorizontally:_=!1}){let g=i.useRef(),f=i.useRef(),E=i.useRef([]),y=i.useRef({x:0,y:0}),[b,I]=i.useState(!1),T=i.useCallback(()=>{I(!1),a(void 0),l([]),E.current=[],c?.()},[I,a,c,l]),v=i.useCallback(({x:r,y:i},a,o)=>{if(!n||!f.current||!e){I(!1);return}if(n&&0===o){T();return}let l=u||a,c={x:r-y.current.x,y:i-y.current.y};c.y=Math.max(c.y,d);let{left:p,top:h,right:g,bottom:E}=m(c,f.current,n,l,_);e({[s.OP.TOP]:h!==f.current.top,[s.OP.BOTTOM]:E!==f.current.bottom,[s.OP.LEFT]:p!==f.current.left,[s.OP.RIGHT]:g!==f.current.right},{left:p,top:h,right:g,bottom:E,lockAspectRatio:l})},[n,u,_,e,T]),S=i.useRef(T);S.current=T,(0,i.useEffect)(()=>()=>{n&&S.current()},[n]);let w=o.rf(p,"mouseup",T),A=o.rf(p,"mousemove",i.useCallback(e=>{if(h)return o.aH;e.stopPropagation(),e.preventDefault();let r={x:e.clientX,y:e.clientY};if(g.current=r,n)v(r,e.shiftKey,e.buttons);else{let e=Object.create(null);E.current.forEach(r=>{e[r]=!0}),l(E.current),a(e)}},[h,n,v,a,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),N=o.v_(p,"keydown",i.useCallback(e=>{e.shiftKey&&g.current&&v(g.current,!0)},[v])),C=o.v_(p,"keyup",i.useCallback(e=>{g.current&&v(g.current,e.shiftKey)},[v]));return(0,i.useEffect)(()=>{if(b)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",w),document.addEventListener("keydown",N),document.addEventListener("keyup",C),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",w),document.removeEventListener("keydown",N),document.removeEventListener("keyup",C)}},[b,A,w,N,C]),{startResizing:i.useCallback((e,n)=>{E.current=e;let i=r();f.current=i;let a={x:e.includes(s.OP.LEFT)?i.left:e.includes(s.OP.RIGHT)?i.right:n.x,y:e.includes(s.OP.TOP)?i.top:e.includes(s.OP.BOTTOM)?i.bottom:n.y};y.current={x:n.x-a.x,y:n.y-a.y},I(!0)},[r,I]),stopResizing:T}}({resizeTo:n,getCurrentContainerBounds:l,onResizeEnd:a,isResizing:u,setIsResizing:h,setResizeDirections:_,lockAspectRatio:c,hidden:g,recordingKey:f,mirrorResizeHorizontally:E});return g?null:i.createElement("div",null,Object.values(s.OP).map((n,a)=>e.includes(n)?i.createElement(p,{key:a,directions:[n],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n)}):null),[s.OP.TOP,s.OP.BOTTOM].map(n=>[s.OP.LEFT,s.OP.RIGHT].map((a,s)=>e.includes(n)&&e.includes(a)?i.createElement(p,{key:s,directions:[n,a],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n,a)}):null)))}class p extends o.o6{constructor(){super(...arguments),this.onMouseDown=e=>o.cZ(this,"mousedown",r=>{r.stopPropagation(),r.preventDefault(),this.props.startResizing(e,{x:r.clientX,y:r.clientY})}),this.onDoubleClick=o.cZ(this,"dblclick",()=>{if(!this.props.onDoubleClick)return o.aH;this.props.onDoubleClick?.()}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case s.OP.TOP:return c.In;case s.OP.BOTTOM:return c.Mo;case s.OP.LEFT:return c.Wg;case s.OP.RIGHT:return c.N2}else if(2===e.length){if(e[0]===s.OP.TOP&&e[1]===s.OP.RIGHT)return c.Mq;if(e[0]===s.OP.TOP&&e[1]===s.OP.LEFT)return c.pg;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.RIGHT)return c.my;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.LEFT)return c.Do}}}render(){return i.createElement("div",{role:"presentation",className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let m=(e,r,n,i,a)=>{let{x:o,y:l}=e,c=n[s.OP.LEFT]?o:r.left,d=n[s.OP.RIGHT]?o:r.right,u=n[s.OP.TOP]?l:r.top,p=n[s.OP.BOTTOM]?l:r.bottom;if(a){let e=(r.left+r.right)/2;n[s.OP.LEFT]?d=e+(e-o):n[s.OP.RIGHT]&&(c=e-(o-e))}if(i){let e=(r.right-r.left)/(r.bottom-r.top-s.uF),i=n[s.OP.LEFT]?r.left-o:o-r.right,a=n[s.OP.TOP]?r.top-l:l-r.bottom,m=n[s.OP.LEFT]||n[s.OP.RIGHT],h=n[s.OP.TOP]||n[s.OP.BOTTOM];if(m&&h){let o,l;let m=i/e;m<a?(o=i,l=m,n[s.OP.TOP]?u=r.top-l:p=r.bottom+l):(o=a*e,l=a,n[s.OP.LEFT]?c=r.left-o:d=r.right+o)}else if(m){let i=n[s.OP.LEFT]?r.left-o:o-r.right;p=r.bottom+i/e}else if(h){let i=n[s.OP.TOP]?r.top-l:l-r.bottom;d=r.right+i*e}}return{left:c,top:u,right:d,bottom:p}}},488578:(e,r,n)=>{"use strict";n.d(r,{Nb:()=>v,Rw:()=>A,aF:()=>S});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(498750),d=n(331757),u=n(153234),p=n(799569),m=n(946689),h=n(493323),_=n(271779),g=n(939863),f=n(896474),E=n(662275),y=n(259927),b=n(672517),I=n(209590),T=(e=>(e.CLICK_OUTSIDE="click_outside",e.PRESS_ESCAPE="press_escape",e))(T||{});function v(e){let r,n;let{useModalViewScroll:a=!0,tintedModalBackground:o=!0,hide:l,disableClickOutsideToHide:u,size:p,alignment:m,absolutePosition:h,padding:_,height:g,maxHeight:f,width:E,title:b,titleClassName:T,className:v,fixedTop:S,backgroundClassName:w,onKeyDown:A,disableKeyboardEventPropagation:N,modalRef:C,onModalClick:O,enableEscapeToClose:L,children:R,animateIn:P,disableFocusTrap:D,noPadding:k}=e;(0,d.h)();let M=i.useCallback(()=>{u||l("click_outside")},[u,l]),F=i.useCallback(e=>{e.stopPropagation()},[]),x=i.useCallback(e=>{O&&O(e)},[O]),U=i.useCallback(e=>{if(e.keyCode===c.Uz.ESCAPE&&(!u||L)){l("press_escape"),e.preventDefault(),e.stopPropagation();return}A&&A(e),N&&(e.nativeEvent.stopImmediatePropagation(),e.stopPropagation())},[u,l,A,N,L]),B=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(B.current.matches(":focus-within")||B.current.focus(),D)return;let e=e=>{e.target.closest('[aria-modal="true"]')||B.current?.focus()};return document.body.addEventListener("focus",e,!0),()=>document.body.removeEventListener("focus",e,!0)},[D]),"number"==typeof p&&(r=p,n=p);let V=s()({[I.JY]:"small"===p,[I.ew]:"fitContent"===p,[I.Gx]:"mobile"===p,[I.R7]:!p||"medium"===p||"number"==typeof p}),G=s()(I.K1,w,y.Dm,{[I.Y0]:o,[I.CY]:S,[I.Xt]:"left"===m,[I.Ir]:"right"===m,[I.L4]:"leftNoPadding"===m}),H=s()(V,v,{[I.yl]:a,[I.Er]:!a,[I.KJ]:!!h,[I.HY]:P,[I.pN]:k}),W={minWidth:r,maxWidth:n,height:g,maxHeight:f,width:E,padding:_,...h?{top:h.top,left:h.left}:{}};return i.createElement("div",{tabIndex:0,className:G,onMouseDown:M,onKeyDown:U,ref:B,"data-testid":"modal-background","aria-modal":"true"},i.createElement("div",{className:H,style:W,onMouseDown:F,onClick:x,ref:C,role:"dialog","data-testid":e["data-testid"]},b&&i.createElement("div",{className:`${I.DD} ${T||""}`},b),R))}function S(e){let r=(0,a.wA)(),{onHide:n,popStack:o}=e,{name:s,properties:c}=(0,b.j6)(),d=c?.fileKey,u=c?.productType,p=i.useCallback(e=>{o?r(E.Lo()):r(E.Ce()),n&&n(),(0,l.sx)("Modal Close",{source:e,trackingContext:s,fileKey:d,productType:u})},[r,d,s,n,o,u]);return i.createElement(v,{...e,hide:p})}let w={playback:()=>({preventDefault:()=>{}})};function A(e){let r=e.recordingKey??"",n=e.destructive??!1,o=e.autoFocusCta??!0,s=(0,a.wA)(),{dontClose:l,popStack:c}=e,d=i.useCallback(()=>{l||(c?s(E.Lo()):s(E.Ce()))},[s,l,c]),{onCloseButtonClick:y}=e,b=i.useCallback(()=>{d(),y?.()},[d,y]),T=(0,u.rf)(r,"click",b),{hideOnConfirm:v,onConfirm:A}=e,N=i.useCallback(e=>{e.preventDefault(),(v??!0)&&d(),A()},[d,v,A]),C=(0,u.qP)(r,"confirm",N,w),{hideOnCancel:O,onCancel:L}=e,R=i.useCallback(e=>{e.preventDefault(),(O??!0)&&d(),L?.()},[d,O,L]),P=(0,u.qP)(r??"","cancel",R,w),D=n?m.qM:m.vd,k=!(e.dontClose||e.hideClose);return i.createElement(S,{size:e.size||"small",...e,className:e.className||I.yl,onHide:e.overrideOnHide??e.onCancel},k&&i.createElement(p.i0,{...e,className:e.closeClass,onClick:T}),i.createElement(_.i,{displayAs:_.C.Block},!e.hideConfirmationTitle&&i.createElement("div",{className:e.titleClass??I.DD},e.confirmationTitle??(0,g.tx)("modal.are_you_sure")),e.children?e.children:i.createElement("div",{className:I.jE},e.content),i.createElement("div",{className:I.v0},i.createElement("div",{className:e.helperTextClass??I._f},e.helperText),!e.hideCancel&&i.createElement(m.tM,{onClick:P,autoFocus:!!o&&n},e.cancelText??(0,g.tx)("modal.cancel")),e.isLoading?i.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:I.LO,disabled:!0,trackingProperties:e.trackedConfirmationProperties||{}},i.createElement(h.kt,{className:e.loadingText?I.FQ:I.u1}),e.loadingText):i.createElement("form",{onSubmit:C},i.createElement(D,{dataTestId:"confirmation-modal-confirm-action-button",tabIndex:0,type:"submit",className:I.pL,disabled:e.disableConfirm,autoFocus:!!o&&!n,trackingProperties:e.trackedConfirmationProperties||{}},e.confirmText))),e.bottomWarningText&&i.createElement("div",{className:I.$$},i.createElement(f.In,{icon:"warning-32"}),e.bottomWarningText)))}},447402:(e,r,n)=>{"use strict";n.d(r,{Lu:()=>A});var i=n(411855),a=n(188507),o=n(587670),s=n(776250),l=n(201888),c=n(737947),d=n(966712),u=n(563706),p=n(153234),m=n(946689),h=n(939863),_=n(738269),g=n(809831),f=n(356390),E=n(239671),y=n(237870),b=n(391297),I=n(488578),T=n(834886),v=n(321112);function S(e,r={}){(0,s.sx)("memory_warning_event",{currentAllocatedBytes:o.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:o.hMR?.getMaxUsedHeapMemory(),...e,...r})}var w=(e=>(e.SHOW_RELOAD="showReload",e.SHOW_RECOVERY_MODE="showRecoveryMode",e.SHOW_BROWSER_UPGRADE="showBrowserUpgrade",e.SHOW_BROWSER_UPGRADE_AND_DESKTOP_DOWNLOAD="showBrowserUpgradeAndDesktop",e))(w||{});let A="memory-warning-modal";function N(e){let r=f.Y5.hasDesktopApp(),n=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),s=(0,a.d4)(e=>e.selectedView),y=(0,g.XE)(s)===E.nT.Design,w=(0,a.d4)(e=>e.openFile?.key)||d.Ay().editing_file?.source_file?.key||"",A=(0,a.wA)(),N={view:"fullscreen",editorType:y?E.nT.Design:E.nT.Whiteboard,fileKey:w,isRecoveryMode:!0},C=o.hMR.getHeapMemoryMode()===o.rCR.RECOVERY,O=n||C?"showReload":u.Ay.isWasm4gbSupported?"showRecoveryMode":r?"showBrowserUpgrade":"showBrowserUpgradeAndDesktop",L={chrome:"https://support.google.com/chrome/answer/95414",safari:"https://support.apple.com/en-us/HT204416",firefox:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release",msedge:"https://support.microsoft.com/en-us/topic/update-to-the-new-microsoft-edge-182d0668-e3f0-49da-b8bb-db5675245dc2"},R=i.createElement(m.CY,{onClick:()=>f.Y5.navigateToURL(u.Ay.mac?"/download/desktop/mac":"/download/desktop/win",o.jkn.NEW_TAB),trusted:!0},(0,h.tx)("memory_warning_modal.desktop_app_download_link")),P="showReload"===O?{title:(0,h.t)("memory_warning_modal.reload_modal_title"),content:(0,h.t)("memory_warning_modal.reload_modal_content"),contentCTA:(0,h.t)("memory_warning_modal.reload_modal_content_cta"),buttonCTA:(0,h.t)("memory_warning_modal.reload_page_button"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showRecoveryMode"===O?{title:(0,h.t)("memory_warning_modal.recovery_mode_modal_title"),content:(0,h.t)("memory_warning_modal.recovery_mode_modal_out_of_memory"),contentCTA:(0,h.t)("memory_warning_modal.recovery_mode_modal_content"),buttonCTA:(0,h.t)("memory_warning_modal.recovery_mode_button"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showBrowserUpgrade"===O?{title:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_open_in_desktop"),buttonCTA:(0,h.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.open_in_desktop"),buttonExternalLink:u.Ay.browserType&&L[u.Ay.browserType]||null,secondaryButtonExternalLink:null}:{title:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:null,buttonCTA:(0,h.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:null,buttonExternalLink:u.Ay.browserType&&L[u.Ay.browserType]||null,secondaryButtonExternalLink:null};return e.isBranching?i.createElement(b.E,null):i.createElement(I.aF,{size:"small",className:v.yl,disableClickOutsideToHide:!0},i.createElement("div",{className:T.GK},P.title),i.createElement("div",{className:T.jE},i.createElement("div",null,P.content,i.createElement("br",null),"\xa0",i.createElement("br",null)),"showBrowserUpgradeAndDesktop"===O?(0,h.tx)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_download_desktop",{desktopAppLink:R}):P.contentCTA,i.createElement("br",null)),i.createElement("div",{className:v.v0},P.secondaryButtonCTA&&i.createElement(m.nR,{recordingKey:p.Pt(e,"crash"),onClick:()=>{P.secondaryButtonCTA===(0,h.t)("memory_warning_modal.learn_more")&&S({warningEvent:"LEARN_MORE",fileKey:w},{isReadOnly:n}),"showBrowserUpgrade"===O&&(0,l.Sr)(location.href,l.B3.OOM_MODAL)}},i.createElement("a",{className:T.Xi,href:P.secondaryButtonExternalLink||void 0,target:"_blank"},P.secondaryButtonCTA)),i.createElement(m.$$,{recordingKey:p.Pt(e,"crash"),className:v.pL,onClick:()=>{P.buttonCTA===(0,h.t)("memory_warning_modal.recovery_mode_button")&&S({warningEvent:"OPEN_RECOVERY_MODE",fileKey:w},{isReadOnly:n}),("showRecoveryMode"===O||n)&&A(_.$T(N)),("showReload"===O||"showRecoveryMode"===O)&&c.Ay.reload("Memory warning panel")}},i.createElement("a",{className:T.Zb,href:P.buttonExternalLink||void 0,target:"_blank"},P.buttonCTA))))}(0,y.qK)(A,e=>{let{isBranching:r}=e.modalShown.data;return i.createElement(N,{isBranching:r})})},63666:(e,r,n)=>{"use strict";n.d(r,{Ay:()=>w,CR:()=>R,NJ:()=>O,OA:()=>L,gm:()=>C,uv:()=>S});var i=n(411855),a=n(534611);n(629019);var o=n(91408),s=n(602126),l=n(860601),c=n(799569),d=n(946689),u=n(101505),p=n(672517),m=n(726864),h=n(168039),_=n(74505),g=n(457630),f=n(746806),E=n(884342),y=n(485861),b=n(860168),I=n(983238),T=n(630834),v=n(304516);let S=(0,o.hG)(b.W8e);function w(e){let r=(0,m.Yk)(),n=(0,g._X)({subscribeToUpdates_expensive:!0}),o=i.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:a.AD}),[s,l]=i.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=i.useMemo(()=>(0,E.P7)(e.pointerType||E.gm.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=i.useCallback(()=>{if(!o.current){l(null);return}let i=(0,g.Yb)(n,o.current.absoluteBounds),a={x:i.x+n.x,y:i.y+n.y,height:i.height,width:i.width};l((0,E.my)({width:e.width,height:e.height,targetRect:a,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:n.y,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.shouldCenterArrow,d,r,e.arrowPosition,n]);return i.useEffect(()=>{let r=(0,_.EE)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{o.current=e.position,u()});return o.current=r.currentNodePosition[e.targetKey]?.position||null,u(),()=>{(0,_.lB)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,u]),(0,y.pc)({location:s,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),s}function A(e,r){switch(e){case f.F_.TOP:case f.F_.BOTTOM:return{left:r};case f.F_.LEFT_TITLE:case f.F_.RIGHT_BODY:return{top:r};case f.F_.RIGHT_TITLE:return{}}}let N={[f.F_.TOP]:{foregroundStyle:I.FQ,backgroundStyle:I.oX},[f.F_.BOTTOM]:{foregroundStyle:I.nW,backgroundStyle:I.a5},[f.F_.LEFT_TITLE]:{foregroundStyle:I.Hn,backgroundStyle:I.gF},[f.F_.RIGHT_TITLE]:{foregroundStyle:I.Ar,backgroundStyle:I.Ny},[f.F_.RIGHT_BODY]:{foregroundStyle:I.Ar,backgroundStyle:I.Ny}};function C(e){let{foregroundStyle:r,backgroundStyle:n}=N[e.arrowPosition],a={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?A(e.arrowPosition,e.arrowOffset):{}},o={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?A(e.arrowPosition,e.arrowOffset):{}};return i.createElement(i.Fragment,null,i.createElement("div",{"aria-hidden":!0,className:n,style:o}),i.createElement("div",{"aria-hidden":!0,className:r,style:a}))}function O(e){let r=(0,E.P7)(E.gm.arrow),n=e.width||r.defaultModalWidth,a=e.backgroundColor,o=e.onVisibilityChange,[s,l]=i.useState(0),d=i.useCallback(e=>{null!==e&&l(e.getBoundingClientRect().height)},[]),u=(e.isCanvasNode?w:y.eP)({targetKey:e.targetKey,height:s,width:n+2*S,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost}),p=!!u;if(i.useEffect(()=>{o&&o(p)},[p,o]),!u)return null;let m={left:u.left,top:u.top,width:n};e.topOffset&&(m.marginTop=e.topOffset),e.leftOffset&&(m.marginLeft=e.leftOffset);let h=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return i.createElement("div",{className:`${e.className||I.Lq} ${e.noAnimation?I.gh:""}`,style:{...m,...h},ref:d,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,role:"none"},i.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&i.createElement(C,{arrowPosition:u.pointerPosition,arrowOffset:u.pointerOffset,modalColor:a}),e.shouldNotWrapInParagraphTag?e.children:i.createElement("p",null,e.children),e.dismissModal&&i.createElement(c.Jn,{useOriginalSrcFills_DEPRECATED:!0,className:I.b,onClick:e.dismissModal,innerText:"close",svg:v.A})))}function L(e){let{arrowPosition:r}=e,n=(0,E.P7)(E.gm.arrow),a=e.width||n.defaultModalWidth,o=e.backgroundColor,s="dark"===(0,h.DP)(),l="light"===e.background,[u,m]=i.useState(0),_=i.useCallback(e=>{null!==e&&m(e.getBoundingClientRect().height)},[]),g=(0,y.eP)({targetKey:e.targetKey,height:u,width:a+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...r&&{arrowPosition:r}});if(!g&&!e.shouldCenterModal)return null;let f=l&&!s,b=i.createElement(c.Jn,{useOriginalSrcFills_DEPRECATED:!0,className:`${I._S} ${!f&&e.isUI3?I.uS:""}`,onClick:e.dismissModal,innerText:"close",svg:f?T.default:v.A}),w=i.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&i.createElement("div",{className:I.ZA},e.bottomLeftText&&i.createElement("b",null,e.bottomLeftText),i.createElement("div",{className:I.OQ},e.secondaryCtaText&&e.onClickSecondaryCta&&i.createElement(p.$z,{className:l?I.jS:I.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&i.createElement(d.vd,{className:l?I.TI:I.ZO,onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),A={backgroundColor:o,width:a,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},N=g?{left:g.left,top:g.top}:{left:0,right:0,top:0,bottom:0};return i.createElement("div",{className:l?I.IL:I.wV,ref:_,style:{...A,...N}},i.createElement("div",null,g&&i.createElement(C,{arrowPosition:g.pointerPosition,arrowOffset:g.pointerOffset,modalColor:l?"var(--color-bg)":void 0}),i.createElement("h1",null,e.title),e.children,b),w)}let R=i.forwardRef(function(e,r){let[n,a]=i.useState(0),o=i.useCallback(e=>{null!==e&&a(e.getBoundingClientRect().height),null!=r&&(r.current=e)},[r]),d=i.useRef(null),p=e.disableClickOutsideToHide?l.lQ:e.dismissModal;(0,s.ww)(d,p);let m=i.useRef(null),h=(0,y.eP)({targetKey:e.targetKey,height:e.passHeightForLocation?e.height?e.height:0:n,width:e.width+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});i.useEffect(()=>{h&&(m.current=h)},[h]);let _=h||m.current,g=e.hideIfTargetLost&&null==h;if(!_||g||e.hideModal||e.shouldDismissWhenLostDOMTarget&&!h)return null;let f=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",E=e.pointerForegroundColor||"var(--color-bg, white)",b={left:_.left,top:_.top,width:e.width};e.height&&(b.height=e.height);let w=e.animateQuickly?I.B9:I.w0,A=e.pointerPaddingOffset??0;return i.createElement("div",{ref:d},i.createElement("div",{className:e.className?`${e.className}`:w,style:b,ref:o,"data-testid":"walkThroughModal"},!e.hidePointer&&i.createElement(C,{arrowPosition:_.pointerPosition,arrowOffset:_.pointerOffset+A,modalColor:E,pointerBorderColor:f,pointerBorder:!0}),e.children,!e.hideCloseButton&&i.createElement(c.Jn,{className:`${I.b} ${e.closeButtonClassName||""} ${e.useWhiteCloseButton?I.uS:""} `,onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close",svg:e.useWhiteCloseButton?v.A:T.default,trackingProperties:{trackingDescriptor:u.c.CLOSE_BUTTON}})))})},66154:(e,r,n)=>{"use strict";n.d(r,{$v:()=>u});var i=n(411855);n(188507),n(587670);var a=n(498480);n(574176);var o=n(762638),s=n(939863);n(293017),n(99506),n(243987),n(397065),n(279145);var l=n(746806),c=n(252092);function d(){return i.createElement(a.Ex,{color:a.zE.DEFAULT,text:(0,s.t)("pro_onboarding.professional"),className:o.cx.colorTextBrand.colorBgSelectedSecondary.font11.$})}function u({dismissModal:e}){let r="share-prototype";return i.createElement(c.Pp,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:l.F_.TOP,title:(0,s.t)("pro_onboarding.prototpye_only_links"),subtitle:(0,s.t)("pro_onboarding.on_your_professional_plan_you_can_share_prototypes"),width:300,badge:i.createElement(d,null)})}n(2882),n(601538)},524513:(e,r,n)=>{"use strict";n.d(r,{yU:()=>N});var i=n(411855),a=n(109388),o=n(188507),s=n(587670),l=n(629019),c=n.n(l),d=n(776250),u=n(498750),p=n(153234),m=n(799569),h=n(946689),_=n(271779),g=n(939863),f=n(662275),E=n(188276),y=n(761771),b=n(226055),I=n(335682),T=n(694517),v=n(237870),S=n(585878),w=n(488578),A=n(173653);let N="savepoint-modal";(0,v.qK)(N,e=>{let r=e.modalShown,n=r.data&&r.data.description||"",a=r.data&&r.data.label||"",o=r.data&&r.data.savepointID,l=r.data&&r.data.isEditingMergeSavepoint||!1,c=(0,b.GS)(),d=!e.openFile.canEdit;return i.createElement(O,{recordingKey:"savepointModal",fileKey:e.openFile.key,isHistoryMode:e.mirror.appModel.topLevelMode===s.lyf.HISTORY,editorType:e.openFile.editorType,editingSavepointID:o,label:a,dispatch:e.dispatch,description:n,isViewOnly:d,isEditingMergeSavepoint:l,isUI3:c})});let C=class e extends p.uA{constructor(r){super(r),this.onConfirmSavepointModal=(e,r)=>{let n=e||"",i=r||"";this.props.editingSavepointID&&this.props.fileKey?(this.props.dispatch(E.D({fileKey:this.props.fileKey,savepointID:this.props.editingSavepointID,label:n,description:i})),this.hideModal(),(0,d.sx)("History Version Edited Information",{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:i.length})):n.length>0&&this.props.fileKey&&(this.props.dispatch(y.m({fileKey:this.props.fileKey,label:n,description:i})),this.hideModal(),(0,d.sx)(`History Version Created from ${this.props.isHistoryMode?"History Mode":"Keyboard Shortcut"}`,{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:i.length})),this.clearSavedInputs()},this.onKeyDownMulti=e=>{e.keyCode===u.Uz.ENTER&&(e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),this.hideModal(),this.onConfirmSavepointModal(this.state.label,this.state.description))},this.hideModal=()=>{this.props.dispatch(f.Ce())},this.onSubmit=p.P_(this,"submit",e=>{e.preventDefault(),this.onConfirmSavepointModal(this.state.label,this.state.description)}),this.onCancel=()=>{this.clearSavedInputs(),this.hideModal()},this.saveHistoryInputs=()=>{e.keepSavepointModalInput=!0,e.savedLabelInput=this.state.label,e.savedDescriptionInput=this.state.description},this.clearSavedInputs=()=>{e.keepSavepointModalInput=!1,e.savedLabelInput="",e.savedDescriptionInput=""},this.focusRef=e=>{e&&a.findDOMNode(e).focus()},this.onLabelChange=e=>{let r=e.target.value;this.setState({label:r})},this.onLabelBlur=e=>{this.onLabelChange(e)},this.onDescriptionChange=e=>{let r=e.target.value;this.setState({description:r})},this.onDescriptionBlur=e=>{this.onDescriptionChange(e)},this.goHistoryMode=()=>{this.props.isHistoryMode||(this.props.dispatch((0,T._b)()),this.saveHistoryInputs(),this.hideModal())},this.state={label:"",description:"",disableConfirm:!this.props.isLabelReadOnly}}setLabelAndDescriptionFromProps(r){this.state.label.length<1&&this.state.description.length<1&&(e.keepSavepointModalInput?this.setState({label:e.savedLabelInput,description:e.savedDescriptionInput}):this.setState({label:this.props.label,description:this.props.description}))}componentDidMount(){this.setLabelAndDescriptionFromProps(this.props),super.componentDidMount()}UNSAFE_componentWillReceiveProps(e){this.setLabelAndDescriptionFromProps(e)}render(){if(this.props.isViewOnly)return null;let e=this.state.disableConfirm;this.state.label&&this.state.label.length>0&&(e=!1);let r=(0,g.tx)("collaboration.feedback.save_modal.save"),n=(0,g.tx)("collaboration.feedback.save_modal.cancel"),a=this.props.editingSavepointID?this.props.isEditingMergeSavepoint?(0,g.tx)("collaboration.feedback.save_modal.edit_merge_details"):(0,g.tx)("collaboration.feedback.save_modal.edit_version_information"):(0,g.tx)("collaboration.feedback.save_modal.add_to_version_history"),o=i.createElement(_.i,{displayAs:_.C.Block},i.createElement("form",{onSubmit:this.onSubmit},i.createElement("div",{className:this.props.isUI3?A.nr:void 0},i.createElement("div",{className:A.uW},this.props.isEditingMergeSavepoint&&i.createElement("div",{className:A.VA},(0,g.tx)("collaboration.feedback.save_modal.merge_name_placeholder")),i.createElement(h.ks,{className:c()([A.NB,{[A.pR]:this.props.isLabelReadOnly}]),type:"input",name:"label",value:this.state.label,placeholder:(0,g.t)("fullscreen.savepoint_modal.title"),onChange:this.onLabelChange,onBlur:this.onLabelBlur,onKeyDown:this.onKeyDownMulti,autoFocus:!0,recordingKey:p.Pt(this.props,"title"),disabled:this.props.isLabelReadOnly})),i.createElement("div",{className:this.props.isUI3?void 0:A.uW},this.props.isEditingMergeSavepoint&&i.createElement("div",{className:A.VA},(0,g.tx)("fullscreen.savepoint_modal.give_this_merge_a_description")),i.createElement(h.ks,{className:A.tV,type:"textarea",name:"description",value:this.state.description,placeholder:(0,g.t)("collaboration.feedback.save_modal.description_placeholder"),onChange:this.onDescriptionChange,onBlur:this.onDescriptionBlur,onKeyDown:this.onKeyDownMulti,recordingKey:p.Pt(this.props,"description")}))),i.createElement("div",{className:this.props.isHistoryMode?A.$8:A.v0},!this.props.isHistoryMode&&i.createElement("div",{className:A.RW,onClick:this.goHistoryMode},(0,g.tx)("fullscreen.savepoint_modal.show_full_version_history")),i.createElement(h.e2,{reversed:!0},i.createElement(h.$$,{type:"submit",className:A.pL,disabled:e},r),i.createElement(h.nR,{type:"button",className:A.Lu,onClick:this.onCancel},n)))));return this.props.isUI3?i.createElement(S.XV,{title:a,onClose:this.hideModal},i.createElement("div",{className:A.yl},o)):i.createElement(w.aF,{size:"small",...this.props,className:A.yl},i.createElement(m.s_,{...this.props}),i.createElement("div",{className:A.DD},a),o)}};C.displayName="SavepointModal",C.keepSavepointModalInput=!1,C.savedLabelInput="",C.savedDescriptionInput="";let O=C;(0,v.Ju)(function({savepointID:e,label:r,description:n}){let a=(0,I.q5)(),s=(0,o.wA)(),l=(0,b.GS)();return a?i.createElement(O,{recordingKey:"savepointModal",fileKey:a.key,isHistoryMode:!0,editorType:a.editorType,editingSavepointID:e,label:r??"",dispatch:s,description:n??"",isViewOnly:!a.canEdit,isUI3:l,isLabelReadOnly:!0}):null},"DevModeSavepointModal")},161394:(e,r,n)=>{"use strict";n.d(r,{Q:()=>h});var i=n(411855),a=n(587670),o=n(776250);n(794272);var s=n(946689),l=n(493323),c=n(939863);n(100197);var d=n(237870),u=n(488578),p=n(456893),m=n(321112);let h="upgrading-modal";(0,d.qK)(h,e=>i.createElement(_,{upgradingState:e.modalShown.data.upgradingState,dispatch:e.dispatch}));class _ extends i.Component{render(){let e=this.props.upgradingState===a.kul.UPGRADING?(0,c.t)("multiplayer_upgrade_modal.content_saving"):(0,c.t)("multiplayer_upgrade_modal.content_reloading");return i.createElement(u.aF,{size:"small",className:m.yl,disableClickOutsideToHide:!0},i.createElement("div",{className:m.DD},(0,c.tx)("multiplayer_upgrade_modal.title")),i.createElement(p.B,null),i.createElement("div",{className:m.jE},e),i.createElement("div",{className:m.v0},i.createElement(l.kt,null)))}}_.displayName="UpgradingModal";class g extends i.Component{constructor(){super(...arguments),this.noOp=e=>e,this.onUpdateClicked=()=>{(0,o.sx)("Upgrade Modal Clicked"),a.h3O.startUpgrade()}}render(){let{multiplayerSessionState:e,isReadOnly:r}=this.props,n=e!==a.kul.UNJOINED;return e===a.kul.UPGRADING||e===a.kul.WAITING_FOR_RELOAD?null:i.createElement(u.aF,{size:"small",className:m.yl,disableClickOutsideToHide:!0},i.createElement("div",{className:m.DD},(0,c.tx)("multiplayer_upgrade_modal.title")),i.createElement("div",{className:m.jE},(0,c.tx)("multiplayer_upgrade_modal.content"),!n&&i.createElement("span",null,i.createElement("br",null),"\xa0",i.createElement("br",null),(0,c.tx)("multiplayer_upgrade_modal.content_offline"))),n&&i.createElement("div",{className:m.v0},i.createElement(s.$$,{onClick:this.onUpdateClicked},r?(0,c.tx)("multiplayer_upgrade_modal.reload_button"):(0,c.tx)("multiplayer_upgrade_modal.save_and_reload_button"))))}}g.displayName="OutOfDateWall"},299410:(e,r,n)=>{"use strict";n.d(r,{J4:()=>P,YU:()=>U,Kd:()=>V,Iz:()=>B,_9:()=>D,lG:()=>F,fb:()=>k,p8:()=>M,mi:()=>H,ET:()=>G});var i=n(411855),a=n(188507),o=n(302586),s=n(240624),l=n(918152),c=n(790484),d=n(137035),u=n(966712),p=n(773058),m=n(46481),h=n(939863),_=n(226055),g=n(318812),f=n(99506),E=n(239671),y=n(851363),b=n(498606),I=n(231959),T=n(558867),v=n(538697);let S="audience_selector--iconContainer--W80mw",w="audience_selector--radioText--OD-3K",A="audience_selector--radioOption--4NDFa",N="audience_selector--radioSubtitle--g3Mry",C="audience_selector--blackIcon--PM3f-";var O=n(585101),L=n(535011),R=n(204702),P=(e=>(e.VIEW="view",e.EDIT="edit",e))(P||{}),D=(e=>(e.ANYONE="anyone",e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.FOLDER="folder",e.INVITE_ONLY="invite_only",e))(D||{});let k={[f.PQ.EDIT]:{shareAudience:"anyone",audienceAccessLevel:"edit"},[f.PQ.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[f.PQ.ORG_EDIT]:{shareAudience:"org",audienceAccessLevel:"edit"},[f.PQ.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[f.PQ.WORKSPACE_VIEW]:{shareAudience:"workspace",audienceAccessLevel:"view"},[f.PQ.WORKSPACE_EDIT]:{shareAudience:"workspace",audienceAccessLevel:"edit"},[f.PQ.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null},[f.PQ.INVITE_ONLY]:{shareAudience:"invite_only",audienceAccessLevel:null}},M={[f.Pu.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[f.Pu.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[f.Pu.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null}};function F(e,r){return"anyone"===e?"edit"===r?f.PQ.EDIT:f.PQ.VIEW:"org"===e?"edit"===r?f.PQ.ORG_EDIT:f.PQ.ORG_VIEW:f.PQ.INVITE_ONLY}let x=(e,r)=>{if("anyone"===e){if("anyone"!==r)return!1}else if("org"===e&&"invite_only"===r)return!1;return!0};function U(e){let r=(0,a.wA)(),n={[f.vt.TEAM]:["invite_only"],[f.vt.FOLDER]:["invite_only"],[f.vt.FILE]:["anyone","invite_only"],[f.vt.FILE_REPO]:["anyone","invite_only"]}[e.resourceType],p=null;e.org&&(e.workspace&&e.workspace.id!==I.O&&n.splice(1,0,"workspace"),n.splice(1,0,"org")),e.isPrototype&&(n=n.filter(r=>x(e.fileShareAudience,r)),"anyone"===e.fileShareAudience&&1===n.length&&"anyone"===n[0]&&(p=(0,h.t)("permissions.audience_selector.can_only_be_adjusted_in_the_main_file")));let y=(0,g.Um)(),w={anyone:(0,h.t)("permissions.audience_selector.anyone"),workspace:e.workspace?.name||"",org:e.org?.name||"",team:e.team?.name||"",folder:"",invite_only:(0,h.t)("permissions.audience_selector.only_invited_people")},A=(0,_.GS)(),N={anyone:i.createElement("div",{className:S},i.createElement(m.U,{svg:L.A,className:C},i.createElement(o.Y,null))),workspace:e.workspace&&i.createElement("div",{className:S},A?i.createElement(s.w,null):i.createElement(T.z6,{entity:e.workspace,size:16})),org:e.org&&i.createElement("div",{className:S},A?i.createElement(l.Y,null):i.createElement(m.U,{svg:R.A,className:C},i.createElement(l.Y,null))),team:e.team&&i.createElement("div",{className:S},i.createElement(T.Ro,{entity:{id:e.team.id,imgUrl:e.team.img_url,name:e.team.name},hideFallbackInitial:!1,size:16})),folder:i.createElement(i.Fragment,null),invite_only:i.createElement("div",{className:S},i.createElement(m.U,{svg:O.A,className:C},i.createElement(c.c,null)))},P=i.useCallback(()=>{let r={[f.vt.TEAM]:(0,h.t)("permissions.audience_selector.team_resource_name"),[f.vt.FOLDER]:(0,h.t)("permissions.audience_selector.project_resource_name"),[f.vt.FILE]:(0,h.t)("permissions.audience_selector.file_resource_name"),[f.vt.FILE_REPO]:(0,h.t)("permissions.audience_selector.file_resource_name")};return e.isPrototype?e.editorType===E.nT.Slides&&(0,u.kc)().slides_paywall_string?(0,h.t)("permissions.audience_selector.presentation_resource_name"):(0,h.t)("permissions.audience_selector.prototype_resource_name"):r[e.resourceType]},[e.isPrototype,e.resourceType,e.editorType]),D=i.useMemo(()=>{let r=P();switch(e.value){case"anyone":return e.editorType===E.nT.Slides?(0,h.t)("permissions.audience_selector.anyone_even_outside_your_org_can_access_this_resource",{resourceName:r}):(0,h.t)("permissions.audience_selector.anyone_even_those_outside_your_org_can_access_this_resource",{resourceName:r});case"org":if(e.searchable)return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});return(0,h.t)("permissions.audience_selector.audience_can_access_through_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});case"workspace":return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.workspace_members")});case"team":case"folder":return(0,h.t)("permissions.audience_selector.can_access_through_search_file_browser_link");case"invite_only":return(0,h.t)("permissions.audience_selector.only_people_you_directly_invited_can_access",{resourceName:r})}},[e.value,e.searchable,e.editorType,P]);return i.createElement("div",{"data-testid":"create-team-modal-audience-selector"},i.createElement(v.l6,{id:"create-team-modal-audience-selector",property:e.value,formatter:{format:e=>w[e]},onChange:e.onChange,dispatch:r,dropdownShown:y,className:"audience_selector--dropdownSelector--eEAHQ select--selectInputExpanded--Lz6m4",inputClassName:"audience_selector--dropdownSelectorTitle---y7CH",icon:N[e.value],dropdownClassName:"audience_selector--dropdownContainer--Xyoak",openBelowTarget:!A,focusedOption:n[0],disabled:!!p||e.disabled,rightIcon:p?i.createElement(d.b,{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":p}):void 0,iconClassName:"audience_selector--dropdownSvg--VPhRA"},n.map(r=>i.createElement(v.c$,{value:r,key:r,height:28,icon:N[r],dataTestId:`audience-option-${r}`,rightCheck:!0,disabled:"anyone"===r&&e.publicLinksBanned},w[r]))),i.createElement("div",{className:"audience_selector--subtitle--MIXKn text--fontPos11--2LvXf text--_fontBase--QdLsd"},D))}function B(e){return i.createElement(i.Fragment,null,i.createElement(p.z,{value:e.selectedPermissionsLevel,onChange:e.setSelectedPermissionsLevel,isHorizontal:!0,dataTestId:"permissions-level-radio-group"},i.createElement(p.Z,{key:"view-only",value:"view",className:A,disabled:e.disabled},i.createElement("p",{className:w},(0,h.tx)("team_creation.view"))),i.createElement(p.Z,{key:"edit",value:"edit",className:A,disabled:e.disabled||e.disableEdit},i.createElement("p",{className:w},e.teamCanAccess?(0,h.tx)("permissions.level_name_capitalized.can_access"):(0,h.tx)("team_creation.edit")))))}function V(e){return i.createElement(i.Fragment,null,i.createElement(p.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},i.createElement(p.Z,{key:"org_browsable",value:y.Fb.ORG_BROWSABLE,className:A},i.createElement("p",{className:w},(0,h.tx)("team_creation.visible"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team")),i.createElement(p.Z,{key:"hidden",value:y.Fb.HIDDEN,className:A},i.createElement("p",{className:w},(0,h.tx)("team_creation.hidden"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.only_team_members_can_find_and_access"))))}function G(e,r,n,a){return e===f.PQ.EDIT||e===f.PQ.VIEW?a?(0,h.tx)("file_audience_row.anyone_with_password"):(0,h.tx)("permissions.anyone"):e===f.PQ.ORG_EDIT||e===f.PQ.ORG_VIEW?r&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:r.name}):e===f.PQ.WORKSPACE_EDIT||e===f.PQ.WORKSPACE_VIEW?n&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:n.name}):e===f.PQ.INVITE_ONLY||e===f.PQ.INHERIT?(0,h.tx)("permissions.only_those_invited"):i.createElement(i.Fragment,null)}function H(e){return e===f.PQ.EDIT||e===f.PQ.ORG_EDIT||e===f.PQ.WORKSPACE_EDIT?(0,h.tx)("file_access_row.can_edit"):e===f.PQ.VIEW||e===f.PQ.ORG_VIEW||e===f.PQ.WORKSPACE_VIEW?(0,h.tx)("file_access_row.can_view"):void 0}},717156:(e,r,n)=>{"use strict";n.d(r,{mK:()=>f,ox:()=>g});var i=n(411855),a=n(188507),o=n(181912),s=n(27087),l=n(47506),c=n(662275),d=n(877645),u=n(860178),p=n(963719),m=n(971646);function h(e){s.Ay.put(`/api/files/${e}/expire_public_link`)}let _=(e,r)=>{let n=i.useRef(null);i.useEffect(()=>{let i=e?(0,o.A)(e).diff((0,o.A)()):void 0;return void 0!==i&&i<2147483647?(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,r()},i)):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&clearTimeout(n.current)}},[e,r])};function g(e){let r=(0,u.iZ)(),n=(0,a.wA)(),{file:o,onCanvasExpired:s}=e,m=o?.key,g=(0,d.v)(e.file),f=i.useRef(void 0),E=g?.activeExpiration,y=g?.file,b=y?.hasViewPrototypeRole,I=g?.accessReverted;i.useEffect(()=>{b&&I&&!f.current?.accessReverted&&g.expiresAt&&g.expiresAt===f.current?.expiresAt&&(0,l.YQ)({id:"link_expired_event"}),f.current=g},[g,I,b]),_(E,i.useCallback(()=>{m&&(b&&r||(n(c.to({type:p.J})),s?.()),h(m))},[n,s,m,r,b]))}function f(e,r){_(m.d4(r)?.toISOString(),i.useCallback(()=>{h(e)},[e]))}},2882:(e,r,n)=>{"use strict";n.d(r,{nu:()=>Z});var i=n(411855),a=n(790484),o=n(302586),s=n(348136),l=n(240624),c=n(339502),d=n(918152),u=n(897379),p=n(841563),m=n.n(p),h=n(860601),_=n(96328),g=n(946689),f=n(439729),E=n(574176),y=n(46481),b=n(939863),I=n(662275),T=n(27703),v=n(99506),S=n(243987),w=n(837502),A=n(239671),N=n(802026),C=n(498606),O=n(791929),L=n(140830),R=n(723856),P=n(614210),D=n(971646),k=n(303159),M=n(490800),F=n(515471),x=n(234269),U=n(109361),B=n(547008),V=n(54375),G=n(358617),H=n(767069),W=n(750652),K=n(353252),j=n(650063),z=n(658891),Y=n(168379),$=n(153529);let q="file-share-level-select-key";class Z extends i.PureComponent{constructor(){super(...arguments),this.state={descriptionModeExpanded:!1,unsavedDropdownValues:null,isLinkExpirationInputDisplayed:!!this.getExpiration()||(0,w.Q3)(this.props.sharedOrgLicenseGroupSetting),publicLinkDisplayState:M.im.VIEW},this.onCollapseDescription=()=>{this.setState({descriptionModeExpanded:!1})},this.onExpandDescription=()=>{this.setState({descriptionModeExpanded:!0})},this.onUpdateUnsavedDropdownValues=e=>{this.setState({unsavedDropdownValues:e})},this.onUpdatePublicLinkDisplayStatus=e=>{this.setState({publicLinkDisplayState:e})},this.onResetProperties=()=>{this.setState({unsavedDropdownValues:null,publicLinkDisplayState:M.im.VIEW})},this.onDropdownValuesChange=e=>{let r={},n=this.state.unsavedDropdownValues||(0,R.vp)(this.props.permissions),{filePayload:i,transformedValues:a}=(0,R.YW)(n,e,this.props.team,this.props.org,this.props.isFreeUserOnly,this.props.isInDraftsFolder,(0,A.oD)(this.props.editorType)),o=(0,R.LW)(a),s=(0,w.Q3)(this.props.sharedOrgLicenseGroupSetting),l=(0,R.jm)(this.props.mainFileLinkExpirationConfig),c=s&&o&&!this.props.isBranch&&!l||s&&o&&!this.props.isBranch&&l&&n.audience!==e.audience||(0,M.Xl)(this.state.publicLinkDisplayState)&&n.audience===a.audience&&o;if("public-password"!==n.audience&&"public-password"===a.audience){if(this.props.team&&!this.props.org&&!(0,S.w5)(this.props.team)){(0,R.$M)(this.props.dispatch,this.props.editorType,this.props.team);return}(()=>{this.setState({unsavedDropdownValues:a,publicLinkDisplayState:s?M.im.EDIT_PWD_AND_EXP:M.im.EDIT_PWD,isLinkExpirationInputDisplayed:!1})})();return}if("public-password"===n.audience&&"public-password"!==a.audience&&Object.assign(r,{publicLinkDisplayState:M.im.VIEW,unsavedDropdownValues:null}),o&&(!(0,R.LW)(n)||n.audience!==e.audience)&&(s&&!this.props.isBranch||this.props.isBranch&&this.getExpiration())&&Object.assign(r,{isLinkExpirationInputDisplayed:!0,publicLinkDisplayState:this.props.isBranch?M.im.VIEW:M.im.EDIT_EXP}),"edit"===n.level&&"edit"!==a.level&&!this.props.hasEditRole&&!this.props.isOwner){let e=this.props.modalShown;this.props.dispatch(I.to({type:O.z,data:{onConfirm:()=>{e&&this.props.dispatch(I.to(e)),c?this.onUpdateUnsavedDropdownValues(a):this.props.onUpdate(i)},onCancel:()=>{e&&this.props.dispatch(I.to(e))}}}));return}if(!this.props.isBranch&&this.props.containingRepo&&function(e,r){if(!r.has_active_branches)return!1;switch(e){case"inherit":return!0;case"org":case"org-browsable":if(r.link_access===v.PQ.VIEW||r.link_access===v.PQ.EDIT)return!0;return!1;default:return!1}}(e.audience,this.props.containingRepo)){this.props.dispatch(I.to({type:L.j,data:{repoId:this.props.containingRepo.id,onConfirm:()=>{this.props.onUpdate(i)}}}));return}o||c||Object.assign(r,{publicLinkDisplayState:M.im.VIEW,unsavedDropdownValues:null}),c?Object.assign(r,{unsavedDropdownValues:a}):(this.props.onUpdate(i),Object.assign(r,{unsavedDropdownValues:null})),this.setState(r)}}componentDidUpdate(e){let r={};m()(this.getAccessPermissions(this.props.permissions),this.getAccessPermissions(e.permissions))||(0,R.og)(this.props.permissions)||Object.assign(r,{unsavedDropdownValues:null}),m()(this.getExpiration(),(0,D.d4)(e.mainFileLinkExpirationConfig))||Object.assign(r,{isLinkExpirationInputDisplayed:!!this.getExpiration()||(0,w.Q3)(this.props.sharedOrgLicenseGroupSetting)}),this.setState(r)}getAccessPermissions(e){return{has_file_link_password:e.has_file_link_password,has_proto_link_password:e.has_proto_link_password,link_access:e.link_access,proto_link_access:e.proto_link_access,org_browsable:e.org_browsable}}getExpiration(){return(0,D.d4)(this.props.mainFileLinkExpirationConfig)}shouldShowDescription(){let e=this.props.org,r=this.state.unsavedDropdownValues||(0,R.vp)(this.props.permissions);return e&&!e.domain_capture&&(0,R.KP)(r)&&this.props.orgUser?.permission!==v._D.GUEST}renderDescription(){if(!this.props.permissions||!this.props.org||!this.props.orgDomains||this.props.orgDomains.domains.length<=0)return i.createElement("div",null);let e=this.props.orgDomains.domains.map(e=>e.domain),r=this.props.org.name;if(this.state.descriptionModeExpanded)return i.createElement("div",null,i.createElement("p",{className:F.VP},(0,b.tx)("file_access_row.org_name_members_have_emails_at_emails_list_show_less",{orgName:r,emailsList:i.createElement(f.T,null,e.map(e=>i.createElement("span",{key:e},e))),showLess:i.createElement(g.CY,{onClick:this.onCollapseDescription,trusted:!0},(0,b.tx)("file_access_row.show_less"))})));{let n=e[0],a=e.length-1;return i.createElement("p",{className:F.VP},(0,b.tx)("file_access_row.orgname_members_have_emails_at_first_domain_plus_others",{domainCount:e.length,orgName:r,firstDomain:n,remainingDomainCountLink:i.createElement(g.CY,{onClick:this.onExpandDescription,trusted:!0},(0,b.tx)("file_access_row.remaining_domain_count_more",{remainingDomainCount:a}))}))}}render(){let e=this.state.unsavedDropdownValues||(0,R.vp)(this.props.permissions),{passwordSetAt:r,passwordSetByUser:n,hideLinkAccessInfo:a,mainFileLinkExpirationConfig:o}=this.props,s="inherit"===e.audience,l=B.A;s?l=H.A:"public-password"===e.audience?l=z.A:"public"===e.audience?l=U.A:"org"===e.audience?l=Y.A:"org-browsable"===e.audience&&(l=K.A),this.props.inWorkshop&&"public-password"!==e.audience&&(l=U.A);let c=!!e.publicProto||!this.shouldShowDescription();return i.createElement(i.Fragment,null,i.createElement("div",{"data-onboarding-key":"file-access-row"},i.createElement("div",{className:F.xf},!this.props.isUI3&&i.createElement(E.B,{className:F.wk,svg:l}),i.createElement("div",{className:F.$S},!a&&i.createElement(et,{...this.props,ui3Icon:this.props.isUI3?i.createElement(en,{audience:e.audience,isSelected:!0}):void 0,dropdownValues:e,onDropdownValuesChange:this.onDropdownValuesChange}),a&&i.createElement(i.Fragment,null,(0,b.tx)("file_access_row.only_editors_can_invite_people_to_this_file.seat_rename")))),i.createElement(P.e,{isPasswordProtected:(0,R.og)(this.props.permissions),passwordSetAt:r,passwordSetByUser:n||null,expirationSetByUser:o?o.setByUser:null,onResetProperties:this.onResetProperties,dropdownValues:e,displayState:this.state.publicLinkDisplayState,currentExpiration:this.getExpiration(),shouldShowDescription:this.shouldShowDescription(),renderDescription:this.renderDescription.bind(this),onDropdownValuesChange:this.onDropdownValuesChange,onUpdateDisplayStatus:this.onUpdatePublicLinkDisplayStatus,...this.props}),c&&i.createElement("div",null)))}}function X(e){let{has_file_link_password:r,has_proto_link_password:n}=e;return!!r||!!n}function J(e,r){switch(e){case"public":if(r.link_access!==v.PQ.VIEW&&r.link_access!==v.PQ.EDIT||X(r))return!0;return!1;case"org":case"org-browsable":if(r.link_access===v.PQ.INHERIT||X(r))return!0;return!1;default:return!1}}class Q extends i.PureComponent{constructor(){super(...arguments),this.FILE_LINK_AUDIENCE_DROPDOWN="file-link-audience-dropdown",this.onAudienceChange=e=>{let r={...this.props.dropdownValues,audience:e};(0,R.KP)(r)||(r.publicProto=null),this.props.onDropdownValuesChange(r)},this.isBranchOfPwdProtectedRepo=()=>!!(this.props.containingRepo&&this.props.isBranch&&X(this.props.containingRepo)),this.getInviteOnlyText=e=>this.isBranchOfPwdProtectedRepo()?(0,b.t)("file_access_row.anyone_with_the_link_and_password"):(0,b.t)("file_access_row.only_people_invited_to_this_noun",{noun:e}),this.orgOptions=()=>{let e=(0,w.Bg)(this.props.sharedOrgLicenseGroupSetting),r=(0,w.Cy)(this.props.sharedOrgLicenseGroupSetting),n=this.props.fileKey&&this.props.editorType===A.nT.Whiteboard&&(0,w.Q3)(this.props.sharedOrgLicenseGroupSetting),a=!!this.props.containingRepo&&this.props.isBranch,o=(0,b.t)("file_access_row.anyone_with_the_link");!this.props.inWorkshop&&(e||r||n)&&(o=(0,b.t)("file_access_row.anyone_with_the_link_disabled_by_admin"));let s=this.props.org.name,l=this.props.noun,c=[{type:"option",key:"public",text:o,icon:i.createElement(er,{icon:x.A,audience:"public"}),disabled:e||r||n||!!a&&J("public",this.props.containingRepo)}],d=(0,b.t)("file_access_row.anyone_with_the_link_and_password");return!this.props.inWorkshop&&(e||n)&&(d=(0,b.t)("file_access_row.anyone_with_the_link_and_password_disabled_by_admin")),c.push({type:"option",key:"public-password",text:d,icon:i.createElement(er,{icon:j.A,audience:"public-password"}),disabled:e||n||!!this.props.isBranch||!!this.props.isPublishedHubFile}),c.push({type:"separator"}),c.push({type:"option",key:"org",text:(0,b.t)("file_access_row.anyone_at_org_name_with_the_link",{orgName:(0,_.EJ)(s,37)}),icon:i.createElement(er,{icon:$.A,audience:"org"}),disabled:!!a&&J("org",this.props.containingRepo)}),this.showOrgBrowsable()&&c.push({type:"option",key:"org-browsable",text:(0,b.t)("file_access_row.anyone_at_org_name",{orgName:(0,_.EJ)(s,37)}),icon:i.createElement(er,{icon:W.A,audience:"org-browsable"}),disabled:!!a&&J("org-browsable",this.props.containingRepo)}),c.push({type:"separator"}),c.push({type:"option",key:"inherit",text:this.getInviteOnlyText(l),icon:i.createElement(er,{icon:G.A,audience:"inherit"})}),c},this.nonOrgOptions=()=>{let e=this.props.noun,r=!!this.props.team||(0,R.og)(this.props.permissions),n=[{type:"option",key:"public",text:(0,b.t)("file_access_row.anyone_with_the_link")}];return r&&n.push({type:"option",key:"public-password",text:(0,b.t)("file_access_row.anyone_with_the_link_and_password")}),n.push({type:"option",key:"inherit",text:this.getInviteOnlyText(e)}),n}}showOrgBrowsable(){let{dropdownValues:e,isBranch:r}=this.props;return!("proto-view-only"===e.level||r)}render(){let e=this.props.hasEditRole,r=this.props.dropdownValues.audience;return this.props.inWorkshop&&"public-password"!==r&&(r="public"),i.createElement(k.H,{dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,value:r,options:this.props.org?this.orgOptions():this.nonOrgOptions(),onChange:this.onAudienceChange,id:this.FILE_LINK_AUDIENCE_DROPDOWN,dataOnboardingKey:"file-share-audience-select-key",placeholder:(0,b.t)("file_access_row.only_people_invited_to_this_noun",{noun:this.props.noun}),disabled:!e&&!this.props.isOwner||this.props.inWorkshop||this.isBranchOfPwdProtectedRepo(),trackingProperties:{canUserAccessProFeature:(0,S.w5)(this.props.team)},ui3Icon:this.props.ui3Icon})}}Q.displayName="FileLinkAudience";class ee extends i.PureComponent{constructor(){super(...arguments),this.LINK_LEVEL_DROPDOWN="link-level-dropdown",this.onLevelChange=e=>{this.props.onDropdownValuesChange({...this.props.dropdownValues,level:e})}}showEditOption(){let{dropdownValues:e,team:r,isFreeUserOnly:n,org:i,isInDraftsFolder:a}=this.props;return"edit"===e.level||(i?"inherit"!==e.audience&&!(i.invite_whitelist_guest_invite_setting===N.Gv.BANNED&&"public"===e.audience):!!(0,T.Oi)(r,n,a))}showEditWarning(){let{dropdownValues:e,org:r,inWorkshop:n}=this.props;return!!r&&!n&&"edit"===e.level&&"public"===e.audience&&r.invite_whitelist_guest_invite_setting===N.Gv.REQUIRE_APPROVAL}showPrototypeOnlyOption(){let{dropdownValues:e}=this.props;return"org-browsable"!==e.audience}render(){let{dropdownValues:e,team:r,hasEditRole:n,editorType:a}=this.props,o="inherit"===e.audience&&"proto-view-only"!==e.level,s=[];if(o){let e=[{type:"option",key:"edit",text:(0,b.t)("file_access_row.can_edit")}],r=[{type:"option",key:"access",text:(0,b.t)("file_access_row.can_access")}];return i.createElement(k.H,{dataOnboardingKey:q,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,value:this.props.inWorkshop?"edit":"access",options:this.props.inWorkshop?e:r,onChange:h.lQ,id:this.LINK_LEVEL_DROPDOWN,disabled:!0})}return(this.showEditOption()||this.props.inWorkshop)&&s.push({type:"option",key:"edit",text:(0,b.t)("file_access_row.can_edit")}),s.push({type:"option",key:"view",text:(0,b.t)("file_access_row.can_view")}),(0,S.w5)(r)&&a===A.nT.Design&&this.showPrototypeOnlyOption()&&s.push({type:"option",key:"proto-view-only",text:(0,b.t)("file_access_row.can_view_prototypes")}),i.createElement("div",{className:this.showEditWarning()?F.b$:""},this.showEditWarning()&&i.createElement(E.B,{className:F.G,svg:V.A,"data-tooltip-max-width":201,"data-tooltip-timeout-delay":50,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,b.t)("file_access_row.external_users_can_view_this_file_but_need_admin_approval_to_edit")}),i.createElement(k.H,{dataOnboardingKey:q,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,value:this.props.inWorkshop?"edit":e.level,options:s,onChange:this.onLevelChange,id:this.LINK_LEVEL_DROPDOWN,disabled:!n&&!this.props.isOwner||1===s.length||this.props.inWorkshop}))}}function et(e){return i.createElement(i.Fragment,null,i.createElement(Q,{...e}),i.createElement(ee,{...e}))}function er({icon:e,...r}){return i.createElement(y.U,{className:F.qB,svg:e},i.createElement(en,{...r}))}function en({audience:e,isSelected:r=!1}){switch(e){case"inherit":return i.createElement(a.c,null);case"public":return i.createElement(o.Y,null);case"public-password":return i.createElement(s.m,null);case"org":return r?i.createElement(l.w,null):i.createElement(c._,null);case"org-browsable":return i.createElement(d.Y,null);default:return i.createElement(u.r,null)}}ee.displayName="FileLinkLevel"},578427:(e,r,n)=>{"use strict";n.d(r,{KM:()=>O,Ku:()=>D});var i=n(411855),a=n(188507),o=n(421757),s=n(280400),l=n(902237),c=n(256296),d=n(511617),u=n(38580),p=n(646240),m=n(762638),h=n(939863),_=n(278733),g=n(931828),f=n(672517),E=n(335682),y=n(132135),b=n(637590),I=n(299410),T=n(335775),v=n(646383),S=(e=>(e.EDIT="edit",e.DUPLICATE="duplicate",e))(S||{});let w="share-to-google-classroom-row",A=(0,u.eU)(null),N=(0,f.tf)(T.sR);function C(e){let r=(0,a.wA)(),n=(0,p.Xr)(A),o=i.useRef(null);i.useEffect(()=>(n(o),()=>{n(null)}),[o,n]);let s=i.createElement("div",{ref:o,className:v.S},i.createElement("img",{src:"https://static.figma.com/uploads/cee072aec57608cbb49c64eb6cb3765896cea921",alt:"share to google classroom",className:v.S}));return i.createElement(f.fu,{name:"share_to_google_classroom_row"},i.createElement(N,{icon:s,text:(0,h.t)("file_permissions_modal.share_as.google_classroom"),onClick:()=>{r(g.b({has_shared_to_google_classroom:!0})),e.onClick()},testId:w,dataOnboardingKey:w,expandCaret:!0,trackingProperties:{text:"Share to Google Classroom"}}))}function O(e){let r=e.org?.k12_google_org,n=["student_or_educator","student","educator","education"].includes(e.currentUser?.profile?.jobTitle||"");return r||n?i.createElement(C,{onClick:()=>e.selectTabView(b.A5.SHARE_TO_GOOGLE_CLASSROOM)}):null}let L=(0,f.tf)(o.$n),R=_.sx.add({color:"var(--color-text-figjam)",cursor:"pointer",userSelect:"auto"}).$,P=_.sx.add({transform:"translateY(-4px)"}).$;function D(e){let r=I.fb[e.linkAccess].audienceAccessLevel!==I.J4.EDIT,n=(0,E.q5)(),[a,o]=(0,i.useState)("edit");return i.createElement(f.fu,{name:"google_classroom_share_modal"},i.createElement("div",{className:m.cx.flex.flexColumn.p16.$},i.createElement("form",null,i.createElement(s.b,{legend:i.createElement(l.s,null,r?i.createElement("div",{className:m.cx.textBodyMedium.pb8.$,"data-testid":"share-to-google-classroom-disclaimer"},(0,h.tx)("file_permissions_modal.google_classroom_modal.disclaimer",{link:i.createElement(f.Co,{onClick:e.openShareSettings,type:"button",style:R},(0,h.tx)("file_permissions_modal.google_classroom_modal.disclaimer_link"))})):i.createElement(i.Fragment,null)),value:a,onChange:o},i.createElement("div",{className:m.cx.mt8.$},i.createElement(s.c,{value:"edit",label:i.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-edit-option"}},(0,h.tx)("file_permissions_modal.google_classroom_modal.editable_option"))},r?i.createElement("div",{style:P},(0,h.tx)("file_permissions_modal.google_classroom_modal.editable_option_description")):null),i.createElement(s.c,{value:"duplicate",label:i.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-duplicate-option"}},(0,h.tx)("file_permissions_modal.google_classroom_modal.duplicate_option"))},r?i.createElement("div",{style:P},(0,h.tx)("file_permissions_modal.google_classroom_modal.duplicate_option_description")):null)))),i.createElement("div",{className:m.cx.flex.flexRow.justifyEnd.$},i.createElement(L,{variant:"primary",onClick:()=>{let r=n?(0,y.jN)({file:n}):"",i="duplicate"===a?"/duplicate":"",o=r?`?url=${r}${i}`:"";(0,d.FJ)(`https://classroom.google.com/share${o}`,"_blank","popup,width=650,height=505"),e.closeModal()},trackingProperties:{googleClassroomShareOption:a},htmlAttributes:{"data-testid":"share-to-google-classroom-share-button"}},(0,h.tx)("general.next")))))}},303159:(e,r,n)=>{"use strict";n.d(r,{H:()=>N});var i=n(411855),a=n(326331),o=n(629019),s=n.n(o),l=n(91408),c=n(268537),d=n(46481),u=n(47506),p=n(175290),m=n(809840),h=n(738269),_=n(672517),g=n(720488),f=n(45265),E=n(392327),y=n(515471),b=n(289298);let I=(0,l.hG)(E.p3),T=(0,l.hG)(f.km),v=(0,l.hG)(f.LF),S=(0,l.hG)(f.hX),w=I-T/2;function A({dispatch:e,dropdownClassName:r,dropdownShown:n,options:a,value:o,onChange:l,trackingProperties:d={}}){let[u,_]=(0,i.useState)(0),[f,E]=(0,i.useState)(window.innerWidth),b=()=>{E(window.innerWidth)};(0,i.useEffect)(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[]);let A=i.useRef(null),N=i.useRef(null);(0,i.useEffect)(()=>{if(A.current&&N.current){let e=A.current.getBoundingClientRect(),r=A.current.offsetParent?.getBoundingClientRect();!e||!r||e.top>=r.top&&e.bottom<=r.bottom||(A.current.scrollIntoView(!1),N.current.scrollBy(8)),_(e.width)}},[]);let C={...n?.data?.position||{top:0,left:0}},O=0,L=0,R=!1,P=-1,D=a.map((r,n)=>{if("separator"===r.type)return R||(O+=S),L+=S,i.createElement(c.wv,{key:r.key?String(r.key):n,dataTestId:`dropdown-separator-${n}`});let s=r.key===o;s&&(P=n),R=R||s;let u=r.subtext?v:T;R||(O+=u),L+=u;let _={};return r.subtext&&a[n+1]?.type!=="separator"&&(_.paddingBottom=8,L+=8),i.createElement("div",{key:String(r.key),ref:s?A:null,style:_,"data-testid":`dropdown-option-${n}`,"data-onboarding-key":`dropdown-option-${String(r.key)}`},i.createElement(c.rr,{checked:s,onClick:n=>{n.stopPropagation(),s||l(r.key),e(h.oB())},trackingProperties:{...d,key:String(r.key)},disabled:r.disabled,"data-testid":`dropdown-option-checkable-${n}`},i.createElement("div",{style:{display:"flex",alignItems:"center"}},!!r.icon&&i.createElement(i.Fragment,null,r.icon),i.createElement(p.Y,{direction:"vertical",spacing:4,height:u,verticalAlignItems:"center"},i.createElement(m.E,{fontSize:12},r.text),r.subtext&&i.createElement(m.E,{fontSize:11,color:"menu-disabled"},r.subtext)))))});u+C.left+4>f&&(C.left="auto",C.right=4);let k=16;P===a.length-1&&(k=8),"auto"!==C.top&&void 0!==C.top&&(C.top-=Math.min(O,w-k),C.top=Math.max(16,C.top));let M=i.createElement(g.g1,{maxDropdownHeight:e=>"auto"===C.top||void 0===C.top?I:Math.min(I,Math.round(e-C.top-8-16)),dropdownChildrenHeight:L,ref:N},D);return i.createElement(c.gw,{stopScrollPropagation:!0,dispatch:e,className:s()(y.N1,r),style:C},M)}function N({dispatch:e,dropdownShown:r,value:n,options:o,onChange:l,id:c,placeholder:p,disabled:m=!1,dropdownData:g={},isOpen:f,trackingProperties:E={},dataOnboardingKey:I,onOpenRcsEvent:T,ui3Icon:v}){let S=(0,i.useRef)(null),w=o.findIndex(e=>"option"===e.type&&e.key===n),N=o[w],C=N?.type==="option"?N.selectedLabel||N.text:p,O=N?.type==="option"&&N.selectedLabelClass||"";return f=f??r?.type===c,i.createElement("div",{ref:S},i.createElement(_.jm,{trackingProperties:E,className:s()({[y.Lt]:!m,[y.rp]:v}),onClick:m?void 0:n=>{n.stopPropagation(),n.preventDefault(),r&&r.type===c?e(h.oB()):o.length&&!m&&(e(h.j7({type:c,data:{...g,...function(e){let r=e.current?.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(S)}})),T&&(0,u.YQ)({id:T}))}},v,i.createElement("div",{className:`${y.Ck} ${O}`,"data-testid":"dropdown-label"},C),!m&&i.createElement("div",{className:y.Lo},i.createElement(d.U,{"data-onboarding-key":!m&&I?I:"",svg:b.A},i.createElement(a.r,null)))),f&&i.createElement(A,{dispatch:e,dropdownShown:r,dropdownClassName:y.W8,value:n,options:o,onChange:l,trackingProperties:E}))}},1700:(e,r,n)=>{"use strict";n.d(r,{E4:()=>v,R9:()=>I,hP:()=>T,nu:()=>S});var i=n(411855),a=n(188507),o=n(74522),s=n(629019),l=n.n(s),c=n(574176),d=n(46481),u=n(939863);n(720647);var p=n(99506),m=n(243987),h=n(147206);n(265361);var _=n(668860),g=n(498606),f=n(303159),E=n(515471),y=n(860574),b=n(957412);function I(e){let r="level-change-dropdown",n=(0,a.wA)(),o=()=>e.dropdownShown&&e.dropdownShown.type===r&&e.dropdownShown.data.dropdownId===e.id,s=e.virtualRowItem?{position:"absolute",top:e.virtualRowItem.start,left:0,right:0}:void 0;return i.createElement("div",{className:e.inSharingClarity?E.zn:E.xf,style:s},i.createElement("div",{className:E.H},i.createElement(T,{user:e.user,id:e.id,pending:e.pending})),i.createElement("div",{className:E.$S},i.createElement("div",{key:`name-${e.id}`,className:e.pending?E.NE:E.UU},e.userName),e.warningMessage&&i.createElement(c.B,{className:E.QW,svg:b.A,"data-tooltip-timeout-delay":50,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":e.warningMessage}),e.warningTooltipId&&i.createElement(c.B,{className:E.QW,svg:b.A,"data-tooltip-type":g.Ib.SPECIAL,"data-tooltip":e.warningTooltipId,"data-tooltip-timeout-delay":50,"data-tooltip-interactive":!0}),(()=>{let a=e.getRoleOptions();return a?i.createElement(f.H,{dispatch:n,onChange:e.onChangeLevel,options:a,id:r,value:e.level,dropdownShown:e.dropdownShown,dropdownData:{dropdownId:e.id},isOpen:!!o()}):i.createElement("span",{className:E.C1},(0,h.C1)(e.level,e.isBranchFile))})()))}function T(e){let{user:r,pending:n}=e,a=!1===n&&r.img_url;return a&&!n?i.createElement("img",{"data-tooltip-type":g.Ib.TEXT,"data-tooltip":e.user.email,key:`avatar-${e.id}`,src:a,className:l()(E.my,e.small&&E.dT),alt:""}):i.createElement("div",{className:l()(E.f1,e.small&&E.dT),"data-tooltip-type":g.Ib.TEXT,"data-tooltip":e.user.email},i.createElement(d.U,{key:`avatar-${e.id}`,svg:y.A,className:l()(E.Zk,e.small&&E.dT)},i.createElement(o.A,{className:l()(E.Zk,e.small&&E.dT)})))}function v(e,r){return!1===e.pending?e.user.handle:e.user.email in r?r.usersByEmail[e.user.email].handle:e.user.email}function S(e,r,n,i,a,o,s,l,c,d){let g=[],f=!1;if(!n)return null;c&&o===_.e6.VIEW_PROTOTYPES?g.push({type:"option",key:_.e6.VIEW_PROTOTYPES,text:(0,h.C1)(_.e6.VIEWER)}):r?g.push(w(o)):(e&&!a&&g.push(w(_.e6.OWNER)),i&&g.push(w(_.e6.ADMIN)),g.push(w(_.e6.EDITOR)),g.push(w(_.e6.VIEWER)),(s===p.vt.FILE||s===p.vt.FILE_REPO)&&(0,m.w5)(l)&&!d&&g.push(w(_.e6.VIEW_PROTOTYPES)),f=a);let E=r&&!e?(0,u.t)("confirm_remove_role.leave"):(0,u.t)("confirm_remove_role.remove");return g.push({type:"separator"}),f&&g.push({type:"option",key:"resend",text:(0,u.t)("role_row.resend_invite")}),g.push({type:"option",key:_.e6.NONE,text:E}),g}function w(e){return{type:"option",key:e,text:(0,h.C1)(e)}}},56714:(e,r,n)=>{"use strict";n.d(r,{I$:()=>v,Jr:()=>S,UM:()=>w});var i=n(966712),a=n(882225),o=n(813408),s=n(93623),l=n(492330);let c={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[a.s.FIGMA_PARTNER]},d={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[a.s.FIGMA_PARTNER]},u={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[a.s.FIGMA_PARTNER]},p={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},m={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},h="1098405969270214551",_="1094001923188252679",g="1101944648482192724",f="1151936790942917527",E={[c.id]:h,[u.id]:g,[d.id]:_,[p.id]:f},y="1220512233196109878",b="1220802563996996107",I={[u.id]:y,[d.id]:b};function T(){return(!!(0,i.kc)().widgets_hardcode_cocreators||!!(0,i.kc)().cmty_hardcode_cocreators)&&"prod"===(0,i.tl)().cluster_name}function v(e){if(!T())return e;let r=function(e){if(!T())return[];switch(e){case h:return[m,c];case b:case _:return[m,d];case y:case g:return[m,u];case f:return[m,p];default:return[]}}(e.id);if(0===r.length)return e;let n=(e.community_publishers?.accepted??[]).filter(e=>!r.find(r=>r.id===e.id)),i=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:i}}}async function S(e){if(!T())return[];try{let r=E[e];if(r){let e=(await l.U.getVersions({widgetId:r})).data.meta.plugin;return[v(e)]}}catch(e){console.error(e)}return[]}async function w(e){if(!T())return[];try{let r=I[e];if(r){let e=(await s.V.getVersions({pluginId:r})).data.meta.plugin;return[v(e)]}}catch(e){console.error(e)}return[]}},927625:(e,r,n)=>{"use strict";n.d(r,{AB:()=>ey,Ho:()=>ed,Q7:()=>e_,TL:()=>eI,hT:()=>eb,v_:()=>eT});var i,a,o,s,l,c=n(411855),d=n(188507),u=n(634832),p=n(629019),m=n.n(p),h=n(737947),_=n(498750),g=n(563706),f=n(563042),E=n(761870),y=n(498480),b=n(696601),I=n(708258),T=n(574176),v=n(348425),S=n(939863),w=n(392592),A=n(674694),N=n(590237),C=n(837324),O=n(466636),L=n(545941),R=n(417659),P=n(853799),D=n(727749),k=n(738269),M=n(662275),F=n(672517),x=n(697551),U=n(27703),B=n(560718),V=n(820642),G=n(215822),H=n(555328),W=n(376485),K=n(498606),j=n(978527),z=n(558867),Y=n(619031),$=n(746738),q=n(580999),Z=n(821134),X=n(350913),J=n(31680),Q=n(457689),ee=n(720488),et=n(734309),er=n(332086),en=n(127391),ei=n(432845),ea=n(885700),eo=n(109226),es=n(758064),el=n(237494),ec=n(851750);function ed(e){let r;let[n,i]=c.useState(!1),a=!n&&e.isSet?ei.Bz:e.isWhiteboard?ei.kj:ei.h1,o=e.showNewBadge?c.createElement(e_,null):e.showFigPickBadge?c.createElement(eh,null):c.createElement(c.Fragment,null),s=m()(e.isSet?ei.mH:ei.ZX,{[ei.eB]:e.includeChromiumDownscalingFix&&g.Ay.chrome},e.imageClassName);return r=e.image?e.showOriginalThumbnail?c.createElement("img",{className:s,src:e.image,loading:"lazy",onLoad:()=>i(!0),alt:e.alt,draggable:!1}):c.createElement(A.Xy,{className:s,image:e.image,onLoad:()=>i(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls,draggable:e.draggable}):c.createElement(J.Ek,null),c.createElement("div",{className:a,style:{backgroundColor:e.backgroundColor}},r,o,e.showPrototypeIcon&&c.createElement("div",{className:ei.cT},c.createElement(v.t,{svg:ec.A,className:ei.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ec.A})),e.showWhiteboardIcon&&c.createElement(eg,null))}function eu(e){let r=(0,d.d4)(e=>e.orgById),n="search"===(0,d.d4)(({selectedView:e})=>e).view,i=e.plugin.org_id&&r?.[e.plugin.org_id],a=(0,G.uF)(e.plugin),{tagline:o,description:s,name:l}=a,u=(0,L.G8)({description:e.isPublishing?"":s??"",tagline:o??""},f.$J);return c.createElement("div",{className:ei.Ak},c.createElement("div",{className:ei.vG},c.createElement("img",{src:a.redirect_icon_url,loading:"lazy",alt:""})),c.createElement("div",{className:ei.wA},c.createElement(j.V,{plugin:a,className:ei.Az,loading:"lazy",alt:""})),l&&c.createElement("div",{className:ei.K9},l),u&&c.createElement("div",{className:l?ei.Ry:ei.Tk},u),n&&i&&c.createElement("div",{className:ei.jG},c.createElement(en.H,{entityId:i.id,entityName:i.name,imgUrl:i.img_url,hideTooltip:!0}),i.name),e.showNewBadge?c.createElement(e_,null):e.showInstalledIcon&&c.createElement("span",{className:ei.qP},(0,S.tx)("community.plugins.saved")),e.children)}c.memo(function(e){function r(){return e.name?c.createElement("div",{className:ei.ZR},e.name):c.createElement("div",{className:ei._},e.placeholderName)}function n(){return c.createElement("div",null,e.author?e.author:c.createElement("div",{className:ei.JM}))}return c.createElement(c.Fragment,null,c.createElement("div",{className:e.showFileNameAsPrimary?ei.cR:ei.i1,onClick:e.onClick},c.createElement("div",{className:ei.__},c.createElement("a",{className:ei.t5,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:g.Ay.safari?"padding-box":""}},c.createElement(ed,{image:e.backgroundImage,isWhiteboard:e.isWhiteboard,isSet:!!e.thumbnailIsSet,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard,showOriginalThumbnail:e.showOriginalThumbnail,hubFileId:e.hubFileId,alt:e.name}))),c.createElement("div",{className:ei.HC},c.createElement("div",{className:ei.dB},e.showFileNameAsPrimary?c.createElement(n,null):c.createElement(r,null)),c.createElement("div",{className:ei.bI},c.createElement("div",{className:ei.vz},ep(e.commentsSetting)&&c.createElement(em,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?c.createElement(r,null):c.createElement(n,null)))))});let ep=e=>e!==B.Ni.ALL_DISABLED;function em(e){return c.createElement("div",{className:ei.Z2},c.createElement(T.B,{className:ei.Ls,svg:es.A})," ",e.count)}function eh(){return c.createElement("div",{className:ei.jq,"data-tooltip-type":K.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.fig_pick"),color:y.zE.BRAND,className:ei.q2}))}function e_(){return c.createElement("div",{className:ei.jq},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.new"),color:y.zE.SUCCESS,className:ei.q2}))}function eg(){return c.createElement("div",{className:ei.o_,"data-tooltip-type":K.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},c.createElement(v.t,{svg:ea.A,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ea.A}))}function ef(e){let{AuthorsJSX:r,CreatorsOverlay:n,creatorsOverlayProps:a}=i.useCreatorsHoverOverlay({resource:e.plugin}),o=c.createElement("div",{className:ei.gx},c.createElement("div",{className:ei.MN},r)),s=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,O.ae)(e.price),is_subscription:!1}}:null;return c.createElement("div",{className:g.Ay.mobile?ei.IM:e.showAuthorByDefault?ei.Gf:ei.U$,onClick:e.onClick},s&&c.createElement(N.Mr,{resource:s||e.plugin}),c.createElement(n,{...a},c.createElement("div",{className:ei.w},c.createElement("div",{className:ei._F},c.createElement(eu,{showInstalledIcon:e.isSaved,showNewBadge:e.showNewBadge,isPublishing:e.isPublishing,plugin:e.plugin},c.createElement("div",{className:ei.bs},c.createElement(I.C,{...e})))),c.createElement("div",{className:ei.uB},e.showInstallCount&&c.createElement("div",{className:ei.Rw},e.isPublic&&(e.author||o),!e.isPublic&&c.createElement("div",{className:ei.Wf},c.createElement(T.B,{className:ei.hz,svg:el.A}),(0,S.tx)("community.cards.private")),c.createElement("div",{className:ei.y},e.isPublic&&ep(e.commentsSetting)&&c.createElement(em,{count:e.commentCount}),e.isPaid?c.createElement(Q.Ij,{metric:e.uniqueRunCount||0}):c.createElement("div",{className:g.Ay.mobile?ei.hA:ei.Pw},c.createElement(b.f,{className:g.Ay.mobile||e.isBrowsingAsTeamOrOrgProfile?ei.Ys:e.isSaved?ei.XC:ei.sn,count:e.installCount,prefix:c.createElement("div",{className:ei.uu},e.isSaved?"\u2713 ":"\u2193 "),onClick:g.Ay.mobile||e.isBrowsingAsTeamOrOrgProfile?void 0:e.onSaveClick}),e.isSaved&&c.createElement("div",{className:ei.a_,onClick:g.Ay.mobile||e.isBrowsingAsTeamOrOrgProfile?void 0:e.onSaveClick},(0,S.tx)("community.profiles.remove_from_saved_plugins"))),e.dropdown)),!e.showInstallCount&&c.createElement(z.Ro,{entity:e.entity,size:24})))))}(e=>{function r(e){return c.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&e.dropdownRef?.current&&c.createElement(ee.Cf,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:ee.it.LIGHT,className:ei.s3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},c.createElement("div",{className:ei.kP},e.dropdownContent)),e.children)}function n(e){let{setDropdownContent:r,setDropdownRef:n}=e,i=[c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null)],a=c.useRef(null),o=({profile:i,ref:a})=>c.createElement("span",{onMouseEnter:()=>{n(a),r(c.createElement(q.Qi,{publisher:i,className:ei.Ah}))},ref:a,className:e.avatarContainerClassName,key:`author-link-${i.id}`},c.createElement(q.Qi,{publisher:i,className:ei.CD,avatarClassName:ei.Vz,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),s=({profile:r,stylesOverride:n})=>c.createElement(q.Qi,{key:`author-link-${r.id}`,publisher:r,className:n||ei.CD,avatarClassName:ei.my,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:i})=>{let a=c.createElement(q.Qi,{publisher:e[0],className:ei.CD});return c.createElement("div",{className:ei.NB},1===e.length&&(0,S.tx)("community.by_publisher",{publisher:a}),e.length>1&&(0,S.tx)("community.by_publisher_with_suffix",{publisherName:a,publishersSuffix:c.createElement(c.Fragment,null,c.createElement("span",{ref:i,className:ei.Jt,onMouseLeave:()=>{n(null)},onMouseEnter:()=>{n(i),r(c.createElement(c.Fragment,null,e.slice(1).map(e=>s({profile:e,stylesOverride:ei.Ah}))))}},(0,S.tx)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:e.length-1})))}))},{resource:d}=e;if(!d)return null;let u=d.community_publishers.accepted;return 1===u.length?e.showAuthorAndOthersTextLabel?c.createElement(c.Fragment,null,o({profile:u[0],ref:i[0]}),l({profiles:u,ref:a})):c.createElement(c.Fragment,null,s({profile:u[0]})):u.length<=4?c.createElement(c.Fragment,null,u.map((e,r)=>o({profile:e,ref:i[r]})),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:a})):c.createElement(c.Fragment,null,...u.slice(0,4).map((e,r)=>o({profile:e,ref:i[r]})),(({profiles:i,ref:a})=>c.createElement("span",{ref:a,onMouseEnter:()=>{n(a),r(c.createElement(c.Fragment,null,i.map(e=>s({profile:e,stylesOverride:ei.Ah}))))},onMouseLeave:()=>{n(null)}},c.createElement(Y.f,{size:e.avatarSize,className:ei.zb,text:`${i.length}`})))({profiles:u.slice(4),ref:i[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:a}))}e.useCreatorsHoverOverlay=function({resource:e,avatarStyleOverrides:i={size:24,containerClassName:ei.H,showAuthorAndOthersTextLabel:!1}}){let[a,o]=c.useState(null),[s,l]=c.useState(null),d=c.useMemo(()=>({setDropdownRef:l,setDropdownContent:o,dropdownRef:s,dropdownContent:a,avatarStyleOverrides:i}),[l,o,s,a,i]);return{AuthorsJSX:c.useMemo(()=>c.createElement(n,{resource:e,showAuthorAndOthersTextLabel:i.showAuthorAndOthersTextLabel,avatarSize:i.size,avatarContainerClassName:i.containerClassName,setDropdownContent:o,setDropdownRef:l}),[e,o,l,i]),CreatorsOverlay:r,creatorsOverlayProps:d}},e.Authors=n})(i||(i={})),(e=>{class r extends c.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if((0,_.oJ)(e)){h.Ay.redirect((0,X.ho)(this.props.plugin?.id),"_blank");return}this.props.onClick()},this.loggedOutAction=(e,r,n)=>{if(g.rr){window.location.href="/login";return}this.props.onLoggedOutAction(e,r,n)},this.onUnsave=e=>{e?.stopPropagation(),e?.preventDefault(),this.props.currentUser&&this.props.onUnsave()},this.onSave=e=>{if(e?.stopPropagation(),e?.preventDefault(),!this.props.currentUser){let e=(0,S.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost");this.loggedOutAction(e,"plugin_install_signed_out",eo.A);return}this.props.onSave()}}isSaved(){if(this.props.isPublic)return this.props.authedActiveCommunityProfile?(0,Z.a)(this.props.authedActiveCommunityProfile,this.props.plugin):this.props.plugin.profile_install_status===W.u8.PLUGIN_INSTALLED_FOR_USER;{let e=[W.u8.PLUGIN_INSTALLED_FOR_USER];return this.props.orgEntity&&e.push(W.u8.PLUGIN_INSTALLED_FOR_ORG),!!this.props.plugin.install_status&&e.includes(this.props.plugin.install_status)}}render(){let e=(0,G.uF)(this.props.plugin),r=e.description;return c.createElement(ef,{...this.props,onClick:this.onClick,href:(0,X.ho)(this.props.plugin.id),isPublic:this.props.isPublic,onSaveClick:this.isSaved()?this.onUnsave:this.onSave,description:r,tagline:e.tagline,name:e.name,showInstallCount:!0,isSaved:this.isSaved(),isLiked:this.props.currentUserLiked,installCount:this.props.plugin.install_count,likeCount:this.props.plugin.like_count,commentCount:this.props.plugin.comment_count,entity:this.props.plugin.publisher||this.props.plugin.creator,commentsSetting:this.props.plugin.comments_setting,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),isBrowsingAsTeamOrOrgProfile:this.props.isBrowsingAsTeamOrOrgProfile,dropdown:this.props.dropdown,plugin:this.props.plugin})}}e.ConnectedPluginTile=(0,d.Ng)(e=>({currentUser:e.user||null,orgEntity:(0,x.Jl)(e),isBrowsingAsTeamOrOrgProfile:(0,x.cs)(e.authedActiveCommunityProfile),authedActiveCommunityProfile:e.authedActiveCommunityProfile}),(e,r)=>({onClick:()=>{r.onClick?.(),e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.pluginId}))},onProfileCreate:n=>{e(M.to({type:er.G$,data:{variations:[er.FF.OPT_IN],userId:n.id,onFinish:()=>e(P.C({id:r.pluginId,resourceType:H.vt.PLUGIN}))}}))},onSave:()=>{e(D.oj({id:r.pluginId,resourceType:H.vt.PLUGIN,orgId:void 0}))},onUnsave:()=>{e(D.s1({id:r.pluginId,resourceType:H.vt.PLUGIN,source:D.uR.COMMUNITY_HUB})),e(w.F.enqueue({message:(0,S.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,S.t)("community.comments.undo"),action:()=>{e(D.oj({id:r.pluginId,resourceType:H.vt.PLUGIN,orgId:void 0}))}}}))},onLoggedOutAction:(r,n,i)=>{e(E.Ts({origin:n})),e((0,M.to)({type:et.l,data:{headerText:r,icon:i,dispatch:e}}))}}))(r),e.PluginTile=function(r){let n=(0,d.d4)(e=>e.publishedPlugins),i=r.plugin||(0,G.my)(r.pluginId,n),a=!!C.Bl(i.id,H.vt.PLUGIN).data?.[0];return c.createElement(e.ConnectedPluginTile,{...r,plugin:i,currentUserLiked:a})}})(a||(a={}));let eE=a.PluginTile,ey=(0,F.tf)(eE);class eb extends c.Component{render(){let{numResources:e,maxResources:r,className:n}=this.props;return c.createElement(c.Fragment,null,e<r?Array(r-e).fill(null).map((e,r)=>c.createElement("div",{key:r,className:n})):null)}}eb.defaultProps={maxResources:4},(e=>{class r extends c.Component{constructor(){super(...arguments),this.onHubFileClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,V.a6)(this.props.hubFile);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.Ai,style:{backgroundColor:(0,U.Cn)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,X.X$)(this.props.hubFile.id)},c.createElement("div",{className:ei.tr},c.createElement("div",{className:ei.Ll},e.name)))))}}r.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,d.Ng)(null,(e,r)=>({onHubFileClick:()=>{e(k.$T({view:"communityHub",subView:"hubFile",hubFileId:r.hubFile.id}))}}))(r)})(o||(o={})),(e=>{class r extends c.Component{constructor(){super(...arguments),this.onPluginClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,G.uF)(this.props.resource),r=(0,H.xQ)(this.props.resource);return c.createElement("div",{className:ei.Yt},c.createElement("div",{className:ei.sj},c.createElement("a",{className:ei.IC,onClick:this.onPluginClick,href:r?(0,X.YW)(this.props.resource.id):(0,X.ho)(this.props.resource.id)},c.createElement(j.V,{className:ei.pt,plugin:e,loading:"lazy",alt:""}),c.createElement("div",{className:ei.FK},e.name))))}}r.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,d.Ng)(null,(e,r)=>({onResourceClick:()=>{(0,H.xQ)(r.resource)?e(k.$T({view:"communityHub",subView:"widget",widgetId:r.resource.id})):e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.resource.id}))}}))(r)})(s||(s={})),(e=>{class r extends c.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,_.oJ)(e)){let e=this.props.publicProfile;if(!e)return;h.Ay.redirect((0,R.bL)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let r={id:e.id,name:e.name,img_url:e.img_url};return c.createElement("div",{className:`${ei.uy} ${this.props.notTabletSidebarOptimized?ei.HG:""}`},c.createElement("div",{className:ei.DU},c.createElement("div",{onClick:this.onPublicProfileClick},c.createElement(z.Ro,{entity:r,size:96,className:ei.W8})),c.createElement("div",{className:ei.kl},c.createElement("div",{className:ei.r9,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&c.createElement("div",{className:ei.TD},c.createElement("div",{className:ei.O3,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&c.createElement(eT,null)),e.location&&c.createElement("div",{className:ei._7},e.location),c.createElement("div",{className:ei.k1},!this.props.isOwnProfile&&c.createElement($.W,{profile:e,followClassName:ei.u8,followingClassName:ei.u8,unfollowClassName:ei.u8,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),c.createElement("div",null,c.createElement("div",{className:ei.u0},(0,S.tx)("community.follow.followers")),c.createElement("div",{className:ei.oQ},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&c.createElement("div",{className:ei.iR},this.props.resources.map(e=>{let r=(0,C.Vm)(e);switch(r){case H.vt.HUB_FILE:return c.createElement(o.PublicProfileHubFileTile,{hubFile:e,key:e.id});case H.vt.PLUGIN:case H.vt.WIDGET:return c.createElement(s.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,u.assertNever)(r)}}),c.createElement(eb,{numResources:this.props.resources.length,maxResources:6,className:ei.Yt})),0===this.props.resources.length&&c.createElement("div",{className:ei.t9},(0,S.tx)("community.profiles.no_resources_published_yet")))}}r.displayName="PublicProfileTile";let n=(e,r)=>({isOwnProfile:e.authedActiveCommunityProfile?.id===r.publicProfile.id}),i=(e,r)=>({onPublicProfileClick:()=>{r.onClick&&r.onClick(),e(k.$T({view:"communityHub",subView:"handle",handle:r.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,d.Ng)(n,i)(r),e.ConnectedPublicProfileTileTracked=(0,d.Ng)(n,i)((0,F.tf)(r))})(l||(l={}));let eI=l.ConnectedPublicProfileTile;function eT({color:e=y.zE.DEFAULT}){return c.createElement(y.Ex,{text:(0,S.t)("community.profiles.follows_you"),color:e,className:ei.x7})}l.ConnectedPublicProfileTileTracked},716253:(e,r,n)=>{"use strict";n.d(r,{HS:()=>g,hF:()=>b,l5:()=>p,xY:()=>m});var i=n(188507),a=n(634832),o=n(587670);n(939863),n(392592);var s=n(992271),l=n(356390),c=n(239671),d=n(746806),u=n(223556),p=(e=>(e[e.DEVICE=0]="DEVICE",e[e.WEBSITE=1]="WEBSITE",e[e.SMALL=2]="SMALL",e))(p||{});function m(e){return"fullscreen"===e.selectedView.view&&(e.selectedView.editorType===c.nT.Design||e.selectedView.editorType===c.nT.DevHandoff||e.selectedView.editorType===c.nT.Slides)}let h=16/9,_=(e,r)=>{let n=r.getCurrentPage();if(!n)throw Error("Expected currentPage to exist");let{prototypeDevice:i}=n;return i?i.type===o.XQq.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:i.type===o.XQq.NONE?null:i.rotation===o.xOL.NONE?i.size:{x:i.size.y,y:i.size.x}:null};function g(e,r){let n=_(r,e);return n?{type:0,...n}:r.absoluteBoundingBox.w>=1280?{type:1}:{type:2}}function f(e,r){return(e.getCurrentPage()?.prototypeDevice?.rotation??o.xOL.NONE)===o.xOL.NONE?{x:104,y:20+(r?d.uF:0)}:{x:104,y:104}}let E=(e,{x:r,y:n},i)=>{let a=n/e.y,o=Math.min(a,r/e.x),{x:s,y:l}=f(i);if(o<1){if(o===a){if(Math.max(e.x*o,s)!==s)return{x:e.x*o,y:e.y*o};{let r=s/e.x;return{x:s,y:e.y*r}}}if(Math.max(e.y*o,l)!==l)return{x:e.x*o,y:e.y*o};{let r=l/e.y;return{x:e.x*r,y:l}}}return e},y=(e,{x:r,y:n},i)=>{let{x:a,y:o}=f(i),s=o/e.y,l=Math.max(s,a/e.x);if(l>1){if(l===s){if(Math.min(e.x*l,r)!==r)return{x:e.x*l,y:e.y*l};{let n=r/e.x;return{x:r,y:e.y*n}}}if(Math.min(e.y*l,n)!==n)return{x:e.x*l,y:e.y*l};{let r=n/e.y;return{x:e.x*r,y:n}}}return e};function b(e,r,n,o,c){let p=c.get(o);(0,a.assert)(!!p,"expected node to exist");let m=g(c,p);if(e&&(0,i.bN)(e.breakpoint,m)&&!r)return e;let _=l.Y5.getViewportInfo(),f=_.height-d.uF-32,b=Math.max(.5*_.width,104),I=(0,u.$W)(c),T=!!I&&(0,s.L_)(I);if(!(0===m.type&&n&&T)){let e=E(function(e,r){switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.w/h};case 2:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.h};default:(0,a.assertNever)(e)}}(m,p),{x:b,y:f},c);return{initialViewerSize:e=y(e,{x:b,y:f},c),breakpoint:m}}let v=c.getCurrentPage()?.prototypeDevice?.rotation;(0,a.assertNotNullish)(v,"expected device rotation to exist");let{idealDeviceSize:S,framePresetSize:w}=(0,u.is)(I,v),A=E(S,{x:b,y:f},c);return A=y(A,{x:b,y:f},c),{initialViewerSize:(0,u.BX)(A,w,S),breakpoint:m}}},70964:(e,r,n)=>{"use strict";n.d(r,{Gv:()=>m,Uj:()=>u,ak:()=>p,iy:()=>h});var i,a=n(411855),o=n(629019),s=n.n(o),l=n(672517),c=n(256320),d=n(918012);let u=a.createContext(void 0);function p(e){return a.createElement("div",{className:s()(c.Qs,e.className)},e.children)}function m(e){let r={width:"300px"};return e.width&&("number"==typeof e.width?r.width=`${e.width}px`:r.width=e.width),e.height&&(r.height=e.height),e.margin&&(r.margin=e.margin),a.createElement(u.Consumer,null,n=>a.createElement("div",{className:s()(c.Dg,e.containerClassName)},a.createElement("img",{src:e.src,style:r,onLoad:n,alt:e.alt})))}function h(e){return a.createElement("div",{className:e.className?e.className:c.qr},e.children)}(i||(i={})).Content=function(e){return a.createElement("div",{className:e.className||c.xC,style:e.style},e.children)},(0,l.tf)(e=>a.createElement("a",{className:d.B,href:e.href,target:"_blank",rel:"noopener",onClick:e.onClick},e.children))},525414:(e,r,n)=>{"use strict";n.d(r,{j:()=>c});var i=n(411855),a=n(629019),o=n.n(a);n(946689);var s=n(259927),l=n(256320);function c(e){return i.createElement("div",{tabIndex:0,className:o()("mobile_shelf--background--Msmrp modal--modalBackground--PCmzN",s.Dm)},i.createElement("div",{className:o()("mobile_shelf--shelf--XNQ2O",l.Kb)},e.children))}},660280:(e,r,n)=>{"use strict";var i=n(411855),a=n(188507);n(752795),n(675678),n(629019),n(540193),n(358145),n(915440),n(776621),n(268537),n(946689),n(449124),n(574176),n(762638);var o=n(939863);n(392592),n(934533),n(67294),n(134279),n(738269),n(198123);var s=n(662275);n(931828),n(809831),n(226055),n(774442),n(396226),n(318812),n(335682),n(99506),n(279453),n(300874),n(851363),n(498606);var l=n(237870);n(377020),n(267850),n(733378),n(746806),n(129531);var c=n(63666),d=n(601538);(0,l.Ju)(function(){let e=(0,a.wA)();return i.createElement(c.OA,{targetKey:d.v4,title:"",dismissModal:()=>{e(s.AS())},ctaText:(0,o.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(s.AS())},width:268},i.createElement("p",{className:"move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik"},(0,o.tx)("rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you")))},"MoveDraftsFeedbackModal")},601538:(e,r,n)=>{"use strict";n.d(r,{G8:()=>o,ON:()=>l,ao:()=>a,oi:()=>s,v4:()=>i});let i="share",a={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER";var s=(e=>(e.PAN="PAN_PREFERENCE_ONBOARDING_KEY",e.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",e))(s||{});let l="dev_mode_mode_switcher_onboarding_key"},15839:(e,r,n)=>{"use strict";n.d(r,{LN:()=>i,M_:()=>u,No:()=>d,_L:()=>a,dZ:()=>c,q3:()=>l});var i=(e=>(e.TOP_RIGHT="top-right",e.CENTER="center",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(i||{}),a=(e=>(e.LEFT_TITLE="left_title",e.RIGHT_TITLE="right_title",e))(a||{}),o=(e=>(e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.RIGHT_TITLE=2]="RIGHT_TITLE",e[e.RIGHT_BODY=3]="RIGHT_BODY",e[e.LEFT_TITLE=4]="LEFT_TITLE",e))(o||{}),s=(e=>(e.FALLBACK="fallback",e.BEST_EFFORT="best_effort",e))(s||{}),l=(e=>(e.DRAGGABLE="draggable",e.FEATURE_UPDATE="feature_update",e.WELCOME="welcome",e.SELF_CONTAINED="self_contained",e.WALK_THROUGH="walk_through",e.ANNOUNCEMENT_POINTER="announcement_pointer",e.POINTER="pointer",e.MOBILE="mobile",e))(l||{}),c=(e=>(e.MODAL="modal",e.SHELF="shelf",e))(c||{});let d=740;var u=(e=>(e.ON_DARK="on_dark",e.ON_LIGHT="on_light",e.HIGH_CONTRAST="high_contrast",e.HIDDEN="hidden",e))(u||{})},653734:(e,r,n)=>{"use strict";n.d(r,{i:()=>O});var i=n(411855),a=n(109388),o=n(629019),s=n.n(o),l=n(91408),c=n(860601),d=n(572206),u=n(799569),p=n(946689),m=n(511443),h=n(135876),_=n(271779),g=n(672517),f=n(746806),E=n(488578),y=n(63666),b=n(70964),I=n(588694),T=n(15839),v=n(525414),S=n(256320),w=n(860168);let A=(0,l.hG)(w.tui),N=(0,l.hG)(w.IKB),C=e=>null!==e?e:void 0;class O extends i.Component{constructor(e){super(e),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.getRcsKeyElementInterval=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let e=this.props.step;if(e.modalType===T.q3.DRAGGABLE){if(!e.onboardingKey){this.setState({rcsKeyLocation:null});return}this.getRcsKeyElementInterval=setInterval(()=>{let e=this.getRcsKeyElement();if(null!=e){let r=this.computeLocation(e.getBoundingClientRect());(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==r.top||this.state.rcsKeyLocation.left!==r.left)&&this.setState({rcsKeyLocation:r})}else this.setState({rcsKeyLocation:null})},50)}},this.cleanUpRcsKeyElementScanner=()=>{null!=this.getRcsKeyElementInterval&&(clearInterval(this.getRcsKeyElementInterval),this.getRcsKeyElementInterval=null)},this.acceptHeight=e=>this.setState({modalHeight:e}),this.nextButtonRef=e=>{e&&(this.button=a.findDOMNode(e),this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=e=>{let r=this.props.step;if(r.modalType!==T.q3.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(r.pointDirection===T._L.LEFT_TITLE){let r=e.top+e.height/2;return{left:e.left+e.width+16,top:r-20,arrowRelativeX:-18,arrowRelativeY:f.uF/2-9,arrowPosition:f.F_.LEFT_TITLE}}if(r.pointDirection===T._L.RIGHT_TITLE){let r=e.top+e.height/2,n=e.left-this.width-16,i=f.uF/2-9;return{left:n,top:r-20,arrowRelativeX:this.width,arrowRelativeY:i,arrowPosition:f.F_.RIGHT_TITLE}}let n=e.left+e.width/2,i=e.bottom+18,a=n-this.width/2,o=n-(a=Math.min(a=Math.max(a,10),window.innerWidth-10-this.width)),s=f.F_.TOP;return null!=this.state.modalHeight&&window.innerHeight-i<this.state.modalHeight+12&&(i=e.top-this.state.modalHeight-12,s=f.F_.BOTTOM),{left:a,top:i,arrowRelativeX:o,arrowRelativeY:null,arrowPosition:s}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let e=this.props.step;if(e.modalType!==T.q3.DRAGGABLE)return null;let r=document.querySelector(`[data-onboarding-key=${e.onboardingKey}]`);if(!r)return null;let n=r.getBoundingClientRect();return 0===n.left&&0===n.right&&0===n.height&&0===n.width?null:r},this.acceptTitle=e=>{this.setState({title:e,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(e,r)=>{let n=this.getFramePosition();if(n.top&&n.left)return{initialPosition:new d.Mi(n.left,n.top)};switch(e){case T.LN.BOTTOM_LEFT:return{initialPosition:r||new d.Mi(N,N),initialConstraints:{x:"left",y:"bottom"}};case T.LN.BOTTOM_RIGHT:return{initialPosition:r||new d.Mi(m.lc,16),initialConstraints:{x:"right",y:"bottom"}};case T.LN.TOP_RIGHT:return{initialPosition:r||new d.Mi(N,A+N),initialConstraints:{x:"right",y:"top"}};case T.LN.CENTER:default:return{initialPosition:r||new d.Mi(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(e,r){this.focusButton();let n=this.props.step;if(n.modalType!==T.q3.DRAGGABLE)return;let i=e.step;(i.modalType!==T.q3.DRAGGABLE||n.onboardingKey&&n.onboardingKey!==i.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let e=this.props.step;switch(e.modalType){case T.q3.FEATURE_UPDATE:return e.width||T.No;case T.q3.DRAGGABLE:return e.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(e,r){return e.step!==r.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let e=this.props.step,r=this.getFramePosition(),n={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},a=i.createElement(b.Uj.Provider,{value:this.forceRender},i.createElement(e.element,{...n}));return(0,g.T8)((()=>{switch(e.modalType){case T.q3.DRAGGABLE:let{initialPosition:n,initialConstraints:o}=this.getPositionAndConstraints(e.defaultLocation,e.initialPosition),l=e.title instanceof Function?e.title():e.title,d=this.state.title||l,m=e.onboardingKey||e.highlightOnlyKey;return i.createElement(i.Fragment,null,m&&!e.disableHighlight&&i.createElement(I.x,{target:m}),i.createElement(f.vx,{initialWidth:this.width,acceptHeight:this.acceptHeight,title:d,initialPosition:n,initialConstraints:o,arrowRelativeX:e.hideArrow?void 0:C(r.arrowRelativeX),arrowRelativeY:e.hideArrow?void 0:C(r.arrowRelativeY),arrowPosition:e.hideArrow?void 0:C(r.arrowPosition),animatedIn:!0,dragHeaderOnly:!!d,onClose:this.props.dismissModal,headerClassName:e.headerClassName,zIndex:e.zIndex,disableDragging:e.disableDragging},a,e.disableFooter?null:i.createElement(b.iy,{className:e.footerClassName},!e.hideStepCounter&&e.stepCounter&&i.createElement("div",{className:S.S},e.stepCounter),i.createElement("div",{className:S.v0},e.additionalButton&&i.createElement(p.NY,{className:S.lI,href:"link"===e.additionalButton.onClickBehavior?e.additionalButton.href:void 0,target:"link"===e.additionalButton.onClickBehavior?"_blank":void 0,onClick:"function"===e.additionalButton.onClickBehavior?()=>{e.additionalButton.onClick(this.props.dispatch),this.props.dismissModal()}:void 0,trackingProperties:e.additionalButton.textForTracking?{text:e.additionalButton.textForTracking()}:{}},e.additionalButton.label),i.createElement(p.vd,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,className:S.lI,trackingProperties:{trackingDescriptor:e.ctaTrackingDescriptor},disabled:!!e.ctaIsLoading},i.createElement(h.x,{isLoading:!!e.ctaIsLoading,className:S.zP},()=>i.createElement("div",null,e.ctaText)))))));case T.q3.FEATURE_UPDATE:{let r=e.closeButtonStyle===T.M_.ON_DARK?S.oO:e.closeButtonStyle===T.M_.HIGH_CONTRAST?S.Db:e.closeButtonStyle===T.M_.ON_LIGHT?S.o:S.MD;return i.createElement(E.Nb,{className:`${S.yl} ${S.Kb}`,size:this.width,height:e.height,hide:this.props.dismissModal,disableClickOutsideToHide:e.disableClickOutsideToHide},a,e.closeButtonStyle!==T.M_.HIDDEN&&i.createElement(u.Jn,{innerText:"Close",className:r,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}))}case T.q3.MOBILE:if(e.type===T.dZ.SHELF)return i.createElement(v.j,null,a);return i.createElement(E.Nb,{className:`${S.yl} ${S.Kb} ${S.Yf}`,hide:this.props.dismissModal,disableClickOutsideToHide:!0,size:"mobile"},a,i.createElement(u.Jn,{innerText:"Close",className:S.iQ,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}));case T.q3.WALK_THROUGH:return i.createElement(i.Fragment,null,!e.disableHighlight&&i.createElement(I.x,{target:e.onboardingKey}),i.createElement(y.CR,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,height:e.height,width:e.width,pointerForegroundColor:e.pointerForegroundColor,shouldCenterArrow:e.shouldCenterArrow,topPadding:e.topPadding,className:e.className,shouldDismissWhenLostDOMTarget:e.shouldDismissWhenLostDOMTarget,additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,hideCloseButton:e.hideCloseButton,disableClickOutsideToHide:e.disableClickOutsideToHide},a));case T.q3.WELCOME:return i.createElement(i.Fragment,null,e.fullscreen&&i.createElement("div",{className:S.qg}),i.createElement(E.Nb,{className:s()(void 0!==e.fullscreen&&e.fullscreen?S.SV:S.Tw,e.className),size:"fitContent",hide:this.props.dismissModal,disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,tintedModalBackground:void 0===e.tintedModalBackground||e.tintedModalBackground},i.createElement(_.i,{displayAs:_.C.Block},a)));case T.q3.SELF_CONTAINED:return a;case T.q3.POINTER:return i.createElement(i.Fragment,null,e.showHighlight&&i.createElement(I.x,{target:e.onboardingKey}),i.createElement(y.NJ,{dismissModal:this.props.dismissModal,targetKey:e.onboardingKey,width:e.width,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,shouldNotWrapInParagraphTag:e.shouldNotWrapInParagraphTag,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost},a));case T.q3.ANNOUNCEMENT_POINTER:let g=e.title instanceof Function?e.title():e.title;return i.createElement(y.OA,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,title:g,bottomLeftText:e.stepCounter,ctaText:e.ctaText,onClickPrimaryCta:this.props.onClickPrimaryCta,secondaryCtaText:e.secondaryCtaText,onClickSecondaryCta:e.preventDismissOnClickSecondaryCta?c.lQ:this.props.dismissModal,width:e.width,topPadding:e.topPadding,shouldCenterModal:e.shouldCenterModal,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition},a)}})(),e.trackingContextName,e.trackingProperties,e.trackingEnabled)}}O.displayName="RcsFrame"},984031:(e,r,n)=>{"use strict";n.d(r,{RO:()=>E,we:()=>f,Qv:()=>y});var i=n(411855);n(109388),n(188507),n(587670),n(86625),n(534611);var a=n(629019),o=n.n(a);n(776250);var s=n(91408);n(966712),n(498750),n(153234),n(827586);var l=n(939863),c=n(175290);n(395281);var d=n(168039),u=n(959232);n(83909),n(44892),n(356390),n(843495),n(848661),n(318812),n(872429),n(144119),n(179243),n(91271),n(889449),n(184027);var p=n(766022);n(7959),n(538697);var m=n(991443),h=n(860168),_=n(821150);let g=2*(0,s.hG)(h.dGl);function f({selectedStyleProperties:e,snug:r}){let[n,a]=i.useState(!1),s=e.styleType,l="TEXT"===s,p="FILL"===s,h="dark"===(0,d.DP)(),{containerClassName:f,previewClassName:E}=i.useMemo(()=>({containerClassName:o()({[_.$9]:l,[_.vL]:!n&&p,[_.mj]:n&&p,[_.ig]:!l&&!p}),previewClassName:o()({[_.Lq]:!n,[_.s1]:n,[_.Gv]:!0,[_.Pj]:l,[_.SI]:l&&h,[_.hj]:p})}),[n,l,p,h]),y=i.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,u.A)()}')`,!l)return p?n?e:void 0:e},[n,l,p]);return i.createElement(c.Y,{spacing:0,height:"hug-contents",padding:{left:p&&!r?g:0,right:p&&!r?g:0,top:p&&!r?g:0,bottom:r?0:g},verticalAlignItems:"start"},i.createElement("div",{style:y,className:f},e.url?i.createElement("img",{src:e.url,className:E,alt:"",onLoad:()=>{a(!0)}}):i.createElement(m.zi,{dsStyle:{style_type:e.styleType}})))}function E({selectedStyleProperties:e,recordingKey:r}){return i.createElement("div",null,"FILL"===e.styleType&&i.createElement(p.B8,{key:"fill",selectionProperties:e,recordingKey:r}),"GRID"===e.styleType&&i.createElement(p.tC,{key:"grids",selectionProperties:e,recordingKey:r}),"TEXT"===e.styleType&&i.createElement(p.gc,{key:"type",selectionProperties:e,recordingKey:r}),"EFFECT"===e.styleType&&i.createElement(p.w5,{key:"effects",selectionProperties:e,recordingKey:r}))}function y(e){switch(e){case"FILL":return(0,l.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,l.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,l.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,l.t)("design_systems.create_style.placeholder_name_grid");default:return(0,l.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(0,s.hG)(h.wQn)},255533:(e,r,n)=>{"use strict";n.d(r,{Cj:()=>A});var i=n(411855),a=n(729064),o=n(629019),s=n.n(o),l=n(91408),c=n(886653),d=n(860601),u=n(946689),p=n(876058),m=n(976999),h=n(827586),_=n(762638),g=n(278733),f=n(672517),E=n(10648),y=n(269135),b=n(165275),I=n(692665),T=n(860168),v=n(950142);class S extends i.PureComponent{render(){let e=this.props.isReversed?"\u2191":"\u2193";return i.createElement("div",{className:`${b.LI} ${this.props.className||""}`,onClick:this.props.onClick,"data-onboarding-key":this.props.onboardingKey},this.props.name,this.props.isSelected&&i.createElement("div",{className:I.UE},e),this.props.extraContent)}}S.displayName="MultiSelectHeader";let w=(0,l.hG)(T.B6G);class A extends i.Component{constructor(e){super(e),this.rangeSelectAnchorRowKey=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.onScroll=e=>{this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),this.props.onScroll&&this.props.onScroll()},this.itemKeys=(0,c.xx)((e,r)=>e.map(e=>r(e))),this.selectableItemKeys=()=>{let e=this.itemKeys(this.props.items,this.props.getItemKey);return this.props.unselectableItemKeys?e.filter(e=>!this.props.unselectableItemKeys?.has(e)):e},this.toggleSelectMultiple=(e,r,n=!1)=>{this.rangeSelectAnchorRowKey=null;let i=this.props.onSelectedItemsChange??d.lQ;if(r){if(n)this.setState({selectedItemKeys:new Set,selectedAll:!1}),i([]);else{let r=new Set(this.state.selectedItemKeys);e.forEach(e=>r.delete(e)),this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll})),i(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}}else{let r=new Set([...e,...this.state.selectedItemKeys]);this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll||n})),i(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}},this.isItemSelected=e=>{let r=this.props.getItemKey(e);return this.state.selectedItemKeys.has(r)&&!this.props.unselectableItemKeys?.has(r)},this.toggleSelect=e=>{let r=this.props.getItemKey(e);if(this.props.unselectableItemKeys?.has(r))return;let n=new Set(this.state.selectedItemKeys);this.rangeSelectAnchorRowKey=r,this.isItemSelected(e)?n.delete(r):n.add(r),this.setState({selectedItemKeys:n}),this.props.onSelectedItemsChange&&this.props.onSelectedItemsChange(this.filterToSelected(this.props.items,n,this.props.unselectableItemKeys,this.props.getItemKey))},this.selectRowsInRange=(e,r,n)=>{if(e===r)return;let i=this.props.items.map(e=>this.props.getItemKey(e)).filter(e=>!this.props.unselectableItemKeys?.has(e)),a=i.indexOf(e),o=i.indexOf(r);if(-1===a||-1===o)return;let s=Math.min(a,o),l=Math.max(a,o),c=i.slice(s,l+1);n?this.toggleSelectMultiple(c,!0):this.toggleSelectMultiple(c,!1)},this.onRowClick=(e,r)=>{let n=this.props.getItemKey(r);if(!this.props.unselectableItemKeys?.has(n)){if(e.shiftKey){let e;if(1===this.state.selectedItemKeys.size?e=[...this.state.selectedItemKeys][0]:this.rangeSelectAnchorRowKey&&(e=this.rangeSelectAnchorRowKey),e&&e!==n){let r=this.state.selectedItemKeys.has(n);this.selectRowsInRange(e,n,r),this.rangeSelectAnchorRowKey=n;return}}this.toggleSelect(r)}},this.isFirstInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let i=this.props.items[e-1];if(!i)return!0;let a=this.props.getItemKey(i);return!this.state.selectedItemKeys.has(a)},this.isLastInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let i=this.props.items[e+1];if(!i)return!0;let a=this.props.getItemKey(i);return!this.state.selectedItemKeys.has(a)},this.rowWithCheckbox=(e,r,n)=>{let a=this.isItemSelected(e),o=this.props.getItemKey(e),l=s()(I.sM,this.props.styleOverrideClassNames?.unselectedCheckbox),c=this.props.itemBasedStyleOverride?this.props.itemBasedStyleOverride(e):void 0,u=s()(I.nM,this.props.styleOverrideClassNames?.row,c?.row),m=s()(this.props.styleOverrideClassNames?.selectedRow,c?.selectedRow),h=this.props.unselectableItemKeys?.has(o)?null:i.createElement(p.y,{className:a?void 0:l,allChecked:a,someChecked:!1,"data-onboarding-key":a?"msl_selected_row_onboarding_key":void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:e=>{}}),_=e.tooltipText,g=[];return this.props.shouldRoundBordersForSelectedRows&&(g.push(I.uH),a&&!this.isFirstInSelectedGroup(n)&&g.push(I.BA),a&&!this.isLastInSelectedGroup(n)&&g.push(I.D)),i.createElement(y.iA,{className:s()(I.nM,u,a?m:void 0,...g,{[I.I6]:o===this.props.highlightState?.itemKey}),selected:a,key:o,onClick:r=>this.onRowClick(r,e),tooltipText:_,useAdminTableStyles:!0,dataTestId:"multi-select-list-table-trackable-row"},i.createElement("div",{className:s()(I.E0,this.props.styleOverrideClassNames?.checkboxColumn)},h),this.props.columns.map(a=>i.createElement("div",{className:a.className,key:a.name},a.cellComponent(e,r,this.props.highlightState??{itemKey:null,setItemKey:d.lQ},n))))},this.renderLoadingRow=e=>{let r=0;return e<2?r=1:e<10&&(r=1-(e-2+1)/9),i.createElement("div",{key:e,style:{opacity:r},"data-testid":"multi-select-list-loading-row"},i.createElement(y.iA,{className:s()(I.nM,this.props.styleOverrideClassNames?.row),useAdminTableStyles:!0,dataTestId:"multi-select-list-table-loading-row"},i.createElement("div",{className:s()(I.E0,this.props.styleOverrideClassNames?.checkboxColumn)}),this.props.columns.map((r,n)=>r.name?i.createElement("div",{className:r.className,key:r.name},r.loadingComponent?r.loadingComponent:i.createElement("div",{style:g.sx.add({width:`${50*Math.abs(Math.sin(e+n+1))+30}%`}).$},i.createElement(m.Wi,{className:_.cx.h12.$,animationType:m.JR.SHIMMER}))):i.createElement("div",{key:r.name,className:s()(_.cx.wFull.$,r.className)}))))},this.filterToSelected=(0,c.xx)((e,r,n,i)=>e.filter(e=>r.has(i(e))&&!n?.has(i(e)))),this.state={scrollTop:0,selectedItemKeys:new Set,selectedAll:!1},this.stickBannerRef=i.createRef(),this.scrollContainerRef=i.createRef()}componentDidUpdate(e,r){if(e.sortState.columnName!==this.props.sortState.columnName||e.sortState.isReversed!==this.props.sortState.isReversed||e.items.length!==this.props.items.length){if(this.rangeSelectAnchorRowKey=null,(e.isLoading||this.props.isLoading)&&e.items.length<this.props.items.length&&this.state.selectedAll){let r=this.props.items.slice(e.items.length).map(e=>this.props.getItemKey(e));this.setState(e=>({selectedItemKeys:new Set([...e.selectedItemKeys,...r])}))}this.props.isLoading&&0===this.props.items.length&&this.state.selectedAll&&(this.setState({selectedItemKeys:new Set,selectedAll:!1}),this.props.onToggleSelectAll?.(!0))}}onHeaderClick(e){this.props.onSetSortState(e)}renderColumnHeaders(e){let r=e.length===this.selectableItemKeys().length,n=e.length>0,a=0===e.length;return i.createElement(y.Hj,{header:!0,useAdminTableStyles:!0,className:s()(this.props.disabled?I.eO:I.U1,this.props.styleOverrideClassNames?.header),dataTestId:"multi-select-list-table-header-row"},i.createElement("div",{className:s()(I.E0,this.props.styleOverrideClassNames?.checkboxColumn)},this.selectableItemKeys().length>0&&!this.props.selectAllDisabled&&i.createElement(p.y,{allChecked:r,"data-onboarding-key":"msl_header_toggle_select_all_onboarding_key",someChecked:n,onChange:()=>{a?(this.toggleSelectMultiple(this.selectableItemKeys(),!1,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!1)):(this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0))},"data-testid":"multi-select-list-select-all-checkbox"})),this.props.columns.map(e=>i.createElement("div",{className:e.className,key:e.name},i.createElement(S,{className:e.headerClassName,extraContent:e.headerExtraContent,name:e.name,isReversed:this.props.sortState.isReversed,isSelected:e.sorting_key?e.sorting_key===this.props.sortState.columnName:e.name===this.props.sortState.columnName,onClick:e.getSortValue?()=>this.onHeaderClick(e.sorting_key??e.name):void 0,onboardingKey:e.onboardingKey}))))}render(){let e=this.filterToSelected(this.props.items,this.state.selectedItemKeys,this.props.unselectableItemKeys,this.props.getItemKey),r=this.props.isBannerHeightDynamic?{top:this.stickBannerRef?.current?.getBoundingClientRect()?.height||0}:void 0,n=this.props.isLoading&&0===this.props.items.length,a=this.props.trackingProperties?this.props.trackingProperties.batchAction:{};return i.createElement(i.Fragment,null,i.createElement(C,{anyVisibleAndSelectedItems:e.length>0,highlightState:this.props.highlightState}),i.createElement("div",{className:s()(I.wY,{[I.TH]:this.props.hasNewScrollContext},this.props.styleOverrideClassNames?.tableWrapper)},i.createElement(h.P,{className:I.jG,innerClassName:s()(I.NM,this.props.scrollContainerInnerClassName),onScroll:this.onScroll,minContentWidth:this.props.minContentWidth||(0,l.hG)(T.fAD),scrollContainerRef:this.scrollContainerRef,scrollContentRef:this.props.scrollContentRef,scrollingDisabled:n,horizontalScrollingDisabled:this.props.hasNewScrollContext,scrollBarAlways:this.props.scrollBarAlwaysVisible},i.createElement(i.Fragment,null,i.createElement("div",{ref:this.stickBannerRef,className:I.ln},this.props.stickyBanner),i.createElement("div",null,this.props.scrollAwayContent),i.createElement("div",{className:void 0!==this.props.stickyBanner?I.T3:I.ln,style:r},i.createElement(f.fu,{name:"MultiSelectList Header",trackingTargets:E.K.NONE,properties:{tableType:this.props.itemTypeContext.itemType}},this.props.stickyContent),this.renderColumnHeaders(e)),0===this.props.items.length&&!this.props.isLoading&&i.createElement("div",{className:I.p$},this.props.emptyContent),i.createElement(f.fu,{name:"MultiSelectList - Row",trackingTargets:E.K.RCS,properties:{tableType:this.props.itemTypeContext.itemType}},i.createElement(N,{totalLoaded:this.props.items.length,isLoading:!!this.props.isLoading,disabled:!!this.props.disabled,renderLoadingRow:e=>this.renderLoadingRow(e),renderItem:r=>this.rowWithCheckbox(this.props.items[r],e.length>0,r),scrollContainerRef:this.scrollContainerRef,onFetchMore:this.props.onFetchMore,rowHeight:this.props.rowHeightOverride??w,paddingEnd:this.props.paddingEnd||32})))),this.props.actionBar&&i.createElement(f.fu,{name:"MultiSelectList BatchAction",trackingTargets:E.K.RCS,properties:{selectedAll:this.state.selectedAll,selectedCount:e.length,...a}},i.createElement("div",{className:e.length>0?I._Z:I.KY,"data-testid":"multi-select-list-action-bar"},i.createElement("div",{className:s()(e.length>0?I.SB:I.cr,this.props.actionBarClassName)},i.createElement("div",{className:I.SM},this.props.itemTypeContext.getSelectedCountString(this.props.getTotalSelected?this.props.getTotalSelected(e,this.selectableItemKeys()):e.length)),this.props.actionBar(e),i.createElement(u.RW,{className:s()(I.Ym,this.props.styleOverrideClassNames?.batchActionClearButton),svg:v.A,onClick:()=>{this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0)},trackingProperties:{action:"Clear Selection"}}))))),this.props.footer&&this.props.footer(e))}}function N({totalLoaded:e,isLoading:r,disabled:n,renderItem:o,renderLoadingRow:s,scrollContainerRef:l,onFetchMore:c,rowHeight:d,paddingEnd:u}){let p=i.useCallback(()=>d,[d]),{virtualItems:m,totalSize:h}=(0,a.z)({size:r||c?e+10:e,parentRef:l,overscan:15,estimateSize:p,paddingEnd:u||32});return i.useEffect(()=>{let r=m[m.length-1];e&&c&&r?.index>=e-1&&c()},[c,e,m]),i.createElement("div",{className:`${n?I.ry:I.jm}`,style:{height:h}},m.map(r=>i.createElement("div",{key:r.index,style:{position:"absolute",top:r.start,left:0,width:"100%",height:r.size}},r.index>=e?s(r.index-e):o(r.index))))}function C(e){let{anyVisibleAndSelectedItems:r,highlightState:n}=e;return i.useLayoutEffect(()=>{r&&n?.itemKey&&(0,n.setItemKey)(null)},[r,n?.itemKey,n?.setItemKey]),null}A.displayName="MultiSelectList"},548593:(e,r,n)=>{"use strict";n.d(r,{pG:()=>f,rw:()=>y});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(738269),c=n(459343),d=n(720488),u=n(11476),p=n(594994),m=(e=>(e.DEFAULT="default",e.ADMIN_SETTINGS="adminSettings",e))(m||{});class h extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:p.zP})}}class _ extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:p.NQ,selected:p.xW})}}class g extends i.PureComponent{constructor(e){super(e),this.shouldShowDropdown=()=>!!(this.props.dropdownKey&&this.props.dropdownShown&&this.props.dropdownShown.type===this.props.dropdownKey&&this.props.dropdownShown.data&&this.props.dropdownShown.data.targetRect),this.toggleDropdown=()=>{let e=this.dropdownRef.current;this.props.dropdownKey&&e&&(this.props.dropdownShown?this.props.dispatch(l.oB()):this.props.dispatch(l.j7({type:this.props.dropdownKey,data:{targetRect:e.getBoundingClientRect()}})))},this.getTabClassWithStyling=()=>"adminSettings"===this.props.variant?_:h,this.dropdownRef=i.createRef()}render(){let e=this.getTabClassWithStyling();return i.createElement(e,{tab:this.props.tab,selectedTab:this.props.selectedTab,onClick:this.props.onClick??this.toggleDropdown,disabled:this.props.disabled,tooltipText:this.props.tooltipText,showTooltipWhenDisabled:this.props.showTooltipWhenDisabled,dataText:this.props.dataText},i.createElement("span",{ref:this.dropdownRef,className:p.Y1,"data-onboarding-key":this.props["data-onboarding-key"]},this.props.children),this.props.dropdownKey&&i.createElement(i.Fragment,null,i.createElement(c.c,{showingDropdown:this.shouldShowDropdown(),dropdownKey:this.props.dropdownKey,dispatch:this.props.dispatch,className:s()(p.ai,this.props.chevronClassName),svgContainerClassName:p.hq}),this.shouldShowDropdown()&&i.createElement(d.Cf,{targetRect:this.props.dropdownShown.data.targetRect,lean:"right",minWidth:120,propagateCloseClick:!0},this.props.dropdownOptions)))}}let f=g.name,E=e=>({dropdownShown:e.dropdownShown});function y(){return(0,a.Ng)(E)(g)}},436128:(e,r,n)=>{"use strict";n.d(r,{W:()=>f});var i=n(411855),a=n(188507),o=n(96328),s=n(939863),l=n(198371),c=n(611978),d=n(860178),u=n(416822),p=n(668860),m=n(637590),h=n(498606),_=n(501391);function g(e,r,n){let i=(0,o.EJ)(e,25),a=n?function(e){switch(e){case p.e6.OWNER:return" (owner)";case p.e6.ADMIN:return" (admin)";default:return""}}(n):"";return r?(0,s.t)("avatar.tooltip.current_user_handle",{handle:i,roleName:a}):(0,s.t)("avatar.tooltip.other_user_handle",{handle:i,roleName:a})}function f(e){let r=(0,d.iZ)(),n=(0,a.d4)(e=>e.multiplayer),o=(0,u.q)(),s="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,p="user"in e?e.user:e.role.user,f=!1,E="sessionId"in p&&p.sessionId===n.sessionID;r?f=p.id===r.id:"sessionId"in p&&(f=E);let y="role"in e?g(p.handle,f,e.role.level):g(p.handle,f),b=function(e){let r=(0,d.iZ)();return function(e){let{localUser:r,tooltipUser:n,multiplayer:i,isInWorkshop:a,selectedView:o}=e,s=n.id?.includes("VISITOR-")||!n.id,l=-1!==i.sessionID,c="sessionId"in n&&n.sessionId===i.sessionID,d="sessionId"in n&&n.sessionId===i.presenterSessionID,u="sessionId"in n&&i.observingSessionID===n.sessionId;return!l||(0,m.QB)(o)?s?"none":"view-profile":c?s||!r?a?"edit-name":"none":d?"stop-presenting":"none":d&&!u?"follow-presenter":u?"stop-observe":"start-observe"}({localUser:r,tooltipUser:e,multiplayer:(0,a.d4)(e=>e.multiplayer),isInWorkshop:(0,l.$D)(),selectedView:(0,c._6)()})}(p),I=`/files${o}/user/${p.id}`;return i.createElement("div",{id:e.id,key:`avatar-${s}`,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip":_.M,"data-tooltip-user-handle":y,"data-tooltip-user-session-id":"sessionId"in p?p.sessionId:void 0,"data-tooltip-timeout-delay":150,"data-tooltip-user-profile-url":I,"data-tooltip-click-action":b,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-interactive":!0,style:{display:"inherit"}},e.children)}},527429:(e,r,n)=>{"use strict";n.d(r,{$:()=>o,V:()=>s});var i=n(542367);let a=/https?:\/\/(?![\w.-]+\.(?:auto|map|center)[^\w.-]?)\S*/i;function o(e){try{return new URL(e),!0}catch(e){return!1}}function s(e){return i.I6(e,"url").concat(i.I6(e,"email")).filter(e=>!!o(e.href)&&a.test(e.href))}},607e3:(e,r,n)=>{"use strict";n.d(r,{bx:()=>B,xi:()=>P});var i=n(411855),a=n(188507),o=n(45623),s=n(91408),l=n(966712),c=n(498480),d=n(574176),u=n(46481),p=n(348425),m=n(207306),h=n(762638),_=n(939863),g=n(392592),f=n(507877),E=n(697551),y=n(935308),b=n(411916),I=n(594901),T=n(860178),v=n(99506),S=n(206074),w=n(457152),A=n(40153),N=n(417404),C=n(471174),O=n(819692),L=n(646351),R=n(247866);let P="FILE_BROWSER_WORKSPACE_SWITCHER",D="ACCOUNT_SWITCHING_COMMUNITY_ONBOARDING_KEY",k=(0,s.hG)(A.nZ),M=(0,s.hG)(A.Qr),F=(0,s.hG)(A.sw),x=(0,s.hG)(A.vj)+2*(0,s.hG)(A.xX),U=x+1;function B(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.dropdownShown?.type===P),n=(0,a.d4)(e=>e.selectedView),s=(0,a.d4)(e=>e.dropdownShown?.data?.targetRect),A=(0,a.d4)(e=>e.authedUsers),B=(0,a.d4)(e=>e.authedProfilesById),V=(0,I.FC)(),G=(0,T.Pc)(),H=(0,b.U8)(V,A.orderedIds),W=(0,a.d4)(e=>e.orgUsersByOrgId),K=(0,a.d4)(e=>e.orgById),j=(0,a.d4)(e=>e.authedTeamsById),z=(0,a.d4)(e=>e.authedActiveCommunityProfile),Y=(0,E.UP)(),$=(0,a.d4)(e=>Object.keys(e.authedProfilesById).some(r=>!!e.authedProfilesById[r].org_id||!!e.authedProfilesById[r].team_id)),q=(0,a.d4)(e=>e.userNotifications.communityProfileBellStates),Z=(0,a.d4)(e=>e.userNotifications.userBellStates),X=(0,a.d4)(e=>e.teamFeedBellStates),J=(0,l.kc)().ps_benchmark;i.useEffect(()=>{J&&(0,y.nm)()(e).catch(r=>{let n=r?.data?.message||(0,_.t)("file_browser.error_try_again");e(g.F.enqueue({message:n,type:"error"}))})},[e,J]);let Q=()=>{let r=[];return A.orderedIds.forEach(n=>{let a=A.byId[n];if(!a)return;r=r.concat([{displayText:a.email,optionHeight:x,icon:i.createElement("span",{className:N.PN}),disabled:!0}]);let o=a.plans?.map(r=>{let n={userId:a.id,orgId:r.is_org?r.plan_id:null,teamId:r.is_org?null:r.plan_id},o=b.O_(V,n),s=!!r.is_guest,d=n.orgId&&!s&&l.kc().xr_debounce_threshold?{view:"teamFeed"}:{view:"recentsAndSharing"};return{displayText:r.name,optionHeight:U,itemBadge:s?i.createElement(c.Ex,{className:N.qS,text:_.t("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:i.createElement(m.n,{className:h.cx.mr8.$,userId:n.userId,orgId:n.orgId,teamId:n.teamId}),isActive:o,isChecked:o,className:N.jx,callback:()=>e(f._l({workspace:n,view:d})),activeClassName:N.sI}})||[];r=(r=r.concat(o)).concat([{displayText:"",disabled:!0,separator:!0}])}),r};return i.createElement(i.Fragment,null,r&&i.createElement(S.j,{showPoint:!0,showCheckmarkOnRight:!0,lean:"left",leanPadding:k,items:(()=>{if(J)return Q();let r=[];return A.orderedIds.forEach(n=>{let a=A.byId[n];r=(r=(r=r.concat([{displayText:a.email,optionHeight:x,icon:i.createElement("span",{className:N.PN}),disabled:!0}])).concat(H[n].map(r=>{let n=(0,b.HE)(V,r),s=!Y&&(0,b.O_)(V,r),l=!r.orgId,d=!1;r.orgId&&W[r.orgId]&&(d=W[r.orgId][r.userId]?.permission===v._D.GUEST);let p=Z?.[r.userId]?.[r.orgId||"0"],h=X[r.orgId||"0"],g=i.createElement(u.U,{svg:R.A},i.createElement(o.Z,null));return{displayText:n,optionHeight:U,badge:d?i.createElement(c.Ex,{className:N.qS,text:(0,_.t)("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:i.createElement("div",{className:N.aS},(p||h)&&i.createElement("div",{className:N.e3}),i.createElement(m.n,{userId:r.userId,orgId:r.orgId})),subText:l&&a.external_restricted_org_id?(0,_.t)("navbar.workspaces.disabled_by_your_admins"):void 0,alternativeRightIconIfNotChecked:l&&a.external_restricted_org_id?g:void 0,isActive:s,isChecked:s,className:N.jx,activeClassName:N.sI,callback:()=>e(f._l({workspace:r})),"data-onboarding-key":l?"ACCOUNT_SWITCHING_PERSONAL_ONBOARDING_KEY":void 0}}))).concat([{displayText:"",disabled:!0,separator:!0}])}),r})().concat((()=>{let r=!!q&&Object.values(q).some(e=>e),a=(0,w.sm)(A.byId,Y,G,K,j,B,q,z,n,e);if(a.length>1){let e=[{displayText:$?"":(0,_.t)("navbar.community.browse_community_workspace_switcher_label"),optionHeight:x,itemBadge:$?i.createElement("div",{className:N.zS},(0,_.tx)("navbar.community.browse_community_workspace_switcher_label"),i.createElement("a",{href:"https://help.figma.com/hc/articles/4404108672663",target:"_blank",className:N.P2},i.createElement(d.B,{svg:C.A,className:N.E3}))):void 0,icon:i.createElement("span",{className:N.s9}),disabled:!0}];return[{displayText:(0,_.t)("navbar.community.community_label"),optionHeight:x,icon:i.createElement("div",{className:N.aS},r&&i.createElement("div",{className:N.e3}),i.createElement(p.t,{svg:O.A,fallbackSvg:L.A})),onMouseEnter:()=>(0,E.nR)("submenu",n.view),className:N.uK,children:e.concat(a),activeClassName:N.sI,"data-onboarding-key":D}]}if(1!==a.length)return[];{let e=a[0];return[{displayText:(0,_.t)("navbar.community.community_label"),sideText:e.sideText,rightJustifySideText:!0,optionHeight:x,icon:i.createElement("div",{className:N.aS},r&&i.createElement("div",{className:N.e3}),i.createElement(p.t,{svg:O.A,fallbackSvg:L.A})),activeClassName:N.sI,isActive:e.isActive,isChecked:e.isChecked,className:N.uK,callback:e.callback,"data-onboarding-key":D}]}})()),onSelectItem:(r,n)=>{r.callback&&r.callback("",null,e)},parentRect:s,dispatch:e,minWidth:M,rootAndSubmenuMaxWidth:F}))}},656839:(e,r,n)=>{"use strict";(0,n(38580).eU)(null)},37112:(e,r,n)=>{"use strict";n(675678),n(534611),n(966712),n(752553),n(776621),n(696673),n(848661),n(335682),n(416095),n(279453),n(771513),n(875387),n(705129),n(656839);var i=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(i||{})},878227:(e,r,n)=>{"use strict";n.d(r,{X:()=>u,v:()=>p});var i=n(966712),a=n(259829),o=n(563706);let s=o.XN?"iPadOS":o.Ay.osname,l=o.XN?0:+o.Ay.osversion;function c(e){let r=window.navigator.languages||[];return e<r.length?r[e]:void 0}let d={browser_name:o.Ay.name,browser_version:+o.Ay.version,os_name:s,os_version:l,release:i.tl().release_manifest_git_commit,release_tag:i.tl().release_git_tag,page_locale:i.mm()[0],navigatorLanguage1:c(0),navigatorLanguage2:c(1),navigatorLanguage3:c(2),navigatorLanguages:(window.navigator.languages||[]).join(","),uiVersion:(0,a.fF)()};function u(){return d}function p(e){d={...d,...e}}},966159:(e,r,n)=>{"use strict";n.d(r,{Cz:()=>h,Mx:()=>p,NY:()=>c,Ok:()=>s,uW:()=>d,ux:()=>l,xj:()=>m,yx:()=>u});var i=n(586459);let a={status:i.r.INIT},o={status:i.r.LOADING};function s(){return a}function l(){return o}function c(e){return{status:i.r.SUCCESS,value:e}}function d(e){return{status:i.r.FAILURE,error:e}}function u(e){return e.status===i.r.INIT}function p(e){return e.status===i.r.LOADING}function m(e){return e.status===i.r.SUCCESS}function h(e){return m(e)?e.value:void 0}},627776:(e,r,n)=>{"use strict";n.d(r,{Fe:()=>m,GH:()=>_,ce:()=>d,cm:()=>p}),n(411855);var i=n(776250),a=n(878227),o=n(38580),s=n(374626),l=n(563706),c=n(776621);function d(){return l.Ay.chromeos&&window.matchMedia("(display-mode: tabbed)").matches}let u=/^\/(files|idle_timeout|ip_account_restriction|my_plugins|user|org|team)(\/.*)?$/;function p(e){return u.test(e)||"/"===e||""===e}function m(e){document.body.style.backgroundColor="#2c2c2c"}let h=(0,o.eU)(null);function _(){l.Ay.chromeos&&l.Ay.chrome&&(window.matchMedia("(display-mode: tabbed)").addEventListener("change",()=>{d()&&(m("dark"),g())}),window.addEventListener("appinstalled",()=>{(0,i.sx)("chrome_os_app_installed")}),window.addEventListener("beforeinstallprompt",e=>{s.zl.set(h,e)}),g())}function g(){d()&&((0,a.v)({browser_name:"Figma ChromeOS App"}),(0,c.kF)("chrome_os_app",!0))}},568214:(e,r,n)=>{"use strict";n.d(r,{$q:()=>g,AW:()=>D,BU:()=>P,Bx:()=>B,DA:()=>J,FN:()=>c,FO:()=>h,F_:()=>U,G$:()=>L,GL:()=>O,H0:()=>E,HD:()=>N,HL:()=>A,J1:()=>G,UE:()=>l,Uv:()=>s,X9:()=>f,YN:()=>p,YR:()=>X,YU:()=>x,_W:()=>T,di:()=>w,e3:()=>u,kx:()=>Q,mx:()=>b,ol:()=>d,ql:()=>R,sN:()=>k,tK:()=>y,tM:()=>m,ty:()=>C,x1:()=>_,yi:()=>V});var i=n(346124),a=n(719720),o=n(774191);let s={r:0,g:0,b:0,a:1},l={r:1,g:1,b:1,a:1},c=l;var d=(e=>(e.MULTIPLAYER_GRAY="#667799",e.MULTIPLAYER_BLUE="#007BE5",e.MULTIPLAYER_PURPLE="#9747FF",e.MULTIPLAYER_PINK="#FF24BD",e.MULTIPLAYER_RED="#F24822",e.MULTIPLAYER_YELLOW="#FFCD29",e.MULTIPLAYER_GREEN="#14AE5C",e))(d||{});let u="var(--color-textondarkcanvas, #ffffff)",p="var(--color-textonlightcanvas, #000000)",m="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",h="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",_="inset 0px 0px 0px 2px var(--color-bordertranslucent)",g={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(e,r){return{...e,a:r}}function E(e,r){if(!e)return null;if("string"!=typeof e)return e;let n=null!=r,i=r??1;return function(e,r=1){let n=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(n&&n.groups&&"red"in n.groups&&"green"in n.groups&&"blue"in n.groups){let{red:e,green:i,blue:a,alpha:o}=n.groups;return{r:parseFloat(e),g:parseFloat(i),b:parseFloat(a),a:o?parseFloat(o):r}}return null}(e,i)??w(e,i)??b(e,i)??y(e,n,i)??null}function y(e,r=!1,n=1){let i=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!i)return null;let a=i[1];if(a.length>=8&&r)return M(W(a.substring(0,2)),W(a.substring(2,4)),W(a.substring(4,6)),W(a.substring(6,8)));if(7===a.length&&r)return M(W(a.substring(0,2)),W(a.substring(2,4)),W(a.substring(4,6)),H(a[6]));if(a.length>=6)return M(W(a.substring(0,2)),W(a.substring(2,4)),W(a.substring(4,6)),n);if(5===a.length&&r)return M(H(a[0]),H(a[1]),H(a[2]),W(a.substring(3,5)));if(4===a.length&&r)return M(H(a[0]),H(a[1]),H(a[2]),H(a[3]));if(a.length>=3)return M(H(a[0]),H(a[1]),H(a[2]),n);if(2===a.length){let e=W(a);return M(e,e,e,n)}else if(1===a.length){let e=H(a);return M(e,e,e,n)}return null}function b(e,r=1){let n;return(n=ee.exec(e=e.trim()))?M(j(n[1]),j(n[2]),j(n[3]),null==n[4]?r:Y(n[4])):(n=et.exec(e))?M(K(n[1]),K(n[2]),K(n[3]),null==n[4]?r:Y(n[4])):(n=er.exec(e))?function(e,r,n,i){if(0===r)return M(n,n,n,i);let a=n<.5?n*(1+r):n+r-n*r,o=2*n-a,s=[0,0,0];for(let r=0;r<3;++r){let n=e+-(1/3*(r-1));n<0&&++n,n>1&&--n,6*n<1?s[r]=o+(a-o)*6*n:2*n<1?s[r]=a:3*n<2?s[r]=o+(a-o)*(2/3-n)*6:s[r]=o}return M(s[0],s[1],s[2],i)}($(n[1]),j(n[2]),j(n[3]),null==n[4]?r:Y(n[4])):(n=en.exec(e))?function(e,r,n,i){let a=(100*e+16)/116,o=r/500+a,s=a-n/200,l=e=>{let r=e**3;return r>I?r:(e-16/116)/7.787};a=l(a);let c=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=c(3.2404542*(o=95.047*l(o)/100)+-1.5371385*a+-.4985314*(s=108.883*l(s)/100)),u=c(-.969266*o+1.8760108*a+.041556*s),p=c(.0556434*o+-.2040259*a+1.0572252*s);return M(Z(d),Z(u),Z(p),i)}(j(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?r:Y(n[4])):(n=ei.exec(e))?(0,o.I0)({l:z(n[1],.01),c:z(n[2],.004),h:$(n[3]),a:null==n[4]?r:Y(n[4])}):(n=ea.exec(e))?(0,o.oq)({l:z(n[1],.01),ax:z(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?r:Y(n[4])}):null}let I=(6/29)**3;function T(e,r){return S(v(e),v(r))/.002741735}let v=e=>{let r,n,i,a=1-(1-e.r/255)*e.a,o=1-(1-e.g/255)*e.a,s=1-(1-e.b/255)*e.a;return r=(.4124*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.3576*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.1805*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))/.95047,n=(.2126*a+.7152*o+.0722*s)/1,i=(.0193*a+.1192*o+.9505*s)/1.08883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,a:500*(r-n),b:200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))}},S=(e,r)=>{let n=e.l-r.l,i=e.a-r.a,a=e.b-r.b,o=Math.sqrt(e.a*e.a+e.b*e.b),s=o-Math.sqrt(r.a*r.a+r.b*r.b),l=i*i+a*a-s*s,c=n/1,d=s/(1+.045*o),u=(l=l<0?0:Math.sqrt(l))/(1+.015*o),p=c*c+d*d+u*u;return p<0?0:Math.sqrt(p)};function w(e,r=1){let n=g[e.toLowerCase()];return n?y(n,!1,r):null}function A(e){return{r:q(e.r),g:q(e.g),b:q(e.b),a:q(e.a)}}function N(e,r=.627){let n=E(e);return!!n&&G(n)<r}function C(e){if(!e)return!0;let r=E(e);return!r||r?.a===0}function O(e){return N(e)?u:p}function L(e){return N(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function R(e,r,n){let i=E(e),a=E(r);if(!i||!a)return;let o=k(i,a),s=G(i),l=G(o);if(n){let e=G(a);return"light"===n&&e>.9||"dark"===n&&e<.25?_:void 0}return s<.2&&l<s+.1?m:s>.8&&.1>Math.abs(l-s)?h:void 0}function P(e,r){if(!e)return!1;let n="dark"===r,i=E(e);if(!i||i?.a===0)return!1;let a=G(i),o=function(e){let r=Math.max(e.r,e.g,e.b),n=Math.min(e.r,e.g,e.b),i=r-n;return r===n?0:(r+n)/2<=.5?i/(r+n):i/(2-r-n)}(i);return N(e)&&n?!(o>.5)||a<.427:!N(e)&&!n&&(!(o>.5)||a>.827)}function D(e=[]){function r(e){return null!=e}let n=e.map(e=>{if("SOLID"===e.type)return e.color;let n=(e.stops??[]).map(e=>e.color).filter(r);if(n.length)return k(...n)}).filter(r);return n.length?k(...n):void 0}function k(...e){return e.reduceRight((e,r)=>{let n=r.a,i=e.a,a=n*(1-i),o=a+i,s=a/o,l=i/o;return{r:r.r*s+e.r*l,g:r.g*s+e.g*l,b:r.b*s+e.b*l,a:o}})}function M(e,r,n,i=1){return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)?null:{r:e,g:r,b:n,a:i}}function F({r:e,g:r,b:n,a:i}){return{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*n),a:Math.round(255*i)}}function x(e){let{r,g:n,b:i}=F(e);return`rgba(${r}, ${n}, ${i}, ${e.a})`}function U(e){let{r,g:n,b:i,a}=F(e),o=Math.min(Math.max(0,n),255),s=Math.min(Math.max(0,i),255),l=Math.min(Math.max(0,a),255),c=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),d=o.toString(16).padStart(2,"0"),u=s.toString(16).padStart(2,"0"),p=l.toString(16).padStart(2,"0");return 255===l?`#${c}${d}${u}`:`#${c}${d}${u}${p}`}function B(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function V(e,r){let n=[255*e.r,255*e.g,255*e.b],i=[255*r.r,255*r.g,255*r.b],o=(0,a.ej)((0,a.h9)(n),(0,a.h9)(i));if("number"!=typeof o||isNaN(o))throw Error(`APCAcontrast returned an invalid value: ${o}`);return o}function G(e){return .299*e.r+.587*e.g+.114*e.b}function H(e){return W(`${e}${e}`)}function W(e){return q(parseInt(e,16))}function K(e){return q(parseFloat(e))}function j(e){return Z(.01*parseFloat(e))}function z(e,r){return e.endsWith("%")?Z(parseFloat(e)*r):parseFloat(e)}function Y(e){return e?e.includes("%")?j(e):Z(parseFloat(e)):1}function $(e){let r=parseFloat(e),n=0;return n=e.includes("grad")?.9*r:e.includes("rad")?180*r/Math.PI:e.includes("turn")?360*r:r,(n=(0,i.positiveModulo)(n,360))/360}function q(e){return Z(e/255)}function Z(e){return(0,i.clamp)(e,0,1)}function X(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function J(e,r){let{r:n,g:a,b:o,a:s}=e,{r:l,g:c,b:d,a:u}=r;return(0,i.areClose)(n,l)&&(0,i.areClose)(a,c)&&(0,i.areClose)(o,d)&&(0,i.areClose)(s,u)}function Q(e){let r=E(e);return!!r&&.2126*r.r+.7152*r.g+.0722*r.b<.6}let ee=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,et=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,er=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,en=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ei=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,ea=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},138392:(e,r,n)=>{"use strict";n.d(r,{Eg:()=>R,Hd:()=>u,Wn:()=>d,jA:()=>c});var i=n(346124);n(539321);var a=n(404199),o=n(775664),s=n(534367),l=n(568214);function c(e,r,n="IGNORE",i){if(!e||!(0,l.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<0||r>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",r),null;let a=f(e),o=I(a),s=T(a.hsluv_l,o);if(i){let{LESS_THAN:r,GREATER_THAN:n}=i;if(r&&100*s<r||n&&100*s>n)return e}return b(a,r/1e3,o,s),"IGNORE"!==n&&A(a,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),g(a)}function d(e){if(!e||!(0,l.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let r=f(e),n=I(r);return Math.floor(100*T(r.hsluv_l,n))}function u(e,r,n="IGNORE"){if(!e||!(0,l.YR)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<-1||r>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",r),null;let i=f(e),a=I(i),o=i.hsluv_l,s=o;s=r>0?o+(100-o)*r:o*(1- -1*r);let c=T(o,a);return b(i,T(s,a)/10,a,c),"IGNORE"!==n&&A(i,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),g(i)}let p=["red","orange","yellow","green","blue","purple"],m={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},h={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},_={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},g=e=>(e.hsluvToRgb(),{r:(0,i.clamp)(e.rgb_r,0,1),g:(0,i.clamp)(e.rgb_g,0,1),b:(0,i.clamp)(e.rgb_b,0,1),a:1}),f=e=>{let r=new a.h;return r.rgb_r=e.r,r.rgb_g=e.g,r.rgb_b=e.b,r.rgbToHsluv(),r},E={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function y(e){if((0,l.yi)(e,l.UE)<=v)return N(e);let r=f(e),n=new a.h;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,g(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),O(n)}function b(e,r,n,i=5){r*=10;let a=m[n].a*i+m[n].b-e.hsluv_h;e.hsluv_h=m[n].a*r+m[n].b-a;let o=e.hsluv_s,s=h[n].a*i*i*i+h[n].b*i*i+h[n].c*i+h[n].d;e.hsluv_s=h[n].a*r*r*r+h[n].b*r*r+h[n].c*r+h[n].d,e.hsluv_s*=o/s,e.hsluv_l=_[n].a*r*r*r+_[n].b*r*r+_[n].c*r+_[n].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function I(e){let r={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},n=e.hsluv_l/100;e.hsluvToRgb(),p.forEach(i=>{let o=new a.h;o.rgb_r=s.r[i].r,o.rgb_g=s.r[i].g,o.rgb_b=s.r[i].b,o.rgbToHsluv(),b(o,n,i,5),o.hsluvToRgb();let c=(0,l._W)(g(e),g(o));r[i]=c/E[i]});let i="yellow",o=r[i];for(let e in r)r[e]<o&&(o=r[e],i=e);return e.rgbToHsluv(),i}function T(e,r){let n=(0,i.solveCubic)(_[r].a,_[r].b,_[r].c,_[r].d-e),a=n.filter(e=>0<e&&e<10);return 1===a.length?a[0]:n.length>1?(n.sort(),n[Math.floor(n.length/2)]):e<50?11:-1}let v=15,S={BLACK:l.Uv,WHITE:l.UE},w=(e,r)=>{let{colorForContrastCheck:n,isCustomColorForeground:i,contrastMinimum:a}=r,o=()=>i?Math.abs((0,l.yi)(c,n)):Math.abs((0,l.yi)(n,c)),s=(0,l.HD)(n)?.1:-.1,c=g(e);for(;o()<a+.2&&(e.hsluv_l+=s,!(e.hsluv_l>100)&&!(e.hsluv_l<0));)c=g(e);return e.rgbToHsluv(),o()>=a+.2},A=(e,r,n)=>{let i;let a=g(e),o=Math.abs((0,l.yi)(l.UE,a)),s=Math.abs((0,l.yi)(l.Uv,a));if(r&&n)i=s>=o?"BLACK":"WHITE";else{if(!r&&!n)return;i=r?"BLACK":"WHITE"}("BLACK"!==i||!(s>=60))&&("WHITE"===i&&o>=60||w(e,{contrastMinimum:60,colorForContrastCheck:S[i],isCustomColorForeground:!1}))},N=e=>({r:(0,i.clamp)((e.r-1)/.55+1,0,1),g:(0,i.clamp)((e.g-1)/.55+1,0,1),b:(0,i.clamp)((e.b-1)/.55+1,0,1),a:1}),C=e=>{e.hsluvToRgb();let r=new a.h;return r.rgb_r=1-.55*(1-e.rgb_r),r.rgb_g=1-.55*(1-e.rgb_g),r.rgb_b=1-.55*(1-e.rgb_b),r.rgbToHsluv(),r},O=e=>{let r=C(e);return w(r,{contrastMinimum:v,colorForContrastCheck:S.WHITE,isCustomColorForeground:!1}),N(g(r))};function L(e){let r=[],n=new Set;return e.forEach(e=>{let i=o.z5.format(e);n.has(i)||(n.add(i),r.push(e))}),r}function R(e){if(e)return{base:e,widget:e,baseLight:L(e.map(e=>u(e,.6,"BLACK_AND_WHITE")||l.Uv)),sticky:L(e.map(e=>c(e,400,"BLACK",{LESS_THAN:400})||l.Uv)),highlight:L(e.map(y)),pencilUI3:e}}},609494:(e,r,n)=>{"use strict";n.d(r,{B2:()=>h,H3:()=>v,I:()=>I,Kq:()=>b,Kx:()=>T,L4:()=>C,Pq:()=>A,Rc:()=>function e(r=[],n=!0){let i=(Array.isArray(r)?r:[{t:r}]).map(r=>{let n={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(r.user_annotated&&r.user_id)return{...n,userId:r.user_id,user:{...r.user_annotated,name:r.user_annotated.name??null,imgUrl:r.user_annotated.img_url}};if(r.profile_id||null===r.profile_id)return{...n,t:"@"+r.t,styles:["lightbold"]};let i={...n,t:r.t||n.t,styles:r.styles||n.styles,link:r.link||n.link};return r.children?.length&&(i.children=r.children.map(r=>({...n,children:e(r.children,!1)}))),i});if(n&&i.length){let e=i[i.length-1];e.t=e.t?.replace(/\s+$/g,"")??null}return i},Wf:()=>function e(r,n){if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){let a=r[i],o=n[i];if(a.t!==o.t||a.user_id!==o.user_id)return!1;if(!g(a,o))return!1;if(a.profile_id!==o.profile_id)return!1;else if(a.link!==o.link)return!1;else if(!_(a,o))return!1;else if(!e(a.children??[],o.children??[]))return!1}return!0},_Z:()=>y,cs:()=>w,l5:()=>E,pV:()=>N,q:()=>S,sP:()=>function e(r=[]){if(!r)return"";let n=r.reduce((r,n)=>{let i=n.t||"",a=n.styles||[];n.user_annotated?(i=n.user_annotated.handle,a=["lightbold"]):n.profile_id||null===n.profile_id?(i="@"+n.t,a=["lightbold"]):n.children?.length?n.children.forEach((n,o)=>{(r||i)&&(i+="\n"),i+=(a.includes("ol")?`${o+1}. `:"* ")+e(n.children)}):(i=(0,l.x6)(i).map(e=>"string"==typeof e?(0,u.hX)(e):`<span class="${m.mh}">${e.props["data-text"]}</span>`).join("\n"),n.link&&(a=["lightbold"]));let o=[];return a.forEach(e=>{"b"===e?o.push(m.hp):"lightbold"===e?o.push(m.XH):"i"===e?o.push(m.u5):"s"===e&&o.push(m.Vc)}),o.length&&(i=`<span class='${s()(...o)}'>`+i+"</span>"),r+i},"");return(0,d.F)(n)||""},vj:()=>f});var i=n(730371),a=n(752795),o=n(629019),s=n.n(o),l=n(934480),c=n(440535),d=n(733334),u=n(96328),p=n(572206),m=n(632007);let h=5,_=(e,r)=>{if((0,a.isNullish)(e.styles)&&(0,a.isNullish)(r.styles))return!0;if((0,a.isNullish)(e.styles)!==(0,a.isNullish)(e.styles))return!1;let n=e.styles?.filter(e=>!r.styles?.includes(e));return n?.length===0},g=(e,r)=>!!((0,a.isNullish)(e.user_annotated)&&(0,a.isNullish)(r.user_annotated))||(0,a.isNullish)(e.user_annotated)===(0,a.isNullish)(e.user_annotated)&&(0,i.deepEquals)(e.user_annotated,r.user_annotated);var f=(e=>(e.EDITOR_MENTION="editor_mention",e.COMMUNITY_MENTION="community_mention",e.PLAIN_TEXT="plain_text",e.EMOJI="emoji",e.NONE="none",e))(f||{});function E(e){return 2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,l.xM)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none"}function y(e=[],r){if(!e)return"";let n=e.reduce((e,r)=>{let n=r.t||"";return r.user_annotated?n=r.user_annotated.handle:r.profile_id||null===r.profile_id?n="@"+r.t:r.children?.length&&r.styles?.length?r.children.forEach((i,a)=>{(e||n)&&(n+="\n"),n+=(r.styles.includes("ol")?`${a+1}. `:"* ")+y(i.children)}):r.styles?.length&&r.styles.includes("s")&&(n=""),e+n},"");return r?.includeTrailingWhitespace||(n=n.replace(/\s+$/g,"")),(0,d.F)(n)||""}function b(e,r){let n=y(e,r),i=(0,l.Bx)(n);return(globalThis.Intl?.Segmenter?Array.from(new Intl.Segmenter().segment(i)):Array.from(i)).length}function I(e){return 0===e.length||/^\s*$/.test(y(e))}function T(e){return I(e)||y(e).length<=5}function v(e){return!(e.activeThread?.id===c.hm&&e.newComment.discardAttempt<c.IT)}function S(e){return y(e).length>=17500}function w(e){if(!Array.isArray(e))return[];let r=function e(r){let n=[];return r.forEach(r=>{r.user_id?.includes("invite-")?r.t&&n.push(r.t):r.children&&n.push(...e(r.children))}),n}(e);return!function e(r){return r.forEach(r=>{r.user_id?.includes("invite-")?delete r.user_id:r.children&&e(r.children)}),r}(e),r}function A(e){return e.length>0&&(e[e.length-1].t=e[e.length-1].t?.trimEnd()),e}function N(e,r){let n=Math.min(Math.max(e.x,r.x),r.x+r.width),i=Math.min(Math.max(e.y,r.y),r.y+r.height);return new p.Mi(n,i)}function C(e){return e.includes("-")}},91408:(e,r,n)=>{"use strict";function i(e){return parseInt(e.split("px")[0])}function a(e){return Number(e.split("px")[0])}n.d(r,{hG:()=>i,jz:()=>a})},93484:(e,r,n)=>{"use strict";n.d(r,{y:()=>i});let i=n(411855).createContext(null)},623738:(e,r,n)=>{"use strict";n.d(r,{Uc:()=>c,iZ:()=>l});var i=n(587670),a=n(126911);n(966712);var o=n(588169),s=n(286640);let l=new Map(Object.entries(i.XpX).map(([e,r])=>[e,r]));function c(){let e=o.dZ.get((0,o.v7)())||"UNKNOWN",r=a.y.isApple()?"mac":"!mac",n=function(){let e;if(!s.x4)return{};let r=s.x4.getItem("customKeyboardShortcuts");if(!r)return{};try{e=JSON.parse(r)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}()??{};return n[e]?.[r]??{}}Object.entries(i.XpX).map(([e,r])=>[r,e])},540193:(e,r,n)=>{"use strict";n.d(r,{yN:()=>T,ql:()=>v});var i=n(411855);n(188507);var a=n(38329),o=n(853828),s=n(915440),l=n(391388),c=n(411045),d=n(944682),u=n(270056),p=n(193360);n(938908);var m=n(782656),h=n(988022),_=n(279453),g=n(623746),f=n(569512),E=n(966712),y=n(547807),b=n(66037);new class{constructor(){this.RecentPrototypesSchemaValidator=(0,y.YV)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:e.ignore(),recent_prototype_repos:e.ignore(),org_drafts_owners:e.array(b.WU)}),null,!1)}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:r})=>await r.get("/api/recent_prototypes",y.td.toAPIParameters({...e,fuid:E.Ay().user_data?.id})))}};let I=null;async function T(e){if(!I||"loaded"!==I.status)return;let r=[],n={},i=[];for(let a of I.data?.currentUser?.recentFiles2??[])a?.file?.key&&e.includes(a.file.key)&&(r.push({key:a.file.key,parent_org_id:a.file.parentOrgId,team_id:a.file.teamId,folder_id:a.file.folderId}),n[a.id]=null,i.push(a.file.key));let a=f.f.removeRecentFiles({fileKeys:i}),s=(0,o.WB)().optimisticallyDelete({RecentFile2:n},a);(0,h.OH)("File RecentFiles Removed",r),await s}function v(e){let r=(0,s.Rs)(_.wZi,{}),n=(0,c.L)();I=r;let o=r.data?.currentUser?.recentFiles2;return(0,i.useEffect)(()=>{r.status===l.H.LOADED&&function(e,r,n){let i=e.recent_repos.map(e=>e.files).reduce((e,r)=>e.concat(r),[]);a.D.dispatch(d.uo({files:e.recent_files.concat(i),subscribeToRealtime:!1})),a.D.dispatch(m.nF({recent_repos:e.recent_repos,subscribeToRealtime:n})),a.D.dispatch(p.lk({orgDraftsOwners:e.org_drafts_owners})),a.D.dispatch(u.Kc({folderId:`recents-${r||"no-org"}`,state:"loaded"}))}((0,g.YN)(o||[],n),e,!1)},[r.status,o,e,n]),i.useMemo(()=>{if(r.status===l.H.LOADING||r.status===l.H.DISABLED)return l.Qw.loading();if(r.status===l.H.ERRORS)return l.Qw.error(r.errors);let e=(0,g.YN)(o||[],n);return l.Qw.loaded(e.recent_files)},[r.errors,r.status,o,n])}},207286:(e,r,n)=>{"use strict";n.d(r,{Xf:()=>g});var i,a=n(411855),o=n(358145),s=n(752553),l=n(27087),c=n(939863),d=n(99506),u=n(216158),p=n(556261),m=n(56099),h=n(356931),_=n(679892);function g(e,r=!0){let n=(0,p.wy)({component:"useOrgBillingData",attribute:"isOrgAdmin",migrationGroup:m.L.GROUP_7,legacy:(e,r)=>r?.permission===d._D.ADMIN,migrated:e=>e?.key.type===d.h4.ORG_USER&&e?.permission===d.Xn.ADMIN}),[l,u]=(0,s.IT)(i.orgBillingDataQuery(e),{enabled:r});(0,h.i)(l,(0,c.t)("org_billing_error_default"));let _=(0,o.ZC)(e),f=a.useMemo(()=>_!==e&&!!_,[e,_]),E=(0,o.ZC)(n),y=a.useMemo(()=>!1===E&&n&&l.data&&0===Object.keys(l.data).length,[n,l.data,E]),b=a.useMemo(()=>y||f,[y,f]);return(0,a.useEffect)(()=>{"loading"!==l.status&&b&&u.refetch()},[u,b,l.status]),l}(i||(i={})).orgBillingDataQuery=u.M4.Query({fetch:async e=>(await _.Eh.getBillingData({orgId:e})).data.meta,enabled:e=>!!e}),u.M4.Mutation(async(e,{query:r})=>{let{orgId:n,billingContacts:a,onRejected:o}=e,s=await l.Ay.put(`/api/orgs/${n}/billing_data`,{admin_email:a}).catch(e=>{throw o(e),e});r.mutate(i.orgBillingDataQuery(n),e=>{e&&(e.admin_email=s.data.meta.admin_email)})}),u.M4.Mutation(async(e,{query:r})=>{let n=await l.Ay.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}).catch(r=>{throw e.onRejected(r),r}),a=i.orgBillingDataQuery(e.orgId);return r.mutate(a,e=>{e&&(e.invoices=n.data.meta.invoices)}),await r.refetch(a),n.data.meta})},823810:(e,r,n)=>{"use strict";n.d(r,{IT:()=>E,Ul:()=>f,g4:()=>_,m8:()=>g,n:()=>m,v_:()=>h});var i=n(411855),a=n(138020),o=n(966712),s=n(915440),l=n(391388),c=n(720647),d=n(99506),u=n(279453);let p=e=>(r,n)=>n?r.filter(r=>{let i=n[r];return!!i?.[e]}):[],m=p("canDelete"),h=p("canDuplicate"),_=p("canRestore"),g=p("canDeleteForever"),f=p("canMove");function E(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({fileKey:e})),[e]),p=(0,s.p)(u.XRI,n,{enabled:r});return(0,i.useMemo)(()=>l.Qw.all(p.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.file;e&&(r[e.id]=function(e){let r=(0,o.kc)().file_delete_pv2_cleanup,n=e.editorType===d._Y.WHITEBOARD&&e.org?.isFigJamDisabled||e.editorType===d._Y.SLIDES&&e.org?.isSlidesDisabled||!1,i=e.canEdit,s=e.canEdit,l=e.canRename,u=!!e.project?.canView,p=!!e.project?.canEdit,m=r?!!(0,a.oA)(e.canTrash):e.canDelete&&!e.isTrashed,h=!!(0,a.oA)(e.canMove),_=!!(0,o.kc)().file_move_modal_v2_precheck||h,g=(e.canEdit||!e.viewerExportRestricted)&&!n,f=r?!!(0,a.oA)(e.canRestore):e.canEdit&&e.isTrashed,E=e.canFavorite,y=e.isFavorited,b=e.isTeamTemplate,I=(0,c._R)(e.editorType??d._Y.DESIGN,e.currentPlanUser),T=e.isDraftFile,v=!1;v=r?!!(0,a.oA)(e.canPermanentlyDelete):e.folderId?e.canDelete&&e.isTrashed:e.canEdit;let S=e.parentOrgId?"org":e.teamId?"team":null,w=e.parentOrgId||e.teamId||null;return{canEdit:i,canRename:l,canMove:h,canShowInProject:u,canPin:p,canDelete:m,canDuplicate:g,canRestore:f,canFavorite:E,isFavorited:y,canDeleteForever:v,canUseInNewFile:b,canRestoreFromVersion:s,isFileTypeDisabled:n,canOpenMoveModal:_,isUserRestrictedForSeat:I,planUser:e.currentPlanUser,planType:S,planId:w,isDraftFile:T}}(e))}return r}),[p])}},307524:(e,r,n)=>{"use strict";n.d(r,{Q:()=>l});var i=n(411855),a=n(915440),o=n(391388),s=n(279453);function l(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,a.p)(s.vE,n,{enabled:r});return(0,i.useMemo)(()=>o.Qw.all(c.map(e=>e.result)).transform(e=>{let r={};for(let i of e){var n;let e=i.prototype;e&&(r[e.id]={canRead:(n=e).canRead,canFavorite:n.canRead&&!n.isFavorited,canUnfavorite:n.canRead&&n.isFavorited})}return r}),[c])}},388120:(e,r,n)=>{"use strict";n.d(r,{_H:()=>h,ae:()=>g,gX:()=>_,k8:()=>E,nL:()=>f,zj:()=>m});var i=n(411855),a=n(966712),o=n(915440),s=n(391388),l=n(720647),c=n(875847),d=n(99506),u=n(279453);let p=e=>(r,n)=>n?r.filter(r=>{let i=n[r];return!!i?.[e]}):[],m=p("canDelete"),h=p("canRestore"),_=p("canForeverDelete"),g=p("canMove");function f(e,r,n){return n?e.filter(e=>{let i=r[e],a=n[e];return a?.isMainBranch(i)}):[]}function E(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({repoId:e})),[e]),p=(0,o.p)(u.rwE,n,{enabled:r});return(0,i.useMemo)(()=>s.Qw.all(p.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.repo;e&&(r[e.id]=function(e){let r=e.canEdit,n=e.canMove,i=!!(0,a.kc)().file_move_modal_v2_precheck||n,o=!!e.project?.canView,s=e.canEdit&&!e.isTrashed,u=e.canEdit&&e.isTrashed,p=e.canEdit&&e.isTrashed,m=!!e.sourceFile?.isFavorited,h=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,_=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,g=!!e.project&&e.canEdit,f=e.parentOrgId?"org":e.teamId?"team":null,E=e.parentOrgId||e.teamId||null,y=(0,l._R)(d._Y.DESIGN,e.currentPlanUser),b=(0,c.T9)(e?.project);return{canDelete:s,canRename:r,canShowInProject:o,isFavorited:m,canRestore:p,canForeverDelete:u,canFavorite:h,canUnfavorite:_,isMainBranch:r=>r===e.sourceFile?.key,canMove:n,canEditBranch:r=>!!e.branches?.find(e=>e.key===r)?.canEdit,canPin:g,planId:E,planType:f,canOpenMoveModal:i,isUserRestrictedForSeat:y,planUser:e.currentPlanUser,isDraftRepo:b}}(e))}return r}),[p])}},716475:(e,r,n)=>{"use strict";n.d(r,{xD:()=>d});var i=n(411855),a=n(188507);n(477782);var o=n(378356),s=n(823810),l=n(307524),c=n(388120);function d({enabled:e=!0}={}){let r=(0,a.d4)(e=>e.tileSelect),n=i.useMemo(()=>[...Object.keys(r[o.F.FILES]),...Object.keys(r[o.F.PINNED_FILES])],[r]),u=i.useMemo(()=>Object.keys(r[o.F.REPOS]),[r]),p=i.useMemo(()=>Object.keys(r[o.F.PROTOTYPES]).map(e=>{if(!e.includes(","))throw Error(`Expected prototype id ${e} to be a client-side generated id`);let[r,n,i]=e.split(",");return i}),[r]);return{filePermissions:(0,s.IT)(n,e),repoPermissions:(0,c.k8)(u,e),protoPermissions:(0,l.Q)(p,e)}}},517333:(e,r,n)=>{"use strict";n.d(r,{O_:()=>h,S8:()=>m,aw:()=>i.a,eD:()=>u,fU:()=>f,hX:()=>p,hl:()=>g,y3:()=>E});var i=n(723069),a=n(878227),o=n(563706),s=n(776621),l=n(820260),c=n(748553),d=n(323653);let u=function(){let e=window.__figmaDesktop;return delete window.__figmaDesktop,e?new c.d(e):null}(),p=function(){let e=window.__figmaDesktopGetPopoutAPI?.();return e?.lockAPI(),e?new l.E(e):null}(),m=window.bellFeedAPI?window.bellFeedAPI:null;function h(e){return window.bellFeedAPI&&null!=window.bellFeedAPI.version&&window.bellFeedAPI.version>=e?window.bellFeedAPI:null}let _=u||p;function g(){return(0,d.x5)(u?.getInformationalVersion()).status===d.JN.DISABLED}function f(){if(u&&o.Ay.mac){let[e,r]=`${o.Ay.osversion}`.split(".");return 10>+e||10==+e&&12>+r}return!1}function E(){return!!u}_&&!navigator.userAgent.match(/figma-linux/)&&((0,a.v)({browser_name:"Figma Desktop",desktop_channel:_.beta?"beta":"stable",desktop_version:_.getInformationalVersion(),desktop_client_id:_.getClientID()}),(0,s.XM)("browser",{name:"Desktop",version:_.getInformationalVersion()}))},323653:(e,r,n)=>{"use strict";n.d(r,{JN:()=>c,x5:()=>d});var i=n(367035),a=n(181912),o=n(374626),s=n(38580);let l=[{minVersion:"116.10.0",date:"2024-01-01"},{minVersion:"116.16.0",date:"2024-09-01"},{minVersion:"116.17.0",date:"2024-09-01"},{minVersion:"116.18.0",date:"2024-09-18"},{minVersion:"124.0.0",date:"2024-10-25"},{minVersion:"124.1.0",date:"2024-11-20"},{minVersion:"124.2.0",date:"2024-12-18"}];var c=(e=>(e.SUPPORTED="SUPPORTED",e.DEPRECATED="DEPRECATED",e.DISABLED="DISABLED",e))(c||{});function d(e,r=(0,a.A)(),n=l){if(window.__figmaContent)return{status:"DISABLED"};if(null==e)return{status:"SUPPORTED"};if(!window.trustedTypes)return{status:"DISABLED"};if(1!==(0,i.Z)(e,"10.100.0")&&1===(0,i.Z)(e,"10.101.0"))return{status:"SUPPORTED"};for(let{minVersion:o,date:s}of n){if(1!==(0,i.Z)(e,o))continue;let n=(0,a.A)(s);if(n.isBefore(r))return{status:"DISABLED"};if(n.subtract(2,"month").isBefore(r))return{status:"DEPRECATED",date:n}}return{status:"SUPPORTED"}}let u=(0,o.E3)("last_dismissed_desktop_deprecation_banner","",{subscribeToChanges:!0});(0,s.eU)(e=>{let r=e(u);if(r){let e=(0,a.A)(r),n=(0,a.A)().subtract(1,"week");if(e.isAfter(n))return!0}return!1},(e,r,n)=>{r(u,n?(0,a.A)().toISOString():"")})},895235:(e,r,n)=>{"use strict";function i(e,r,n){let i=e;for(;i;){if(n(i))return i;if(i===r)break;i=i.parentElement}return null}function a(e){for(;;){var r;if(null==e)return null;if(null!=(r=e)&&r instanceof HTMLElement)return e;if(!("parentNode"in e))return null;e=e.parentNode}}function o(e){return!!e&&!!(d(e)||l(e)||p(e)||e.isContentEditable||e.hasAttribute("tabindex"))}function s(e){return!!e&&"INPUT"===e.tagName}function l(e){return!!e&&!!("A"===e.tagName&&e.hasAttribute("href"))}function c(e){return"button"===e.type||"submit"===e.type}function d(e){return!!e&&!!("BUTTON"===e.tagName||s(e)&&c(e))}function u(e){return l(e)||!!e&&!!(d(e)||function(e,...r){let n=e.getAttribute("role");return null!==n&&r.includes(n)}(e,"button"))}function p(e){return!!e&&(!!s(e)&&!c(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName)}n.d(r,{Ap:()=>p,Bu:()=>u,SD:()=>a,Xx:()=>o,qR:()=>i})},133537:(e,r,n)=>{"use strict";n.d(r,{N0:()=>l,Ng:()=>E,bs:()=>p,fT:()=>y,iE:()=>g,jm:()=>f,nD:()=>h,qe:()=>_,xf:()=>s,zN:()=>m});var i=n(782118),a=n(966712),o=n(571854);function s(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let r=[];for(let n of e.split(/[;,\n]/g)){let e=n.match(/^.*<(.*)>$/);e&&(n=e[1]),(n=n.trim())&&r.push(n)}return r}let c=i.C,d={};c.forEach(e=>d[e]=!0);let u=["ge.com"];function p(e){if(e in d||u.includes(e))return null;for(let r of c)if(1===(0,o.f)(e,r))return r;return null}function m(e){return e.toLowerCase().split("@")[1]||null}function h(e){return!!e&&e.endsWith((0,a.tl)().figma_email_suffix)}function _(e){let r=m(e);return!!r&&r in d}function g(e){return"work"===(e.meta?e.meta.email_domain_type:void 0)}function f(e){return!!e&&s(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com"))}function E(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}function y(e){return"support-share@figma.com"===e}},323762:(e,r,n)=>{"use strict";n.d(r,{CV:()=>d,Js:()=>l,KJ:()=>c,LU:()=>u});var i=n(296210);n(966712);var a=n(302067);let o=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function l(e){let r=new URL(e).hostname;return 0===r.indexOf("www.")&&(r=r.slice(4)),r}function c(e){let r=function(e){if(!e.startsWith("<iframe"))return"";let r=i.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),n=o.exec(r);return n&&n.length>1?n[1]:""}(e),n=r||e,a=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`;return s.test(a)?{isFromIFrame:!!r,url:a}:null}function d(e,r,n){let i=c(r.trim());return i?(e(a.MY({clipboardText:r,url:i.url,isTextIframe:i.isFromIFrame,entrypoint:n})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}}function u(e="",r){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let n=i.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}).split("<a"),a=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of n){let r=e.match(a);r&&r[1]&&o.push({url:r[1],isFromIFrame:!1})}return o.length!==r.split("\n").length?null:o}},722138:(e,r,n)=>{"use strict";n.d(r,{Dr:()=>s,K2:()=>u,Pe:()=>d,SX:()=>c,gB:()=>o,j4:()=>l,to:()=>a});var i=n(776250);function a(e,r,n,a,o,s){(0,i.sx)("resource_removed_from_favorites",{resource_id:e,selectedView:r,entrypoint:n,resource_type:a,editor_type:o,fileBrowserUnfavorite:s})}function o(e,r,n,a,o,s){(0,i.sx)("resource_added_to_favorites",{resourceId:e,editor_type:o,selectedView:r,resource_type:a,entrypoint:n,fileBrowserFavorite:s})}function s(e,r){(0,i.sx)("favorites_to_move_add_to_sidebar_click",{favorited_resource_id:e,dest_team_id:r})}function l(e){(0,i.sx)("favorites_to_move_unstar_all_click",{favorited_resource_id:e})}function c(e,r){(0,i.sx)("File Browser Sidebar Custom Section Created",{new_custom_section_name:r,new_custom_section_id:e})}function d(e){(0,i.sx)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})}function u(e,r){(0,i.sx)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:r,new_custom_section_id:e})}},992405:(e,r,n)=>{"use strict";n.d(r,{jW:()=>i});let i=/^\/(?:file|design|board|slides)\/([0-9a-zA-Z]{22,128})(?:\/|$)/},697170:(e,r,n)=>{"use strict";n.d(r,{Bs:()=>L,Rm:()=>O,xI:()=>C});var i=n(776250),a=n(511617),o=n(38329),s=n(737947),l=n(286640),c=n(27087),d=n(761870),u=n(145356),p=n(195847),m=n(6108),h=n(855829),_=n(881388),g=n(939863),f=n(662275),E=n(479296),y=n(133537),b=n(966712),I=n(776621);let T="google_sso_temp";var v=(e=>(e.COMMUNITY="google_one_tap_logged_out_community",e.LOGGED_OUT_FILE="google_one_tap_logged_out_file",e))(v||{}),S=(e=>(e.LOGGED_OUT_FOOTER="logged_out_footer",e.LOGGED_OUT_FOOTER_CONTINUE_WITH_GOOGLE="logged_out_footer_continue_with_google",e.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",e.FIGJAM_TRY_FOOTER_BANNER_CONTINUE_WITH_GOOGLE="figjam_try_footer_banner_continue_with_google",e))(S||{});let w=Object.values(v).concat(Object.values(S)),A="/api/session/google_auth/signin",N=(0,E.D)(()=>new Promise((e,r)=>{document.cookie=T+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=(0,a.FJ)("/start_google_sso","","width=600,height=600");if(null===n){(0,i.sx)("GoogleSSOError",{step:"window-not-found"}),r(Error((0,g.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function a(){let o=(0,l.OS)(document.cookie,T);if(null!==o){let n=JSON.parse(o);document.cookie=T+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",n.token?e(n):((0,i.sx)("GoogleSSOError",{step:"token-not-found"}),r(Error((0,g.t)("auth.google-sso.unable-to-get-info"))))}else n.closed?((0,i.sx)("GoogleSSOError",{step:"cookie-not-found"}),r(Error((0,g.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(a,250)},250)}));async function C(e,r){let n=await N();return await P(n,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup",origin:r})}async function O({dispatch:e,origin:r,redirectUrl:n}){let i=await N();return n&&e(d.WY({redirectUrl:n})),await P(i,{dispatch:e,apiUrl:A,origin:r})}function L(e,r,n){(0,u.g6)("google_sso_login_redirect_attempt",n,{fromMsTeams:r}),document.cookie=T+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let i=JSON.stringify({apiUrl:A,redirectPath:e});document.cookie=`${T}=${encodeURIComponent(i)}; path=/`;let a=r?s.Ay.unsafeRedirectMsTeams:s.Ay.redirect,o="/start_google_sso?should_use_redirect_instead=1";r&&(o+="&from_ms_teams=1"),a(o)}function R(e,r){r(d.OZ({googleIdToken:e.token})),r(d.fX({googleTokenType:e.tokenType})),r(d.m9({value:e.name})),e.origin&&r(d.dl({authOrigin:e.origin}))}function P(e,{dispatch:r,apiUrl:n,origin:a,__TEST_ONLY_markDone:s}){return new Promise(async(l,E)=>{try{let{data:o}=await function(e,r){let n={name:r.name,token:r.token,token_type:r.tokenType,google_fed_cm_enabled:(0,b.kc)().google_federated_cm??!1};return c.Ay.post(e,n)}(n,e);r(_.s.flash((0,g.t)("auth.sign-in-success",{email:o.meta.email}))),o.meta&&o.meta.email_domain_type?((0,i.sx)("Sign Up (GTM)",{isWorkEmail:(0,y.iE)(o)}),await (0,h.p)("sign_up_google_sso")):((0,i.sx)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:o?.meta?.id,origin:a}),await (0,h.p)("sign_in_google_sso")),l(o.meta)}catch({data:h}){let n=(0,g.Jv)({data:h},h?.message),i=!!a&&Object.values(v).includes(a),l=o.D?.getState().auth.redirectUrl||"",c=(0,u.wd)(l);i&&(0,u.g6)("google_one_tap_login_error",a,{error:n}),n===(0,g.t)("auth.error.account-not-found")?((0,b.tl)().do_arkose?function({userInfo:e,origin:r,dispatch:n,redirectUrl:i,requiresExtraInfoStep:a}){null!=r&&w.includes(r)?(n(d.Ts({origin:r,formState:p.qB.SIGN_UP,redirectUrl:i})),n(f.to({type:m.a,data:{}}))):o.D?.getState()?.modalShown?.type!==m.a&&(0,u.MZ)()&&(0,I.xi)("authenticate_google_user","Skipped launching auth modal before arkose verification",{auth_origin:r},{reportAsSentryError:!0,modeEventName:"google_sso_skipped_launching_auth_modal"}),"google_one_tap_logged_out_community"===r&&window.self.origin===window.parent.origin&&window.parent.postMessage({name:"showIFrame"},location.origin),R({...e,origin:r},n),n(d.E({formState:p.qB.VERIFY_HUMAN,prevState:p.qB.SIGN_UP,postVerificationAction:a?d.hu:d.PJ}))}({userInfo:e,origin:a,dispatch:r,redirectUrl:l,requiresExtraInfoStep:c}):(R({...e,origin:a},r),c?r(d.E({formState:p.qB.SIGN_UP_EXTRA_INFO})):r(d.PJ())),s?.()):E(Error(n||(0,g.t)("auth.google-sso.unable-to-auth")))}})}},737433:(e,r,n)=>{"use strict";n.d(r,{H:()=>s});var i=n(723069),a=n(587670),o=n(517333);let s={trigger(e){if(o.eD)switch(e){case a.JA.GENERIC:o.eD.triggerHaptic(i.i.GENERIC,1,0);break;case a.JA.LEVEL:o.eD.triggerHaptic(i.i.LEVEL,1,0);break;case a.JA.SNAP:o.eD.triggerHaptic(i.i.SNAP,1,0);break;default:throw Error(e)}}}},173292:(e,r,n)=>{"use strict";n.d(r,{o:()=>a,p:()=>o});var i=n(411855);function a(){let e=new Set;return{subscribe:r=>(e.add(r),()=>{e.delete(r)}),emit(r){for(let n of e)n(r)}}}function o(e,r){(0,i.useEffect)(()=>e.subscribe(r),[r,e])}},939683:(e,r,n)=>{"use strict";n.d(r,{NV:()=>d,U:()=>l,am:()=>c});var i=n(411855),a=n(188507),o=n(126049),s=n(988022);function l(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState();(0,s.ds)(r,a.openFile?.key,a,n,i)},[e])}function c(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState(),o=a.openFile?.key,l=a.user&&a.user.id;(0,s.ds)(r,o,a,{userId:l,...n},i)},[e])}function d(e){let r=function(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState(),o=a.currentUserOrgId??"";(0,s.Fr)(r,o,a,{...n},i)},[e])}();return(0,o.A)(r,e,{leading:!0,trailing:!1})}},963490:(e,r,n)=>{"use strict";n(411855),n(358145)},622422:(e,r,n)=>{"use strict";n.d(r,{$:()=>a}),n(411855);var i=n(358145);function a(e){let r=(0,i.ZC)(e);return e!==r}Symbol("initialValue")},540721:(e,r,n)=>{"use strict";n(411855),n(193212)},602126:(e,r,n)=>{"use strict";n.d(r,{ww:()=>a});var i=n(411855);function a(e,r){var n,a;return n="mousedown",a=[e.current],i.useEffect(()=>{function e(e){a.some(r=>r&&r.contains(e.target))||r(e)}return document.addEventListener(n,e),()=>{document.removeEventListener(n,e)}},[n,r,a]),e}},988652:(e,r,n)=>{"use strict";n.d(r,{M:()=>a});var i=n(411855);function a(){let e=i.useRef(null),r=function(e){let[r,n]=i.useState(!1);return i.useEffect(()=>{let r=()=>n(!0),i=()=>n(!1),a=e.current;if(a)return a.addEventListener("mouseover",r),a.addEventListener("mouseleave",i),()=>{a.removeEventListener("mouseover",r),a.removeEventListener("mouseleave",i)}},[e.current,n]),r}(e);return[i.useCallback(r=>{e.current=r},[]),r,e]}},22332:(e,r,n)=>{"use strict";n(411855)},358145:(e,r,n)=>{"use strict";n.d(r,{ZC:()=>a,qd:()=>o});var i=n(411855);function a(e){let r=(0,i.useRef)();return(0,i.useEffect)(()=>{r.current=e},[e]),r.current}function o(e){let r=(0,i.useRef)({value:e,prev:void 0}),n=r.current.value;return e!==n&&(r.current={value:e,prev:n}),r.current.prev}},62935:(e,r,n)=>{"use strict";n.d(r,{M:()=>a});var i=n(411855);function a(e){let r=(0,i.useRef)(null);return(0,i.useImperativeHandle)(e,()=>r.current),r}},663668:(e,r,n)=>{"use strict";n.d(r,{A:()=>o});var i=n(296210),a=n.n(i);function o(e){if(!e)return"";try{let r=e.replace(/<br>|<\/p>|<\/h2>|<\/li>/g,"$&\n"),n=s(r);return new DOMParser().parseFromString(n,"text/html").documentElement.textContent?.trim()??""}catch(e){return console.error(e),""}}let s=(()=>{let e;return r=>(e||(e=a()()),e.sanitize(r))})()},404843:(e,r,n)=>{"use strict";n.d(r,{x:()=>i});let i=(0,n(38580).eU)(!1)},220331:(e,r,n)=>{"use strict";n.d(r,{R_:()=>A,w5:()=>w});var i=n(88823),a=n.n(i),o=n(511617),s=n(737947),l=n(966712),c=n(187623),d=n(27087),u=n(743905),p=n(662275),m=n(988022),h=n(779709),_=n(349719),g=n(347935),f=n(929594),E=n(517333),y=n(563706),b=!1;let I=null,T=null,v=null,S=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];function w(){return b}function A(e){let{user_data:r,idle_timeout_duration_in_secs:n,idle_timeout_last_active_at:i,idle_timeout_org_name:w,frame_context:A}=(0,l.Ay)();r&&n&&i&&w&&!b&&function(e,r,n,i,w,A){if((0,y.Q1)()||(0,y.Ji)()||y.Ay.isIpadNative)return;let N=`last-active-at-${e.email}`,C="idle_timeout_last_active_at_change",O=(0,o.GZ)(),L=O&&"embed"===w,R=O&&"integration"===w,P=.05*r,D=Math.min(60,r/2),k=new c.P,M=e=>{localStorage.setItem(N,e.toString()),k.sendToAllTabs(C)};M(n);let F=()=>{document.hasFocus()&&d.Ay.post(`/api/user/${e.id}/idle_timeout_last_active_at`,{is_embed:O.toString()&&!h.z4.getIsExtension()}).then(e=>{let r=e.data.meta.idle_timeout_last_active_at;r&&M(r)}).catch(e=>{401===e.status&&U()})},x=()=>!!A&&A.getState().modalShown?.type===f.xn,U=()=>{if(A&&A?.getState().authedUsers.orderedIds.length===1&&((0,m.Pg)(),u.U2.clear()),L)s.Ay.reload("idleSessionTimeout-embed");else if(R){let{pathname:e,search:r}=s.Ay.location,n=`${e}${r}&integration_host=msft`;window.location.replace(n)}else h.z4.getIsExtension()&&(0,l.kc)().dt_dev_mode_vscode_idle_timeout?(0,_.$g)():s.Ay.redirect(`/idle_timeout?fuid=${e.id}&redirect_uri=${encodeURIComponent(window.location.href)}`)},B=()=>Math.floor(Date.now()/1e3);v&&S.forEach(e=>{document.removeEventListener(e,v)}),v=a()(F,1e3*P,{trailing:!1,leading:!0}),S.forEach(e=>{document.addEventListener(e,v)});let V=()=>{T&&clearTimeout(T),I&&clearTimeout(I),!x()||document.hasFocus()||E.eD||A?.dispatch(p.ES(f.eN));let n=parseInt(localStorage.getItem(N))+r-B();I=setTimeout(()=>{g.N.getIdleTimeoutPrecheck({fuid:e.id}).then(e=>{let n=e.data.meta.idle_timeout_last_active_at;n&&n+r>=B()?M(n):U()}).catch(e=>{U()})},1e3*n),L||(T=setTimeout(()=>{x()||A?.dispatch(p.to({type:f.eN,data:{orgName:i,duration:r,onHide:()=>{F()}}}))},1e3*(n-D)))};k.register(C,()=>{V()}),V(),b=!0}(r,n,i,w,A?.type,e)}},300785:(e,r,n)=>{"use strict";n.d(r,{Rg:()=>s,YA:()=>c,hM:()=>d,qr:()=>l});var i=n(69107),a=n(939863),o=(e=>(e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e))(o||{});let s="on-idle-timeout-logged-in-ipc-key";function l(e){return e<3600?[e/60,"minutes"]:e<86400?[e/3600,"hours"]:e%86400==0?[e/86400,"days"]:[e/3600,"hours"]}function c(e,r){let n={duration:r};switch(e){case"minutes":return(0,a.tx)("settings_tab.idle_session_timeout.time.minutes",n);case"hours":return(0,a.tx)("settings_tab.idle_session_timeout.time.hours",n);case"days":return(0,a.tx)("settings_tab.idle_session_timeout.time.days",n)}}function d(e){return!!(0,i.isNumber)(e)&&e<43200}},259829:(e,r,n)=>{"use strict";n.d(r,{SI:()=>u,fF:()=>d});var i=n(966712),a=n(563706),o=n(270499),s=n(898148);let l=window.location.pathname;function c(e){return!function({isDesign:e,isDesignPrototypeViewer:r,isDevMode:n,isEmbed:i,isEmbedKitV2Enabled:a,isFigjam:o,isFigjamUi3LabEnabled:s,isMobileDevice:l,isSites:c,isSlides:d,isCooper:u,isUi3ExpNonDesignLabEnabled:p,isUi3LabEnabled:m,isVSCodeExtension:h}){return!!d||!!c||!!u||!h&&(!!i&&!!a||((e||n)&&!r&&!i?m:o?s&&(p||!l):m&&p))}(e)?"ui2":"ui3"}function d(){let e=(0,i.AU)();return c({isDesign:"design"===e,isDesignPrototypeViewer:l.startsWith("/proto/"),isDevMode:"design"===e,isEmbed:i.Ay().frame_context?.type==="embed",isEmbedKitV2Enabled:h("embedkit_v2"),isFigjam:"whiteboard"===e,isFigjamUi3LabEnabled:(0,o.Y)({trueOverrideUserFlag:m("unified_index_v3_figjam_toggle_override_true"),falseOverrideUserFlag:m("unified_index_v3_figjam_toggle_override_false"),canOverride:(0,s.Q4)(),defaultValue:(0,s.KL)()}),isMobileDevice:a.Xb,isSites:"sites"===e,isSlides:"slides"===e,isCooper:!1,isUi3ExpNonDesignLabEnabled:(0,o.Y)({trueOverrideUserFlag:m("unified_index_v3_exp_override_true"),falseOverrideUserFlag:m("unified_index_v3_exp_override_false"),canOverride:h("unified_index_v3_exp"),defaultValue:h("unified_index_v3_exp_default")}),isUi3LabEnabled:p(),isVSCodeExtension:!1})}function u(){return c({isDesign:!0,isUi3LabEnabled:p(),isDesignPrototypeViewer:!1,isDevMode:!1,isEmbed:!1,isEmbedKitV2Enabled:h("embedkit_v2"),isFigjam:!1,isFigjamUi3LabEnabled:!1,isMobileDevice:!1,isSites:!1,isSlides:!1,isCooper:!1,isUi3ExpNonDesignLabEnabled:!1,isVSCodeExtension:!1})}function p(){return(0,o.Y)({trueOverrideUserFlag:m(s.pU),falseOverrideUserFlag:m(s.EM),canOverride:(0,s.kv)({didSignUpAsUI3User:!1,isStarterUser:!1}),defaultValue:(0,s.Mx)()})}function m(e){for(let r of i.Ay()?.user_flags||[])if(r.name===e)return!0;return!1}function h(e){return!0===(0,i.kc)()[e]}},599445:(e,r,n)=>{"use strict";function i(){return!1}n.d(r,{Is:()=>function e(r){let n=r.recordingKey();if(n){if(r.__registeredRecordingKey)n!==r.__registeredRecordingKey&&(c(r),e(r));else for(let e in r.__registeredRecordingKey=n,r.__playbackHandlers)o(l(n,e),r.__playbackHandlers[e])}},YJ:()=>u,aH:()=>d,k3:()=>i,nL:()=>c});let a=Object.create(null);function o(e,r){if(-1!==(e in a?a[e].indexOf(r):-1))throw Error(`Tried to register already registered playback handler for ${e}`);a[e]||(a[e]=[]),a[e].push(r)}function s(e,r){let n=e in a?a[e].indexOf(r):-1;if(-1===n)throw Error(`Tried to unregister unknown playback handler for ${e}`);a[e].splice(n,1),0===a[e].length&&delete a[e]}function l(e,r){return`${e}.${r}`}function c(e){if(e.__registeredRecordingKey){for(let r in e.__playbackHandlers)s(l(e.__registeredRecordingKey,r),e.__playbackHandlers[r]);e.__registeredRecordingKey=null}}let d="SKIP_RECORDING";function u(e,r,n,i={}){i.record||(e=>e);let a=i.playback||(e=>e),c=e.__playbackHandlers||(e.__playbackHandlers=Object.create(null)),d=c[r];if(c[r]=e=>n(a(e)),d&&e.__registeredRecordingKey){let n=l(e.__registeredRecordingKey,r);s(n,d),o(n,c[r])}return function(e){0===n.length&&(e=void 0),n(e)}}},314866:(e,r,n)=>{"use strict";n.d(r,{c4:()=>c,lb:()=>l,s_:()=>a});var i=n(939863);n(96328);let a=["education","software-development","user-research","design","marketing","product-management","other"],o={student_or_educator:"education","student-or-educator":"education",student:"education",educator:"education",developer:"software-development","full-stack-developer":"software-development","front-end-developer":"software-development",user_researcher:"user-research","user-researcher":"user-research","ux-researcher":"user-research",designer:"design",marketer:"marketing",product_manager:"product-management","product-manager":"product-management",something_else:"other"};function s(){return(0,i.t)("auth.extra-info.job-type-badge.other")}function l(e){return function(e){if(!e)return null;switch(o[e]??e){case"education":return(0,i.t)("auth.extra-info.job-type-badge.education");case"software-development":return(0,i.t)("auth.extra-info.job-type-badge.software-development");case"user-research":return(0,i.t)("auth.extra-info.job-type-badge.user-research");case"design":return(0,i.t)("auth.extra-info.job-type-badge.design");case"marketing":return(0,i.t)("auth.extra-info.job-type-badge.marketing");case"product-management":return(0,i.t)("auth.extra-info.job-type-badge.product-management");case"other":return s();default:return null}}(e)??s()}function c(e){switch(e){case"education":return(0,i.t)("auth.extra-info.job-type.education");case"software-development":return(0,i.t)("auth.extra-info.job-type.software-development");case"user-research":return(0,i.t)("auth.extra-info.job-type.user-research");case"design":return(0,i.t)("auth.extra-info.job-type.design");case"marketing":return(0,i.t)("auth.extra-info.job-type.marketing");case"product-management":return(0,i.t)("auth.extra-info.job-type.product-management");default:return(0,i.t)("auth.extra-info.job-type.other")}}},374626:(e,r,n)=>{"use strict";n.d(r,{An:()=>A,E3:()=>T,FZ:()=>E,Hj:()=>b,Iz:()=>w,LJ:()=>g,M2:()=>f,S_:()=>v,fp:()=>_,md:()=>h,p6:()=>S,xP:()=>I,yu:()=>y,zl:()=>m});var i=n(411855),a=n(38580),o=n(646240),s=n(288706),l=n(841563),c=n.n(l),d=n(297666),u=n(614255),p=n(286640);let m=new class{constructor(){this.jotaiAtomStore=(0,a.y$)(),this.unsubscribeCallbacks=new Set,this.rerenderAtomsProviders=new Set}get(e){return this.jotaiAtomStore.get(e)}set(e,...r){return this.jotaiAtomStore.set(e,...r)}sub(e,r,n={}){let i=!1,a=()=>{i||(i=!0,Promise.resolve().then(()=>{i=!1,r()}))},o=this.jotaiAtomStore.sub(e,()=>{try{n.batchMicrotask?a():r()}catch(e){throw console.error(e),e}});return this.unsubscribeCallbacks.add(o),()=>{o(),this.unsubscribeCallbacks.delete(o)}}resetForTests(){for(let e of this.unsubscribeCallbacks)e();for(let e of(this.jotaiAtomStore=(0,a.y$)(),this.unsubscribeCallbacks=new Set,this.rerenderAtomsProviders))e();this.rerenderAtomsProviders=new Set}};function h(e,r){let n=(0,o.Pj)(),[[a,s,l],c]=i.useReducer(r=>{let i=n.get(e);return Object.is(r[0],i)&&r[1]===n&&r[2]===e?r:[i,n,e]},void 0,()=>[n.get(e),n,e]),d=n.get(e);(s!==n||l!==e)&&(c(),d=n.get(e));let p=r?.deferToFrame??!1;return i.useEffect(()=>{let r;let i=n.sub(e,()=>{p?(void 0!==r&&cancelAnimationFrame(r),r=requestAnimationFrame(c)):c()});return c(),()=>{void 0!==r&&cancelAnimationFrame(r),i()}},[n,e,p]),i.useDebugValue(d),d instanceof Promise?(0,u.Y)(d):d}function _(e,r){return[h(e,r),(0,o.Xr)(e)]}function g(e,r){return(0,a.eU)(e=>r(e),(r,n,...i)=>n(e,...i))}function f(e,r=c()){return(0,a.eU)(r=>r(e),(n,i,a)=>{let o=n(e),s="function"==typeof a?a(o):a;r(o,s)||i(e,s)})}function E(e,r){return(0,a.eU)(r=>r(e),(n,i,a)=>{let o=r(n(e),a,n);i(e,o)})}function y(e,r){let n=null,i="write"in e?(0,a.eU)(r=>r(e),(r,n,...i)=>n(e,...i)):(0,a.eU)(r=>r(e));return i.onMount=i=>{let a;try{a=r({target:e,setSelf:i,onSet:e=>{n=e}})}catch(e){throw console.error(e),e}n?.(m.get(e));let o=m.sub(e,()=>{n?.(m.get(e))});return()=>{a?.(),o()}},i}function b(e,r){return y(e,({onSet:e})=>{e(r)})}function I(e){let r={past:[],present:e,future:[]},n=(0,a.eU)(r),i=(0,a.eU)(e=>e(n).present,(e,r,i)=>{let{past:a,present:o}=e(n);i!==o&&r(n,{past:a.concat(o),present:i,future:[]})});return{valueAtom:i,undoAtom:(0,a.eU)(e=>e(n).past.length>0,(e,r)=>{let{past:i,present:a,future:o}=e(n);i.length>0&&r(n,{past:i.slice(0,i.length-1),present:i[i.length-1],future:[a].concat(o)})}),redoAtom:(0,a.eU)(e=>e(n).future.length>0,(e,r)=>{let{past:i,present:a,future:o}=e(n);o.length>0&&r(n,{past:i.concat(a),present:o[0],future:o.slice(1)})}),historyAtom:(0,a.eU)(e=>{let{past:r,present:i,future:a}=e(n);return r.concat(i).concat(a)},(e,i)=>i(n,r))}}function T(e,r,{subscribeToChanges:n}={subscribeToChanges:!1},{debounceTime:i,stringify:o=JSON.stringify,parse:l=JSON.parse}={}){function c(){let n=(0,p.TQ)();if(n){let r=n.getItem(e);if(null!=r)try{let e=l(r);if(void 0!==e)return e}catch(e){}}return r}let u=(0,s.t_)(()=>c()),m=(()=>{let r=r=>{let n=(0,p.TQ)();n&&n.setItem(e,o(r))};return null==i?r:(0,d.s)(r,i)})(),h=(0,a.eU)(e=>e(u),(e,r,n)=>{r(u,n),m(e(u))});return n?y(h,({setSelf:r})=>{let n=n=>{n.key===e&&r(()=>c())};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)}):h}function v({get:e,subscribe:r}){let n=!1,i=(0,a.eU)(0),o=()=>m.set(i,e=>e+1);return i.onMount=()=>{n=!0;let e=r(o);return()=>{n=!1,e(),Promise.resolve().then(o)}},(0,a.eU)(r=>(r(i),Promise.resolve().then(()=>{n||o()}),e()))}function S(e,r){var n;return n=(0,a.eU)(n=>{let i=[];for(let r=0;r<e.length;r++)i[r]=n(e[r]);return r(...i)}),(0,s.mg)(n,e=>e,c())}function w(e,r){let n=(0,s.Iz)(e,r);return n.removeAll=()=>{n.setShouldRemove(()=>!0),n.setShouldRemove(null)},n}function A(e){let[r,n]=i.useState(0);return i.useEffect(()=>{let e=()=>n(r+1);return m.rerenderAtomsProviders.add(e),()=>{m.rerenderAtomsProviders.delete(e)}}),i.createElement(o.Kq,{store:m.jotaiAtomStore},e.children)}},588169:(e,r,n)=>{"use strict";n.d(r,{Cg:()=>E,Ug:()=>m,dZ:()=>_,rd:()=>f,v7:()=>y,xt:()=>b});var i=n(587670),a=n(286640);n(939863);var o=n(22774),s=n(988022),l=n(356390),c=n(38329),d=n(187623),u=n(27087);let p="keyboardLayoutPreference",m="keyboardLayoutPreference",h=new Map(Object.entries(i.aTn).map(([e,r])=>[e,r])),_=new Map(Object.entries(i.aTn).map(([e,r])=>[r,e]));function g(e){let[r]=e.split(":"),n=h.get(r);return r&&n?{layout:n}:{layout:i.aTn.UNKNOWN}}function f({layout:e}){if(!a.x4)return;let r=i.aTn[e];a.x4.setItem(p,r),new d.P().sendToOtherTabs(m,r),function(e){try{let r=c.D.getState();(0,s.uE)("keyboard_layout_preference",r,{layout:i.aTn[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}({layout:e,eventName:"user_manual_change"}),i.glU.reloadShortcuts(e),u.Ay.put("/api/user",{keyboard_preference:i.aTn[e],keyboard_preference_method:"manual"})}function E(e){if(!a.x4)return;a.x4.setItem(p,e);let{layout:r}=g(e);l.Y5&&l.Y5.isReady()&&i.glU.reloadShortcuts(r)}function y(){return function(){if(a.x4){let e=a.x4.getItem(p);if(null!=e)return g(e)}if(!c.D)return{layout:i.aTn.UNKNOWN};let e=c.D.getState().user?.keyboard_layout,r=h.get(e);if(!e||!r)return{layout:i.aTn.UNKNOWN};let n=e?r:i.aTn.UNKNOWN;return E(i.aTn[n]),{layout:n}}().layout}function b(){return 0===Object.keys(i.aTn).length?[]:[{name:"keyboard-layout-menu-option",callback:(e,r,n)=>{n(o.FU({tab:"layout"})),l.Y5.triggerAction("toggle-keyboard-shortcuts")}}]}},915440:(e,r,n)=>{"use strict";n.d(r,{Rs:()=>y,ZA:()=>f,oS:()=>T,p:()=>b});var i=n(411855),a=n(138020),o=n(772824);n(525763);var s=n(560512),l=n(772841);n(776250);var c=n(44948),d=n(358145),u=n(966712),p=n(391388),m=n(743282),h=n(869661),_=n(616457);function g(){let e=i.useContext(h.ob);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function f(){return g().client}function E(e){return!e.hasOwnProperty("enabled")||!!e.enabled}let y=(0,u.kc)().use_subscription_v2?function(e,r,n={}){let o=(0,c.zN)(r,a.lw),u=E(n),h=function(){let[e,r]=i.useState(0);return i.useCallback(()=>r(e=>e+1),[])}(),_=g(),f=n.traceId,y=function(e,r){let n=i.useRef((0,m.g)()),o=(0,d.ZC)(e),s=(0,d.ZC)(r);return void 0===o||void 0===s||o===e&&(0,a.lw)(r,s)||(n.current=(0,m.g)()),n.current}(e,o),b=i.useMemo(()=>_.client?.viewHasStaticQueries(e)?{...o,__requestId:y}:o,[o,y,e,_.client]),I=u?_.mock?_.mock.useSubscription(e,b):_.client?.getViewResult(e,b)??l.F5:s.F4;return i.useEffect(()=>{if(!_.mock&&!1!==u)return _.client?.subscribe(e,b,h,f)},[u,_.client,_.mock,e,f,b,h]),i.useMemo(()=>p.Qw.from(I),[I])}:function(e,r,n={}){let o=E(n),[c,d]=i.useState(o?l.F5:s.F4),u=g(),[m,h]=i.useState(r),_=n.traceId,f=c;return u.mock&&(f=u.mock.useSubscription(e,r)),(0,a.lw)(r,m)||(h(r),d(f=o?l.F5:s.F4)),i.useEffect(()=>{if(u.mock)return;if(!1===o){d(s.F4);return}let r=u.client?.subscribe(e,m,e=>{d(e)},_);return()=>{r?.()}},[o,m,u.client,u.mock,e,_]),i.useMemo(()=>p.Qw.from(f),[f])};function b(e,r,n={}){let a=g(),s=E(n),[l,c]=i.useState({}),[d]=i.useState(()=>new o.A(a.client,()=>c({})));return i.useLayoutEffect(()=>{d.update(e,s?r:[])},[d,e,r,s]),i.useLayoutEffect(()=>()=>d.clear(),[d]),i.useMemo(()=>r.map(e=>({args:e,result:s?p.Qw.from(d.currentResult(e)):p.Qw.disabled()})),[d,r,s,l])}class I{constructor(e,r,n){this.viewArgs=e,this.traceId=(0,m.g)(),this.errors=null,this._isLoading=!0,this.timer=new _.M4({onTimeout:()=>r(this),timeoutMs:n})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function T(e,r,n){let o=i.useRef(null),s=!1!==n.enabled,l=n.subscriptionLogger,c=i.useRef(r),d=o.current;!o.current&&s&&(o.current=new I(r,e=>l.onEvent("stuck",p,e),l.stuckMs));let u=s?o.current.traceId:void 0,p=y(e,r,{enabled:s,traceId:u});if(null===d&&s&&l.onEvent("initiated",p,o.current),!(0,a.lw)(r,c.current)){let e=new I(r,e=>l.onEvent("stuck",p,e),l.stuckMs);o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",p,o.current,{nextTraceId:e.traceId})),o.current=e,l.onEvent("initiated",p,o.current),c.current=r}return i.useEffect(()=>{"loaded"===p.status?o.current?.isLoading&&(o.current.finish(),l.onEvent("loaded",p,o.current)):"errors"===p.status&&o.current?.isLoading&&(o.current.finish(),o.current.errors=p.errors,l.onEvent("error",p,o.current))},[p,p.errors,p.status,l]),i.useEffect(()=>()=>{o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",p,o.current))},[]),p}},286098:(e,r,n)=>{"use strict";n.d(r,{Nc:()=>u,XJ:()=>l,ad:()=>s,f2:()=>d,h7:()=>o,zb:()=>c});var i=n(99506),a=n(711525);function o(e){return{id:e.key,key:e.key,name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url||"",thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta??"",canView:!0,library:{numComponents:e.last_published_at?1:0,numStyles:0,numStateGroups:0,numVariableSets:0},repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1}}function s(e,r,n,a){return{userId:r,resourceType:i.bk.FOLDER,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:n,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,trashedAt:null!=e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:n,name:"",licenseGroup:{name:""},studentTeamAt:null,eduGracePeriod:{id:"",isValid:!1},restrictionsList:[],subscription:i.Qh.OK,gracePeriodEnd:null,canEdit:!1,canAdmin:!1}}}}function l(e,r,n,o){return{userId:r,orgId:n??null,teamId:e.fig_file?.team_id??null,sidebarSectionId:o??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:i.bk.PROTOTYPE,prototype:{id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:a.tT.Loaded,data:e.fig_file.prototype_url}}}}}function c(e,r,n,a){return{userId:r,orgId:n??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:i.bk.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}}function d(e,r,n,a){return{userId:r,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:i.bk.FILE,file:o(e)}}function u(e,r,n,a){return{userId:r,orgId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:a??null,resourceType:i.bk.WORKSPACE,teamId:null,workspace:{...e,orgId:n,colorConfig:null,description:null,orgAccess:"",createdAt:new Date,canAdmin:!1,canView:!1,canCreateTeam:!1,publicLinkControlsSetting:"",publicLinkControlsMaxExpiration:"",hasCustomPublicLinkControlsSetting:!1,isPluginAllowlisted:!1,canRead:!1}}}},886653:(e,r,n)=>{"use strict";function i(e){let r=null;return function(...n){if(null!=r&&r.args.length===n.length){let e=!0;for(let i=0,a=n.length;i<a;i++)if(n[i]!=r.args[i]){e=!1;break}if(e)return r.result}return(r={args:n,result:e(...n)}).result}}function a(e){let r=new WeakMap;return n=>{let i=r.get(n);if(i)return i;let a=e(n);return r.set(n,a),a}}n.d(r,{cm:()=>a,xx:()=>i})},994190:(e,r,n)=>{"use strict";n.d(r,{$G:()=>m,Ad:()=>o,B3:()=>f,Hh:()=>g,Jj:()=>_,S:()=>h,Y7:()=>E,ai:()=>c,f1:()=>p,kJ:()=>d,s$:()=>u});var i=n(742808),a=n(692106);let o=["memory.fullscreen.","performance.fullscreen."],s=!0;function l(e,r){let n=-1/0;return()=>{let i=Date.now()/1e3;i-n>e&&(n=i,r())}}window.addEventListener("error",e=>{if(!s)return;s=!1;let{message:r,filename:n}=e,a=/abort/i.test(r),o=/\/compiled_/.test(n);(0,i.Rh)("unhandled_error",{abort:a,fullscreen:o})});let c=l(30,()=>{(0,i.Rh)("context_lost")}),d=l(30,()=>{(0,i.Rh)("context_restored")});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function p(){(0,i.Rh)("dirty_after_load")}function m(){(0,i.Rh)("consecutive_flushes")}function h(){(0,i.Rh)("consecutive_image_change_skips")}function _(){(0,i.Rh)("image_paste_error")}function g(){(0,i.Rh)("unsaved_changes_bell")}function f(e){(0,i.Rh)("reconnecting_banner",{client:e})}function E(e){return(0,a.x)(e,!0,e.productType)}},453418:(e,r,n)=>{"use strict";n.d(r,{Sd:()=>y,Zp:()=>f,tB:()=>E,wc:()=>p}),n(966712);var i=n(563706);n(286640);var a=n(988022),o=n(356390),s=n(617453),l=n(601538),c=n(38329),d=n(187623),u=n(27087),p=(e=>(e.MouseScrollToZoom="mouse-scroll-wheel-zoom",e.RightClickDragToPan="right-click-drag-to-pan",e))(p||{}),m=(e=>(e.UserManualChange="user_manual_change",e.Onboarding="onboarding",e))(m||{});function h({navigationPreference:e,enabled:r,eventOrigin:n}){var i,o;new d.P().sendToOtherTabs(e,JSON.stringify(r)),function(e){try{let r=c.D.getState();(0,a.uE)("navigation_preferences",r,{navigationPreference:e.navigationPreference,enabled:e.enabled,eventOrigin:e.eventOrigin})}catch(e){}}({navigationPreference:e,enabled:r,eventOrigin:n}),i=e,o=r,c.D.getState().user?.id&&u.Ay.put("/api/user","mouse-scroll-wheel-zoom"===i?{mouse_scroll_to_zoom:o}:{right_click_drag_to_pan:o})}let _=[!0,1,"1","true"];function g(e){return _.includes(e)}function f(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-scroll-wheel-zoom-enabled":"set-scroll-wheel-zoom-disabled")}(g(e))}function E(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-right-click-pan-enabled":"set-right-click-pan-disabled")}(g(e))}function y(){return[{separator:!0,platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",platforms:["!ipad"],hideForQuickCommand:i.Ay.isIpad,"data-onboarding-key":l.oi.ZOOM,callback:()=>{h({navigationPreference:"mouse-scroll-wheel-zoom",enabled:!(0,s.UK)().scrollWheelZoom.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().scrollWheelZoom,propertyValue:!0},{action:"toggle-right-click-pan",platforms:["!ipad"],hideForQuickCommand:i.Ay.isIpad,"data-onboarding-key":l.oi.PAN,callback:()=>{h({navigationPreference:"right-click-drag-to-pan",enabled:!(0,s.UK)().rightClickPan.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().rightClickPan,propertyValue:!0},{separator:!0,platforms:["!ipad"],flags:["!edit"]}]}},951158:(e,r,n)=>{"use strict";function i(e){for(let r in e)return!1;return!0}function a(e){for(let r in e)return r;return null}function o(e,r){let n={...e};for(let[e,i]of Object.entries(r))null!=i&&(n[e]=i);return n}function s(e,r){let n={};for(let[i,a]of Object.entries(e).sort(r))n[i]=a;return n}n.d(r,{Dy:()=>function e(r,n,i){for(let a in r){let o=""===i?a:i+"."+a;Array.isArray(r[a])?n[o]=JSON.stringify(r[a]):"object"==typeof r[a]&&null!==r[a]?e(r[a],n,o):n[o]=r[a]}},Im:()=>i,b$:()=>o,mf:()=>s,o:()=>a}),n(634832)},316082:(e,r,n)=>{"use strict";n.d(r,{y:()=>s});var i=n(411855),a=n(587670),o=n(939683);function s(){let e=(0,o.U)(),r=a.h3O?.getSessionState(),n=function(){let[e,r]=i.useState(navigator.onLine);return i.useEffect(()=>{let e=()=>r(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e}();return i.useEffect(()=>{!n&&r&&r!==a.kul.DETACHED&&e("offline_multiplayer_discrepancy",{isNavigatorOnline:navigator.onLine,isJoined:r===a.kul.JOINED,multiplayerSessionState:r.toString()})},[n,r,e]),n||r===a.kul.JOINED}},183297:(e,r,n)=>{"use strict";n.d(r,{AS:()=>o,En:()=>l,mL:()=>s,u9:()=>c,vs:()=>a}),n(411855);var i=n(27087);let a=25,o="next",s="prev";function l(e,r,n,a=o){return new Promise((o,l)=>{let c=n&&n.pagination,d=c&&(a===s?c.prev_page:c.next_page);(null==c||d)&&(d=d||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${r}`,(0,i.k9)(d).then(({data:e})=>{let r=e.pagination;null==c?c=r:a===s?r.prev_page&&(c.prev_page=r.prev_page):c.next_page=r.next_page,e.meta.pagination=c,o(e.meta)},l))})}function c(e){return!!(!e?.pagination||e.pagination.next_page)}},988261:(e,r,n)=>{"use strict";function i(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}n.d(r,{_H:()=>i})},812115:(e,r,n)=>{"use strict";n.d(r,{R:()=>o,X:()=>a});var i=n(503457);let a=(0,i.kf)("lazy_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,367780))).QuillEditor})}),o=(0,i.kf)("lazy_readonly_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,367780))).ReadOnlyQuillEditor})})},563042:(e,r,n)=>{"use strict";n.d(r,{$J:()=>s,Ee:()=>l,OZ:()=>o,ZB:()=>d,mm:()=>c}),n(236238);var i=n(563706),a=n(126911);function o(e){if(!e.keyShortcutKey)return"";let r=a.y.isApple();var n=r?"\u2318":"Ctrl+";return e.keyShortcutShift&&(n+=r?"\u21E7":"Shift+"),e.keyShortcutOption&&(n+=r?"\u2325":i.Ay.chromeos?"Search+":"Alt+"),`   ${n}${e.keyShortcutKey}`}function s(e){if(!e)return"";if(e.length<1||"<"!==e.charAt(0)||">"!==e.charAt(e.length-1))return e;var r=e.replace(/(<\/[ph]\d?>)/g,"\n");return(r=(r=r.replace(/(<([^>]+)>)/gi,"")).replace(/&nbsp;/g,"\xa0")).replace(/&amp;/g,"&")}let l=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g;function c(e){if(!e)return"";if(e.length>2&&"<"===e.charAt(0)&&">"===e.charAt(e.length-1))return e;var r=e.replace(/^.*/gm,"<p>$&</p>");return(r=(r=r.replace(l,e=>`<a href="${e}">${e}</a>`)).replace(/<p><\/p>/g,"<p><br></p>")).replace(/(\r\n|\n|\r)/gm,"")}function d(e){return""===s(e)?.trim()}},1372:(e,r,n)=>{"use strict";n.d(r,{$9:()=>u,EM:()=>s,J1:()=>c,V$:()=>d,oI:()=>p});var i=n(517655);let a=[],o=0;function s(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}let l=(0,i.Xs)(),c=l,d=l.v2;function u(){c.disconnect();let e=(0,i.Xs)();c=e,d=e.v2,c.connect()}function p(){(0,i.oI)()}window.realtimeClient=l,[].push(function(){o>0||a.forEach(e=>{o+=1,setTimeout(()=>{try{e()}finally{o-=1}},6e4+24e4*Math.random())})})},517655:(e,r,n)=>{"use strict";n.d(r,{EM:()=>h,Xs:()=>f,oI:()=>_});var i,a=n(776250),o=n(966712),s=n(845755),l=n(30637);let c=!1,d=!1,u=[],p=[],m=0;function h(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}function _(){d=!0}let g=-1;function f(){let e=null,r=null,n=null,i=null,u=null,m={},_=!0,f=Date.now(),E=0,y=null,b=!0,I=null,T=()=>{null!=u&&clearInterval(u),null!=i&&i.close(),u=null,i=null,_=!0},v=()=>{y&&(clearTimeout(y),y=null),I&&(window.removeEventListener("online",I),I=null),C()},S=()=>{if(T(),!b||null!=y)return;let e=4+(Math.min(128,4*Math.pow(2,E))-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${e.toFixed(0)} seconds.`),y=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${e.toFixed(0)} seconds.`),v()},1e3*e),E++,I=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&v()},window.addEventListener("online",I)},w=e=>{i&&i.readyState===i.OPEN&&i.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},A=e=>{let r=(0,o.tl)().user_data;if(!r?.id){console.warn("Can't post to me channel without user id available"),(0,a.sx)("Me Channel UserId Missing");return}let n=`/me-${r?.id}`;if(!(n in m)){if(console.warn("We're not subscribed to the me channel"),(0,a.sx)("Me Channel Subscription Missing"),r?.realtime_token){(0,a.sx)("Me Channel Resubscribe");let e=h(r.realtime_token);m[n]=e,w(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,a.sx)("Me Channel No Token");return}}if(!i||i.readyState!==i.OPEN){(0,l.nl)()||console.warn("Sending to me without open websocket"),(0,a.sx)("Me Channel Websocket Missing");return}let s=JSON.stringify([{channel:n,data:e}]);i.send(`pme:${s}`)},N=e=>{delete m[e],i&&i.readyState===i.OPEN&&i.send(`uns:${e}`)},C=()=>{if(d)return;T();let r="";r=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let n=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";r+=`?release_git_tag=${n}&user_id=${window.INITIAL_OPTIONS?.user_data?.id||""}`,(i=new WebSocket(r)).onopen=e=>{for(let e in E=0,console.log(`[Realtime] Connected to ${r}.`),u=setInterval(()=>{i.send("ping")},3e4+5e3*Math.random()-2500),c&&Date.now()-f>6e4&&p.forEach(e=>{setTimeout(e,0)}),c=!0,m)w(m[e])},i.onmessage=r=>{if("pong"===r.data){f=Date.now();return}let n=r.data.substr(0,4);if("tok:"===n){let e=h(r.data.substr(4));m[e.channel]=e;return}let i={};if("ouc:"===n){let e=r.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let r=0;r<e.length;r++)"null"===e[r]&&(e[r]=null);i={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===n||"uns:"===n){let e=r.data.split(":"),n=e[e.length-1];if("ok"===n)return;if(delete m[e[1]],"expired"===n){if(!_)return;_=!1,i={type:"token_expired"}}else{console.warn(r.data);return}}else{try{i=JSON.parse(r.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${r.data}`);return}null!=i.err&&(console.warn("encountered error message from realtime",i.err),S())}e&&e(i)},i.onclose=e=>{i=null,S()}},O={},L=new Set,R=new Map,P={connect:C,disconnect:()=>{b=!1,T(),m={}},setCallback:r=>{e=e=>{let n=e.method,i=Object.keys(e).filter(e=>s.C.has(e)).map(r=>({type:r,value:e[r]})),a=!1;r(e),i.forEach(r=>{let i=O[r.type];i&&Object.keys(i).map(e=>i[e]).filter(e=>e.methods[n]).forEach(n=>{n.callback(r.value,e.method)})})}},setOnSubscribeCallback:e=>{r=e},setOnUnsubscribeCallback:e=>{n=e},subscribe:(e,n)=>{let i=m[e.channel];m[e.channel]=e,i||w(e),!1!==n&&L.add(e.channel),r&&r(e.channel)},unsubscribe:(e,r)=>{if(!1!==r&&L.delete(e),!1===r&&L.has(e))return;let i=R.get(e);i&&i.size>0||(delete m[e],N(e),n&&n(e))},postToMeChannel:e=>{A(e)}},D=()=>{let e=(0,o.tl)().user_data;return e?.realtime_token?h(e.realtime_token):null},k=["post","put","delete"],M=e=>"string"==typeof e?{type:e,token:D(),methods:k}:e,F={subscriptions:m,subscribe:function(e,r){let n=M(e),i=n.token||D();if(!i)return()=>{};let a=(g+=1,`${g}:${performance.now()}`),o=O[n.type]||{},s=n.methods||k,l={};return s.forEach(e=>{l[e]=!0}),o[a]={methods:l,callback:r},O[n.type]=o,(R.get(i.channel)||new Set).add(a),P.subscribe(i,!1),()=>{let{channel:e}=i,r=R.get(e);r?.delete(a);let o=O[n.type];if(o&&(delete o[a],0===Object.keys(o).length)){let e=n.type;delete O[e]}P.unsubscribe(e,!1)}}};return{...P,v2:F}}i=function(){m>0||u.forEach(e=>{m+=1,setTimeout(()=>{try{e()}finally{m-=1}},6e4+24e4*Math.random())})},p.push(i)},99380:(e,r,n)=>{"use strict";n.d(r,{kS:()=>l,q5:()=>d});var i=n(411855);n(188507),n(407436),n(881388);var a=n(939863);n(738269),n(662275),n(356390),n(457630),n(335682),n(611978),n(973131),n(694517),n(493536),n(335650);var o=n(886839);(0,n(237870).Ju)(function(e){return i.createElement(o.R,{title:(0,a.tx)("recordings.restart_modal_title"),confirmText:(0,a.tx)("general.restart"),onConfirm:e.onConfirm,open:e.open,onClose:e.onClose},(0,a.tx)("recordings.restart_modal_confirmation"))},"RECORDING_CONFIRM_RESTART_MODAL"),n(38329),n(966712);var s=n(860601);let l="none-device",c={initializeRecordingMedia:s.Xv,abortRecording:s.lQ,startWalkthroughRecording:s.lQ,stopWalkthroughRecording:s.Xv,restartWalkthroughRecording:s.lQ,togglePauseRecording:s.lQ,isRecording:!1,isPaused:!1,mediaStream:void 0,getRecordingDataForSinatraCreate:s.pp,getRecordingLengthMs:s.dD},d=i.createContext(c)},964937:(e,r,n)=>{"use strict";n.d(r,{F:()=>o});var i=n(109388),a=n(775541);function o(e,r=document.createElement("div")){let n=(0,a.H)(r);return(0,i.flushSync)(()=>{n.render(e)}),r.innerHTML}},153234:(e,r,n)=>{"use strict";n.d(r,{AF:()=>U,Am:()=>W,BV:()=>K,C0:()=>D,Fk:()=>d,Ht:()=>G,M5:()=>P,P_:()=>B,Pt:()=>h,Z7:()=>x,_3:()=>M,aH:()=>E,aQ:()=>R,c1:()=>m,cC:()=>f,cZ:()=>O,dp:()=>I,fA:()=>b,fo:()=>F,ht:()=>p,iQ:()=>H,kz:()=>u,o6:()=>_,of:()=>V,qP:()=>T,rf:()=>L,uA:()=>g,v_:()=>k});var i=n(411855),a=n(459401),o=n(851061),s=n(30637),l=n(966712),c=n(599445);function d(){return!!s.b_||(0,s.lZ)()||(0,l.kc)()&&(0,l.kc)().interaction_recorder}function u(e){d()&&(0,c.Is)(e)}function p(e){d()&&(0,c.nL)(e)}function m(e){let r;r="string"==typeof e?e:e?.recordingKey;let n=i.useMemo(()=>({recordingKey:r}),[r]);return i.useCallback((...e)=>h(n,...e),[n])}function h(e,...r){let n;return(n="string"==typeof e?e:e?.recordingKey)===E||r.includes(E)?E:n?n+"."+r.join("."):n}class _ extends i.PureComponent{recordingKey(){return this.props.recordingKey}componentDidMount(){u(this)}componentDidUpdate(e,r){u(this)}componentWillUnmount(){p(this)}}class g extends i.Component{recordingKey(){return this.props.recordingKey}componentDidMount(){u(this)}componentDidUpdate(e,r,n){u(this)}componentWillUnmount(){p(this)}}function f(e){let r=i.useMemo(()=>({recordingKey:()=>e}),[e]);return i.useLayoutEffect(()=>(u(r),()=>p(r)),[r]),r}let E=c.aH,y=new Set(["nativeEvent","target","currentTarget"]);function b(e,r,n){if(!d()||e.recordingKey()===E)return n;let i=[{}];return(0,c.YJ)(e,r,e=>{if(!(0,c.k3)())return n(e);let r=[];return(0,a.asArray)(e).forEach((e,n)=>{e&&"object"==typeof e&&!Array.isArray(e)?r[n]=new Proxy(e,{get(e,r){let a=e[r],o=i[n];return void 0===o&&(o=i[n]={}),Reflect.has(S,r)||y.has(r)||(o[r]=a),a}}):(i[n]=e,r[n]=e)}),n(Array.isArray(e)?r:r[0])},{record(){let e=i;return i=[{}],1!==e.length||Array.isArray(e[0])?e:e[0]},playback(e){if(!e)return e;function r(e){return"object"!=typeof e||Array.isArray(e)?e:{...S,target:N,currentTarget:N,...e}}return"object"==typeof e?Array.isArray(e)?e.map(r):r(e):e}})}function I(e,r,n,i={}){return d()&&e.recordingKey()!==E?(0,c.YJ)(e,r,n,i):n}function T(e,r,n,a){let o=f(e);return i.useMemo(()=>I(o,r,n,a),[o,r,n,a])}function v(e){let r={};return e.altKey&&(r.altKey=!0),e.shiftKey&&(r.shiftKey=!0),e.metaKey&&(r.metaKey=!0),e.ctrlKey&&(r.ctrlKey=!0),r}let S={preventDefault(){},stopPropagation(){}};function w(e){let r={};return r.altKey=!!e.altKey,r.ctrlKey=!!e.ctrlKey,r.metaKey=!!e.metaKey,r.shiftKey=!!e.shiftKey,r}function A(e){let r=e.currentTarget?.dataset?.testid;return r?{currentTarget:r}:{}}let N={value:"",focus(){},blur(){},setPointerCapture(){},releasePointerCapture(){}};function C(e){if(e.currentTarget){let r=document.querySelector(`[data-testid="${e.currentTarget}"]`);if(!r)throw Error(`Expected to find element with data-testid="${e.currentTarget}" for currentTarget`);return{currentTarget:new Proxy(r,{get(e,r){switch(r){case"setPointerCapture":case"releasePointerCapture":return()=>{};default:let n=e[r];if("function"==typeof n)return n.bind(e);return n}}})}}return{currentTarget:N}}function O(e,r,n,i){return I(e,r,n,{record(e){e||(e={});let r={buttons:e.buttons,...v(e),...i&&i.recordMetadata?i.recordMetadata(e):{},...A(e)};return i&&i.includeTarget&&(r.target={tagName:e.target.tagName}),r},playback:e=>({clientX:0,clientY:0,button:0,buttons:e.buttons,target:i?.includeTarget?e.target:N,...w(e),...S,...C(e),...i&&i.playbackMetadata?i.playbackMetadata(e):{}})})}function L(e,r,n,a){let o=f(e);return i.useMemo(()=>O(o,r,n,a),[o,r,n,a])}function R(e,r,n){return I(e,r,n,{record(e){let r=e.dataTransfer.files,n={};if(r){let e=[];for(let n of r){let r=e.length;e.push("(failed to read file)"),(function(e){return new Promise((r,n)=>{let i=new FileReader;i.onload=()=>r(new Uint8Array(i.result)),i.onerror=e=>n(e),i.readAsArrayBuffer(e)})})(n).then(n=>{let i=(0,o.encode)(n);i.length>1e3&&(console.warn("Recording of drop events is only supported for small files"),i="(file too large)"),e[r]=i})}n.files=e}return{buttons:e.buttons,...v(e),dataTransfer:n}},playback(e){let r={};return e.dataTransfer.files&&(r.files=e.dataTransfer.files.map(e=>new Blob([(0,o.decode)(e)]))),{clientX:0,clientY:0,button:0,buttons:e.buttons,...w(e),...S,dataTransfer:r}}})}function P(e,r,n,i){return I(e,r,n,{record:e=>(e||(e={}),{buttons:e.buttons,...v(e),...i&&i.recordMetadata?i.recordMetadata(e):{}}),playback:e=>({deltaX:0,deltaY:0,deltaMode:WheelEvent.DOM_DELTA_PIXEL,clientX:0,clientY:0,button:0,buttons:e.buttons,...w(e),...S,...i&&i.playbackMetadata?i.playbackMetadata(e):{}})})}function D(e,r,n,i){return I(e,r,n,{record:e=>({key:e.key,keyCode:e.keyCode,which:e.keyCode,type:r,...v(e),...i&&i.recordMetadata?i.recordMetadata(e):{},...A(e)}),playback:e=>({key:e.key,keyCode:e.keyCode,which:e.keyCode,type:r,...w(e),...S,...C(e),...i&&i.playbackMetadata?i.playbackMetadata(e):{}})})}function k(e,r,n,a){let o=f(e);return i.useMemo(()=>D(o,r,n,a),[o,r,n,a])}function M(e,r,n){return I(e,r,n,{record(e){let n=e.event;return{key:n.key,keyCode:n.keyCode,which:n.keyCode,type:r,...v(n)}},playback:e=>({event:{key:e.key,keyCode:e.keyCode,...w(e),...S},accept:()=>{}})})}function F(e,r,n){let a=f(e);return i.useMemo(()=>M(a,r,n),[a,r,n])}function x(e,r,n){return I(e,r,n,{record:e=>e.currentTarget instanceof HTMLInputElement&&"checkbox"===e.currentTarget.type?{checked:e.currentTarget.checked}:{value:e.currentTarget.value},playback(e){let r={value:e.value,checked:e.checked};return{target:r,currentTarget:r,...S}}})}function U(e,r,n){let a=f(e);return i.useMemo(()=>x(a,r,n),[a,r,n])}function B(e,r,n){return I(e,r,n,{record:e=>({}),playback:e=>({...S})})}function V(e,r,n){let a=f(e);return i.useMemo(()=>B(a,r,n),[a,r,n])}function G(e,r,n){return I(e,r,n,{record:e=>({}),playback:e=>({})})}function H(e,r,n){let a=f(e);return i.useMemo(()=>G(a,r,n),[a,r,n])}function W(e,r,n,i){return I(e,r,n,{record(e){e||(e={});let r={buttons:e.buttons,...v(e),...i&&i.recordMetadata?i.recordMetadata(e):{},...A(e)};return i&&i.includeTarget&&(r.target={tagName:e.target.tagName}),r},playback(e){let r=i&&i.includeTarget?{target:e.target}:{};return{clientX:0,clientY:0,button:0,buttons:e.buttons,pointerId:0,pointerType:"mouse",...w(e),...r,...S,...C(e),...i&&i.playbackMetadata?i.playbackMetadata(e):{}}}})}function K(e,r,n,a){let o=f(e);return i.useMemo(()=>W(o,r,n,a),[o,r,n,a])}},522739:(e,r,n)=>{"use strict";n.d(r,{D8:()=>c,GG:()=>u,Nf:()=>_,lt:()=>p,mv:()=>h,oj:()=>d,u2:()=>m});var i=n(411855),a=n(564974),o=n(672517),s=n(153234);class l extends s.o6{constructor(){super(...arguments),this.onClick=s.cZ(this,"click",e=>this.props.onClick?this.props.onClick(e):s.aH),this.onContextClick=s.cZ(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):s.aH),this.onDoubleClick=s.cZ(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):s.aH),this.onMouseDown=s.cZ(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):s.aH),this.onMouseUp=s.cZ(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):s.aH),this.onMouseMove=s.cZ(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):s.aH),this.onMouseEnter=s.cZ(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):s.aH),this.onMouseLeave=s.cZ(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):s.aH),this.onPointerDown=s.Am(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):s.aH),this.onPointerUp=s.Am(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):s.aH),this.onPointerMove=s.Am(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):s.aH),this.onKeyUp=s.C0(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):s.aH),this.onKeyDown=s.C0(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):s.aH),this.onFocus=s.Ht(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):s.aH),this.onBlur=s.Ht(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):s.aH)}render(){let{recordingKey:e,forwardedRef:r,dataTestId:n,...i}=this.props;return this.recordingKey()&&(this.props.onClick&&(i.onClick=this.onClick),this.props.onDoubleClick&&(i.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(i.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(i.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(i.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(i.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(i.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(i.onContextMenu=this.onContextClick),this.props.onKeyUp&&(i.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(i.onKeyDown=this.onKeyDown),this.props.onFocus&&(i.onFocus=this.onFocus),this.props.onBlur&&(i.onBlur=this.onBlur),this.props.onPointerDown&&(i.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(i.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(i.onPointerMove=this.onPointerMove)),n&&(i["data-testid"]=n),this.node(i,r)}}class c extends l{node(e,r){return i.createElement("div",{...e,ref:r})}}c.displayName="RecordableDiv",(0,o.tf)(c);class d extends l{node(e,r){return i.createElement("span",{...e,ref:r})}}d.displayName="RecordableSpan";class u extends l{node(e,r){return i.createElement("button",{...e,ref:r})}}u.displayName="RecordableButton";class p extends l{node(e,r){return i.createElement("a",{...e,ref:r})}}p.displayName="RecordableA";class m extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return i.createElement("input",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}m.displayName="RecordableInput";class h extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return i.createElement("textarea",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}function _({children:e}){let r=(0,i.useMemo)(()=>s.Fk()?(e,r)=>{let n=s.cC(r.recordingKey);return(0,i.useMemo)(()=>{if(!e||!r.recordingKey)return e;let i=s.fA(n,r.eventName,r=>Array.isArray(r)?e(...r):e(r));return(...e)=>i(e)},[n,r.eventName,e,r.recordingKey])}:g,[]);return i.createElement(a.g.Provider,{value:{useInteraction:r}},e)}function g(e){return e}h.displayName="RecordableTextarea"},733334:(e,r,n)=>{"use strict";n.d(r,{F:()=>a}),n(296210);let i=/[\u202A-\u202E\u2060-\u206F]/g;function a(e){return e?e.replace(i,"").normalize():e}},36381:(e,r,n)=>{"use strict";n.d(r,{We:()=>o,qV:()=>a});var i=n(851061);async function a(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}function o(e,r){return s(e,r)}async function s(e,r){let n=r.split(".");if(2!==n.length)throw Error("Could not parse message and nonce.");let a=n[0],o=n[1],s=(0,i.decode)(a),l=(0,i.decode)(o),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,l);return new TextDecoder().decode(c)}},776621:(e,r,n)=>{"use strict";n.d(r,{$D:()=>x,Bc:()=>w,DZ:()=>v,ED:()=>z,Lo:()=>Y,NU:()=>o.NUh,TX:()=>k,Tm:()=>L,XM:()=>A,Z8:()=>H,Zx:()=>f,fj:()=>j,h$:()=>K,hi:()=>C,it:()=>y,kF:()=>S,mR:()=>R,sC:()=>N,us:()=>U,uy:()=>F,wp:()=>V,x1:()=>q,xO:()=>B,xZ:()=>O,xg:()=>g,xi:()=>$,xn:()=>E,yO:()=>_,yR:()=>M,zV:()=>I});var i=n(172601),a=n(892149),o=n(587670),s=n(358204),l=n(412012),c=n(966712),d=n(693160),u=n(479296),p=n(878227);n(951158);var m=n(286640);let h=(0,c.kc)().datadog_rum_report_sentry_errors?n(402958).L:void 0,_=[/a\[b\]\.target\.className\.indexOf is not a function/,/\(event\.target\.className \|\| ""\)\.indexOf is not a function/,/XHR for ".*" failed with status/,/Endpoint requires authenticated user/],g=[/\bintercomcdn\.com\b/,/\bkaspersky-labs\.com\b/,/\bchrome-extension:\/\//,/\bmoz-extension:\/\//,/\bsafari-extension:\/\//],f=new i.b("sentry");function E(e){for(let r of e.exception?.values||[])for(let e of r.stacktrace?.frames||[])e.filename&&(e.filename=(0,d.Br)(e.filename));e.request?.url&&(e.request.url=(0,d.Br)(e.request.url)),"string"==typeof e.tags?.url&&(e.tags.url=(0,d.Br)(e.tags.url))}function y(e){let{category:r,data:n}=e;if("xhr"===r||"fetch"===r){let e=n?.url;if(e&&(e.match(/segment.io/)||e.startsWith("/api/figment-proxy")||e.startsWith(`${location.origin}/api/figment-proxy`)))return null;n&&e&&e.startsWith("data:")&&(n.url=`${e.substring(0,36)}... (truncated from ${e.length} characters)`)}return f.trigger("breadcrumb",e),e}let b=!!(0,c.tl)().frontend_sentry_dsn&&!(0,c.tl)().local_dev_on_cluster,I=b,T=(0,c.kc)().slog_to_console||!1;var v=(e=>(e.Critical="critical",e.Major="major",e.Minor="minor",e.Trivial="trivial",e))(v||{});function S(e,r){b&&(s.NA(e,r),h?.setGlobalContextProperty(e,r))}function w(e){b&&(s.Wt(e),h&&h.setGlobalContext({...e,...h.getGlobalContext()}))}function A(e,r){b&&s.o(e,r)}function N(e){S("file.key",e.key),null===e.file_repo_id?S("branching","not enabled"):(S("branching_repo",e.file_repo_id),null===e.source_file_key?S("branching","main branch"):S("branching","user branch"))}function C(e){return e&&"filePath"in e}function O(e){S("file.key",e.key),null===e.fileRepoId?S("branching","not enabled"):(S("branching_repo",e.fileRepoId),null===e.sourceFileKey?S("branching","main branch"):S("branching","user branch"))}function L(e){e&&s.gV({id:e})}function R(e){e&&s.NA("org.id",e)}let P="figma.reporting",D="user.plan.max";function k(){return function(){let e;let r=(0,m.OZ)();if(!r)return;let n=r.get(P);if(n){try{e=JSON.parse(atob(n))}catch(e){r.delete(P);return}e?.uhp&&(0,m.DN)().set("user.plan.max",e.uhp),r.delete(P),r.set(P,btoa(JSON.stringify(e)),{path:"/api/figment-proxy/monitor"})}}(),(0,m.DN)().get(D)}function M(){let e=k();e&&(e&&s.NA(D,e),(0,p.v)({user_plan_max:e})),(0,p.v)({webpack:"true"})}function F(e){e&&s.NA("server_release",e)}let x=(0,u.n)((e,r,n)=>{let i;if(!(r.reportedToSentry||r.cause?.reportedToSentry))return r.reportedToSentry=!0,T&&console.error(r,n),b&&(s.v4(function(a){a.setTag("area",e);let o=h?.getInternalContext()?.session_id;if(o&&(a.setTag("rum_session_id",o),a.setContext("rum",{session_link:`https://go/dd/rum/sid/${o}`})),r.sentryTags)for(let e in r.sentryTags)a.setTag(e,r.sentryTags[e]);i=s.Cp(r,n)}),h&&h.addError(r,{area:e,...r.sentryTags})),i},"reportErrorToSentry");function U(e){T&&console.error(e),b&&s.wd(e)}function B(e,r){null==r&&x(e,Error(`value is ${void 0===r?"undefined":"null"}`))}function V(){let e=(0,c.tl)().release_manifest_git_commit;if(I&&e){let e=l.BF();e.startSession(),e.captureSession()}}window.sentryErrorReporter=e=>{s.Cp(e)};let G=null;function H(e){G=e}function W(e,r,n,i,a){if((a={...a||{}}).logToConsole=a.logToConsole??o.NUh.DEFAULT,a.createSentryBreadcrumb=a.createSentryBreadcrumb??!0,a.modeEventName=a.modeEventName??"",a.forwardToDatadog=a.forwardToDatadog??!1,a.figmentOnly=a.figmentOnly??!1,a.reportAsSentryError=a.reportAsSentryError??!1,a.includePayloadAsTags=a.includePayloadAsTags??!1,a.logToConsole===o.NUh.ALWAYS||a.logToConsole===o.NUh.DEFAULT&&T)({debug:console.debug,info:console.info,warning:console.warn,error:console.error})[e].call(console,r,n,i);else{let o=window.FigmaMobile;o?.logMessageToNative&&o.logMessageToNative({severity:e,category:r,message:n,filePath:a.filePath,lineNumber:a.lineNumber,data:i})}if(a.createSentryBreadcrumb&&I&&null!=e){let a={level:e};n&&(a.message=n),i&&(a.data=i),r&&(a.category=r),s.ZQ(a)}if(a.reportAsSentryError){let e=Error(r?`[${r}] ${n}`:n);a.filePath&&(e.filePath=a.filePath,e.lineNumber=a.lineNumber),a.includePayloadAsTags?s.v4(r=>{if(i)for(let[e,n]of Object.entries(i))r.setTag(e,n);s.Cp(e)}):s.Cp(e)}if(a.modeEventName){let e="";for(let r of a.modeEventName)"A"<=r&&r<="Z"?e+=r.toLowerCase():"-"===r?e+="_":e+=r;G?.(e,i,a.forwardToDatadog)}}function K(e,r){!(0,c.kc)().numeric_id_sentry_monitoring||!e||!window.scheduler||(0,c.kc)().numeric_id_sentry_sample&&Math.random()>.05||scheduler.postTask(()=>{let n=(0,d.vn)(r.pathname),i=`${r.verb} ${n}`,a=[];JSON.parse(JSON.stringify(e),(e,r)=>(("id"===e||e.endsWith("_id")||e.endsWith("_id_or_key"))&&"number"==typeof r?a.push([e,r]):"_ids"===e.slice(-4)&&Array.isArray(r)&&r.some(e=>"number"==typeof e)&&a.push([e,r]),r)),a.length&&q("alertOnNumericIds","numeric ids found in payload",{context:i,obj:e,foundPairs:a},{logToConsole:o.NUh.ALWAYS,reportAsSentryError:!0})},{priority:"background"})}function j(e,r,n,i,o,s,l){let c=(0,a.getSentrySeverityForFullscreenLevel)(e);if(!c)throw Error("unknown severity");l.filePath=n,l.lineNumber=i,W(c,r,o,s,l)}function z(e,r,n,i){W("debug",e,r,n,i)}let Y=(0,u.D)((e,r,n,i)=>{W("info",e,r,n,i)});function $(e,r,n,i){W("warning",e,r,n,i)}let q=(0,u.D)((e,r,n,i)=>{W("error",e,r,n,i)})},708389:(e,r,n)=>{"use strict";var i;n.d(r,{f:()=>i}),(e=>{let r=(e,r)=>e<r?-1:1,n=Intl.Collator().resolvedOptions().locale+"-u-co-emoji";e.LEXICOGRAPHICALLY=(e,i)=>"string"!=typeof e?r(e,i):RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(e)&&RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(i)?e.localeCompare(i,n):e.localeCompare(i),e.BY_DATETIME=(e,n)=>{if("string"!=typeof e)return r(e,n);let i=Date.parse(e),a=Date.parse(n);return i&&a?a-i:r(e,n)},e.byProperty=function(e,n=r){return(r,i)=>r[e]===i[e]?0:n(r[e],i[e])},e.byComparators=function(...e){return(r,n)=>{for(let i=0;i<e.length;i++){let a=(0,e[i])(r,n);if(0!==a)return a}return 0}},e.reverse=function(e){return(r,n)=>-1*e(r,n)}})(i||(i={}))},489604:(e,r,n)=>{"use strict";n.d(r,{Dv:()=>o,ah:()=>a,uc:()=>s});var i=n(38580);let a=(0,i.eU)(!1),o=(0,i.eU)(!1),s=(0,i.eU)(!1)},966981:(e,r,n)=>{"use strict";n.d(r,{A:()=>u,M:()=>d});var i=n(411855),a=n(157663),o=n(33018),s=n(19266),l=n(742668);function c(){a.k.warn("[Sprigma] Detected attempt to use Sprig where it hasn\u2019t been setup. This is a no-op")}let d=(0,i.createContext)({sendMessage(...e){c(),s.An.sendMessage(...e)},listenForMatchingMessage:e=>(c(),s.An.listenForMatchingMessage(e)),setCallbacks(...e){c(),s.An.setCallbacks(...e)},tearDown(...e){c(),s.An.tearDown(...e)}});function u(){let e=(0,i.useContext)(d),r=(0,i.useCallback)((...r)=>{e.sendMessage({type:l.G.Call,content:{args:r}})},[e]),n=(0,i.useCallback)((e,{method:n=o.Vl.USER,samplingRateNumerator:i=1,samplingRateDenominator:s},...l)=>{try{let c=new o.uP(i,s);a.k.debug("[Sprigma] Attempted to track event with sampling:",{eventName:e,method:n,samplingRate:c.toString(),extraArgs:l}),o.Ay[n](e,c)?r("track",(0,o.Sx)(e,n,c),...l):a.k.debug("[Sprigma] Skipped tracking event due to sampling:",e)}catch(e){if(e instanceof o.f8)a.k.error("[Sprigma] Call to `sprigTrackWithSampling` with invalid sampling rate, tracking attempt skipped",arguments,e);else throw e}},[r]);return{Sprig:r,sprigTrackWithSampling:n,setProperty:(0,i.useCallback)((r,n)=>{e.sendMessage({type:l.G.SetProperty,content:{name:r,value:n}})},[e]),getProperty:(0,i.useCallback)(async r=>{let n=e.listenForMatchingMessage(l.G.GetProperty,e=>e.content.name===r);return e.sendMessage({type:l.G.GetProperty,content:{name:r}}),(await n)?.content.value},[e])}}},742668:(e,r,n)=>{"use strict";n.d(r,{G:()=>i});var i=(e=>(e.SDKReady="sdkReady",e.Call="call",e.SetProperty="setProperty",e.GetProperty="getProperty",e.SetContainerDimensions="setContainerDimensions",e.Error="error",e.GetPermissionToShowSurvey="getPermissionToShowSurvey",e.SurveyClosed="surveyClosed",e))(i||{})},88570:(e,r,n)=>{"use strict";n.d(r,{A:()=>g});var i=n(411855),a=n(511617),o=n(517333),s=n(966712),l=n(38580),c=n(374626),d=n(30637),u=n(111538),p=n(966981),m=n(19266);n(742668);let h=(0,l.eU)([]);function _(e,r){let{country:n,region:i}=e;return r.some(({country:e,region:r})=>(!e||n===e)&&(!r||i===r))}function g({children:e,onAttemptToShowSurvey:r,onSurveyClose:n,geofence:l={}}){var g;let f=(0,c.md)(u.EA),E=(g=function(){let e=(0,s.tl)();return{country:e.iso_code,region:e.viewer_region}}(),!(void 0!==l.exclude&&_(g,l.exclude))&&(void 0===l.include||_(g,l.include))),y=!(0,a.GZ)()&&!(0,d.lZ)()&&!(0,s.tl)().e2e_traffic&&f&&E&&(0,s.kc)().sprig_enabled&&!o.S8,[b,I]=(0,i.useState)(m.An),T=(0,c.md)(h);return(0,i.useEffect)(()=>{I(e=>(e.tearDown(),y?new m.Ay:m.An))},[y]),(0,i.useEffect)(()=>{b.setCallbacks({onAttemptToShowSurvey:r,onSurveyClose:n})},[r,n,b]),(0,i.useLayoutEffect)(()=>{m.Ay.setScreenAreasToAvoid(T)},[T]),i.createElement(p.M.Provider,{value:b},e)}(0,l.eU)(null,(e,r,n)=>{let i=e(h);r(h,[...i,n])}),(0,l.eU)(null,(e,r,n)=>{let i=e(h),a=i.indexOf(n);-1!==a&&r(h,i.slice(0,a).concat(i.slice(a+1)))})},218881:(e,r,n)=>{"use strict";n.d(r,{Fj:()=>h.Fj,I7:()=>y,aH:()=>p.aH,f6:()=>m.EvaluationReason,gP:()=>h.gP,hW:()=>g,iO:()=>m.DynamicConfig,sq:()=>p.sq,vs:()=>f,w$:()=>_.w});var i=n(411855);n(188507);var a=n(358145),o=n(966712),s=n(374626),l=n(38580);n(931828),n(582947);var c=n(697165),d=n(127351),u=n(624601),p=n(977373),m=n(581749),h=n(422705),_=n(596272);async function g(e,r,n,i=!1){let a=s.zl.get(u.ZJ);return(n||(0,o.kc)().statsig_suspend)&&await a.initCompletedPromise,(0,c.Tq)(s.zl.get(u.ZJ),e,"getExperiment",r,i)}function f(e,r,n){return g(e,r,n,!0)}function E(e,r,n){let{userVersion:o}=(0,i.useContext)(d.B),l=(0,a.ZC)(o),p=(0,s.md)(u.ZJ),m=(0,i.useRef)(null);return{getConfig:(0,i.useCallback)(()=>((l!==o||null==m.current)&&(m.current=(0,c.Tq)(p,e,"useExperiment",r,n)),m.current),[e,r,l,p,o,n])}}n(959641);let y=(0,o.kc)().statsig_suspend?function(e,r,n){return(0,s.md)(u.u_),E(e,r,n)}:E;(0,o.kc)().statsig_suspend,(0,s.Iz)(({experimentName:e,keepDeviceValue:r,disableExposureLogging:n})=>(0,l.eU)(async i=>{await i(u.u_),i(u.gR);let a=i(u.ZJ),o=null;return()=>(null==o&&(o=(0,c.Tq)(a,e,"getExperiment",r,n)),o)}),(e,r)=>e.experimentName===r.experimentName&&e.disableExposureLogging===r.disableExposureLogging&&e.keepDeviceValue===r.keepDeviceValue)},96328:(e,r,n)=>{"use strict";n.d(r,{$M:()=>I,Cb:()=>o,DV:()=>g,EJ:()=>m,FS:()=>C,H9:()=>A,LD:()=>y,Qp:()=>O,Qt:()=>h,Rw:()=>N,VZ:()=>s,Vs:()=>w,YH:()=>u,Yx:()=>E,Zr:()=>a,_5:()=>l,fs:()=>v,gU:()=>S,hX:()=>d,lH:()=>p,sy:()=>T,td:()=>b,vE:()=>c});var i=n(178466);function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function c(e){return a(e.split("_").join(" ").toLocaleLowerCase())}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(var i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}function p(e){return String.prototype.toWellFormed?e.toWellFormed():function(e){function r(e){return(63488&e)==55296}let n="";for(let i=0;i<e.length;++i){let a=e.charCodeAt(i);if(!r(a)){n+=e.charAt(i);continue}if(!((1024&a)!=0)&&i+1<e.length){let a=e.charCodeAt(i+1);if(r(a)&&(1024&a)!=0){n+=e.charAt(i)+e.charAt(i+1),++i;continue}}n+="\uFFFD"}return n}(e)}function m(e,r){return e.length>r?e.slice(0,r-1).trimEnd()+"\u2026":e}function h(e){let r=[];for(let n=0;n<e.length;n++){let i=function(e,r){let n=e.charCodeAt(r);if(Number.isNaN(n))return"";if(n<55296||n>57343)return e.charAt(r);if(55296<=n&&n<=56319){if(e.length<=r+1)throw Error("High surrogate without following low surrogate");let n=e.charCodeAt(r+1);if(56320>n||n>57343)throw Error("High surrogate without following low surrogate");return e.charAt(r)+e.charAt(r+1)}throw Error("Not the start of a single- or multibyte-character")}(e,n);n+=i.length-1,r.push(i)}return r}let _={numeric:!0,sensitivity:"base"};function g(e,r,n=_){let a=(0,i.Gq)().getPrimaryLocale(!1),o=new Intl.Collator(a,n);return e.sort((e,n)=>o.compare(r(e),r(n)))}let f={};function E(e,r="conjunction"){let n=(0,i.Gq)().getPrimaryLocale(!1);return f[r]||(f[r]=new Intl.ListFormat(n,{type:r})),f[r].format(e)}function y(e,r,n){return n=n||`${r}s`,1===e?r:n}function b(e,r,n){return null==e&&(e=0),`${e} ${y(e,r,n)}`}function I(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}function T(e){return encodeURIComponent(e.replace(/ /g,"-"))}function v(e){var r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ .\-_\/\\:;|,&+=*]/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/\-+/g,"-").replace(/^\-+/,"").substring(0,100).replace(/\-+$/,"");return T(r=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"].includes(r)?"":r)}let S=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function w(e){for(var r=0,n=e.length>>>2,i=new Uint8Array(3*n),a=0,o=[],s=0;s<127;s++)o[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(s));for(;r<n<<2;){var l=o[e.charCodeAt(r++)],c=o[e.charCodeAt(r++)],d=o[e.charCodeAt(r++)],u=o[e.charCodeAt(r++)];i[a++]=l<<2|c>>>4,d>=0&&(i[a++]=c<<4|d>>>2),u>=0&&(i[a++]=d<<6|u)}return a===i.length?i:i.subarray(0,a)}function A(e){for(var r="",n=e.length,i=0;i<n;i+=1024)r+=String.fromCharCode.apply(String,e.subarray(i,i+1024));return btoa(r)}function N(e){for(var r="",n=0;n<e.length;n++)r+=("00"+e[n].toString(16)).slice(-2);return r}function C(e){return e.replace(/\s+/g,"")}function O(e,r){return C(e)===C(r)}},650322:(e,r,n)=>{"use strict";n.d(r,{GU:()=>c,SH:()=>s,cn:()=>o});var i=n(181912);n(668860);var a=n(966712);function o(e){return!!e.student_validated_at}function s(e,r){return{hasGracePeriod:!!(e&&r in e),isInValidGracePeriod:(e&&e[r]?l(e,r):0)>0}}let l=(e,r)=>Math.ceil((0,i.A)(e[r].createdAt).add(7,"days").diff((0,i.A)(),"days",!0));function c(e,r,n,i){let o=s(e,n);if(!(0,a.kc)().edu_onboarding_grace_period||r||!i||!o.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let l=o.isInValidGracePeriod;return{showReminder:l,showAccessRestricted:!l}}},30637:(e,r,n)=>{"use strict";n.d(r,{Lg:()=>d,Ns:()=>i.k3,PN:()=>c,b_:()=>a,lZ:()=>l,nl:()=>s});var i=n(599445);let a=!1,o="/test/interactions"===window.location.pathname||"/test/interactions/proto"===window.location.pathname||"/test/interactions/deck"===window.location.pathname||"/test/interactions/presenter"===window.location.pathname;function s(){return o}function l(){return o}function c(){return o||(0,i.k3)()}function d(){try{return!1}catch{return!1}}},913016:(e,r,n)=>{"use strict";function i(e){return a(24*e)}function a(e){return 300*Math.round(Date.now()/3e5)-3600*e}function o(e){return{seconds:Math.floor(e%60),minutes:Math.floor(e/60)}}n.d(r,{G5:()=>i,S6:()=>a,TL:()=>s,_d:()=>o});let s=new Date("2024-10-10T15:00:00Z")},520581:(e,r,n)=>{"use strict";n.d(r,{E:()=>p});var i=n(411855),a=n(179479),o=n(69961),s=n(148011),l=n(985740),c=n(863359),d=n(201547),u=n(951783);function p(e){return(0,s.TR)()?i.createElement(m,{...e}):i.createElement(i.Fragment,null,e.children)}function m({name:e,children:r,alsoTrack:n}){let p=(0,a.F)(n),m=(0,s.MF)({name:e,alsoTrackRef:p}),h=(0,s.ps)(m),{error:_,trackablePath:g}=h,f=(0,s.MF)(()=>(0,s.ET)(g,m)),E=(0,i.useCallback)(e=>{!_&&(0,s.VC)(g)&&(0,l.S)({trackablePath:g.map(e=>e.name),interactableId:m.name,trackingMethod:"automatic",...e},f())},[g,m,f,_]),y=(0,u.s)(E),b=(0,o.o3)(o.nt.trackableDebug),I=(0,s.MF)(()=>(0,s.R8)({componentName:"AutoInteractable",name:e,error:_,alsoTrackedProperties:f()}));return r=(0,d.C)({children:r,isDebugMode:b,name:e,color:_?"red":"blue",depth:g.length+1,getTooltipText:I}),i.createElement(c.f.Provider,{value:h},i.createElement("div",{className:"displayContents",...y},r))}},763658:(e,r,n)=>{"use strict";n.d(r,{k:()=>d});var i=n(411855),a=n(179479),o=n(69961),s=n(148011),l=n(863359),c=n(201547);function d(e){return(0,s.TR)()?i.createElement(u,{...e}):i.createElement(i.Fragment,null,e.children)}function u({name:e,trackingEnabled:r,trackImpressions:n=!0,alsoTrack:d,children:u}){let p=(0,a.F)(d),m=(0,s.U2)({name:e,trackingEnabled:r,alsoTrackRef:p}),{trackablePath:h,error:_}=m,g=(0,s.MF)(()=>(0,s.ET)(h));(0,s.fK)(h,g,n);let f=(0,o.o3)(o.nt.trackableDebug),E=(0,s.MF)(()=>(0,s.R8)({componentName:"Trackable",name:e,error:_,alsoTrackedProperties:g()}));return u=(0,c.C)({children:u,isDebugMode:f,name:e,color:_?"red":"green",depth:h.length,getTooltipText:E}),i.createElement(l.f.Provider,{value:m},u)}},800576:(e,r,n)=>{"use strict";function i(e){return null==e?"":new URL(e).origin}n.d(r,{Jk:()=>i})},547807:(e,r,n)=>{"use strict";n.d(r,{YV:()=>f,_5:()=>I,q$:()=>E,td:()=>i,vh:()=>b});var i,a=n(953657),o=n.n(a),s=n(595977),l=n.n(s),c=n(612543),d=n.n(c),u=n(27087),p=n(330654),m=n(776250),h=n(966712),_=n(776621);class g{constructor(e,r,n,i=!1){this.featureFlagKey=n,this.enforce=i,this._input=null,this._output=null;let a="function"==typeof r?r(p):r;this.validator=new y(e,a,this.enforce?"error":"warn")}async validate(e){let r=await e({xr:u.IF});if("string"==typeof this.featureFlagKey&&!(0,h.kc)()[this.featureFlagKey]||200!==r.status)return r;try{let e=await this.validator.validate(()=>Promise.resolve(r));if(this.enforce)return e;return{...e,data:{...r.data,...e.data}}}catch(e){if(this.enforce)throw e;return r}}}function f(e,r,n,i=!1){let a="function"==typeof r?r(p):r;return new g(e,p.object({meta:a}),n,i)}function E(e,r){return new y(e,p.object({meta:r}),"error")}class y{constructor(e,r,n){this.debugKey=e,this.schema=r,this.logLevel=n,this._input=null,this._output=null}async validate(e){let r=await e({xr:u.IF}),n=this.schema.safeParse(r.data);if(n.success){let e=n.data,{data:i,...a}=r;return{...a,data:{...e}}}throw(0,m.sx)("Validator Failure",{name:this.debugKey,level:this.logLevel,error:JSON.stringify(n.error.flatten())},{forwardToDatadog:!0,batchRequest:!0}),"error"===this.logLevel&&(0,_.x1)("APIGetValidationFailure",`Validation failed for api response for ${this.debugKey}`,function(e){let r={};return e.issues.forEach(e=>{let n=e.path.map(e=>"number"==typeof e?"[#]":e).join(".");r[n]||=new Set,r[n].add(e.message)}),Object.keys(r).reduce((e,n)=>(e[n]=[...r[n]],e),{})}(n.error),{reportAsSentryError:!0}),n.error}}function b(){return{_input:null,_output:null,validate:e=>e({xr:u.IF})}}(e=>{e.toAPIParameters=function(e,r=[]){if(void 0===e)return e;let n=new Set(r);return Object.keys(e).reduce((r,i)=>{let a=n.has(i)?i:d()(i),o=e[i];switch(void 0!==o&&(r[a]=o),typeof o){case"undefined":break;case"number":case"boolean":r[a]=o.toString();break;default:r[a]=o}return r},{})},e.toCamelCase=function(e){return e.transform(e=>l()(e,(e,r)=>o()(r)))}})(i||(i={}));let I=b()},218736:(e,r,n)=>{"use strict";n.d(r,{H:()=>d});var i=n(469222),a=n(776250),o=n(737947),s=n(966712),l=n(693160),c=n(743282);function d(e){if(!(0,s.kc)().web_vitals_report)return;let r=o.Ay.location.pathname+o.Ay.location.search,n=!!document.querySelector('meta[name="is_preload_streaming"]'),d=!!document.querySelector('meta[name="is_serving_resized_image"]');function u(i){let c={name:i.name,google_rating:i.rating,navigation:i.navigationType,id:i.id,value:i.value,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d,statsig_client_bootstrap:(0,s.w0)().statsig_client_bootstrap??!0,statsig_has_bootstrap_values:!!(0,s.tl)().statsig_bootstrap_values};(0,a.sx)("Web Vital Metrics",c,{forwardToDatadog:!0,sendAsBeacon:!0})}function p(i,s){let u={name:s,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:i.timeStamp,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),id:(0,c.g)(),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d};(0,a.sx)("Web Vital Metrics",u,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,i.lt)(u),(0,i.fK)(u),(0,i.zB)(u),(0,i.IN)(u),(0,i.Ck)(u),(0,i.rH)(u),document.addEventListener("DOMContentLoaded",e=>p(e,"DCL")),window.addEventListener("load",e=>p(e,"LOAD"))}},747396:(e,r,n)=>{"use strict";n.d(r,{jm:()=>i}),n(411855),n(939863);let i={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"}},214673:(e,r,n)=>{"use strict";n.d(r,{g:()=>i});var i=(e=>(e[e.PNG=0]="PNG",e[e.JPEG=1]="JPEG",e[e.PDF=2]="PDF",e))(i||{}),a=(e=>(e[e.SAVED=0]="SAVED",e[e.SAVING=1]="SAVING",e[e.PAUSED=2]="PAUSED",e))(a||{})},503316:(e,r,n)=>{"use strict";var i=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.READ_ONLY_FILE=1]="READ_ONLY_FILE",e))(i||{}),a=(e=>(e[e.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",e))(a||{}),o=(e=>(e[e.BEGAN=0]="BEGAN",e[e.MOVED=1]="MOVED",e[e.ENDED=2]="ENDED",e[e.CANCELLED=3]="CANCELLED",e[e.MOVED_COALESCED=4]="MOVED_COALESCED",e))(o||{})},347240:(e,r,n)=>{"use strict";n.d(r,{H:()=>a}),n(411855),n(188507);var i=n(587670);n(38329),n(798099),n(356390),n(737499),n(503316);let a=[i.NLJ.VECTOR_PENCIL,i.NLJ.HIGHLIGHTER,i.NLJ.WASHI_TAPE,i.NLJ.ERASER,i.NLJ.LASSO];i.NLJ.VECTOR_PENCIL,i.NLJ.HIGHLIGHTER,i.NLJ.WASHI_TAPE},555024:(e,r,n)=>{"use strict";function i(){let e=window.FigmaMobile;return e?.shouldAllowSimulatedRightClick??!0}n.d(r,{t:()=>i})},463546:(e,r,n)=>{"use strict";function i(e,r){return{id:e,...r}}n.d(r,{$T1:()=>N,BWk:()=>F,DFF:()=>w,GCV:()=>P,KdZ:()=>L,Kze:()=>I,MJs:()=>E,MxF:()=>v,Njd:()=>f,OZt:()=>c,QpH:()=>k,Qqu:()=>s,S$7:()=>o,SqV:()=>M,UDe:()=>d,aI5:()=>h,ar0:()=>p,b0J:()=>U,bIZ:()=>O,ePo:()=>D,hPP:()=>m,iuG:()=>C,jkr:()=>x,kp0:()=>g,lLk:()=>_,t0T:()=>A,tBR:()=>S,tyv:()=>T,tzJ:()=>R,wRI:()=>b,y3_:()=>u,y6K:()=>l,yyi:()=>a,zoI:()=>y});let a=i("AutogenPasswordOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),o=i("UI3AndAIOnboarding",{team:"editor_usability",queueOnBlock:!0,allowShowingIfModalPresent:!0}),s=i("DevHandoffMarketingOverlay",{team:"developer_tools"}),l=i("ExpiringPublicLinksOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),c=i("ExpiringLinksAndAutogenPwOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),d=i("LibrariesWorkspaceOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),u=i("MobileProtoDownloadModalPrompt",{team:"desktop"}),p=i("MultiplayerObservationNux",{team:"feedback",queueOnBlock:!0}),m=i("MultiplayerSpotlightNudgeNux",{team:"feedback"}),h=i("MultiplayerSpotlightNux",{team:"feedback",queueOnBlock:!0}),_=i("OnboardFigJamEditor",{team:"figjam",queueOnBlock:!0}),g=i("OnboardFigJamEditorBrowseTemplates",{team:"figjam",queueOnBlock:!0}),f=i("OnboardFigJamEditorMakeSomething",{team:"figjam",queueOnBlock:!0}),E=i("OnboardFigJamViewer",{team:"figjam",queueOnBlock:!0}),y=i("OnboardFigJamEditorUnified",{team:"figjam",queueOnBlock:!0}),b=i("OnboardFigJamEditorUnifiedPanAndZoom",{team:"figjam",queueOnBlock:!0}),I=i("OnboardFigJamEditorUnifiedProduct",{team:"figjam",queueOnBlock:!0}),T=i("PrototypePreloadedOverlay",{team:"scenegraph_and_sync"}),v=i("ProOnboardingPrototypeOnlyLinksOverlay",{team:"monetization_upgrades"}),S=i("SearchWorkspaceOnboarding",{team:"scale"}),w=i("SprigSurveysOverlay",{team:"community",queueOnBlock:!1,allowShowingIfModalPresent:!0}),A=i("ViewerToEditorOverlay",{team:"monetization_upgrades"}),N=i("MobileReplyUpsellHint",{team:"desktop"}),C=i("FontIndexUpdateSummer2024Overlay",{team:"text_and_vector",lifecycle:{userFlagName:"seen_font_index_update_summer2024_overlay",maxTimes:1}}),O=i("FeedPostDetailZoomPanNudge",{team:"explore",allowShowingIfModalPresent:!0}),L=i("SharingClarityBranchModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),R=i("SharingClarityFileAudienceOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),P=i("SharingClarityFileModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),D=i("SharingClarityPrototypeModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),k=i("SharingClarityProjectCreationPermissionOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),M=i("SharingClarityProjectCreationTeamAccessOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),F=i("SharingClarityProjectModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),x=i("SharingClarityTeamCreationOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),U=i("FilePreviewOverlay",{team:"search",lifecycle:{userFlagName:"seen_file_preview_overlay",maxTimes:1}})},877723:(e,r,n)=>{"use strict";n.d(r,{lt:()=>h,q8:()=>g,u4:()=>E,y8:()=>f});var i=n(188507);n(138020);var a=n(38329),o=n(966712),s=n(374626),l=n(38580);n(915440);var c=n(960884),d=n(694687);n(279453);var u=n(707465),p=n(984968),m=n(554905);let h=(0,n(479296).n)(({currentOrg:e,currentTeam:r,isViewer:n,isDisabledForViewers:i=!0})=>{if(!e&&!r)return!1;let a=e?e?.ai_features_disabled:r?.ai_features_disabled;return!!i&&!!n||!!a});function _(e=!0){return!h({currentOrg:(0,d.sZ)()||null,currentTeam:(0,p.ol)()||null,isViewer:(0,m.Td)(),isDisabledForViewers:e})}function g(){let e=_();return!!(0,i.d4)(e=>(0,u.zg)(e.selectedView)||!e.user)||!e}function f(e){let r=a.D.getState();return!!(0,u.zg)(r.selectedView)||!r.user||h({currentOrg:s.zl.get(c.Z),currentTeam:s.zl.get(p.Me),isViewer:s.zl.get(m.hS),isDisabledForViewers:e})}function E(){let e=(0,s.md)(y),r=_();return(0,o.kc)().qa_ai_metering?e:r}let y=(0,l.eU)(!1)},195847:(e,r,n)=>{"use strict";n.d(r,{By:()=>a,DP:()=>c,GF:()=>s,RE:()=>o,V7:()=>d,qB:()=>i,vR:()=>l,zl:()=>u});var i=(e=>(e.SIGN_IN="sign_in",e.CHECK_EMAIL_MAGIC_LINK_SIGN_IN_AFTER_PASSWORD="check_email_magic_link_sign_in_after_password",e.SAML_START="saml_start",e.SIGN_UP="sign_up",e.SIGN_UP_EXTRA_INFO="sign_up_extra_info",e.FORGOT_PASSWORD="forgot_password",e.SENT_PASSWORD_RESET="sent_password_reset",e.RESET_PASSWORD="reset_password",e.VALIDATE_EMAIL="validate_email",e.VALIDATE_CODE="validate_code",e.APP_AUTH_GRANT="app_auth_grant",e.APP_AUTH_REDEEM="app_auth_redeem",e.SSO_GATE="sso_gate",e.EMAIL_ONLY="email_only",e.ACCOUNT_PICKER="account_picker",e.JOIN_ORG="join_org",e.VERIFY_HUMAN="verify_human",e))(i||{}),a=(e=>(e[e.UNAUTHORIZED=0]="UNAUTHORIZED",e[e.BAD_REQUEST=1]="BAD_REQUEST",e[e.NO_SAML=2]="NO_SAML",e[e.SAML_REQUIRED=3]="SAML_REQUIRED",e[e.MAGIC_LINK_LOGIN_NO_ACCOUNT=4]="MAGIC_LINK_LOGIN_NO_ACCOUNT",e))(a||{}),o=(e=>(e.EMAIL="email",e.PASSWORD="password",e.VERIFICATION_CODE="verification_code",e.TOTP_KEY="totp_key",e.JOB_TITLE="job_title",e.USAGE_PURPOSE="usage_purpose",e))(o||{}),s=(e=>(e.WORK="For work",e.PERSONAL="For personal use",e.EDU="For teaching or taking a class",e))(s||{}),l=(e=>(e.GOOGLE="google",e.SAML="saml",e))(l||{}),c=(e=>(e.DESKTOP="desktop",e.MIRROR="mirror",e.MOBILE="mobile",e.VSCODE="vscode",e.VSCODE_INSIDERS="vscode-insiders",e.VSCODE_CURSOR="vscode-cursor",e.FIGJAM_MOBILE="figjam_mobile",e))(c||{}),d=(e=>(e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e))(d||{});let u="signed_up_from_open_sessions"},855829:(e,r,n)=>{"use strict";n.d(r,{p:()=>s});var i=n(776250),a=n(129212),o=n(966712);async function s(e){(0,o.kc)().passkey_enable_metrics&&(0,i.sx)("passkey_support",{flow:e,supports_webauthn:(0,a.D)(),supports_mediation:await (0,a.r)()},{batchRequest:!1})}},175103:(e,r,n)=>{"use strict";n.d(r,{F0:()=>v,Wv:()=>A,ZH:()=>w,gK:()=>S});var i=n(411855),a=n(188507),o=n(380620),s=n(629019),l=n.n(s),c=n(133537),d=n(62557),u=n(286640),p=n(761870),m=n(195847),h=n(641170),_=n(659838),g=n(939863),f=n(101505),E=n(672517),y=n(988022),b=n(187348),I=n(271131),T=n(876253);let v=i.forwardRef(function({className:e,showUpdatedInputDesign:r,...n},a){return r?i.createElement(h.LN,{className:e,...(0,d.d)(n),ref:a}):i.createElement(_.L,{className:l()(I.hF,e),...(0,d.d)(n),ref:a})});function S(e){let r=T.a,n=`${e.isInvalid?r:""}`,a={...e,className:n};return delete a.isInvalid,i.createElement(v,{...(0,d.d)(a)})}function w(e){let[r,n]=(0,i.useState)(null),s=(0,a.wA)(),l=(0,a.d4)(e=>e.auth.formState),d=(0,a.d4)(e=>e.auth.clickedSAMLSignIn),h=(0,a.d4)(e=>e.auth.email),_=(0,a.d4)(e=>e.auth.invalidInput),{trackEvent:T}=(0,E.j6)(),v=e=>{e&&l===m.qB.SIGN_IN&&s(p.E({formState:m.qB.SAML_START}))},w=async e=>{if(s(p.BZ({value:e})),!d&&(0,c.xf)(e))try{let r=u.Q_()?.getItem(`SIGN-IN ${e}`);if(r){v("true"===r);return}let{data:n}=await b.F.getOrgSamlConfigRequired({email:e});u.Q_()?.setItem(`SIGN-IN ${e}`,n.meta.saml_sso_only),v(!!n.meta.saml_sso_only)}catch(e){l===m.qB.SAML_START&&s(p.E({formState:m.qB.SIGN_IN}))}},A=()=>{let e=h.split("@")[0];w(`${e}@${r}`),n(null),T(y.Ws,{trackingDescriptor:f.c.USE_SUGGESTED_EMAIL,previousDomain:e,newDomain:r})},N=e.placeholder??(0,g.t)("auth.email-input-placeholder");return i.createElement(i.Fragment,null,i.createElement(S,{onChange:e=>w(e.currentTarget.value),onBlur:r=>{if(e.onBlur?.(r,!0),e.showDomainSuggestions){let e=h.split("@")[1];n((0,c.bs)(e))}},value:h,name:m.RE.EMAIL,placeholder:N,type:"email",id:"email",autoComplete:"username",autoCapitalize:"off",autoCorrect:"off",isInvalid:m.RE.EMAIL===_,showUpdatedInputDesign:e.showUpdatedInputDesign,"aria-invalid":m.RE.EMAIL===_,"aria-describedby":e.ariaDescribedBy}),r&&i.createElement("div",{"data-testid":"domain-suggestion",className:I.rt},(0,g.tx)("auth.email-domain-suggestion-prompt",{domainSuggestion:i.createElement(o.E,{className:I.nf,onClick:()=>A()},r)})))}function A(e){let[r,n]=(0,i.useState)(""),o=(0,a.wA)(),s=(0,a.d4)(e=>e.auth.invalidInput),l=e.placeholder??(0,g.t)("auth.password-input-placeholder"),c=e.isSignUp?"new-password":"current-password";return i.createElement(S,{name:m.RE.PASSWORD,type:"password",placeholder:l,autoCapitalize:"off",autoCorrect:"off",autoComplete:c,id:"current-password",value:r,onChange:function(e){n(e.currentTarget.value),o(p.OZ({googleIdToken:null}))},onBlur:e.onBlur,isInvalid:s===m.RE.PASSWORD,showUpdatedInputDesign:e.showUpdatedInputDesign,"aria-invalid":s===m.RE.PASSWORD,"aria-describedby":e.ariaDescribedBy})}},362576:(e,r,n)=>{"use strict";n.d(r,{IU:()=>c});var i=n(411855);n(188507);var a=n(91408);n(268537),n(64550),n(762638),n(939863),n(896474);var o=n(672517);n(10648),n(318812),n(698812),n(99506);var s=n(498606);n(720488),n(303159),n(692665);var l=n(45265);function c(e){return i.createElement(o.jm,{className:e.disabled?"shared_table--optionDisabled--OhX66 shared_table--_optionBase--z8wdT shared_table--_disabled--EkV7j":"shared_table--option--hw4Sr shared_table--_optionBase--z8wdT",onClick:e.onClick,trackingProperties:e.trackingProperties,disabled:e.disabled,...e.tooltip?{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}(0,a.hG)(l.km),(0,a.hG)(l.hX);var d=(e=>(e.NONE="NONE",e.UNASSIGNED="UNASSIGNED",e.WORKSPACE="WORKSPACE",e))(d||{})},736174:(e,r,n)=>{"use strict";n.d(r,{Q:()=>P});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(374626),d=n(498750),u=n(723325),p=n(154483),m=n(662275),h=n(146817),_=n(473744),g=n(151283),f=n(534804),E=n(543817),y=n(335682),b=n(416095),I=n(933342),T=n(135076),v=n(180715),S=n(776018),w=n(790429),A=n(811529),N=n(603396),C=n(743415),O=n(239737),L=n(659265),R=n(269754);function P({enableKeyboardNavigation:e,colIndex:r,rowIndex:n,isList:a,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}){return e?i.createElement(D,{colIndex:r,rowIndex:n,isList:a,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}):i.createElement(k,{enableKeyboardNavigation:e,isList:a,isTileSelected:o,renderedElement:s})}function D({colIndex:e,rowIndex:r,isList:n,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:c}){let p=i.useContext(T.U),v=(0,a.d4)(e=>e.modalShown),L=(0,a.d4)(y.sS),R=(0,w.J)(s.item,s.sectionPosition,s.sectionNameForTracking),P=(0,N.n)(s.item),D=(0,E.u)({canSwap:!0,openFileKey:L??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),F=i.useCallback(()=>{v?.type!==S.V||P||R()},[P,v?.type,R]),x=i.useCallback(()=>{v?.type!==S.V&&p?.onOpenFlyout(s.item,s.sectionPosition,s.sectionNameForTracking)},[p,v?.type,s.item,s.sectionPosition,s.sectionNameForTracking]),{keyboardNavigationItem:U,setKeyboardNavigationElement:B}=(0,u.M3)({path:[1,r],column:n?null:e,id:(0,h.V)(s.item),onFocus:F}),V=function({onComponentInsertSwap:e,onOpenFlyout:r,keyboardNavigationItem:n,item:o,sectionNameForTracking:s,sectionPosition:c,shouldRefocusAfterKeyboardInsert:u,rowIndex:p,colIndex:h,isList:E,sourceForTracking:T}){let v=(0,a.wA)(),w=(0,a.d4)(e=>e.modalShown),N=(0,a.d4)(y.sS),L=(0,C.k)(),R=M(o),P=(0,f.Ew)({assetKey:(0,I.u2)(o),assetFileKey:R,assetLibraryKey:o.library_key,assetType:o.type,isList:E,sectionNameforTracking:s,sectionPosition:c,sourceForTracking:T??A.mZ,aiScore:o.ai_score??void 0,lexicalScore:o.lexical_score??void 0,isExample:(0,_.o)(o),partnerType:(0,g.X)(R)}),D=(0,O.Nv)(!0),k=i.useCallback(e=>{let{type:r,sectionPosition:n,searchQuery:i,searchSessionId:a,...o}=P,s={aiResultsEnabled:D,altKey:e.altKey,assetsPanelVersion:L,fileKey:N??void 0};l.az.trackDefinedEvent("assets_panel.keyboard_insert",{...P,...s}),l.az.trackDefinedEvent("asset_search.result_inserted",{...o,...s,assetType:r,position:n,query:i,sessionId:a,entryPoint:"assets-panel"})},[P,N,L,D]);return i.useCallback(i=>{if((i.keyCode===d.Uz.ENTER||i.keyCode===d.Uz.SPACE)&&(0,b.dx)(o)){if(i.metaKey){r();return}if(e(i,o),k(i),u&&!(0===p&&0===h)){let e=E?n?.getItemAbove():n?.getItemToTheLeft();e?.focus()}else n?.blur();w?.type===S.V&&v(m.AS())}},[h,v,k,E,o,n,w?.type,e,r,p,u])}({colIndex:e,rowIndex:r,isList:n,keyboardNavigationItem:U,onComponentInsertSwap:D,onOpenFlyout:x,...s,shouldRefocusAfterKeyboardInsert:c}),G=i.useCallback(e=>{(0!==e.detail||e.nativeEvent.pointerType)&&x()},[x]);return i.createElement(k,{enableKeyboardNavigation:!0,isList:n,isShownInFlyout:P,isTileSelected:o,onKeyDown:V,onClick:G,onSetKeyboardNavigationElement:B,renderedElement:s})}function k({enableKeyboardNavigation:e,isList:r,isShownInFlyout:n,isTileSelected:a,onKeyDown:o,onClick:l,onSetKeyboardNavigationElement:d,renderedElement:u}){let p=(0,c.md)(v.T),m=a?.(u)??!1;i.useEffect(()=>{r?u.element=i.cloneElement(u.element,{}):u.element=i.cloneElement(u.element,{selected:m})},[r,m,u]);let h={top:u.top,left:u.left,height:r?u.height:void 0},_=s()(r?R.fJ:R.ND,{[L.QT]:!r,[R.r6]:r&&n,[R.HR]:r&&n&&p});return e||o||l?i.createElement("button",{key:u.key,style:h,className:_,onKeyDown:o,onClick:l,ref:d},u.element):i.createElement("div",{key:u.key,style:h,className:_},u.element)}let M=(0,p.fv)()},268537:(e,r,n)=>{"use strict";n.d(r,{Jn:()=>R,MM:()=>P,OR:()=>v,Ve:()=>T,Vq:()=>A,X3:()=>S,c$:()=>C,gS:()=>O,gw:()=>M,l4:()=>w,ms:()=>N,rr:()=>k,wv:()=>L});var i=n(411855),a=n(629019),o=n.n(a),s=n(846627),l=n(498750),c=n(255942),d=n(860601),u=n(153234),p=n(30637),m=n(574176),h=n(865618),_=n(738269),g=n(259927),f=n(672517),E=n(798099),y=n(721077),b=n(247245),I=n(783423);function T(e){let[r,n]=i.useState(!1),a="label"in e,s="dropdownButton"in e;return i.createElement("div",{className:o()(y.gD,e.className,r&&y.FR,e.shouldRenderAutocompleteStyles&&y.Rp),...e.notDraggable?{"data-not-draggable":!0}:{}},a&&i.createElement("div",{className:o()(y.Ts,e.noBorder&&y.E7,e.noRightPadding&&y.zT),onClick:()=>n(!r),role:"menu",tabIndex:0},i.createElement("div",{className:y.ep},!!e.iconLabel&&i.createElement("div",{className:y.Vi},e.iconLabel),i.createElement("p",null,e.label)),i.createElement(m.B,{className:y.tZ,svg:I.A})),s&&i.createElement(e.dropdownButton,{onClick:()=>n(!r)}),r&&i.createElement(i.Fragment,null,i.createElement("div",{className:o()(y.DE,e.dropdownOptionsClassName,e.rightAlignOptions&&y.Wh,e.optionsBelowSelector&&y.fG),onClick:e.stayOpenOnSelect?void 0:()=>n(!r),role:"menu",tabIndex:0},i.createElement(f.fu,{name:e.menuTrackingContextName||"",enabled:!!e.menuTrackingContextName,properties:e.menuTrackingProperties},i.createElement(S,{options:e.options,hideDropdown:()=>n(!1),shouldRenderAutocompleteStyles:e.shouldRenderAutocompleteStyles}))),i.createElement(U,{closeDropdown:()=>n(!1)})))}function v(e){let[r,n]=i.useState(e.focusContainerOnMount?-1:0),a=i.useMemo(()=>i.Children.toArray(e.children||e.options).filter(e=>"boolean"!=typeof e),[e.children,e.options]),o=(0,i.useRef)(Array(a.length)),s=i.useRef(document.activeElement);(0,i.useEffect)(()=>{let e=o.current[r];e&&(e.tabIndex=0,e.focus())},[r,o]);let l=i.useCallback((e,r)=>{let i=o.current[e];i&&(i.tabIndex=-1,i.focus()),n(r)},[]),c=i.useCallback(()=>{let e=r-1;for(let r of o.current)if(null==o.current[e])e=e-1<0?o.current.length-1:e-1;else break;l(r,e)},[r,l]),u=i.useCallback(()=>{let e=r+1;for(let r of o.current)if(null==o.current[e])e=e+1>=o.current.length?0:e+1;else break;l(r,e)},[r,l]);return{childrenComponents:a,getSetChildRef:e=>(e=>{if("boolean"!=typeof e&&(e.type===C||e.type===P)){let r=e.props;return!!(r.disabled||r.header)}return!1})(a[e])?d.lQ:r=>o.current[e]=r,onKeyDown:n=>{switch(n.stopPropagation(),n.nativeEvent&&n.nativeEvent.stopImmediatePropagation(),n.key){case"Escape":e.autofocusPrevElementOnEsc&&s.current?.focus(),e.hideDropdown();break;case"Tab":e.autofocusPrevElementOnTab&&s.current?.focus(),e.hideDropdown();break;case" ":case"Enter":{let n=o.current[r];n&&n.click(),e.autofocusPrevElementOnSelect&&s.current?.focus();break}case"Left":case"ArrowLeft":"horizontal"===e.orientation&&c();break;case"Up":case"ArrowUp":"horizontal"!==e.orientation&&c();break;case"Right":case"ArrowRight":"horizontal"===e.orientation&&u();break;case"ArrowDown":case"Down":"horizontal"!==e.orientation&&u();break;case"Home":case"PageUp":l(r,0);break;case"End":case"PageDown":l(r,o.current.length-1)}},onFocus:e=>{if(e&&e.target){let n=o.current.indexOf(e.target);n>=0&&l(r,n)}}}}function S(e){let{childrenComponents:r,getSetChildRef:n,onKeyDown:a,onFocus:o}=v(e),{children:s,options:l,...c}=e;return i.createElement(N,{...c,onKeyDown:a,tabIndex:-1},i.Children.map(r,(e,r)=>i.cloneElement(e,{buttonRef:n(r),onFocus:o})))}function w(e,r){let[n,a]=i.useState(null);return i.useEffect(()=>{let n=e.current;if(n){let e=n.getBoundingClientRect(),i=r.left,o=r.top;i<8?i=8:i+e.width>window.innerWidth-8&&(i=window.innerWidth-8-e.width),o<8?o=8:o+e.height>window.innerHeight-8&&(o=window.innerHeight-8-e.height),a([i,o])}},[e,r.left,r.top]),i.useMemo(()=>n?{...r,left:n[0],top:n[1]}:{...r,visibility:"hidden"},[n,r])}let A=i.forwardRef(function({style:e,...r},n){let a=i.useRef(null),o=w(a,e);return i.createElement(M,{dropdownRef:(0,c.A)(a,n),style:o,...r})});class N extends u.o6{constructor(){super(...arguments),this.preventDefault=e=>{e.preventDefault()},this.stopPropagation=e=>{e.stopPropagation()},this.stopPropagationForPointerDown=e=>{(0,E.ft)()&&this.stopPropagation(e)},this.onClick=u.cZ(this,"click",e=>{if(!this.props.onClick)return u.aH;this.props.onClick(e)})}render(){return i.createElement("div",{tabIndex:this.props.tabIndex??0,role:"menu",id:this.props.id,className:o()(y.Wm,this.props.className,{[y.DY]:this.props.positionAbsolute,[y._S]:this.props.positionFixed,[y.rU]:this.props.shouldRenderAutocompleteStyles,[g.s4]:this.props.preventZoom}),onClick:this.onClick,onMouseDown:this.stopPropagation,onScroll:this.props.stopScrollPropagation?this.stopPropagation:this.props.onScroll,onWheel:this.props.preventZoom?void 0:this.stopPropagation,onTouchStart:this.stopPropagation,onPointerDown:this.stopPropagationForPointerDown,onContextMenu:this.preventDefault,onKeyDown:this.props.onKeyDown,style:this.props.style,"data-cancel-insertable-resource-drag-and-drop":!0,ref:this.props.dropdownRef,"aria-labelledby":this.props["aria-labelledby"],"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props["data-testid"],onFocus:this.props.onFocus},this.props.children)}}N.displayName="Dropdown";class C extends u.o6{constructor(){super(...arguments),this.mouseOverTimestamp=0,this.state={hover:!1},this.onDragStart=e=>{e.preventDefault()},this.onPointerOver=e=>{this.props.onPointerOver&&this.props.onPointerOver(),this.setState({hover:!0}),this.props.onHover&&this.props.onHover(!0),this.props.href||(this.mouseOverTimestamp=Number(e.timeStamp))},this.onPointerOut=e=>{this.props.onPointerOut&&this.props.onPointerOut(),this.setState({hover:!1}),this.props.onHover&&this.props.onHover(!1)},this.onPointerUp=u.cZ(this,"mouseup",e=>{if(!this.props.href){if(this.props.onPointerUp){this.props.onPointerUp(e);return}if(Number(e.timeStamp)-this.mouseOverTimestamp>20){let r=e.target;null!=r.click&&(this.mouseUpTimer=setTimeout(r.click.bind(r),1))}}}),this.onTouchEnd=e=>{let r=e.target;if(r.click&&(e.preventDefault(),r&&e.changedTouches)){let n=e.changedTouches[0];document.elementFromPoint(n.clientX,n.clientY)===r&&r.click()}},this.onClick=u.cZ(this,"click",e=>{this.props.href&&(0,l.oJ)(e)||(this.props.href?(0,s.e)(this.props.href,e):clearTimeout(this.mouseUpTimer),this.props.onClick?.(e))}),this.ariaRole=()=>this.props.header?"presentation":"role"in this.props?this.props.role??"menuitem":"menuitem"}render(){let e=this.props.disabled||this.props.header,r=o()(e?y.IZ:{[y.wY]:this.state.hover||this.props.simulateHover,[y.uK]:!0},this.props.className);return i.createElement("a",{tabIndex:-1,role:this.ariaRole(),id:this.props.id,ref:this.props.buttonRef,onFocus:this.props.onFocus,"data-search-click-action":this.props["data-search-click-action"],className:r,href:this.props.href,target:this.props.target,rel:"noopener",onClick:e?void 0:this.onClick,onPointerUp:e?void 0:this.onPointerUp,onPointerOver:e?void 0:this.onPointerOver,onPointerOut:e?void 0:this.onPointerOut,onMouseDown:this.props.onMouseDown,onDragStart:this.onDragStart,onTouchEnd:this.onTouchEnd,"data-dropdown-tooltip":this.props.tooltip,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.recordingKey,"data-fullscreen-intercept":this.props["data-fullscreen-intercept"],"aria-disabled":this.props.disabled,"aria-checked":"aria-checked"in this.props?this.props["aria-checked"]:void 0},this.props.children)}}C.displayName="Option";let O=(0,f.tf)(C);class L extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.me;return this.props.className&&(e+=` ${this.props.className}`),i.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,role:"presentation","data-testid":this.props.dataTestId??"dropdown-separator"},i.createElement("div",{className:y.se}))}}L.displayName="Separator";var R=(e=>(e.Checkmark="Checkmark",e.Checkbox="Checkbox",e))(R||{});class P extends u.o6{render(){return i.createElement(C,{...this.props,className:o()(y.o6,"Checkbox"===this.props.displayType&&this.props.nested&&y.cY,this.props.className),"aria-checked":this.props.checked,role:"role"in this.props?this.props.role:void 0},"Checkbox"===this.props.displayType?i.createElement("span",{className:y.z6,"data-preferred-theme":"dark"},i.createElement(h.S,{disabled:this.props.disabled,checked:this.props.checked,mixed:this.props.mixed})):this.props.checked?i.createElement(m.B,{className:y.z6,svg:b.A,dataTestId:"dropdown-check-icon"}):i.createElement("span",{className:y.z6}),this.props.children)}}P.displayName="CheckableOption",P.defaultProps={displayType:"Checkmark"};class D extends u.o6{render(){return i.createElement(P,{...this.props},i.createElement("div",null,this.props.primaryText),!!this.props.secondaryText&&i.createElement("div",{className:y.pH},this.props.secondaryText))}}let k=(0,f.tf)(P);(0,f.tf)(D);class M extends u.o6{render(){return i.createElement(i.Fragment,null,i.createElement(N,{...this.props}),x(this.props)?i.createElement(U,{closeDropdown:this.props.closeDropdown,recordingKey:"dropdownModalScrim"}):i.createElement(U,{dispatch:this.props.dispatch,recordingKey:"dropdownModalScrim"}))}}M.displayName="DropdownWithScrim";let F=e=>{e.preventDefault()},x=e=>!!e.closeDropdown;class U extends u.o6{constructor(){super(...arguments),this.mouseMotionSinceMouseDown=0,this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY=5,this.closeDropdown=()=>{x(this.props)?this.props.closeDropdown():this.props.dispatch(_.oB())},this.onMouseDown=u.cZ(this,"mousedown",e=>{this.mouseMotionSinceMouseDown=0,this.closeDropdown(),e.stopPropagation()}),this.onMouseMove=u.cZ(this,"mousemove",e=>{if((0,p.PN)()){if(!(this.mouseMotionSinceMouseDown<this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY))return u.aH;this.mouseMotionSinceMouseDown+=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY}else this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementX),this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementY)}),this.onMouseUp=u.cZ(this,"mouseup",e=>{this.mouseMotionSinceMouseDown>=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY&&(this.closeDropdown(),e.stopPropagation())})}render(){return i.createElement("div",{className:y.bv,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onContextMenu:F,"data-does-not-dismiss-modal":!0})}}},192437:(e,r,n)=>{"use strict";let i;n.d(r,{As:()=>g,H4:()=>_,S1:()=>b,tH:()=>E});var a=n(411855),o=n(675678),s=n(421757),l=n(776250),c=n(776621),d=n(939863),u=n(178466),p=n(210954),m=n(945793);let h=Symbol("Default"),_={DEFAULT_FULL_PAGE:h,NONE_I_KNOW_WHAT_IM_DOING:Symbol("None")};function g(e,r){if(r){e.stack+="\n\nReact stack:"+r.componentStack;let n=Error("React component stack where the error occurred");n.stack=r.componentStack,e.cause=n}}let f=class e extends a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(r,n){g(r,n);try{this.props.onError?.()}catch(e){}let i=this.props.fallback===_.DEFAULT_FULL_PAGE,a=(0,c.$D)(o.FigmaTeam.FRONTEND_PLATFORM,r,{tags:{react:!0,errorBoundary:this.props.boundaryKey,...this.props.sentryTags,...i?{severity:c.DZ.Critical}:{}}});i&&!e.reportedHardCrash&&(e.reportedHardCrash=!0,(0,l.sx)("js_hard_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0})),this.sentryID=a}render(){if(this.state.hasError){console.log("Rendering error: "+this.state.error),console.log("Boundary key: "+this.props.boundaryKey);let e=null;return e=this.props.fallback===h?a.createElement(b,{sentryId:this.sentryID}):this.props.fallback===_.NONE_I_KNOW_WHAT_IM_DOING?null:this.props.fallback,a.createElement(I,{error:this.state.error},e)}return this.props.children}};f.reportedHardCrash=!1;let E=f,y={title:"Figma ran into a problem",whiteboardTitle:"FigJam ran into a problem",descriptionP1:"Our team is looking into it now. If refreshing the page doesn't work, check our ",statusPage:"status page",descriptionP2:" for updates",refresh:"Refresh"};function b(e){let r=a.useMemo(()=>{let e=document.body.style.colorScheme;return e&&"dark"===e?"dark":"light"},[]),n=a.useMemo(()=>{let e=new URLSearchParams(window.location.search);return e.has("type")&&"whiteboard"===e.get("type")},[]),i=a.useMemo(()=>{try{let e=(0,u.Gq)();return e?.initialized&&!!(0,d.t)("general.root_error_boundary_title")}catch(e){return!1}},[]);return a.createElement("div",{className:m.ZX,"data-preferred-theme":r},a.createElement("div",{className:m.fi},a.createElement("div",{className:m.v2},i?(0,d.tx)(n?"general.root_error_boundary_title_figjam":"general.root_error_boundary_title"):n?y.whiteboardTitle:y.title),a.createElement("div",{className:m.rU},i?(0,d.tx)("general.root_error_boundary_description",{status_page:a.createElement(p.N,{trusted:!0,href:"https://status.figma.com",style:{display:"inline"}},(0,d.tx)("general.root_error_boundary_status_page"))}):a.createElement(a.Fragment,null,a.createElement("span",null,y.descriptionP1),a.createElement(p.N,{trusted:!0,href:"https://status.figma.com",style:{display:"inline"}},y.statusPage),a.createElement("span",null,y.descriptionP2))),a.createElement("div",{className:m.yV},a.createElement(s.$n,{variant:"primary",onClick:()=>location.reload()},i?(0,d.tx)("general.root_error_boundary_refresh"):y.refresh)),e.sentryId&&a.createElement("div",{className:m.g6},"Error ID: ",e.sentryId)))}function I(e){let r=i??=a.createContext({}),{error:n,children:o}=e,s=a.useMemo(()=>({error:n}),[n]);return a.createElement(r.Provider,{value:s},o)}},210954:(e,r,n)=>{"use strict";n.d(r,{N:()=>s});var i=n(411855),a=n(846627),o=n(3453);class s extends i.Component{render(){let e=`${o.nf} ${this.props.className||""}`,{canFocus:r,trusted:n,...s}=this.props,l={...s,className:e,rel:n?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,a.e)(this.props.href,e)}};return r&&(l={href:"#",tabIndex:0,...l}),i.createElement("a",{...l},this.props.children)}}s.displayName="Link"},641170:(e,r,n)=>{"use strict";n.d(r,{D5:()=>N,Kw:()=>v,LN:()=>C,t1:()=>A});var i=n(411855),a=n(552793),o=n(135317),s=n(629019),l=n.n(s),c=n(959407),d=n(521725),u=n.n(d),p=n(563706),m=n(62557),h=n(659838),_=n(574176),g=n(889670),f=n(602878),E=n(508065),y=n(901924),b=n(383955),I=n(37060),T=n(444776);function v(e){return i.createElement(i.Fragment,null,e.hasError&&i.createElement("div",{className:f.$8},e.errorMessage))}i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:f.lI},i.createElement("label",{className:l()(f.Pf,e.inlineLabel&&f.Qg),htmlFor:n},e.label),i.createElement("select",{className:l()(f.Wm,e.responseHasError&&f.U3),id:n,name:e.name,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value||""},i.createElement("option",{disabled:!!e.value},e.inlineLabel?e.label:""),Object.keys(e.options).map(r=>i.createElement("option",{value:r,key:r},e.options[r]))),e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:f.lI},i.createElement("label",{className:f.Pf,htmlFor:n},e.label),i.createElement("textarea",{className:l()(f.PC,e.responseHasError&&f.U3),onChange:e.onChange,onBlur:e.onBlur,id:n,name:e.name,value:e.value}),e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:f.lI},i.createElement("label",{className:f.Pf,htmlFor:n},e.label),i.createElement("input",{className:l()(f.En,e.className,e.responseHasError&&f.U3),disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,onKeyDown:e.onKeyDown,onKeyDownCapture:e.onKeyDownCapture,id:n,type:"text",name:e.name,value:e.value}),e.children,e.error)});let S=e=>e?"string"==typeof e?e:e.displayName:"",w=e=>e?"string"==typeof e?e:e.value:"";function A(e){let[r,n]=i.useState(!1),{isOpen:a,selectedItem:o,getToggleButtonProps:s,getMenuProps:d,highlightedIndex:u,getItemProps:m}=(0,c.WM)({items:e.options,itemToString:S,onSelectedItemChange({selectedItem:r}){let i=w(r);e.onChange(i),n(!0)}}),h=p.nW;return i.createElement("div",{className:l()(E.Y3,a&&E.lC,!a&&e.responseHasError&&!r&&E.v8,e.className)},i.createElement("button",{type:"button","aria-haspopup":"listbox",...s({className:l()(E.YF,a&&E.zZ)})},i.createElement("div",{className:E.ax},i.createElement("label",{className:E.KJ,"aria-label":e.ariaLabel},h?e.mobileLabel:e.label),i.createElement("span",{className:r?E.Nd:E.sU},S(o)||e.label)),i.createElement(_.B,{svg:a?b.A:y.A,className:E.vP})),i.createElement("div",{className:l()(E.P2,!a&&E.Qg)},i.createElement("ul",{...d()},a&&e.options.map((e,r)=>i.createElement("li",{key:w(e),...m({item:e,index:r,className:l()(u===r&&E.$p,E.J7)})},w(e)===w(o)&&i.createElement(_.B,{svg:I.A,className:E.eD}),S(e))))))}function N(e){let[r,n]=i.useState(!1),{isOpen:a,selectedItem:o,getToggleButtonProps:s,getMenuProps:d,highlightedIndex:u,getItemProps:p}=(0,c.WM)({items:e.options,itemToString:S,onSelectedItemChange({selectedItem:r}){let i=w(r);e.onChange(i),n(!0)}});return i.createElement("div",{className:l()(f.be,a&&f.qT,!a&&e.responseHasError&&f.U3,e.className)},i.createElement("button",{type:"button","aria-haspopup":"listbox",...s({className:f.YF})},i.createElement("div",{className:r?f.A0:f.zz,"aria-label":e.ariaLabel},S(o)||e.label),i.createElement(_.B,{svg:T.A,className:f.vP})),i.createElement("div",{className:l()(f.P2,!a&&f.Qg)},i.createElement("ul",{className:f.Ec,...d()},a&&e.options.map((e,r)=>i.createElement("li",{key:w(e),...p({item:e,index:r,className:l()(u===r&&f.$p,f.J7)})},S(e))))))}i.forwardRef(function(e,r){let[n,a]=i.useState([]),o=i.useRef(null),s=r=>!!e.defaultOption&&(!e.maxListSizeToRevealDefaultOption||r.length<=e.maxListSizeToRevealDefaultOption),d=()=>{let r=e.options.sort().slice(0,100);s(r)&&r.unshift(e.defaultOption),a(r)},{isOpen:p,getToggleButtonProps:m,getLabelProps:h,getMenuProps:_,getInputProps:g,getItemProps:E,getComboboxProps:y,openMenu:b,highlightedIndex:I}=(0,c.Bp)({selectedItem:e.value,items:n,onSelectedItemChange({selectedItem:r}){e.onChange(r||"")},onIsOpenChange:({isOpen:e,selectedItem:r})=>{e&&!r&&d()},onInputValueChange:r=>{if(r.inputValue.trim().length>0){let n=RegExp(u()(r.inputValue),"i"),i=e.options.filter(e=>n.test(e)).sort().slice(0,100);s(i)&&i.unshift(e.defaultOption),a(i)}else d()}}),T=()=>{(!e.value||e.defaultOption&&e.defaultOption===e.value)&&d()};return i.createElement("fieldset",{ref:r,className:f.lI},i.createElement("label",{...h({className:f.Pf})},e.label),i.createElement("div",{...y({className:f.Tw})},i.createElement("input",{...g({className:l()(f.En,p&&f.qT,!p&&e.responseHasError&&f.U3,e.className),ref:o,disabled:e.disabled,onBlur:e.onBlur,onClick:()=>{T(),b()}})}),i.createElement("button",{...m({onClick:()=>{T(),o.current.select()},disabled:e.disabled,className:f.pZ,type:"button"})})),i.createElement("div",{className:l()(f.Em,!p&&f.Qg)},i.createElement("ul",{..._({className:f.es})},n.map((e,r)=>i.createElement("li",{className:l()(I===r&&f.$p,0===r&&n.length>1&&s(n)?f.KG:f.J7),key:e,...E({item:e,index:r})},e)))),e.children,!p&&e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:f.lI},i.createElement("label",{className:f.Pf,htmlFor:n},e.label),i.createElement("input",{type:"file",id:n,name:e.name,onChange:e.onChange}),e.error)});let C=i.forwardRef(function({className:e,...r},n){return i.createElement("div",{className:E.Kf},i.createElement("label",{className:E.qf,htmlFor:r.id},r.placeholder),i.createElement(h.L,{className:l()(E.hF,e),...(0,m.d)(r),ref:n}))});i.forwardRef(function(e,r){return i.createElement("div",{className:g.kL},i.createElement("span",{className:g.zr,"data-disabled":!!e.disabled||void 0},i.createElement(a.F,{ref:r,...e,className:g.kv}),i.createElement("span",{className:g.Cv},i.createElement(o.g,{className:g.uU}))),i.createElement("label",{htmlFor:e.id},e.label))})},632923:(e,r,n)=>{"use strict";n.d(r,{DH:()=>S,Go:()=>w,Wd:()=>T,dH:()=>v,k0:()=>N,ks:()=>C,mQ:()=>I,yJ:()=>b});var i=n(411855),a=n(629019),o=n.n(a),s=n(966712),l=n(659838),c=n(493323),d=n(574176),u=n(101505),p=n(672517),m=n(207872),h=n(184175),_=n(185945),g=n(377182),f=n(262254),E=n(160870);class y extends i.Component{render(){let e=`${h.x6} ${this.props.className||""}`,r={...this.props,className:e};return i.createElement("button",{...r},this.props.children)}}y.displayName="Button";let b=(0,p.tf)(function({svg:e,onClick:r,text:n}){return i.createElement(v,{type:"button",use:"hollow",onClick:r,"data-no-auto-focus":!0},i.createElement("div",{className:h.og},i.createElement(d.B,{className:h.lL,autosize:!0,width:"18px",height:"18px",svg:e,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("span",{className:_.Nu},n)))});(0,p.tf)(function({svg:e,onClick:r,text:n}){return i.createElement(T,{type:"button",use:"hollow",onClick:r,"data-no-auto-focus":!0},i.createElement("div",{className:h.og},i.createElement(d.B,{className:h.lL,autosize:!0,width:"18px",height:"18px",svg:e,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("div",{className:_.Nu},n)))});class I extends i.Component{render(){return i.createElement(b,{onClick:this.props.onClick,text:this.props.text,svg:f.A,trackingProperties:{trackingDescriptor:u.c.CONTINUE_WITH_GOOGLE}})}}I.displayName="GoogleAuthButton";class T extends i.Component{render(){let e=o()(m.yx,{[m.Ij]:this.props.fullWidth},{[h.Wx]:"hollow"===this.props.use},{[h.bX]:this.props.autoHeight},this.props.className),r={...this.props,className:e};return delete r.loading,delete r.fullWidth,delete r.autoHeight,i.createElement("button",{...r,disabled:this.props.disabled||this.props.loading},this.props.loading?i.createElement(c.kt,null):this.props.children)}}function v(e){let{loading:r,fullWidth:n=!0,autoHeight:a,...s}=e,l=o()(_.yx,{[m.Ij]:n},{[h.bX]:a},{[_.bN]:"hollow"!==e.use&&!r&&!e.disabled,[_.Bn]:"hollow"!==e.use&&r},{[_.Wx]:"hollow"===e.use},_.En,e.className),c={...s,className:l};return i.createElement("button",{...c,disabled:e.disabled||r},i.createElement("span",{className:o()(_.PA,"hollow"!==e.use&&_.bh)},"hollow"===e.use||!r&&e.disabled?null:r?i.createElement(d.B,{svg:E.A,width:"24px",height:"24px",className:_.zc}):i.createElement(d.B,{svg:g.A,width:"24px",height:"24px",className:_.zc}),e.children))}T.displayName="Button",T.defaultProps={fullWidth:!0};let S=(0,p.tf)(v,!!(0,s.kc)().enable_cookies_screen_rollout),w=(0,p.tf)(T);class A extends i.Component{render(){return i.createElement(y,{type:"button",className:h.l_,onClick:this.props.onClick,"data-no-auto-focus":!0},this.props.children)}}function N(e){return i.createElement("div",{style:{height:8*(e.multiple||1)}},e.children)}A.displayName="BrandInfoCaptureButton";class C extends i.Component{render(){let e=`${h._Z} ${this.props.className||""}`,r={...this.props,className:e};return i.createElement(l.L,{...r})}}C.displayName="TextInput"},395771:(e,r,n)=>{"use strict";n.d(r,{R:()=>o});var i=n(411855),a=n(498606);class o extends i.PureComponent{constructor(){super(...arguments),this.textContainerRef=i.createRef(),this.getFittingText=()=>{if(!this.textContainerRef.current)return null;let e=this.textContainerRef.current,r=e.getBoundingClientRect().width,{text:n}=this.props,i=document.createElement("p");if(i.className=this.props.className||"",i.setAttribute("style",`
      display: inline;
      white-space: nowrap;
    `),e.appendChild(i),i.innerText=n,i.getBoundingClientRect().width<=r)return e.removeChild(i),n;let a="";for(let e=0;e<n.length;e+=1){let o=`...${n.slice(n.length-e)}`;i.innerText=o;let{width:s}=i.getBoundingClientRect();if(s>r)break;a=o}return e.removeChild(i),a}}componentDidMount(){this.forceUpdate()}render(){let e=this.getFittingText();return i.createElement("div",{ref:this.textContainerRef,style:{width:this.props.maxWidth?`${this.props.maxWidth}px`:"100%"},"data-tooltip-type":this.props.text!==e?a.Ib.TEXT:void 0,"data-tooltip":this.props.text!==e?this.props.text:void 0,"aria-label":this.props.text},i.createElement("p",{className:this.props.className},e))}}o.displayName="FrontTruncatedText"},511443:(e,r,n)=>{"use strict";n.d(r,{Ug:()=>o,lc:()=>s});var i=n(91408),a=n(860168);(0,i.jz)(a.pXQ);let o=(0,i.jz)(a.aqw),s=(0,i.jz)(a.h4P)},262896:(e,r,n)=>{"use strict";n.d(r,{ny:()=>p});var i=n(776250),a=n(686759),o=n(966712);let s=(0,o.tl)().zendesk_web_key_public,l={productQuestion:{id:360001731233},bugReport:{id:360001744374},featureRequest:{id:360001746113},account:{id:360005944714},dataPrivacy:{id:24342800450071},community:{id:7767730653079},billing:{id:9707134248215},events:{id:19669189307671},other:{id:360001758534}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(l).map(e=>l[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{let r={action:e.action,relatedZendeskId:e.properties?.id,relatedZendeskName:e.properties?.name,searchTerm:e.properties?.term};(0,i.sx)("zendesk_help_widget",r)}))}function p(e,r,n){(d||(d=(async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!s)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,a.k0)("https://static.zdassets.com/ekr/snippet.js?key="+s,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}})())).then(()=>{d&&window.zE&&(window.zESettings=c(),r?.ticketForms&&(window.zESettings.webWidget.contactForm={ticketForms:r.ticketForms.map(e=>l[e]),fields:(r.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),r?.suppressAnswerBot&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),r?.locale&&window.zE("webWidget","setLocale",r.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))}).then(u).catch(()=>console.error(`Our support center is not currently available. You can email us at ${(0,o.W4)()}.`))}},455057:(e,r,n)=>{"use strict";n.d(r,{S:()=>u,_:()=>p});var i=n(411855),a=n(629019),o=n.n(a),s=n(574176),l=n(278733),c=n(177949),d=n(54375),u=(e=>(e[e.INFORMATION=0]="INFORMATION",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.FIGJAM=3]="FIGJAM",e[e.PLAIN=4]="PLAIN",e))(u||{});function p({color:e,icon:r,rounded:n=!0,text:a,dataTestId:u}){return i.createElement("div",{"data-testid":u,style:l.sx.if(!n,{borderRadius:"0px"}).$,className:o()({[c.ZI]:0===e,[c.z3]:1===e,[c.$e]:2===e,[c.hh]:3===e,[c.pj]:4===e})},i.createElement(s.B,{autosize:!0,className:c.G,width:"16px",height:"12px",svg:r??d.A}),i.createElement("p",null,a))}},723325:(e,r,n)=>{"use strict";n.d(r,{M3:()=>b,Nt:()=>v,c2:()=>T,dP:()=>y,lv:()=>w,yn:()=>S,z3:()=>I});var i=n(411855),a=n(459401),o=n(634832),s=n(752795),l=n(157663),c=n(44948),d=n(966712),u=n(498750),p=n(860601),m=n(563706),h=n(522739);let _={preventScroll:!1,block:"nearest"},g={supportHorizontalNavigation:!0,simulateClickOnEnter:!0};class f{constructor({id:e,path:r,column:n,element:i,defaultFocusOptions:a=_,setIsFauxFocused:o,fauxClick:s,keyboardItemNavigationOptions:l=g}){this.id=e,this.path=r,this.column=n,this.element=i,this.defaultFocusOptions=a,this.setIsFauxFocused=o,this.fauxClick=s,this.navigationOptions=l}addToTree(e,r){this.tree=e,function(e,r){let n;let{path:i,column:a}=r;try{n=P(e,i,!0)}catch(e){l.k.warn("Failed to add item to KeyboardNavigationProvider tree: ",r);return}let o=a??0,s=n.items[o]?.element;s&&s!==r.element&&l.k.warn("Overwriting item in KeyboardNavigationProvider tree. Existing item: ",n.items[o]," New item: ",r),n.items[o]=r}(e,this),r&&this.id&&r.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,r){let n,i;let{path:o,column:c}=r;try{n=(i=P(e,o)).items[c||0]??null}catch(e){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(!n){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(n.element!==r.element){l.k.warn("Item found in KeyboardNavigationProvider tree, but it does not match the expected item: ",n,r);return}if(i.items[c||0]=void 0,i.items.every(s.isNullish)){R(e,o.slice(0,-1)).children[o[o.length-1]]=void 0;for(let r=o.length-1;r>=1;r--){let n=o.slice(0,r),[i,l]=(0,a.extractLastItem)(n),c=R(e,i);if(R(e,n).children.every(s.isNullish))c.children[l]=void 0;else break}e.children.every(s.isNullish)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0,this),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1,this)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&L(this.tree,this,"up")}getItemBelow(){if(!this.tree)return null;let e=L(this.tree,this,"down")||null;for(;e&&e.navigationOptions.skipOnDownNavigation;)e=e.getItemBelow();return e}getItemToTheLeft(){return this.tree&&O(this.tree,this,"left")}getItemToTheRight(){if(!this.tree)return null;let e=O(this.tree,this,"right")||null;for(;e&&e.navigationOptions.skipOnRightNavigation;)e=e.getItemToTheRight();return e}}let E=i.createContext(null),y=i.forwardRef(function({onKeyDown:e,allowVim:r=!1,disabled:n,overrideDown:a,overrideUp:o,overrideLeft:s,overrideRight:l,allowHorizontalNavigationWhileInputFocused:c=!1,useKeyNavFauxFocusSync:d,...u},m){let _=i.useRef({type:"parent",children:[]}),g=i.useRef(new Map),f=i.useRef(null),y=i.useCallback(e=>{f.current===e&&(f.current=null)},[]),b=i.useCallback(e=>{f.current=e},[]),I=i.useRef(null),A=i.useRef(null),N=i.useRef(p.lQ),C=i.useCallback(e=>{e===I.current&&(I.current=null,N.current(),N.current=p.lQ)},[]),O=i.useCallback((e,r)=>{I.current&&C(I.current),I.current=e,N.current=r},[C]),L=i.useCallback(n=>{let i=f.current,d=I.current,u=k(n),p=!(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)&&c;if(T(n,r)){if(d){n.preventDefault();let e=D(_.current,d,o);e?e?.fauxFocus():d.getItemAbove()?.fauxFocus()}else if(i){n.preventDefault();let e=D(_.current,i,o);e?e?.focus():i.getItemAbove()?.focus()}}else if(v(n,r)){if(d){n.preventDefault();let e=D(_.current,d,a);e?e?.fauxFocus():d.getItemBelow()?.fauxFocus()}else if(i){n.preventDefault();let e=D(_.current,i,a);e?e?.focus():i.getItemBelow()?.focus()}else A.current&&A.current.fauxFocus()}else if(S(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation){n.preventDefault();let e=D(_.current,d,s);e?e?.fauxFocus():d.getItemToTheLeft()?.fauxFocus()}else if(i){n.preventDefault();let e=D(_.current,i,s);e?e?.focus():i.getItemToTheLeft()?.focus()}}else if(w(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation){n.preventDefault();let e=D(_.current,d,l);e?e?.fauxFocus():d.getItemToTheRight()?.fauxFocus()}else if(i){n.preventDefault();let e=D(_.current,i,l);e?e?.focus():i.getItemToTheRight()?.focus()}}else"Enter"===u?d&&(n.preventDefault(),d.navigationOptions.simulateClickOnEnter&&d.simulateClick()):"Escape"===u&&(i||d)&&(n.preventDefault(),i&&i.blur(),d&&d.fauxBlur());e?.(n)},[c,r,e,o,a,s,l]),R=i.useMemo(()=>({tree:_.current,lookupMap:g.current,onFocusItem:b,onBlurItem:y,onFauxFocusItem:O,onFauxBlurItem:C,fauxBlurItem:()=>I.current?.fauxBlur(),blurItem:()=>f.current?.blur(),setDefaultFauxFocusedItem:e=>{A.current||(A.current=e)},fauxFocusDefaultItem:()=>{A.current?.fauxFocus()},useKeyNavFauxFocusSync:d}),[b,y,O,C,d]);return i.createElement(E.Provider,{value:R},i.createElement(h.D8,{onKeyDown:n?e:L,forwardedRef:m,...u}))});function b({path:e,column:r=null,id:n,defaultFocusOptions:a,onFocus:o,onBlur:l,onFauxFocus:u,onFauxBlur:p,fauxClick:m,disabled:h,navigationOptions:_}){let g=(0,c.zN)(e),y=(0,c.zN)(a),b=(0,c.zN)(_);if(0===g.length)throw Error("Path must be non-empty");if(g.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=r&&r<0)throw Error("Column must be non-negative");let[I,T]=i.useState(void 0),[v,S]=i.useState(!1),[w,A]=i.useState(!1),N=i.useRef(null),{tree:C,lookupMap:O,onFocusItem:L,onBlurItem:R,onFauxFocusItem:P,onFauxBlurItem:D,setDefaultFauxFocusedItem:k,useKeyNavFauxFocusSync:M}=(0,s.requireNotNullish)(i.useContext(E),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>"),F=!!((0,d.kc)().key_nav_faux_focus_sync&&M);i.useEffect(()=>{if(I&&!h){let e=()=>S(!0),r=()=>S(!1);return I.addEventListener("focus",e),I.addEventListener("blur",r),I===document.activeElement&&e(),()=>{I.removeEventListener("focus",e),I.removeEventListener("blur",r),I===document.activeElement&&r()}}},[h,I]);let x=i.useCallback(e=>{A(r=>(r&&(p?.(),D(e)),!1))},[p,D]),U=i.useCallback(e=>{A(r=>(r||(u?.(),P(e,()=>{null!==N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{x(e)},0)})),!0))},[x,u,P]),B=i.useCallback((e,r)=>{e?U(r):x(r)},[U,x]);i.useEffect(()=>()=>{null!==N.current&&clearTimeout(N.current)},[]);let V=i.useMemo(()=>null==I||h?null:new f({id:n,path:g,column:r,element:I,defaultFocusOptions:y,setIsFauxFocused:F?B:A,fauxClick:m,keyboardItemNavigationOptions:b}),[I,h,n,g,r,y,F,B,m,b]);return i.useEffect(()=>{if(V)return V.addToTree(C,O),V.navigationOptions.fauxFocusByDefault&&k(V),()=>{V.removeFromTree(O),V.navigationOptions.fauxFocusByDefault&&k(null)}},[V,O,k,C]),i.useEffect(()=>{if(V&&v)return o?.(),L(V),()=>{l?.(),R(V)}},[V,v,o,l,L,R]),i.useEffect(()=>{if(!F&&V&&w)return u?.(),P(V,()=>{A(!1)}),()=>{p?.(),D(V)}},[V,w,u,p,P,D,F]),{setKeyboardNavigationElement:T,keyboardNavigationItem:V,isFocused:v,isFauxFocused:w}}function I(e="real"){let{blurItem:r,fauxBlurItem:n}=(0,s.requireNotNullish)(i.useContext(E),"Must use `useBlurFocusedItem` inside `<KeyboardNavigationProvider>");return i.useCallback(()=>{switch(e){case"real":r();break;case"faux":n();break;default:(0,o.assertNever)(e)}},[r,n,e])}function T(e,r){let n=k(e),i=(0,u.vN)(e,u.xH.CONTROL),a=m.Ay.mac&&i;return"ArrowUp"===n||"KeyK"===n&&r&&A()||a&&"KeyP"===n}function v(e,r){let n=k(e),i=(0,u.vN)(e,u.xH.CONTROL),a=m.Ay.mac&&i;return"ArrowDown"===n||"KeyJ"===n&&r&&A()||a&&"KeyN"===n}function S(e,r,n=!1){return"ArrowLeft"===e&&N(n)||"KeyH"===e&&r&&A()}function w(e,r,n=!1){return"ArrowRight"===e&&N(n)||"KeyL"===e&&r&&A()}function A(){return!C(document.activeElement)}function N(e){let r=document.activeElement;return!C(r)||!!e||(r instanceof HTMLDivElement?""===r.textContent:""===r.value)}function C(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function O(e,{path:r,column:n},i){if(null==n)return;let o=P(e,r);return("left"===i?a.findLastBefore:a.findFirstAfter)(o.items,n)||L(e,{path:r,column:"left"===i?1/0:-1},"left"===i?"up":"down")}function L(e,{path:r,column:n},i){for(let o=r.length-1;o>=0;o--){let s=r.slice(0,o),l=r[o],c=R(e,s),d=("up"===i?a.findLastBefore:a.findFirstAfter)(c.children,l);if(d){let e=("up"===i?function e(r){if("leaf"===r.type)return r;let n=(0,a.findLastBefore)(r.children,r.children.length);if(n)return e(n);throw Error("Expected a node but got nothing")}:function e(r){if("leaf"===r.type)return r;let n=(0,a.findFirstAfter)(r.children,-1);if(n)return e(n);throw Error("Expected a node but got nothing")})(d);return(0,a.findNearest)(e.items,n||0)}}}function R(e,r,n=!1){for(let i of r){let r=e.children[i];if(r){if("leaf"===r.type)throw Error("Expected a parent but got a leaf");e=r}else if(n){let r={type:"parent",children:[]};e.children[i]=r,e=r}else throw Error("Expected a parent but got nothing")}return e}function P(e,r,n=!1){let[i,o]=(0,a.extractLastItem)(r),s=R(e,i,n),l=s.children[o];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(n){let e={type:"leaf",items:[]};return s.children[o]=e,e}throw Error("Expected a leaf but got nothing")}function D(e,r,n){try{var i,a;let o=n?.(r);return o&&(i=o.path,a=o.column,P(e,i).items[a??0])}catch(e){}}function k(e){return e.code??e.key}},638889:(e,r,n)=>{"use strict";n.d(r,{S:()=>o});var i=n(411855),a=n(338053);class o extends i.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return i.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((r,n)=>{let o=-1!==e.indexOf(r)?a.C:a.G;return i.createElement("span",{key:n,className:o},r)}))}}o.displayName="KeyboardShortcut"},28928:(e,r,n)=>{"use strict";n.d(r,{n:()=>i.o});var i=n(194422);n(411855),n(629019),n(493323),n(281249),n(354235)},194422:(e,r,n)=>{"use strict";n.d(r,{o:()=>i});var i,a=n(167249);(e=>{e.set=(0,a.N)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,a.N)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(i||(i={}))},976999:(e,r,n)=>{"use strict";n.d(r,{JR:()=>o,Qp:()=>c,Wi:()=>l});var i=n(411855),a=n(427371),o=(e=>(e.SHIMMER="shimmer",e.SHIMMER_ON_MENU="shimmer_on_menu",e.LIGHT_SHIMMER="light_shimmer",e.NO_SHIMMER="no_shimmer",e))(o||{});let s=e=>{switch(e){case"shimmer":default:return a._J;case"light_shimmer":return a.QH;case"shimmer_on_menu":return a.Sw;case"no_shimmer":return}};function l(e){return i.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${"shimmer_on_menu"===e.animationType?a.ky:a.KQ} ${e.primary?a.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},i.createElement("div",{className:s(e.animationType)}))}function c(e){return i.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${a.GE} ${e.primary?a.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},i.createElement("div",{className:s(e.animationType)}))}},32863:(e,r,n)=>{"use strict";n.d(r,{Cp:()=>x,IW:()=>F,Lp:()=>V,Qv:()=>U,jq:()=>G,ne:()=>M,o_:()=>H,xD:()=>B,y2:()=>W});var i=n(411855),a=n(782683),o=n(882316),s=n(629019),l=n.n(s),c=n(91408),d=n(320063),u=n(358145),p=n(498750),m=n(153234),h=n(522739),_=n(659838),g=n(574176),f=n(762638),E=n(939863),y=n(278733),b=n(896474),I=n(226055),T=n(283942),v=n(498606),S=n(507956),w=n(227795),A=n(170588),N=n(860168),C=n(901723),O=n(399403),L=n(700977),R=n(703475),P=n(630834),D=n(361807),k=n(372240);function M(e,r){let n=i.useCallback(e=>{setTimeout(()=>{I.current&&(I.current.focus(),e&&I.current.select())},0)},[]),a=i.useCallback(()=>{I.current&&I.current.blur()},[]),o=i.useCallback(()=>{I.current&&I.current.select()},[]);i.useImperativeHandle(r,()=>({focus:n,blur:a,select:o,searchInput:I.current}));let[s,l]=i.useState(!1),[c,h]=i.useState(!1),[_,g]=i.useState(void 0),{onFocus:f,onClick:E}=e,y=i.useCallback(()=>{f&&f(),h(!0)},[f]),b=i.useRef(!1),I=i.useRef(null),v=i.useCallback(e=>{b.current=document.activeElement!==e.target},[]),S=i.useCallback(()=>{b.current&&(I.current?.select(),y())},[y]),w=i.useCallback(()=>{e.onBlur&&e.onBlur(),h(!1)},[e]),A=m.AF(e.recordingKey,"change",r=>{let n=r.target;e.onChange(n.value)}),N=i.useCallback(r=>{if(!(e.isKeyDownHandled&&e.isKeyDownHandled(r))){if(" "===r.key&&r.stopPropagation(),r.keyCode===p.Uz.ESCAPE){I.current?.blur();return}(0,T.jr)(r,T.W0.NO)}},[e]),C=i.useCallback((e=!1)=>{e&&l(!0),n(),E&&E()},[n,E]),O=m.rf(e.recordingKey,"click",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),L=m.v_(e.recordingKey,"keydown",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),R=(0,u.ZC)(e.isFocused);return i.useEffect(()=>{R||!0!==e.isFocused?!0===R&&!1===e.isFocused&&a():n()},[a,n,R,e.isFocused]),(0,d.h)(()=>{e.focusOnMount&&I.current&&(I.current.focus(),y()),e.selectTextOnMount&&I.current&&I.current.select()}),{loggedOutSearchBarActivated:s,inputFocused:c,placeholderWidth:_,setPlaceholderWidth:g,searchInputRef:I,onMouseDown:v,onMouseUp:S,onSearchClick:C,onClearSearchClick:O,onClearSearchKeyDown:L,onFocus:f,onBlur:w,onClick:E,onSearchKeyDown:N,onSearchChange:A}}let F=i.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:m,onSearchChange:h}=M(e,r),f=(0,S.ks)(),b=f?C.vq:C.rk;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${b} ${e.className||""}`},e.withUI3Icon?i.createElement(a.h,{className:e.iconClassName}):i.createElement(g.B,{className:e.iconClassName??C.qc,svg:O.A}),i.createElement(_.L,{ref:o,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.mn,value:e.query,onMouseDown:s,onMouseUp:l,onFocus:d,onBlur:u,onClick:p,onChange:h,onKeyDown:m,spellCheck:!1,style:y.sx.if(e.hasTransparentBackground,y.sx.add({background:"transparent"})).if(f||e.smallFont,y.sx.if(n,y.sx.textBodyMedium,y.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),i.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))});i.forwardRef((e,r)=>{let n=(0,I.GS)(),{searchInputRef:a,onMouseDown:o,onMouseUp:s,onClearSearchClick:l,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:p,onSearchChange:m}=M(e,r),h=(0,S.ks)(),g=h?C.vq:C.rk;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${g} ${e.className||""}`},i.createElement("button",{onClick:e.onBack,className:f.cx.colorBgSecondary.$},i.createElement(b.In,{icon:"chevron-left-32"})),i.createElement(_.L,{ref:a,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.mn,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:c,onBlur:d,onClick:u,onChange:m,onKeyDown:p,spellCheck:!1,style:y.sx.if(e.hasTransparentBackground,y.sx.add({background:"transparent"})).if(h||e.smallFont,y.sx.if(n,y.sx.textBodyMedium,y.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),i.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:l}))}),i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onSearchClick:d,onClearSearchClick:u,onFocus:p,onBlur:m,onClick:h,onSearchKeyDown:f,onSearchChange:y}=M(e,r),b=e.placeholder||(0,E.t)("general.search"),I=`${e.className||""} ${n?C.pp:C.MI}`;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:I},i.createElement(g.B,{className:C.MU,svg:O.A,onClick:()=>d()}),i.createElement(_.L,{ref:s,placeholder:b,className:C.mn,value:e.query,onMouseDown:l,onMouseUp:c,onFocus:p,onBlur:m,onClick:h,onChange:y,onKeyDown:f,style:{width:n?void 0:a},spellCheck:!1}),i.createElement("div",{className:C.ds,ref:e=>o(e?.getBoundingClientRect().width)},b),i.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:u}))}),i.forwardRef((e,r)=>{let n=i.createRef();return i.useImperativeHandle(r,()=>n.current),i.createElement("div",{className:C.$7,onMouseDown:()=>n.current?.focus(),role:"presentation"},i.createElement(F,{...e,smallFont:!0,hasTransparentBackground:!0,className:l()(f.cx.wFull.$,e.className),ref:n}))});let x=i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:p,onSearchKeyDown:m,onSearchChange:h}=M(e,r),f=e.placeholder||(0,E.t)("general.search"),y=`${e.className||""} ${C.W1}`,b=e.query.length>0?C.p3:C.Rt;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{s(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l,role:"presentation"},i.createElement(g.B,{className:C.mh,svg:O.A}),i.createElement(_.L,{ref:o,placeholder:f,className:b,value:e.query,onFocus:d,onBlur:u,onClick:p,onChange:h,onKeyDown:m,style:{width:n?void 0:a},spellCheck:!1}),i.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))}),U=i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onClearSearchClick:d,onFocus:u,onBlur:p,onClick:m,onSearchKeyDown:h,onSearchChange:g}=M(e,r),f=e.placeholder||(0,E.t)("general.search"),y=`${e.className||""} ${C.Gh}`,I=e.query.length>0?C.r3:C.nP;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:c,role:"presentation"},i.createElement(b.In,{icon:"search-32"}),i.createElement(_.L,{ref:s,placeholder:f,className:I,value:e.query,onFocus:u,onBlur:p,onClick:m,onChange:g,onKeyDown:h,style:{width:n?void 0:a},spellCheck:!1}),i.createElement("div",{className:C.lm,ref:e=>o(Math.max(50,e?.getBoundingClientRect().width))},f),i.createElement(K,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:d}))}),B=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onFocus:s,onBlur:l,onClick:c,onSearchKeyDown:d,onSearchChange:u}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:C.sb},i.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.vs,value:e.query,onMouseDown:a,onMouseUp:o,onFocus:s,onBlur:l,onChange:u,onClick:c,onKeyDown:d,spellCheck:!1}),i.createElement(g.B,{className:C.Ck,svg:L.A,onClick:e.onSubmit}))}),V=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onClearSearchClick:s,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:p,onSearchChange:h}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l()(e.className||C.HD,{[C.RT]:!e.extraSpacing,[C.qX]:e.extraSpacing,[C.Cs]:e.hideSearchIcon})},!e.hideSearchIcon&&i.createElement(g.B,{svg:R.A,className:C.nk}),i.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("design_systems.publishing_modal.search_placeholder"),className:e.query?C.CC:C.Vl,value:e.query,onMouseDown:a,onMouseUp:o,onFocus:c,onBlur:d,onClick:u,onChange:h,onKeyDown:p,spellCheck:!1,dataTestId:e.dataTestId}),!!e.query&&!e.hideXIcon&&i.createElement(w.Me,{recordingKey:m.Pt(e,"closeX"),svg:P.default,onClick:s,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,E.t)("search.search_bar.clear")}))}),G=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:p}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ZG} ${e.className||""}`},i.createElement(g.B,{svg:R.A,className:C.MU}),i.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.uD,value:e.query,onMouseDown:a,onMouseUp:o,onFocus:l,onBlur:c,onClick:d,onChange:p,onKeyDown:u,spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0}),i.createElement(h.D8,{className:C.m9,onClick:s,recordingKey:m.Pt(e,"clearSearch")},!!e.query&&(0,E.tx)("collaboration.branching_to_source.clear")),!e.hideXIcon&&i.createElement("div",{className:C.NC},i.createElement(g.B,{className:C.i3,svg:P.default,onClick:e.onClose})))}),H=i.forwardRef((e,r)=>{let{loggedOutSearchBarActivated:n,searchInputRef:a,onMouseDown:o,onMouseUp:s,onSearchClick:l,onClearSearchClick:d,onFocus:u,onBlur:p,onClick:m,onSearchKeyDown:h,onSearchChange:f}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${C.ax} ${e.className||""}`},!n&&!e.query&&i.createElement("div",{className:C.JU,onClick:()=>l(!0)},i.createElement(g.B,{className:C.Qm,svg:L.A})),(n||!!e.query)&&i.createElement("div",{className:C.S_},i.createElement(_.L,{ref:a,placeholder:e.placeholder||(0,E.t)("general.search"),className:C.nA,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:u,onBlur:p,onClick:m,onChange:f,onKeyDown:h,autoFocus:!0,spellCheck:!1}),i.createElement(A.z,{query:`(min-width: ${(0,c.hG)(N.tgj)}px)`},i.createElement(g.B,{className:C.i3,svg:D.A,onClick:d})),i.createElement(A.z,{query:`(max-width: ${(0,c.hG)(N.tgj)-1}px)`},i.createElement(g.B,{className:C.i3,svg:k.A,onClick:d}))))}),W=i.forwardRef((e,r)=>{let n=i.createRef();return i.useImperativeHandle(r,()=>n.current),i.createElement("div",{className:C.tL,style:e.styleOverrides,onMouseDown:()=>n.current?.focus(),role:"presentation"},i.createElement(F,{...e,smallFont:!0,className:l()(f.cx.wFull.$,e.className),ref:n}))});function K({query:e,hideXIcon:r,withSmallXIcon:n,onClearSearchClick:a}){return!e||r?null:i.createElement(i.Fragment,null,n?i.createElement(h.D8,{className:C.i3,onClick:a},i.createElement(o.f,null)):i.createElement(g.B,{dataTestId:"search-x-icon",className:C.i3,svg:P.default,onClick:a}))}},194400:(e,r,n)=>{"use strict";n(411855),n(188507);var i=n(672517),a=n(717421);(0,i.tf)(a.d)},271779:(e,r,n)=>{"use strict";n.d(r,{C:()=>c,i:()=>d});var i=n(411855),a=n(629019),o=n.n(a),s=n(503537),l=n(762638),c=(e=>(e.Block="block",e.DeprecatedFullHeightBlock="fullHeightBlock",e.Contents="contents",e))(c||{});class d extends i.Component{constructor(){super(...arguments),this.containerRef=i.createRef(),this.traverseChildren=()=>{this.firstTabbableEl=void 0,this.lastTabbableEl=void 0;let e=r=>{for(let n of((0,s.B)(r)&&((!this.firstTabbableEl||r.tabIndex<this.firstTabbableEl.tabIndex)&&(this.firstTabbableEl=r),(!this.lastTabbableEl||r.tabIndex>=this.lastTabbableEl.tabIndex)&&(this.lastTabbableEl=r)),Array.from(r.children)))e(n);for(let n of Array.from(r.shadowRoot?.children||[]))e(n)};e(this.containerRef.current)},this.onFrontGuardFocus=e=>{this.traverseChildren();let r=this.containerRef.current.contains(e.relatedTarget)?this.lastTabbableEl:this.firstTabbableEl;this.focusElement(r)},this.onBackGuardFocus=()=>{this.traverseChildren(),this.focusElement(this.firstTabbableEl)}}focusElement(e){e&&setTimeout(()=>{e.focus(),e.select?.()},0)}render(){let e=o()(this.props.className,{[l.cx.hFull.$]:"fullHeightBlock"===this.props.displayAs,displayContents:"contents"===this.props.displayAs});return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onFrontGuardFocus}),i.createElement("div",{className:e,ref:this.containerRef},this.props.children),i.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onBackGuardFocus}))}}d.defaultProps={displayAs:"contents"},d.displayName="TabLoop"},331737:(e,r,n)=>{"use strict";n.d(r,{H5:()=>m});var i=n(411855),a=n(915440),o=n(36201),s=n(320733),l=n(121776),c=n(869381),d=n(27703),u=n(99506),p=n(279453);function m({file:e,...r}){var n,m;let h=(0,a.Rs)(p.sMs,{key:e.key}),_=(n=e.editor_type,m=!!e.thumbnail_guid,n===u._Y.SLIDES?c.F.SLIDES:n===u._Y.WHITEBOARD?m?c.F.WHITEBOARD:c.F.DEFAULT_WHITEBOARD:m?c.F.DESIGN:c.F.DEFAULT_DESIGN);if((0,d.i4)(e)){if("loading"===h.status)return i.createElement(l.q,{...r});if(!h.transform(e=>!!e.file?.hasPermission).unwrapOr(!1))return i.createElement(o.N,{thumbnailType:_,...r})}return i.createElement(s.V,{key:e.key,thumbnailUrl:e.thumbnail_url_override??e.thumbnail_url,thumbnailType:_,clientMeta:e.client_meta,lastTouchedAt:e.touched_at??e.updated_at,...r})}},320733:(e,r,n)=>{"use strict";n.d(r,{V:()=>b});var i=n(411855),a=n(629019),o=n.n(a),s=n(181912),l=n(966712),c=n(38580),d=n(374626),u=n(864089),p=n(89161),m=n(121776),h=n(869381),_=n(762638),g=n(920037),f=n(234641),E=n(879065);let y=(0,c.eU)({});function b({thumbnailUrl:e,thumbnailType:r,lastTouchedAt:n,clientMeta:a,size:c,borderRadius:b,noBorder:I,addtlStyles:T}){let v=!!(0,l.kc)().file_browser_thumbnails_16_by_9&&r!==h.F.DEFAULT_DESIGN&&r!==h.F.DEFAULT_WHITEBOARD&&r!==h.F.SLIDES,{latestThumbnailUrl:S,smartBackgroundColor:w}=function({touchedAt:e,thumbnailUrl:r,needsSmartBackground:n}){let[a,o]=(0,d.fp)(y),l=!e||(0,s.A)(e).isBefore((0,s.A)().subtract(4,"seconds")),c=!n||r&&!!a[r],[u,p]=i.useState(l&&r&&c?r:null),m=i.useCallback(e=>{if(!n||a[e])p(e);else{let r=new Image;r.crossOrigin="anonymous",r.className=_.cx.fixed.hidden.$,r.onload=()=>{let n=(0,f.J)(r);n&&o(r=>({...r,[e]:n})),p(e),r.remove()},r.src=e,document.body.appendChild(r)}},[p,n,a,o]);i.useLayoutEffect(()=>{if(r){if(e){let n=(0,s.A)(e).diff((0,s.A)().subtract(4,"seconds"));if(n<=0){m(r);return}{let e=setTimeout(()=>{m(r)},n);return()=>clearTimeout(e)}}m(r)}else p(null)},[e,r,m]);let h=n&&u?a[u]:void 0;return{latestThumbnailUrl:u,smartBackgroundColor:h}}({thumbnailUrl:e,touchedAt:n,needsSmartBackground:v}),[A,N]=i.useState(!1);i.useLayoutEffect(()=>{N(!1)},[S]);let C=r!==h.F.SLIDES?(0,g.C)(a):void 0,O=r===h.F.DEFAULT_DESIGN||r===h.F.DEFAULT_WHITEBOARD;return i.createElement(m.q,{borderRadius:b,backgroundClassName:o()({[E.Kf]:r===h.F.WHITEBOARD||r===h.F.DEFAULT_WHITEBOARD,[E._k]:r===h.F.DEFAULT_DESIGN&&(!C||"transparent"===C),[E.gc]:r===h.F.PROTOTYPE||r===h.F.SLIDES||r===h.F.SITES&&!(v&&w)&&(!C||"transparent"===C)}),noBorder:I,backgroundColor:v?w:C},r===h.F.OFFLINE?i.createElement(p.A,{listView:c===h.y.SMALL}):null!==S&&!A&&i.createElement(u.oW,{src:S,alt:"",loading:"lazy",onError:(0,l.kc)().web_thumbnail_on_error_handling?()=>N(!0):void 0,draggable:!1,className:o()(_.cx.hFull.wFull.$,{[E._j]:!O&&!(0,l.kc)().file_browser_thumbnails_16_by_9,[E.pQ]:O||(0,l.kc)().file_browser_thumbnails_16_by_9,[_.cx.p10.$]:O&&c!==h.y.SMALL,[_.cx.p4.$]:O&&c===h.y.SMALL}),crossOrigin:"anonymous",style:T}))}},715981:(e,r,n)=>{"use strict";n.d(r,{L:()=>_});var i=n(411855),a=n(187134),o=n(96796),s=n(629019),l=n.n(s),c=n(153234),d=n(574176),u=n(348425),p=n(586513),m=n(289298);let h=e=>e.stopPropagation();i.forwardRef((e,r)=>i.createElement(a.o,{eventListeners:["onClick"]},i.createElement(_,{...e,children:void 0,recordingKey:e.recordingKey,ref:r}),e.children));class _ extends c.uA{constructor(e){super(e),this.onClick=c.cZ(this,"click",e=>{this.props.onClick&&!this.props.onClickForKeyDownOnly&&this.props.onClick(e)}),this.onKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),this.wrapperRef.current?.blur(),this.buttonRef.current?.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))},this.wrapperRef=i.createRef(),this.buttonRef=i.createRef()}render(){let e,r="";r=this.props.selected?p.wH:this.props.enabled?p.Sn:p.r9,this.props.isUI3&&this.props.ui3Icon?e=this.props.ui3Icon:this.props.useSvgNode?e=this.props.svgNode?i.createElement("span",null,this.props.svgNode):null:this.props.svg&&(e=i.createElement(u.t,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}));let n=i.createElement(i.Fragment,null,!this.props.hidden&&e,this.props.text&&i.createElement("span",{className:this.props.textStyle||(this.props.svg?p.Pf:p.Qq)},this.props.text),this.props.showIndicator&&i.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:p.q3}),this.props.showChevron&&(this.props.isUI3?i.createElement("div",{className:p.VI},i.createElement(o.O,null)):this.props.positionOnChevron?i.createElement("div",{className:p.FH,ref:this.props.chevronRef},i.createElement(d.B,{svg:m.A,className:l()(p.cN,p.Ot)})):i.createElement(d.B,{svg:m.A,className:p.cN})),this.props.children);return i.createElement("button",{id:this.props.id,ref:this.buttonRef,className:l()(r,this.props.narrow?p.sc:null,this.props.className),onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0,onClick:h,"data-tooltip-type":this.props["data-tooltip-type"],"data-tooltip-submenu-open":this.props["data-tooltip-submenu-open"],"data-tooltip":this.props["data-tooltip"],"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-tooltip-offset-x":this.props.showChevron&&!this.props.isUI3&&this.props.positionOnChevron?8:0,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,onKeyDown:this.onKeyDown,"aria-label":this.props.ariaLabel,"aria-expanded":this.props["aria-expanded"],"aria-controls":this.props["aria-controls"],"aria-haspopup":this.props["aria-haspopup"],"data-fullscreen-intercept":!0},n)}}_.displayName="TopBarAction",_.defaultProps={enabled:!0,hidden:!1}},752207:(e,r,n)=>{"use strict";n.d(r,{G:()=>u});var i=n(411855),a=n(629019),o=n.n(a),s=n(255942),l=n(219101),c=n(947131),d=n(163771);let u=i.forwardRef(function({text:e,className:r,showTooltip:n=c.i.WHEN_TRUNCATED,truncate:a="end",getTooltipText:u=r=>e},p){let m=i.useRef(null),h=(0,c.m)(u,n,m);return i.createElement("div",{ref:(0,s.A)(p,m),className:o()({[d.bb]:"start"===a},d.zr,r),"aria-label":e,...h},i.createElement(l.e,{condition:"start"===a,wrapper:e=>i.createElement("span",{className:d.Pf},e)},i.createElement(i.Fragment,null,e)))})},979441:(e,r,n)=>{"use strict";n(411855),n(629019),n(256975),n(964881),n(617453),n(100197)},787978:(e,r,n)=>{"use strict";var i=n(411855),a=n(629019),o=n.n(a),s=n(860601),l=n(153234),c=n(498606),d=n(394302);(0,i.forwardRef)(function({tooltipText:e,tooltipShortcut:r,onMouseDown:n,isActive:a=!1,disabled:u=!1,simulateHover:p=!1,isToolGroup:m=!1,isToolbeltAction:h=!1,children:_,onboardingKey:g,recordingKey:f="toolbelt-button",elementId:E},y){let b=(0,i.useRef)(null);(0,i.useImperativeHandle)(y,()=>({getBoundingClientRect:()=>b.current.getBoundingClientRect()}));let I=o()(d.k2,{[d.IN]:!m},u?d.NY:{[d.hM]:h,[d.Ou]:!m&&a,[d.yo]:p}),T=(0,l.rf)(f,"mousedown",n);return i.createElement("div",{ref:b,className:I,id:E,onMouseDown:u?s.lQ:T,"data-tooltip-type":c.Ib.TEXT,"data-tooltip":e,"data-tooltip-shortcut":r,"data-tooltip-show-above":!0,role:"presentation","aria-label":e,"data-fullscreen-intercept":!0,"data-onboarding-key":g},_)})},378958:(e,r,n)=>{"use strict";n.d(r,{f:()=>l});var i=n(411855);n(640783);var a=n(800576);n(574176),n(939863);var o=n(216158),s=n(781294);function l(){return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}o.M4.Query({fetch:async e=>e?(await s.$.getFaviconForUrlProxy({url:(0,a.Jk)(e)})).data.meta??null:null})},298365:(e,r,n)=>{"use strict";n.d(r,{n:()=>l});var i=n(411855),a=n(181912),o=n(178466),s=n(498606);function l(e){let r=function(e,r=(0,o.Gq)().getPrimaryLocale(!1)){return new Intl.DateTimeFormat(r,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(a.A.utc(e).toDate())}(e.date,e.locale);return i.createElement("span",{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":r},e.children)}},427472:(e,r,n)=>{"use strict";n.d(r,{ZQ:()=>v});var i=n(411855),a=n(629019),o=n.n(a),s=n(560945),l=n(966712),c=n(646240),d=n(374626),u=n(563706),p=n(946689),m=n(574176),h=n(939863),_=n(101505),g=n(672517),f=n(988022),E=n(111538),y=n(916058),b=n(909595),I=n(108545);function T(e){let[r,n]=i.useState(e.showBanner),{trackEvent:a}=(0,g.j6)(),l=i.useRef(null),d=(0,c.Xr)(E.P4),u=(0,s.w)(l)??s.c,y=r?u.height+(e.verticalPadding||0):0;i.useEffect(()=>{d(y)},[y,d]);let T=async()=>{n(!1),await (0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1}),a(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},v=async()=>{n(!1),await (0,E.L3)({consentRegion:"explicit",cookiesEnabled:!0}),a(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},S=async()=>{n(!1),await (0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1}),a(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return r?i.createElement("div",{className:o()(I.kL,e.variant===b.a.COMMUNITY&&[I.gC,I.Vt],e.variant===b.a.FILE_VIEWER&&I.ut,e.variant===b.a.PROTOTYPE&&I.Id,e.variant===b.a.AUTH&&[I.gC,I.Yp]),role:"region",ref:l,"aria-label":(0,h.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},i.createElement("div",{className:I.rf},(0,h.tx)("cookies.explicit_consent_body")," ",i.createElement(p.Yo,{href:(0,h.dS)("/consent-preferences/"),target:"_blank",rel:"noreferrer"},(0,h.tx)("cookies.cookies_settings"))),i.createElement("div",{className:I.o1},i.createElement(e.SecondaryButton,{onClick:T,"data-testid":"cookie-opt-out-button"},(0,h.tx)("cookies.do_not_allow_cookies")),i.createElement(e.PrimaryButton,{onClick:v,"data-testid":"cookie-opt-in-button"},(0,h.tx)("cookies.allow_all_cookies"))),i.createElement("div",{className:I.X8},i.createElement("button",{onClick:S,type:"button","data-testid":"cookie-dismiss-button"},i.createElement(m.B,{className:I.MW,svg:e.dismissIcon})))):e.persistentMessage&&i.createElement(g.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function v(e){let r=(0,d.md)(E.Dr),n=!1;return(r===E.S6.UNLOADED&&(n=!0),r!==E.S6.YES||e.persistentMessage||(n=!0),(0,y.V)()&&(n=!0),l.Ay().user_data?.id&&(n=!0),(0,l.Ay)().is_embed&&(n=!0),u.Ay.isMeetDevice&&(n=!0),i.useEffect(()=>{!n&&u.Ay.isIpadNative&&(0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||u.Ay.isIpadNative)?null:i.createElement(g.fu,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},i.createElement(T,{...e,showBanner:r===E.S6.NO}))}},802755:(e,r,n)=>{"use strict";n.d(r,{C$:()=>T});var i=n(411855),a=n(629019),o=n.n(a),s=n(560945),l=n(966712),c=n(646240),d=n(374626),u=n(563706),p=n(946689),m=n(574176),h=n(101505),_=n(672517),g=n(988022),f=n(111538),E=n(916058),y=n(909595),b=n(108545);function I(e){let[r,n]=i.useState(e.showBanner),[a,l]=i.useState(!1),d=i.useRef(null),u=i.useRef(),E=(0,c.Xr)(f.P4),I=(0,s.w)(d)??s.c,T=r?I.height+(e.verticalPadding||0):0;i.useEffect(()=>{E(T)},[T,E]);let{trackEvent:v}=(0,_.j6)(),S=i.useRef(v);S.current=v,i.useEffect(()=>()=>{clearTimeout(u.current)},[]);let w=i.useCallback(e=>{d.current?.contains(e.target)||(l(!0),window.removeEventListener("click",w),u.current=setTimeout(async()=>{if(!r)return null;n(!1),await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[r]),A=i.useCallback(async()=>{clearTimeout(u.current),a&&(await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[a]);i.useEffect(()=>{if(r)return window.addEventListener("click",w),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A),window.removeEventListener("click",w)}},[r,w,A]);let N=async()=>{n(!1),window.removeEventListener("click",w),await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!1}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},C=async()=>{n(!1),window.removeEventListener("click",w),await (0,f.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(g.Ws,{trackingDescriptor:h.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return r?i.createElement("div",{className:o()(b.kL,e.variant===y.a.COMMUNITY&&[b.gC,b.Vt],e.variant===y.a.FILE_VIEWER&&b.ut,e.variant===y.a.PROTOTYPE&&b.Id,e.variant===y.a.AUTH&&[b.gC,b.Yp]),role:"region","aria-label":"Consent Manager",ref:d,"data-testid":"cookie-banner"},i.createElement("div",{className:b.rf},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",i.createElement(p.Yo,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",i.createElement("b",null,"California Residents")," can learn how personal information is"," ",i.createElement(p.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",i.createElement(p.Yo,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",i.createElement(p.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",i.createElement(p.Yo,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),i.createElement("div",{className:b.o1},i.createElement(e.SecondaryButton,{onClick:N,"data-testid":"cookie-opt-out-button"},"Opt out")),i.createElement("div",{className:b.X8},i.createElement("button",{onClick:C,type:"button","data-testid":"cookie-dismiss-button"},i.createElement(m.B,{className:b.MW,svg:e.dismissIcon})))):e.persistentMessage&&i.createElement(_.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function T(e){let r=(0,d.md)(f.Dr),n=!1;return(r===f.S6.UNLOADED&&(n=!0),r!==f.S6.YES||e.persistentMessage||(n=!0),(0,E.V)()&&(n=!0),l.Ay().user_data?.id&&(n=!0),(0,l.Ay)().is_embed&&(n=!0),u.Ay.isMeetDevice&&(n=!0),i.useEffect(()=>{!n&&u.Ay.isIpadNative&&(0,f.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||u.Ay.isIpadNative)?null:i.createElement(_.fu,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},i.createElement(I,{...e,showBanner:r===f.S6.NO}))}},795621:(e,r,n)=>{"use strict";n.d(r,{S:()=>o});var i=n(411855),a=n(522739);let o={div:function(e){return i.createElement("div",{"data-fpl-inaccessible":!0,...e})},button:function(e){return i.createElement("button",{"data-fpl-inaccessible":!0,type:"button",...e})},recordableDiv:function(e){return i.createElement(a.D8,{"data-fpl-inaccessible":!0,...e,recordingKey:e.recordingKey,ref:e.ref})},recordableButton:function(e){return i.createElement(a.GG,{"data-fpl-inaccessible":!0,type:"button",...e,recordingKey:e.recordingKey})}}},791489:(e,r,n)=>{"use strict";n.d(r,{Q$:()=>d,Up:()=>c,VA:()=>i,W:()=>u,Xn:()=>o,o6:()=>l,tr:()=>m,ts:()=>s});var i,a=n(347167);let o="en",s="ja";(e=>{e.AAA="aaa",e.AAL="aal"})(i||(i={}));let l=["aaa","aal"],c=[o,"fr","de",s,...l],d=["fr","de","es-la","es-es","pt-br","ko-kr"],u=a.A;var p=(e=>(e[e.WARN=0]="WARN",e[e.ERROR=1]="ERROR",e))(p||{}),m=(e=>(e.BAD="Bad translation",e.MISSING="Missing string",e.DICT_NOT_LOADED="Dict Not Loaded",e.UNKNOWN="Unknown error",e.MISSING_ARGS="Missing Args",e))(m||{})},273709:(e,r,n)=>{"use strict";n(966712)},443230:(e,r,n)=>{"use strict";n.d(r,{o:()=>a});var i=n(38580);(0,i.eU)(!1);let a=(0,i.eU)(null,()=>{})},872429:(e,r,n)=>{"use strict";n.d(r,{Vj:()=>a,cJ:()=>o,oz:()=>i});let i=function(){return!1},a=function(){return!1},o=function(){return!1}},764257:(e,r,n)=>{"use strict";n.d(r,{IU:()=>i,bC:()=>a});let i=function(){return""},a=function(){return!1}},362369:(e,r,n)=>{"use strict";n.d(r,{E:()=>i});var i=(e=>(e.FJ_SELECTION="figjam-selection-inline-menu",e.FJ_SHARE_MODAL="figjam-share-modal",e.FJ_PAGE_MENU="figjam-page-context-menu",e.FJ_FILE_MENU="figjam-file-editor-menu",e.SLIDES_TEMPLATE="slides-template",e))(i||{})},983499:(e,r,n)=>{"use strict";n(27087)},141273:(e,r,n)=>{"use strict";n.d(r,{Os:()=>p});var i=n(188507),a=n(966712),o=n(877723),s=n(205548),l=n(239737),c=n(132572),d=n(144119),u=n(924430);function p(){let e=(0,d.sO)(),r=function(){let e=(0,o.u4)(),r=function(){let e=(0,o.u4)(),r=(0,l.vh)();return!!(0,a.kc)().piper_actions&&e&&r}(),n=(0,i.d4)(e=>e.userFlags),d=(0,s.mW)(n,u.wl);return!!(0,a.kc)().piper_actions&&e&&(0,c.AL)()&&r&&d}();return e&&!r}},636227:(e,r,n)=>{"use strict";n.d(r,{Yc:()=>_,d_:()=>g});var i=n(411855),a=n(188507),o=n(218881),s=n(239349),l=n(809831),c=n(694687),d=n(860178),u=n(893606),p=n(479296),m=n(72754),h=n(430196);function _(){let{getConfig:e}=(0,o.I7)("fd_to_slides_entrypoints");return e}function g(){let e=(0,a.d4)(e=>e.openFile),r=(0,l.Em)(),n=(0,d.Pc)(),i=(0,u.R)(),o=(0,c.sZ)();if(!n||!r||!i||o?.id&&o.is_slides_disabled)return!1;let s=e?.creatorId===n.id;return!!e&&!!s}(0,p.n)(()=>{let e=g(),r=_(),n=(0,h.N)(),a=(0,s.Tv)(),o=(0,m.A)();return(0,i.useMemo)(()=>{if(!e)return!1;let i=r().get("enabled",!1);return a.length?!!o.length&&i:n.size>0&&i},[r,e,a.length,n.size,o.length])})},144119:(e,r,n)=>{"use strict";n.d(r,{sO:()=>o});var i=n(188507);n(587670),n(373119),n(100197),n(601607),n(452883);var a=n(656147);function o(){return(0,i.d4)(e=>(0,a.P)(e.selectedView))}},983724:(e,r,n)=>{"use strict";n.d(r,{Jb:()=>m,Xe:()=>h,_Q:()=>_});var i=n(411855),a=n(188507),o=n(587670),s=n(534611),l=n(707458),c=n(44948),d=n(29680),u=n(100197),p=n(601607);function m(){let e=(0,a.d4)(e=>e.mirror.sceneGraphSelection);return(0,i.useMemo)(()=>{let r=new Set;Object.keys(e).forEach(e=>{let n=l.q.instance.get(e),i=n?.findContainingSlideOrSelf();i&&(0,s.fn)((0,s.sH)(i))&&r.add(i)});let n=Array.from(r);return 1===n.length?n[0]:null},[e])}function h(){let e=(0,u.J2)(o.Ez5.slideDeck().slideGrid).flat();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}function _(){let e=function(){let e=(0,u.J2)(o.Ez5.slideDeck().slideGrid).flat(),r=new Set(function(){let e=(0,d.KH)();return(0,c.k9)(()=>{let r=l.q.instance,n=new Set;return Object.keys(e).forEach(e=>{let i=r.get(e)?.findContainingSlideOrSelf();i&&n.add(i)}),Array.from(n.values())},[e])}());if(!e.length||!r.size)return[];let n=[];for(let i of e)if(r.has(i)&&(n.push(i),r.delete(i)),0===r.size)break;return n}();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}},430196:(e,r,n)=>{"use strict";n.d(r,{N:()=>o});var i=n(587670),a=n(100197);function o(){let e=i.Ez5.slideLikeNodeObserverState();return(0,a.ut)(e?.slideLikeNodeIdsOnCanvas,new Set([]))}},195601:(e,r,n)=>{"use strict";n.d(r,{p:()=>l}),n(587670),n(776250);var i=n(38580),a=n(374626);n(96328),n(356390),n(15859),n(737499);let o=(0,i.eU)({}),s=(0,a.Iz)(e=>(0,i.eU)(r=>r(o)[e]??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABmCAYAAACN+dAoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABeSURBVHgB7cAxAQAAAMKg9U9tDQ8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4NyDtAAG2m4HvAAAAAElFTkSuQmCC",(r,n,i)=>{let a=r(o);n(o,{...a,[e]:i})}));function l(e){let r=s(e);return(0,a.md)(r)}},366501:(e,r,n)=>{"use strict";n.d(r,{Nr:()=>u,oY:()=>d,rY:()=>c}),n(411855),n(188507);var i=n(587670);n(86625),n(534611),n(707458),n(841563),n(939683);var a=n(38580);n(30637),n(29680),n(575288),n(193212);var o=n(100197),s=n(601607);n(706966),n(983724);var l=n(108239);function c(e){return e.reduce((e,r)=>e.concat(r),[])}function d(e,r){let n=i.Ez5.singleSlideView().focusedSlideId.getCopy(),{row:a,col:o}=i.Ez5.getInsertGridCoord({x:-1/0,y:-1/0}),s=(0,l.f4)(a,o,r);i.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()&&i.Ez5.singleSlideView().focusSlideInSingleSlideView(s,!0);let c=e.get(s),d=e.get(n);return c&&d?.sourceLibraryKey&&(c.sourceLibraryKey=d.sourceLibraryKey),i.Egt.replaceSelection([s],!0),s}function u(){let e=(0,o.J2)(i.Ez5.slideDeck().slideGrid);return(0,s.wA)((r,n)=>e.flat().reduce(({numSkippedSlides:e,numTotalSlides:n},i)=>{let a=r.get(i);return a&&(n+=1,a.isSkippedSlide&&(e+=1)),{numSkippedSlides:e,numTotalSlides:n}},{numSkippedSlides:0,numTotalSlides:0}),e)}(0,a.eU)("")},924430:(e,r,n)=>{"use strict";n.d(r,{wl:()=>i});let i="agreed_to_slides_ai_terms"},742934:(e,r,n)=>{"use strict";n.d(r,{CK:()=>b,NQ:()=>y,PG:()=>v,Vz:()=>T,o9:()=>S,rR:()=>I});var i=n(411855),a=n(188507),o=n(587670),s=n(86625),l=n(597616),c=n(568214),d=n(374626),u=n(632430),p=n(356390),m=n(848661),h=n(618056),_=n(555074);n(869156);var g=n(29680),f=n(279702);n(110382),n(238093);var E=n(179243);function y(e){return{type:"SOLID",color:{...e,a:1},opacity:e.a,blendMode:"NORMAL"}}function b(){let[e]=(0,_.lJ)("imageOverlayPaint");return i.useCallback((r,n)=>{h.Tm.clearCache();let i=[r];e&&(0,m.hS)(e)&&i.push(e),p.Y5.updateSelectionProperties({fillPaints:i},{shouldCommit:n})},[e])}function I(e){let r=(0,d.md)(E.E_);return i.useCallback((n,i)=>{r&&n.color?s.l7.user("slides-edit-theme-color",()=>T(r.varId,r.modeId,n)):e(n,i)},[r,e])}function T(e,r,n){o.CWU.setVariableValueForMode(e,r,{type:o.Z_n.COLOR,resolvedType:o.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}function v(e){let r=(0,d.md)(E.ik),n=(0,a.wA)(),c=(0,d.md)(E.E_);return i.useCallback(async i=>{let a=await n((0,u.Oe)(i)),d=l.sH(a);d&&(r?s.l7.user("slides-edit-theme-color",()=>o.Ez5.slideThemeLibBindings().setThemeColorVariableFromSubscribedVariableColorValue(c?.varId||"",c?.modeId||"",a)):e({type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL",colorVar:{value:{alias:d},dataType:"ALIAS",resolvedDataType:"COLOR"}},f.zk.YES))},[n,c,r,e])}function S(e,r){let n=(0,a.wA)(),o=(0,d.md)(E.E_),l=(0,g.eY)(),p=(0,d.md)(E.ik);return i.useCallback((i,a)=>{p?n((0,u.nh)({style:i,callback:e=>{let n=l.get(e),i=(0,c.AW)(n?.fills);i&&r&&s.l7.user("slides-edit-theme-color",()=>r(o?.varId||"",o?.modeId||"",y(i)))}})):n(u.AV({style:i,inheritStyleKeyField:e,fromSearch:a?.fromSearch}))},[n,o,e,p,l,r])}n(559681),n(452883)},753243:(e,r,n)=>{"use strict";n.d(r,{qm:()=>h});var i=n(411855);n(188507);var a=n(221768);n(86625),n(534611);var o=n(629019),s=n.n(o);n(568214);var l=n(153234),c=n(522739),d=n(30637);n(520581),n(763658),n(572206),n(46481);var u=n(762638);n(939863),n(293017),n(428654),n(775664),n(848661),n(318812);var p=n(498606);n(420186),n(746806),n(179243),n(559681),n(452883),n(742934),n(173915);var m=n(99123);function h({backgroundString:e,opacity:r,tooltipText:n,tooltipSubtext:o,onClick:h,onContextMenu:_,isSelected:g,showEditIcon:f,isEditing:E,onClickEdit:y,recordingKey:b}){return i.createElement("div",{className:s()(m.k8,{[m.wH]:g}),"data-tooltip-type":p.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":n,"data-tooltip-subtext":o,"data-tooltip-text-inline":!0,"data-testid":b},f&&y&&i.createElement(c.GG,{className:s()(m.Lq,{[m.Sn]:E,[m.Qo]:(0,d.nl)()}),onClick:e=>{if((0,d.nl)())y();else{let r=e.currentTarget.getBoundingClientRect(),n=r.width/2,i=r.left+n,a=r.top+n;Math.pow(e.clientX-i,2)+Math.pow(e.clientY-a,2)<=n*n&&y()}},recordingKey:l.Pt(b,"edit")},i.createElement(a.A,null)),i.createElement(c.D8,{onClick:h,onContextMenu:_,className:u.cx.w24.h24.relative.$,recordingKey:b},i.createElement("div",{className:m.Le,style:{background:e}}),i.createElement("div",{className:m.f$,style:{opacity:void 0!==r?1-r:0}})))}},173915:(e,r,n)=>{"use strict";n.d(r,{Ph:()=>M,jP:()=>P});var i=n(411855),a=n(188507),o=n(219728),s=n(587670),l=n(864361),c=n(860601),d=n(153234),u=n(522739),p=n(763658),m=n(762638),h=n(939863),_=n(356390),g=n(288536),f=n(617453),E=n(618056),y=n(555074),b=n(318812),I=n(29680),T=n(279702),v=n(233890),S=n(846848),w=n(12669),A=n(113754),N=n(939143),C=n(875157),O=n(746806),L=n(742934),R=n(99123);let P=S.qo,D={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var k=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(k||{});function M({paint:e,onChange:r,onClose:n,initialPosition:l,enableGradients:u,hideCustomColorPickerFillTypeToggle:m,inheritStyleKeyField:g}){let f=(0,L.PG)(r),E=(0,L.o9)(g,L.Vz),b=["custom_color","library"],[I,T]=o.tU.useTabs({custom_color:b.includes("custom_color"),library:b.includes("library")},{defaultActive:()=>(function({initialView:e,isBoundToLibraryAsset:r,supportedViews:n}){let i;return(i=e||(r?"library":"custom_color"),n&&!n.includes(i))?n[0]:i})({initialView:"custom_color",isBoundToLibraryAsset:!!e.colorVar,supportedViews:b})}),v=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),S=(0,y.kl)("numSelectedByType"),w=i.useMemo(()=>{if(S)return(0,C.aZ)(s.rrT.FILL,S)},[S]),A=i.useMemo(()=>new Set,[]);return i.createElement(p.k,{name:"slides_custom_color_picker"},i.createElement(O.vx,{initialPosition:l,title:i.createElement("div",null,i.createElement(o.tU.TabStrip,{manager:T},i.createElement(o.tU.Tab,{...I.custom_color},(0,h.tx)("fullscreen.properties_panel.color_picker.custom")),i.createElement(o.tU.Tab,{...I.library},(0,h.tx)("fullscreen.properties_panel.color_picker.libraries")))),onClose:()=>{v===s.m1T.GRADIENT&&_.Y5.triggerAction("leave-edit-mode"),n()},initialWidth:P,recordingKey:"slidesCustomColorPicker"},i.createElement(o.tU.TabPanel,{...I.custom_color},i.createElement(F,{paint:e,onPaintChange:r,enableGradients:u,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:m})),i.createElement(o.tU.TabPanel,{...I.library},i.createElement(N.Rp,{selectedItem:null,resolvedType:s.rXF.COLOR,disabledVariableIds:A,pickerType:"color-picker",recordingKey:d.Pt("slidesCustomColorPicker","libraryColors"),onVariableSelected:f,onStyleSelected:E,onClose:c.lQ,variableScopes:w}))))}function F({paint:e,onPaintChange:r,enableGradients:n,recordingKey:o,hideCustomColorPickerFillTypeToggle:c}){let d=(0,a.wA)(),u=(0,b.Um)(),p=(0,I.dH)(),m=(0,g.Ep)(),h=(0,l.C)(),y=(0,f.Ku)(),N=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),C=i.useRef(null),[O,L]=i.useState((0,E.bn)(e.type)?1:0),R=(0,E.Ou)(e),P=(0,E.x$)(e),k=(0,I.p8)("currentSelectedGradientStop"),M=(0,E.iC)(R||P||D,k),F=n=>{e.type!==n&&r(E.Tm.initPaint(n,D.color,e,"slides-custom-color-picker"),!(0,E.bn)(e.type)&&(0,E.bn)(n)?T.zk.NO:T.zk.YES)};return i.createElement(i.Fragment,null,!c&&n&&i.createElement(x,{panelType:O,onPanelTypeChange:e=>{O!==e&&(F(0===e?"SOLID":"GRADIENT_LINEAR"),L(e),1===e?_.Y5.triggerAction("toggle-gradient-edit-mode"):N===s.m1T.GRADIENT&&_.Y5.triggerAction("leave-edit-mode"))},recordingKey:o}),n&&1===O&&P&&i.createElement(v.vL,{name:"Slides color picker",ref:C,handleKeyDown:e=>{P&&(0,w.T)(e,P,N,k,r)},focusOnMount:!0,forceUpdate:h},i.createElement(A.i,{paint:P,onChange:r,currentSelectedGradientStop:k,colorProfile:m,hasFocus:!!C.current&&C.current.hasFocus(),dispatch:d,recordingKey:o})),i.createElement(S.S7,{color:M,colorFormat:y,onColorChange:(n,i)=>{(0,w.n)(n,e,k,r,i)},dropperDisabled:!1,displayType:S.sX.FULL,currentTool:p,dispatch:d,dropdownShown:u,recordingKey:o,canAcceptStyles:!1,canAcceptVariables:!1}))}function x({panelType:e,onPanelTypeChange:r,recordingKey:n}){let a=[{type:0,label:(0,h.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,h.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return i.createElement("div",{className:m.cx.wFull.py8.bb1.bSolid.colorBorder.$},i.createElement("div",{className:R.X9},a.map(({type:a,label:o,optionRecordingKey:s})=>i.createElement(u.GG,{key:a,className:e===a?R.wH:void 0,onClick:()=>r(a),recordingKey:d.Pt(n,s)},o))))}},352046:(e,r,n)=>{"use strict";n.d(r,{i:()=>c});var i=n(411855);n(215122),n(587670),n(86625),n(534611);var a=n(568214),o=n(428654),s=n(168039),l=n(774191);function c(){let e=(0,s.yM)().colorText;return i.useMemo(()=>{if(e){let r=o.F.parse(e);if(r.a>0)return(0,l.oU)(r)}return(0,l.oU)(a.Uv)},[e])}n(184027)},108239:(e,r,n)=>{"use strict";n.d(r,{$j:()=>c,f4:()=>l});var i=n(587670),a=n(534611);n(707458);var o=n(374626),s=n(92566);function l(e,r,n,c=!0){let d=o.zl.get(s.xB),u=d[e]?.[r-1]||d[e-1]?.[(d[e-1]?.length||0)-1]||d[e+1]?.[0]||d[e]?.[0]||d[0]?.[0],p=(0,a.fn)((0,a.sH)(u))?i.Ez5.slideDeck().duplicateAsBlankSlide(u,e,r,n):i.Ez5.slideDeck().addBlankSlideAtCoord(e,r,n);return c&&i.Ez5.commit(),setTimeout(()=>{i.Ez5.singleSlideView().isSingleSlideViewEnabled()||i.Ez5.singleSlideView().panToSlideIfOutsideViewport(p,.6)},0),p}function c({row:e,x:r=0,y:n=0}){let i=o.zl.get(s.fc)[e];i&&i.forEach(e=>{var i;(i=e.node?.parentNode?.type==="MODULE"?e.node.parentNode:e.node)&&(i.overlayTransform.m02!==r||i.overlayTransform.m12!==n)&&(i.overlayTransform={...i.overlayTransform,m02:r,m12:n})})}},953289:(e,r,n)=>{"use strict";n.d(r,{Ei:()=>s,F4:()=>d,Jw:()=>y,Md:()=>m,UM:()=>E,Vf:()=>o,_g:()=>g,bY:()=>l,cZ:()=>f,q7:()=>I});var i=n(38580),a=n(940596),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.TEMPLATE="TEMPLATE",e.HUB_FILE="HUB_FILE",e.GENERATE_THEME="GENERATE_THEME",e.FILE_PICKER="FILE_PICKER",e.TEMPLATE_PICKER="TEMPLATE_PICKER",e.TEAM="TEAM",e))(o||{});let s=(0,a.Wh)(()=>(0,i.eU)(!1));(0,a.Wh)(()=>(0,i.eU)(!1));let l=(0,i.eU)({type:"ALL"});(0,i.eU)("");let c=(0,i.eU)({});(0,i.eU)(e=>e(c),(e,r,n,i)=>{r(c,e=>({...e,[n]:i}))}),(0,i.eU)(null,(e,r)=>{r(c,{})}),(0,i.eU)(0);var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],p=[...u,"CLEARED"];function m(e){return u.includes(e)}let h={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:p,PUBLISH_TEMPLATE_ERRORED:p,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:p,UNPUBLISH_ERRORED:p,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:p,PUBLISH_HUB_FILE_ERRORED:p},_=(0,i.eU)({state:"CLEARED"}),g=(0,i.eU)(e=>e(_).state),f=(0,i.eU)(e=>{let r=e(_);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,i.eU)(null,(e,r,n)=>{let i=e(g),{state:a}=n;if(h[i].includes(a))r(_,n);else throw Error(`Invalid state transition from ${i} to ${a}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Slides Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Slides Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Unpublish";default:return e}}(0,i.eU)(null,(e,r)=>r(_,{state:"CLEARED"}));var b=(e=>(e.ALL="ALL",e.SINGLE="SINGLE",e.NONE="NONE",e))(b||{});(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)({type:"NONE"})),(0,a.Wh)(()=>(0,i.eU)(""));let I=(0,a.Wh)(()=>(0,i.eU)(!1))},950814:(e,r,n)=>{"use strict";n.d(r,{l:()=>i});let i=8},677967:(e,r,n)=>{"use strict";var i=n(99506),a=n(216158),o=n(555328),s=n(222085),l=n(576144),c=n(950814);a.M4.Query({fetch:async e=>await s.A.getCommunityShelves({shelfType:o.cS.PIPER_TEMPLATE_MODAL}).then(e=>e.data.meta)}),a.M4.Query({fetch:async e=>await s.A.getCommunityShelfById({categoryId:e}).then(e=>{if(e.data.meta.length>0)return e.data.meta[0]})}),a.M4.Query({fetch:async e=>e?await l.q.getSearchPaginated({orgId:e,size:c.l,from:0,templateType:i._Y.SLIDES}).then(e=>e.data.meta.templates):[]})},491679:(e,r,n)=>{"use strict";n.d(r,{Jv:()=>u,YW:()=>d});var i=n(411855);n(188507),n(675678),n(587670),n(86625),n(707458),n(3794),n(540193),n(966712),n(391388),n(776621),n(572206);var a=n(154483);n(384162),n(410424),n(632430),n(986270),n(965480),n(988022),n(356390),n(335682),n(694687),n(820642),n(99506),n(216158),n(336599),n(601607);var o=n(463592);n(106112),n(555328),n(809073),n(967409),n(272917),n(369394),n(508567);var s=n(576144);n(372291),n(144119),n(125944),n(565831),n(953289),n(677967);(0,a.fv)(),new o.CN({keys:["name"]});var l=(e=>(e[e.LOADING=0]="LOADING",e[e.NO_RECENT_FILES=1]="NO_RECENT_FILES",e[e.NO_QUERY_RESULTS=2]="NO_QUERY_RESULTS",e[e.SUCCESS=3]="SUCCESS",e))(l||{}),c=(e=>(e.OVERLAY_MODAL="OVERLAY_MODAL",e.PICKER="PICKER",e.BOARD_TO_DECK="BOARD_TO_DECK",e))(c||{});async function d(e){return!!e&&!e.parentOrgId&&!!e.teamId&&!!e.editorType&&(await s.q.getTeamTemplateLimitReached({teamId:e.teamId,editorType:e.editorType})).data.meta.template_limit_reached}async function u(e){return!!e&&!e.parent_org_id&&!!e.team_id&&!!e.editor_type&&(await s.q.getTeamTemplateLimitReached({teamId:e.team_id,editorType:e.editor_type})).data.meta.template_limit_reached}i.createContext(null)},179243:(e,r,n)=>{"use strict";n.d(r,{Dh:()=>u,Dq:()=>c,E_:()=>m,TN:()=>l,i1:()=>d,ik:()=>p});var i=n(374626),a=n(38580),o=n(940596),s=n(674011);let l=(0,s.hR)([],{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),c=(0,s.hR)({},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),d=(0,i.Iz)(e=>(0,s.hR)({id:e,data:null},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}));function u(e){let r=d(e);return i.zl.get(r).data}(0,o.Wh)(()=>(0,i.M2)((0,a.eU)({})));let p=(0,o.Wh)(()=>(0,a.eU)(!1)),m=(0,o.Wh)(()=>(0,a.eU)(null))},559681:(e,r,n)=>{"use strict";n.d(r,{UZ:()=>y,Xo:()=>E,kO:()=>g,lK:()=>b});var i=n(411855);n(346124);var a=n(752795),o=n(566418),s=n(587670),l=n(534611);n(568214);var c=n(374626),d=n(364898),u=n(529928),p=n(416095);n(726284);var m=n(859703);n(933123),n(452883);var h=n(125944),_=n(179243);function g(e){let r=(0,_.i1)(e),{data:n}=(0,c.md)(r);return!n}let f=(0,u.bt)(e=>e.library.local.styles);function E(e){let r=(0,c.md)(f),n=(0,_.i1)(e),{data:a}=(0,c.md)(n);return i.useMemo(()=>{if(!e)return[];if(!(0,h.X_)(e))return console.warn("Expected local theme",e),[];if(!a)return console.warn("Theme no longer exists in the theme map",e),[];let n=new Set(a?.styleGUIDs||[]);return n.size>0?(0,p.ti)(r,"TEXT").filter(e=>n.has(e.node_id)).sort((e,r)=>(0,d.Ez)(r.sort_position||"",e.sort_position||"")):[]},[e,a,r])}function y(e){let r=(0,_.i1)(e),{data:n}=(0,c.md)(r),a=n?.variableSetID||"";return i.useMemo(()=>o.gr.isValid(a)?s.CWU.getVariableSetDefaultMode(a):"",[a])}function b(e){let r=function(e){let r=function(e){let r=(0,c.md)(m.Cg),n=(0,_.i1)(e),{data:i}=(0,c.md)(n);return e?(0,h.X_)(e)?i?(i.variableIDs||[]).map(e=>r[e])||[]:(console.warn("Theme no longer exists in the theme map",e),[]):(console.warn("Expected local theme",e),[]):[]}(e);return(0,i.useMemo)(()=>{let n=s.Ez5.slideThemeLibBindings().getBlackColorVariableId(e),i=s.Ez5.slideThemeLibBindings().getWhiteColorVariableId(e);return r.filter(e=>e&&e.resolvedType===s.rXF.COLOR).sort((e,r)=>{for(let a of[n,i]){if(e.node_id===a)return -1;if(r.node_id===a)return 1}return e.sortPosition<r.sortPosition?-1:1}).map(e=>e.node_id)},[e,r])}(e),n=y(e),o=(0,h.X_)(e);return r.map(e=>{if(!e||0===e.length)return;let r=o?s.CWU.getLocalVariableInfo(e):s.CWU.getSubscribedVariableInfo(e);if(r&&r.modeValues&&r.modeValues[n]&&r.modeValues[n].type===s.Z_n.COLOR&&r.modeValues[n].value){let i={color:r.modeValues[n].value,colorVar:{dataType:"ALIAS",resolvedDataType:"COLOR",value:{alias:{guid:(0,l.sH)(e.replace("VariableID:",""))||void 0}}}};return{variableId:e,variableName:r.name,paint:i}}}).filter(a.isNotNullish)}},452883:(e,r,n)=>{"use strict";n.d(r,{$:()=>s});var i=n(848661),a=n(555074),o=n(601607);function s(){let[e]=(0,a.lJ)("themeId"),r=(0,o.Fk)(e=>e.getRoot().slideThemeId);return e&&(0,i.hS)(e)?e:r}},125944:(e,r,n)=>{"use strict";n.d(r,{Rc:()=>o,X_:()=>a});var i=n(966712);function a(e){return e.length>0&&!e.includes("/")}function o(e){return"TEXT"===e?!!(0,i.kc)().piper_text_style_design:"GRID"===e&&!!(0,i.kc)().piper_grid_styles}},509323:(e,r,n)=>{"use strict";n.d(r,{Xw:()=>u});var i=n(411855);n(188507);var a=n(629019),o=n.n(a);n(540193);var s=n(38580),l=n(374626);n(153234),n(522739),n(768137),n(799569),n(946689),n(762638),n(939863);var c=n(259927);n(988022),n(356390),n(498606);var d=n(719624);n(250118),n(676938);let u=(0,s.eU)(!1);var p=(e=>(e[e.LANDING=0]="LANDING",e[e.PROTOTYPE=1]="PROTOTYPE",e))(p||{});(0,i.forwardRef)(function(e,r){let[n]=(0,l.fp)(d.Sf),a=n?.current?.getBoundingClientRect(),s=(a?.height??0)>0,u=(0,i.useMemo)(()=>s?{bottom:window.innerHeight-(a?.y??0)+8}:{bottom:72},[s,a?.y]);return i.createElement("div",{ref:r,style:{position:"fixed",left:0,right:0,width:"fit-content",margin:"auto",...u},className:o()(["slides_insert_embed_modal--dockedToolbeltWindow--lJ7x1 text--fontPos13--xW8hS text--_fontBase--QdLsd",c.Dm])},i.createElement("div",{style:{minWidth:e.minWidth??a?.width??396}},e.children))});function m({prototypeLink:e,onClick:r}){let n=_(e),i=n||!e?void 0:t("slides.flapp.embed.add_button_invalid_link_tooltip");return React.createElement("div",{"data-tooltip-type":TooltipType.TEXT,"data-tooltip":i,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0},React.createElement(ButtonPrimary,{disabled:!n,onClick:()=>{e&&r(e.trim())}},tx("slides.flapp.embed.add_button_label")))}function h({thumbnailUrl:e,title:r,subtitle:n,onClick:i}){return React.createElement("div",{className:styles.recentPrototypeTileContainer,role:"button",onClick:i,tabIndex:0},e?React.createElement("img",{className:styles.recentPrototypeThumbnail,alt:"Prototype thumbnail",src:e,loading:"lazy",draggable:!1}):React.createElement("div",{className:styles.recentPrototypeThumbnail}),React.createElement("div",null,React.createElement("p",{className:cx.textBodyMediumStrong.$},r),React.createElement("p",{className:cx.textBodySmall.colorTextSecondary.$},n)))}function _(e){return!!e&&isPrototypeUrl(e)}},954049:(e,r,n)=>{"use strict";n.d(r,{Pk:()=>a}),n(411855);var i=n(38580);n(787978),n(762638),n(356390),n(676938),n(509323);let a=(0,i.eU)(!1)},266294:(e,r,n)=>{"use strict";n.d(r,{PF:()=>f,fx:()=>E}),n(411855);var i=n(587670),a=n(707458),o=n(38329);n(966712);var s=n(374626),l=n(776621);n(939863);var c=n(582064);n(392592),n(934533);var d=n(119198),u=n(974105),p=n(99506),m=n(984968),h=n(945020);n(983499),n(92566),n(144119);var _=n(72754),g=n(463660);function f(e,r){!function(e,r){let n=s.zl.get(m.Me),i=o.D.getState(),a=(0,u.Kl)(i);e(d.zE({state:a,from:h.f6.DESIGN_TO_SLIDES_ENTRYPOINT,editorType:p._Y.SLIDES,team:n,openNewFileIn:h.ai.NEW_TAB,slidesNewFileData:r}))}(e,{localStorageKey:r})}function E(e,r,n=!1){return new Promise((o,s)=>{let d;if(null===r||null===e){(0,l.x1)("storeFigmaContentForSlidesCreation","No openFile or file version",{fileKey:e?.key,fileVersion:r},{reportAsSentryError:!0}),s();return}let u=(0,c.MZ)(),p=a.q.instance,m=p.getDirectlySelectedNodes();d=n&&m.length?p.getDirectlySelectedNodes().filter(e=>(0,_.o)(e)).map(e=>e.guid):[...i.Ez5.slideLikeNodeObserverState().slideLikeNodeIdsOnCanvas.getCopy()];try{(0,g.JR)(u,{fileKey:e.key,fileVersion:r,pageGuid:p.getCurrentPage()?.guid,selectedNodeIds:d}),o(u)}catch(n){(0,l.x1)("storeFigmaContentForSlidesCreation","Failed to serialize and store sceneGraph data into local storage",{fileKey:e.key,fileVersion:r},{reportAsSentryError:!0}),s()}})}},155565:(e,r,n)=>{"use strict";n.d(r,{Z:()=>s});var i=n(91408);n(818),n(617453),n(187882);var a=n(125944),o=n(860168);function s(e){return"FILL"===e||"STROKE"===e||(0,a.Rc)(e)}(0,i.jz)(o.M$q)},565831:(e,r,n)=>{"use strict";n(188507),n(534611),n(707458),n(297336),n(457630),n(983724),n(366501)},126674:(e,r,n)=>{"use strict";n.d(r,{DG:()=>k,Kc:()=>L,OQ:()=>R,Zp:()=>C,dy:()=>D,in:()=>M,rS:()=>P});var i=n(411855),a=n(188507),o=n(841563),s=n.n(o),l=n(776250),c=n(711525),d=n(67833),u=n(970516),p=n(944682),m=n(507877),h=n(6949),_=n(763223),g=n(654034),f=n(912924),E=n(112235),y=n(29680),b=n(132135),I=n(99506),T=n(216158),v=n(549774),S=n(440535),w=n(103271),A=n(588282),N=n(406158),C=(e=>(e.TILE="tile",e.DETAIL_MODAL="detail",e))(C||{});function O(e,r){return e.org_id===r&&e.permission!==I._D.GUEST}function L(e,r){let n=`${location.origin}/files/${e}/feed-posts`;return r?.uuid&&(n+=`/${r.uuid}`),n}function R({fileVersionId:e,fileKey:r,startingNodeId:n},i){let a=(0,v.lD)({startingPointNodeId:n,versionId:e});a["redirect-src"]="feed",Object.assign(a,i);let o=Object.entries(a).map(([e,r])=>`${e}=${r}`).join("&");return`${location.origin}/proto/${r}?${o}`}function P(e,r,n){let o=(0,a.wA)(),s=r.find(e=>e.type===w.cM.NODE||e.type===w.cM.PROTOTYPE),c=(s?s.fileKey:void 0)||n;i.useEffect(()=>{o(p.ZN({file_key:c??void 0}))},[o,c]);let u=T.M4.useFile(c).data,h=(0,E.p)(),_=i.useMemo(()=>u&&s&&s.type===w.cM.PROTOTYPE?d.y1.PROTOTYPE:u?h(u):void 0,[u,s,h]),g=u&&void 0!==_;return{fileData:u,fileIcon:_,fileLoaded:g,openFile:i.useCallback(()=>{if((0,l.sx)("Team Feed File Clicked",{postUuid:e}),s){if(s.type===w.cM.NODE){let r=(0,b.jN)({file:{key:s.fileKey},commentId:(0,A.iw)(e)});o(m.V3({url:r}))}else s.type===w.cM.PROTOTYPE&&o(m.V3({url:R(s)}))}if(c){let e=(0,b.jN)({file:{key:c}});o(m.V3({url:e}))}},[o,s,e,c])}}var D=(e=>(e.TILE="tile",e.DETAIL="detail",e))(D||{});function k(e,r){let n=(0,a.wA)();return i.useCallback(()=>{(0,l.sx)("Team Feed Copy Link Clicked",{postUuid:e,source:r}),n(u.le({view:"teamFeed",postUuid:e}))},[n,e,r])}function M(e,r,n,a){let[o,d]=i.useState({}),[u,p]=i.useState({}),m=(0,y.eY)(),E=(0,h.a9)();return i.useEffect(()=>{if(e.errors&&e.errors.length){let r=JSON.stringify(e.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load feed posts: ${r}`),(0,l.sx)("Livegraph Feed Post Comments Errors",{errors:r})}},[e.errors]),i.useMemo(()=>{if((0,_.y)()&&"loaded"===e.status&&e.data.file&&m?.get){let r=e.data.file.feedPosts,i=r.filter(e=>!!e.org&&!!E&&O(E,e.org.id)),l=(0,f.N)(i),c=n(l);Object.entries(c).every(([e,r])=>null===o[e]&&null===r||!!o[e]&&!!r&&o[e]===r)||d(c);let h=a(l,m?.get.bind(m),r);Object.entries(h).every(([e,r])=>{let n=u[e];return!!n&&s()(n,r)})||p(h)}},[e,n,m,o,u,a,E]),i.useMemo(()=>E?function(e,r,n,i,a){if("loaded"!==e.status)return e;if(!e.data.file)return(0,c.gB)([]);let o={},s=(e.data.file?.feedPosts||[]).sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()).filter(e=>!!e.org&&O(a,e.org.id)).map(e=>{let a=e.comments.map(e=>({id:`feed_comment_${e.id}`,uuid:e.uuid,key:"",parent_id:null,user_id:e.user.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,g.o8)(e.messageMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:(0,g.CR)(e.user),feed_id:e.id,attachments:e.attachments})),[s,...l]=(0,f.N)([e]);o[s]=o[s]+1||0;let c=n[s]??null,d=i[e.publicUuid]?.[s],u={};for(let r of l)n[r]===c&&(u[r]=i[e.publicUuid]?.[r]);let p=null,m=null;d&&(m={x:d.x+d.width,y:d.y},p={x:d.x,y:d.y+d.height});let h=(0,g.CR)(e.creator),_=(0,A.iw)(e.publicUuid),E=e.content.map(e=>JSON.parse(e)),{thumbnail:y,padImage:b,thumbnailBackground:I}=(0,N.i0)(E,e.backgroundColor??void 0);return{id:_,uuid:"",key:e.fileKey||"",anchored:!1,selectionAnchorCanvasPosition:null,page:c,pageName:null,isActive:r===_,isPendingFromSinatra:!1,canvasPosition:m,boundingBoxAnchorCanvasPosition:p,comments:[{id:_,uuid:"",key:e.fileKey||"",parent_id:null,user_id:h.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,g.o8)(e.descriptionMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:h,feed_id:e.id},...a],messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:S.kT.FEED_POST,feedPostPublicUuid:e.publicUuid,feedPostTitle:e.title,feedPostThumbnail:y,feedPostThumbnailBackground:I,feedPostNumContent:e.content.length,padFeedPostThumbnail:b,otherBoundingBoxes:u,pinVerticalStagger:o[s]}});return(0,c.gB)(s)}(e,r,o,u,E):(0,c.gB)([]),[e,r,o,u,E])}},679736:(e,r,n)=>{"use strict";n.d(r,{M2:()=>a.M,My:()=>i.My,lt:()=>i.lt,t1:()=>a.t});var i=n(701372),a=n(498792)},406158:(e,r,n)=>{"use strict";n.d(r,{AK:()=>A,EU:()=>C,Px:()=>b,Rl:()=>T,WI:()=>w,X2:()=>S,i0:()=>N,mz:()=>O,pj:()=>y,zr:()=>v});var i=n(634832),a=n(587670),o=n(539321),s=n(776250),l=n(966712),c=n(395900),d=n(1844),u=n(27087),p=n(204279),m=n(973131),h=n(103271),_=n(988771),g=n(421689);let f="team_feed",E=(e,r,n)=>{let i;let a=new Image;if(a.crossOrigin="anonymous",e.type===h.cM.NODE?i=(0,g.yt)(e.image_url,a).then(async e=>{let i=new Image;if(i.crossOrigin="anonymous",!n)throw Error("Expected a oldNodeImageUrl value");let a=await (0,g.yt)(n,i).then(e=>e.naturalWidth),o=e.naturalWidth/a;return r.state.zoom/=o,(0,g.Bt)(e,r.state)}):e.type===h.cM.IMAGE&&r.url&&(i=Promise.resolve(r.url)),!i)throw Error("Expected a previewImagePromise");return i.then(e=>fetch(e)).then(e=>e.arrayBuffer()).then(e=>{let r=new Uint8Array(e),n=URL.createObjectURL(new Blob([r]));return(0,d.Q)(f,r,"image/jpeg").then(({data:e})=>({data:e,localUrl:n}))}).then(({data:e,localUrl:n})=>({previewImageUrl:e.meta.url,localUrl:n,previewState:r.state}))};async function y(e,r,n,a){let l;if(r.find(e=>e.displayContentItem.type===h.cM.NODE||e.displayContentItem.type===h.cM.PROTOTYPE)){let r=new c.M4;r.start();let i=await (0,m.J)(n,a,"",e);r.stop(),(0,s.sx)("Team Feed New Savepoint Created",{elapsedTimeMs:r.getElapsedTime()}),l=i.id}let d=r.map(e=>{switch(e.displayContentItem.type){case h.cM.NODE:return e.processedContentItem.then(r=>{let n;let i={...r,fileVersionId:l};return e.preview&&(n=new c.M4).start(),(e.preview?E(i,e.preview,e.displayContentItem.image_url):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let r=void 0!==e?{...i,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:i;return(0,h.hM)(r)})});case h.cM.IMAGE:return e.processedContentItem.then(r=>{let n;return e.preview&&(n=new c.M4).start(),(e.preview?E(r,e.preview):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let i=void 0!==e?{...r,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:r;return(0,h.hM)(i)})});case h.cM.VIDEO:return e.processedContentItem.then(e=>(0,h.hM)(e));case h.cM.PROTOTYPE:return e.processedContentItem.then(e=>(0,h.hM)({...e,fileVersionId:l}));default:(0,i.assertNever)(e.displayContentItem)}});return await Promise.all(d)}function b(e,r,n){return r.map(r=>{let n={type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:"",isLoading:!0};return{displayContentItem:n,processedContentItem:Promise.resolve(n)}})}let I=(e,r,n)=>_.Y.getGenerateImageToken({orgId:n,tokenVersion:"2",fileKey:e}).then(n=>{let i=n.data.meta,a=(0,l.Ay)().api_cdn_url||(0,l.Ay)().api_url;return u.Ay.crossOriginGet(`${a}/v1/images/${e}`,{token:i,scale:g.qc.toString(),ids:r.join(",")})});async function T(e,r,n,i,o,l){let d;let u=I(e,r,n);if(o)d=r.map(r=>({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:l&&l[r]}));else{let n=new c.M4;n.start();let i=r.map(r=>new Promise((n,i)=>{setTimeout(()=>{let i=new Blob([function(e){let[r,n]=a.Vzr.generateThumbnailForNode(e,g.Ty.width,g.Ty.height,1,{});return n}(r)]),o=URL.createObjectURL(i);n({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o})},0)}));d=await Promise.all(i),n.stop(),(0,s.sx)("Team Feed Client Node Image Generation",{fileKey:e,nodeIds:r,elapsedTimeMs:n.getElapsedTime()})}return r.map((r,n)=>{let a=u.then(a=>{let o=a.data.images;return{type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:d[n]?.backgroundColor??i}});return{nodeId:r,displayContentItem:d[n],processedContentItem:a}}).reduce((e,r)=>({...e,[r.nodeId]:r}),{})}function v(e,r){return{displayContentItem:{type:h.cM.IMAGE,...e},processedContentItem:(0,p.rH)(e,f).then(e=>({type:h.cM.IMAGE,...e})),fileIdentifier:r}}function S(e,r,n,i){return{displayContentItem:{type:h.cM.VIDEO,mediaType:e.mediaType,path:e.url,sha:"",videoFileUuid:"",coverImage:""},processedContentItem:(0,p.bu)(e,r,n,f).then(e=>({type:h.cM.VIDEO,...e})),fileIdentifier:i}}function w(e,r){let n={...e,type:h.cM.PROTOTYPE,imageUrl:"",prototypeId:0,fileVersionId:""},i=I(e.fileKey,[e.startingNodeId],r).then(r=>(n.imageUrl=r.data.images[e.startingNodeId],n));return{displayContentItem:n,processedContentItem:i}}function A(e){switch(e.displayContentItem.type){case h.cM.NODE:return;case h.cM.IMAGE:URL.revokeObjectURL(e.displayContentItem.url),e.displayContentItem.preview_image_url&&URL.revokeObjectURL(e.displayContentItem.preview_image_url);return;case h.cM.VIDEO:URL.revokeObjectURL(e.displayContentItem.path);return;case h.cM.PROTOTYPE:return;default:(0,i.assertNever)(e.displayContentItem)}}function N(e,r){let n=e.find(e=>e.type===h.cM.NODE),i=n?.mediumImageUrl||n?.preview_image_url||n?.image_url;if(i)return{thumbnail:i,padImage:!n.preview_image_url,thumbnailBackground:O(n,r)};let a=e.find(e=>e.type===h.cM.PROTOTYPE),o=a?.imageUrl;if(o)return{thumbnail:o,padImage:!1,thumbnailBackground:O(a,r)};let s=e.find(e=>e.type===h.cM.IMAGE),l=s?.mediumImageUrl||s?.preview_image_url||s?.url;if(l)return{thumbnail:l,padImage:!s?.preview_image_url,thumbnailBackground:O(s,r)};let c=e.find(e=>e.type===h.cM.VIDEO),d=c?.coverImage;return d?{thumbnail:d,padImage:!1,thumbnailBackground:O(c,r)}:{thumbnail:"",padImage:!1,thumbnailBackground:O(null,r)}}function C(e){return!!((0,h.aT)(e)&&void 0!==e.initialX&&void 0!==e.initialY&&void 0!==e.initialZoom&&e.backgroundColor)}function O(e,r){return e?(0,h.aT)(e)?"backgroundColor"in e&&e.backgroundColor||r:"black":"var(--color-bg-secondary)"}},966465:(e,r,n)=>{"use strict";n.d(r,{a9:()=>C,$K:()=>I,aH:()=>b,Q6:()=>E});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(939863),c=n(259927),d=n(318812),u=n(498606),p=n(538697),m=n(300587),h=n(422694),_=n(677859),g=n(260378),f=n(30158),E=(e=>(e.ActualSize="Actual Size",e.Default="Default",e.Fit="Fit to Screen",e.FitWidth="Fit Width",e.FillScreen="Fill Screen",e))(E||{});let y={"Actual Size":()=>(0,l.t)("fig_feed.zoom_pan_preset.actual_size"),Default:()=>(0,l.t)("fig_feed.zoom_pan_preset.default"),"Fit to Screen":()=>(0,l.t)("viewer.options_menu.fit_to_screen"),"Fill Screen":()=>(0,l.t)("viewer.options_menu.fill_screen"),"Fit Width":()=>(0,l.t)("viewer.options_menu.fit_width")},b=Object.keys(E),I="Default";class T extends p.l6{}class v extends p.c${}let S={format:e=>e in E?y[E[e]]():(0,l.t)("fig_feed.zoom_pan_preset.custom")};function w({reportWidth:e,inputProps:r}){let n=i.useRef(null),a=r.property;return i.useLayoutEffect(()=>{let r=n.current;return r&&e(a,r.getBoundingClientRect().width),()=>e(a,void 0)},[n,a,e]),i.createElement("div",{className:f.D9,"aria-hidden":!0},i.createElement(p.uQ,{...r,containerClassName:s()(r.containerClassName,f.oO),ref:n}))}function A({reportWidth:e,value:r,optionProps:n}){let a=i.useRef(null);return i.useLayoutEffect(()=>{let n=a.current?.getElement();return n&&e(r,n.getBoundingClientRect().width),()=>e(r,void 0)},[a,r,e]),i.createElement("div",{className:f.D9,"aria-hidden":!0},i.createElement(v,{...n,additionalStylesClassName:s()(n.additionalStylesClassName,f.ZS),ref:a}))}function N(e){let[r,n]=i.useState(void 0),[o,s]=i.useState(void 0),p=(0,a.wA)(),m=(0,d.Um)(),_=i.useMemo(()=>({inputClassName:"edit_preview_toolbar--input--FPZy0 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",formatter:S}),[]),g=i.useMemo(()=>i.createElement(h.r,{setMaxWidth:n,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,b.map(r=>i.createElement(w,{key:r,reportWidth:e,inputProps:{..._,property:r}})))}),[_]),f=i.useMemo(()=>i.createElement(h.r,{setMaxWidth:s,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,b.map(r=>i.createElement(A,{key:r,value:r,reportWidth:e,optionProps:{height:32,value:r,formattedValue:S.format(r)}})))}),[]);return i.createElement("div",{className:"edit_preview_toolbar--zoomPanPresetSelectorContainer--45Nn2","data-tooltip-show-above":!0,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,l.t)("fig_feed.zoom_pan_preset.tooltip")},f,g,i.createElement(T,{..._,inputWidth:r,property:e.value,onChange:r=>{e.setZoomPanPreset(r)},chevronClassName:"edit_preview_toolbar--chevron--zjsKc",dropdownClassName:c.Dm,id:`feedZoomPanPresetControl:${e.id}`,blurOnChange:!0,dropdownAlignment:"right",recordingKey:"feedZoomPanPreset",dispatch:p,dropdownShown:m,targetDomNode:document.body,dropdownWidth:o,preventHiddenInput:"always",ariaLabel:(0,l.t)("fig_feed.zoom_pan_preset.tooltip"),role:"combobox"},b.map(e=>i.createElement(v,{key:e,value:e,fullWidth:!0}))))}function C({id:e,backgroundColor:r,setBackgroundColor:n,zoomPanPreset:a,setZoomPanPreset:o,onResetCallback:c,applyToAllCallback:d}){let u=!(a in E);return i.createElement("div",{className:"edit_preview_toolbar--editPreviewToolbar--Gvlyc"},i.createElement(m.ZE,{value:r,onColorChange:n,recordingKey:"teamFeedEditablePreviewBackgroundColorControl",paletteType:"base",buttonCaretType:"down",buttonSize:"small",optionSize:"medium",positionX:()=>0,positionY:(e,r)=>(0,g.T1)(e,r,4),dropperDisabled:!0,inlineButtonTooltip:(0,l.t)("fig_feed.background_color.tooltip"),onlyShowCustomColorPopover:!0}),i.createElement(_.wv,null),i.createElement(N,{id:e,value:a,setZoomPanPreset:o}),!!d&&i.createElement(i.Fragment,null,i.createElement(_.wv,null),i.createElement(_.$n,{tooltip:(0,l.t)("fig_feed.apply_to_all.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:async()=>{await d()},disabled:u,recordingKey:"teamFeedResetPreview"},i.createElement("span",{className:s()({"edit_preview_toolbar--buttonDisabled--hE0Am":u})},(0,l.t)("fig_feed.apply_to_all")))),c&&i.createElement(i.Fragment,null,i.createElement(_.wv,null),i.createElement(_.$n,{tooltip:(0,l.t)("fig_feed.reset.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:c,recordingKey:"teamFeedResetPreview"},i.createElement("span",null,(0,l.t)("fig_feed.reset")))))}},160156:(e,r,n)=>{"use strict";n.d(r,{K1:()=>L,Zo:()=>W,xT:()=>G});var i=n(411855),a=n(634832),o=n(629019),s=n.n(o),l=n(729074),c=n(568214),d=n(988652),u=n(768137),p=n(135876),m=n(574176),h=n(939863),_=n(553015),g=n(28588),f=n(103271),E=n(498606),y=n(126674),b=n(406158),I=n(987669),T=n(421689),v=n(441883),S=n(303456),w=n(368640),A=n(501191),N=n(169852),C=n(95917),O=n(36129);function L(e){let r;switch(e.type){case f.cM.NODE:r=e.nodeId;break;case f.cM.IMAGE:r=e.url;break;case f.cM.VIDEO:r=e.path;break;case f.cM.PROTOTYPE:r=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${r}`}function R(e){let[r,n]=i.useState(!e.isThumbnail&&!e.usesPreviewImage);if(i.useEffect(()=>{if(!e.imgUrl)return;let r=new Image;r.src=e.imgUrl,r.onload=()=>{let e=r.width/r.height;n(r=>r&&Math.abs(e-T.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return i.createElement("div",null,(0,h.t)("fig_feed.could_not_load_preview_image"));let a=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return i.createElement(i.Fragment,null,e.showPreviewFacade&&i.createElement("div",{className:w.Hq},i.createElement(u.pz,{onClick:e.onUpdatePreviewImage},(0,h.t)("fig_feed.update_preview_image"))),i.createElement("img",{src:a,alt:(0,h.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:s()(w.tv,e.isThumbnail&&w.Jq,r&&w.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?i.createElement("div",{className:w.mB},(0,h.t)("fig_feed.gif")):null)}function P(e){let r=!!e.editPreviewOptions;return i.createElement("div",{className:w.yE},e.contentItems.map((n,a)=>{let o;return e.editPreviewOptions?.applyToAllCallback&&(o=r=>e.editPreviewOptions.applyToAllCallback(r,L(n))),i.createElement("div",{key:a,className:s()({[w.Xt]:!0,[w.sD]:a===e.selectedIdx})},i.createElement(T.DH,{key:`details::${n.image_url}`,imageSrc:n.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:a===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[L(n)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,c.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,applyToAllCallback:o,imageScale:r?1:void 0,enableZoomKeyControls:a===e.selectedIdx&&(e.source===y.Zp.DETAIL_MODAL||r),enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL}))}))}function D(e){return i.createElement(v.D,{item:e.prototypeContent})}function k(e){let r=!!e.editPreviewOptions;return i.createElement(T.DH,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:e.editPreviewOptions?.setContentPreview,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[L(e.imageContent)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?r=>e.editPreviewOptions.applyToAllCallback(r,L(e.imageContent)):void 0,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,c.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===y.Zp.DETAIL_MODAL||r,enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL})}function M(e){let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return i.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function F(e){return e.isThumbnail?i.createElement("div",null,(0,h.tx)("fig_feed.video")):i.createElement("div",null,(0,h.tx)("fig_feed.transcode_after_submit"))}function x(e){if(g.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return i.createElement(F,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return i.createElement(R,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return i.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function U(e){return i.createElement(i.Fragment,null,i.createElement(p.x,{isLoading:!e.content.imageUrl},()=>i.createElement(R,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&i.createElement("div",{className:w.mB},(0,h.tx)("fig_feed.prototype_badge")))}function B(e){let r=e.contentItems[e.selectedIdx];switch(r.type){case f.cM.NODE:return i.createElement(P,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return i.createElement(k,{imageContent:r,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return i.createElement(M,{videoContent:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return i.createElement(D,{prototypeContent:r});default:(0,a.assertNever)(r)}}function V(e){switch(e.content.type){case f.cM.NODE:let r=e.content,n=r.mediumImageUrl??r.preview_image_url??r.image_url,o=r.preview_image_url??r.image_url;return i.createElement(p.x,{isLoading:!!r.isLoading},()=>i.createElement(R,{imgUrl:e.isEditing?o:n,usesPreviewImage:!!r.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?o:r.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let s=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,l=e.content.preview_image_url??e.content.url;return i.createElement(R,{imgUrl:e.isEditing?l:s,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?l:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return i.createElement(x,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return i.createElement(U,{content:e.content,isThumbnail:e.isThumbnail});default:(0,a.assertNever)(e.content)}}function G(e){let r=!!e.editPreviewOptions,n=e.contentItems.length>1||r,{selectedContentIdx:a,pageBackgroundColor:o,setSelectedContentIdx:l,contentItems:u,onContentHover:_}=e,[g,y]=(0,d.M)();i.useEffect(()=>{_?.(y)},[y,_]);let I=i.useMemo(()=>u[a],[u,a]),T=i.useMemo(()=>n?i.createElement(H,{direction:"horizontal",contentItems:u,selectedIdx:a,setSelectedIdx:l,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,u,a,l,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&I&&"node"===I.type&&I.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,c.H0)(I.backgroundColor)??void 0);let{openEditPreviewModalCallback:v,deleteSelectedItemCallback:S}=e,[A,C]=i.useState(!1),O=i.useMemo(()=>{if(!v&&!S||!A||!I)return null;let e=n?w.IN:w.r$;return i.createElement("div",{className:e},I&&(0,f.aT)(I)&&v&&i.createElement("div",null,i.createElement("button",{onClick:v,className:w.nY},(0,h.tx)("fig_feed.edit_preview"))),S&&i.createElement(m.B,{svg:N.A,className:w.j5,onClick:S,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[A,I,n,v,S]);return i.createElement("div",{className:s()(w.qG,r&&w.Mm)},i.createElement("div",{ref:g,className:n&&!r?w.Uz:w.xs,style:{backgroundColor:(0,b.mz)(I,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>C(!0),onPointerLeave:()=>C(!1),"data-testid":"feed-post-content-section"},O,i.createElement(p.x,{isLoading:!I},()=>e.staticContent?i.createElement(V,{content:I,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):i.createElement(B,{contentItems:u.filter(e=>null!==e),selectedIdx:a,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),T)}function H(e){let r=i.useRef(null);i.useEffect(()=>{let n=r.current,i=r.current?.children[e.selectedIdx];if(!n||!i)return;let a=n?.getBoundingClientRect();a?.top>=0&&a?.left>=0&&a?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a?.right<=(window.innerWidth||document.documentElement.clientWidth)&&i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,S.pN)(),{scrollToItem:a,onReorderCallback:o,setSelectedIdx:c,deleteItem:d}=e,[u,p]=i.useState(null),h=e.thumbnailType||"wide",g=i.useCallback((r,o,l)=>{let m=s()(w.iD,l&&w.Ut,"small"===h&&w.kL,"wide"===h&&w.Wr);return i.createElement("div",{className:m,onMouseDown:()=>{n(e.feedPostUuid),a?.(o),c?.(o)},onPointerEnter:()=>p(o),onPointerLeave:()=>p(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},i.createElement(V,{content:r,isThumbnail:!0,isEditing:e.isEditing}),d&&o===u&&i.createElement("div",{className:w.nx},i.createElement("div",{className:w.fy,onClick:e=>{e.stopPropagation(),d(o)},role:"button",tabIndex:0},i.createElement(I.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,h,e.isEditing,u,n,a,c,d]),f=r=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===r?0:e.contentItems.length-1);return i.createElement(_.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===r?-1:1)+e.contentItems.length)%e.contentItems.length;c?.(n)},icon:"left"===r?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=s()(w.sm,"horizontal"===e.direction?w.d9:w.b1);if(o)return i.createElement("div",{className:E},i.createElement(l._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:o,values:e.contentItems,className:s()(w.M2,"horizontal"===e.direction?w.AA:w.h0),role:"button",tabIndex:0,ref:r},e.contentItems.map((r,n)=>i.createElement(l._.Item,{value:r,id:L(r),key:L(r),translate:"no"},g(r,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&i.createElement("div",{className:s()(w.iD,"small"===e.thumbnailType&&w.kL,"wide"===e.thumbnailType&&w.Wr,e.isAddingContent?w.ad:w.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},i.createElement(m.B,{svg:A.A}))));{let n=s()(w.M2,"horizontal"===e.direction?w.n2:w.h0);return i.createElement("div",{className:E},f("left"),i.createElement("div",{className:n,ref:r},e.contentItems.map((r,n)=>i.createElement(i.Fragment,{key:n},g(r,n,n===e.selectedIdx)))),f("right"))}}function W(e){let r=e.contentItems[e.selectedIdx],n=r&&(0,f.aT)(r),{onReorderCallback:a,deleteItemAtIdx:o,setSelectedIdx:l,onFileInputChange:c,setContentPreview:d,openPostFromFileModal:u}=e,[_,g]=i.useState(0===e.contentItems.length);i.useEffect(()=>{0===e.contentItems.length?g(!0):g(!1)},[e.contentItems.length]);let y=e.contentItems.length>=1||n,I=i.useCallback(()=>{g(!0)},[]),v=i.useCallback(e=>{l(e),g(!1)},[l]),[S,A]=i.useState(!1),R=i.useMemo(()=>S&&r?i.createElement("div",{className:w.r$},o&&i.createElement(m.B,{svg:N.A,className:w.j5,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[r,S,e.selectedIdx,o]),P=i.useRef(null),D=(e,r,n,a)=>i.createElement("div",{className:w.c9,onClick:a,role:"button",tabIndex:0},i.createElement(m.B,{svg:n}),i.createElement("div",{className:w.LO},i.createElement("div",{className:w.Gq},e),r)),k=i.useCallback((n,i,a)=>{let o=L(r);r&&o&&!(0,T.L$)(i,e.snapshotStates[o])&&d(o,n,i)},[r,e.snapshotStates,d]),M=(r,n)=>{k(r,n,e.selectedIdx)},[F,x]=i.useState({}),U=i.useCallback(()=>{x(e=>({...e,[L(r)]:!0}))},[r]);return i.createElement("div",null,(()=>{if(_){let r=null===e.attachedFile?(0,h.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,h.t)("fig_feed.share_something_from_figjam"):(0,h.t)("fig_feed.add_frames_from_this_figma_file");return i.createElement("div",{className:s()(w.Er,y&&w.QX)},i.createElement("div",{className:s()(w.hM,e.dragging&&w.cB)},D((0,h.t)("fig_feed.choose_frames"),r,C.A,u),i.createElement("form",null,i.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:P,onChange:c(P),multiple:!0,className:w.Fg}),i.createElement("label",{htmlFor:"fileInput"},D((0,h.t)("fig_feed.upload_files"),(0,h.t)("fig_feed.add_images_or_videos"),O.A)))))}return i.createElement("div",{className:s()(w.Er,y&&w.QX),style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1)},R,i.createElement(p.x,{isLoading:!r},()=>(0,f.aT)(r)&&("edit"===e.mode&&(F[L(r)]||!r.shouldBlockEditPreview)||"create"===e.mode)?i.createElement(B,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:M,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):i.createElement(V,{content:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(r)&&r.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?U:void 0})),e.dragging&&i.createElement("div",{className:w.c$},i.createElement("div",{className:w.W9})))})(),y?i.createElement(H,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:a,deleteItem:o,selectedIdx:e.selectedIdx,setSelectedIdx:v,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<f.e3,isAddingContent:_,setAddingActive:I,isEditing:!0}):null)}},52678:(e,r,n)=>{"use strict";n.d(r,{K:()=>ea});var i=n(411855),a=n(188507),o=n(634832),s=n(629019),l=n.n(s),c=n(776250),d=n(737947),u=n(358145),p=n(498750),m=n(503457),h=n(915440),_=n(27087),g=n(67833),f=n(827586),E=n(574176),y=n(47506),b=n(881388),I=n(939863),T=n(67294),v=n(975350),S=n(738269),w=n(662275),A=n(569172),N=n(654034),C=n(692630),O=n(355513),L=n(694687),R=n(611978),P=n(860178),D=n(279453),k=n(531827),M=n(103271),F=n(498606),x=n(819117),U=n(237870),B=n(402609),V=n(421422),G=n(727236),H=n(182876),W=n(400333),K=n(488578),j=n(126674),z=n(679736),Y=n(160156),$=n(823885),q=n(339617),Z=n(531398),X=n(385121),J=n(430811),Q=n(634770),ee=n(412141),et=n(40674),er=n(893984),en=n(630834);function ei(){return i.createElement("div",null,(0,I.t)("fig_feed.post_dne"))}let ea=(0,U.Ju)(function(e){let r=(0,a.wA)(),n=(0,L.sZ)(),s=(0,R._6)();i.useEffect(()=>{"teamFeed"!==s.view&&"user"!==s.view&&("fullscreen"===s.view&&e.inFileView||r(w.Ce()))},[r,s,e.inFileView]);let l=i.useRef({selectedView:s,inFileView:e.inFileView});i.useEffect(()=>{l.current={selectedView:s,inFileView:e.inFileView}},[e.inFileView,s]),i.useEffect(()=>()=>{l.current.inFileView||"teamFeed"!==l.current.selectedView.view||r(S.$T({...l.current.selectedView,postUuid:void 0}))},[r]);let m=i.useRef(!1),g=i.useCallback(r=>{m.current||!r||e.autofocusCommentInput||(r.focus(),m.current=!0)},[e.autofocusCommentInput]),f=(0,u.ZC)(e.postUuid);i.useEffect(()=>{n&&(e.inFileView||f===e.postUuid||"teamFeed"!==s.view||(m.current=!1,d.Ay.replace((0,j.Kc)(n.id,{uuid:e.postUuid}))))},[f,e.postUuid,n,e.inFileView,s]);let E=(0,h.Rs)(D.FHz,{publicUuid:e.postUuid});i.useEffect(()=>{!e.inFileView&&E.data?.feedPost?.title&&(0,O.hL)(E.data.feedPost.title)},[e.inFileView,E.data]),i.useEffect(()=>((0,c.sx)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,c.sx)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),i.useEffect(()=>{_.Ay.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[T,v]=i.useState(0);i.useEffect(()=>{v(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let A=i.useMemo(()=>E.data?.feedPost?E.data.feedPost.content.map(e=>JSON.parse(e)):[],[E.data]),N=A.length,{requestToOpenPostByFeedIdx:C}=e,P=i.useCallback(r=>{r.keyCode===p.Uz.LEFT_ARROW?0===T?C&&void 0!==e.feedIdx&&C(e.feedIdx-1):v(T-1):r.keyCode===p.Uz.RIGHT_ARROW&&(T===N-1?C&&void 0!==e.feedIdx&&C(e.feedIdx+1):v(T+1))},[T,N,C,e.feedIdx]),[k,F]=i.useState(!0),x=i.useCallback(()=>F(e=>!e),[]),[U,H]=i.useState(!1);i.useEffect(()=>{!U&&"loaded"===E.status&&A[T]&&(0,M.Dr)(A[T])&&((0,y.YQ)({id:V.X}),H(!0))},[E.status,U,A,T]);let W=E.data?.feedPost||e.initialPreloadedPost;if(!W)switch(E.status){case"errors":return i.createElement(ei,null);case"loading":case"disabled":return i.createElement(K.aF,{className:Q.ZA,size:"any"});case"loaded":return r(b.s.error((0,I.t)("fig_feed.post_dne"))),r(w.Ce()),null;default:(0,o.assertNever)(E)}return i.createElement(i.Fragment,null,i.createElement(K.aF,{className:Q.ZA,size:"any"},i.createElement("div",{className:Q.Zp,role:"listbox",tabIndex:0,onKeyDown:P,ref:g},i.createElement("div",{className:Q.kL,"data-onboarding-key":G.O},i.createElement("div",{className:k?Q.hQ:Q.MZ},i.createElement(Y.xT,{contentItems:A,staticContent:!1,selectedContentIdx:T,setSelectedContentIdx:r=>{v(r),e.onSetSelectedContentIdx?.(r)},pageBackgroundColor:W.backgroundColor??void 0,feedPostUuid:e.postUuid,source:j.Zp.DETAIL_MODAL})),i.createElement(eo,{feedPost:W,contentItems:A,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:x,show:k})))),i.createElement(B.p,null,i.createElement(G.b,null)))},C.E,U.ZU.YES);function eo(e){let r=(0,a.wA)(),n=(0,P.iZ)(),o=(0,a.d4)(e=>e.currentUserOrgId),s=i.useCallback(()=>{r(w.Ce())},[r]),{fileData:l,fileIcon:c,fileLoaded:d,openFile:u}=(0,j.rS)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),p=i.useCallback(()=>{let n=e.inFileView&&e.feedPost.fileKey||void 0;r((0,w.to)({type:(0,z.t1)(),data:{preloadedFeedPost:e.feedPost,entryPoint:e.inFileView?z.M2.FILE:z.M2.FEED,lockedFileKey:n}}))},[r,e.feedPost,e.inFileView]),m=(0,j.DG)(e.feedPost.publicUuid,j.dy.DETAIL);if(!o||!n)return null;let h=i.createElement(i.Fragment,null,i.createElement("div",{className:Q.Si},i.createElement(J.Wu,{feedPost:e.feedPost,source:j.Zp.DETAIL_MODAL,onEditClick:p})),i.createElement("button",{onClick:m,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,I.t)("fig_feed.copy_link_to_post")},i.createElement(E.B,{svg:er.A,className:Q.Gp})),i.createElement("button",{onClick:e.onSidebarToggle},i.createElement(E.B,{svg:et.A,className:Q.Gp})),i.createElement("button",{onClick:s},i.createElement(E.B,{svg:en.default,className:Q.Nk})));if(!e.show)return i.createElement("div",{className:Q.SY},h);let _=i.createElement("div",{className:Q.N1},i.createElement("div",{className:Q.qd},(0,I.tx)("fig_feed.details")),i.createElement("div",{className:Q.IE,"data-testid":"feed-modal-open-file"},h)),f=i.createElement("div",{className:Q.op},i.createElement("div",{className:Q.mY},i.createElement(q.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:T.Pf.MEDIUM,shortDate:!1})),i.createElement(el,{feedPost:e.feedPost,currentOrgId:o,currentUser:n}),d&&!e.inFileView&&i.createElement("button",{className:Q.XE,onClick:e.inFileView?void 0:u},(0,I.tx)("fig_feed.from_file",{fileComponent:i.createElement(i.Fragment,null,i.createElement(g.oS,{className:Q.Wv,type:c,size:g.LE.SMALL}),i.createElement("span",{className:Q.q4},l.name))})),i.createElement("div",{className:Q.E_},i.createElement(Z.Q$,{type:Z.Us.FULL,source:Z.zY.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})));return i.createElement("div",{className:Q.HP},_,i.createElement(es,{postInfo:f,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:n,currentOrgId:o,autofocusCommentInput:e.autofocusCommentInput}))}function es(e){let r=(0,a.wA)(),n=i.useRef(null),o=i.useRef(null),[s,l]=i.useState(!1),c=i.useCallback(r=>{0===r.intersectionRatio&&e.comments.length>0?l(!0):l(!1)},[e.comments.length]);(0,H.g)(o,c,{threshold:[0,1]});let d=i.useCallback(()=>{n.current&&n.current.scrollToBottom()},[]),u=e.comments.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()),[p,h]=i.useState(e.comments.length);i.useEffect(()=>{let r=p<e.comments.length;r&&h(e.comments.length);let n=e.comments[e.comments.length-1];r&&n.user.id===e.currentUser.id&&d()},[p,e.comments,e.currentUser,d]);let[_,g]=i.useState([]),y=(0,a.d4)(e=>e.comments.newComment),b=i.useCallback(()=>{r(A.gX({postUuid:e.postUuid,messageMeta:_,attachmentIds:Object.keys(y.attachments)})),g([]),r(v.$M({resetStatusOnly:!1}))},[r,e.postUuid,_,y]),S=i.useMemo(()=>({library:new k.M8(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),w=i.useCallback(e=>{r(v.nb({attachmentId:e.id,attachment:e}))},[r]),C=i.useCallback((e,n)=>{r(v.nb({attachmentId:e,attachment:null})),n?n.then(()=>x.J.delete(e)):x.J.delete(e)},[r]);return i.createElement("div",{className:Q.ty},i.createElement(f.P,{innerClassName:Q.qy,useBottomPinning:!0,ref:n},e.postInfo,i.createElement("div",{ref:o,className:Q.Ai},u.map(r=>i.createElement($.i,{key:r.id,commentId:r.id,commentUuid:r.uuid||"",createdAt:r.createdAt,commentUser:r.user,reactions:r.reactions,messageMeta:(0,N.o8)(r.messageMeta),user:e.currentUser,currentOrgId:e.currentOrgId,mentionables:S,attachments:r.attachments}))),s&&i.createElement("div",{className:Q.cm,onClick:d,role:"button",tabIndex:0},i.createElement(E.B,{svg:ee.A,className:Q.mL}),(0,I.tx)("fig_feed.num_comments",{numComments:u.length}))),i.createElement("div",{className:Q.kG},i.createElement("div",{className:Q.gK},i.createElement(T.H8,{user:e.currentUser,size:T.Pf.MEDIUM})),i.createElement(X.o,{fallback:null,errorFallback:m.H4.NONE,user:e.currentUser,currentOrgId:e.currentOrgId,autofocus:e.autofocusCommentInput,onSubmit:b,hideSubmitButton:!1,mentionables:S,composerContainerClass:Q.DA,editableTypeaheadClass:Q.OX,messageContent:_,updateMessage:g,editingExistingComment:!1,updateAttachment:w,deleteAttachment:C,attachments:Object.values(y.attachments)})))}function el(e){let r=i.useMemo(()=>(0,N.o8)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return i.createElement("div",{role:"textbox",tabIndex:0,className:Q.tL},i.createElement("div",{className:Q.pT},e.feedPost.title),i.createElement(W.HH,{messageMeta:r,commentId:e.feedPost.id,className:l()(Q.gG)}))}},339617:(e,r,n)=>{"use strict";n.d(r,{A:()=>g,B:()=>_});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(210954),c=n(564577),d=n(67294),u=n(738269),p=n(798099),m=n(589640),h=n(999357);function _(e){let r=e.date&&i.createElement(c.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[i.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:s()(e.onTileMouseDown&&h.WJ,h.PI)},r)];return i.createElement("div",{className:h.ME},i.createElement(g,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function g(e){let r=(0,a.wA)(),n=i.useCallback(n=>{n.stopPropagation(),e.user.id&&r(u.$T({view:"user",userId:e.user.id,userViewTab:m.o.INTERNAL_PROFILE_POSTS}))},[r,e.user.id]),o=e.appendToHandle||!1===e.noHandle;return i.createElement("div",{className:h.ME},!e.noAvatar&&i.createElement(l.N,{onClick:n,trusted:!0,onMouseDown:p.dG},i.createElement(d.H8,{user:e.user,size:e.size??d.Pf.LARGE})),o&&i.createElement("div",{className:h.Qs},!e.noHandle&&i.createElement(l.N,{className:h.TK,onClick:n,trusted:!0},i.createElement("div",{className:h.p$},e.user.handle)),e.appendToHandle))}},531398:(e,r,n)=>{"use strict";n.d(r,{Q$:()=>g,Us:()=>h,nn:()=>f,zY:()=>_});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(569172),c=n(318812),d=n(860178),u=n(555648),p=n(884101),m=n(400762),h=(e=>(e[e.FULL=0]="FULL",e[e.ADD_ONLY=1]="ADD_ONLY",e))(h||{}),_=(e=>(e[e.TILE_CONTENT=0]="TILE_CONTENT",e[e.TILE_POST=1]="TILE_POST",e[e.DETAIL_POST=2]="DETAIL_POST",e[e.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",e[e.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",e[e.FILE_POPOVER=5]="FILE_POPOVER",e))(_||{});function g(e){let r=(0,a.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=i.useCallback(({emoji:n,addOnly:i})=>{let a=o(n);a?i||r(l.Oy({feedPostUuid:e.postUuid,emoji:n,reactionId:a})):r(l.EF({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:n}))},[r,o,e.postUuid,e.postId]);return i.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function f(e){let r=(0,a.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=i.useCallback(({emoji:n,addOnly:i})=>{let a=o(n);a?i||r(l.t9({commentUuid:e.commentUuid,emoji:n,reactionId:a})):r(l.FJ({commentUuid:e.commentUuid,commentId:e.commentId,emoji:n}))},[r,o,e.commentUuid,e.commentId]);return i.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function E(e){let r=(0,d.iZ)(),{toggleReaction:n}=e,{reactionsWithSelected:a}=b(e.feedReactions,r),o=i.useCallback((e,r)=>{r.stopPropagation(),n({emoji:e.emoji,addOnly:!1})},[n]),s=i.useCallback(e=>{n({emoji:e,addOnly:!0})},[n]),l=i.createElement(y,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:s,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:i.createElement("div",{className:m.KD},i.createElement(p.Kb,{reactions:a,collapseOverflow:!1,onClickExisting:o,prependToList:e.prependToList},l))}function y(e){let r=i.useRef(null),{isReactionPickerVisible:n,toggleReactionPicker:a,emojiPicker:o}=T(e.feedResource,e.source,r,e.onAddReaction);return e.hideAddReactionButton&&!n?i.createElement("div",{className:m.$S}):i.createElement(i.Fragment,null,i.createElement("div",{ref:r,className:s()(1===e.type?m.D5:m.HL)},i.createElement(p.ny,{onClick:a,selected:n,styleClassName:m.$S,selectedStyleClassName:m.Qi})),n&&o)}let b=(e,r)=>{let n=i.useMemo(()=>{let n={};if(!r)return n;for(let i of e)i.user.id===r.id&&(n[i.emoji]=i.id);return n},[e,r]),a=i.useCallback(e=>n[e],[n]);return{reactionsWithSelected:i.useMemo(()=>{let r={};for(let n of e){let{emoji:e,user:i,createdAt:o}=n;r[e]||(r[e]={emoji:e,users:[],selected:!!a(e),createdAt:o.getTime(),skinTonesToUsers:{}}),r[e].createdAt=Math.min(r[e].createdAt,o.getTime()),r[e].users.push({handle:i.handle,id:i.id,img_url:i.imgUrl})}return Object.values(r).sort((e,r)=>e.createdAt-r.createdAt||e.emoji.localeCompare(r.emoji))},[e,a]),existingReactionIdForCurrentUser:a}},I=(e,r)=>`FEED_TILE_EMOJI_PICKER-${e}${r?`-${r}`:null}`,T=(e,r,n,a)=>{let o=(0,c.BK)(I(r,e?.id)),s=i.useCallback(e=>{a(e.shortcodes),o.hide()},[o,a]),l=n.current&&i.createElement(u._,{onInsert:s,onCancel:o.hide,targetRect:n.current.getBoundingClientRect()});return{isReactionPickerVisible:o.showing,toggleReactionPicker:o.toggle,emojiPicker:l}}},430811:(e,r,n)=>{"use strict";n.d(r,{Wu:()=>b});var i=n(411855),a=n(188507),o=n(776250),s=n(27087),l=n(268537),c=n(939863),d=n(662275),u=n(569172),p=n(963067),m=n(860178),h=n(237870),_=n(488578),g=n(665061);let f=(0,h.Ju)(function(e){let r=(0,c.tx)("fig_feed.delete_confirmation");return e.numComments&&e.numReactions?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments_and_reactions",{numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments",{numComments:e.numComments}):e.numReactions&&(r=(0,c.tx)("fig_feed.delete_confirmation_with_reactions",{numReactions:e.numReactions})),i.createElement(_.Rw,{destructive:!0,confirmationTitle:(0,c.tx)("fig_feed.delete_post"),confirmText:(0,c.tx)("fig_feed.delete"),onConfirm:e.onConfirm,popStack:!0},i.createElement("p",null,r))},"PostConfirmDeleteModal");var E=(e=>(e.USER="user_post_context_menu",e.SYSTEM="system_post_context_menu",e))(E||{});let y=e=>{let r=(0,m.iZ)(),n=(0,p.Yo)(),i=(r&&r.id===e.creator.id)??!1;return{canDelete:i,canAdminDelete:n?.isAdmin??!1,canEdit:i}};function b(e){let r=(0,a.wA)(),n=i.useCallback(()=>r(u.Y9()),[r]),{onEditClick:p,feedPost:m}=e,{canDelete:h,canAdminDelete:_,canEdit:E}=y(m),b=m.comments.length,T=m.reactions.length,v=i.useCallback(()=>{r((0,d.AS)()),s.Ay.del(`/api/feed_posts/post_uuid/${m.publicUuid}`).then(()=>{(0,o.sx)("Team Feed Post Deleted",{postUuid:m.publicUuid}),n()})},[r,m.publicUuid,n]),S=i.useCallback(()=>{r((0,d.to)({type:f,data:{onConfirm:v,numComments:b,numReactions:T},showModalsBeneath:!0}))},[r,v,b,T]);if(!h&&!_)return null;let w=h?(0,c.tx)("fig_feed.delete_ellipsis"):(0,c.tx)("fig_feed.delete_admin_ellipsis"),A=[!!E&&!!p&&i.createElement(l.c$,{key:"edit",onClick:p},(0,c.tx)("fig_feed.edit")),(!!h||!!_)&&i.createElement(l.c$,{key:"delete",onClick:S},w)];return i.createElement(g.V,{dropdownId:I("user_post_context_menu",e.feedPost.publicUuid,e.source),options:A,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let I=(e,r,n)=>e+r+n},694443:(e,r,n)=>{"use strict";n.d(r,{n:()=>s});var i=n(411855),a=n(558867),o=n(134279);function s({team:e,size:r=o.P.MEDIUM,shape:n="SQUARE",fallbackDisplay:s=o.U.FIRST_CHARACTER,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u}){return i.createElement(a.w7,{entity:e,size:r,hideFallbackInitial:s===o.U.HIDDEN,shape:n,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u})}},600904:(e,r,n)=>{"use strict";n.d(r,{V:()=>o});var i=n(672517),a=n(701707);let o=(0,i.tf)(a.$n)},288243:(e,r,n)=>{"use strict";n.d(r,{I:()=>c});var i=n(411855),a=n(574176),o=n(232655),s=n(407395);let l={...s.jl,...s.qe};function c({icon:e,fill:r="default",dataTestId:n}){let c=e.split("-").join(" "),d=e in l;return i.createElement(a.B,{style:{fill:(0,o.TD)(r)},dataTestId:n,title:c,ariaLabel:c,svg:s.I5[e],useOriginalSrcFills_DEPRECATED:d})}},583765:(e,r,n)=>{"use strict";n.d(r,{Ac:()=>K,D2:()=>et,bJ:()=>D,dO:()=>Z});var i=n(675678),a=n(587670),o=n(38329),s=n(966712),l=n(38580),c=n(776621),d=n(825871),u=n(931828),p=n(74930),m=n(178323),h=n(378260),_=n(582947),g=n(106757),f=n(335682),E=n(940596),y=n(888699),b=n(794321),I=n(258751),T=n(787523),v=n(435898),S=n(350042),w=n(315944),A=n(430933),N=n(211519),C=n(342824),O=(e=>(e.NONE="none",e.TOP_BAR="top-bar",e.NEW_FILE="new-file",e))(O||{});let L="used_figjam_ai_generate",R="used_figjam_ai_generate_modal_v2",P=(0,l.eU)(!1),D=(0,l.eU)(null,(e,r)=>{r(P,!0),r(j,void 0)}),k=(0,l.eU)(null,(e,r)=>{r(U),r(P,!1)}),M=(0,l.eU)(!1),F=(0,l.eU)(null,(e,r)=>{r(U),r(M,!0)}),x=(0,l.eU)(e=>e(P)?"top-bar":(e(I.P)===T.iH.TRUE||e(H))&&!e(M)&&e(y.l5)===b.fD.NONE?"new-file":"none"),U=(0,l.eU)(null,(e,r)=>{r(V),r(H,!1),r(j,void 0)});(0,l.eU)(null,(e,r)=>{let n=e(x);"top-bar"===n?r(k):"new-file"===n&&r(F)});let B=(0,l.eU)(null,(e,r)=>{e(Q).abort(),r(Q,new AbortController),r(Z,{status:w.c.NONE})});(0,l.eU)(null,(e,r)=>{r(U),r(M,!1),r(P,!1)});let V=(0,l.eU)(null,(e,r)=>{r(B),r(W,v.Nb.ENTRY),r(Y,void 0),r($,(0,N.Xi)()),r(q,a.VIy.BASIC)});(0,l.eU)(null,(e,r)=>{r(W,v.Nb.PROMPT_BUILDER)}),(0,E.Wh)(()=>(0,l.eU)(!1));let G=(0,l.eU)(v.Nb.ENTRY),H=(0,l.eU)(!1),W=(0,l.eU)(null,(e,r,n)=>{n===v.Nb.PROMPT_BUILDER&&r(H,!0),r(G,n)});(0,l.eU)(e=>e(G));let K=(0,l.eU)(""),j=(0,l.eU)(void 0),z=(0,l.eU)(""),Y=(0,l.eU)(void 0),$=(0,l.eU)((0,N.Xi)()),q=(0,l.eU)(a.VIy.BASIC),Z=(0,l.eU)({status:w.c.NONE}),X=(0,l.eU)(null),J=(0,E.Wh)(()=>(0,l.eU)(!1));(0,l.eU)(null,(e,r,n)=>{r(J,n)});let Q=(0,l.eU)(new AbortController),ee=(0,l.eU)(null,async(e,r,{fileKey:n,prompt:a,stage:l,useCaseCategory:E,useCase:y,subtitle:b,entrypoint:I,jumpToNewLine:T,fromGenerateModalV2:O,pageNodeId:P})=>{let D;if(null===n&&(0,c.$D)(i.FigmaTeam.AI_PRODUCTIVITY,Error("No file key provided for FigJam AI Generate request")),!a)return{status:w.c.NONE};r(S.Mg,e=>e+1),e((0,_.r1)(L)).data||o.D.dispatch(u.b({[L]:!0}));let k=e((0,_.r1)(R)).data;O&&!k&&o.D.dispatch(u.b({[R]:!0})),r(B);let M=e(Q).signal,F={orgId:e(h._s),teamId:e(f.As)||null,fileKey:n,userId:e(g.kS)||null,trackingSessionId:(0,d.f)()};r(Z,{status:w.c.LOADING}),r(Y,E),r(W,v.Nb.PROMPT_BUILDER),r(X,P);let x="board";try{globalThis.AI_DEBUG_XML&&(0,s.kc)().figjam_text_to_template_debug?x="board":(x=await (0,v.PQ)({prompt:a,signal:M,authInfo:F})||"board",(0,s.kc)().figjam_text_to_visual_timeline||"timeline"!==x||(x="gantt"),(0,v.$B)()||"mindmap"!==x||(x="board"))}catch(o){let e=(0,C.E$)(o,C.ez.GENERATE);return D={status:w.c.ERROR,type:x,errorMessage:e.message,trace:o.trace},(0,S.h5)(n,0,1,a,"inappropriate",l,I,E,y,b),(0,S.fK)(n,e.message),e.reportToSentry&&(0,c.$D)(i.FigmaTeam.AI_PRODUCTIVITY,o),r(Z,D),D}E&&(E===v.es.FLOW_CHART?x="diagram":E===v.es.GANTT_CHART?x="gantt":E===v.es.ORG_CHART&&(x="orgchart"));let U=e(z),V=U&&a.includes(U)?U:void 0;r(z,""),(0,S.h5)(n,0,1,a,x,l,I,E,y,b,V);try{D=await (0,p.B)(()=>e(S.LX)||"null",n,m.T.AI,async()=>{let r;if("board"===x){let i=T||null,o=e(h._s);r=await (0,A.L)({prompt:a,signal:M,fileKey:n,authInfo:F,shouldJumpToNewLine:i,orgId:o})}else{let r=e(q),n=e($),i=x;await (0,N.$D)({prompt:a,signal:M,visualType:i,authInfo:F,ganttColor:n,ganttType:r})}let i=e(S.LX);return(0,S.lx)(n,0,a,x,i),{status:w.c.SUCCESS,type:x,trace:r}})}catch(e){if(e?.name==="AbortError")D={status:w.c.NONE};else{let r=(0,C.E$)(e,C.ez.GENERATE);D={status:w.c.ERROR,type:x,errorMessage:r.message,trace:e.trace},r.reportToSentry&&(0,c.$D)(i.FigmaTeam.AI_PRODUCTIVITY,e),(0,S.fK)(n,r.message)}}return r(Z,D),D});(0,l.eU)(null,(e,r,{prompt:n,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,jumpToNewLine:u,fromGenerateModalV2:p,pageNodeId:m})=>{let h=e(f.ze);if(null===h||0===h.length){(0,c.$D)(i.FigmaTeam.AI_PRODUCTIVITY,Error("No file key found for loaded file to use for FigJam AI Generate request"));return}r(ee,{fileKey:h,prompt:n,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,jumpToNewLine:u,fromGenerateModalV2:p,pageNodeId:m})});let et=(0,l.eU)(null,(e,r,{fileKey:n,prompt:i,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,jumpToNewLine:d,fromGenerateModalV2:u,pageNodeId:p})=>{r(ee,{fileKey:n,prompt:i,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,jumpToNewLine:d,fromGenerateModalV2:u,pageNodeId:p})})},391993:(e,r,n)=>{"use strict";n.d(r,{$t:()=>_,HZ:()=>g}),n(411855),n(188507),n(595991);var i=n(38329),a=n(966712),o=n(374626),s=n(877723),l=n(119198),c=n(974105);n(177505);var d=n(335682),u=n(99506),p=n(984968),m=n(945020);n(362369);var h=n(463660);function _({dispatch:e,pageGuids:r,fileKey:n,source:a}){let s=o.zl.get(d.ze),_=o.zl.get(p.Me),g=i.D.getState();!function({figjamData:e,newFileState:r,dispatch:n,currentTeam:i,source:a,checkIsViewer:o}){f({checkIsViewer:o})&&(localStorage.setItem(h.Mu,JSON.stringify(e)),n(l.zE({state:r,from:a,editorType:u._Y.SLIDES,team:i,openNewFileIn:m.ai.NEW_TAB,slidesAiNewFileData:{source:a}})))}({figjamData:{figjamFileKey:n||s,pageGuids:r},newFileState:(0,c.Kl)(g),dispatch:e,currentTeam:_,source:a,checkIsViewer:!1})}function g(){return f({checkIsViewer:!1})}function f({checkIsViewer:e}){if(!(0,a.kc)().piper_present_summary||(0,s.y8)(e))return!1;if(!e){let e=o.zl.get(d.yV),r=!o.zl.get(p.Me)?.starter_team&&e?.viewerExportRestricted;if(e&&!e.canEditCanvas&&r)return!1}return!0}n(230646)},435898:(e,r,n)=>{"use strict";n.d(r,{Zj:()=>u,Nb:()=>s,i_:()=>p,Dl:()=>m,es:()=>c,$B:()=>g,PQ:()=>_}),n(411855),n(459401);var i=n(966712);n(939863);var a=n(574724),o=(e=>(e.NEVER="never",e.ONCE="once",e.MORETHANEONCE="morethanonce",e))(o||{}),s=(e=>(e[e.ENTRY=0]="ENTRY",e[e.PROMPT_BUILDER=1]="PROMPT_BUILDER",e))(s||{}),l=(e=>(e.MEETING="meeting",e.GANTT_CHART="gantt_chart",e.BRAINSTORM="brainstorm",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.PLAN="plan",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(l||{}),c=(e=>(e.WEEKLY_SYNC="weekly_sync",e.PLAN="plan",e.BRAINSTORM="brainstorm",e.TEAM_RETRO="team_retro",e.ONEONONE="1:1",e.GANTT_CHART="gantt_chart",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(c||{}),d=(e=>(e.IN_EDITOR="in_editor",e.TEMPLATE_SHELF="template_shelf",e.COMMUNITY="community",e.ONBOARDING_MODAL="onboarding_modal",e))(d||{}),u=(e=>(e.GENERATE_MODE="generate_stage",e.REFINEMENT_MODE="refinement_stage",e))(u||{});let p="figjam_ai_diagram",m="figjam_ai_template";var h=(e=>(e.TEMPLATE="template",e.VISUAL="visual",e))(h||{});async function _({prompt:e,signal:r,authInfo:n}){let i=await a.Ay.figjam.classifyCreate({prompt:e},n);return r.aborted?null:i.type}function g(){return!!(0,i.kc)().figjam_text_to_visual_mindmap&&!!(0,i.kc)().figjam_mindmaps_entry_enable}},211041:(e,r,n)=>{"use strict";n.d(r,{OU:()=>s,RA:()=>o}),n(966712),n(563706);var i=n(825871);n(877723),n(694687);var a=n(285334);let o=new Set([a.Ph,a.T0]);function s(e){let r=e.openFile,n=r?r.teamId:null;return{teamId:n,orgId:e.currentUserOrgId,fileKey:r?r.key:null,userId:e.user?.id||null,trackingSessionId:(0,i.f)()}}},350042:(e,r,n)=>{"use strict";n.d(r,{F9:()=>p,LX:()=>_,Mg:()=>g,fK:()=>h,h5:()=>u,lx:()=>m});var i=n(776250),a=n(374626),o=n(38580),s=n(36381),l=(e=>(e.FREEFORM="freeform",e.SUGGESTION="suggestion",e.AUTOCOMPLETE="autocomplete",e))(l||{}),c=(e=>(e.AI_PROMPT_EDITED="ai_prompt_edited",e.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",e.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",e.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",e.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",e.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",e))(c||{});let d=e=>"board"===e?"template":"visual";function u(e,r,n,o,l,c,u,p,m,h,_){let f="inappropriate"===l?l:d(l);(0,s.qV)(o).then(s=>{(0,i.sx)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:r,numVariants:n,promptId:s,outputType:f,oneClickPromptUseCase:m,oneClickPromptUseCaseCategory:p,oneClickPromptUseCaseSubCategory:h,numCharactersInput:o.length,localOutputId:a.zl.get(g),stage:c,uiTriggeredFrom:u,autocompletePromptAddition:_},{forwardToDatadog:!0})})}function p(e,r,n,o,l){(0,s.qV)(n).then(n=>{(0,i.sx)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:r,promptId:n,outputType:d(o),cortexRequestId:l,localOutputId:a.zl.get(g)},{forwardToDatadog:!0})})}function m(e,r,n,o,l){(0,s.qV)(n).then(n=>{(0,i.sx)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:r,promptId:n,outputType:d(o),cortexRequestId:l,localOutputId:a.zl.get(g)},{forwardToDatadog:!0})})}function h(e,r){(0,i.sx)("ai_prompt_request_error",{fileKey:e,errorMessage:r},{forwardToDatadog:!0})}let _=(0,o.eU)(null),g=(0,o.eU)(0)},88596:(e,r,n)=>{"use strict";n.d(r,{Vn:()=>c,mr:()=>s});var i=n(38329),a=n(988022),o=n(974105),s=(e=>(e.REQUEST="ai_summary_requested",e.CREATE="ai_summary_created",e.DELETE="ai_summary_deleted",e.LINK_COPED="ai_summary_link_copied",e.TEXT_COPIED="ai_summary_text_copied",e.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",e))(s||{}),l=(e=>(e.TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",e))(l||{});function c(e,r){let n=i.D.getState(),s=o.d1(n)?.key??"";(0,a.ds)(e,s,n,{...r})}},230646:(e,r,n)=>{"use strict";n(188507),n(966712),n(211041)},342824:(e,r,n)=>{"use strict";n.d(r,{E$:()=>c,ez:()=>s}),n(411855),n(188507);var i=n(341092);n(737947),n(966712);var a=n(939863);n(392592);var o=n(479296),s=(e=>(e.SUMMARIZE="sticky-summarization-error",e.CLUSTER="sticky-cluster-error",e.GENERATE="generate-error",e))(s||{}),l=(e=>(e.Reload="reload",e.Trace="trace",e))(l||{});let c=(0,o.D)((e,r)=>{let n={"sticky-summarization-error":{content_length_limit_exceeded:(0,a.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,a.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,a.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,a.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,a.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,a.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,a.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,a.t)("whiteboard.ai.offline_error"),unauthorized:(0,a.t)("whiteboard.ai_summary.generic_error")},"sticky-cluster-error":{content_length_limit_exceeded:(0,a.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),figjam_cluster_out_of_date:(0,a.t)("whiteboard.ai_cluster.out_of_date_error"),rate_limit_exceeded:(0,a.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,a.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,a.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,a.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,a.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,a.t)("whiteboard.ai.offline_error"),unauthorized:(0,a.t)("whiteboard.ai_cluster.generic_error")},"generate-error":{content_length_limit_exceeded:(0,a.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,a.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,a.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,a.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,a.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,a.t)("whiteboard.ai.inappropriate_input_error"),figjam_generate_moderation_api_unsafe_or_harmful_content:(0,a.t)("whiteboard.ai.inappropriate_input_error"),figjam_templates_out_of_date:(0,a.t)("whiteboard.ai_generate.out_of_date_error"),offline:(0,a.t)("whiteboard.ai.offline_error"),unauthorized:(0,a.t)("whiteboard.ai_generate.unknown_error")}},o="generic",s=!0;if(e instanceof i.G1)switch(e.type){case"content_length_limit_exceeded":o="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":o="figjam_summarize_out_of_date";break;case"figjam_cluster_out_of_date":o="figjam_cluster_out_of_date";break;case"figjam_templates_out_of_date":o="figjam_templates_out_of_date";break;case"rate_limit_exceeded":o="rate_limit_exceeded";break;case"service_issue":o="service_issue";break;case"offline":o="offline",s=!1;break;case"unsafe_or_harmful_content":o="unsafe_or_harmful_content",s=!1;break;case"figjam_generate_moderation_api_unsafe_or_harmful_content":o="figjam_generate_moderation_api_unsafe_or_harmful_content",s=!1;break;case"unauthorized":o="unauthorized",s=!1;break;case"figjam_visual_parsing_error":o="generic",s=!1;break;case"generic":if(429===e.data.status){o="rate_limit_exceeded";break}403===e.data.status&&(o="ai_opt_out_error")}let l=n[r],c=l[o]??l.generic;return{type:o,message:c,reportToSentry:s}})},684690:(e,r,n)=>{"use strict";n.d(r,{Z9:()=>g,iN:()=>E});var i=n(411855);n(188507);var a=n(587670),o=n(568214),s=n(138392);n(358145);var l=n(646240);n(853828);var c=n(752553);n(456363),n(939863),n(392592);var d=n(335682),u=n(279453);n(428467),n(984968);var p=n(694241);n(166748);var m=n(479296);n(161459);var h=n(42173),_=n(225719);let g=(0,m.D)(()=>{let e=(0,d.tS)(),[r]=(0,c.IT)((0,u.nD6)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:n,loadedColorPalette:a}=function(e){let r=(0,i.useRef)(),{uuid:n,palette:a}=function(e){let r={uuid:p.fJ,palette:void 0},n=e.data?.file;if("loaded"!==e.status||!n)return r;if(n.userColorPaletteOverrideData){let e=n.userColorPaletteOverrideData.colorPaletteUuid;if(e===p.fJ)return r;if(n.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:n.userColorPaletteOverrideData.colorPalette}}return n.defaultColorPaletteData?.colorPalette?{uuid:n.defaultColorPaletteData.colorPaletteUuid,palette:n.defaultColorPaletteData.colorPalette}:r}(e);r.current=a;let l=a?.baseColors.join(":")||"";return(0,i.useMemo)(()=>{let i,a;let c=r.current;return"loaded"===e.status&&c&&n!==p.fJ&&(i=l.split(":").map(e=>(0,o.tK)(e)).filter(f),a=(0,s.Eg)(i)),{loadedPaletteVariations:a,loadedColorPalette:c}},[n,l,e.status])}(r),m=(0,l.Xr)(_.$R);return((0,i.useEffect)(()=>{m(n)},[n,m]),a&&n)?{type:p.Yv.CUSTOM,variations:n,uuid:a.uuid,name:a.name,isTeamDefault:a.isTeamDefault}:{type:p.Yv.DEFAULT,uuid:p.fJ}});function f(e){return null!==e}function E(e,r){let n=g();return!!e&&(n.type===p.Yv.CUSTOM?0>n.variations[r].findIndex(r=>(0,o.DA)(e,r)):(0,h.zS)(e,r)===a.daH.CUSTOM)}},225719:(e,r,n)=>{"use strict";n.d(r,{$R:()=>d,Jq:()=>l,Uh:()=>u,db:()=>p,rN:()=>c});var i=n(587670),a=n(595991),o=n(38580),s=n(374626);n(853828),n(939863),n(392592),n(166748);let l=(0,o.eU)(-1),c=(0,o.eU)([]);(0,o.eU)(!1);let d=(0,o.eU)(void 0);function u(e){switch(e){case i.Z6A.STICKY:return["sticky"];case i.Z6A.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function p(){let e=s.zl.get(d);if(!e)return;let r=e.base;if(!r)return;let n=a.z.instance.getDirectlySelectedNodes().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),i=new Map;n.forEach(e=>{let r=e.fills.length>0?e.fills[0].color:void 0,n=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,a=r||n;a&&(i.has(a)?i.set(a,i.get(a)+1):i.set(a,1))});let o=Array.from(i.entries()).sort((e,r)=>r[1]-e[1]),l=new Map,c=r.sort(()=>Math.random()-.5);o.forEach((e,r)=>{l.set(e[0],c[r%c.length])}),n.forEach(e=>{if(e.fills.length>0){let r=e.fills[0].color,n=r?l.get(r):void 0;n&&(e.fills=[{type:"SOLID",color:n}])}else if(e.strokePaints.data.length>0){let r=e.strokePaints.data[0].color,n=r?l.get(r):void 0;n&&(e.strokePaints={data:[{type:"SOLID",color:n}],blobs:[]})}})}(0,o.eU)(0)},425187:(e,r,n)=>{"use strict";n.d(r,{f:()=>l});var i=n(587670),a=n(534611),o=n(288706);let s={positionRelativeToSelection:i.cfv.ABOVE,currentlySelectedNode:{nodeId:a.AD,ariaLabel:null}},l=(0,o.um)(s,(e,r)=>{switch(r.type){case"SET_POS_RELATIVE_TO_SELECTION":return{...e,positionRelativeToSelection:r.payload};case"SET_CURRENTLY_SELECTED_NODE":return{...e,currentlySelectedNode:r.payload};default:return e}})},511080:(e,r,n)=>{"use strict";n.d(r,{AZ:()=>O,Ch:()=>S,PW:()=>P,Rz:()=>D,ZH:()=>M,aO:()=>R,cN:()=>L,cs:()=>F,dF:()=>N,lV:()=>C,mS:()=>A,nX:()=>k,oV:()=>w});var i=n(411855),a=n(587670),o=n(629019),s=n.n(o),l=n(762638),c=n(428654),d=n(774191),u=n(158200),p=(e=>(e[e.DEFAULT=1]="DEFAULT",e[e.INITIAL_DRAG_ON_DLT=2]="INITIAL_DRAG_ON_DLT",e[e.DRAG_ON_CANVAS=3]="DRAG_ON_CANVAS",e[e.DRAG_RETURN_TO_DLT=4]="DRAG_RETURN_TO_DLT",e))(p||{});i.forwardRef(({color:e,toolbarIconScale:r=1,toolOrder:n=1,shouldAnimate:a=!0,stickyAnimationState:o=1},l)=>{let c=4===n,d=4===o,p=16,m=25;r<1&&(c?(p=24,m=32):p=19);let h={[u.Sk]:1===n,[u.gz]:2===n,[u.eB]:3===n,[u.ID]:c};return i.createElement("div",{className:s()({[u.xI]:2===n,[u.t3]:3===n,[u.iD]:c}),style:{width:116*r,height:116*r}},i.createElement("div",{className:s()({...h,[u.ZJ]:!0,[u.B4]:(!a||4===o)&&1===n||3===o&&2===n,[u.i0]:3===o,[u.BE]:d,[u.rh]:!d&&!a&&2===n}),style:{top:p*r,left:m*r,width:104*r,height:104*r},ref:l},i.createElement("div",{className:s()({[u.uh]:!0,[u.WX]:!0})},i.createElement("svg",{className:u.SN,width:104*r,height:104*r,viewBox:"-20 -20 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",null,i.createElement("path",{className:s()(u.Wq,{[u.cq]:!0}),style:{clipPath:`url(#stickyMaskV3-${n})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),i.createElement("g",{className:u.BN},i.createElement("mask",{id:`stickyCurlMaskV3-${n}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:84,height:84},i.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),i.createElement("g",{mask:`url(#stickyCurlMaskV3-${n})`},i.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:u.cq}),i.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},i.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:u.cq}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),i.createElement("defs",null,i.createElement("clipPath",{id:`stickyMaskV3-${n}`},i.createElement("path",{className:u.cP,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),i.createElement("path",{className:u.dP,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),i.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),i.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${n}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"1.5"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),i.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"4"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),i.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),i.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),i.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),i.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),i.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});let m="#699BF7",h="#B3B3B3";function _({toolbarIconScale:e,children:r}){return i.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",xmlns:"http://www.w3.org/2000/svg",className:s()(u.WX,{[u.$d]:!0})},r)}let g=new Map([[a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,104],[a.NLJ.SHAPE_WHITEBOARD_ELLIPSE,128],[a.NLJ.SHAPE_WHITEBOARD_SQUARE,112]]),f=2/38,E=.5/38,y=8/38;function b(e,r){if(r===a.xbm.NONE)return"#000000";let n=c.F.parse(e),i=a.DV9.getShapeWithTextStrokeColor((0,d.oU)(n));return i?c.F.format((0,d.aH)(i)):"#757575"}function I(e,r,n){if(!n)return{};let{styleType:i,isDragging:o}=n,s=function(e){let r=g.get(e);return void 0===r?112:r}(r);return{stroke:b(e,i),strokeWidth:i===a.xbm.NONE?s*E:s*f,strokeOpacity:i===a.xbm.NONE?.2:1,strokeDasharray:i===a.xbm.DASHED?`${s*y} ${s*y}`:"",strokeLinecap:"round",className:l.cx.if(o,l.cx.hidden).$}}function T(e,r){if(!r)return{};let{styleType:n,svgToCanvasScale:i,isDragging:o}=r;return r?{stroke:b(e,n),strokeWidth:function(e,r,n=!1){return n&&(e===a.xbm.SOLID||e===a.xbm.DASHED)?4*r:0}(n,i,o),strokeDasharray:function(e,r,n=!1){return n&&e===a.xbm.DASHED?`${16*r} ${10*r}`:""}(n,i,o),strokeLinecap:"round"}:{}}function v(e){return!!e&&e.styleType===a.xbm.NONE}function S(){return i.createElement("svg",{width:"48",height:"40",viewBox:"0 0 48 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"4",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"1",y:"17",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("rect",{x:"41",y:"17",width:"6",height:"6",fill:"black",fillOpacity:"0.9",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M4.5 16V8.5C4.5 4.08172 7.49218 0.5 11.8 0.5H36.2C40.5078 0.5 43.5 4.08172 43.5 8.5V16",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M4.5 24V31.5C4.5 35.9183 7.49218 39.5 11.8 39.5H36.2C40.5078 39.5 43.5 35.9183 43.5 31.5V24",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33 9H15V11H23V31H25V11H33V9Z",fill:"black",fillOpacity:"0.9"}))}function w(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"black",fillOpacity:"0.9"}))}function A(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"black",fillOpacity:"0.9"}))}function N(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"white"}))}function C(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),i.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function O(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),i.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),i.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),i.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function L(){return i.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),i.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),i.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),i.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function R(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M7 18V30C7 31.6569 8.34315 33 10 33H30C31.6569 33 33 31.6569 33 30V10C33 8.34315 31.6569 7 30 7H26",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),i.createElement("rect",{x:"7",y:"7",width:"14",height:"6",rx:"1",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}))}function P(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6C7.79086 6 6 7.79086 6 10V30C6 32.2091 7.79086 34 10 34H30C32.2091 34 34 32.2091 34 30V10C34 7.79086 32.2091 6 30 6H10ZM8 10C8 8.89543 8.89543 8 10 8H14V15H8V10ZM14 17H8V23H14V17ZM16 23V17H32V23H16ZM14 25H8V30C8 31.1046 8.89543 32 10 32H14V25ZM16 32V25H32V30C32 31.1046 31.1046 32 30 32H16ZM16 15V8H30C31.1046 8 32 8.89543 32 10V15H16Z",fill:"black",fillOpacity:"0.9"}))}function D(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M8.58334 19.75C8.58334 13.5828 13.5828 8.58333 19.75 8.58333C25.9172 8.58333 30.9167 13.5828 30.9167 19.75C30.9167 25.9172 25.9172 30.9167 19.75 30.9167H12.45C11.5818 30.9167 10.9907 30.9159 10.5337 30.8785C10.0883 30.8422 9.85896 30.7761 9.69811 30.6941C9.31394 30.4984 9.00161 30.1861 8.80586 29.8019C8.7239 29.641 8.65784 29.4117 8.62145 28.9663C8.58411 28.5093 8.58334 27.9182 8.58334 27.05V19.75Z",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}))}function k(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function M(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function F(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},o)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z",fill:e,className:u.cq,ref:o,...T(e,n)}),i.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",...I(e,a.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},o)=>i.createElement(_,{toolbarIconScale:r},i.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:u.cq,ref:o,...T(e,n)}),i.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",...I(e,a.NLJ.SHAPE_WHITEBOARD_ELLIPSE,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("rect",{x:"16",y:"32",width:"112",height:"80",rx:"40",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",rx:"3.175",transform:"rotate(-45 15.874 71.874)",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},o)=>i.createElement(_,{toolbarIconScale:r},i.createElement("rect",{x:"16",y:"16",width:"112",height:"112",rx:"3.23077",fill:e,className:u.cq,ref:o,...T(e,n)}),i.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",rx:"3.23077",...I(e,a.NLJ.SHAPE_WHITEBOARD_SQUARE,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M16.1763 30.5665C16.1763 28.9381 17.4061 27.1478 20.2318 25.336C23.0129 23.5529 27.1015 21.9106 32.2405 20.517C42.5046 17.7335 56.7388 16 72.5 16C88.2612 16 102.495 17.7335 112.759 20.517C117.898 21.9106 121.987 23.5529 124.768 25.336C127.594 27.1478 128.824 28.9381 128.824 30.5665C128.824 32.1949 127.594 33.9852 124.768 35.7969C121.987 37.5801 117.898 39.2224 112.759 40.616C102.495 43.3995 88.2612 45.1329 72.5 45.1329C56.7388 45.1329 42.5046 43.3995 32.2405 40.616C27.1015 39.2224 23.0129 37.5801 20.2318 35.7969C17.4061 33.9852 16.1763 32.1949 16.1763 30.5665Z M125.816 37.4319C126.996 36.6756 128.019 35.8576 128.824 34.9796V113.434C128.824 115.062 127.594 116.852 124.768 118.664C121.987 120.447 117.898 122.089 112.759 123.483C102.495 126.267 88.2612 128 72.5 128C56.7388 128 42.5046 126.267 32.2405 123.483C27.1015 122.089 23.0129 120.447 20.2318 118.664C17.4061 116.852 16.1763 115.062 16.1763 113.434V34.9796C16.981 35.8576 18.0038 36.6756 19.1835 37.4319C22.201 39.3666 26.5029 41.0724 31.7322 42.4905C42.2047 45.3305 56.6179 47.0751 72.5 47.0751C88.3821 47.0751 102.795 45.3305 113.268 42.4905C118.497 41.0724 122.799 39.3666 125.816 37.4319Z":"M15.5289 30.5664C15.5289 21.9851 41.0355 15.0288 72.5 15.0288C103.964 15.0288 129.471 21.9851 129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M129.471 30.5664C129.471 39.1477 103.964 46.104 72.5 46.104C41.0355 46.104 15.5289 39.1477 15.5289 30.5664M129.471 30.5664C129.471 21.9851 103.964 15.0288 72.5 15.0288C41.0355 15.0288 15.5289 21.9851 15.5289 30.5664M129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M22.1503 121H117.979C117.215 120.301 116.503 119.415 115.844 118.393C114.15 115.767 112.657 112.023 111.417 107.473C108.931 98.3601 107.405 85.8189 107.405 72C107.405 58.1811 108.931 45.6399 111.417 36.5273C112.657 31.9771 114.15 28.2333 115.844 25.6072C116.503 24.5851 117.215 23.6986 117.979 23H22.1503C20.7231 23 19.1567 24.0712 17.5724 26.5282C16.0127 28.9471 14.5759 32.5037 13.3566 36.9744C10.9214 45.9038 9.40463 58.2875 9.40463 72C9.40463 85.7125 10.9214 98.0962 13.3566 107.026C14.5759 111.496 16.0127 115.053 17.5724 117.472C19.1567 119.929 20.7231 121 22.1503 121Z M117.272 26.5282C118.856 24.0712 120.423 23 121.85 23C123.277 23 124.843 24.0712 126.428 26.5282C127.987 28.9471 129.424 32.5037 130.643 36.9744C133.079 45.9038 134.595 58.2875 134.595 72C134.595 85.7125 133.079 98.0962 130.643 107.026C129.424 111.496 127.987 115.053 126.428 117.472C124.843 119.929 123.277 121 121.85 121C120.423 121 118.856 119.929 117.272 117.472C115.712 115.053 114.275 111.496 113.056 107.026C110.621 98.0962 109.104 85.7125 109.104 72C109.104 58.2875 110.621 45.9038 113.056 36.9744C114.275 32.5037 115.712 28.9471 117.272 26.5282Z":"M122.229 22.1504C129.738 22.1504 135.824 44.4687 135.824 72.0001C135.824 99.5315 129.738 121.85 122.229 121.85H22.5295C15.0209 121.85 8.93413 99.5315 8.93413 72.0001C8.93413 44.4687 15.0209 22.1504 22.5295 22.1504H122.229Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M121.85 121.85C114.341 121.85 108.254 99.5315 108.254 72.0001C108.254 44.4687 114.341 22.1504 121.85 22.1504M121.85 121.85C129.358 121.85 135.445 99.5315 135.445 72.0001C135.445 44.4687 129.358 22.1504 121.85 22.1504M121.85 121.85H22.1503C14.6417 121.85 8.55492 99.5315 8.55492 72.0001C8.55492 44.4687 14.6417 22.1504 22.1503 22.1504H121.85",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M10.3815 22.7052C10.3815 21.211 11.5925 20 13.0867 20H103.561V46.1503C103.561 48.3081 105.31 50.0578 107.468 50.0578H133.618V121.295C133.618 122.789 132.407 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V22.7052Z M132.343 48.2543L105.364 21.2752V46.1503C105.364 47.3121 106.306 48.2543 107.468 48.2543H132.343Z":"M9.47974 121.295V22.7051C9.47974 20.7128 11.0944 19.0981 13.0867 19.0981H104.462L134.52 49.1559V121.295C134.52 123.287 132.905 124.902 130.913 124.902H13.0867C11.0944 124.902 9.47974 123.287 9.47974 121.295Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M104.462 19.0981H13.0867C11.0944 19.0981 9.47974 20.7128 9.47974 22.7051V121.295C9.47974 123.287 11.0944 124.902 13.0867 124.902H130.913C132.905 124.902 134.52 123.287 134.52 121.295V49.1559M104.462 19.0981L134.52 49.1559M104.462 19.0981V46.1502C104.462 47.81 105.808 49.1559 107.468 49.1559H134.52",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M20.2185 21.6806C20.6341 20.6642 21.6236 20 22.7221 20H66.5728C67.6712 20 68.6608 20.6642 69.0763 21.6806L78.4719 44.6474H10.823L20.2185 21.6806Z M10.3815 46.4509H130.913C132.408 46.4509 133.619 47.6618 133.619 49.1561V121.295C133.619 122.789 132.408 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V46.4509Z":"M9.4798 121.295V45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549H130.913C132.906 45.549 134.52 47.1637 134.52 49.1559V121.295C134.52 123.287 132.906 124.902 130.913 124.902H13.0867C11.0945 124.902 9.4798 123.287 9.4798 121.295Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M9.4798 45.549V121.295C9.4798 123.287 11.0945 124.902 13.0867 124.902H130.913C132.906 124.902 134.52 123.287 134.52 121.295V49.1559C134.52 47.1637 132.906 45.549 130.913 45.549H79.815M9.4798 45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549M9.4798 45.549H79.815",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M8.24869 71.3645L24.1079 34.3397C24.6034 33.1629 25.7559 32.3976 27.0328 32.3976H116.967C118.244 32.3976 119.397 33.1629 119.892 34.3397L135.751 71.3645C136.083 72.152 136.083 73.04 135.751 73.8275L119.892 110.852C119.397 112.029 118.244 112.794 116.967 112.794H27.0328C25.7559 112.794 24.6034 112.029 24.1079 110.852L8.24869 73.8275C7.9171 73.04 7.9171 72.152 8.24869 71.3645Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:v(n)?"M8.28613 31.5551C8.28613 30.119 9.45004 28.9551 10.8862 28.9551H16.664V115.045H10.8862C9.45004 115.045 8.28613 113.881 8.28613 112.445V31.5551Z M18.3974 115.045V28.9551H127.021V115.045H18.3974Z M128.754 115.045V28.9551H134.532C135.968 28.9551 137.132 30.119 137.132 31.5551V112.445C137.132 113.881 135.968 115.045 134.532 115.045H128.754Z":"M7.68134 31.5551C7.68134 29.6403 9.23327 28.0884 11.148 28.0884H17.7926H128.15H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15H17.7926H11.148C9.23327 115.912 7.68134 114.36 7.68134 112.445V31.5551Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M17.7926 28.0884H11.148C9.23327 28.0884 7.68134 29.6403 7.68134 31.5551V112.445C7.68134 114.36 9.23327 115.912 11.148 115.912H17.7926M17.7926 28.0884V115.912M17.7926 28.0884H128.15M17.7926 115.912H128.15M128.15 28.0884V115.912M128.15 28.0884H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M33.129 70.5542L11.8756 36.4458C10.776 34.4464 12.2225 32 14.5043 32H106.561C107.609 32 108.582 32.5478 109.126 33.4447L132.065 70.4447C132.645 71.4006 132.645 72.5994 132.065 73.5553L109.126 110.555C108.582 111.452 107.609 112 106.561 112H14.5043C12.2225 112 10.776 109.554 11.8756 107.554L33.129 73.4458C33.6241 72.5455 33.6241 71.4545 33.129 70.5542Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M8.00262 23.8137C8.00262 22.5661 9.01375 21.5549 10.2614 21.5549H124.704C125.951 21.5549 126.962 22.5661 126.962 23.8137V28.0802H18.2924C16.2163 28.0802 14.5278 29.7638 14.5278 31.8442V105.774L9.51934 104.138L9.49978 104.132C8.61172 103.869 8.00262 103.052 8.00262 102.126V23.8137Z M18.2924 29.586H133.739C134.986 29.586 135.997 30.5972 135.997 31.8442V111.379C135.997 112.823 134.605 113.86 133.221 113.445L119.012 109.191C104.078 104.72 87.9501 106.742 74.5822 114.761C60.7079 123.083 43.8294 124.739 28.6012 119.271L17.2825 115.207C16.5333 114.937 16.0337 114.227 16.0337 113.432V31.8442C16.0337 30.5967 17.0466 29.586 18.2924 29.586Z":"M7.24973 23.8136C7.24973 22.1502 8.59794 20.802 10.2614 20.802H124.704C126.367 20.802 127.715 22.1502 127.715 23.8136V28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812L9.28559 104.854C8.07793 104.495 7.24973 103.386 7.24973 102.126V23.8136Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M127.715 28.833V23.8136C127.715 22.1502 126.367 20.802 124.704 20.802H10.2614C8.59794 20.802 7.24973 22.1502 7.24973 23.8136V102.126C7.24973 103.386 8.07793 104.495 9.28559 104.854L15.2808 106.812M127.715 28.833H18.2924C16.6315 28.833 15.2808 30.1803 15.2808 31.8442V106.812M127.715 28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M12.5068 70.5597C11.8311 71.4272 11.8311 72.5728 12.5068 73.4403L47.1369 117.894C48.7381 119.95 52.3844 118.949 52.3844 116.454V99.4781H129C130.657 99.4781 132 98.135 132 96.4781V48.7638C132 47.107 130.657 45.7638 129 45.7638H52.3844V27.5458C52.3844 25.0508 48.7381 24.05 47.1369 26.1055L12.5068 70.5597Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M131.493 70.5597C132.169 71.4272 132.169 72.5728 131.493 73.4403L96.8631 117.894C95.2619 119.95 91.6156 118.949 91.6156 116.454V99.4781H15C13.3432 99.4781 12 98.135 12 96.4781V48.7638C12 47.107 13.3432 45.7638 15 45.7638H91.6156V27.5458C91.6156 25.0508 95.2619 24.05 96.8631 26.1055L131.493 70.5597Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M24.029 72C24.029 59.2726 28.9314 47.6903 36.951 39.0383L70.4029 72.4902L37.4306 105.472C29.1273 96.7676 24.029 84.9792 24.029 72Z M72.5239 70.3686L39.0571 36.9017C47.7613 28.5984 59.5497 23.5 72.529 23.5C85.5032 23.5 97.2876 28.5945 105.991 36.8921L72.5239 70.3686Z M74.6452 72.4899L108.098 39.0281C116.123 47.6811 121.029 59.2676 121.029 72C121.029 84.9793 115.931 96.7677 107.627 105.472L74.6452 72.4899Z M72.5242 74.6115L105.491 107.578C96.8387 115.598 85.2564 120.5 72.529 120.5C59.8015 120.5 48.2191 115.598 39.5671 107.578L72.5242 74.6115Z":"M72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883ZM108.121 36.883L72.524 72.49M108.121 36.883L108.129 36.875M36.929 36.895L72.524 72.49M72.524 72.49L107.634 107.6M72.524 72.49L37.424 107.6",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M71.058 70.5H24.0807C24.8582 44.9063 45.4643 24.3002 71.058 23.5227V70.5Z M74.058 70.5V23.5227C99.6516 24.3002 120.258 44.9063 121.035 70.5H74.058Z M74.058 73.5H121.035C120.258 99.0936 99.6516 119.7 74.058 120.477V73.5Z M71.058 73.5V120.477C45.4643 119.7 24.8582 99.0936 24.0807 73.5H71.058Z":"M122.558 72C122.558 99.6142 100.172 122 72.558 122C44.9437 122 22.558 99.6142 22.558 72C22.558 44.3858 44.9437 22 72.558 22C100.172 22 122.558 44.3858 122.558 72Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M122.558 72C122.558 99.6142 100.172 122 72.558 122M122.558 72C122.558 44.3858 100.172 22 72.558 22M122.558 72H72.558M72.558 122C44.9437 122 22.558 99.6142 22.558 72M72.558 122V72M22.558 72C22.558 44.3858 44.9437 22 72.558 22M22.558 72H72.558M72.558 22V72",...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:"M128 50V80.5754C128 92.7257 118.15 102.575 106 102.575H60.4126V102.575C60.4117 102.575 60.411 102.576 60.4103 102.577L42.151 115.27C39.9715 117.123 36.972 115.234 36.972 112.007L36.9715 102.576C36.9715 102.576 36.9717 102.576 36.9718 102.575C36.9718 102.575 36.9719 102.575 36.9718 102.575H26.486C20.6947 102.575 16 97.8807 16 92.0894V50C16 37.8497 25.8497 28 38 28H106C118.15 28 128 37.8497 128 50Z",fill:e,className:u.cq,ref:a,...T(e,n)}))),i.forwardRef(({color:e=m,toolbarIconScale:r=1,shapeStrokeProps:n},a)=>i.createElement(_,{toolbarIconScale:r},i.createElement("path",{d:v(n)?"M8.00348 31.8228C8.00348 30.3962 9.15968 29.24 10.5863 29.24H15.465V36.7015H8.00348V31.8228Z M17.1868 36.7015V29.24H133.414C134.84 29.24 135.997 30.3962 135.997 31.8228V36.7015H17.1868Z M17.1868 38.4233H135.997V112.177C135.997 113.604 134.84 114.76 133.414 114.76H17.1868V38.4233Z M15.465 38.4233V114.76H10.5863C9.15968 114.76 8.00348 113.604 8.00348 112.177V38.4233H15.465Z":"M7.64255 31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259H133.914C135.816 28.3792 137.357 29.9208 137.357 31.8229V37.5625V112.177C137.357 114.079 135.816 115.621 133.914 115.621H16.8259H11.0863C9.1842 115.621 7.64255 114.079 7.64255 112.177V37.5625V31.8229Z",fill:e,className:u.cq,ref:a}),i.createElement("path",{d:"M7.64255 37.5625V31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259M7.64255 37.5625V112.177C7.64255 114.079 9.1842 115.621 11.0863 115.621H16.8259M7.64255 37.5625H16.8259M16.8259 115.621H133.914C135.816 115.621 137.357 114.079 137.357 112.177V37.5625M16.8259 115.621V37.5625M137.357 37.5625V31.8229C137.357 29.9208 135.816 28.3792 133.914 28.3792H16.8259M137.357 37.5625H16.8259M16.8259 28.3792V37.5625",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1},n)=>i.createElement("svg",{width:31*r,height:34*r,viewBox:"0 0 32 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7929 1.70711C22.4024 1.31658 22.4024 0.683417 22.7929 0.292893C23.1834 -0.0976311 23.8166 -0.0976311 24.2071 0.292893L30.2071 6.29289C30.5976 6.68342 30.5976 7.31658 30.2071 7.70711L24.2071 13.7071C23.8166 14.0976 23.1834 14.0976 22.7929 13.7071C22.4024 13.3166 22.4024 12.6834 22.7929 12.2929L27.0858 8H20.6834C17.922 8 15.6834 10.2386 15.6834 13V27C15.6834 30.866 12.5494 34 8.68341 34H1.5C0.947715 34 0.5 33.5523 0.5 33C0.5 32.4477 0.947715 32 1.5 32H8.68341C11.4448 32 13.6834 29.7614 13.6834 27V13C13.6834 9.13401 16.8174 6 20.6834 6H27.0858L22.7929 1.70711Z",fill:e,ref:n}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1},n)=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28*r,height:30*r,viewBox:"0 0 28 30",fill:"none"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8987 2.17466C17.3465 2.18604 16.8897 1.74765 16.8783 1.19548C16.8669 0.643314 17.3053 0.186467 17.8575 0.175085L26.341 0.000216699C26.8931 -0.011165 27.35 0.427228 27.3614 0.979396L27.5362 9.46288C27.5476 10.015 27.1092 10.4719 26.5571 10.4833C26.0049 10.4947 25.548 10.0563 25.5367 9.50409L25.4197 3.82765L1.73377 29.4084C1.35854 29.8137 0.725841 29.838 0.320597 29.4628C-0.0846483 29.0875 -0.108983 28.4548 0.266244 28.0496L24.3476 2.04173L17.8987 2.17466Z",fill:e,ref:n})))},890530:(e,r,n)=>{"use strict";n.d(r,{UM:()=>l,zW:()=>c});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234);n(574176);let l="dlt_banner_shortcut_button",c=(0,i.memo)((0,i.forwardRef)(function(e,r){let{shortcut:n,onClick:a,isActive:l,recordingKey:c,dataElementTarget:d,isPressed:u}=e,p=(0,s.rf)((0,s.Pt)("dltBannerShortcutButton",c),"click",a),m=o()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":u});return i.createElement("button",{ref:r,className:m,onClick:p,"data-element-target":d},n)}))},330505:(e,r,n)=>{"use strict";var i=n(411855),a=n(188507),o=n(587670),s=n(812821),l=n(890530);(0,i.memo)(function(e){let r=(0,a.d4)(e=>e.mirror.appModel.currentTool===o.NLJ.COMMENTS),n=(0,i.useCallback)(()=>{r?o.glU.triggerActionInUserEditScope("set-tool-default",{source:l.UM}):o.glU.triggerActionInUserEditScope("set-tool-comments",{source:l.UM})},[r]);return i.createElement(l.zW,{shortcut:"C",onClick:n,isActive:r,recordingKey:"comment",isPressed:e.isPressed})}),(0,i.memo)(function(e){let r=(0,a.d4)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),n=(0,i.useCallback)(e=>{if(r){s.CB.closeWheel();return}s.CB.startChat(e.clientX,e.clientY,l.UM)},[r]);return i.createElement(l.zW,{shortcut:"/",onClick:n,isActive:r,recordingKey:"cursorChat",dataElementTarget:"dlt-banner-chat-shortcut",isPressed:e.isPressed})}),(0,i.memo)(function(e){let r=(0,i.useRef)(null),n=(0,a.d4)(e=>{let r="WHEEL"===e.multiplayerEmoji.type,n="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return r||n}),o=(0,i.useCallback)(()=>{if(n){s.CB.closeWheel();return}let e=r.current?.getBoundingClientRect()??{x:0,y:0},i=e.x+100,a=e.y-200;s.CB.handleShortcutPressWithType({viewportX:i,viewportY:a,source:l.UM,wheelType:"REACTION"}),s.CB.handleShortcutRelease(i,a)},[n]);return i.createElement(l.zW,{ref:r,shortcut:"E",onClick:o,isActive:n,recordingKey:"emote",dataElementTarget:"dlt-banner-emote-shortcut",isPressed:e.isPressed})})},202232:(e,r,n)=>{"use strict";n.d(r,{HY:()=>o,YB:()=>a,fK:()=>s,hx:()=>l}),n(411855),n(188507),n(629019);var i=n(153234);n(140908),n(848661),n(161459),n(158200);let a=1500,o="delightful-toolbar",s="delightful_toolbar";function l(e){return i.Pt("delightfulToolbar",e)}},161459:(e,r,n)=>{"use strict";n.d(r,{BD:()=>g,Dq:()=>_,Iz:()=>u,LX:()=>y,T7:()=>E,XQ:()=>p,g5:()=>d,n6:()=>f,qB:()=>m,uM:()=>c,wv:()=>l,zQ:()=>h});var i=n(587670),a=n(966712),o=n(428654),s=n(42173);let l=4,c=8,d=24,u=40,p=[{type:"SOLID",color:(0,s.BV)(i.daH.BLACK,"base")}],m=l,h=1,_=[{type:"SOLID",color:(0,s.BV)(i.daH.HIGHLIGHT_YELLOW,"highlight")}],g=(0,s.BV)(i.daH.STICKY_GRAY_LIGHT,"sticky"),f=o.F.parse((0,s.Mr)((0,a.kc)().figjam_default_shape_style_bw?i.daH.WHITE:i.daH.VIOLET_LIGHT)),E=(0,a.kc)().figjam_default_shape_style_bw?i.xbm.SOLID:i.xbm.NONE,y=(0,s.BV)(i.daH.GRAY,"baseLight")},219001:(e,r,n)=>{"use strict";n.d(r,{nS:()=>o});var i=n(411855),a=(e=>(e.ClickOut="clickOut",e.KeyboardEsc="keyboardEsc",e.ToolSelected="toolSelected",e.ChevronClicked="chevronClicked",e.PropertyChanged="propertyChanged",e.CloseButton="closeButton",e.ClickDemotedDlt="clickDemotedDlt",e))(a||{});let o=i.createContext({state:{draggedTool:void 0,submenu:{tool:void 0,shouldCloseOnClickOut:!0},draggedToolCanCancel:!0,shouldFinishClick:!0,shouldDemoteDlt:!1},dispatch:()=>null})},979686:(e,r,n)=>{"use strict";n.d(r,{FF:()=>m,bz:()=>_,hv:()=>h,oV:()=>u,rD:()=>p}),n(411855);var i=n(188507),a=n(563706),o=n(809831),s=n(965480),l=n(949462),c=n(29680);n(819338);var d=n(554905);function u(){let e=(0,c.aV)(),r=(0,o.ow)(),n=(0,d.Td)(),s=(0,i.d4)(e=>!!e.user);return!e&&r&&n&&!a.Ay.isIpadNative&&s}function p(){let e=(0,c.aV)(),r=(0,o.ow)(),n=(0,l.N)(),s=(0,i.d4)(e=>!!e.user);return!e&&r&&n&&!a.Ay.isIpadNative&&s}function m(){let e=(0,i.d4)(e=>e.mirror?.appModel.showUi),r=(0,o.ow)(),n=(0,i.d4)(e=>e.mirror?.appModel.isReadOnly),a=u(),s=p();return r&&e&&(!n||a||s)}function h(e={}){let{isEnabledForViewers:r}=e,n=(0,c.aV)(),i=(0,d.Td)(),a=(0,l.N)();return n||i&&!r||a&&!r}function _(){let e=(0,s.kD)(),r=(0,s.tS)(),n=(0,d.Td)();return!!e&&r&&n}n(219001),n(525040)},178911:(e,r,n)=>{"use strict";n.d(r,{Hm:()=>f,yl:()=>g});var i=n(411855),a=n(188507),o=n(587670),s=n(902139),l=n(988022),c=n(369870),d=n(498606),u=n(511080),p=n(202232),m=n(438304),h=n(383847),_=n(158200);let g="delightful-toolbar-universal-insert";function f(){let e=(0,a.d4)(e=>e.universalInsertModal.showing),r=(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.NONE),n=e&&r,f=(0,a.wA)(),E=(0,i.useCallback)(()=>{n?(f(s.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:p.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:p.fK}),f(s.En({initialX:0,initialY:0})),(0,l.Cu)({source:p.fK},"action_open_universal_insert_modal"))},[f,n]);return i.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:_.Zh},i.createElement(h.IB,{toolType:"universal-insert",recordingKey:(0,p.hx)("universal-insert"),isSelected:n,className:c.pb.isGoogleClassroomIntegration()?_.vy:_.pN,onClick:E,"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:n,onboardingKey:g},e=>i.createElement(m.gd,{toolType:"universal-insert",inactiveIcon:i.createElement(u.lV,null),hoveredIcon:i.createElement(u.AZ,null),activeIcon:i.createElement(u.cN,null),isSelected:n,isHovered:e})))}},48009:(e,r,n)=>{"use strict";n.d(r,{xX:()=>W});var i=n(411855),a=n(188507),o=n(587670),s=n(629019),l=n.n(s),c=n(374626),d=n(192437),u=n(762638),p=n(47506),m=n(753643),h=n(801161),_=n(902139),g=n(988022),f=n(128765),E=n(369870),y=n(460289),b=n(694687),I=n(860178),T=n(336599),v=n(809073),S=n(498606),w=n(369394),A=n(867795),N=n(511080),C=n(123975),O=n(202232),L=n(297483),R=n(178911),P=n(303526),D=n(438304),k=n(949889),M=n(383847),F=n(158200),x=n(26229);let U="delightful-toolbar-universal-insert-button-icon",B=[{src:"https://static.figma.com/uploads/9cd2eb2ff31cb221dce81ca1e67aa51e12b24166",zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:"https://static.figma.com/uploads/276fdbb8f6edbcb958f84235ebfc58b63eab0fc2",zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:"https://static.figma.com/uploads/94db9cf93e2a26f927d5f1a7f066f8b045985011",zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:"https://static.figma.com/uploads/004b50b1460d47029608e9aaa66c09c1c94c6741",zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function V({recentItems:e,toolbarIconScale:r,isModalOpen:n}){let a=(0,L.ws)(e);return i.createElement("div",{className:l()(F.z6,F.ac,x.JY),style:{width:112*r}},B.map((e,o)=>{var s,l;let c=a[o];return i.createElement(H,{key:c?.id||e.src,zIndex:5+e.zIndex,width:e.width*r,height:e.height*r,isModalOpen:n,transform:(s={x:e.translateStart.x*r,y:e.translateStart.y*r},l=e.rotateStart,`translate(calc(-50% + ${s.x}px), calc(-50% + ${s.y}px)) rotate(${l}deg)`)},c?i.createElement(P.E,{item:c,width:e.width*r,height:e.height*r,disableTooltips:!0}):i.createElement("img",{src:e.src,alt:"",className:x.VF}))}))}function G({onClick:e,isSelected:r,isHovered:n}){return i.createElement("div",{className:u.cx.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},i.createElement(M.IB,{toolType:"universal-insert-collage",recordingKey:(0,O.hx)("universal-insert-plus"),isSelected:r,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":S.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},i.createElement(D.gd,{toolType:"universal-insert-collage",inactiveIcon:i.createElement(N.nX,null),hoveredIcon:i.createElement(N.ZH,null),activeIcon:i.createElement(N.cs,null),isSelected:r,isHovered:n})))}function H({zIndex:e,width:r,height:n,transform:a,isModalOpen:o,children:s}){return i.createElement("div",{className:l()(x.s,{[x.r3]:o}),style:{zIndex:e,width:r,height:n,transform:a}},i.createElement("div",{className:x.f_},s))}function W(e,r){let[n,a]=(0,i.useState)(!1),o=(0,i.useRef)(!1),s=(0,i.useRef)([]);return s.current=r,(0,i.useEffect)(()=>{e||o.current||(o.current=!0,async function(){let e=[];for(let r of s.current)r&&e.push(new Promise(e=>{let n=new Image;n.src=r,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),a(!0)}())},[e]),n}function K({toolbarIconScale:e}){let r=(0,I.TA)(),[n,s]=(0,i.useState)(!1),l=(0,a.wA)(),d=(0,L.NT)(),u=(0,c.md)(C.c),S=(0,y.XM)(),N=(0,b.sZ)(),D=(0,a.d4)(e=>e.universalInsertModal.showing),B=(0,f.fG)(),H=function(e,r){let n=(0,a.wA)();return(0,i.useCallback)(()=>{(0,p.YQ)({id:"figjam-saves"}),e?(n(_.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:O.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:O.fK}),n(h.jD()),n(_.En({initialX:0,initialY:0,initialTab:r?.stage!=="FULL"?A.p.MORE:void 0})),(0,g.Cu)({source:O.fK},"action_open_universal_insert_collage_modal"))},[e,r,n])}(D,u);(0,i.useEffect)(()=>{l(w.cd.fetchTemplatesMetadata({key:v.$A.FigJam,orgId:N?.id})),l(w.cd.fetchWidgetsMetadata({key:v.$A.FigJam})),s(!0)},[l,N?.id]);let K=(0,T.oh)(m.fC),j=(0,T.oh)(w.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:v.$A.FigJam})),z=(0,T.oh)(w.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:v.$A.FigJam})),Y=W(!n||K||j||z,d.map(e=>(0,P.h)(e,B,r??void 0)))?d.map(e=>e.id||"").sort((e,r)=>e.localeCompare(r)).join(""):"loading",$=S&&u?.stage==="MINIMIZED_ZERO"||u?.stage==="MINIMIZED"||u?.stage==="CUT_OFF";return i.createElement(k.XN,{alignment:"CENTER"},i.createElement(M.IB,{toolType:"universal-insert-collage",recordingKey:(0,O.hx)("universal-insert-collage"),isSelected:D,className:E.pb.isGoogleClassroomIntegration()?F.vy:F.qs,onClick:H,ariaLabel:"browse-all-resources-dlt",onboardingKey:R.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:D},r=>i.createElement(k.ti,{isSelected:r,noScaleAnimation:!0,isRightEdge:!0},i.createElement("div",{className:x.Ge,"data-onboarding-key":"figjam-saves","data-element-target":U,"data-cancel-insertable-resource-drag-and-drop":!0},!$&&i.createElement(V,{key:Y,recentItems:d,toolbarIconScale:e,isModalOpen:D}),i.createElement(G,{onClick:H,isSelected:D,isHovered:r})))))}function j(){return i.createElement(k.XN,{alignment:"CENTER"},i.createElement("div",{"data-element-target":U,className:x.V6},i.createElement(R.Hm,null)))}(0,i.memo)(function({toolbarIconScale:e}){return i.createElement(d.tH,{fallback:i.createElement(j,null),boundaryKey:"UniversalInsertCollage"},i.createElement(K,{toolbarIconScale:e}))})},548785:(e,r,n)=>{"use strict";var i=n(587670);n(511080),i.daH.BLACK,i.daH.GRAY_DARK,i.daH.GRAY_LIGHT,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE,Array.from(new Map([["SQUARE",i.NLJ.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",i.NLJ.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",i.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",i.NLJ.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",i.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",i.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",i.NLJ.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",i.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",i.NLJ.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",i.NLJ.SHAPE_WHITEBOARD_STAR],["SHIELD",i.NLJ.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",i.NLJ.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",i.NLJ.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",i.NLJ.SHAPE_WHITEBOARD_OCTAGON],["PLUS",i.NLJ.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",i.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",i.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",i.NLJ.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",i.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",i.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",i.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",i.NLJ.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",i.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",i.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",i.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),([e,r])=>[r,e])},972283:(e,r,n)=>{"use strict";n.d(r,{AH:()=>F});var i=n(411855),a=n(188507),o=n(587670),s=n(629019),l=n.n(s),c=n(563706),d=n(574176),u=n(939863),p=n(145519),m=n(625651),h=n(501972),_=n(812821),g=n(701882),f=n(460289),E=n(498606),y=n(511080),b=n(202232),I=n(438304),T=n(383847),v=n(525040),S=n(522322),w=n(158200),A=n(533600);let N="delightful-toolbar-stamp-button",C={padBottom:30,height:512},O=100*C.padBottom/C.height,L=`calc(${O}% + -14px)`,R=`translateY(${L})`;function P({onClickToOpenWheel:e,leaveVotingSessionAndCloseWheel:r,numVotesRemaining:n,hasRemainingVotes:a}){let[o,s]=(0,i.useState)(!1),p=a&&!c.Ay.isIpad;D({shouldOpenWheelOnHover:p,isHovered:o});let m=a?w.rf:w.he;return i.createElement("button",{className:l()(w.tS,m),onMouseEnter:()=>!c.Ay.isIpad&&s(!0),onMouseLeave:()=>!c.Ay.isIpad&&s(!1),onClick:()=>{p||(a?e():r())},tabIndex:-1},a?i.createElement("span",{className:w._V},(0,u.tx)("voting.delightful_toolbar.votes_remaining",{numVotes:n})):i.createElement(i.Fragment,null,i.createElement(d.B,{className:w.oE,svg:A.A}),i.createElement("span",{className:w._V},(0,u.tx)("voting.delightful_toolbar.no_votes_remaining"))))}function D({shouldOpenWheelOnHover:e,isHovered:r}){let n=e&&r;(0,i.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>F({source:"peeking_vote_wheel_hover",openedViaHover:!0}),100);return()=>clearTimeout(e)},[n])}function k({onClickToOpenWheel:e,isStampToolSelected:r,hasRemainingVotes:n}){let[a,o]=(0,i.useState)(!1),s=i.useRef(null),d=M(),u=function({isHidden:e,wheelRef:r}){let[n,a]=i.useState(!1);return i.useEffect(()=>{if(e){a(!0);return}let n=r.current;if(!n){a(!1);return}let i=()=>{a(!1),n.removeEventListener("transitionend",i)};return n.addEventListener("transitionend",i),()=>{n.removeEventListener("transitionend",i)}},[e,r]),e||n}({isHidden:d,wheelRef:s}),p=n&&!c.Ay.isIpad;D({shouldOpenWheelOnHover:p,isHovered:a}),(0,i.useEffect)(()=>{let e=s.current;if(!e)return;let r={transform:`${R} scale(1.05)`},n={transform:`${R} scale(1)`},i=new Animation(new KeyframeEffect(e,[{transform:"translateY(100%) scale(0.1)"},r],{duration:450,easing:"ease-out"})),a=new Animation(new KeyframeEffect(e,[r,n],{duration:200,easing:"ease-in-out"})),o=new Animation(new KeyframeEffect(e,[n,n],{duration:400})),l=new Animation(new KeyframeEffect(e,[n,{}],{duration:300,easing:"cubic-bezier(0.37, 0, 0.48, 1.33)"}));return i.play(),i.finished.then(()=>a.play()).catch(()=>{}),a.finished.then(()=>o.play()).catch(()=>{}),o.finished.then(()=>l.play()).catch(()=>{}),()=>{i.cancel(),o.cancel(),l.cancel()}},[s]);let m=!(r||n);return i.createElement("div",{className:w.$},i.createElement("button",{ref:s,tabIndex:-1,className:l()(w.uA,{[w.hA]:m,[w.wj]:d,[w.tq]:u,[w.FP]:!n}),onMouseEnter:()=>!c.Ay.isIpad&&o(!0),onMouseLeave:()=>!c.Ay.isIpad&&o(!1),onClick:()=>!p&&e()}))}function M(){return(0,a.d4)(e=>"WHEEL"===e.multiplayerEmoji.type&&["STAMP1","STAMP2"].includes(e.multiplayerEmoji.wheelType))}function F({source:e,openedViaHover:r=!1}){let n=(0,h.Tc)(N),i=(0,h.Tc)(b.HY);if(n||i){let a=n?n.getBoundingClientRect():i.getBoundingClientRect(),o=a.x+a.width/2,s=a.y-(g.l+2)-14;_.CB.handleShortcutPressWithType({viewportX:o,viewportY:s,source:e,openedViaHover:r,wheelType:"STAMP"}),_.CB.handleShortcutRelease(o,s)}}(0,i.memo)(function(){let e=(0,a.wA)(),r=M(),n=(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.STAMP)||r,s=(0,f.XM)(),c=(0,S.hr)(),d=c>0,u=(0,a.d4)(e=>e.universalInsertModal.showing),h=(0,v.bu)(),g=(0,i.useCallback)(()=>{s&&e(m.H1({votingStage:o.W8Y.NOT_JOINED})),e(p.Ho())},[e,s]),A=(0,i.useCallback)(()=>{r?_.CB.closeWheel():F({source:b.fK})},[r]);return i.createElement("div",{"data-element-target":N,className:l()(w.Zh,w.UJ)},i.createElement(T.IB,{toolType:"stamp",recordingKey:(0,b.hx)("stamp"),isSelected:n,className:w.iE,onClick:A,"data-tooltip-type":E.Ib.LOOKUP,"data-tooltip":"set-tool-stamp",onboardingKey:"stamp",tooltipLocation:s?"below":"above",tooltipOffset:s?{offsetX:0,offsetY:-14}:void 0,"data-tooltip-bottom-flip-margin":s?0:void 0,hasOpenSubmenu:!1},e=>i.createElement(I.gd,{toolType:"stamp",inactiveIcon:i.createElement(y.oV,null),hoveredIcon:i.createElement(y.mS,null),activeIcon:i.createElement(y.dF,null),isSelected:n,isHovered:e})),s&&!u&&!h&&i.createElement(i.Fragment,null,i.createElement(P,{leaveVotingSessionAndCloseWheel:g,onClickToOpenWheel:A,numVotesRemaining:c,hasRemainingVotes:d}),i.createElement(k,{onClickToOpenWheel:A,isStampToolSelected:n,hasRemainingVotes:d})))})},807671:(e,r,n)=>{"use strict";n.d(r,{J:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(158200);function l({className:e,disabled:r,isDragging:n,children:a,"aria-hidden":l}){return i.createElement("div",{"aria-disabled":r,"aria-hidden":l,className:o()(s.F0,{[e||""]:!!e,[s.FK]:r,[s.Bx]:n}),"data-fullscreen-intercept":!0},a)}},949889:(e,r,n)=>{"use strict";n.d(r,{XN:()=>s,ti:()=>l});var i=n(411855),a=n(629019),o=n.n(a);function s({alignment:e,children:r,onMouseEnter:n,onMouseLeave:a,innerRef:s}){return i.createElement("div",{className:o()("dlt_submenu--submenuContainer--M4ufs delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:a,ref:s},r)}function l({isSelected:e,children:r,explicitWidth:n,shouldCenterContent:a,noScaleAnimation:s,isRightEdge:l}){return i.createElement("div",{style:{width:n},className:o()("dlt_submenu--toolBackground--St0Y2 delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!s,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":a,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!l})},r)}n(522739),n(47506),n(939863),n(385326),n(116723),n(684690),n(511080),n(979686),n(557558),n(677859),n(948529)},383847:(e,r,n)=>{"use strict";n.d(r,{IB:()=>y});var i=n(411855),a=n(629019),o=n.n(a),s=n(498750),l=n(153234),c=n(522739),d=n(483990),u=n(672517),p=n(219001),m=n(979686),h=n(751025),_=n(520325),g=n(807671),f=n(158200);let E=(0,i.forwardRef)(({toolType:e,isSelected:r,onClick:n,children:a,tooltipOffset:u={offsetX:0,offsetY:12},tooltipLocation:h="above",className:E,recordingKey:y,onboardingKey:b,ButtonLayout:I=g.J,isDisabled:T=!1,clickOnMouseDown:v=!1,inTabOrder:S=!0,ariaLabel:w,isHovered:A,isEnabledForViewers:N=!1,onMouseEnter:C,onMouseMove:O,onMouseLeave:L,onTouchStart:R,onTouchEnd:P,hasOpenSubmenu:D,testId:k,...M},F)=>{let{state:x,dispatch:U}=(0,i.useContext)(p.nS),B=(0,m.hv)({isEnabledForViewers:N})||T,V=x.draggedTool===e,G=w||M["data-tooltip"],H=e=>{e.preventDefault(),e.stopPropagation(),x.shouldFinishClick&&!v&&n(e)};return i.createElement(c.D8,{className:o()(f.Zh,f.$y,{[f.ll]:B}),recordingKey:y,onMouseEnter:C,onMouseMove:O,onMouseLeave:L,onTouchStart:R,onTouchEnd:P,onPointerDown:B?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),v?(n(e),U({type:"cancel drag"})):U({type:"start click"}),!_.T.RECORD_DETAILED_EVENTS)return l.aH},onClick:B?void 0:H,"data-tooltip-type":V?null:M["data-tooltip-type"],"data-tooltip-submenu-open":D,"data-tooltip":M["data-tooltip"],"data-tooltip-offset-x":M["data-tooltip-offset-x"]??u.offsetX,"data-tooltip-offset-y":M["data-tooltip-offset-y"]??u.offsetY,"data-tooltip-show-above":"above"===h||void 0,"data-tooltip-show-below":"below"===h||void 0,"data-tooltip-show-left":"left"===h||void 0,"data-tooltip-bottom-flip-margin":M["data-tooltip-bottom-flip-margin"],"data-onboarding-key":b,"data-fullscreen-intercept":!0,"data-testid":k},i.createElement(I,{className:E,isHovering:A,isSelected:r,disabled:B,isDragging:V,"aria-hidden":!0},a),i.createElement(c.D8,{className:o()(f.yG,f.dR,{[f.ll]:B,[f.vu]:r,[f.Lt]:"select"===e,[f.sD]:"hand"===e}),onClick:B?void 0:H,onKeyDown:B?void 0:e=>{e.keyCode===s.Uz.ENTER&&x.shouldFinishClick&&!v&&n(e)},forwardedRef:F,role:function(e,r){let n;return e.shouldDemoteDlt?n="presentation":r&&(n="button"),n}(x,S),tabIndex:S&&!B?0:-1,"aria-hidden":!S,"aria-label":G&&S?function(e){try{return(0,d.A)(e)||e}catch(r){return e}}(G):void 0,"aria-disabled":B,"data-fullscreen-intercept":!0}))}),y=(0,i.forwardRef)(({children:e,hasExtraLongHoverTime:r,...n},a)=>{let{isHovered:o,hoverTarget:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onTouchStart:u,onTouchEnd:p}=(0,h.W)(n.onClick,r),m="function"==typeof e?e(o,s):e;return i.createElement(E,{...n,ref:a,isHovered:o,onMouseEnter:l,onMouseLeave:d,onMouseMove:c,onTouchStart:u,onTouchEnd:p},m)});(0,u.tf)(y)},557558:(e,r,n)=>{"use strict";var i=n(463546);i.lLk.id,i.kp0.id,i.Njd.id,i.MJs.id,i.zoI.id,i.wRI.id,i.Kze.id},184184:(e,r,n)=>{"use strict";n.d(r,{B:()=>s});var i=n(587670),a=n(38580);let o=i.cxo.SELECTION,s=(0,a.eU)(o)},676938:(e,r,n)=>{"use strict";n.d(r,{Y:()=>a});var i=n(411855);function a(e,r={}){let{closeOnEsc:n,ignore:o=[]}=r;(0,i.useEffect)(()=>{let r=r=>{if(e&&"allClicks"!==o){if(Array.isArray(o)){for(let e of o)if(e&&"current"in e&&(e=e.current),e&&function(e,r){let n=e;for(;null!==n;){if(n===r)return!0;n=n.parentElement}return!1}(r.target,e))return}else if(o(r.target))return;e()}},i=r=>{"Escape"===r.key&&e&&e()};return document.addEventListener("pointerdown",r),n&&document.addEventListener("keydown",i),()=>{document.removeEventListener("pointerdown",r),n&&document.removeEventListener("keydown",i)}},[e,n,o])}},525040:(e,r,n)=>{"use strict";n.d(r,{Vi:()=>l,bu:()=>s});var i=n(188507),a=n(587670),o=n(333399);function s(){return!!(0,i.d4)(e=>{let r=e?.mirror?.appModel?.currentTool;return r&&(0,o.L)(r)?r:null})}function l(){return(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===a.NLJ.COMMENTS)}n(548785)},161405:(e,r,n)=>{"use strict";n.d(r,{F5:()=>s,oM:()=>l});var i=n(776250),a=n(794272),o=n(239671);function s(){return(0,a.R)(e=>(function(e){try{if(!("selectedView"in e)||"object"!=typeof e.selectedView)return;let r=e.selectedView;if(!("editorType"in r)||r.editorType!==o.nT.Whiteboard)return;if("search"in e&&e.search.sessionId)return{session_id:e.search.sessionId}}catch{return}})(e))}function l(e){(0,i.sx)("universal_insert_resource_added",{resource_id:e.id,resource_type:e.type,source:e.source,...e.options})}},587467:(e,r,n)=>{"use strict";n.d(r,{qV:()=>l,ym:()=>s});var i=n(988022);let a={toggles_mute:"toggles_mute",changes_volume:"changes_volume"},o=(e,r,n,a)=>{(0,i.ds)(e,r.openFile?.key,r,{...n,multiplayer_count:r.multiplayer.allUsers.length},a)},s=(e,r)=>o(a.toggles_mute,e,{isMuted:r}),l=(e,r)=>o(a.changes_volume,e,{volume:r})},411189:(e,r,n)=>{"use strict";n.d(r,{$_:()=>c,I8:()=>d,P0:()=>a,_s:()=>o,c4:()=>l,om:()=>u});var i=n(518261);function a(e){let r=[];return e.forEach(e=>{let n=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[n].start_time,r.push(e)}),r}async function o({songID:e,onSuccess:r,onNotFound:n}){try{await i.N.getActive({songID:e}),r()}catch(r){if(404===r.status){n();return}throw console.warn(`Failed to fetch active song with id ${e}: ${r}`),n(),r}}let s=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"];function l(){return"mediaSession"in navigator&&!!navigator.mediaSession.metadata}function c(e,r){if(!e)return;let{title:n,album_art:i}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:"FigJam Music",artwork:[{src:i||""}]}),s))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(r){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}r&&navigator.mediaSession.setActionHandler("stop",()=>{r()})}}function d(){if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,s))try{navigator.mediaSession.setActionHandler(e,null)}catch(r){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}}function u(){navigator.mediaSession.setActionHandler("play",null)}},728406:(e,r,n)=>{"use strict";n.d(r,{FR:()=>l,P$:()=>o,YI:()=>s});var i=n(966712),a=n(737499);function o(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function s(e){return e<10?`0${e}`:`${e}`}function l(){let e=(0,a.F4)();return(0,i.kc)().figjam_ui2_overhaul?!!e?.shouldShowTimerOnTheLeft:!e?.shouldOptimizeForIpadApp||!!e?.shouldShowTimerOnTheLeft}},68517:(e,r,n)=>{"use strict";var i=n(288706),a=n(38580),o=n(374626),s=n(286640),l=n(529928),c=n(728406);function d(){let e=(0,s.DN)().get("last-timer-set-time")||180;return{seconds:(0,c.YI)(e%60),minutes:(0,c.YI)(Math.floor(e/60)),lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}}(0,i.um)(d(),(e,r)=>{let n={...e,lastAction:r};switch(r.type){case"set-seconds":return{...n,seconds:r.seconds};case"set-minutes":return{...n,minutes:r.minutes};case"set-time":return{...n,minutes:r.minutes,seconds:r.seconds};case"add-minutes":let i=Math.min(Math.max(0,parseInt(n.minutes)+r.minutes),99).toString(),a=1===i.length?"0"+i:i;return{...n,minutes:a};case"start-timer":let o=60*parseInt(n.minutes)+parseInt(n.seconds);if(1e3*o<=0)return n;return{...n,lastUsedTime:o};case"reset-state":return d();default:return n}});let u=(0,l.bt)(e=>e.timer),p=(0,a.eU)({});(0,o.yu)((0,a.eU)(e=>(e(p),Math.max(0,Math.ceil((0,c.P$)(e(u).time)/1e3))),(e,r,n)=>{r(p,{})}),({setSelf:e})=>{let r=setInterval(()=>{let r=o.zl.get(u);!r||!r.time||r?.time?.isPaused||e("RECOMPUTE")},200);return()=>clearInterval(r)})},631169:(e,r,n)=>{"use strict";n.d(r,{V3:()=>w,w:()=>S,HG:()=>A});var i=n(411855);n(188507),n(587670);var a=n(745701),o=n(134288),s=n(323434),l=n(305874),c=n(153234),d=n(799569),u=n(827586),p=n(939863),m=n(278733);n(625651);var h=n(501972),_=n(161325),g=n(601607),f=n(634951),E=n(861802),y=n(266023),b=n(599486),I=n(522322);n(74505),n(457630);var T=n(860168),v=n(676905);let S=32,w=7.5,A=256;var N=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(N||{}),C=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(C||{});function O({clientHeight:e,scrollHeight:r,scrollTop:n}){return 1>Math.abs(r-e-n)}function L({numTotalVotes:e,isMostVoted:r}){return i.createElement("span",{className:v.TK},i.createElement("span",null,(0,p.tx)("voting.pin.votes",{numVotes:e})),r&&i.createElement("img",{src:b.Ys,className:v.C0,alt:(0,p.t)("voting.pin.medal_img_alt")}))}function R({reportWidth:e,numTotalVotes:r,isMostVoted:n,scale:a,padding:o}){let s=i.useRef(null);return i.useLayoutEffect(()=>{let r=s.current;if(r){let{width:n}=r.getBoundingClientRect();window.myEl=r,e(n)}},[s,r,n,a,o.paddingLeft,o.paddingRight,o.paddingTop,o.paddingBottom,e]),i.createElement("div",{className:v.D9,style:{transform:`scale(${a})`},"aria-hidden":!0},i.createElement("span",{style:o,ref:s},i.createElement(L,{numTotalVotes:r,isMostVoted:n})))}function P({userId:e,nodeVotes:r}){let n=r.length>3,a=n?r.slice(0,2):r,o=r.length-2;return i.createElement("li",{key:e,className:v.QE},i.createElement(D,{userId:e}),i.createElement("div",{className:v.WK},a.map(e=>i.createElement(M,{key:e,stampId:e})),n&&i.createElement("span",{className:v._v},o)))}function D({userId:e}){let{user:r,loading:n}=(0,_.wW)(e);return i.createElement(i.Fragment,null,i.createElement(y.v,{userId:e,user:r,loading:n,size:24,loadingClassName:v.SD}),i.createElement(y.m,{userId:e,user:r,loading:n,defaultClassName:v.nT,loadingClassName:v.fK}))}function k({overflowCount:e}){return i.createElement("li",{className:v.Qf},i.createElement("div",{className:v.EA},i.createElement(b.xL,null)),i.createElement("span",{className:v.iG},(0,p.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function M({stampId:e}){let r=(0,l.fU)(),n=(0,g.Fk)((e,r)=>{let n=e.get(r);return n?n.name:null},e),a=(()=>{let e=E.WJ.find(e=>e.label===n);return e&&(0,f.k6)(e,r)||E.tR})(),o=n?(0,p.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,p.t)("voting.pin.stamp_preview_alt_without_type");return i.createElement("img",{className:v.O8,src:a,alt:o})}i.memo(function({nodeVoteInfo:e,isMostVoted:r,pinState:n,setIsHovered:l,selectPin:p,deselectPin:_,viewportSize:g,currentUserId:f,recordingKey:E}){let y=(0,i.useRef)(null),b=(0,i.useRef)(null),[A,N]=(0,i.useState)(0),[C,D]=(0,i.useState)(!1),[M,F]=(0,i.useState)(!0),[x,U]=(0,i.useState)(0),[B,V]=(0,i.useState)(!1),G=(0,I.oC)(e),H={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[g],W={large:1,medium:.9,small:.8,xSmall:.7}[g];(0,i.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,h.n3)(e.target,y.current)||_()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,_,e.guid]);let K=r?m.sx.colorBgvotingtertiary.$.backgroundColor:m.sx.colorBg.$.backgroundColor,j={default:{transform:`scale(${W})`,backgroundColor:K,borderColor:K,opacity:1,...H},dimmed:{transform:`scale(${W})`,backgroundColor:K,borderColor:K,opacity:.5,...H},hovered:{transform:"scale(1)",backgroundColor:K,borderColor:K,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:K,...m.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},z={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:T.$tX,height:T.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:T.$tX,height:T.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},Y=(0,i.useMemo)(()=>{let r=(0,I.zi)(f);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>r(e[0],n[0]))},[e.userIdToNodeVotes,f]),$=Y.length>3,q=$?Y.slice(0,2):Y,Z=$?Y.slice(2):[],X={hovered:{height:`${S}px`},selected:{height:"auto"}},J=(0,i.useCallback)(e=>{let r=0!==e;r!==C&&D(r);let n=b.current?.getScrollHeight(),i=b.current?.getTrackHeight(),a=void 0===n||void 0===i||O({clientHeight:i,scrollHeight:n,scrollTop:e});a!==M&&F(a)},[C,M]),Q=(0,i.useCallback)(e=>{if(!e||!b.current){D(!1),F(!0);return}let r=b.current.getScrollTop(),n=b.current.getScrollHeight(),i=b.current.getTrackHeight();D(0!==r),F(O({clientHeight:i,scrollHeight:n,scrollTop:r}))},[]);return i.createElement(a.x,{transition:{duration:.1,ease:"easeInOut"}},i.createElement("div",{role:"button",tabIndex:0,className:v.UD,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:c.rf(E,"click",p),ref:y,style:{transform:`translateX(${10-A}px)`}},i.createElement(o.P.div,{className:v.yM,initial:!1,animate:n,variants:j},i.createElement("p",{className:v.wx},i.createElement(L,{numTotalVotes:G,isMostVoted:r}),i.createElement(o.P.span,{className:v.cG,initial:!1,animate:n,variants:z},"selected"===n&&i.createElement(d.Jn,{className:r?v.E1:void 0,onClick:e=>{e.stopPropagation(),_(),l(!1)}}))),i.createElement(s.N,null,["selected","hovered"].includes(n)&&i.createElement(i.Fragment,null,i.createElement(o.P.div,{className:v.W0,animate:"selected"===n&&C&&!B?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),i.createElement(o.P.div,{className:v.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/W})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/W})`}},i.createElement(u.P,{ref:b,maxHeight:S*w,width:240,allowScrollAndZoomOver:!0,onScroll:J,onCanScrollChange:Q,forceRerenderCount:x},i.createElement("ul",{className:v.hQ},q.map(([e,r])=>i.createElement(P,{key:e,userId:e,nodeVotes:r})),$&&i.createElement(o.P.div,{initial:!1,animate:n,variants:X,onAnimationStart:()=>V(!0),onAnimationComplete:()=>{V(!1),U(e=>e+1)}},"hovered"===n&&i.createElement(k,{overflowCount:Y.length-q.length}),"selected"===n&&Z.map(([e,r])=>i.createElement(P,{key:e,userId:e,nodeVotes:r})))))),i.createElement(o.P.div,{className:v.W0,animate:"selected"!==n||M||B?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),i.createElement(R,{reportWidth:N,numTotalVotes:G,isMostVoted:r,scale:W,padding:H}))})},599486:(e,r,n)=>{"use strict";n.d(r,{Ys:()=>a,xL:()=>o});var i=n(411855);let a="https://static.figma.com/uploads/295306027f272a9b0931ddec9321361f7cd8299b";function o(){return i.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}},140871:(e,r,n)=>{"use strict";n(411855),n(188507),n(138020)},522322:(e,r,n)=>{"use strict";n.d(r,{hr:()=>s,oC:()=>l,zi:()=>c}),n(411855);var i=n(188507);n(587670),n(563706),n(939863),n(662275),n(198371),n(396226);var a=n(356390);n(99506),n(984968),n(300874),n(239671),n(129531),n(900073),n(487392),n(368702),n(140871);var o=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(o||{});function s(){let e=(0,i.d4)(e=>e.mirror.appModel.votingSessionInfo),r=a.BI.getUserId(),n=r&&e.userIdToVoteStampIds[r]?.length||0;return e.userVoteLimit-n}function l(e){return Object.values(e.userIdToNodeVotes).reduce((e,r)=>e+r.length,0)}function c(e){return function(r,n){return r===e?-1:n===e?1:r.localeCompare(n)}}},487392:(e,r,n)=>{"use strict";n.d(r,{$3:()=>l,Fn:()=>o,OO:()=>s}),n(411855),n(188507),n(587670),n(939683);var i=n(563706);n(625651),n(460289);var a=n(737499);n(68517),n(900073),n(368702),n(140871);var o=(e=>(e.OPEN="meetings_panel_open",e.CLOSE="meetings_panel_close",e))(o||{}),s=(e=>(e.MEETINGS_TOOLBAR="meetings_toolbar",e.MEETINGS_MINIMIZED="meetings_minimized",e.MEETINGS_PANEL="meetings_panel",e.INSERTS_MENU="inserts_menu",e.QUICK_ACTIONS="quick_actions",e.IPAD_MENU="ipad_menu",e.MAKE_SOMETHING_V2_ONBOARDING="make_something_v2_onboarding",e))(s||{});function l(){let e=(0,a.F4)();return e?.shouldOptimizeForIpadApp||i.Ay.isIpad}},42173:(e,r,n)=>{"use strict";n.d(r,{AF:()=>U,BV:()=>F,Cn:()=>k,Cz:()=>V,Mr:()=>B,TS:()=>D,V_:()=>x,zS:()=>M});var i=n(675678),a=n(587670);n(568214);var o=n(776621),s=n(939863),l=n(428654),c=n(547302),d=n(781779);let u=["base","baseLight","sticky","highlight","widget","pencilUI3"];function p({colorsToCSS:e,lightDisplayColors:r,darkDisplayColors:n}){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,r])=>[r,e])),LIGHT_DISPLAY:r??e,DARK_DISPLAY:n??e}}let m=a.Hdj.V700,h=new Map;function _(e){return 0===h.size&&function(){let e=a.DV9?.getWhiteboardPaletteTypeToRampValue();if(e)for(let[r,n]of e.entries()){if(!u.includes(r)){(0,o.$D)(i.FigmaTeam.FIGJAM,Error(`${r} doesn't exist in the WhiteboardPaletteType union type`));continue}h.set(r,n)}}(),h.get(e)??m}let g=p({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.GRAY_DARK,d.vh],[a.daH.RED,d.N0],[a.daH.ORANGE,d.qm],[a.daH.YELLOW,d.Sb],[a.daH.GREEN,d.RO],[a.daH.BLUE,d.k0],[a.daH.VIOLET,d.zt],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.BLACK,d.Ws],[a.daH.GRAY_DARK,d._M],[a.daH.BLUE,d.jc],[a.daH.VIOLET,d.mO],[a.daH.WHITE,d.az],[a.daH.RED,d.Af],[a.daH.ORANGE,d.n7],[a.daH.YELLOW,d.p5],[a.daH.GREEN,d.R2]])});function f(e=!1){return a.Ez5?.uiState().showUI3Colors.getCopy()&&!e?function(){let e=_("base");return p({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.GRAY_DARK,d.G0],[a.daH.YELLOW,(0,c.W)(c.r.YELLOW,e)],[a.daH.ORANGE,(0,c.W)(c.r.ORANGE,e)],[a.daH.RED,(0,c.W)(c.r.RED,e)],[a.daH.PINK,(0,c.W)(c.r.PINK,e)],[a.daH.VIOLET,(0,c.W)(c.r.VIOLET,e)],[a.daH.BLUE,(0,c.W)(c.r.BLUE,e)],[a.daH.TEAL,(0,c.W)(c.r.TEAL,e)],[a.daH.GREEN,(0,c.W)(c.r.GREEN,e)],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():g}let E=p({colorsToCSS:new Map([[a.daH.GRAY,d.Z6],[a.daH.GRAY_LIGHT,d.xr],[a.daH.RED_LIGHT,d.Po],[a.daH.ORANGE_LIGHT,d.is],[a.daH.YELLOW_LIGHT,d.Qw],[a.daH.GREEN_LIGHT,d.bu],[a.daH.BLUE_LIGHT,d.oW],[a.daH.VIOLET_LIGHT,d.Py]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.GRAY,d._M],[a.daH.GRAY_LIGHT,d.A4],[a.daH.BLUE_LIGHT,d.X8],[a.daH.VIOLET_LIGHT,d.eN],[a.daH.RED_LIGHT,d._P],[a.daH.ORANGE_LIGHT,d.LL],[a.daH.YELLOW_LIGHT,d.fU],[a.daH.GREEN_LIGHT,d.c6]])});function y(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("baseLight");return p({colorsToCSS:new Map([[a.daH.GRAY,d.Z6],[a.daH.GRAY_LIGHT,d.xr],[a.daH.YELLOW_LIGHT,(0,c.W)(c.r.YELLOW,e)],[a.daH.ORANGE_LIGHT,(0,c.W)(c.r.ORANGE,e)],[a.daH.RED_LIGHT,(0,c.W)(c.r.RED,e)],[a.daH.PINK_LIGHT,(0,c.W)(c.r.PINK,e)],[a.daH.VIOLET_LIGHT,(0,c.W)(c.r.VIOLET,e)],[a.daH.BLUE_LIGHT,(0,c.W)(c.r.BLUE,e)],[a.daH.TEAL_LIGHT,(0,c.W)(c.r.TEAL,e)],[a.daH.GREEN_LIGHT,(0,c.W)(c.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():E}let b=p({colorsToCSS:new Map([[a.daH.STICKY_GRAY,d.oK],[a.daH.STICKY_RED,d.SW],[a.daH.STICKY_ORANGE,d.B9],[a.daH.STICKY_YELLOW,d.Pp],[a.daH.STICKY_GREEN,d.k7],[a.daH.STICKY_BLUE,d.JI],[a.daH.STICKY_VIOLET,d._x],[a.daH.STICKY_PINK,d.a6],[a.daH.STICKY_GRAY_LIGHT,d.Uw]]),lightDisplayColors:new Map([[a.daH.STICKY_GRAY_LIGHT,d.FQ],[a.daH.STICKY_GRAY,d.fh],[a.daH.STICKY_BLUE,d.yG],[a.daH.STICKY_VIOLET,d.DN],[a.daH.STICKY_RED,d.pZ],[a.daH.STICKY_PINK,d.i4],[a.daH.STICKY_ORANGE,d.Q2],[a.daH.STICKY_YELLOW,d.iU],[a.daH.STICKY_GREEN,d.h3]]),darkDisplayColors:new Map([[a.daH.STICKY_GRAY_LIGHT,d.PQ],[a.daH.STICKY_GRAY,d.T2],[a.daH.STICKY_BLUE,d.o$],[a.daH.STICKY_VIOLET,d.Zz],[a.daH.STICKY_RED,d.$b],[a.daH.STICKY_PINK,d.Q1],[a.daH.STICKY_ORANGE,d.aT],[a.daH.STICKY_YELLOW,d.K4],[a.daH.STICKY_GREEN,d.nL]])});function I(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("sticky");return p({colorsToCSS:new Map([[a.daH.STICKY_GRAY,d.Uw],[a.daH.STICKY_YELLOW,(0,c.W)(c.r.YELLOW,e)],[a.daH.STICKY_ORANGE,(0,c.W)(c.r.ORANGE,e)],[a.daH.STICKY_RED,(0,c.W)(c.r.RED,e)],[a.daH.STICKY_PINK,(0,c.W)(c.r.PINK,e)],[a.daH.STICKY_VIOLET,(0,c.W)(c.r.VIOLET,e)],[a.daH.STICKY_BLUE,(0,c.W)(c.r.BLUE,e)],[a.daH.STICKY_TEAL,(0,c.W)(c.r.TEAL,e)],[a.daH.STICKY_GREEN,(0,c.W)(c.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():b}let T=p({colorsToCSS:new Map([[a.daH.HIGHLIGHT_GRAY,d.g$],[a.daH.HIGHLIGHT_RED,d.vD],[a.daH.HIGHLIGHT_ORANGE,d.Ah],[a.daH.HIGHLIGHT_YELLOW,d.wO],[a.daH.HIGHLIGHT_GREEN,d.Td],[a.daH.HIGHLIGHT_BLUE,d.qH],[a.daH.HIGHLIGHT_VIOLET,d.fV],[a.daH.HIGHLIGHT_WHITE,d.nG]]),lightDisplayColors:new Map([[a.daH.HIGHLIGHT_RED,d.qt],[a.daH.HIGHLIGHT_YELLOW,d.DE],[a.daH.HIGHLIGHT_GREEN,d.ev],[a.daH.HIGHLIGHT_BLUE,d.vY],[a.daH.HIGHLIGHT_VIOLET,d.gn],[a.daH.HIGHLIGHT_ORANGE,d.xu],[a.daH.HIGHLIGHT_GRAY,d.AN],[a.daH.HIGHLIGHT_WHITE,d.wl]]),darkDisplayColors:new Map([[a.daH.HIGHLIGHT_RED,d.qt],[a.daH.HIGHLIGHT_YELLOW,d.DE],[a.daH.HIGHLIGHT_GREEN,d.ev],[a.daH.HIGHLIGHT_BLUE,d.vY],[a.daH.HIGHLIGHT_VIOLET,d.gn],[a.daH.HIGHLIGHT_ORANGE,d.xu],[a.daH.HIGHLIGHT_GRAY,d.AN],[a.daH.HIGHLIGHT_WHITE,d.wl]])}),v=p({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.RED,d.N0],[a.daH.ORANGE,d.qm],[a.daH.YELLOW,d.Sb],[a.daH.GREEN,d.RO],[a.daH.BLUE,d.k0],[a.daH.VIOLET,d.zt],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.BLACK,d.Ws],[a.daH.BLUE,d.jc],[a.daH.VIOLET,d.mO],[a.daH.WHITE,d.az],[a.daH.RED,d.Af],[a.daH.ORANGE,d.n7],[a.daH.YELLOW,d.p5],[a.daH.GREEN,d.R2]])});function S(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("pencilUI3");return p({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.RED,(0,c.W)(c.r.RED,e)],[a.daH.ORANGE,(0,c.W)(c.r.ORANGE,e)],[a.daH.YELLOW,(0,c.W)(c.r.YELLOW,e)],[a.daH.GREEN,(0,c.W)(c.r.GREEN,e)],[a.daH.BLUE,(0,c.W)(c.r.BLUE,e)],[a.daH.VIOLET,(0,c.W)(c.r.VIOLET,e)],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():v}a.daH.BLACK,a.daH.WHITE,a.daH.GRAY_DARK,a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.BLUE,a.daH.BLUE_LIGHT,a.daH.VIOLET,a.daH.VIOLET_LIGHT,a.daH.RED,a.daH.RED_LIGHT,a.daH.ORANGE,a.daH.ORANGE_LIGHT,a.daH.YELLOW,a.daH.YELLOW_LIGHT,a.daH.GREEN,a.daH.GREEN_LIGHT,a.daH.PINK,a.daH.PINK_LIGHT,a.daH.INDIGO,a.daH.INDIGO_LIGHT,a.daH.COBALT,a.daH.COBALT_LIGHT,a.daH.TEAL,a.daH.TEAL_LIGHT,a.daH.OLIVE,a.daH.OLIVE_LIGHT,a.daH.STICKY_GRAY_LIGHT,a.daH.STICKY_GRAY,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_RED,a.daH.STICKY_PINK,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_COBALT,a.daH.STICKY_INDIGO,a.daH.STICKY_TEAL,a.daH.STICKY_OLIVE,a.daH.HIGHLIGHT_RED,a.daH.HIGHLIGHT_YELLOW,a.daH.HIGHLIGHT_GREEN,a.daH.HIGHLIGHT_BLUE,a.daH.HIGHLIGHT_VIOLET,a.daH.HIGHLIGHT_ORANGE,a.daH.HIGHLIGHT_GRAY,a.daH.HIGHLIGHT_WHITE;let w=[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.GREEN,a.daH.TEAL,a.daH.BLUE,a.daH.VIOLET,a.daH.PINK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.WHITE],A=[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE],N=[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.GREEN_LIGHT,a.daH.TEAL_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT,a.daH.PINK_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT],C=[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT,a.daH.GREEN_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT],O=[a.daH.BLACK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE],L=[a.daH.STICKY_GRAY,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK,a.daH.STICKY_GRAY_LIGHT],R=[a.daH.STICKY_GRAY,a.daH.STICKY_GREEN,a.daH.STICKY_TEAL,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW],P=[a.daH.HIGHLIGHT_GRAY,a.daH.HIGHLIGHT_RED,a.daH.HIGHLIGHT_ORANGE,a.daH.HIGHLIGHT_YELLOW,a.daH.HIGHLIGHT_GREEN,a.daH.HIGHLIGHT_BLUE,a.daH.HIGHLIGHT_VIOLET,a.daH.HIGHLIGHT_WHITE];function D(e){switch(e){case"widget":case"base":return(a.Ez5?.uiState().showUI3Colors.getCopy()?w:A).map(e=>F(e,"base"));case"baseLight":return(a.Ez5?.uiState().showUI3Colors.getCopy()?N:C).map(e=>F(e,"baseLight"));case"sticky":return(a.Ez5?.uiState().showUI3Colors.getCopy()?R:L).map(e=>F(e,"sticky"));case"highlight":return P.map(e=>F(e,"highlight"));case"pencilUI3":return O.map(e=>F(e,"pencilUI3"))}}function k(e){return"base"===e}function M(e,r,n=a.daH.CUSTOM){let i;let o=l.F.format(e);switch(r){case"widget":case"base":i=f().CSS_TO_COLOR.get(o);break;case"baseLight":i=y().CSS_TO_COLOR.get(o);break;case"sticky":i=I().CSS_TO_COLOR.get(o);break;case"highlight":i=T.CSS_TO_COLOR.get(o);break;case"pencilUI3":i=S().CSS_TO_COLOR.get(o)}return i??n}function F(e,r){let n;switch(r){case"widget":case"base":n=f().COLOR_TO_CSS.get(e);break;case"baseLight":n=y().COLOR_TO_CSS.get(e);break;case"sticky":n=I().COLOR_TO_CSS.get(e);break;case"highlight":n=T.COLOR_TO_CSS.get(e);break;case"pencilUI3":n=S().COLOR_TO_CSS.get(e)}return n?l.F.parse(n):void 0}function x(e,r="base",n=(0,s.t)("whiteboard.colors.custom")){let i=Array.isArray(e)?e[0]:e,o=M(i,r);return"base"===r&&o===a.daH.CUSTOM&&(o=M(i,"baseLight")),function(e){switch(e){case a.daH.BLACK:return(0,s.t)("whiteboard.colors.black");case a.daH.WHITE:return(0,s.t)("whiteboard.colors.white");case a.daH.GRAY_DARK:return(0,s.t)("whiteboard.colors.dark_gray");case a.daH.GRAY:return(0,s.t)("whiteboard.colors.gray");case a.daH.GRAY_LIGHT:return(0,s.t)("whiteboard.colors.light_gray");case a.daH.YELLOW:return(0,s.t)("whiteboard.colors.yellow");case a.daH.YELLOW_LIGHT:return(0,s.t)("whiteboard.colors.light_yellow");case a.daH.ORANGE:return(0,s.t)("whiteboard.colors.orange");case a.daH.ORANGE_LIGHT:return(0,s.t)("whiteboard.colors.light_orange");case a.daH.RED:return(0,s.t)("whiteboard.colors.red");case a.daH.RED_LIGHT:return(0,s.t)("whiteboard.colors.light_red");case a.daH.PINK:return(0,s.t)("whiteboard.colors.pink");case a.daH.PINK_LIGHT:return(0,s.t)("whiteboard.colors.light_pink");case a.daH.VIOLET:return(0,s.t)("whiteboard.colors.violet");case a.daH.VIOLET_LIGHT:return(0,s.t)("whiteboard.colors.light_violet");case a.daH.INDIGO:return(0,s.t)("whiteboard.colors.indigo");case a.daH.INDIGO_LIGHT:return(0,s.t)("whiteboard.colors.light_indigo");case a.daH.COBALT:return(0,s.t)("whiteboard.colors.cobalt");case a.daH.COBALT_LIGHT:return(0,s.t)("whiteboard.colors.light_cobalt");case a.daH.BLUE:return(0,s.t)("whiteboard.colors.blue");case a.daH.BLUE_LIGHT:return(0,s.t)("whiteboard.colors.light_blue");case a.daH.TEAL:return(0,s.t)("whiteboard.colors.teal");case a.daH.TEAL_LIGHT:return(0,s.t)("whiteboard.colors.light_teal");case a.daH.GREEN:return(0,s.t)("whiteboard.colors.green");case a.daH.GREEN_LIGHT:return(0,s.t)("whiteboard.colors.light_green");case a.daH.OLIVE:return(0,s.t)("whiteboard.colors.olive");case a.daH.OLIVE_LIGHT:return(0,s.t)("whiteboard.colors.light_olive");case a.daH.STICKY_GRAY_LIGHT:return(0,s.t)("whiteboard.colors.light_gray");case a.daH.STICKY_GRAY:return(0,s.t)("whiteboard.colors.gray");case a.daH.STICKY_BLUE:return(0,s.t)("whiteboard.colors.blue");case a.daH.STICKY_VIOLET:return(0,s.t)("whiteboard.colors.violet");case a.daH.STICKY_RED:return(0,s.t)("whiteboard.colors.red");case a.daH.STICKY_PINK:return(0,s.t)("whiteboard.colors.pink");case a.daH.STICKY_ORANGE:return(0,s.t)("whiteboard.colors.orange");case a.daH.STICKY_YELLOW:return(0,s.t)("whiteboard.colors.yellow");case a.daH.STICKY_GREEN:return(0,s.t)("whiteboard.colors.green");case a.daH.STICKY_COBALT:return(0,s.t)("whiteboard.colors.cobalt");case a.daH.STICKY_INDIGO:return(0,s.t)("whiteboard.colors.indigo");case a.daH.STICKY_TEAL:return(0,s.t)("whiteboard.colors.teal");case a.daH.STICKY_OLIVE:return(0,s.t)("whiteboard.colors.olive");case a.daH.HIGHLIGHT_RED:return(0,s.t)("whiteboard.colors.pink");case a.daH.HIGHLIGHT_YELLOW:return(0,s.t)("whiteboard.colors.yellow");case a.daH.HIGHLIGHT_GREEN:return(0,s.t)("whiteboard.colors.green");case a.daH.HIGHLIGHT_BLUE:return(0,s.t)("whiteboard.colors.blue");case a.daH.HIGHLIGHT_VIOLET:return(0,s.t)("whiteboard.colors.violet");case a.daH.HIGHLIGHT_ORANGE:return(0,s.t)("whiteboard.colors.orange");case a.daH.HIGHLIGHT_GRAY:return(0,s.t)("whiteboard.colors.gray");case a.daH.HIGHLIGHT_WHITE:return(0,s.t)("whiteboard.colors.white");default:return}}(o)??n}function U(e,r="base"){let n=e+1;switch(r){case"highlight":return(0,s.t)("whiteboard.colors.palette.highlight",{index:n});case"baseLight":return(0,s.t)("whiteboard.colors.palette.light",{index:n});default:return(0,s.t)("whiteboard.colors.palette.base",{index:n})}}function B(e,r="rgba(255, 255, 255, 1)"){return f().COLOR_TO_CSS.get(e)??r}function V(e,r,n){let i;let o={...e,a:1},s=M(o,r);if(s===a.daH.NONE||s===a.daH.CUSTOM)return l.F.format(o);switch(r){case"baseLight":i=y();break;case"sticky":i=I();break;case"highlight":i=T;break;case"pencilUI3":i=S();break;default:i=f()}return("light"===n?i.LIGHT_DISPLAY.get(s):i.DARK_DISPLAY.get(s))??l.F.format(o)}[d.jR,d.xr,d.N0,d.Sb,d.RO].map(e=>l.F.parse(e))},300587:(e,r,n)=>{"use strict";n.d(r,{ZE:()=>D});var i=n(411855),a=n(629019),o=n.n(a),s=n(568214),l=n(91408),c=n(794272),d=n(153234),u=n(522739),p=n(743282),m=n(939863),h=n(428654),_=n(775664),g=n(301462),f=n(694241),E=n(498606),y=n(684690),b=n(677859),I=n(437771),T=n(948529),v=n(96913),S=n(260378),w=n(42173),A=n(274738),N=n(860168),C=n(404187),O=n(377935);let L=(0,l.jz)(N.YPH);function R(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let P={right:S.nm,center:void 0,left:S.Gu};function D({value:e,onColorChange:r,onOpacityChange:n,recordingKey:a,paletteType:o,additionalContentsTop:s,buttonSize:l,buttonBackground:d,buttonClassName:u,buttonCaretType:p,dropperDisabled:m,optionSize:h,customOpacity:_,ariaLabel:g,alignment:E,inlineButtonTooltip:b,palettePickerPopoverWrapper:I,onlyShowCustomColorPopover:T,isColorPopoverOpen:v,shouldDisableDataTooltip:S,setIsColorPopoverOpen:A,positionX:N,positionY:C}){let O=(0,c.R)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),L={name:"figjam_node_color_change",properties:{node_type:O&&1===Object.keys(O).length&&Object.keys(O).pop()||"MIXED",...O}},{variations:R,type:P}=(0,y.Z9)(),D=(P===f.Yv.DEFAULT?(0,w.TS)(o):R[o].slice()).map((e,r)=>({option:e,tooltip:P===f.Yv.DEFAULT?(0,w.V_)(e,o):(0,w.AF)(r,o)})),M=D.length;if("base"===o){let e=(P===f.Yv.DEFAULT?(0,w.TS)("baseLight"):R.baseLight).map((e,r)=>({option:e,tooltip:P===f.Yv.DEFAULT?(0,w.V_)(e,"baseLight"):(0,w.AF)(r,"baseLight")}));D.push(...e)}return i.createElement(k,{options:D,value:{option:e},onColorChange:e=>r(e.option),onOpacityChange:n,recordingKey:a,paletteType:o,numColumns:M,analytics:L,additionalContentsTop:s,buttonSize:l,buttonBackground:d,buttonClassName:u,buttonCaretType:p,dropperDisabled:m,optionSize:h,customOpacity:_,alignment:E,ariaLabel:g,inlineButtonTooltip:b,palettePickerPopoverWrapper:I,onlyShowCustomColorPopover:T,isColorPopoverOpen:v,shouldDisableDataTooltip:S,setIsColorPopoverOpen:A,positionX:N,positionY:C})}function k({value:e,onColorChange:r,onOpacityChange:n,recordingKey:a,additionalContentsTop:o,additionalContentsBottom:l,options:c,inlineButtonTooltip:u,paletteType:p,numColumns:h,buttonSize:_,buttonBackground:g="dark",buttonClassName:f,buttonCaretType:E="down",dropperDisabled:y,optionSize:I,isDesignInlineMenu:S,analytics:A,customOpacity:N,ariaLabel:C,alignment:O,positionX:L,positionY:R,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:D,isColorPopoverOpen:k,setIsColorPopoverOpen:F,shouldCustomColorPopoverCloseOnEscape:x,hasNonWhiteboardColors:U,onlyShowCustomColorPopover:B,isCustomColorSwatchShown:V,customOptions:G,customOptionsHeader:H}){let[W,K]=i.useState(!1),j={...(Array.isArray(e.option)?e.option[0]:e.option)??s.UE};return N&&(j.a=N),i.useEffect(()=>{F&&F(W)},[W,F]),B||W?i.createElement(v.v,{target:i.createElement(b.$n,{onClick:()=>K(!W),caret:E,active:"light"===g?"LOUD":"NORMAL",recordingKey:(0,d.Pt)(a,"colorSelectorButton"),className:f,tooltip:u||(0,w.V_)(e.option,p,(0,m.t)("whiteboard.inline_menu.color")),role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,w.V_)(e.option,p).toLocaleLowerCase()})},i.createElement(T.cd,{size:_,value:e.option,paletteType:p,background:g})),color:j,isOpen:W,onColorChange:e=>{r({option:e})},onOpacityChange:e=>{n&&n(e)},onClose:()=>{K(!1)},theme:"dark",analytics:A,recordingKey:(0,d.Pt)(a,"customColorPopover"),showOpacity:null!=N,alignment:O,positionX:L,positionY:R,dropperDisabled:y,shouldCloseOnEscape:x}):i.createElement(M,{value:e,options:c,onColorChange:r,onCustomColor:()=>K(!0),additionalContentsTop:o,additionalContentsBottom:l,inlineButtonTooltip:u,paletteType:p,buttonSize:_,buttonClassName:f,buttonCaretType:E,buttonBackground:g,optionSize:I,isDesignInlineMenu:S,numColumns:h,analytics:A,recordingKey:a,ariaLabel:C,alignment:O,palettePickerPopoverWrapper:P,shouldDisableDataTooltip:D,positionX:L,positionY:R,isColorPopoverOpen:k,setIsColorPopoverOpen:F,hasNonWhiteboardColors:U,isCustomColorSwatchShown:V,customOptions:G,customOptionsHeader:H})}function M({value:e,onColorChange:r,onCustomColor:n,recordingKey:a,additionalContentsTop:l,additionalContentsBottom:c,options:f,inlineButtonTooltip:v,paletteType:S,buttonSize:N,buttonClassName:D,buttonCaretType:k="down",buttonBackground:M="dark",optionSize:F,isDesignInlineMenu:x,numColumns:U,analytics:B,ariaLabel:V,alignment:G="center",palettePickerPopoverWrapper:H,shouldDisableDataTooltip:W,positionX:K,positionY:j,isColorPopoverOpen:z,setIsColorPopoverOpen:Y,hasNonWhiteboardColors:$,isCustomColorSwatchShown:q,customOptions:Z,customOptionsHeader:X}){let J=i.useRef((0,p.g)()),Q=i.useRef((0,p.g)()),ee=R(e.option),et=(0,y.iN)(ee,S),er=(0,y.iN)(ee,"baseLight")&&"base"===S,en=$?function(e,r){try{return!r.find(r=>{let n=R(r.option),i=R(e.option);return n&&i&&(0,s.DA)(n,i)})}catch(e){return console.error(e),!1}}(e,f):et&&er,ei=()=>{z&&n()},ea=r=>en?i.createElement(u.GG,{id:Q.current,...W?{}:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,m.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()(O.s,{[C.H]:r}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),recordingKey:(0,d.Pt)(a,"colorSelectorCustomOption"),onPointerUp:ei},i.createElement(T.cd,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:e.option,selectionState:"selected_custom",paletteType:S,background:"dark",size:"medium"})):i.createElement(u.GG,{id:Q.current,key:"custom-color",recordingKey:(0,d.Pt)(a,"colorSelectorCustomOption"),onPointerUp:ei,role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),className:o()(O.s,{[C.H]:r})},i.createElement(T.ZI,{shouldDisableDataTooltip:W}));return i.createElement(I.Fn,{value:e,onChange:e=>{r(e),B&&g.F.trackFromFullscreen("figjam_node_color_change",{source:"default",color:_.z5.format(e.option),...B.properties})},options:f,renderOption:({value:e,onClick:r,id:n,isSelected:s,isFocused:l})=>i.createElement(u.GG,{id:n,...W?{}:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":e.tooltip||(0,w.V_)(e.option,S),"data-tooltip-show-above":!0},className:o()(O.s,{[C.H]:l}),key:h.F.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,w.V_)(e.option,S),onPointerUp:e=>{z&&r(e)},recordingKey:(0,d.Pt)(a,"colorSelectorOption",h.F.format(e.option)),tabIndex:-1},i.createElement(T.cd,{value:e.option,selectionState:s?"selected":"unselected",paletteType:S,size:F,background:"dark"})),renderButton:({value:e,ref:r,onClick:n,onKeyDown:o,active:s,activeOptionId:l})=>i.createElement(b.$n,{role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,w.V_)(e.option,S).toLocaleLowerCase()}),onPointerDown:n,onKeyDown:o,ariaActiveDescendant:l,ariaControls:J.current,caret:k,active:s?"light"===M?"LOUD":"NORMAL":"NONE",recordingKey:(0,d.Pt)(a,"colorSelectorButton"),tooltip:v||(0,w.V_)(e.option,S,(0,m.t)("whiteboard.inline_menu.color")),isDesignInlineMenu:x,isNewSubmenu:"light"===M,className:D},i.createElement(T.cd,{size:N,value:e.option,paletteType:S,background:M,ref:r})),optionEquality:(e,r)=>!(Array.isArray(e.option)||Array.isArray(r.option))&&(0,s.DA)(e.option,r.option),OptionWrapper:U?(0,T.Wj)(U,L+"px",V,J.current):(0,T.lX)(f.length,L+"px",V,J.current),PopoverWrapper:H||I.wM,additionalOptions:(e=!1)=>i.createElement(A.R,{customOption:ea(e),paletteType:S,isCustomColorSwatchShown:q}),additionalOptionId:Q.current,additionalOptionOnChange:n,additionalContentsTop:l,additionalContentsBottom:c,positionX:K??P[G],positionY:j,onToggleMenuOpen:Y,customOptions:Z,customOptionsHeader:X})}},422694:(e,r,n)=>{"use strict";n.d(r,{Q:()=>c,r:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(538697);function l({setMaxWidth:e,render:r}){let[n,a]=i.useState(new Map),o=i.useMemo(()=>n.size?Math.max(...n.values()):void 0,[n]);i.useLayoutEffect(()=>e(o),[o,e]);let s=i.useCallback((e,r)=>a(n=>{if(n.get(e)===r)return n;let i=new Map(n);return"number"==typeof r?i.set(e,r):i.delete(e),i}),[]);return i.createElement(i.Fragment,null,r({reportWidthOfValue:s}))}function c(e){return i.createElement(l,{setMaxWidth:e.setMaxWidth,render:({reportWidthOfValue:r})=>i.createElement(i.Fragment,null,e.options.map((n,a)=>i.createElement(d,{key:a,reportWidth:r,value:n,optionProps:{fullWidth:!0,formattedValue:e.formatOption(n),selected:!0}})))})}function d({reportWidth:e,value:r,optionProps:n}){let a=i.useRef(null),l=a.current?.getElement(),c=l?.getBoundingClientRect().width;return i.useLayoutEffect(()=>(null!=c&&e(r,c),()=>e(r,void 0)),[c,r,e,n.svg]),i.createElement("div",{className:"max_width_measurer--offscreenMeasurementContainer--9njQ1","aria-hidden":!0},i.createElement(s.c$,{...n,additionalStylesClassName:o()(n.additionalStylesClassName,"max_width_measurer--optionForMeasurement--KWLg2"),ref:a}))}},677859:(e,r,n)=>{"use strict";n.d(r,{$n:()=>g,W1:()=>_,wv:()=>f});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(574176),c=n(498606),d=n(817543),u=n(75888),p=n(766071),m=n(112512),h=n(395397);function _({marginBottom:e,size:r,children:n,padding:a,menuRef:s,ariaLabel:l,role:c,tabIndex:d,ariaHidden:u,onBlurCapture:m,onFocus:h,propagateInputToFullscreen:_,testID:g,focusableDivTestId:f,darkModePreferred:E}){return i.createElement("div",{"aria-label":l,"aria-hidden":u,className:p.bH,role:c,tabIndex:d,ref:s,onBlurCapture:m,onFocus:h,"data-fullscreen-intercept":_,"data-testid":f,"data-preferred-theme":E?"dark":void 0},i.createElement("div",{className:o()(p.zr,{[p.EX]:"small"===r}),style:{paddingRight:a,paddingLeft:a,marginBottom:e},"data-testid":g},n))}i.forwardRef((e,r)=>{let{id:n,svg:a,onClick:s,blurOnClick:c,onKeyDown:d,onMouseEnter:u,onMouseLeave:m,onPointerUp:h,onPointerDown:_,svgWidth:f,svgHeight:E,caret:y="none",size:b,tooltip:I,tooltipShortcutActionKey:T,tooltipType:v,resourceId:S,recordingKey:w,active:A="NONE",focused:N,disabled:C,svgStyle:O,buttonStyle:L,buttonChildrenStyle:R,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:D,ariaLabel:k,role:M,tabIndex:F,onboardingKey:x,testId:U}=e,{ariaActiveDescendant:B,ariaControls:V}=e;return i.createElement(g,{id:n,onClick:s,onKeyDown:d,onMouseEnter:u,onMouseLeave:m,onPointerUp:h,onPointerDown:_,blurOnClick:c,caret:y,ref:r,size:b,recordingKey:w,active:A,focused:N,disabled:C,className:o()({[p.$9]:C}),tooltip:I,tooltipShortcutActionKey:T,tooltipType:v,resourceId:S,buttonStyle:L,buttonChildrenStyle:R,isNewSubmenu:D,ariaLabel:k,ariaActiveDescendant:B,ariaControls:V,role:M,tabIndex:F,onboardingKey:x,testId:U},i.createElement(l.B,{svg:a,width:f,height:E,style:O,useOriginalSrcFills_DEPRECATED:P}))});let g=i.forwardRef((e,r)=>{let{id:n,children:a,onClick:_,onMouseEnter:g,onMouseLeave:f,onPointerUp:E,onPointerDown:y,onKeyDown:b,blurOnClick:I,disabled:T,caret:v="none",animateCaret:S=!1,size:w="large",buttonStyle:A,buttonChildrenStyle:N,isNewSubmenu:C,isDesignInlineMenu:O,recordingKey:L,active:R="NONE",focused:P,tooltip:D,tooltipShortcutActionKey:k,tooltipType:M,tooltipMaxWidth:F,resourceId:x,testId:U,className:B="",ariaLabel:V,role:G,tabIndex:H,onboardingKey:W}=e,{ariaControls:K,ariaActiveDescendant:j}=e,z=(0,u._r)(),Y=i.Children.toArray(a),$=1===Y.length&&"string"==typeof Y[0].props.children,q=D&&z?M||c.Ib.TEXT:void 0,Z="combobox"===G&&"NONE"!==R;return i.createElement(s.GG,{id:n,"aria-label":V??(0,d.En)({"data-tooltip-type":q??c.Ib.TEXT,"data-tooltip":D??""}),"aria-controls":K,"aria-owns":Z?K:void 0,"aria-activedescendant":Z?j:void 0,"aria-pressed":"button"===G||null==G?"NONE"!==R:void 0,"aria-checked":"switch"===G?"NONE"!==R:void 0,"aria-expanded":"combobox"===G?"NONE"!==R:void 0,tabIndex:H??"option"===G?-1:0,role:G,onClick:T?void 0:_,onKeyDown:T?void 0:b,onMouseUp:!T&&I?e=>{e.currentTarget.blur()}:void 0,onMouseEnter:T?void 0:g,onMouseLeave:T?void 0:f,onPointerUp:T?void 0:E,onPointerDown:T?void 0:y,className:o()({[p.x6]:!0,[p.BB]:!0,[p._T]:C,[p.Hh]:O,[p.cN]:"none"!==v&&!!a,[p.Ec]:"none"!==v&&!a,[p.EX]:"small"===w,[p.Pq]:"SOFT"===R,[p.k1]:"NORMAL"===R,[p.F$]:"LOUD"===R,[p.zt]:$,[p.gK]:!T,[p.bI]:P,[B]:!!B}),style:A,forwardedRef:r,recordingKey:L,"data-resource-id":x||void 0,"data-tooltip-show-above":!0,"data-tooltip-type":q,"data-tooltip-max-width":F,"data-tooltip-shortcut-key":k,"data-tooltip":D,"data-fullscreen-intercept":null==b?"true":void 0,"data-onboarding-key":W,dataTestId:U},i.createElement("div",{className:o()({[p.LJ]:$,[p.Qq]:!$,[p.Hh]:O,[p.EX]:"small"===w}),style:N},a),"none"!==v&&i.createElement(l.B,{className:o()({[p.OW]:!0,[p.Ln]:S,[p.y9]:S&&"LOUD"===R}),svg:"up"===v?h.A:m.A}))});function f({size:e="tall",margin:r}){return i.createElement("div",{className:p.me,style:{height:"tall"===e?40:28,marginLeft:r,marginRight:r}})}},437771:(e,r,n)=>{"use strict";n.d(r,{Fn:()=>g,wM:()=>_});var i=n(411855),a=n(433011),o=n(498750),s=n(30637),l=n(743282);n(268537);var c=n(356390),d=n(283942),u=n(677859),p=n(244307),m=n(972719),h=(e=>(e.fontFamilyControl="fontFamilyControl",e))(h||{});function _({children:e,padding:r}){return i.createElement(u.W1,{padding:r},i.createElement("div",{className:m.ec},e))}function g({value:e,onChange:r,options:n,renderOption:u,renderButton:h,optionEquality:g,OptionWrapper:f=function(e,r){return function({children:e}){return i.createElement("div",{id:void 0,role:"listbox","aria-label":void 0,tabIndex:-1,className:m.Wh},e)}}(),additionalOptions:E,additionalOptionId:y,additionalOptionOnChange:b,additionalContentsTop:I,additionalContentsBottom:T,PopoverWrapper:v=_,positionX:S,positionY:w,responsivePositionY:A,popoverClassName:N,onToggleMenuOpen:C,parentComponent:O,customOptions:L,customOptionsHeader:R,overrideMenuOpenState:P,renderButtonRef:D,overrideMenuFocused:k}){let M=(0,i.useRef)(null),[F,x]=(0,i.useState)(!1),U=P?P.isOpenOverride:F,B=P?P.setIsOpenOverride:x,[V,G]=(0,i.useState)(0),[H,W]=(0,i.useState)(!1),K=k?k.focusedIndexOverride:V,j=k?k.setFocusedIndexOverride:G,z=k?k.isFocusedByKeyboardOverride:H,Y=k?k.setIsFocusedByKeyboardOverride:W,$=n.length+(L?L.length:0)+(null!=E?1:0),[q]=(0,i.useState)(()=>{let e=Array($);for(let r=0;r<n.length;r++)e[r]=(0,l.g)();return null!=E&&(e[n.length]=y),e}),Z=new a.W,[X,J]=(0,i.useState)(!0);return i.useEffect(()=>{C&&C(U)},[U,C]),i.createElement(p.A,{target:h({value:e,ref:D??M,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ESCAPE:U?B(!1):e.currentTarget?.blur();break;case o.Uz.ENTER:U&&(K>=0&&K<n.length?r(n[K],e):K===n.length&&E&&b?.(e));break;case o.Uz.RIGHT_ARROW:case o.Uz.LEFT_ARROW:case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(!(0,o.sC)(e,0)){(0,d.f7)(e);break}if(Y(!0),U&&$){let r=K;(r+=e.keyCode===o.Uz.UP_ARROW||e.keyCode===o.Uz.LEFT_ARROW?-1:1)>=$?r=0:r<0&&(r=$-1),j(r)}else U||B(!0);e.preventDefault(),e.stopPropagation();break;case o.Uz.TAB:Y(!1);break;case o.Uz.C:case o.Uz.V:case o.Uz.X:(0,o.Te)(e)&&(c.Y5.triggerAction(e.keyCode===o.Uz.C?"copy":e.keyCode===o.Uz.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,d.f7)(e)}},onClick:()=>{Y(!1),B(!U),O&&"fontFamilyControl"===O&&((0,s.nl)()?J(!0):(J(!1),Z.reset(),Z.scheduleOnce(()=>{J(!0)},250)))},active:U,activeOptionId:null!=K?q[K]:void 0}),onClose:()=>{O&&"fontFamilyControl"===O&&Z.reset(),B(!1)},renderPopoverContents:a=>{let o=(n,i)=>{let a=e=>r(n,e),o=e=>{a(e),B(!1)};return u({value:n,id:q[i],onClick:e=>{(!O||"fontFamilyControl"!==O||X)&&o(e)},isSelected:g?g(n,e):n===e,isFocused:z&&K===i})},s=n.map(o),l=L?.map((e,r)=>o(e,r+s.length));return l?i.createElement(v,{side:a},I,i.createElement(f,null,s),R,i.createElement(f,null,l,E?.(z&&K===s.length+l.length)),T):i.createElement(v,{side:a},I,i.createElement(f,null,s,E?.(z&&K===s.length)),T)},isOpen:U,positionX:S,positionY:w,responsivePositionY:A,className:N})}},948529:(e,r,n)=>{"use strict";n.d(r,{Wj:()=>I,ZI:()=>E,cd:()=>f,lX:()=>T});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234),l=n(522739),c=n(572206),d=n(574176);n(348425);var u=n(939863),p=n(931770),m=n(498606),h=n(42173),_=n(301741),g=n(501191);let f=i.forwardRef(({value:e,paletteType:r,background:n="dark",size:a="medium",selectionState:s="unselected",swatchStyle:c,onClick:d,recordingKey:u,tooltip:p},g)=>{let f,E=null;return Array.isArray(e)&&2===e.length&&(E=i.createElement("div",{className:_.XD,style:{background:(0,h.Cz)(e[1],r,n)},"data-testid":"colorCircle"})),f=Array.isArray(e)?e.length<=2&&e[0]?(0,h.Cz)(e[0],r,n):"rgba(255, 255, 255, 1)":(0,h.Cz)(e,r,n),i.createElement("div",{ref:g,className:o()({[_.C8]:!0,[_.wH]:"selected"===s,[_.DD]:"selected_custom"===s&&"light"===n,[_.Jd]:"selected_custom"===s&&"dark"===n,[_.as]:"large"===a,[_.EX]:"small"===a,[_.s]:"xsmall"===a})},i.createElement("div",{className:_.GW},i.createElement(l.D8,{className:o()(_.nf,{[_.qb]:"light"===n,[_.uB]:"dark"===n}),style:{background:f,...c},onClick:d,recordingKey:u,"data-tooltip-show-above":!0,"data-tooltip-type":p?m.Ib.TEXT:void 0,"data-tooltip":p,"data-testid":"colorCircle"}),E))});function E({onClick:e,swatchStyle:r,recordingKey:n,shouldDisableDataTooltip:a,selectionState:c,size:d="medium"}){return i.createElement(l.D8,{...a?{}:{"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()({[_.C8]:!0,[_.wH]:"selected"===c,[_.as]:"large"===d,[_.EX]:"small"===d,[_.s]:"xsmall"===d}),onClick:e,recordingKey:(0,s.Pt)(n,"colorSelectorCustomOption")},i.createElement("div",{className:_.GW},i.createElement(l.D8,{className:o()(_.yB,_.uB),style:r})))}let y=i.forwardRef(({value:e,size:r="medium",selectionState:n="unselected",swatchStyle:a,onClick:s,onPointerUp:c,recordingKey:d,tooltip:u},p)=>i.createElement("div",{ref:p,className:o()({[_.C8]:!0,[_.wH]:"selected"===n,[_.EX]:"small"===r})},i.createElement("div",{className:_.GW},i.createElement(l.D8,{className:o()(_.nf,_.uB),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...a},onClick:s,onPointerUp:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?m.Ib.TEXT:void 0,"data-tooltip":u}))));function b({children:e,numColumns:r=4,columnWidth:n="1fr",gap:a=0,padding:o,ariaLabel:s,swatchGridRef:l,id:c}){let d=`repeat(${r}, ${n})`;return i.createElement("div",{className:_.FG,style:{gridTemplateColumns:d,gap:`${a}px`,padding:o},"aria-label":s,role:"listbox",tabIndex:-1,id:c,"data-fullscreen-intercept":!0,ref:l},e)}function I(e,r,n,a){return function({children:o}){return i.createElement(b,{numColumns:e,columnWidth:r,padding:8,ariaLabel:n,id:a},o)}}function T(e,r,n,a){let o;return o=e<6?e:6===e?3:e<=8?4:5,function({children:e}){return i.createElement(b,{numColumns:o,columnWidth:r,padding:8,ariaLabel:n,id:a},e)}}i.forwardRef(({imagePaint:e,background:r,size:n="medium",selectionState:a="unselected",hovered:s,onClick:l,onMouseEnter:h,onMouseLeave:f,onPointerUp:E},b)=>{let[I,T]=i.useState(""),v=i.useCallback(e=>{let r=p.jS(e,new c.Mi((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0});r&&r.pixels&&r.pixelSize&&T(p.Pv(r.pixels,r.pixelSize))},[]);return i.useEffect(()=>{e&&v(e)},[e,v]),i.createElement("div",{style:{position:"relative"},onMouseEnter:h,onMouseLeave:f,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},i.createElement(y,{value:I,size:n,selectionState:a,onClick:l,onPointerUp:E,ref:b}),s&&i.createElement("div",{className:_._F},i.createElement(d.B,{svg:g.A,style:{fill:"dark"===r?"white":void 0},className:o()({[_.RB]:!0,[_.hv]:"light"===r,[_.ft]:"dark"===r,[_.EX]:"small"===n})})))})},260378:(e,r,n)=>{"use strict";n.d(r,{Mj:()=>m,T1:()=>u,DH:()=>p,Al:()=>l,Gu:()=>c,nm:()=>d});var i=n(411855);n(629019);var a=n(560945),o=n(622422),s=n(676938);let l=(e,r)=>e.x+e.width/2-r.width/2,c=(e,r)=>e.x,d=(e,r)=>e.x+e.width-r.width,u=(e,r,n)=>e.y-r.height-n,p=(e,r,n)=>e.height+e.y+n;function m({targetRect:e,targetRef:r,children:n,onClose:c,onMeasure:d,onMouseEnter:p,onMouseLeave:m,style:h,offset:_=4,positionX:g=l,positionY:f=u,positionXY:E,childRef:y,onPosition:b,frozen:I,setSizeChanged:T}){let[v,S]=i.useState({x:0,y:0}),[w,A]=i.useState(!1),N=i.useRef(null),C=i.useCallback(e=>{let r=0!==e.width||0!==e.height;A(r),d&&d(e),r||S({x:0,y:0})},[d]),O=(0,a.w)(N,C)??a.c;(0,s.Y)(c,{ignore:[r?.current,N.current]});let L=(0,o.$)(w)&&w,R=(0,o.$)(O);i.useEffect(()=>T&&T(R),[T,R]);let{x:P,y:D}=v,k=0!==P||0!==D?[P,D]:void 0;(L||w&&!I)&&(E?[P,D]=E(e,O,_,k):(P=g(e,O,_),D=f(e,O,_))),i.useEffect(()=>{S({x:P,y:D})},[P,D]);let{width:M,height:F}=O;return i.useEffect(()=>{w&&b&&b(P,D,{width:M,height:F},_)},[P,D,M,F,b,_,w]),i.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${P}px, ${D}px, 0)`,...h,...w?{}:{opacity:0}},onMouseEnter:p,onMouseLeave:m,ref:e=>{N.current=e,y&&y(e)}},n)}},520177:(e,r,n)=>{"use strict";n.d(r,{w:()=>p});var i=n(38580),a=n(288706),o=n(563706),s=n(809831),l=n(555328),c=n(239671),d=n(222085),u=n(554905);let p=(0,i.eU)(e=>{let r=e(s.u8)===c.nT.Whiteboard,n=e(u.hS);return r&&!n&&!o.Xb}),m=(0,i.eU)(async()=>await d.A.getCommunityShelves({shelfType:l.cS.FIGJAM_SECTION_PRESET_PICKER}).then(e=>e.data.meta));(0,a.Rq)(m)},251344:(e,r,n)=>{"use strict";n.d(r,{BQ:()=>s});var i=n(738269),a=n(259927);n(128765);var o=n(356390);function s(e,r){if(!e||!e.isSection||!o.Y5.isReady())return!1;let n=e.sectionPresetShelfId,s=e.sectionPresetTemplateId,l=e.name,c=e.hasSectionPresetWithEdits;return!!l&&(r(i.j7({type:a.si,data:{sectionId:e.guid,sectionName:l,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:c}})),!0)}n(106112)},787523:(e,r,n)=>{"use strict";n.d(r,{iH:()=>i}),n(411855),n(188507),n(587670),n(128906),n(963490),n(358145),n(650769),n(151166),n(988022),n(457025),n(114716),n(457630),n(309798),n(707465),n(589584),n(83012);var i=(e=>(e[e.TRUE=0]="TRUE",e[e.FALSE=1]="FALSE",e[e.LOADING=2]="LOADING",e))(i||{})},666456:(e,r,n)=>{"use strict";n.d(r,{bj:()=>I});var i=n(587670),a=n(86625),o=n(38580),s=n(374626),l=n(777078),c=n(373119),d=n(400380);let u=(0,o.eU)(null),p=(0,o.eU)(null),m=(0,o.eU)({x:0,y:0}),h=(0,o.eU)(null),_=(0,o.eU)(!1),g=(0,o.eU)(!1);(0,o.eU)(e=>e(p)),(0,o.eU)(e=>e(_)),(0,o.eU)(e=>e(g)),(0,o.eU)(e=>e(m));let f=(0,o.eU)(!1),E="new_preview",y=null;function b(){y&&y.abort(E),y=null}(0,o.eU)(null,async(e,r,n,a)=>{let o=!e(_)&&(0,d.t)(n.template,e(p));if(e(g)||o||e(f))return!1;r(v),r(_,!0),r(u,a.previewManager),r(p,n.template),b();let s=(y||(y=new TaskController({priority:"background"})),y);function l(r){return scheduler.postTask(()=>!!((0,d.t)(n.template,e(p))&&e(c.w))&&(r(),!0),{signal:s.signal}).catch(e=>{if(e===E)return!1;throw e})}s.setPriority(a.priority);let I=e(u),T=(async()=>{try{let o=await e(w(n)),s=I?.nodeType===i.Z6A.SECTION?I.options:null;if(!await l(()=>i.Hyj.prepareTemplatePreview(o,s))||!await l(()=>i.Hyj.insertTemplatePreview(a.moveViewportAfterPreview)))return!1;let c=i.Hyj.getTemplatePreviewSize();return r(m,c),r(_,!1),!0}catch(i){throw(0,d.t)(n.template,e(p))&&r(v),i}})();return r(h,T),await T});let I=(0,o.eU)(null,async(e,r,n)=>{let o=e(h);if(!o||e(g))return!1;r(g,!0);try{if(!await o||!e(c.w))return!1;return await scheduler.postTask((0,a.nc)(n.editScopeType,"commit-figjam-template-preview",()=>i.Hyj.commitTemplatePreview(n.selectTemplateAfterCommit,n.moveViewportAfterCommit)),{priority:n.priority}),r(p,null),r(f,!0),r(S),!0}finally{r(g,!1)}}),T=(0,o.eU)(null,(e,r)=>{r(f,!1),e(_)&&(b(),r(v))}),v=(0,o.eU)(null,(e,r)=>{r(p,null),r(h,null),r(_,!1),r(g,!1),e(c.w)&&i.Hyj.clearTemplatePreview()});(0,o.eU)(null,(e,r)=>{r(T),r(v)});let S=(0,o.eU)(null,(e,r)=>{r(u,null),i.Hyj.clearSectionPreviewSupport()}),w=(0,s.Iz)(e=>(0,o.eU)(async()=>await (0,l.dT)(e)),(e,r)=>e.fileKey===r.fileKey&&e.fileVersion===r.fileVersion&&(0,d.t)(e.template,r.template))},83012:(e,r,n)=>{"use strict";n(939863),n(309798),n(288300),n(161074)},911738:(e,r,n)=>{"use strict";n.d(r,{O:()=>d});var i=n(411855);n(587670),n(629019),n(189430);var a=n(563706);n(88570);var o=n(809831);n(949632),n(100197),n(498606);var s=n(939863),l=n(422237),c=n(593911);(0,l.ex)("zoom_slider",function(e){let{zoomPercentage:r}=e;return i.createElement("div",{className:c.P},(0,s.tx)("whiteboard.zoom_slider.zoom_percentage",{zoomProportion:r/100}))},e=>({zoomPercentage:Number(e.dataset.tooltipZoomPercentage)}));function d(){return(0,o.ow)()&&!a.Ay.isIpad}},149620:(e,r,n)=>{"use strict";n.d(r,{Lh:()=>o});var i=n(411855);let a=(0,i.createContext)({close:"Close",dismiss:"Dismiss",loading:"Loading",mixed:"Mixed"});function o(e){return(0,i.useContext)(a)[e]}},976404:(e,r,n)=>{"use strict";n.d(r,{Kg:()=>u,PU:()=>l,U1:()=>p,DX:()=>d});var i=n(411855),a=n(109388),o=n(823988);let s=new Set;function l(){return Array.from(s)}let c=(0,i.createContext)(()=>document.body);function d(){return(0,i.useContext)(c)()}function u({children:e}){let r=d();return(0,a.createPortal)(e,r)}function p(e){let r=(0,i.useRef)(null);return(0,i.useCallback)(n=>{(0,o.c)(e,n),null==n?s.delete(r.current):s.add(n),r.current=n},[e])}}}]);

//# debugId=1776a579-1d60-591c-8e75-5d9a4326ee41

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/0dcc68a8fbe627899b6c23297396649008e7378c/4874-a350fe153f9e04f7.min.js.map